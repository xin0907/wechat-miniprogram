this.__wxLibrary={fileName:"WAXRFrameRenderContext.js",envType:"Service",contextType:"App:SubContext:Safe",execStart:Date.now(),mayHaveSnapshot:!1};var __WAXRFrameRenderContextStartTime__=this.__wxLibrary.execStart,__libVersionInfo__={updateTime:"2023.2.22 17:39:38",version:"2.30.2",features:{pruneWxConfigByPage:!0,injectGameContextPlugin:!0,lazyCodeLoading2:!0,lazyCodeLoadingForDevTool:!0,injectAppSeparatedPlugin:!0,nativeTrans:!0,gameLive:!0,skyline:!0,supportInvokeWithAppId:!0,wkFeatureVersion:4,delayedServiceCodeCache:!0,gameLiveInvite:!0,globalConsole:!0,expt:["clicfg_appbrand_ios_native_download_new","clicfg_appbrand_native_download","clicfg_appbrand_ios_native_socket_wcwss_new","clicfg_navigation_use_scl_alert_v5","clicfg_appbrand_ios_native_readfile","clicfg_appbrand_native_readfile","clicfg_appbrand_ios_game_split_multi_plugincode","clicfg_appbrand_game_split_multi_plugincode","clicfg_appbrand_android_tcp_buffer","clicfg_appbrand_ios_tcp_buffer","clicfg_weapp_weak_net_predict_local","clicfg_wa_ar_iosurface_switch","clicfg_canvas_use_magic_brush","clicfg_appbrand_report_trace_event","clicfg_appbrand_skyline_text_style","clicfg_appbrand_ios_free_httpdns_sdk_cache","clicfg_appbrand_android_free_httpdns_sdk_cache","clicfg_appbrand_ios_inneraudio2webaudio","clicfg_appbrand_android_inneraudio2webaudio","clicfg_appbrand_ios_inneraudio2webaudio_usewebaudio","clicfg_appbrand_android_inneraudio2webaudio_usewebaudio","clicfg_appbrand_ios_allow_multi_context_worker","clicfg_appbrand_ios_allow_worker_binding_message"],snapshotConfig:{"app:main":["WAServiceMainContext.js"],"app:sub":["WASubContext.js"],"app:subRender":["WARenderContext.js"],"game:main":["WAGame.js"],"game:sub":["WAGameSubContext.js"]}},debugOptions:{}},window=this||{},PromiseRejectionEvent=function(){},__clientsubcontext=!0,Reporter,BaseConsole,wxNativeConsole,Trace,BabelRuntimeHelpers={};(()=>{var e={7967:(e,t,r)=>{var n={"./applyDecoratedDescriptor":4725,"./asyncToGenerator":2222,"./extends":1211,"./initializerDefineProperty":6460,"./initializerWarningHelper":9279,"./objectSpread2":4178,"./objectWithoutProperties":3724};function o(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=7967},4725:(e,t,r)=>{"use strict";function n(e,t,r,n,o){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}r.r(t),r.d(t,{default:()=>n})},2222:(e,t,r)=>{"use strict";function n(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var a=e.apply(t,r);function s(e){n(a,o,i,s,c,"next",e)}function c(e){n(a,o,i,s,c,"throw",e)}s(void 0)}))}}r.r(t),r.d(t,{default:()=>o})},1211:(e,t,r)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.r(t),r.d(t,{default:()=>n})},6460:(e,t,r)=>{"use strict";function n(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}r.r(t),r.d(t,{default:()=>n})},9279:(e,t,r)=>{"use strict";function n(e,t){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}r.r(t),r.d(t,{default:()=>n})},4178:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:String(t)}function i(e,t,r){return(t=o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.r(t),r.d(t,{default:()=>s})},3724:(e,t,r)=>{"use strict";function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}r.r(t),r.d(t,{default:()=>n})},2874:(e,t,r)=>{var n=r(2582),o=r(3396),i=r(5476),a=r(4386),s=i.data,c=i.normalize,u="USE_FUNCTION_CONSTRUCTOR",l="AsyncIteratorPrototype",f=function(e,t){if(o(e))for(var r=0;r<e.length;r++)s[c(e[r])]=t};e.exports=function(e){"object"==typeof e&&(f(e.useNative,i.NATIVE),f(e.usePolyfill,i.POLYFILL),f(e.useFeatureDetection,null),n(e,u)&&(a[u]=!!e[u]),n(e,l)&&(a[u]=e[l]))}},2799:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},5577:(e,t,r)=>{var n=r(3394);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},6964:(e,t,r)=>{var n=r(3461),o=r(8561),i=r(4142),a=n("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},8501:(e,t,r)=>{"use strict";var n=r(2430).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},2378:e=>{e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},372:(e,t,r)=>{var n=r(3394);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},2171:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},9064:(e,t,r)=>{"use strict";var n,o=r(2171),i=r(1644),a=r(4380),s=r(3394),c=r(2582),u=r(9085),l=r(8528),f=r(9059),p=r(4142).f,d=r(4879),h=r(8476),_=r(3461),m=r(992),v=a.Int8Array,y=v&&v.prototype,g=a.Uint8ClampedArray,b=g&&g.prototype,w=v&&d(v),x=y&&d(y),S=Object.prototype,E=S.isPrototypeOf,T=_("toStringTag"),C=m("TYPED_ARRAY_TAG"),A=o&&!!h&&"Opera"!==u(a.opera),O=!1,M={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},R={BigInt64Array:8,BigUint64Array:8},P=function(e){if(!s(e))return!1;var t=u(e);return c(M,t)||c(R,t)};for(n in M)a[n]||(A=!1);if((!A||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},A))for(n in M)a[n]&&h(a[n],w);if((!A||!x||x===S)&&(x=w.prototype,A))for(n in M)a[n]&&h(a[n].prototype,x);if(A&&d(b)!==x&&h(b,x),i&&!c(x,T))for(n in O=!0,p(x,T,{get:function(){return s(this)?this[C]:void 0}}),M)a[n]&&l(a[n],C,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:A,TYPED_ARRAY_TAG:O&&C,aTypedArray:function(e){if(P(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(h){if(E.call(w,e))return e}else for(var t in M)if(c(M,n)){var r=a[t];if(r&&(e===r||E.call(r,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r){if(i){if(r)for(var n in M){var o=a[n];if(o&&c(o.prototype,e))try{delete o.prototype[e]}catch(e){}}x[e]&&!r||f(x,e,r?t:A&&y[e]||t)}},exportTypedArrayStaticMethod:function(e,t,r){var n,o;if(i){if(h){if(r)for(n in M)if((o=a[n])&&c(o,e))try{delete o[e]}catch(e){}if(w[e]&&!r)return;try{return f(w,e,r?t:A&&w[e]||t)}catch(e){}}for(n in M)!(o=a[n])||o[e]&&!r||f(o,e,t)}},isView:function(e){if(!s(e))return!1;var t=u(e);return"DataView"===t||c(M,t)||c(R,t)},isTypedArray:P,TypedArray:w,TypedArrayPrototype:x}},8806:(e,t,r)=>{"use strict";var n=r(4380),o=r(1644),i=r(2171),a=r(8528),s=r(6901),c=r(4330),u=r(2378),l=r(4072),f=r(4353),p=r(2961),d=r(5936),h=r(4879),_=r(8476),m=r(9819).f,v=r(4142).f,y=r(9625),g=r(923),b=r(9676),w=b.get,x=b.set,S="ArrayBuffer",E="DataView",T="prototype",C="Wrong index",A=n[S],O=A,M=n[E],R=M&&M[T],P=Object.prototype,I=n.RangeError,N=d.pack,D=d.unpack,L=function(e){return[255&e]},F=function(e){return[255&e,e>>8&255]},k=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},B=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},j=function(e){return N(e,23,4)},U=function(e){return N(e,52,8)},G=function(e,t){v(e[T],t,{get:function(){return w(this)[t]}})},V=function(e,t,r,n){var o=p(r),i=w(e);if(o+t>i.byteLength)throw I(C);var a=w(i.buffer).bytes,s=o+i.byteOffset,c=a.slice(s,s+t);return n?c:c.reverse()},W=function(e,t,r,n,o,i){var a=p(r),s=w(e);if(a+t>s.byteLength)throw I(C);for(var c=w(s.buffer).bytes,u=a+s.byteOffset,l=n(+o),f=0;f<t;f++)c[u+f]=l[i?f:t-f-1]};if(i){if(!c((function(){A(1)}))||!c((function(){new A(-1)}))||c((function(){return new A,new A(1.5),new A(NaN),A.name!=S}))){for(var z,H=(O=function(e){return u(this,O),new A(p(e))})[T]=A[T],X=m(A),K=0;X.length>K;)(z=X[K++])in O||a(O,z,A[z]);H.constructor=O}_&&h(R)!==P&&_(R,P);var $=new M(new O(2)),q=R.setInt8;$.setInt8(0,2147483648),$.setInt8(1,2147483649),!$.getInt8(0)&&$.getInt8(1)||s(R,{setInt8:function(e,t){q.call(this,e,t<<24>>24)},setUint8:function(e,t){q.call(this,e,t<<24>>24)}},{unsafe:!0})}else O=function(e){u(this,O,S);var t=p(e);x(this,{bytes:y.call(new Array(t),0),byteLength:t}),o||(this.byteLength=t)},M=function(e,t,r){u(this,M,E),u(e,O,E);var n=w(e).byteLength,i=l(t);if(i<0||i>n)throw I("Wrong offset");if(i+(r=void 0===r?n-i:f(r))>n)throw I("Wrong length");x(this,{buffer:e,byteLength:r,byteOffset:i}),o||(this.buffer=e,this.byteLength=r,this.byteOffset=i)},o&&(G(O,"byteLength"),G(M,"buffer"),G(M,"byteLength"),G(M,"byteOffset")),s(M[T],{getInt8:function(e){return V(this,1,e)[0]<<24>>24},getUint8:function(e){return V(this,1,e)[0]},getInt16:function(e){var t=V(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=V(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return B(V(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return B(V(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return D(V(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return D(V(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){W(this,1,e,L,t)},setUint8:function(e,t){W(this,1,e,L,t)},setInt16:function(e,t){W(this,2,e,F,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){W(this,2,e,F,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){W(this,4,e,k,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){W(this,4,e,k,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){W(this,4,e,j,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){W(this,8,e,U,t,arguments.length>2?arguments[2]:void 0)}});g(O,S),g(M,E),e.exports={ArrayBuffer:O,DataView:M}},9625:(e,t,r)=>{"use strict";var n=r(5141),o=r(6156),i=r(4353);e.exports=function(e){for(var t=n(this),r=i(t.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,r),c=a>2?arguments[2]:void 0,u=void 0===c?r:o(c,r);u>s;)t[s++]=e;return t}},6550:(e,t,r)=>{var n=r(4749),o=r(4353),i=r(6156),a=function(e){return function(t,r,a){var s,c=n(t),u=o(c.length),l=i(a,u);if(e&&r!=r){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},4832:(e,t,r)=>{var n=r(1466),o=r(3043),i=r(5141),a=r(4353),s=function(e){var t=6==e;return function(r,s,c){for(var u,l=i(r),f=o(l),p=n(s,c,3),d=a(f.length);d-- >0;)if(p(u=f[d],d,l))switch(e){case 5:return u;case 6:return d}return t?-1:void 0}};e.exports={findLast:s(5),findLastIndex:s(6)}},7139:(e,t,r)=>{var n=r(1466),o=r(3043),i=r(5141),a=r(4353),s=r(5484),c=[].push,u=function(e){var t=1==e,r=2==e,u=3==e,l=4==e,f=6==e,p=7==e,d=5==e||f;return function(h,_,m,v){for(var y,g,b=i(h),w=o(b),x=n(_,m,3),S=a(w.length),E=0,T=v||s,C=t?T(h,S):r||p?T(h,0):void 0;S>E;E++)if((d||E in w)&&(g=x(y=w[E],E,b),e))if(t)C[E]=g;else if(g)switch(e){case 3:return!0;case 5:return y;case 6:return E;case 2:c.call(C,y)}else switch(e){case 4:return!1;case 7:c.call(C,y)}return f?-1:u||l?l:C}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},9813:(e,t,r)=>{"use strict";var n=r(4330);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},4067:(e,t,r)=>{var n=r(2799),o=r(5141),i=r(3043),a=r(4353),s=function(e){return function(t,r,s,c){n(r);var u=o(t),l=i(u),f=a(u.length),p=e?f-1:0,d=e?-1:1;if(s<2)for(;;){if(p in l){c=l[p],p+=d;break}if(p+=d,e?p<0:f<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:f>p;p+=d)p in l&&(c=r(c,l[p],p,u));return c}};e.exports={left:s(!1),right:s(!0)}},9091:e=>{var t=Math.floor,r=function(e,i){var a=e.length,s=t(a/2);return a<8?n(e,i):o(r(e.slice(0,s),i),r(e.slice(s),i),i)},n=function(e,t){for(var r,n,o=e.length,i=1;i<o;){for(n=i,r=e[i];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==i++&&(e[n]=r)}return e},o=function(e,t,r){for(var n=e.length,o=t.length,i=0,a=0,s=[];i<n||a<o;)i<n&&a<o?s.push(r(e[i],t[a])<=0?e[i++]:t[a++]):s.push(i<n?e[i++]:t[a++]);return s};e.exports=r},5484:(e,t,r)=>{var n=r(3394),o=r(3396),i=r(3461)("species");e.exports=function(e,t){var r;return o(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!o(r.prototype)?n(r)&&null===(r=r[i])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},7303:(e,t,r)=>{"use strict";var n=r(3759),o=r(2799),i=r(372),a=r(8561),s=r(8528),c=r(6901),u=r(3461),l=r(9676),f=r(6274)("Promise"),p=l.set,d=l.get,h=u("toStringTag"),_=function(e){var t=d(this).iterator,r=t.return;return void 0===r?f.resolve({done:!0,value:e}):i(r.call(t,e))},m=function(e){var t=d(this).iterator,r=t.throw;return void 0===r?f.reject(e):r.call(t,e)};e.exports=function(e,t){var r=function(e){e.next=o(e.iterator.next),e.done=!1,p(this,e)};return r.prototype=c(a(n.AsyncIterator.prototype),{next:function(t){var r=d(this);if(r.done)return f.resolve({done:!0,value:void 0});try{return f.resolve(i(e.call(r,t,f)))}catch(e){return f.reject(e)}},return:_,throw:m}),t||s(r.prototype,h,"Generator"),r}},4445:(e,t,r)=>{"use strict";var n=r(2799),o=r(372),i=r(6274)("Promise"),a=[].push,s=function(e){var t=0==e,r=1==e,s=2==e,c=3==e;return function(e,u){o(e);var l=n(e.next),f=t?[]:void 0;return t||n(u),new i((function(n,p){var d=function(t,r){try{var n=e.return;if(void 0!==n)return i.resolve(n.call(e)).then((function(){t(r)}),(function(e){p(e)}))}catch(e){return p(e)}t(r)},h=function(e){d(p,e)},_=function(){try{i.resolve(o(l.call(e))).then((function(e){try{if(o(e).done)n(t?f:!c&&(s||void 0));else{var l=e.value;t?(a.call(f,l),_()):i.resolve(u(l)).then((function(e){r?_():s?e?_():d(n,!1):e?d(n,c||l):_()}),h)}}catch(e){h(e)}}),h)}catch(e){h(e)}};_()}))}};e.exports={toArray:s(0),forEach:s(1),every:s(2),some:s(3),find:s(4)}},9415:(e,t,r)=>{var n,o,i=r(4380),a=r(4386),s=r(4879),c=r(2582),u=r(8528),l=r(3461),f=r(3481),p="USE_FUNCTION_CONSTRUCTOR",d=l("asyncIterator"),h=i.AsyncIterator,_=a.AsyncIteratorPrototype;if(!f)if(_)n=_;else if("function"==typeof h)n=h.prototype;else if(a[p]||i[p])try{o=s(s(s(Function("return async function*(){}()")()))),s(o)===Object.prototype&&(n=o)}catch(e){}n||(n={}),c(n,d)||u(n,d,(function(){return this})),e.exports=n},9841:(e,t,r)=>{var n=r(372),o=r(2976);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){throw o(e),t}}},5987:(e,t,r)=>{var n=r(3461)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(e){}return r}},4849:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},9085:(e,t,r)=>{var n=r(7427),o=r(4849),i=r(3461)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:a?o(t):"Object"==(n=o(t))&&"function"==typeof t.callee?"Arguments":n}},8646:(e,t,r)=>{var n=r(2582),o=r(7534),i=r(294),a=r(4142);e.exports=function(e,t){for(var r=o(t),s=a.f,c=i.f,u=0;u<r.length;u++){var l=r[u];n(e,l)||s(e,l,c(t,l))}}},4580:(e,t,r)=>{var n=r(4330);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},8859:(e,t,r)=>{"use strict";var n=r(2937).IteratorPrototype,o=r(8561),i=r(1074),a=r(923),s=r(1337),c=function(){return this};e.exports=function(e,t,r){var u=t+" Iterator";return e.prototype=o(n,{next:i(1,r)}),a(e,u,!1,!0),s[u]=c,e}},8528:(e,t,r)=>{var n=r(1644),o=r(4142),i=r(1074);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},1074:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7556:(e,t,r)=>{"use strict";var n=r(5698),o=r(4142),i=r(1074);e.exports=function(e,t,r){var a=n(t);a in e?o.f(e,a,i(0,r)):e[a]=r}},1205:(e,t,r)=>{var n=r(3759),o=r(2582),i=r(1806),a=r(4142).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},1644:(e,t,r)=>{var n=r(4330);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8370:(e,t,r)=>{var n=r(4380),o=r(3394),i=n.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},6173:(e,t,r)=>{var n=r(661).match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},8623:e=>{e.exports="object"==typeof window},5308:(e,t,r)=>{var n=r(661);e.exports=/MSIE|Trident/.test(n)},5692:(e,t,r)=>{var n=r(661);e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(n)},3986:(e,t,r)=>{var n=r(4849),o=r(4380);e.exports="process"==n(o.process)},8927:(e,t,r)=>{var n=r(661);e.exports=/web0s(?!.*chrome)/i.test(n)},661:(e,t,r)=>{var n=r(6274);e.exports=n("navigator","userAgent")||""},2136:(e,t,r)=>{var n,o,i=r(4380),a=r(661),s=i.process,c=s&&s.versions,u=c&&c.v8;u?o=(n=u.split("."))[0]<4?1:n[0]+n[1]:a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=n[1]),e.exports=o&&+o},9632:(e,t,r)=>{var n=r(661).match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},8398:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6753:(e,t,r)=>{var n=r(4380),o=r(294).f,i=r(8528),a=r(9059),s=r(485),c=r(8646),u=r(5476);e.exports=function(e,t){var r,l,f,p,d,h=e.target,_=e.global,m=e.stat;if(r=_?n:m?n[h]||s(h,{}):(n[h]||{}).prototype)for(l in t){if(p=t[l],f=e.noTargetGet?(d=o(r,l))&&d.value:r[l],!u(_?l:h+(m?".":"#")+l,e.forced)&&void 0!==f){if(typeof p==typeof f)continue;c(p,f)}(e.sham||f&&f.sham)&&i(p,"sham",!0),a(r,l,p,e)}}},4330:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},225:(e,t,r)=>{"use strict";r(9437);var n=r(9059),o=r(7879),i=r(4330),a=r(3461),s=r(8528),c=a("species"),u=RegExp.prototype;e.exports=function(e,t,r,l){var f=a(e),p=!i((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),d=p&&!i((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[c]=function(){return r},r.flags="",r[f]=/./[f]),r.exec=function(){return t=!0,null},r[f](""),!t}));if(!p||!d||r){var h=/./[f],_=t(f,""[e],(function(e,t,r,n,i){var a=t.exec;return a===o||a===u.exec?p&&!i?{done:!0,value:h.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}));n(String.prototype,e,_[0]),n(u,f,_[1])}l&&s(u[f],"sham",!0)}},6614:(e,t,r)=>{"use strict";var n=r(3396),o=r(4353),i=r(1466),a=function(e,t,r,s,c,u,l,f){for(var p,d=c,h=0,_=!!l&&i(l,f,3);h<s;){if(h in r){if(p=_?_(r[h],h,t):r[h],u>0&&n(p))d=a(e,t,p,o(p.length),d,u-1)-1;else{if(d>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[d]=p}d++}h++}return d};e.exports=a},1466:(e,t,r)=>{var n=r(2799);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},153:(e,t,r)=>{var n=r(5225),o=r(3461)("asyncIterator");e.exports=function(e){var t=e[o];return void 0===t?n(e):t}},6274:(e,t,r)=>{var n=r(3759),o=r(4380),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(n[e])||i(o[e]):n[e]&&n[e][t]||o[e]&&o[e][t]}},5225:(e,t,r)=>{var n=r(9085),o=r(1337),i=r(3461)("iterator");e.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[n(e)]}},1884:(e,t,r)=>{var n=r(5141),o=Math.floor,i="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,c,u,l){var f=r+e.length,p=c.length,d=s;return void 0!==u&&(u=n(u),d=a),i.call(l,d,(function(n,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(f);case"<":a=u[i.slice(1,-1)];break;default:var s=+i;if(0===s)return n;if(s>p){var l=o(s/10);return 0===l?n:l<=p?void 0===c[l-1]?i.charAt(1):c[l-1]+i.charAt(1):n}a=c[s-1]}return void 0===a?"":a}))}},4380:(e,t,r)=>{var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},2582:(e,t,r)=>{var n=r(5141),o={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return o.call(n(e),t)}},2687:e=>{e.exports={}},916:(e,t,r)=>{var n=r(4380);e.exports=function(e,t){var r=n.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}},7162:(e,t,r)=>{var n=r(6274);e.exports=n("document","documentElement")},3258:(e,t,r)=>{var n=r(1644),o=r(4330),i=r(8370);e.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},5936:e=>{var t=Math.abs,r=Math.pow,n=Math.floor,o=Math.log,i=Math.LN2;e.exports={pack:function(e,a,s){var c,u,l,f=new Array(s),p=8*s-a-1,d=(1<<p)-1,h=d>>1,_=23===a?r(2,-24)-r(2,-77):0,m=e<0||0===e&&1/e<0?1:0,v=0;for((e=t(e))!=e||e===1/0?(u=e!=e?1:0,c=d):(c=n(o(e)/i),e*(l=r(2,-c))<1&&(c--,l*=2),(e+=c+h>=1?_/l:_*r(2,1-h))*l>=2&&(c++,l/=2),c+h>=d?(u=0,c=d):c+h>=1?(u=(e*l-1)*r(2,a),c+=h):(u=e*r(2,h-1)*r(2,a),c=0));a>=8;f[v++]=255&u,u/=256,a-=8);for(c=c<<a|u,p+=a;p>0;f[v++]=255&c,c/=256,p-=8);return f[--v]|=128*m,f},unpack:function(e,t){var n,o=e.length,i=8*o-t-1,a=(1<<i)-1,s=a>>1,c=i-7,u=o-1,l=e[u--],f=127&l;for(l>>=7;c>0;f=256*f+e[u],u--,c-=8);for(n=f&(1<<-c)-1,f>>=-c,c+=t;c>0;n=256*n+e[u],u--,c-=8);if(0===f)f=1-s;else{if(f===a)return n?NaN:l?-1/0:1/0;n+=r(2,t),f-=s}return(l?-1:1)*n*r(2,f-t)}}},3043:(e,t,r)=>{var n=r(4330),o=r(4849),i="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},2612:(e,t,r)=>{var n=r(3394),o=r(8476);e.exports=function(e,t,r){var i,a;return o&&"function"==typeof(i=t.constructor)&&i!==r&&n(a=i.prototype)&&a!==r.prototype&&o(e,a),e}},5487:(e,t,r)=>{var n=r(4386),o=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return o.call(e)}),e.exports=n.inspectSource},9676:(e,t,r)=>{var n,o,i,a=r(8242),s=r(4380),c=r(3394),u=r(8528),l=r(2582),f=r(4386),p=r(1453),d=r(2687),h="Object already initialized",_=s.WeakMap;if(a||f.state){var m=f.state||(f.state=new _),v=m.get,y=m.has,g=m.set;n=function(e,t){if(y.call(m,e))throw new TypeError(h);return t.facade=e,g.call(m,e,t),t},o=function(e){return v.call(m,e)||{}},i=function(e){return y.call(m,e)}}else{var b=p("state");d[b]=!0,n=function(e,t){if(l(e,b))throw new TypeError(h);return t.facade=e,u(e,b,t),t},o=function(e){return l(e,b)?e[b]:{}},i=function(e){return l(e,b)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},588:(e,t,r)=>{var n=r(3461),o=r(1337),i=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},3396:(e,t,r)=>{var n=r(4849);e.exports=Array.isArray||function(e){return"Array"==n(e)}},5476:(e,t,r)=>{var n=r(4330),o=/#|\.prototype\./,i=function(e,t){var r=s[a(e)];return r==u||r!=c&&("function"==typeof t?n(t):!!t)},a=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";e.exports=i},3394:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},3481:e=>{e.exports=!1},8410:(e,t,r)=>{var n=r(3394),o=r(4849),i=r(3461)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},3984:(e,t,r)=>{var n=r(372),o=r(588),i=r(4353),a=r(1466),s=r(5225),c=r(2976),u=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,r){var l,f,p,d,h,_,m,v=r&&r.that,y=!(!r||!r.AS_ENTRIES),g=!(!r||!r.IS_ITERATOR),b=!(!r||!r.INTERRUPTED),w=a(t,v,1+y+b),x=function(e){return l&&c(l),new u(!0,e)},S=function(e){return y?(n(e),b?w(e[0],e[1],x):w(e[0],e[1])):b?w(e,x):w(e)};if(g)l=e;else{if("function"!=typeof(f=s(e)))throw TypeError("Target is not iterable");if(o(f)){for(p=0,d=i(e.length);d>p;p++)if((h=S(e[p]))&&h instanceof u)return h;return new u(!1)}l=f.call(e)}for(_=l.next;!(m=_.call(l)).done;){try{h=S(m.value)}catch(e){throw c(l),e}if("object"==typeof h&&h&&h instanceof u)return h}return new u(!1)}},2976:(e,t,r)=>{var n=r(372);e.exports=function(e){var t=e.return;if(void 0!==t)return n(t.call(e)).value}},8212:(e,t,r)=>{"use strict";var n=r(3759),o=r(2799),i=r(372),a=r(8561),s=r(8528),c=r(6901),u=r(3461),l=r(9676),f=l.set,p=l.get,d=u("toStringTag"),h=function(e){var t=p(this).iterator,r=t.return;return void 0===r?{done:!0,value:e}:i(r.call(t,e))},_=function(e){var t=p(this).iterator,r=t.throw;if(void 0===r)throw e;return r.call(t,e)};e.exports=function(e,t){var r=function(e){e.next=o(e.iterator.next),e.done=!1,f(this,e)};return r.prototype=c(a(n.Iterator.prototype),{next:function(){var t=p(this),r=t.done?void 0:e.apply(t,arguments);return{done:t.done,value:r}},return:h,throw:_}),t||s(r.prototype,d,"Generator"),r}},2937:(e,t,r)=>{"use strict";var n,o,i,a=r(4330),s=r(4879),c=r(8528),u=r(2582),l=r(3461),f=r(3481),p=l("iterator"),d=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(n=o):d=!0);var h=null==n||a((function(){var e={};return n[p].call(e)!==e}));h&&(n={}),f&&!h||u(n,p)||c(n,p,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},1337:e=>{e.exports={}},1684:(e,t,r)=>{var n,o,i,a,s,c,u,l,f=r(4380),p=r(294).f,d=r(4869).set,h=r(5692),_=r(8927),m=r(3986),v=f.MutationObserver||f.WebKitMutationObserver,y=f.document,g=f.process,b=f.Promise,w=p(f,"queueMicrotask"),x=w&&w.value;x||(n=function(){var e,t;for(m&&(e=g.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?a():i=void 0,e}}i=void 0,e&&e.enter()},h||m||_||!v||!y?b&&b.resolve?((u=b.resolve(void 0)).constructor=b,l=u.then,a=function(){l.call(u,n)}):a=m?function(){g.nextTick(n)}:function(){d.call(f,n)}:(s=!0,c=y.createTextNode(""),new v(n).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),e.exports=x||function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,a()),i=t}},3535:(e,t,r)=>{var n=r(4380);e.exports=n.Promise},5845:(e,t,r)=>{var n=r(2136),o=r(4330);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},8242:(e,t,r)=>{var n=r(4380),o=r(5487),i=n.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},3288:(e,t,r)=>{"use strict";var n=r(2799),o=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new o(e)}},8787:(e,t,r)=>{var n=r(4380),o=r(1380).trim,i=r(7612),a=n.parseFloat,s=1/a(i+"-0")!=-1/0;e.exports=s?function(e){var t=o(String(e)),r=a(t);return 0===r&&"-"==t.charAt(0)?-0:r}:a},8561:(e,t,r)=>{var n,o=r(372),i=r(7197),a=r(8398),s=r(2687),c=r(7162),u=r(8370),l=r(1453),f="prototype",p="script",d=l("IE_PROTO"),h=function(){},_=function(e){return"<"+p+">"+e+"</"+p+">"},m=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t,r;m=n?function(e){e.write(_("")),e.close();var t=e.parentWindow.Object;return e=null,t}(n):(t=u("iframe"),r="java"+p+":",t.style.display="none",c.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(_("document.F=Object")),e.close(),e.F);for(var o=a.length;o--;)delete m[f][a[o]];return m()};s[d]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(h[f]=o(e),r=new h,h[f]=null,r[d]=e):r=m(),void 0===t?r:i(r,t)}},7197:(e,t,r)=>{var n=r(1644),o=r(4142),i=r(372),a=r(5313);e.exports=n?Object.defineProperties:function(e,t){i(e);for(var r,n=a(t),s=n.length,c=0;s>c;)o.f(e,r=n[c++],t[r]);return e}},4142:(e,t,r)=>{var n=r(1644),o=r(3258),i=r(372),a=r(5698),s=Object.defineProperty;t.f=n?s:function(e,t,r){if(i(e),t=a(t,!0),i(r),o)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},294:(e,t,r)=>{var n=r(1644),o=r(8078),i=r(1074),a=r(4749),s=r(5698),c=r(2582),u=r(3258),l=Object.getOwnPropertyDescriptor;t.f=n?l:function(e,t){if(e=a(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(c(e,t))return i(!o.f.call(e,t),e[t])}},9819:(e,t,r)=>{var n=r(8891),o=r(8398).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},7840:(e,t)=>{t.f=Object.getOwnPropertySymbols},4879:(e,t,r)=>{var n=r(2582),o=r(5141),i=r(1453),a=r(4580),s=i("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=o(e),n(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},8891:(e,t,r)=>{var n=r(2582),o=r(4749),i=r(6550).indexOf,a=r(2687);e.exports=function(e,t){var r,s=o(e),c=0,u=[];for(r in s)!n(a,r)&&n(s,r)&&u.push(r);for(;t.length>c;)n(s,r=t[c++])&&(~i(u,r)||u.push(r));return u}},5313:(e,t,r)=>{var n=r(8891),o=r(8398);e.exports=Object.keys||function(e){return n(e,o)}},8078:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},8476:(e,t,r)=>{var n=r(372),o=r(5577);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,i){return n(r),o(i),t?e.call(r,i):r.__proto__=i,r}}():void 0)},5686:(e,t,r)=>{var n=r(1644),o=r(5313),i=r(4749),a=r(8078).f,s=function(e){return function(t){for(var r,s=i(t),c=o(s),u=c.length,l=0,f=[];u>l;)r=c[l++],n&&!a.call(s,r)||f.push(e?[r,s[r]]:s[r]);return f}};e.exports={entries:s(!0),values:s(!1)}},7534:(e,t,r)=>{var n=r(6274),o=r(9819),i=r(7840),a=r(372);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},3759:(e,t,r)=>{var n=r(4380);e.exports=n},561:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},3443:(e,t,r)=>{var n=r(372),o=r(3394),i=r(3288);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},6901:(e,t,r)=>{var n=r(9059);e.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},9059:(e,t,r)=>{var n=r(4380),o=r(8528),i=r(2582),a=r(485),s=r(5487),c=r(9676),u=c.get,l=c.enforce,f=String(String).split("String");(e.exports=function(e,t,r,s){var c,u=!!s&&!!s.unsafe,p=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof r&&("string"!=typeof t||i(r,"name")||o(r,"name",t),(c=l(r)).source||(c.source=f.join("string"==typeof t?t:""))),e!==n?(u?!d&&e[t]&&(p=!0):delete e[t],p?e[t]=r:o(e,t,r)):p?e[t]=r:a(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},3519:(e,t,r)=>{var n=r(4849),o=r(7879);e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var i=r.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},7879:(e,t,r)=>{"use strict";var n,o,i=r(2530),a=r(4016),s=r(138),c=r(8561),u=r(9676).get,l=r(2198),f=r(5618),p=RegExp.prototype.exec,d=s("native-string-replace",String.prototype.replace),h=p,_=(n=/a/,o=/b*/g,p.call(n,"a"),p.call(o,"a"),0!==n.lastIndex||0!==o.lastIndex),m=a.UNSUPPORTED_Y||a.BROKEN_CARET,v=void 0!==/()??/.exec("")[1];(_||v||m||l||f)&&(h=function(e){var t,r,n,o,a,s,l,f=this,y=u(f),g=y.raw;if(g)return g.lastIndex=f.lastIndex,t=h.call(g,e),f.lastIndex=g.lastIndex,t;var b=y.groups,w=m&&f.sticky,x=i.call(f),S=f.source,E=0,T=e;if(w&&(-1===(x=x.replace("y","")).indexOf("g")&&(x+="g"),T=String(e).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==e[f.lastIndex-1])&&(S="(?: "+S+")",T=" "+T,E++),r=new RegExp("^(?:"+S+")",x)),v&&(r=new RegExp("^"+S+"$(?!\\s)",x)),_&&(n=f.lastIndex),o=p.call(w?r:f,T),w?o?(o.input=o.input.slice(E),o[0]=o[0].slice(E),o.index=f.lastIndex,f.lastIndex+=o[0].length):f.lastIndex=0:_&&o&&(f.lastIndex=f.global?o.index+o[0].length:n),v&&o&&o.length>1&&d.call(o[0],r,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&b)for(o.groups=s=c(null),a=0;a<b.length;a++)s[(l=b[a])[0]]=o[l[1]];return o}),e.exports=h},2530:(e,t,r)=>{"use strict";var n=r(372);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},4016:(e,t,r)=>{var n=r(4330),o=function(e,t){return RegExp(e,t)};t.UNSUPPORTED_Y=n((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},2198:(e,t,r)=>{var n=r(4330);e.exports=n((function(){var e=RegExp(".","string".charAt(0));return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},5618:(e,t,r)=>{var n=r(4330);e.exports=n((function(){var e=RegExp("(?<a>b)","string".charAt(5));return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},6190:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},485:(e,t,r)=>{var n=r(4380),o=r(8528);e.exports=function(e,t){try{o(n,e,t)}catch(r){n[e]=t}return t}},8505:(e,t,r)=>{"use strict";var n=r(6274),o=r(4142),i=r(3461),a=r(1644),s=i("species");e.exports=function(e){var t=n(e),r=o.f;a&&t&&!t[s]&&r(t,s,{configurable:!0,get:function(){return this}})}},923:(e,t,r)=>{var n=r(4142).f,o=r(2582),i=r(3461)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},1453:(e,t,r)=>{var n=r(138),o=r(992),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},4386:(e,t,r)=>{var n=r(4380),o=r(485),i="__core-js_shared__",a=n[i]||o(i,{});e.exports=a},138:(e,t,r)=>{var n=r(3481),o=r(4386);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.15.1",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},1749:(e,t,r)=>{var n=r(372),o=r(2799),i=r(3461)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||null==(r=n(a)[i])?t:o(r)}},2430:(e,t,r)=>{var n=r(4072),o=r(6190),i=function(e){return function(t,r){var i,a,s=String(o(t)),c=n(r),u=s.length;return c<0||c>=u?e?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},4532:(e,t,r)=>{var n=r(661);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},3295:(e,t,r)=>{var n=r(4353),o=r(3067),i=r(6190),a=Math.ceil,s=function(e){return function(t,r,s){var c,u,l=String(i(t)),f=l.length,p=void 0===s?" ":String(s),d=n(r);return d<=f||""==p?l:(c=d-f,(u=o.call(p,a(c/p.length))).length>c&&(u=u.slice(0,c)),e?l+u:u+l)}};e.exports={start:s(!1),end:s(!0)}},3067:(e,t,r)=>{"use strict";var n=r(4072),o=r(6190);e.exports=function(e){var t=String(o(this)),r="",i=n(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(r+=t);return r}},4128:(e,t,r)=>{var n=r(4330),o=r(7612);e.exports=function(e){return n((function(){return!!o[e]()||"​᠎"!="​᠎"[e]()||o[e].name!==e}))}},1380:(e,t,r)=>{var n=r(6190),o="["+r(7612)+"]",i=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),s=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(i,"")),2&e&&(r=r.replace(a,"")),r}};e.exports={start:s(1),end:s(2),trim:s(3)}},4869:(e,t,r)=>{var n,o,i,a=r(4380),s=r(4330),c=r(1466),u=r(7162),l=r(8370),f=r(5692),p=r(3986),d=a.location,h=a.setImmediate,_=a.clearImmediate,m=a.process,v=a.MessageChannel,y=a.Dispatch,g=0,b={},w="onreadystatechange",x=function(e){if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},S=function(e){return function(){x(e)}},E=function(e){x(e.data)},T=function(e){a.postMessage(e+"",d.protocol+"//"+d.host)};h&&_||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return b[++g]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},n(g),g},_=function(e){delete b[e]},p?n=function(e){m.nextTick(S(e))}:y&&y.now?n=function(e){y.now(S(e))}:v&&!f?(i=(o=new v).port2,o.port1.onmessage=E,n=c(i.postMessage,i,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&d&&"file:"!==d.protocol&&!s(T)?(n=T,a.addEventListener("message",E,!1)):n=w in l("script")?function(e){u.appendChild(l("script"))[w]=function(){u.removeChild(this),x(e)}}:function(e){setTimeout(S(e),0)}),e.exports={set:h,clear:_}},6156:(e,t,r)=>{var n=r(4072),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},2961:(e,t,r)=>{var n=r(4072),o=r(4353);e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=o(t);if(t!==r)throw RangeError("Wrong length or index");return r}},4749:(e,t,r)=>{var n=r(3043),o=r(6190);e.exports=function(e){return n(o(e))}},4072:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},4353:(e,t,r)=>{var n=r(4072),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},5141:(e,t,r)=>{var n=r(6190);e.exports=function(e){return Object(n(e))}},1477:(e,t,r)=>{var n=r(1048);e.exports=function(e,t){var r=n(e);if(r%t)throw RangeError("Wrong offset");return r}},1048:(e,t,r)=>{var n=r(4072);e.exports=function(e){var t=n(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},5698:(e,t,r)=>{var n=r(3394);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},7427:(e,t,r)=>{var n={};n[r(3461)("toStringTag")]="z",e.exports="[object z]"===String(n)},9140:(e,t,r)=>{"use strict";var n=r(6753),o=r(4380),i=r(1644),a=r(9668),s=r(9064),c=r(8806),u=r(2378),l=r(1074),f=r(8528),p=r(4353),d=r(2961),h=r(1477),_=r(5698),m=r(2582),v=r(9085),y=r(3394),g=r(8561),b=r(8476),w=r(9819).f,x=r(9627),S=r(7139).forEach,E=r(8505),T=r(4142),C=r(294),A=r(9676),O=r(2612),M=A.get,R=A.set,P=T.f,I=C.f,N=Math.round,D=o.RangeError,L=c.ArrayBuffer,F=c.DataView,k=s.NATIVE_ARRAY_BUFFER_VIEWS,B=s.TYPED_ARRAY_TAG,j=s.TypedArray,U=s.TypedArrayPrototype,G=s.aTypedArrayConstructor,V=s.isTypedArray,W="BYTES_PER_ELEMENT",z="Wrong length",H=function(e,t){for(var r=0,n=t.length,o=new(G(e))(n);n>r;)o[r]=t[r++];return o},X=function(e,t){P(e,t,{get:function(){return M(this)[t]}})},K=function(e){var t;return e instanceof L||"ArrayBuffer"==(t=v(e))||"SharedArrayBuffer"==t},$=function(e,t){return V(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},q=function(e,t){return $(e,t=_(t,!0))?l(2,e[t]):I(e,t)},Y=function(e,t,r){return!($(e,t=_(t,!0))&&y(r)&&m(r,"value"))||m(r,"get")||m(r,"set")||r.configurable||m(r,"writable")&&!r.writable||m(r,"enumerable")&&!r.enumerable?P(e,t,r):(e[t]=r.value,e)};i?(k||(C.f=q,T.f=Y,X(U,"buffer"),X(U,"byteOffset"),X(U,"byteLength"),X(U,"length")),n({target:"Object",stat:!0,forced:!k},{getOwnPropertyDescriptor:q,defineProperty:Y}),e.exports=function(e,t,r){var i=e.match(/\d+$/)[0]/8,s=e+(r?"Clamped":"")+"Array",c="get"+e,l="set"+e,_=o[s],m=_,v=m&&m.prototype,T={},C=function(e,t){P(e,t,{get:function(){return function(e,t){var r=M(e);return r.view[c](t*i+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var o=M(e);r&&(n=(n=N(n))<0?0:n>255?255:255&n),o.view[l](t*i+o.byteOffset,n,!0)}(this,t,e)},enumerable:!0})};k?a&&(m=t((function(e,t,r,n){return u(e,m,s),O(y(t)?K(t)?void 0!==n?new _(t,h(r,i),n):void 0!==r?new _(t,h(r,i)):new _(t):V(t)?H(m,t):x.call(m,t):new _(d(t)),e,m)})),b&&b(m,j),S(w(_),(function(e){e in m||f(m,e,_[e])})),m.prototype=v):(m=t((function(e,t,r,n){u(e,m,s);var o,a,c,l=0,f=0;if(y(t)){if(!K(t))return V(t)?H(m,t):x.call(m,t);o=t,f=h(r,i);var _=t.byteLength;if(void 0===n){if(_%i)throw D(z);if((a=_-f)<0)throw D(z)}else if((a=p(n)*i)+f>_)throw D(z);c=a/i}else c=d(t),o=new L(a=c*i);for(R(e,{buffer:o,byteOffset:f,byteLength:a,length:c,view:new F(o)});l<c;)C(e,l++)})),b&&b(m,j),v=m.prototype=g(U)),v.constructor!==m&&f(v,"constructor",m),B&&f(v,B,s),T[s]=m,n({global:!0,forced:m!=_,sham:!k},T),W in m||f(m,W,i),W in v||f(v,W,i),E(s)}):e.exports=function(){}},9668:(e,t,r)=>{var n=r(4380),o=r(4330),i=r(5987),a=r(9064).NATIVE_ARRAY_BUFFER_VIEWS,s=n.ArrayBuffer,c=n.Int8Array;e.exports=!a||!o((function(){c(1)}))||!o((function(){new c(-1)}))||!i((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||o((function(){return 1!==new c(new s(2),1,void 0).length}))},9627:(e,t,r)=>{var n=r(5141),o=r(4353),i=r(5225),a=r(588),s=r(1466),c=r(9064).aTypedArrayConstructor;e.exports=function(e){var t,r,u,l,f,p,d=n(e),h=arguments.length,_=h>1?arguments[1]:void 0,m=void 0!==_,v=i(d);if(null!=v&&!a(v))for(p=(f=v.call(d)).next,d=[];!(l=p.call(f)).done;)d.push(l.value);for(m&&h>2&&(_=s(_,arguments[2],2)),r=o(d.length),u=new(c(this))(r),t=0;r>t;t++)u[t]=m?_(d[t],t):d[t];return u}},992:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+r).toString(36)}},7665:(e,t,r)=>{var n=r(5845);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},1806:(e,t,r)=>{var n=r(3461);t.f=n},3461:(e,t,r)=>{var n=r(4380),o=r(138),i=r(2582),a=r(992),s=r(5845),c=r(7665),u=o("wks"),l=n.Symbol,f=c?l:l&&l.withoutSetter||a;e.exports=function(e){return i(u,e)&&(s||"string"==typeof u[e])||(s&&i(l,e)?u[e]=l[e]:u[e]=f("Symbol."+e)),u[e]}},7612:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},4521:(e,t,r)=>{"use strict";var n=r(6753),o=r(4879),i=r(8476),a=r(8561),s=r(8528),c=r(1074),u=r(3984),l=function(e,t){var r=this;if(!(r instanceof l))return new l(e,t);i&&(r=i(new Error(void 0),o(r))),void 0!==t&&s(r,"message",String(t));var n=[];return u(e,n.push,{that:n}),s(r,"errors",n),r};l.prototype=a(Error.prototype,{constructor:c(5,l),message:c(5,""),name:c(5,"AggregateError")}),n({global:!0},{AggregateError:l})},1142:(e,t,r)=>{"use strict";var n=r(6753),o=r(4380),i=r(8806),a=r(8505),s="ArrayBuffer",c=i[s];n({global:!0,forced:o[s]!==c},{ArrayBuffer:c}),a(s)},9525:(e,t,r)=>{"use strict";var n=r(6753),o=r(4330),i=r(8806),a=r(372),s=r(6156),c=r(4353),u=r(1749),l=i.ArrayBuffer,f=i.DataView,p=l.prototype.slice;n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o((function(){return!new l(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==p&&void 0===t)return p.call(a(this),e);for(var r=a(this).byteLength,n=s(e,r),o=s(void 0===t?r:t,r),i=new(u(this,l))(c(o-n)),d=new f(this),h=new f(i),_=0;n<o;)h.setUint8(_++,d.getUint8(n++));return i}})},685:(e,t,r)=>{"use strict";var n=r(6753),o=r(6614),i=r(5141),a=r(4353),s=r(2799),c=r(5484);n({target:"Array",proto:!0},{flatMap:function(e){var t,r=i(this),n=a(r.length);return s(e),(t=c(r,0)).length=o(t,r,r,n,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},5091:(e,t,r)=>{"use strict";var n=r(6753),o=r(6614),i=r(5141),a=r(4353),s=r(4072),c=r(5484);n({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=i(this),r=a(t.length),n=c(t,0);return n.length=o(n,t,t,r,0,void 0===e?1:s(e)),n}})},3683:(e,t,r)=>{"use strict";var n=r(6753),o=r(4067).right,i=r(9813),a=r(2136),s=r(3986);n({target:"Array",proto:!0,forced:!i("reduceRight")||!s&&a>79&&a<83},{reduceRight:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},1456:(e,t,r)=>{"use strict";var n=r(6753),o=r(4067).left,i=r(9813),a=r(2136),s=r(3986);n({target:"Array",proto:!0,forced:!i("reduce")||!s&&a>79&&a<83},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},9293:(e,t,r)=>{"use strict";var n=r(6753),o=r(3396),i=[].reverse,a=[1,2];n({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return o(this)&&(this.length=this.length),i.call(this)}})},8495:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(5141),a=r(4353),s=r(4330),c=r(9091),u=r(9813),l=r(6173),f=r(5308),p=r(2136),d=r(9632),h=[],_=h.sort,m=s((function(){h.sort(void 0)})),v=s((function(){h.sort(null)})),y=u("sort"),g=!s((function(){if(p)return p<70;if(!(l&&l>3)){if(f)return!0;if(d)return d<603;var e,t,r,n,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)h.push({k:t+n,v:r})}for(h.sort((function(e,t){return t.v-e.v})),n=0;n<h.length;n++)t=h[n].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}}));n({target:"Array",proto:!0,forced:m||!v||!y||!g},{sort:function(e){void 0!==e&&o(e);var t=i(this);if(g)return void 0===e?_.call(t):_.call(t,e);var r,n,s=[],u=a(t.length);for(n=0;n<u;n++)n in t&&s.push(t[n]);for(s=c(s,function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:String(t)>String(r)?1:-1}}(e)),r=s.length,n=0;n<r;)t[n]=s[n++];for(;n<u;)delete t[n++];return t}})},7703:(e,t,r)=>{r(6964)("flatMap")},5150:(e,t,r)=>{r(6964)("flat")},560:(e,t,r)=>{r(6753)({global:!0},{globalThis:r(4380)})},7516:(e,t,r)=>{var n=r(6753),o=r(6274),i=r(4330),a=o("JSON","stringify"),s=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,u=/^[\uDC00-\uDFFF]$/,l=function(e,t,r){var n=r.charAt(t-1),o=r.charAt(t+1);return c.test(e)&&!u.test(o)||u.test(e)&&!c.test(n)?"\\u"+e.charCodeAt(0).toString(16):e},f=i((function(){return'"\\udf06\\ud834"'!==a("\udf06\ud834")||'"\\udead"'!==a("\udead")}));a&&n({target:"JSON",stat:!0,forced:f},{stringify:function(e,t,r){var n=a.apply(null,arguments);return"string"==typeof n?n.replace(s,l):n}})},4541:(e,t,r)=>{var n=r(6753),o=Math.hypot,i=Math.abs,a=Math.sqrt;n({target:"Math",stat:!0,forced:!!o&&o(1/0,NaN)!==1/0},{hypot:function(e,t){for(var r,n,o=0,s=0,c=arguments.length,u=0;s<c;)u<(r=i(arguments[s++]))?(o=o*(n=u/r)*n+1,u=r):o+=r>0?(n=r/u)*n:r;return u===1/0?1/0:u*a(o)}})},6328:(e,t,r)=>{var n=r(6753),o=r(8787);n({target:"Number",stat:!0,forced:Number.parseFloat!=o},{parseFloat:o})},1358:(e,t,r)=>{var n=r(6753),o=r(5686).entries;n({target:"Object",stat:!0},{entries:function(e){return o(e)}})},9983:(e,t,r)=>{var n=r(6753),o=r(3984),i=r(7556);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return o(e,(function(e,r){i(t,e,r)}),{AS_ENTRIES:!0}),t}})},842:(e,t,r)=>{var n=r(6753),o=r(5686).values;n({target:"Object",stat:!0},{values:function(e){return o(e)}})},9356:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(3288),a=r(561),s=r(3984);n({target:"Promise",stat:!0},{allSettled:function(e){var t=this,r=i.f(t),n=r.resolve,c=r.reject,u=a((function(){var r=o(t.resolve),i=[],a=0,c=1;s(e,(function(e){var o=a++,s=!1;i.push(void 0),c++,r.call(t,e).then((function(e){s||(s=!0,i[o]={status:"fulfilled",value:e},--c||n(i))}),(function(e){s||(s=!0,i[o]={status:"rejected",reason:e},--c||n(i))}))})),--c||n(i)}));return u.error&&c(u.value),r.promise}})},1773:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(6274),a=r(3288),s=r(561),c=r(3984),u="No one promise resolved";n({target:"Promise",stat:!0},{any:function(e){var t=this,r=a.f(t),n=r.resolve,l=r.reject,f=s((function(){var r=o(t.resolve),a=[],s=0,f=1,p=!1;c(e,(function(e){var o=s++,c=!1;a.push(void 0),f++,r.call(t,e).then((function(e){c||p||(p=!0,n(e))}),(function(e){c||p||(c=!0,a[o]=e,--f||l(new(i("AggregateError"))(a,u)))}))})),--f||l(new(i("AggregateError"))(a,u))}));return f.error&&l(f.value),r.promise}})},7691:(e,t,r)=>{"use strict";var n=r(6753),o=r(3481),i=r(3535),a=r(4330),s=r(6274),c=r(1749),u=r(3443),l=r(9059);if(n({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),r="function"==typeof e;return this.then(r?function(r){return u(t,e()).then((function(){return r}))}:e,r?function(r){return u(t,e()).then((function(){throw r}))}:e)}}),!o&&"function"==typeof i){var f=s("Promise").prototype.finally;i.prototype.finally!==f&&l(i.prototype,"finally",f,{unsafe:!0})}},5470:(e,t,r)=>{"use strict";var n,o,i,a,s=r(6753),c=r(3481),u=r(4380),l=r(6274),f=r(3535),p=r(9059),d=r(6901),h=r(8476),_=r(923),m=r(8505),v=r(3394),y=r(2799),g=r(2378),b=r(5487),w=r(3984),x=r(5987),S=r(1749),E=r(4869).set,T=r(1684),C=r(3443),A=r(916),O=r(3288),M=r(561),R=r(9676),P=r(5476),I=r(3461),N=r(8623),D=r(3986),L=r(2136),F=I("species"),k="Promise",B=R.get,j=R.set,U=R.getterFor(k),G=f&&f.prototype,V=f,W=G,z=u.TypeError,H=u.document,X=u.process,K=O.f,$=K,q=!!(H&&H.createEvent&&u.dispatchEvent),Y="function"==typeof PromiseRejectionEvent,Z="unhandledrejection",J=!1,Q=P(k,(function(){var e=b(V)!==String(V);if(!e&&66===L)return!0;if(c&&!W.finally)return!0;if(L>=51&&/native code/.test(V))return!1;var t=new V((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(t.constructor={})[F]=r,!(J=t.then((function(){}))instanceof r)||!e&&N&&!Y})),ee=Q||!x((function(e){V.all(e).catch((function(){}))})),te=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},re=function(e,t){if(!e.notified){e.notified=!0;var r=e.reactions;T((function(){for(var n=e.value,o=1==e.state,i=0;r.length>i;){var a,s,c,u=r[i++],l=o?u.ok:u.fail,f=u.resolve,p=u.reject,d=u.domain;try{l?(o||(2===e.rejection&&ae(e),e.rejection=1),!0===l?a=n:(d&&d.enter(),a=l(n),d&&(d.exit(),c=!0)),a===u.promise?p(z("Promise-chain cycle")):(s=te(a))?s.call(a,f,p):f(a)):p(n)}catch(e){d&&!c&&d.exit(),p(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&oe(e)}))}},ne=function(e,t,r){var n,o;q?((n=H.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),u.dispatchEvent(n)):n={promise:t,reason:r},!Y&&(o=u["on"+e])?o(n):e===Z&&A("Unhandled promise rejection",r)},oe=function(e){E.call(u,(function(){var t,r=e.facade,n=e.value;if(ie(e)&&(t=M((function(){D?X.emit("unhandledRejection",n,r):ne(Z,r,n)})),e.rejection=D||ie(e)?2:1,t.error))throw t.value}))},ie=function(e){return 1!==e.rejection&&!e.parent},ae=function(e){E.call(u,(function(){var t=e.facade;D?X.emit("rejectionHandled",t):ne("rejectionhandled",t,e.value)}))},se=function(e,t,r){return function(n){e(t,n,r)}},ce=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,re(e,!0))},ue=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw z("Promise can't be resolved itself");var n=te(t);n?T((function(){var r={done:!1};try{n.call(t,se(ue,r,e),se(ce,r,e))}catch(t){ce(r,t,e)}})):(e.value=t,e.state=1,re(e,!1))}catch(t){ce({done:!1},t,e)}}};if(Q&&(W=(V=function(e){g(this,V,k),y(e),n.call(this);var t=B(this);try{e(se(ue,t),se(ce,t))}catch(e){ce(t,e)}}).prototype,(n=function(e){j(this,{type:k,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(W,{then:function(e,t){var r=U(this),n=K(S(this,V));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=D?X.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&re(r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n,t=B(e);this.promise=e,this.resolve=se(ue,t),this.reject=se(ce,t)},O.f=K=function(e){return e===V||e===i?new o(e):$(e)},!c&&"function"==typeof f&&G!==Object.prototype)){a=G.then,J||(p(G,"then",(function(e,t){var r=this;return new V((function(e,t){a.call(r,e,t)})).then(e,t)}),{unsafe:!0}),p(G,"catch",W.catch,{unsafe:!0}));try{delete G.constructor}catch(e){}h&&h(G,W)}s({global:!0,wrap:!0,forced:Q},{Promise:V}),_(V,k,!1,!0),m(k),i=l(k),s({target:k,stat:!0,forced:Q},{reject:function(e){var t=K(this);return t.reject.call(void 0,e),t.promise}}),s({target:k,stat:!0,forced:c||Q},{resolve:function(e){return C(c&&this===i?V:this,e)}}),s({target:k,stat:!0,forced:ee},{all:function(e){var t=this,r=K(t),n=r.resolve,o=r.reject,i=M((function(){var r=y(t.resolve),i=[],a=0,s=1;w(e,(function(e){var c=a++,u=!1;i.push(void 0),s++,r.call(t,e).then((function(e){u||(u=!0,i[c]=e,--s||n(i))}),o)})),--s||n(i)}));return i.error&&o(i.value),r.promise},race:function(e){var t=this,r=K(t),n=r.reject,o=M((function(){var o=y(t.resolve);w(e,(function(e){o.call(t,e).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}})},2266:(e,t,r)=>{var n=r(6753),o=r(4380),i=r(923);n({global:!0},{Reflect:{}}),i(o.Reflect,"Reflect",!0)},8827:(e,t,r)=>{var n=r(1644),o=r(4380),i=r(5476),a=r(2612),s=r(8528),c=r(4142).f,u=r(9819).f,l=r(8410),f=r(2530),p=r(4016),d=r(9059),h=r(4330),_=r(2582),m=r(9676).enforce,v=r(8505),y=r(3461),g=r(2198),b=r(5618),w=y("match"),x=o.RegExp,S=x.prototype,E=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,T=/a/g,C=/a/g,A=new x(T)!==T,O=p.UNSUPPORTED_Y,M=n&&(!A||O||g||b||h((function(){return C[w]=!1,x(T)!=T||x(C)==C||"/a/i"!=x(T,"i")})));if(i("RegExp",M)){for(var R=function(e,t){var r,n,o,i,c,u,p=this instanceof R,d=l(e),h=void 0===t,v=[],y=e;if(!p&&d&&h&&e.constructor===R)return e;if((d||e instanceof R)&&(e=e.source,h&&(t="flags"in y?y.flags:f.call(y))),e=void 0===e?"":String(e),t=void 0===t?"":String(t),y=e,g&&"dotAll"in T&&(n=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,"")),r=t,O&&"sticky"in T&&(o=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,"")),b&&(i=function(e){for(var t,r=e.length,n=0,o="",i=[],a={},s=!1,c=!1,u=0,l="";n<=r;n++){if("\\"===(t=e.charAt(n)))t+=e.charAt(++n);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:E.test(e.slice(n+1))&&(n+=2,c=!0),o+=t,u++;continue;case">"===t&&c:if(""===l||_(a,l))throw new SyntaxError("Invalid capture group name");a[l]=!0,i.push([l,u]),c=!1,l="";continue}c?l+=t:o+=t}return[o,i]}(e),e=i[0],v=i[1]),c=a(x(e,t),p?this:S,R),(n||o||v.length)&&(u=m(c),n&&(u.dotAll=!0,u.raw=R(function(e){for(var t,r=e.length,n=0,o="",i=!1;n<=r;n++)"\\"!==(t=e.charAt(n))?i||"."!==t?("["===t?i=!0:"]"===t&&(i=!1),o+=t):o+="[\\s\\S]":o+=t+e.charAt(++n);return o}(e),r)),o&&(u.sticky=!0),v.length&&(u.groups=v)),e!==y)try{s(c,"source",""===y?"(?:)":y)}catch(e){}return c},P=function(e){e in R||c(R,e,{configurable:!0,get:function(){return x[e]},set:function(t){x[e]=t}})},I=u(x),N=0;I.length>N;)P(I[N++]);S.constructor=R,R.prototype=S,d(o,"RegExp",R)}v("RegExp")},6314:(e,t,r)=>{var n=r(1644),o=r(2198),i=r(4142).f,a=r(9676).get,s=RegExp.prototype;n&&o&&i(s,"dotAll",{configurable:!0,get:function(){if(this!==s){if(this instanceof RegExp)return!!a(this).dotAll;throw TypeError("Incompatible receiver, RegExp required")}}})},9437:(e,t,r)=>{"use strict";var n=r(6753),o=r(7879);n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},6559:(e,t,r)=>{var n=r(1644),o=r(4142),i=r(2530),a=r(4330);n&&a((function(){return"sy"!==Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get.call({dotAll:!0,sticky:!0})}))&&o.f(RegExp.prototype,"flags",{configurable:!0,get:i})},3187:(e,t,r)=>{"use strict";var n=r(6753),o=r(8859),i=r(6190),a=r(4353),s=r(2799),c=r(372),u=r(4849),l=r(8410),f=r(2530),p=r(8528),d=r(4330),h=r(3461),_=r(1749),m=r(8501),v=r(9676),y=r(3481),g=h("matchAll"),b="RegExp String",w=b+" Iterator",x=v.set,S=v.getterFor(w),E=RegExp.prototype,T=E.exec,C="".matchAll,A=!!C&&!d((function(){"a".matchAll(/./)})),O=o((function(e,t,r,n){x(this,{type:w,regexp:e,string:t,global:r,unicode:n,done:!1})}),b,(function(){var e=S(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,r=e.string,n=function(e,t){var r,n=e.exec;if("function"==typeof n){if("object"!=typeof(r=n.call(e,t)))throw TypeError("Incorrect exec result");return r}return T.call(e,t)}(t,r);return null===n?{value:void 0,done:e.done=!0}:e.global?(""==String(n[0])&&(t.lastIndex=m(r,a(t.lastIndex),e.unicode)),{value:n,done:!1}):(e.done=!0,{value:n,done:!1})})),M=function(e){var t,r,n,o,i,s,u=c(this),l=String(e);return t=_(u,RegExp),void 0===(r=u.flags)&&u instanceof RegExp&&!("flags"in E)&&(r=f.call(u)),n=void 0===r?"":String(r),o=new t(t===RegExp?u.source:u,n),i=!!~n.indexOf("g"),s=!!~n.indexOf("u"),o.lastIndex=a(u.lastIndex),new O(o,l,i,s)};n({target:"String",proto:!0,forced:A},{matchAll:function(e){var t,r,n,o=i(this);if(null!=e){if(l(e)&&!~String(i("flags"in E?e.flags:f.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(A)return C.apply(o,arguments);if(void 0===(r=e[g])&&y&&"RegExp"==u(e)&&(r=M),null!=r)return s(r).call(e,o)}else if(A)return C.apply(o,arguments);return t=String(o),n=new RegExp(e,"g"),y?M.call(n,t):n[g](t)}}),y||g in E||p(E,g,M)},7506:(e,t,r)=>{"use strict";var n=r(6753),o=r(3295).end;n({target:"String",proto:!0,forced:r(4532)},{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},416:(e,t,r)=>{"use strict";var n=r(6753),o=r(3295).start;n({target:"String",proto:!0,forced:r(4532)},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},235:(e,t,r)=>{"use strict";var n=r(6753),o=r(6190),i=r(8410),a=r(2530),s=r(1884),c=r(3461),u=r(3481),l=c("replace"),f=RegExp.prototype,p=Math.max,d=function(e,t,r){return r>e.length?-1:""===t?r:e.indexOf(t,r)};n({target:"String",proto:!0},{replaceAll:function(e,t){var r,n,c,h,_,m,v,y,g=o(this),b=0,w=0,x="";if(null!=e){if((r=i(e))&&!~String(o("flags"in f?e.flags:a.call(e))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(n=e[l]))return n.call(e,g,t);if(u&&r)return String(g).replace(e,t)}for(c=String(g),h=String(e),(_="function"==typeof t)||(t=String(t)),m=h.length,v=p(1,m),b=d(c,h,0);-1!==b;)y=_?String(t(h,b,c)):s(h,c,b,[],void 0,t),x+=c.slice(w,b)+y,w=b+m,b=d(c,h,b+v);return w<c.length&&(x+=c.slice(w)),x}})},5441:(e,t,r)=>{"use strict";var n=r(225),o=r(4330),i=r(372),a=r(4353),s=r(4072),c=r(6190),u=r(8501),l=r(1884),f=r(3519),p=r(3461)("replace"),d=Math.max,h=Math.min,_="$0"==="a".replace(/./,"$0"),m=!!/./[p]&&""===/./[p]("a","$0");n("replace",(function(e,t,r){var n=m?"$":"$0";return[function(e,r){var n=c(this),o=null==e?void 0:e[p];return void 0!==o?o.call(e,n,r):t.call(String(n),e,r)},function(e,o){if("string"==typeof o&&-1===o.indexOf(n)&&-1===o.indexOf("$<")){var c=r(t,this,e,o);if(c.done)return c.value}var p=i(this),_=String(e),m="function"==typeof o;m||(o=String(o));var v=p.global;if(v){var y=p.unicode;p.lastIndex=0}for(var g=[];;){var b=f(p,_);if(null===b)break;if(g.push(b),!v)break;""===String(b[0])&&(p.lastIndex=u(_,a(p.lastIndex),y))}for(var w,x="",S=0,E=0;E<g.length;E++){b=g[E];for(var T=String(b[0]),C=d(h(s(b.index),_.length),0),A=[],O=1;O<b.length;O++)A.push(void 0===(w=b[O])?w:String(w));var M=b.groups;if(m){var R=[T].concat(A,C,_);void 0!==M&&R.push(M);var P=String(o.apply(void 0,R))}else P=l(T,_,C,A,M,o);C>=S&&(x+=_.slice(S,C)+P,S=C+T.length)}return x+_.slice(S)}]}),!!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!_||m)},9103:(e,t,r)=>{"use strict";var n=r(6753),o=r(1380).end,i=r(4128)("trimEnd"),a=i?function(){return o(this)}:"".trimEnd;n({target:"String",proto:!0,forced:i},{trimEnd:a,trimRight:a})},9928:(e,t,r)=>{"use strict";var n=r(6753),o=r(1380).start,i=r(4128)("trimStart"),a=i?function(){return o(this)}:"".trimStart;n({target:"String",proto:!0,forced:i},{trimStart:a,trimLeft:a})},4057:(e,t,r)=>{"use strict";var n=r(6753),o=r(1380).trim;n({target:"String",proto:!0,forced:r(4128)("trim")},{trim:function(){return o(this)}})},8610:(e,t,r)=>{r(1205)("asyncIterator")},1751:(e,t,r)=>{"use strict";var n=r(6753),o=r(1644),i=r(4380),a=r(2582),s=r(3394),c=r(4142).f,u=r(8646),l=i.Symbol;if(o&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new l(e):void 0===e?l():l(e);return""===e&&(f[t]=!0),t};u(p,l);var d=p.prototype=l.prototype;d.constructor=p;var h=d.toString,_="Symbol(test)"==String(l("test")),m=/^Symbol\((.*)\)[^)]+$/;c(d,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=h.call(e);if(a(f,e))return"";var r=_?t.slice(7,-1):t.replace(m,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:p})}},4017:(e,t,r)=>{r(1205)("matchAll")},5839:(e,t,r)=>{"use strict";var n=r(9064),o=r(9625),i=n.aTypedArray;(0,n.exportTypedArrayMethod)("fill",(function(e){return o.apply(i(this),arguments)}))},9969:(e,t,r)=>{r(9140)("Float32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},9369:(e,t,r)=>{r(9140)("Float64",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},3600:(e,t,r)=>{"use strict";var n=r(9668);(0,r(9064).exportTypedArrayStaticMethod)("from",r(9627),n)},5954:(e,t,r)=>{r(9140)("Int16",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},8218:(e,t,r)=>{r(9140)("Int32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},9005:(e,t,r)=>{r(9140)("Int8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},33:(e,t,r)=>{"use strict";var n=r(9064),o=r(9668),i=n.aTypedArrayConstructor;(0,n.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,r=new(i(this))(t);t>e;)r[e]=arguments[e++];return r}),o)},2032:(e,t,r)=>{"use strict";var n=r(9064),o=r(4353),i=r(1477),a=r(5141),s=r(4330),c=n.aTypedArray;(0,n.exportTypedArrayMethod)("set",(function(e){c(this);var t=i(arguments.length>1?arguments[1]:void 0,1),r=this.length,n=a(e),s=o(n.length),u=0;if(s+t>r)throw RangeError("Wrong length");for(;u<s;)this[t+u]=n[u++]}),s((function(){new Int8Array(1).set({})})))},4433:(e,t,r)=>{"use strict";var n=r(9064),o=r(4380),i=r(4330),a=r(2799),s=r(4353),c=r(9091),u=r(6173),l=r(5308),f=r(2136),p=r(9632),d=n.aTypedArray,h=n.exportTypedArrayMethod,_=o.Uint16Array,m=_&&_.prototype.sort,v=!!m&&!i((function(){var e=new _(2);e.sort(null),e.sort({})})),y=!!m&&!i((function(){if(f)return f<74;if(u)return u<67;if(l)return!0;if(p)return p<602;var e,t,r=new _(516),n=Array(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,n[e]=e-2*t+3;for(r.sort((function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(r[e]!==n[e])return!0}));h("sort",(function(e){var t=this;if(void 0!==e&&a(e),y)return m.call(t,e);d(t);var r,n=s(t.length),o=Array(n);for(r=0;r<n;r++)o[r]=t[r];for(o=c(t,function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!=r?-1:t!=t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}}(e)),r=0;r<n;r++)t[r]=o[r];return t}),!y||v)},7969:(e,t,r)=>{r(9140)("Uint16",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},6438:(e,t,r)=>{r(9140)("Uint32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},8457:(e,t,r)=>{r(9140)("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},4439:(e,t,r)=>{r(9140)("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}),!0)},4916:(e,t,r)=>{r(4521)},6832:(e,t,r)=>{"use strict";var n=r(6753),o=r(5141),i=r(4353),a=r(4072),s=r(6964);n({target:"Array",proto:!0},{at:function(e){var t=o(this),r=i(t.length),n=a(e),s=n>=0?n:r+n;return s<0||s>=r?void 0:t[s]}}),s("at")},8591:(e,t,r)=>{"use strict";var n=r(6753),o=r(4832).findLastIndex,i=r(6964);n({target:"Array",proto:!0},{findLastIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("findLastIndex")},7193:(e,t,r)=>{"use strict";var n=r(6753),o=r(4832).findLast,i=r(6964);n({target:"Array",proto:!0},{findLast:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("findLast")},7002:(e,t,r)=>{"use strict";var n=r(6753),o=r(2378),i=r(8528),a=r(2582),s=r(3461),c=r(9415),u=r(3481),l=s("toStringTag"),f=function(){o(this,f)};f.prototype=c,a(c,l)||i(c,l,"AsyncIterator"),a(c,"constructor")&&c.constructor!==Object||i(c,"constructor",f),n({global:!0,forced:u},{AsyncIterator:f})},3982:(e,t,r)=>{"use strict";var n=r(6753),o=r(372),i=r(1048),a=r(7303)((function(e,t){var r=this;return new t((function(n,i){var a=function(){try{t.resolve(o(r.next.call(r.iterator,r.remaining?void 0:e))).then((function(e){try{o(e).done?(r.done=!0,n({done:!0,value:void 0})):r.remaining?(r.remaining--,a()):n({done:!1,value:e.value})}catch(e){i(e)}}),i)}catch(e){i(e)}};a()}))}));n({target:"AsyncIterator",proto:!0,real:!0},{drop:function(e){return new a({iterator:o(this),remaining:i(e)})}})},4457:(e,t,r)=>{"use strict";var n=r(6753),o=r(4445).every;n({target:"AsyncIterator",proto:!0,real:!0},{every:function(e){return o(this,e)}})},3655:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(372),a=r(7303)((function(e,t){var r=this,n=r.filterer;return new t((function(o,a){var s=function(){try{t.resolve(i(r.next.call(r.iterator,e))).then((function(e){try{if(i(e).done)r.done=!0,o({done:!0,value:void 0});else{var c=e.value;t.resolve(n(c)).then((function(e){e?o({done:!1,value:c}):s()}),a)}}catch(e){a(e)}}),a)}catch(e){a(e)}};s()}))}));n({target:"AsyncIterator",proto:!0,real:!0},{filter:function(e){return new a({iterator:i(this),filterer:o(e)})}})},3296:(e,t,r)=>{"use strict";var n=r(6753),o=r(4445).find;n({target:"AsyncIterator",proto:!0,real:!0},{find:function(e){return o(this,e)}})},5284:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(372),a=r(7303),s=r(153),c=a((function(e,t){var r,n,a=this,c=a.mapper;return new t((function(u,l){var f=function(){try{t.resolve(i(a.next.call(a.iterator,e))).then((function(e){try{i(e).done?(a.done=!0,u({done:!0,value:void 0})):t.resolve(c(e.value)).then((function(e){try{if(void 0!==(n=s(e)))return a.innerIterator=r=i(n.call(e)),a.innerNext=o(r.next),p();l(TypeError(".flatMap callback should return an iterable object"))}catch(e){l(e)}}),l)}catch(e){l(e)}}),l)}catch(e){l(e)}},p=function(){if(r=a.innerIterator)try{t.resolve(i(a.innerNext.call(r))).then((function(e){try{i(e).done?(a.innerIterator=a.innerNext=null,f()):u({done:!1,value:e.value})}catch(e){l(e)}}),l)}catch(e){l(e)}else f()};p()}))}));n({target:"AsyncIterator",proto:!0,real:!0},{flatMap:function(e){return new c({iterator:i(this),mapper:o(e),innerIterator:null,innerNext:null})}})},5143:(e,t,r)=>{"use strict";var n=r(6753),o=r(4445).forEach;n({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(e){return o(this,e)}})},4872:(e,t,r)=>{var n=r(6753),o=r(3759),i=r(2799),a=r(372),s=r(5141),c=r(7303),u=r(153),l=o.AsyncIterator,f=c((function(e){return a(this.next.call(this.iterator,e))}),!0);n({target:"AsyncIterator",stat:!0},{from:function(e){var t,r=s(e),n=u(r);if(null!=n){if((t=i(n).call(r))instanceof l)return t}else t=r;return new f({iterator:t})}})},4168:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(372),a=r(7303)((function(e,t){var r=this,n=r.mapper;return t.resolve(i(r.next.call(r.iterator,e))).then((function(e){return i(e).done?(r.done=!0,{done:!0,value:void 0}):t.resolve(n(e.value)).then((function(e){return{done:!1,value:e}}))}))}));n({target:"AsyncIterator",proto:!0,real:!0},{map:function(e){return new a({iterator:i(this),mapper:o(e)})}})},1731:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(372),a=r(6274)("Promise");n({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(e){var t=i(this),r=o(t.next),n=arguments.length<2,s=n?void 0:arguments[1];return o(e),new a((function(o,c){var u=function(){try{a.resolve(i(r.call(t))).then((function(t){try{if(i(t).done)n?c(TypeError("Reduce of empty iterator with no initial value")):o(s);else{var r=t.value;n?(n=!1,s=r,u()):a.resolve(e(s,r)).then((function(e){s=e,u()}),c)}}catch(e){c(e)}}),c)}catch(e){c(e)}};u()}))}})},534:(e,t,r)=>{"use strict";var n=r(6753),o=r(4445).some;n({target:"AsyncIterator",proto:!0,real:!0},{some:function(e){return o(this,e)}})},2216:(e,t,r)=>{"use strict";var n=r(6753),o=r(372),i=r(1048),a=r(7303)((function(e,t){var r,n,o=this.iterator;return this.remaining--?this.next.call(o,e):(n={done:!0,value:void 0},this.done=!0,void 0!==(r=o.return)?t.resolve(r.call(o)).then((function(){return n})):n)}));n({target:"AsyncIterator",proto:!0,real:!0},{take:function(e){return new a({iterator:o(this),remaining:i(e)})}})},5132:(e,t,r)=>{"use strict";var n=r(6753),o=r(4445).toArray;n({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return o(this)}})},5543:(e,t,r)=>{r(560)},4925:(e,t,r)=>{"use strict";var n=r(6753),o=r(4380),i=r(2378),a=r(8528),s=r(4330),c=r(2582),u=r(3461),l=r(2937).IteratorPrototype,f=r(3481),p=u("iterator"),d=u("toStringTag"),h=o.Iterator,_=f||"function"!=typeof h||h.prototype!==l||!s((function(){h({})})),m=function(){i(this,m)};f&&a(l={},p,(function(){return this})),c(l,d)||a(l,d,"Iterator"),!_&&c(l,"constructor")&&l.constructor!==Object||a(l,"constructor",m),m.prototype=l,n({global:!0,forced:_},{Iterator:m})},2141:(e,t,r)=>{"use strict";var n=r(6753),o=r(372),i=r(1048),a=r(8212)((function(e){for(var t,r=this.iterator,n=this.next;this.remaining;)if(this.remaining--,t=o(n.call(r)),this.done=!!t.done)return;if(t=o(n.call(r,e)),!(this.done=!!t.done))return t.value}));n({target:"Iterator",proto:!0,real:!0},{drop:function(e){return new a({iterator:o(this),remaining:i(e)})}})},2181:(e,t,r)=>{"use strict";var n=r(6753),o=r(3984),i=r(2799),a=r(372);n({target:"Iterator",proto:!0,real:!0},{every:function(e){return a(this),i(e),!o(this,(function(t,r){if(!e(t))return r()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},8073:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(372),a=r(8212),s=r(9841),c=a((function(e){for(var t,r,n=this.iterator,o=this.filterer,a=this.next;;){if(t=i(a.call(n,e)),this.done=!!t.done)return;if(r=t.value,s(n,o,r))return r}}));n({target:"Iterator",proto:!0,real:!0},{filter:function(e){return new c({iterator:i(this),filterer:o(e)})}})},106:(e,t,r)=>{"use strict";var n=r(6753),o=r(3984),i=r(2799),a=r(372);n({target:"Iterator",proto:!0,real:!0},{find:function(e){return a(this),i(e),o(this,(function(t,r){if(e(t))return r(t)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},735:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(372),a=r(5225),s=r(8212),c=r(2976),u=s((function(e){for(var t,r,n,s,u=this.iterator,l=this.mapper;;)try{if(s=this.innerIterator){if(!(t=i(this.innerNext.call(s))).done)return t.value;this.innerIterator=this.innerNext=null}if(t=i(this.next.call(u,e)),this.done=!!t.done)return;if(r=l(t.value),void 0===(n=a(r)))throw TypeError(".flatMap callback should return an iterable object");this.innerIterator=s=i(n.call(r)),this.innerNext=o(s.next)}catch(e){throw c(u),e}}));n({target:"Iterator",proto:!0,real:!0},{flatMap:function(e){return new u({iterator:i(this),mapper:o(e),innerIterator:null,innerNext:null})}})},8865:(e,t,r)=>{"use strict";var n=r(6753),o=r(3984),i=r(372);n({target:"Iterator",proto:!0,real:!0},{forEach:function(e){o(i(this),e,{IS_ITERATOR:!0})}})},1061:(e,t,r)=>{var n=r(6753),o=r(3759),i=r(2799),a=r(372),s=r(5141),c=r(8212),u=r(5225),l=o.Iterator,f=c((function(e){var t=a(this.next.call(this.iterator,e));if(!(this.done=!!t.done))return t.value}),!0);n({target:"Iterator",stat:!0},{from:function(e){var t,r=s(e),n=u(r);if(null!=n){if((t=i(n).call(r))instanceof l)return t}else t=r;return new f({iterator:t})}})},2044:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(372),a=r(8212),s=r(9841),c=a((function(e){var t=this.iterator,r=i(this.next.call(t,e));if(!(this.done=!!r.done))return s(t,this.mapper,r.value)}));n({target:"Iterator",proto:!0,real:!0},{map:function(e){return new c({iterator:i(this),mapper:o(e)})}})},7754:(e,t,r)=>{"use strict";var n=r(6753),o=r(3984),i=r(2799),a=r(372);n({target:"Iterator",proto:!0,real:!0},{reduce:function(e){a(this),i(e);var t=arguments.length<2,r=t?void 0:arguments[1];if(o(this,(function(n){t?(t=!1,r=n):r=e(r,n)}),{IS_ITERATOR:!0}),t)throw TypeError("Reduce of empty iterator with no initial value");return r}})},938:(e,t,r)=>{"use strict";var n=r(6753),o=r(3984),i=r(2799),a=r(372);n({target:"Iterator",proto:!0,real:!0},{some:function(e){return a(this),i(e),o(this,(function(t,r){if(e(t))return r()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},5749:(e,t,r)=>{"use strict";var n=r(6753),o=r(372),i=r(1048),a=r(8212),s=r(2976),c=a((function(e){var t=this.iterator;if(!this.remaining--)return this.done=!0,s(t);var r=o(this.next.call(t,e));return(this.done=!!r.done)?void 0:r.value}));n({target:"Iterator",proto:!0,real:!0},{take:function(e){return new c({iterator:o(this),remaining:i(e)})}})},9037:(e,t,r)=>{"use strict";var n=r(6753),o=r(3984),i=r(372),a=[].push;n({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return o(i(this),a,{that:e,IS_ITERATOR:!0}),e}})},2810:(e,t,r)=>{r(6753)({target:"Object",stat:!0},{hasOwn:r(2582)})},1848:(e,t,r)=>{r(9356)},4644:(e,t,r)=>{r(1773)},8767:(e,t,r)=>{r(3187)},4862:(e,t,r)=>{r(235)},9715:(e,t,r)=>{r(1205)("dispose")},9231:(e,t,r)=>{"use strict";var n=r(9064),o=r(4353),i=r(4072),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("at",(function(e){var t=a(this),r=o(t.length),n=i(e),s=n>=0?n:r+n;return s<0||s>=r?void 0:t[s]}))},4856:(e,t,r)=>{"use strict";var n=r(9064),o=r(4832).findLastIndex,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLastIndex",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},6486:(e,t,r)=>{"use strict";var n=r(9064),o=r(4832).findLast,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLast",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},4348:(e,t,r)=>{var n=r(7967);n.keys().forEach((e=>{BabelRuntimeHelpers[e.substr(2)]=n(e)}))},4476:(e,t,r)=>{"use strict";r.r(t);r(1751),r(8610),r(4017),r(4521),r(5091),r(685),r(1456),r(3683),r(9293),r(8495),r(5150),r(7703),r(1142),r(9525),r(560),r(7516),r(4541),r(6328),r(1358),r(9983),r(842),r(5470),r(9356),r(1773),r(7691),r(2266),r(8827),r(6314),r(9437),r(6559),r(3187),r(7506),r(416),r(5441),r(235),r(4057),r(9103),r(9928),r(9969),r(9369),r(9005),r(5954),r(8218),r(8457),r(4439),r(7969),r(6438),r(5839),r(3600),r(33),r(2032),r(4433),r(4916),r(6832),r(7193),r(8591),r(5543),r(2810),r(1848),r(4644),r(8767),r(4862),r(9231),r(6486),r(4856),r(7002),r(3982),r(4457),r(3655),r(3296),r(5284),r(5143),r(4872),r(4168),r(1731),r(534),r(2216),r(5132),r(4925),r(2141),r(2181),r(8073),r(106),r(735),r(8865),r(1061),r(2044),r(7754),r(938),r(5749),r(9037),r(9715);["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((e=>{var t=globalThis[e];t&&t.name!==e&&Object.defineProperty(t,"name",{value:e})}))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{r.g.__polyfill_injecting=!0;var e=!1,t=!1;if(r.g.__wxConfig&&"string"==typeof r.g.__wxConfig.platform)"ios"===r.g.__wxConfig.platform.toLowerCase()?e=!0:"mac"===r.g.__wxConfig.platform.toLowerCase()&&(t=!0);else if("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent){var n=navigator.userAgent.toLowerCase();n.indexOf("iphone")>=0||n.indexOf("ipad")>=0?e=!0:n.indexOf("miniprogramenv/mac")>=0&&(t=!0)}var o=[];(e||t)&&(r.g.Promise=void 0,o.push("Promise")),r(2874)({usePolyfill:o,useNative:["WeakMap"]}),r(4476),r(4348),delete r.g.__polyfill_injecting})()})();var __wxTest__=!1,wxRunOnDebug=function(e){e()},__wxConfig,Foundation;(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};(()=>{e.d(t,{default:()=>$e});var r={};e.r(r),e.d(r,{convertToErrorObj:()=>W,emitFrameworkError:()=>$,emitUnhandledError:()=>q,emitUnhandledRejection:()=>z,onFrameworkError:()=>Z,onUnhandledError:()=>J,onUnhandledRejection:()=>Y});var n=BabelRuntimeHelpers.objectSpread2,o=e.n(n),i=e.g.__wxLibrary,a=e.g.__wxConfig,s=i.envType,c=i.contextType,u="Service"===s,l="WebView"===s,f="Worker"===s,p=l||u&&0===c.indexOf("App:"),d=u&&0===c.indexOf("Game:"),h=!!a.isIsolateContext,_=h&&u&&c.indexOf("MainContext")>=0,m=h&&u&&c.indexOf("SubContext")>=0,v=m&&c.indexOf("Safe")>=0,y=_||m,g="wxlib"===a.workerContentType,b=l||_||v||g,w=function(){var e,t,r=a.platform;if(!r&&"string"==typeof(null===(e=window)||void 0===e||null===(t=e.navigator)||void 0===t?void 0:t.userAgent)){var n=window.navigator.userAgent.toLowerCase();n.indexOf("devtools")>=0?r="devtools":n.indexOf("miniprogramenv/windows")>=0?r="windows":n.indexOf("miniprogramenv/mac")>=0?r="mac":n.indexOf("miniprogramenv/mina")>=0?r="mina":n.indexOf("iphone")>=0||n.indexOf("ipad")>=0?r="ios":n.indexOf("android")>=0&&(r="android")}return(r||"unknown").toLowerCase()}(),x=__libVersionInfo__,S={platform:w,SDKVersion:void 0===x||"develop"===x.version?"9.9.9":x.version,isIsolateContext:y,isGame:d,isApp:p,isMainContext:_,isSubContext:m,isSafeEnv:b,isService:u,isWebView:l,isWorker:f,isWidget:!1,typeStr:m?"SubContext":s,isWXLibWorker:g,workerType:"user",contextName:"",mayHaveSnapShot:!!i.mayHaveSnapshot},E=()=>{},T="devtools"===S.platform;"undefined"!=typeof performance&&performance.now;function C(e,t=(()=>E)){return e.reduce(((e,r)=>(e[r]=t(r),e)),{})}function A(){var t=__wxConfig||e.g.__wxConfig;if(t&&"debug"in t&&void 0!==t.debug)return!!t.debug}var O=()=>{},M=["log","info","warn","error","debug"],R=C(M),P=["log","info","warn","error","profile","profileSync","traceBegin","traceEnd"],I=(()=>{var e=C(P);return e})(),N=I,D=Symbol("error"),L=Symbol("slow");class F{constructor(){this.$=Object.create(null),this.$$=Object.create(null)}onInternalEvent(e,t){var r=this.$$[e];return r?r.push(t):this.$$[e]=[t],this}emitPrivate(e,...t){var r=this.$$[e];return!!(r&&r.length>0)&&(r.forEach((e=>{try{e(...t)}catch(e){console.error("EventEmitter error:",e)}})),!0)}onError(e){return this.onInternalEvent(D,e),this}onSlow(e){return this.onInternalEvent(L,e),this}_privEmit(e,t,...r){var n=this.$[e];if(n&&n.length>0){var o,i=!1;for(var a of n){if(0!==a.count)try{var s=Date.now();o=a.cb(...r);var c=Date.now();c-s>F.SLOW_CALLBACK_THRESHOLD&&this.emitPrivate(L,e,s,c,a.cb)}catch(t){if(!this.emitPrivate(D,e,t))throw t}if(a.count>0&&a.count--,0===a.count&&(i=!0),!1===o&&t.cancelable)break}return i&&(this.$[e]=n.filter((e=>0!==e.count))),!0}return!1}emit(e,...t){return this._privEmit(e,{},...t)}emitCancelable(e,...t){return this._privEmit(e,{cancelable:!0},...t)}many(e,t,r,n={}){if(!t)return this;var o={count:r,cb:t},i=this.$[e];return i?n.prepend?i.unshift(o):i.push(o):this.$[e]=[o],this}on(e,t,r){return this.many(e,t,-1,r)}once(e,t,r){return this.many(e,t,1,r)}off(e,t){var r=this.$[e];if(!r)return!1;var n=r.findIndex((e=>e.cb===t));return!(n<0)&&(r.splice(n,1),!0)}}F.SLOW_CALLBACK_THRESHOLD=50;var k=new F,B="unhandlederror",j="unhandledrejection",U="frameworkerror",G=new WeakMap;var V=Object.prototype.hasOwnProperty;function W(e){var t;if(e&&"Object"===(null===(t=e.constructor)||void 0===t?void 0:t.name)&&"string"==typeof e.message&&"string"==typeof e.stack){var r=new Error(e.message);return Object.assign(r,e),r}return e}function z(e,t){e=W(e),Re.onLoad((()=>{k.emit(j,{reason:e,promise:t})||console.error("Uncaught (in promise)",e)}),!0)}var H,X=!1,K=!1;function $(e,t){if(e instanceof Error&&t&&(e.message=`${t} fail: ${e.message}`),e=W(e),__wxConfig.isSnapshoting)throw e;Re.onLoad((()=>{if(X)console.error("[ErrorHandler] recursive framework error detected.",e);else{X=!0;try{k.emit(U,e)||q(e)}catch(e){console.error("Framework",e)}X=!1}}),!0)}function q(e){if(e=W(e),__wxConfig.isSnapshoting)throw e;Re.onLoad((()=>{if(K)console.error("[ErrorHandler] recursive uncaught error detected.",e);else{K=!0;try{k.emit(B,e)||"windows"===__wxConfig.platform&&"undefined"!=typeof WORKER_RUNTIME&&WORKER_RUNTIME&&4===__wxConfig.appType||console.error("Uncaught",e)}catch(e){console.error("Uncaught",e)}K=!1}}),!0)}function Y(e){k.on(j,e)}function Z(e){k.on(U,e)}function J(e){k.on(B,e)}"object"==typeof(H=e.g)&&"function"==typeof H.addEventListener?(H.addEventListener("unhandledrejection",(e=>{z(e.reason,e.promise),e.reason&&e.preventDefault()})),H.addEventListener("error",(e=>{var t,r;q(e.error||{message:e.message,stack:`${e.message}\nEmpty stack, maybe muted error. (xweb=${(null===(t=H.navigator)||void 0===t||null===(r=t.userAgent)||void 0===r?void 0:r.toUpperCase().indexOf("XWEB"))>=0})`}),e.error&&e.preventDefault()}))):void 0===H.onunhandledrejection&&Object.defineProperty(H,"onunhandledrejection",{value(e={}){var t,r;V.call(e,"type")?(t={type:e.type,reason:e.reason,promise:e.promise},(r=t.promise)&&(G.has(r)||setTimeout((()=>{var e=G.get(r);0===(null==e?void 0:e.type)&&z(e.reason,e.promise),G.delete(r)}),0),G.set(r,t))):z(e.reason,e.promise)}});var Q,ee=JSON.parse,te=JSON.stringify;function re(e){return ee(te(e))}function ne(e){e.platform=S.platform,e.brand||"ios"!==e.platform||(e.brand="iPhone"),e.sdkVersion=e.SDKVersion=S.SDKVersion,e.isReady=!1,e.onReady=Re.onStart}function oe(e){var t;ne(e),S.isSubContext||(e.preload=!0===e.preload),"number"==typeof e.pixelRatio?e.devicePixelRatio=e.pixelRatio:"number"==typeof e.devicePixelRatio&&(e.pixelRatio=e.devicePixelRatio);var r=null===(t=__libVersionInfo__.debugOptions)||void 0===t?void 0:t.overwriteExpt;r&&(e.expt=Object.assign(e.expt||{},r))}function ie(e){if(oe(e),e.isReady=!0,e.appLaunchInfo=e.appLaunchInfo||{},e.preloadType=e.preloadType||e.appLaunchInfo.preloadType||e.preload,"ios"===e.platform){var t=(i=e.appLaunchInfo.clickTimestampInMs)?i+9782784e5-(new Date).getTimezoneOffset()/60*3600*1e3:0,r=Number.MAX_SAFE_INTEGER,n=e.instanceId;if(n)try{var o=n.split("&").filter((e=>0===e.indexOf("ts=")));o.length>0&&(r=parseInt(o[0].slice(3),10))}catch(e){$(e,"parseInstanceId")}e.coldLaunchTime=Math.min(t,r)}else e.coldLaunchTime=e.appLaunchInfo.clickTimestamp||0;var i}var ae=!(null===(Q=__libVersionInfo__.features)||void 0===Q||!Q.pruneWxConfigByPage),se=Object.defineProperty,ce=["env","appLaunchInfo","ext","wxAppInfo","debug","entryPagePath","envVersion","tabBar","pages","page","accountInfo","global","platform","system","appType","networkTimeout","navigateToMiniProgramAppIdList","plugins","extAppid","host","prerender"];function ue(e,t,r,n){se(e,r,{configurable:!0,enumerable:!0,get(){if(r in t)return t[r];try{var e;R.warn("[__wxConfig usage] developer uses __wxConfig."+r),"function"==typeof(null===(e=Reporter)||void 0===e?void 0:e.reportKeyValue)&&Reporter.reportKeyValue({key:"DeprecatedAPI",value:"__wxConfig."+r,force:!0})}catch(e){$(e,"report __wxConfig usage")}try{return"function"!=typeof n?n:n()}catch(e){return void $(e,`read mock wxConfig.${r}`)}},set(e){t[r]=e}})}var le=S.isSafeEnv,fe=Object.create(null),pe=S.isService?function(e){return new Proxy(e,{set(e,t,r,n){if("__siblings__"===t)return Reflect.set(e,t,r,n);var o=Reflect.get(e,"__siblings__",n);return Array.isArray(o)?(o.length>1&&R.log(`[WXConfig] write __wxConfig.${t.toString()}, sync to all contexts.`),o.forEach((e=>{Reflect.set(e,t,r)})),!0):Reflect.set(e,t,r,n)}})}(fe):fe,de=e=>{},he="wxConfig:updatePage";function _e(t,r=!1){return de(!1),fe.currentPhase="onStart",void 0===t||(r?(Object.assign(fe,t),Object.defineProperty(fe,"__siblings__",{value:t.__siblings__,enumerable:!1,writable:!1,configurable:!1})):(Object.assign(fe,le?t:re(t)),ie(fe),function(t,r){var n;Array.isArray(null==t||null===(n=t.tabBar)||void 0===n?void 0:n.list)&&t.tabBar.list.forEach((e=>{delete e.iconData,delete e.selectedIconData})),delete t.permission;var o=t.subPackages||t.subpackages;Array.isArray(o)&&o.length>0&&(o.forEach((e=>{delete e.pages})),t.subPackages=t.subpackages=o),"devtools"===t.platform&&(t.__globalComponentsCount=Object.keys(t.usingComponents||{}).length),ae&&(S.isSubContext||(delete t.usingComponents,Object.values(t.page||{}).forEach((e=>{null!=e&&e.window&&delete e.window.usingComponents})),t._preloadRule=t.preloadRule||{},t._page=t.page||{},delete t.preloadRule,delete t.page),t.updatePage=function(e,t){null!=t&&t.window&&delete t.window.usingComponents,r(e,t)},t.updatePreloadRule=function(e,r){t.preloadRule=t.preloadRule||{},t.preloadRule[e]=r}),e.g.__wxConfig.page=e.g.__wxConfig.page||{},t.page=t.page||{}}(fe,((e,t)=>{Re.emit(he,{key:e,value:t})})),Object.defineProperty(fe,"__siblings__",{value:[],enumerable:!1,writable:!1,configurable:!1})),Array.isArray(fe.__siblings__)&&fe.__siblings__.push(fe),fe.onPageUpdate((({key:e,value:t})=>{fe.page=fe.page||{},fe.page[e]=fe.page[e+".html"]=t,n&&(n[e+".html"]=re(t))})),le||(n=function(){var t=e.g.__wxConfig,r={},n={},o=ae?{}:t.page||{};try{ue(n,r,"deprecated",!0),ce.forEach((e=>{if(e in t){var i=t[e];switch(e){case"page":ue(n,r,e,o);break;case"env":ue(n,r,e,(()=>(console.warn("[Deprecation] __wxConfig.env is deprecated, please use wx.env instead."),{USER_DATA_PATH:i.USER_DATA_PATH})));break;case"accountInfo":ue(n,r,e,{appId:i.appId,icon:i.icon,nickname:i.nickname});break;case"appLaunchInfo":ue(n,r,e,(()=>(console.warn("[Deprecation] __wxConfig.appLaunchInfo is deprecated, please use wx.getLaunchOptionsSync() instead."),wx&&"function"==typeof wx.getLaunchOptionsSync?wx.getLaunchOptionsSync():{})));break;case"wxAppInfo":ue(n,r,e,{maxRequestConcurrent:i.maxRequestConcurrent,maxUploadConcurrent:i.maxUploadConcurrent,maxDownloadConcurrent:i.maxDownloadConcurrent,maxWorkerConcurrent:i.maxWorkerConcurrent,maxWebsocketConnect:i.maxWebsocketConnect});break;default:ue(n,r,e,i)}}})),e.g.__wxConfig=n}catch(r){$(r,"mockGloablWxConfig"),e.g.__wxConfig=t}return o}())),pe;var n}var me=new F,ve=new F,ye={},ge="WeixinJSBridgeReady",be="libraryEnd",we="load",xe="postLoad",Se="start",Ee="postStart";function Te(e,t){if(e in ye)try{t(ye[e])}catch(t){$(t,"LifeCycle."+e)}else ve.once(e,t)}function Ce(e,t){return!(e in ye)&&(ye[e]=t,ve.emit(e,t))}var Ae,Oe=Te.bind(null,be),Me=Te.bind(null,we),Re={EventEmitter:F,on:me.on.bind(me),emit:me.emit.bind(me),once:me.once.bind(me),getIsLoaded:()=>we in ye,getIsStarted:()=>Se in ye,onBridgeReady(e){Te(ge,e)},setWeixinJSBridge(e){Ce(ge,e)},onLibraryEnd:Oe,onCreate(e){e()},onLoadInstant(e){__wxConfig.isSnapshoting&&S.mayHaveSnapShot?Me((()=>{e()})):e()},onLoad(e,t=!1){t?Oe((()=>{Me(e)})):Me(e)},_onPostLoad:Te.bind(null,xe),onStart:Te.bind(null,Se),onPostStart:Te.bind(null,Ee)};ve.onError(((e,t)=>{R.error(`[LifeCycle/${S.typeStr}] ${e.toString()} failed: `,t),$(t,"LifeCycle."+e.toString())})).onSlow(((e,t,r,n)=>{N.warn(`[LifeCycle/${S.typeStr}] slow ${e.toString()} callback (${r-t}ms)\n${n+""}`)})),e.g.__wxLibrary.onEnd=function(){Ce(be)},Ae=e.g.__wxConfig,fe.currentPhase="onCreate",void 0===Ae||(de(!1),Object.assign(fe,le?Ae:re(Ae)),ne(fe),de(!0));var Pe=!1,Ie=!1;function Ne(){Pe||Ie?$(new Error(`LifeCycle error: undesired onLoad(${Pe}/${Ie})`)):(Pe=!0,__wxConfig=function(e){return fe.currentPhase="onLoad",void 0===e||(de(!1),Object.assign(fe,le?e:re(e)),fe.onPageUpdate=Re.on.bind(null,he),oe(fe),de(!0)),pe}(e.g.__wxConfig),Ce(we,__wxConfig),S.isSubContext?__wxConfig.__readyHandler=e=>{De(e,!0)}:!0===__wxConfig.preload?Re.onBridgeReady((t=>{t.on("onWxConfigReady",(()=>{De(e.g.__wxConfig)}))})):Re.onLibraryEnd((()=>{De(e.g.__wxConfig)})),Ce(xe,__wxConfig))}function De(e,t=!1){if(Pe&&!Ie){Ie=!0;var r=Date.now();"onReadyStart"in(__wxConfig=_e(e,t))||(__wxConfig.onReadyStart=r),Ce(Se,__wxConfig),__wxConfig.onReadyEnd=Date.now(),Ce(Ee,__wxConfig)}else $(new Error(`LifeCycle error: undesired onStart(${Pe}/${Ie})`))}(__wxConfig=pe).isSnapshoting?e.g.WeixinSnapshot={snapshotContextReady(){delete e.g.WeixinSnapshot,__wxConfig.isSnapshoting=!1,Ne()}}:S.mayHaveSnapShot?Re.onLibraryEnd(Ne):Ne();class Le{constructor(e,t,r){this.num=e,this.type=t,this.bindingFn=void 0,this.bindingFn="function"==typeof r?r:O}}var Fe={ALL:new Le(Number.MIN_VALUE,"ALL"),DEBUG:new Le(5e3,"DEBUG",console.debug),LOG:new Le(1e4,"LOG",console.log),INFO:new Le(2e4,"INFO",console.info),WARN:new Le(3e4,"WARN",console.warn),ERROR:new Le(4e4,"ERROR",console.error),OFF:new Le(Number.MAX_VALUE,"OFF")},ke=(e,t)=>({debug:e(Fe.DEBUG,t),log:e(Fe.LOG,t),info:e(Fe.INFO,t),warn:e(Fe.WARN,t),error:e(Fe.ERROR,t)}),Be=Fe.INFO,je=(()=>{if(S.isWorker||S.isWidget){return Object.assign({createLogger:function(){return R}},R)}return S.isSubContext&&S.isIsolateContext?(e=[],t=(t,r)=>(...n)=>{e.push({level:t,logs:n,category:r})},r=()=>{setTimeout((()=>{var t=wxNativeConsole.__isFromMainContext?wxNativeConsole.__mergeSubContextLogs:null;t?(t(e),e=[]):r()}),1e3)},Re.onStart(r),o()(o()({},ke(t)),{},{createLogger:e=>ke(t,"string"==typeof e?e:"default"),__isFromMainContext:!1})):(()=>{var e=S.platform,t="android"!==e,r=[],n=function(t){"android"!==e?WeixinJSBridge.invoke("systemLog",{dataArray:t.map((t=>{return{message:`\n${r=t.date,n=("0"+(r.getMonth()+1)).slice(-2),o=("0"+r.getDate()).slice(-2),i=("0"+r.getHours()).slice(-2),a=("0"+r.getMinutes()).slice(-2),s=("0"+r.getSeconds()).slice(-2),c=("00"+r.getMilliseconds()).slice(-3),u=r.getFullYear()+"-"+n+"-"+o,l=i+":"+a+":"+s+"."+c,"ios"===e?u+" "+l+"000"+(r.getTimezoneOffset()/6e3*-1).toFixed(4).replace(/^0\./,"+").replace(/-0\./,"-"):u+" "+(r.getTimezoneOffset()/60*-1).toFixed(1).replace(/^(\d)/,"+$1")+" "+l} [${t.level.type[0].toUpperCase()}][wxapplib]] ${t.content}`};var r,n,o,i,a,s,c,u,l}))}):t.forEach((e=>{e.level.bindingFn("[wxapplib]] "+e.content)}))},i=e=>{if(e instanceof Error)return`${e.message}\n${e.stack}`;if(e&&"string"==typeof e.stack&&"string"==typeof e.message)return`${e.message}\n${e.stack}`;switch(typeof e){case"bigint":case"boolean":case"function":case"number":case"symbol":return e.toString();case"string":return e;case"undefined":return"undefined";case"object":var t;try{t=JSON.stringify(e)}catch(e){t="[对象含有循环引用]"}return t;default:return}},a=function(e,o){return function(...a){var s;if(o&&Array.prototype.unshift.call(a,"["+o+"]"),(A()||e.num>=Fe.WARN.num)&&(null===(s=R[e.type.toLowerCase()])||void 0===s||s.call(R,...a)),e.num>=Be.num){var c=Array.prototype.slice.call(a).map(i).join(" ");if(t){var u=new Date;r&&r.length>1024&&r.shift(),r.push({date:u,level:e,content:c})}else n([{level:e,content:c}])}}};return Re.onStart((()=>{setTimeout((function e(){setTimeout(e,4e3),0!==r.length&&(n(r),r=[])}),4e3)})),o()(o()({},ke(a)),{},{createLogger:function(e){return ke(a,"string"==typeof e?e:"default")},__mergeSubContextLogs:e=>{Array.isArray(e)&&e.forEach((e=>{var{level:t,logs:r,category:n}=e;a(t,n)(...r)}))},__isFromMainContext:!0})})();var e,t,r})();Re.onLoad((()=>{je.info("[BaseLibVersion] "+JSON.stringify(__libVersionInfo__))}));var Ue,Ge=je,Ve=C(["log","info","warn","error"],(e=>function(...t){(T||A())&&console[e]("[system]",...t)}));function We(){return Ue||("undefined"!=typeof NativeGlobal&&void 0!==NativeGlobal.WebAssembly?NativeGlobal.WebAssembly:void 0!==globalThis.WebAssembly?globalThis.WebAssembly:void 0)}Re.onLoad((()=>{Ue=We()}));var ze=Object.create(null);Object.defineProperty(ze,"WebAssembly",{enumerable:!0,get:We});var He=ze,Xe=e.g,Ke=o()(o()(o()({env:S,global:Xe,get isConfigReady(){return Re.getIsStarted()},get isStarted(){return Re.getIsStarted()},get isLoaded(){return Re.getIsLoaded()}},Re),r),{},{wxConsole:R,wxPerfConsole:N,wxNativeConsole:Ge,libConsole:Ve,libGlobal:He,globalShare:{}});"undefined"!=typeof __Function__&&(Function=function(){return"return this"===arguments[arguments.length-1]?function(){return Xe}:new __Function__(...arguments)},Function.prototype=__Function__.prototype);var $e=Ke})(),Foundation=t.default})();var wxConsole=Foundation.wxConsole,wxPerfConsole=Foundation.wxPerfConsole,wxNativeConsole=Foundation.wxNativeConsole,libConsole=Foundation.libConsole,libGlobal=Foundation.libGlobal,JSContext,__webviewEngineMock__,Protect,__errorTracer__,__subContextEngine__,__skylineSDK__;(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};e.d(t,{default:()=>u});var r,n,o,i=Object.prototype.toString,a=(Object.getPrototypeOf,Object.getOwnPropertyNames,Object.getOwnPropertyDescriptor,Object.defineProperty,{}),s={subscribeHandler:(e,t,o={})=>{if(void 0!==e&&e===r)return t=t.valueOf(),Array.isArray(a[t])?n?void setTimeout((()=>{a[t].map((e=>e(o)))})):a[t].map((e=>e(o))):void 0}};Foundation.onLoadInstant((()=>{o=e.g.WeixinJSContextId}));var c={__init__:(e,t)=>{void 0===r&&void 0!==e&&((r=e).register(e,s,t),n=r.crossVMContext)},publish:(e,t={})=>{var n,o=(n=t,i.call(n).split(" ")[1].split("]")[0]);if("Object"!==o&&"Undefined"!==o)throw new Error("params should be an object.");var a=e.valueOf(),c=t||{};if(r&&"function"==typeof r.subscribeHandler)return r.subscribeHandler(r,s,a,c)},subscribe:(e,t)=>{var n,i;if(Array.isArray(a[e])||(a[e]=[]),a[e].push(t),null!==(n=r)&&void 0!==n&&n.waitingChannel&&null!==(i=r)&&void 0!==i&&i.waitingChannel[o]){var s=[];r.waitingChannel[o].forEach((r=>{var{event:n,params:o}=r;n===e?t(o):s.push(r)})),r.waitingChannel[o]=s}}};Foundation.onLoad((()=>{"undefined"!=typeof WeixinJSContext&&(c.__init__(WeixinJSContext,e.g.WeixinJSContextId),delete c.__init__,delete e.g.WeixinJSContext,delete e.g.WeixinJSContextId)}));var u=c;JSContext=t.default})(),(()=>{var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();__wxConfig.onReady((()=>{window.devicePixelRatio=__wxConfig.devicePixelRatio,window.screen={width:__wxConfig.screenWidth,height:__wxConfig.screenHeight,orientation:{type:"portrait"}}})),(()=>{(window=e.g).__rpxRecalculatingFuncs__=[],window.navigator={userAgent:{match(){console.warn("MiniProgram or plugin seems not compiled with proper renderer, styles may be wrong."),wxNativeConsole.error("[SkylineStyle] window.navigator.userAgent.match is called in jsContext, may be old version of miniprogram or plugin is injected into RenderContext. Render may not work properly.")}}},window.requestAnimationFrame=e=>{setTimeout((()=>{e(Date.now())}),0)},window.CustomEvent=function(e,t){return this.event=e,this.detail=t?t.detail:void 0,this},window.fakeStyleTags=[],window.document={head:{appendChild(e){e.isStyleTag&&window.fakeStyleTags.push(e)}},createElement(e){var t={isStyleTag:"style"===e,path:"",setAttribute(e,r){"wxss:path"===e&&(t.path=r)},styleSheet:{}};return t.isStyleTag||wxNativeConsole.error(`[SkylineStyle] createElement with tagName="${e}" is invalid, expected "style"`),t}};var t={};window.dispatchEvent=window.document.dispatchEvent=function(e){void 0!==t[e.event]&&t[e.event].forEach((t=>{t({detail:e.detail})}))},window.addEventListener=window.document.addEventListener=function(e,r){void 0===t[e]&&(t[e]=[]),t[e].push(r)},window.removeEventListener=window.document.removeEventListener=function(e,r){if(void 0!==t[e]){var n=t[e].indexOf(r);-1!==n&&t[e].splice(n,1)}}})(),__webviewEngineMock__={}})(),(()=>{var e={333:(e,t,r)=>{"use strict";r.r(t);var n=(()=>(__wxConfig.onReady((()=>{n!==__wxConfig&&void 0!==n&&Object.assign(n,__wxConfig)})),__wxConfig))();t.default=n},581:(e,t,r)=>{"use strict";r.r(t),r.d(t,{reportDeprecatedAPI:()=>n});var n=e=>{Reporter.reportKeyValue({key:"DeprecatedAPI",value:e})}},578:(e,t,r)=>{var{reportDeprecatedAPI:n}=r(581),{default:o}=r(333);e.exports={hijack:function(e=!0,t=!0){!function(e){if("function"==typeof globalThis.Function){var t={};r.prototype=globalThis.Function.prototype,r.prototype.constructor=r,globalThis.Function=r}function r(){if(arguments.length>0&&"return this"===arguments[arguments.length-1])return function(){return e?t:{}}}}(t),"undefined"!=typeof eval&&("ios"===o.platform&&r.g.__isAppServiceRemoteDebugMode__||o.debug||(globalThis.eval=void 0)),e&&function(){if("undefined"!=typeof setTimeout){var e=setTimeout;globalThis.setTimeout=function(t,r=0){if("function"!=typeof t)throw new TypeError(`setTimeout expects a function as first argument but got ${typeof t}.`);var n=__errorTracer__.surroundThirdByTryCatch(t,"at setTimeout callback function"),o=[].slice.call(arguments,2);return e((()=>{n.apply(globalThis,o)}),r)};var t=setInterval;globalThis.setInterval=function(e,r){if("function"!=typeof e)throw new TypeError(`setInterval expects a function as first argument but got ${typeof e}.`);var n=__errorTracer__.surroundThirdByTryCatch(e,"at setInterval callback function"),o=[].slice.call(arguments,2);return t((()=>{n.apply(globalThis,o)}),r)}}}(),"undefined"!=typeof WebAssembly&&["compile","compileStreaming","instantiate","instantiateStreaming","validate","Module"].forEach((e=>{if(void 0!==WebAssembly[e]){var t=WebAssembly[e];Object.defineProperty(WebAssembly,e,{get:()=>(n("globalWa"),t),set:t=>{Object.defineProperty(WebAssembly,e,{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}}))}}},585:()=>{if("undefined"==typeof navigator){try{new Function('var GeneratorFunctionProto = Object.getPrototypeOf(function* () {});var FakeGeneratorFunction = function () {};FakeGeneratorFunction.prototype = GeneratorFunctionProto;Object.defineProperty(GeneratorFunctionProto, "constructor", { value: FakeGeneratorFunction });')()}catch(e){}try{new Function('var AsyncFunctionProto = Object.getPrototypeOf(async function () {});var FakeAsyncFunction = function () {};FakeAsyncFunction.prototype = AsyncFunctionProto;Object.defineProperty(AsyncFunctionProto, "constructor", { value: FakeAsyncFunction });')()}catch(e){}try{new Function('var AsyncGeneratorFunctionProto = Object.getPrototypeOf(async function* () {});var FakeAsyncGeneratorFunction = function () {};FakeAsyncGeneratorFunction.prototype = AsyncGeneratorFunctionProto;Object.defineProperty(AsyncGeneratorFunctionProto, "constructor", { value: FakeAsyncGeneratorFunction });')()}catch(e){}}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{bridgeGlobalInstanceOf:()=>ee,deepFreezeGlobalObjs:()=>X,deepFreezeObj:()=>I,deepFreezeObjProperty:()=>P,doNotWriteGlobalObjs:()=>H,doNotWriteObj:()=>F,doNotWriteObjProperty:()=>N,globalEsHiddenObjs:()=>t,globalEsObjs:()=>o,hijack:()=>K.hijack,overwriteSetPrototypeOf:()=>z});r(585);var e=globalThis.Function,t=[()=>Object.getPrototypeOf(Uint8Array.prototype).constructor,()=>new e("return Object.getPrototypeOf((function* () {})()).constructor")(),()=>new e("return Object.getPrototypeOf(function* () {}).constructor")(),()=>new e("return Object.getPrototypeOf(async function () {}).constructor")(),()=>new e("return Object.getPrototypeOf(async function* () {}).constructor")()].map((e=>{try{return e()}catch(e){}})).filter(Boolean),o=["AggregateError","Array","ArrayBuffer","Atomics","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","Error","EvalError","FinalizationRegistry","Float32Array","Float64Array","Function","globalThis","Infinity","Int16Array","Int32Array","Int8Array","Intl","JSON","Map","Math","NaN","Number","Object","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","URIError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WeakMap","WeakSet","WebAssembly","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","null","parseFloat","parseInt","undefined","unescape","uneval"],i=["getApp","getCurrentPages","define","require","Reporter","Protect","requirePlugin","definePlugin"],a=globalThis,s=r(333),c=(()=>s.default.platform)(),u=(()=>"ios"===c)();var l=/^\s*at .*(\S+:\d+|\(native\))/m,f=/^(eval@)?(\[native code\])?$/;function p(e,t=1/0){if("string"!=typeof e.stack)throw new Error("Cannot parse given Error object");var r=e.stack;return u?function(e,t){for(var r=[],n=e.split("\n"),o=0,i=0;o<n.length&&i<t;++o){var a=n[o];if(!f.test(a)){++i;var s=a.indexOf("@");if(-1===s){var c=d(a);r.push({fileName:c.URI,lineNumber:c.line,columnNumber:c.column,source:a})}else{var u=a.substring(0,s),l=d(a.substr(s+1));r.push({functionName:u,fileName:l.URI,lineNumber:l.line,columnNumber:l.column,source:a})}}}return r}(r,t):function(e,t){for(var r=[],n=e.split("\n"),o=0,i=0;o<n.length&&i<t;++o){var a=n[o];l.test(a)&&(r.push(a),++i)}return r.map((e=>{e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),r=t.match(/ (\((.+):(\d+):(\d+)\)$)/),n=(t=r?t.replace(r[0],""):t).split(/\s+/).slice(1),o=d(r?r[1]:n.pop());return{functionName:n.join(" ")||void 0,fileName:["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0],lineNumber:o[1],columnNumber:o[2],source:e}}))}(r,t)}function d(e){var t=/(?::(\d+))?(?::(\d+))?$/.exec(e);return t?{URI:e.substring(0,e.length-t[0].length),line:t[1],column:t[2]}:{URI:e}}var h=Object.freeze,_=Object.setPrototypeOf,m=Object.defineProperty,v=Object.getOwnPropertyDescriptor,y=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,b=Object.getPrototypeOf,w=Object.preventExtensions;var x=[[e=>!/(WAServiceMainContext|WAGame)\.js/.test(e)]];function S(){var e,t,r=Date.now(),n=p(new Error,3),o=n[1],i=n[2],a=!(o.fileName&&i.fileName&&i.fileName!==o.fileName&&(e=i.fileName,t=o.fileName,!x.some((r=>r.some((t=>t(e)))&&r.some((e=>e(t)))))));return Date.now()-r,a}function E(e,t=!1){if("function"==typeof e||"object"==typeof e&&null!==e){var r=v(e,"__proto__");r&&!r.configurable||(r||Object.isExtensible(e))&&m(e,"__proto__",{get(){return b(this)},set(r){if(this===e)t&&S()&&_(e,r);else{if("function"!=typeof this&&("object"!=typeof this||null===e))return;_(this,r)}},enumerable:!1,configurable:!1})}}var T=new Map,C=(e,t,r)=>{T.has(e)||T.set(e,new Map);var n=T.get(e);n.has(t)?Object.assign(n.get(t),r):n.set(t,r)};function A(e,t,r=!1){if("function"!=typeof e&&("object"!=typeof e||null===e))return!1;try{var n=v(e,t);return!!n&&(n.configurable&&(m(e,t,{get:n.get||(()=>n.value),set(o){if(this===e)r&&S()&&(n.set?n.set.call(this,o):n.writable&&(n.value=o));else{if("function"!=typeof this&&"object"!=typeof this)return;!function(e,t,r){try{"__proto__"===t?_(e,r):m(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}catch(e){}}(this,t,o)}},enumerable:n.enumerable,configurable:!1}),r&&C(e,t,n)),!n.get&&("function"==typeof n.value||"object"==typeof n.value&&null!==n.value))}catch(e){throw e.message,e}}var O=new WeakSet;function M(e){O.add(e)}function R(e){return O.has(e)}function P(e,t,r){A(e,t)&&I(e[t],r)}function I(e,t){if(e&&!R(e)&&("function"==typeof e||"object"==typeof e)&&e!==globalThis)if(e!==Error){M(e);for(var r=y(e),n=g(e),o=0;o<r.length;++o)P(e,r[o],t);for(var i=0;i<n.length;++i)P(e,n[i],t);t?w(e):E(e,!1)}else if(t){var a=e=>{if(e&&!R(e)&&("function"==typeof e||"object"==typeof e)&&e!==globalThis){M(e),h(e);for(var t=y(e),r=g(e),n=0;n<t.length;++n)a(e[t[n]]);for(var o=0;o<r.length;++o)a(e[r[o]])}};a(Error)}}function N(e,t){A(e,t,!0)&&F(e[t])}var D=new WeakSet;function L(e){return D.has(e)}function F(e){if(e&&!L(e)&&("function"==typeof e||"object"==typeof e)&&e!==globalThis){!function(e){D.add(e)}(e);for(var t=y(e),r=g(e),n=0;n<t.length;++n)N(e,t[n]);for(var o=0;o<r.length;++o)N(e,r[o]);E(e,!0)}}var k=Object.prototype.hasOwnProperty,B=Object.defineProperty,j=Object.defineProperties,U=Object.getOwnPropertyNames,G=Object.getOwnPropertySymbols,V=Object.getOwnPropertyDescriptor,W=!1,z=function(){W||(W=!0,B(a.Object,"setPrototypeOf",{value:(e,t)=>(e.__proto__=t,e),configurable:!0}),B(a.Object,"defineProperty",{value(e,t,r){if(!L(e))return B(e,t,r);if(!S())return r;var n=V(e,t);if(!n||n.configurable){var o=B(e,t,r);return N(e,t),o}return C(e,t,r),r},configurable:!0}),B(a.Object,"defineProperties",{value(e,t){if(!L(e))return j(e,t);if(!S())return t;var r=r=>{var n=V(e,r);if(!n||n.configurable){var o=B(e,r,t[r]);return N(e,r),o}return C(e,r,t[r]),t[r]};return U(t).forEach(r),G(t).forEach(r),t},configurable:!0}))},H=function(e=[]){try{for(var r=[...o,...i,...t,...e],n=(Date.now(),0);n<r.length;++n){var s=r[n],c=typeof s;"string"===c?k.call(a,s)&&N(a,s):"function"!==c&&"object"!==c||F(s)}Date.now()}catch(e){}},X=function(e=[],r=!1){try{for(var n=[...o,...i,...t,...e],s=(Date.now(),0);s<n.length;++s){var c=n[s],u=typeof c;"string"===u?k.call(a,c)&&P(a,c,r):"function"!==u&&"object"!==u||I(c,r)}Date.now()}catch(e){}},K=r(578),$=Object.prototype.isPrototypeOf,q=Object.defineProperty,Y=Object.prototype.hasOwnProperty,Z=Symbol.hasInstance,J=function(e){return!("function"!=typeof this||!Q(e))&&((e,t)=>$.call(t.prototype,e))(e,this)},Q=e=>"object"==typeof e?null!==e:"function"==typeof e;function ee(e,t){for(var r=function(){var r=e[n],o=t[n];if("function"!=typeof r)return"continue";var i=Y.call(r,Z)?r[Z]:J,a=Y.call(o,Z)?o[Z]:J;q(r,Z,{value(e){return i.call(this,e)||a.call(o,e)},writable:!0,enumerable:!1,configurable:!0}),q(o,Z,{value(e){return a.call(this,e)||i.call(r,e)},writable:!0,enumerable:!1,configurable:!0})},n=0;n<e.length;++n)r()}})(),Protect=n})(),(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{callMiniProgramOrPluginFunction:()=>p,callSystemFunction:()=>l,callThirdPartyFunction:()=>d,convertStack:()=>o,endSystemFunctionCall:()=>u,findCurrentSource:()=>s,startSystemFunctionCall:()=>c,surroundThirdByTryCatch:()=>m,wrapMiniProgramOrPluginFunction:()=>h,wrapSystemFunction:()=>f,wrapThirdPartyFunction:()=>_,wrapperStack:()=>n});var r=/[ (@]*https?:\/\/([^/]*)\/+(.*?):(\d+):(\d+)/,n=[];function o(e){if(!e||e.__wxOriginalStack__)return!1;var t=e.stack;if(void 0===t)return!1;for(var r=t,o=n.length-1,a=0;a>=0&&o>=0;){var s=r.length,c=0;for(var u in i)if(i[u]){var l=r.indexOf(i[u],a);l<0||s<=l||(s=l,c=i[u].length)}if(s>=r.length)break;var f=`at <${n[o--].description}>`;r=r.slice(0,s)+f+r.slice(s+c),a=s+f.length}return Object.defineProperties(e,{__wxOriginalStack__:{value:t,writable:!0,configurable:!0},stack:{value:r,writable:!0,enumerable:!0,configurable:!0}}),!0}var i={wrapSystemFunction:null,wrapMiniProgramOrPluginFunction:null};function a(e){var t=((new Error).stack||"").match(/.+/gm),n="",o=0;t&&t.forEach((e=>{if(r.test(e)&&2===(o+=1)){var t=e.match(/^(\s*)at /),i=t?t[1].length:0;return n=e.slice(i),!1}return!0})),i[e]=n}function s(){for(var e="",t=n.length-1;t>=0;t--)n[t].pluginAppId&&(e=n[t].pluginAppId);return e}var c=e=>{null===i.wrapSystemFunction&&(i.wrapSystemFunction="",f("","",a)("wrapSystemFunction")),n.push({description:e})},u=()=>{n.pop()};function l(e,t,r,c,u,l=!1){var p;null===i.wrapSystemFunction&&(i.wrapSystemFunction="",f("","",a)("wrapSystemFunction")),n.push({description:t});try{p=r.apply(c,u)}catch(t){if(o(t)){if("AppServiceSdkKnownError"===t.type)throw n.pop(),t;if("ThirdScriptError"===t.type){var d=s();Reporter.thirdErrorReport({error:t,source:d,triggerErrorCallback:!l})}else Reporter.errorReport({key:e,error:t,triggerErrorCallback:!l})}if(l)throw n.pop(),t}return n.pop(),p}function f(e,t,r,n=!1){return function(...o){return l(e,t,r,this,o,n)}}function p(e,t,r,s,c,u=!1){var l;null===i.wrapMiniProgramOrPluginFunction&&(i.wrapMiniProgramOrPluginFunction="",h("","",a)("wrapMiniProgramOrPluginFunction")),n.push({description:t,pluginAppId:e});try{l=r.apply(s,c)}catch(t){if(o(t)&&Reporter.thirdErrorReport({error:t,source:e||"",triggerErrorCallback:!u}),u)throw n.pop(),t}return n.pop(),l}function d(e,t,r,n,o=!1){return p(s(),e,t,r,n,o)}function h(e,t,r,n=!1){return function(...o){return p(e,t,r,this,o,n)}}function _(e,t,r=!1){return function(...n){return p(s(),e,t,this,n,r)}}function m(e,t){var r=(t||"").match(/^\s*(?:at )?([\s\S]*)$/),n=r?r[1]:"",o=e||function(){};return function(...e){return p(s(),n,o,o,e,!1)}}__errorTracer__=t})(),(()=>{var e={421:(e,t,r)=>{r.d(t,{D:()=>o,m:()=>n});var n={APP:"app",APP_RENDER:"app_sub_render",APP_XRFRAME_RENDER:"app_xrframe_render",APP_SCL:"app_sub_scl",GAME:"game",GAME_OPEN_DATA:"gameOpenData"},o={GAME_PLUGIN_PRELOAD:"gamePlugin_preload_",GAME_PLUGIN:"gamePlugin_"}},407:(e,t,r)=>{r.d(t,{G$:()=>n});r(888),globalThis;var n=function(){return"devtools"===__wxConfig.platform}},492:(e,t)=>{var r={name:void 0,secure:!0,runningType:"app",init:function(e){this.name=e.contextName,this.secure=e.contextSecure,void 0!==Foundation&&(Foundation.env.contextName=e.contextName,Foundation.env.typeStr=`${e.contextName}_Context`),this.name.startsWith("game")?this.runningType="game":this.name.startsWith("app")&&(this.runningType="app"),this.remoteObjectProto=e.__proto__}};t.Z=r},443:(e,t,r)=>{var n=r(863),o=r(369),i=r(492),a=r(529);Foundation.onLoad((()=>{void 0===r.g.WeixinJSBridge&&(r.g.WeixinJSBridge={},r.g.WeixinJSBridge.subscribeHandler=function(e,t){"onError"===e?Foundation.emitUnhandledError(t):"unhandledRejection"===e&&Foundation.emitUnhandledRejection(null==t?void 0:t.reason,null==t?void 0:t.promise)},r.g.WeixinJSBridge.invokeCallbackHandler=function(){})})),Foundation.onUnhandledRejection((function(e={}){i.Z.name===a.CONTEXT_NAME.APP_RENDER?(0,n.yH)(e.reason,"",e.promise||null):(0,n.sK)(e.reason,"",e.promise||null)})),Foundation.onUnhandledError((function(e){e=(0,o.Bs)(e),i.Z.name===a.CONTEXT_NAME.APP_RENDER?(0,n.yH)(e,""):(0,n.sK)(e,"")})),Foundation.onFrameworkError((function(e){"function"==typeof __wxSourceMapRetrace__&&(e=__wxSourceMapRetrace__(e)),wxNativeConsole.error("FrameworkError",e)}))},151:(e,t)=>{var r={},n=Object.keys;r.init=e=>{Reporter=e;for(var t=n(e),o=0;o<t.length;o++){var i=t[o];void 0===r[i]&&(r[i]=e[i])}},t.Z=r},282:(e,t,r)=>{r.d(t,{k:()=>o});var n=r(936),o=e=>{e.onReady((e=>{Foundation._onPostLoad((()=>{var t=__wxConfig.__readyHandler;n.Z.__wxConfig=Object.assign({},e),"function"==typeof t&&t(e)}))}))}},706:(e,t,r)=>{r.d(t,{E:()=>o});var n=r(936),o=function(e){var t,o,i;("windows"===e.__wxConfig.platform||"mac"===e.__wxConfig.platform)&&e.__wxConfig.host&&"WMPF"===e.__wxConfig.host.env&&e.__isAppServiceRemoteDebugMode__?n.Z.console=r.g.console:e.__isAppServiceRemoteDebugMode__&&"ios"!==e.__wxConfig.platform?n.Z.console=e.originConsole:n.Z.console=new e.BaseConsole,t=e.wxLibVersion,i=(null===(o=__libVersionInfo__)||void 0===o?void 0:o.version)||"9.9.9",t!==i&&(wxNativeConsole.warn(`[checkVersionMatches] baselib versions between context do not match (mainContext ${t}, subContext ${i})`),Reporter.reportIDKey({key:"subContextLibVersionNotMatch"})),__Function__=e.__Function__,__userActionTracer__=e.__userActionTracer__,__appServiceSDK__=e.__appServiceSDK__,__sclEngine__=e.__sclEngine__,WeixinJSBridge=e.WeixinJSBridge,Reporter=e.Reporter,wxNativeConsole=e.wxNativeConsole,WeixinSharedBuffer=e.WeixinSharedBuffer,BaseConsole=e.BaseConsole,$dbg=e.$dbg,__isAppServiceRemoteDebugMode__=!!e.__isAppServiceRemoteDebugMode__,__remoteDebug__=e.__remoteDebug__,__debuggerMessager__=e.debuggerMessager,__subContextEngineBridge__.bridgeContext(e.__subContextEngineBridge__),e.__freezeLibContextGlobal__(),Object.defineProperty(n.Z,"__wxSourceMap",{get:__condom__.condom(e.getWxSourceMap)}),n.Z.WebAssembly&&delete n.Z.WebAssembly,Trace=e.Trace}},912:(e,t,r)=>{r.d(t,{D:()=>o});var n=r(936),o=function(e){e.__wxConfig.debug&&(console=new e.BaseConsole),setTimeout=e.setTimeout,clearTimeout=e.clearTimeout,setInterval=e.setInterval,clearInterval=e.clearInterval,WeixinJSBridge=e.WeixinJSBridge,Reporter=e.Reporter,NativeGlobal=e.NativeGlobal,WeixinCanvas=e.WeixinCanvas,WeixinArrayBuffer=e.WeixinArrayBuffer,wxNativeConsole=e.wxNativeConsole,BaseConsole=e.BaseConsole,n.Z.console=new e.BaseConsole,__sclEngine__=e.__sclEngine__,__appServiceConsole__=e.__appServiceConsole__,Trace=e.Trace,SkylineGlobal=e.SkylineGlobal}},716:(e,t,r)=>{r.d(t,{d:()=>n});var n=function(e){setTimeout=e.setTimeout,clearTimeout=e.clearTimeout,setInterval=e.setInterval,clearInterval=e.clearInterval,WeixinJSBridge=e.WeixinJSBridge,Reporter=e.Reporter,NativeGlobal=e.NativeGlobal,WeixinCanvas=e.WeixinCanvas,WeixinArrayBuffer=e.WeixinArrayBuffer,wxNativeConsole=e.wxNativeConsole,__sclEngine__=e.__sclEngine__,Trace=e.Trace}},130:(e,t,r)=>{r.d(t,{y:()=>o});var n=r(936),o=function(e){setTimeout=e.setTimeout,clearTimeout=e.clearTimeout,setInterval=e.setInterval,clearInterval=e.clearInterval,WeixinJSBridge=e.WeixinJSBridge,Reporter=e.Reporter,NativeGlobal=e.NativeGlobal,WeixinCanvas=e.WeixinCanvas,WeixinArrayBuffer=e.WeixinArrayBuffer,wxNativeConsole=e.wxNativeConsole,BaseConsole=e.BaseConsole,n.Z.console=new e.BaseConsole,Trace=e.Trace,Foundation.onLibraryEnd((()=>{xrFrame.init(e.args)}))}},878:(e,t,r)=>{r.d(t,{M:()=>i,O:()=>a});var n,o=r(936),i=function(e){var t=e._createSharedCanvas;o.Z.__isAdapterInjected=!1,o.Z.console=e.console,Object.defineProperty(o.Z,"sharedCanvas",{get:()=>t(),set(){}}),__wxConfig.onReady((()=>{!0!==__wxConfig.useHighPerformanceMode?o.Z.wx=n||__condom__.condomWX(e.wx,e.skipCondom):o.Z.wx=e.wx})),o.Z.requirePlugin=e.requirePlugin,o.Z.WXWebAssembly=e.WXWebAssembly,o.Z.WXWeakRef=e.WXWeakRef,delete o.Z.WebAssembly,o.Z.GameGlobal||(o.Z.GameGlobal=o.Z),wxNativeConsole=e.wxNativeConsole,Object.defineProperty(o.Z,"__wxSourceMap",{get:__condom__.condom(e.getWxSourceMap)})},a=function(e,t){e&&e.wx&&(n=__condom__.condomWX(e.wx,t))}},783:(e,t,r)=>{r.d(t,{o:()=>n});var n=function(e){e.getWxSourceMap&&(e.getWxSourceMap=__condom__.condom(e.getWxSourceMap)),__gameOpenDataSDK__.init(e)}},543:(e,t,r)=>{r.d(t,{m:()=>o});var n=r(936),o=function(e){delete n.Z.NativeClient,n.Z.console=e.console,n.Z.WXWebAssembly=e.WXWebAssembly,n.Z.env={},e.pluginEnv&&(n.Z.pluginEnv=e.pluginEnv),e.wx&&(n.Z.wx=e.wx)}},936:(e,t)=>{var r=function(){return this}();t.Z=r},529:(e,t,r)=>{r.r(t),r.d(t,{CONTEXT_NAME:()=>b.m,CONTEXT_NAME_PREFIX:()=>b.D,injectEntryFile:()=>y.Wm,loadJsFiles:()=>y.z5,loadLibFiles:()=>y.C4,onInitReady:()=>E,onMainContextMessage:()=>R,postMessageToMainContext:()=>O,postMessageToMainContextSync:()=>M,surroundByTryCatch:()=>v.Ue,surroundThirdByTryCatch:()=>v.M2});var n=r(97),o=r.n(n),i=(r(443),r(936)),a=r(151),s=r(492),c=r(869),u=r(282),l=r(878),f=r(783),p=r(706),d=r(130),h=r(912),_=r(543),m=r(716),v=r(863),y=r(584),g=r(407),b=r(421),w=r(369),x="subContext:initReady",S=new Foundation.EventEmitter,E=function(e){Foundation.once(x,e)};JSContext.subscribe("subContextEnvReady",(0,v.Ue)((e=>{if(s.Z.init(e),(0,c.v)(e),function(e){r.g.__isAppServiceRemoteDebugMode__=!!e.__isAppServiceRemoteDebugMode__}(e),function(e){if(e.__isAppServiceRemoteDebugMode__&&e.__remoteDebug__&&e.__remoteDebug__.setAutoTestHandler)try{var t;$eval=e.__remoteDebug__.$$eval,e.__remoteDebug__.setAutoTestHandler({$eval:(r,n,i=null)=>(t||(t="ios"===e.__wxConfig.platform?globalThis:o()(o()({},globalThis),{},{console:e.originConsole})),$eval(r,t).apply(i,n)),setGlobalFunctions(e,r){t?t[e]=r:globalThis[e]=r}})}catch(e){console.error(e)}}(e),Protect.hijack(),a.Z.init(e.Reporter),s.Z.name===b.m.GAME)(0,l.M)(e);else if(s.Z.name===b.m.GAME_OPEN_DATA)(0,f.o)(e);else if(s.Z.name===b.m.APP)(0,p.E)(e);else if(s.Z.name===b.m.APP_RENDER)(0,h.D)(e);else if(s.Z.name===b.m.APP_XRFRAME_RENDER)(0,d.y)(e);else if(s.Z.name===b.m.APP_SCL)(0,m.d)(e);else{if(!s.Z.name.startsWith(b.D.GAME_PLUGIN))throw new Error("subContextEnvReady: missing context name.");(0,_.m)(e)}(0,u.k)(e.__wxConfig)}))),JSContext.subscribe("preloadSubContextEnvReady",(0,v.Ue)((e=>{s.Z.init(e),e.preHandleEnv&&(0,l.O)(e.preHandleEnv,e.skipCondomList)}))),JSContext.subscribe("subContextRefreshEnv",(0,v.Ue)((e=>{if("game"===s.Z.name)(0,l.M)(e);else if("gameOpenData"===s.Z.name)(0,f.o)(e);else if("app"===s.Z.name)(0,p.E)(e);else if("app_sub_render"===s.Z.name)(0,h.D)(e);else if("app_xrframe_render"===s.Z.name)(0,d.y)(e);else if("app_sub_scl"===s.Z.name)(0,m.d)(e);else{if(!s.Z.name.startsWith("gamePlugin_"))throw new Error("subContextRefreshEnv: missing context name.");(0,_.m)(e)}JSContext.publish("subContextRefreshEnvReady",null,!0)}))),JSContext.subscribe("subContextRefreshWxConfig",(0,v.Ue)((e=>{var{key:t,value:r}=e;"string"==typeof t&&r&&(__wxConfig[t]=r)}))),JSContext.subscribe("exportGlobalRequire",(0,v.Ue)((e=>{var t=/^[A-Za-z]+(\.[A-Za-z]+)*$/,r=e=>{var{name:r,value:n,needCondom:o}=e;if("string"!=typeof r||!t.test(r))throw new Error("exportGlobalRequire: illegal variable name.");r.split(".").reduce(((e,t,i,a)=>{if(i===a.length-1){if(t in e)throw new Error(`exportGlobalRequire: Variable ${r} exists.`);e[t]=o?__condom__.condom(n):n}if("Array"!==(0,v.Em)(e[t])&&"Function"!==(0,v.Em)(e[t])&&"Object"!==(0,v.Em)(e[t])){var s=a.slice(0,i+1).join(".");throw new Error(`exportGlobalRequire: ${s} is not an Object.`)}return e[t]}),i.Z)};return"[object Array]"===Object.prototype.toString.call(e)?e.forEach(r):r(e)}))),JSContext.subscribe("mainContextMessage",(e=>{S.emit("mainContextMessage",e)})),JSContext.subscribe("subContextDestroy",(()=>{}));var T=["WeixinJSCore","WeixinNativeBuffer","WeixinWorker","NativeGlobal","lockSharedNativeBuffer","unlockSharedNativeBuffer","getNativeBufferId","getNativeBuffer","setNativeBuffer","setSharedNativeBuffer","getSharedNativeBuffer","WeixinArrayBuffer"];Foundation.onLoad((()=>{T.forEach((e=>{delete i.Z[e]})),JSContext.publish("subContextReady",{contextGlobal:{get __wxSourceMap(){return i.Z.__wxSourceMap},get __require(){return"game"===s.Z.name||s.Z.name.startsWith("gamePlugin_")?i.Z.require:__condom__.condom(i.Z.require)},jsonParse:JSON.parse,jsonStringify:JSON.stringify,arrayBufferProto:ArrayBuffer.prototype}},!0)}));var C=!1,A=function(){C||(C=!0,Protect.overwriteSetPrototypeOf(),Protect.deepFreezeGlobalObjs([],!1))};Foundation.onLibraryEnd((()=>{Foundation.onLoad((()=>{s.Z.secure&&__wxConfig&&__wxConfig.isIsolateContext&&A(),Foundation.emit(x)})),Foundation.onStart((()=>{__wxConfig.plugins&&!(0,g.G$)()&&A()}))}));var O=e=>{(0,w.YF)((()=>{JSContext.publish("subContextMessage",e)}))},M=e=>{JSContext.publish("subContextMessage",e)},R=e=>{S.on("mainContextMessage",e)}},584:(e,t,r)=>{r.d(t,{C4:()=>a,Wm:()=>i,z5:()=>o});var n=r(492),o=(e,t,r)=>JSContext&&JSContext.publish?JSContext.publish("loadJsFiles",{paths:e,options:r,moduleName:t,contextName:n.Z.name}):"failed",i=(e,t)=>JSContext&&JSContext.publish?JSContext.publish("injectEntryFile",{moduleName:e,separatedPlugins:t}):"failed",a=e=>JSContext&&JSContext.publish?JSContext.publish("loadLibFiles",{paths:e,contextName:n.Z.name}):"failed"},869:(e,t,r)=>{r.d(t,{v:()=>s});var n=r(936),o=r(492),i=r(863),a=function(e,t){return function(){return"function"==typeof arguments[0]&&(arguments[0]=(0,i.M2)(arguments[0],t)),e(...arguments)}},s=e=>{n.Z.setTimeout=a(e.setTimeout,"at setTimeout callback function"),n.Z.clearTimeout=a(e.clearTimeout),n.Z.setInterval=a(e.setInterval,"at setInterval callback function"),n.Z.clearInterval=a(e.clearInterval),"game"===o.Z.runningType&&(n.Z.requestAnimationFrame=a(e.requestAnimationFrame,"at requestAnimationFrame callback function"),n.Z.cancelAnimationFrame=a(e.cancelAnimationFrame))}},863:(e,t,r)=>{r.d(t,{Em:()=>l,M2:()=>s,Ue:()=>u,sK:()=>a,yH:()=>c});var n=r(421),o=r(492),i=r(151),a=function(e,t,r){try{var a;if(o.Z.name===n.m.GAME)a=i.Z.RunType.GAME;else if(o.Z.name===n.m.GAME_OPEN_DATA)a=i.Z.RunType.GAME_SUBCONTEXT;else if(o.Z.name===n.m.APP)a=i.Z.RunType.APP;else if(o.Z.name.startsWith(n.D.GAME_PLUGIN))a=i.Z.RunType.GAME_SUBCONTEXT;else if(o.Z.name===n.m.APP_RENDER)a=i.Z.RunType.APP_SUBCONTEXT;else{if(o.Z.name!==n.m.APP_XRFRAME_RENDER)throw new Error("unknown context");a=i.Z.RunType.APP_SUBCONTEXT}void 0!==r?i.Z.thirdErrorReport({key:a,error:e,extend:t,triggerErrorCallback:!o.Z.secure,isUnhandledRejection:!0,promise:r}):i.Z.thirdErrorReport({key:a,error:e,extend:t,triggerErrorCallback:!o.Z.secure,isUnhandledRejection:!1})}catch(e){console.error("[ErrorHandler] error in Report.thirdErrorReport: ",e.message)}};function s(e,t){return function(){var r;try{"function"==typeof e&&(r=e.apply(e,arguments))}catch(e){a(e,t)}return r}}function c(e,t,r){var a="";if(o.Z.name===n.m.APP_RENDER?a="appSubContextSDKScriptError":"game"===o.Z.runningType&&(a="gameSubContextSDKScriptError"),"function"==typeof i.Z.thirdErrorReport)try{void 0!==r?i.Z.errorReport({key:a,error:e,extend:t,triggerErrorCallback:!o.Z.secure,isUnhandledRejection:!0,promise:r}):i.Z.errorReport({key:a,error:e,extend:t,triggerErrorCallback:!o.Z.secure,isUnhandledRejection:!1})}catch(e){console.error("[ErrorHandler] error in Report.errorReport: ",e.message)}else{var s=`${a}\n${t?`${e.message};${t}`:e.message}\n${e.stack}`;"undefined"!=typeof console&&console.error(s)}}function u(e,t){return function(){try{return e.apply(e,arguments)}catch(e){if(e.message,e.stack,"[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;c(e,t)}return}}}function l(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]}},369:(e,t,r)=>{r.d(t,{Bs:()=>n,YF:()=>a});var n=function(e){if("string"!=typeof e)return e;try{return JSON.parse(e.replace(/"/g,'\\"').replace(/'/g,'"').replace(/\n/g,"\\n"))}catch(t){return{message:e,stack:""}}},o=!1,i=[],a=e=>{i.push(e),o||(o=!0,Promise.resolve().then((()=>{for(var e=0;e<i.length;++e)"function"==typeof i[e]&&i[e]();o=!1,i.length=0})))}},888:e=>{e.exports=BabelRuntimeHelpers.asyncToGenerator},97:e=>{e.exports=BabelRuntimeHelpers.objectSpread2}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n=r(529);__subContextEngine__=n})(),(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};e.d(t,{default:()=>Ft});var r=BabelRuntimeHelpers.objectSpread2,n=e.n(r),o=(()=>(__wxConfig.onReady((()=>{o!==__wxConfig&&void 0!==o&&Object.assign(o,__wxConfig)})),__wxConfig))(),i=o,a=(()=>i.platform)(),s=(()=>"devtools"===a)(),c=(()=>"android"===a)(),u=(()=>"ios"===a)(),l=(()=>"mina"===a)();var f;var p={get invoke(){return f},set invoke(e){f=e}};function d(e,t,r,n={}){WeixinJSBridge.invoke(e,t,r,n)}function h(e,t){Foundation.onLoad((()=>{WeixinJSBridge.addEventListener(e,t)}))}function _(e,t,r){__subContextEngine__.postMessageToMainContext({event:e,params:{params:t,pageId:r}})}var m=new Foundation.EventEmitter;function v(e,t={},r={},n={}){var o={};Object.keys(t).forEach((e=>{"function"==typeof t[e]&&(o[e]=t[e],delete t[e])})),D(n)(e,t,(t=>{t.errMsg=t.errMsg||`${e}:ok`;var n=0===t.errMsg.indexOf(`${e}:ok`),i=0===t.errMsg.indexOf(`${e}:cancel`),a=0===t.errMsg.indexOf(`${e}:fail`);"function"==typeof r.beforeAll&&r.beforeAll(t),n?("function"==typeof r.beforeSuccess&&r.beforeSuccess(t),"function"==typeof o.success&&o.success(t),"function"==typeof r.afterSuccess&&r.afterSuccess(t)):i?("function"==typeof o.cancel&&o.cancel(t),"function"==typeof r.cancel&&r.cancel(t)):a&&("function"==typeof r.beforeFail&&r.beforeFail(t),"function"==typeof o.fail&&o.fail(t),"function"==typeof r.afterFail&&r.afterFail(t)),"function"==typeof o.complete&&o.complete(t),"function"==typeof r.afterAll&&r.afterAll(t)}))}__subContextEngine__.onMainContextMessage((e=>{m.emit(e.event,e.params)}));var y=(e,t={},r={})=>{v(e,t,r)},g=e=>(t,r,n)=>{v(t,r,n,e)};function b(e,t){h(e,t)}function w(e,t,r={},n=(()=>{}),o=!1,i=!1){return a=>{var s=r;"function"==typeof r&&(s=r(a));var u=Object.assign({},a,{isImportant:!0===i,data:Object.assign({},s,{api_name:t})});o&&(u.data.plugin_appid=a.pluginId,void 0!==a.withCredentials&&(u.data.with_credentials=a.withCredentials)),y("operateWXData",u,{beforeAll(t){t.errMsg=t.errMsg.replace("operateWXData",e)},beforeFail(e){},beforeSuccess(e){c&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.signature&&(e.signature=e.data.signature),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),n(e)}})}}p.invoke=y;var x,{EventEmitter:S}=Foundation,E=new S,T=function(e,t){__webviewEngine__.getRandomPageId((r=>{_(e,t,r)}))},C=e=>function(t,r){_(t,r,e)},A=e=>function(t,r){!function(e,t,r){__subContextEngine__.postMessageToMainContextSync({event:e,params:{params:t,pageId:r}})}(t,r,e)},O=function(e,t){m.on(e,(e=>{void 0!==e.pageId?t(e.params,e.pageId):__webviewEngine__.getAllPageIds((r=>{r.forEach((r=>{t(e.params,r)}))}))}))},M=[],R=(...e)=>{M.push(e)};function P(e,t,r,n,o={}){var i=t=>{"function"!=typeof x||"string"==typeof t.errMsg&&0!==t.errMsg.indexOf(`${e}:ok`)||x(e,r),"function"==typeof n&&n(t)};"string"==typeof r&&r.startsWith("wx")?__wxConfig.supportInvokeWithAppId?(o.appId=r,d(e,t,i,o)):R(r,e,t,(t=>{d(e,t,i,o)})):d(e,t,i,o)}var I=(e,t,r)=>{var n;if(void 0===t.__invoke_webviewId)return"function"!=typeof(null===(n=__webviewEngine__)||void 0===n?void 0:n.getRandomPageId)?(wxNativeConsole.info("__webviewEngine__.getRandomPageId not available, may be too early to call invoke, invoke with no webviewId"),void r(t)):void __webviewEngine__.getRandomPageId((n=>{t.__invoke_webviewId=n,wxNativeConsole.info(`no __invoke_webviewId found when invoking jsapi "${e}" from skyline render context, using ${n}`),r(t)}));r(t)},N=(e,t={},r,n={})=>{I(e,t,(t=>{P(e,t,"",r,n)}))},D=(e={})=>(t,r={},n,o)=>{void 0!==e.pageId?(r.__invoke_webviewId=e.pageId,P(t,r,e.pluginId,n,o)):I(t,r,(r=>{P(t,r,e.pluginId,n,o)}))};function L(){return Reporter}function F(e){return"string"!=typeof e?JSON.stringify(e||{}):e}var k=null,B=[],j=!1,U=!1,G=s||!!0,V=[];function W(){k=null,0!==B.length&&(WeixinJSBridge.invoke("reportKeyValue",{version:2,dataArray:B.map((e=>({key:26308,value:[e.category,e.name,Math.round(1e3*e.timeStamp),e.phase,encodeURIComponent(F(e.args))].join(",")})))}),B=[])}function z(e,t){s&&function(e,t){var r=n()(n()({},t),{},{phase:e});r.args=F(r.args),WeixinJSBridge.invoke("traceEvent",{events:[r]})}(e,t),j&&function(e,t){(U||"API"!==t.category)&&(k||(k=setTimeout(W,1e3)),B.push(n()(n()({},t),{},{phase:e})))}(e,t)}function H(){return G}i.onReady((e=>{var t,r,n=null===(t=e.expt)||void 0===t?void 0:t.clicfg_appbrand_report_trace_event;("1"===n?j=!0:"2"===n&&(j=!0,U=!0),G=G||U||!!function(){if(i&&"debug"in i&&void 0!==i.debug)return!!i.debug}())&&(null===(r=V)||void 0===r||r.forEach((e=>e())));V=null}));function X(){return Date.now()}var K={},$={};function q(e,t){K[e]||(K[e]=[]),K[e].push(t)}function Y(e,t){$[e]||($[e]=[]),$[e].push(t)}function Z(e){var t=[];function r(r,n,o){var i={category:r,name:n,timeStamp:X(),args:o||{}};t.push(i),"Framework"===r&&wxNativeConsole.info(`[Trace][B] ${n} @ ${i.timeStamp} ${i.args.path||""}`),(K[i.category]||[]).forEach((t=>t(i,e))),z("B",i)}function n(r){var n,o=X(),i=t.pop();if(!i)return wxNativeConsole.error("[Trace] Must call traceBeginEvent before traceEndEvent."),L().assertWithIDKey(!1,6),void L().errorReport({key:"appServiceSDKScriptError",error:new Error(`traceEndEvent mismatch, args=${JSON.stringify(r||{})}`)});var a=i.args,s=i.timeStamp;i.timeStamp=o,i.args=r||i.args,"Framework"===i.category&&wxNativeConsole.info(`[Trace][E] ${i.name} @ ${i.timeStamp} ${(null===(n=i.args)||void 0===n?void 0:n.path)||""}`),($[i.category]||[]).forEach((t=>t(i,s,a,e))),z("E",i)}function o(e,t){H()&&r("API",e,t)}function i(){H()&&n()}return{traceBeginEvent:r,traceEndEvent:n,traceBeginAPI:o,traceEndAPI:i,useTraced:function(e,t,o,i){return function(...a){try{return r(e,t,i),o.apply(this,a)}finally{n()}}},useTracedEnd:function(e){return function(...t){try{return e(...t)}finally{n()}}},traceFlag:function(e,t,o){r(e,t,o),n()},useTracedApi:function(e,t,r){return function(...n){try{return o(e,r),t.apply(this,n)}finally{i()}}},useTracedApiEnd:function(e){return function(...t){try{return e.apply(this,t)}finally{i()}}}}}var J=Z(Infinity),Q=null,ee=!1,te=!1,re="scheduleResize",ne=e=>{if(Q=e,!ee){ee=!0;var t=!1,r=()=>{t||(t=!0,ee=!1,"function"==typeof ie&&ie(Q),E.emit(re,Q))};setTimeout(r,16),requestAnimationFrame(r)}},oe=(e,t)=>{var r=!te;if(te=!0,!t&&e.pageOrientation){var n=e.pageOrientation.originalPageOrientation;if(r&&"landscape"===n&&e.size.windowWidth>e.size.windowHeight);else if(r&&"portrait"===(n||"portrait")&&e.size.windowWidth<e.size.windowHeight);else if("auto"!==n&&!e.pageOrientation.setPageOrientation)return}ne(e)};b("onViewDidResize",(e=>{oe(e,!1)})),b("onAppRouteResized",(e=>{oe(e,!0)}));var ie,ae="AppEnterForeground",se="AppEnterBackground";function ce(e){return"number"==typeof e?`${e}px`:e}function ue(e){return`${e}deg`}function le(e){var t=e.match(/(.+?):([-_a-z0-9]+)(?= |:|$)/i);return t?{method:t[1],state:t[2],detail:e.slice(t[0].length+1)}:{methods:"",state:"",detail:""}}O("onAppEnterForeground",(e=>{E.emit(ae,e)})),O("onAppEnterBackground",(e=>{E.emit(se,e)}));class fe extends Error{constructor(e){super(`Webview-SDK:${e}`),this.type="WebviewSdkKnownError"}}var pe="cookies",de=()=>{},he=0,_e=(e,t)=>{try{return JSON.parse(e)}catch(e){return t}},me=(e,t)=>{wxNativeConsole.error(e,(new Error).stack),Reporter.errorReport({key:"appSubContextSDKScriptError",error:new Error(e),extend:t})},ve=(e,t)=>{N("getGlobalStorage",e,t||de)},ye=(e,t)=>{N("setGlobalStorage",e,t||de)},ge=e=>{N("getGlobalStorageInfo",{},e||de)},be=(e,t)=>{N("removeGlobalStorage",e,t||de)},we={createOrGetStorageGroup(e,t,r,n){new xe(e+":"+t,r)._prepare(n||de)},_setMetadata(e,t){ye({key:":~",data:JSON.stringify(e)},(e=>{"ok"!==le(e.errMsg).state&&me("Failed set storage metadata",e.errMsg),t(null,this)}))},_logGlobalStorageInfo(){ge((e=>{}))},gabbageCollectCheck(e){ve({key:":~"},(t=>{var r={lastGabbageCollectionCheckUnixTimestamp:0},n=le(t.errMsg);return"ok"!==n.state?"data not found"!==n.detail&&me("Failed get storage metadata while gabbage collection",t.errMsg):r=_e(t.data,r),1e3*r.lastGabbageCollectionCheckUnixTimestamp+864e5>=Date.now()?e():(r.lastGabbageCollectionCheckUnixTimestamp=Math.floor(Date.now()/1e3),we._setMetadata(r,(()=>{we.gabbageCollect(e)})),null)}))},gabbageCollect(e){ge((t=>{if("ok"===le(t.errMsg).state){var r=!1;1024*t.currentSize>=16777216&&(me("Detected hard limit while gabbage collection","At size "+t.currentSize),r=!0);var n=Math.floor(Date.now()/1e3),o=t.keys||[],i=[],a={},s={};o.forEach((e=>{if(":~"!==e){var[t]=e.split("::",2);if(t===e){var r=t;":~"===r.slice(-2)?s[r]="{}":i.push(r)}else a[t]?a[t].push(e):a[t]=[e]}})),((e,t)=>{t=t||de;var r=Object.keys(e),n=0,o=()=>{if(n===r.length)return t();var i=r[n];return ve({key:i},(t=>{var r=le(t.errMsg);"ok"!==r.state?"data not found"!==r.detail&&me("Failed get storage item while gabbage collection",t.errMsg):e[i]=t.data,n++,o()})),null};o()})(s,(()=>{for(var t in s){var o=t.slice(0,-2),c=_e(s[t],{}).expireUnixTimestamp;if(r||!(c>n)){var u=a[o];i.push(t),u&&i.push(...u)}}for(var l in a){var f=l+":~";if(null===s[f]||void 0===s[f]){var p=a[l];p&&i.push(...p)}}((e,t)=>{t=t||de;var r=0,n=()=>r===e.length?t():(be({key:e[r]},(e=>{"ok"!==le(e.errMsg).state&&me("Failed remove storage item while gabbage collection",e.errMsg),r++,n()})),null);n()})(i,e)}))}else me("Failed listing storage keys while gabbage collection",t.errMsg)}))}};class xe{constructor(e,t){this._name=e,this._needUpdateExpireTime=!!t,this._expireUnixTimestamp=Math.ceil((t||Date.now()+12096e5)/1e3)}_prepare(e){ve({key:this._name+":~"},(t=>{var r=le(t.errMsg);return"ok"!==r.state?("data not found"!==r.detail&&me("Failed get storage group metadata",t.errMsg),this._setMetadata({expireUnixTimestamp:this._expireUnixTimestamp},e),null):_e(t.data,{expireUnixTimestamp:0}).expireUnixTimestamp<=Math.floor(Date.now()/1e3)?(we.gabbageCollect((()=>{this._setMetadata({expireUnixTimestamp:this._expireUnixTimestamp},e)})),null):this._needUpdateExpireTime?(this._setMetadata({expireUnixTimestamp:this._expireUnixTimestamp},e),null):e(null,this)}))}_setMetadata(e,t){ye({key:this._name+":~",data:JSON.stringify(e)},(()=>{t(null,this)}))}get(e,t){t=t||de,ve({key:this._name+"::"+e},(e=>{var r=le(e.errMsg);return"ok"!==r.state?"data not found"===r.detail?t(null,void 0):(me("Failed get storage group data",e.errMsg),t(e.errMsg)):t(null,_e(e.data,void 0))}))}set(e,t,r){r=r||de;var n=JSON.stringify(t),o=()=>{ye({key:this._name+"::"+e,data:String(n)},(e=>"ok"!==le(e.errMsg).state?(me("Failed set storage group data",e.errMsg),r(e.errMsg)):r(null)))};(he+=n.length)===n.length||he>65536?we.gabbageCollectCheck(o):o()}delete(e,t){t=t||de,be({key:this._name+"::"+e},(e=>"ok"!==le(e.errMsg).state?(me("Failed delete storage group data",e.errMsg),t(e.errMsg)):t(null)))}}var Se=(e,t)=>{wxNativeConsole.info(`[Plugin] PermissionBytes ${e}: `,t)},Ee=null,Te=e=>e.split("/",1)[0],Ce=(e,t)=>{Se("start fetch","webapi_getpluginpermission"),N("operateWXData",{data:{api_name:"webapi_getpluginpermission",data:{plugin_appid:e}},requestInQueue:!0},(e=>{if(Se("webapi_getpluginpermission res",e),e.data){var r="string"==typeof e.data?JSON.parse(e.data):e.data,n=JSON.parse(r.data||"{}"),o={};(n.plugin_list||[]).forEach((e=>{var t=e.plugin_appid,r=o[t]={};(e.permission_list||[]).forEach((e=>{r[e.jsapi_name]=e.state}))})),Se("fetch new res",o),t(null,o)}else t("fetch new error, no data")}))},Ae=null,Oe=0,Me=1,Re=(e,t)=>t("render view is not webview, cache not supported"),Pe=null,Ie=()=>{if(null!==Pe){var e=Pe;Pe=null,e.forEach((e=>{e()}))}},Ne=e=>{__wxConfig.supportInvokeWithAppId||Ee?e():Pe?Pe.push(e):(Pe=[e],__wxConfig.onReady((()=>{if(__wxConfig.supportInvokeWithAppId)Se("init","__wxConfig.supportInvokeWithAppId detected, will neither pull permission bytes by operateWXData nor storageGroup and use JsApi instead."),Ie();else{var e=()=>{var[e,t]=(()=>{var e,t,r,n=(null!==(e=null===(t=__wxConfig)||void 0===t||null===(r=t.appContactInfo)||void 0===r?void 0:r.call_plugin_info)&&void 0!==e?e:[]).map((e=>e.plugin_id));Se("pluginIds from __wxConfig",n);var o=__wxConfig.isFirstPage;return Se("isFirstPage",o=!0),[n,o]})();((e,t,r)=>{if(0===e.length)return Se("initBytes","no plugin found, ignore all fetching"),r({});if(t){var n=!1,o=(e,t,o)=>{if(e)return Se("init error",e);n||o===Me||void 0===t||(n=!0,Ee=t,r(t))};Ce(e,((e,t)=>{if(e)return Se("init: fetch new error",e);o(e,t,Ae),Ee=t})),Re(0,o)}else Re(0,((t,n,o)=>{if(t)return Se("init error",t);o!==Ae&&(Se("cache out of date, fetching new, type",o===Oe?"soft":"hard"),Ce(e,((e,t)=>{if(e)return Se("update error",e);Ee=t,o===Me&&r(t)}))),o!==Me&&void 0!==n&&(Ee=n,r(n))}))})(e.map(Te),!0===t,Ie)};e()}})))},De=0,Le={};O("responseGetPluginPermissionBytesByJsApi",(e=>{var t=Le[null==e?void 0:e.reqId];"function"==typeof t&&(delete Le[null==e?void 0:e.reqId],t(e.bytes))}));var Fe=(e,t,r)=>{Ne((()=>{if(e=Te(e),__wxConfig.supportInvokeWithAppId)T("getPluginPermissionBytesByJsApi",{pluginId:e,apiName:t,reqId:De}),Le[De++]=r;else{var n,o,i=null===(n=Ee)||void 0===n||null===(o=n[e])||void 0===o?void 0:o[t];null==i?i=[0,0,0]:"object"!=typeof i&&(i=[i,i,i]),r(i)}}))};__wxConfig.onReady((()=>{__wxConfig.supportInvokeWithAppId||Ne((()=>{__subContextEngine__.postMessageToMainContext({name:"batchGetPluginPermissionBytes",data:{pluginPermissionBytes:Ee}})}))})),R=(e,t,r,n)=>{Ne((()=>{var o,i;e=Te(e);var a=null===(o=Ee)||void 0===o||null===(i=o[e])||void 0===i?void 0:i[t];void 0!==a&&(r.permissionBytes=null===a?[0,0,0]:"object"!=typeof a?[a,a,a]:a),n(r)}))},M.forEach((e=>{R(...e)}));function ke(){}var Be=0,je=[],Ue=[],Ge=({type:e="wx",name:t,args:r={},ext:n={},pluginId:o=""})=>{je[Be]={success:r.success||ke,fail:r.fail||ke,complete:r.complete||ke},Ue[Be]={beforeAll:n.beforeAll||ke,beforeSuccess:n.beforeSuccess||ke,afterSuccess:n.afterSuccess||ke,beforeFail:n.beforeFail||ke,afterFail:n.afterFail||ke,afterAll:n.afterAll||ke},T("invokeAppServiceMethod",{name:t,type:e,args:r,callbackId:Be,pluginId:o}),Be+=1};O("callbackAppServiceMethod",(({res:e,isSuccess:t,callbackId:r})=>{var n=je[r],o=Ue[r];null==o||o.beforeAll(e),t?(null==o||o.beforeSuccess(e),n.success(e),null==o||o.afterSuccess(e)):(null==o||o.beforeFail(e),n.fail(e),null==o||o.afterFail(e)),n.complete(e),null==o||o.afterAll(e)}));var Ve=Object.create(null);O("invokeWebviewMethod",(({name:e,args:t,callbackId:r})=>{((e,t,r)=>{var n=Ve[e];"function"==typeof n?n(t,(e=>{r(e)})):wxNativeConsole.error(`No such viewMethod "${e}" found. Ignored.`)})(e,t,(e=>{T("callbackWebviewMethod",{res:e,callbackId:r})}))}));var We=(e,t,r=!1)=>{!r&&Ve[e]&&wxNativeConsole.warn(`viewMethod '${e}' is registered. If it meets expectations, please ignore this warning.`),Ve[e]=t},ze=7776e6,He=null,Xe=(e,t)=>{He?He.set("cookies",e.cookies,(e=>{t(e)})):we.createOrGetStorageGroup(pe,e.appId,Date.now()+ze,((r,n)=>{n?(He=n,Xe(e,t)):t(r)}))},Ke=(e,t)=>{He?He.get("cookies",((e,r)=>{t(r)})):we.createOrGetStorageGroup(pe,e.appId,Date.now()+ze,((r,n)=>{n?(He=n,Ke(e,t)):t()}))};We("setCookiesToGlobalStorage",((e,t)=>{Xe(e,t)})),We("getCookiesFromGlobalStorage",((e,t)=>{Ke(e,t)}));var $e=(e,t)=>{var r,o,i=n()(n()({},e),t);"string"==typeof i.path&&i.path.trim().length>0&&(r=(i.path||"").trim().replace(/(\?|$)/,".html$1")),o=e=>{var t=e.cookies;t?(i.privateExtraData=i.privateExtraData||{},i.privateExtraData.cookies=t):i.privateExtraData&&delete i.privateExtraData.cookies,Ge({name:"navigateToMiniProgram",type:"bridge",args:n()(n()({},i),{},{path:r}),ext:{beforeSuccess(){Ge({type:"custom",name:"reportRecycledAPI",args:{name:"navigateToMiniProgram",scene:1}})}}})},Ge({type:"custom",name:"getPassCookieString",args:{success:o}})},{EventEmitter:qe}=Foundation,Ye=new qe,Ze={};Object.prototype.hasOwnProperty;function Je(e){y("enterContact",e,{beforeSuccess(e){var t;e.path&&(e.path=`/${t=e.path,"string"==typeof t?-1!==t.indexOf("?")?t.replace(/\.html\?/,"?"):t.replace(/\.html$/,""):t}`)}})}var Qe=(e,t,r=!0)=>new Promise(((n,o)=>{Ge({name:"getRealRouteWithProtocol",type:"custom",args:{lastRoute:e,relativeRoute:t,needTrans:r,success:({route:e})=>{n(e)},fail:e=>{o(e)}}})}));function et(e={}){if(e.showMessageCard&&(e.sendMessagePath||e.sendMessageImg)){var t,r=Object.assign({},e);new Promise(((e,t)=>{Ge({name:"getCurrentRoute",type:"custom",args:{success:({currentRoute:t})=>{e(t)},fail:e=>{t(e)}}})})).then((r=>(t=r,e.sendMessagePath?Qe(t,e.sendMessagePath,!0):void 0))).then((n=>(r.sendMessagePath=n,e.sendMessageImg&&!/^(http|https|wxfile):\/\//.test(e.sendMessageImg)?Qe(t,e.sendMessageImg,!1):e.sendMessageImg))).then((e=>{r.sendMessageImg=e,Je(r)})).catch((t=>{"function"==typeof e.fail&&e.fail(t)}))}else e.privateEnterContact?y("privateEnterContact",e):Je(e)}We("appServiceEnterContact",((e,t)=>{e.complete=function(e){t&&t(e)},et(Object.assign({sessionFrom:"wxapp",businessId:"",sendMessageImg:"",sendMessageTitle:"",showMessageCard:!1,sendMessagePath:""},e))})),We("quicklyAddBrandContact",((e,t)=>{e.complete=function(e){e.errMsg&&(e.errMsg=e.errMsg.replace(/^private_/,"")),t&&t(e)},y("private_quicklyAddBrandContact",e)}));var tt=e=>{var t=["","","getPhoneNumber",window.__route__,e].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"SdkInnerApiInvoke",value:t})},rt=w("getUserPhoneCode","wxaapi_get_user_phone",(e=>({data:{encrypted_data:e.encryptedData}}))),nt=w("commercialPhoneNumber","webapi_consume_commercialphonenumber",(e=>({data:e}))),ot=(e={},t="")=>{var r=e.complete;delete e.complete;var o=n()({},e);o.data={api_name:"webapi_getuserwxphone",with_credentials:!0};var i=!1,a=setTimeout((()=>{tt(1),i=!0}),3e3);g({pluginId:t})("getPhoneNumber",Object.assign({},o,{complete(e){var t=e.public;t.code?r(e):t.encryptedData?rt({encryptedData:t.encryptedData,success(n){try{var o=JSON.parse(n.rawData);t.code=o.code}catch(e){}r(e)},fail(t){console.error(t),r(e)}}):(e.errno&&(t.errno=e.errno),r(e))}}),{beforeAll(e){e.errMsg.includes("appid no enough quota")&&(e.errMsg="no enough quota",e.errno=1400001);var t={};if(e.errMsg&&(clearTimeout(a),"string"==typeof e.errMsg&&(e.errMsg.includes("permission")||i||tt(1)),t.errMsg=e.errMsg,e.errno&&(t.errno=e.errno)),e.encryptedData&&(t.encryptedData=e.encryptedData),e.iv&&(t.iv=e.iv),e.cloud_id&&(t.cloudID=e.cloud_id),e.data){var r;try{r=JSON.parse(e.data)}catch(e){}r&&r.code?(tt(2),t.code=r.code,y("getSystemInfo",{success(t){nt({code:r.code,encrypted_data:e.encryptedData,iv:e.iv,device_brand:u?"ios":"android",device_model:t.model,os_version:t.system})}})):tt(3)}else tt(3);e.public=t}})};We("getPhoneNumber",((e,t)=>{ot({complete:t,permissionBytes:e.permissionBytes},e.pluginId)}));var it,at,st=void 0===__libVersionInfo__?{version:"9.9.9",updateTime:"unknown"}:__libVersionInfo__,ct=st;var ut;!function(e){e[e.AS_Config_Ready_Begin=0]="AS_Config_Ready_Begin",e[e.AS_Config_Ready_End=1]="AS_Config_Ready_End",e[e.App_onLaunch=2]="App_onLaunch",e[e.App_onShow=3]="App_onShow",e[e.Evaluate_Script_Begin=4]="Evaluate_Script_Begin",e[e.Evaluate_Script_End=5]="Evaluate_Script_End",e[e.SubPackage_Ready=6]="SubPackage_Ready",e[e.AppRoute_Begin=7]="AppRoute_Begin",e[e.AppRoute_End=8]="AppRoute_End",e[e.AppRoute_Callback_Begin=9]="AppRoute_Callback_Begin",e[e.AppRoute_Callback_End=10]="AppRoute_Callback_End",e[e.AppRoute_AppServiceEngine=11]="AppRoute_AppServiceEngine",e[e.Open_New_Page=12]="Open_New_Page",e[e.Publish_Init_Data=13]="Publish_Init_Data",e[e.Send_Init_Data=14]="Send_Init_Data",e[e.Recv_Init_Ready=15]="Recv_Init_Ready",e[e.AppRoute_Done_Begin=16]="AppRoute_Done_Begin",e[e.AppRoute_Done_End=17]="AppRoute_Done_End",e[e.TriggerAppRoute=18]="TriggerAppRoute",e[e.Evaluate_WAWebview_Begin=19]="Evaluate_WAWebview_Begin",e[e.Evaluate_WAWebview_End=20]="Evaluate_WAWebview_End",e[e.WV_Config_Ready_Begin=21]="WV_Config_Ready_Begin",e[e.WV_Config_Ready_End=22]="WV_Config_Ready_End",e[e.Evaluate_PageFrame_Begin=23]="Evaluate_PageFrame_Begin",e[e.Evaluate_PageFrame_End=24]="Evaluate_PageFrame_End",e[e.Evaluate_Subpackage_PageFrame_Begin=25]="Evaluate_Subpackage_PageFrame_Begin",e[e.Evaluate_Subpackage_PageFrame_End=26]="Evaluate_Subpackage_PageFrame_End",e[e.Set_CSS_Begin=27]="Set_CSS_Begin",e[e.Set_CSS_End=28]="Set_CSS_End",e[e.Generate_Func_Ready=29]="Generate_Func_Ready",e[e.Recv_Init_Data=30]="Recv_Init_Data",e[e.Init_Render_Begin=31]="Init_Render_Begin",e[e.Init_Render_End=32]="Init_Render_End",e[e.VD_Init_Render_Begin=33]="VD_Init_Render_Begin",e[e.VD_Init_Render_End=34]="VD_Init_Render_End",e[e.Send_Init_Ready=35]="Send_Init_Ready",e[e.Init_Ready_Rendering_Cache=36]="Init_Ready_Rendering_Cache",e[e.Init_Ready_Prerender=37]="Init_Ready_Prerender",e[e.Init_Ready_After_Rendering_Cache=38]="Init_Ready_After_Rendering_Cache",e[e.Init_Ready_Client=39]="Init_Ready_Client",e[e.Real_Init_Ready=40]="Real_Init_Ready",e[e.First_User_Interaction=41]="First_User_Interaction",e[e.FP=42]="FP",e[e.FCP=43]="FCP",e[e.LCP=44]="LCP"}(ut||(ut={}));var lt=[],ft={};function pt(e){return 0===e?"N/A":Math.round(e-(i.coldLaunchTime||0))}var dt=(null===(it=Foundation)||void 0===it||null===(at=it.env)||void 0===at?void 0:at.typeStr)||"UNKNOWN";function ht(e,t,r={}){r.noRecord||lt.push([e,t]),ft[e]=t,r.noLog||wxNativeConsole.info(`[CheckPoint][${dt}][${pt(t)}] ${ut[e]} @ ${t}`)}new Set;var _t=(e,t,r,n)=>{wxNativeConsole.info(`[Webview] speedReport ${e} (start=${t}, end=${r})`),Reporter.speedReport({key:e,timeMark:{startTime:t},endTime:r,force:"reRenderTime"!==e,data:n})};function mt(e,t=200){"function"==typeof window.requestIdleCallback?window.requestIdleCallback((()=>{e()}),{timeout:t}):setTimeout((()=>{requestAnimationFrame((()=>{e()}))}),0)}class vt{constructor(e){this.id=e,this.timeline={},this.timelineData=[]}set(e,t){return this.timeline[e]=t,this.timelineData.push([e,t]),ht(e,t,{noRecord:!0}),this}g(e){return this.timeline[e]||0}get(e){return this.g(e)}pull(){var e=function(){var e=lt;return lt=[],e}().concat(this.timelineData);return this.timelineData=[],e}}var yt={};function gt(e){return e in yt||(yt[e]=new vt(e)),yt[e]}function bt(e){if(!window.__isPageReload__&&"__route__"in window){var t={delayedGWx:window.__usingDelayedGwx__||0,data:e.pull(),backend:"skyline"};C(e.id)("updatePerfTimeline",t)}}i.onReady((e=>{ht(ut.WV_Config_Ready_Begin,e.onReadyStart||0),setTimeout((()=>{ht(ut.WV_Config_Ready_End,e.onReadyEnd||0)}),0)})),q("Framework",((e,t)=>{if(!window.__isPageReload__){e.timeStamp=Math.round(e.timeStamp);var r=gt(t);switch(e.name){case"initRender":r.set(ut.Init_Render_Begin,e.timeStamp),_t("firstGetData",r.g(ut.Generate_Func_Ready),e.timeStamp);break;case"VD.startInitRender":r.set(ut.VD_Init_Render_Begin,e.timeStamp);break;case"generateFuncReady":r.set(ut.Generate_Func_Ready,e.timeStamp);break;case"onAppDataChange":r.set(ut.Recv_Init_Data,e.timeStamp);break;case"initialRenderingCacheApplied":r.set(ut.Init_Ready_Rendering_Cache,e.timeStamp),r.set(ut.Init_Ready_Client,e.timeStamp);break;case"sendReadyEvent":r.set(ut.Send_Init_Ready,e.timeStamp);break;case"initReady":wxNativeConsole.info(`[initReady] ${JSON.stringify(e.args||{})}`);var n=e.args.initRenderingCache?ut.Init_Ready_After_Rendering_Cache:ut.Init_Ready_Client;r.set(n,e.timeStamp)}}})),Y("Framework",((e,t,r,n)=>{if(!window.__isPageReload__){e.timeStamp=Math.round(e.timeStamp);var o=gt(n);switch(e.name){case"initRender":o.set(ut.Init_Render_End,e.timeStamp),mt((()=>{_t("firstRenderTime",t,e.timeStamp),function(e){window.__isFirstPage__&&Reporter.reportQualityData("InitRenderDone",i.coldLaunchTime,e.g(ut.Init_Render_End),[i.SDKVersion,encodeURIComponent(window.__route__),e.g(ut.Init_Ready_Rendering_Cache)])}(o)}));break;case"VD.startInitRender":o.set(ut.VD_Init_Render_End,e.timeStamp)}}}));var wt=BabelRuntimeHelpers.asyncToGenerator,xt=e.n(wt),St=new Set;function Et(e,t){if(!St.has(e)){St.add(e);var r=gt(e);r.set(ut.Real_Init_Ready,t),mt((()=>{bt(r),function(e){var t=e.g(ut.Init_Ready_Rendering_Cache);t&&Reporter.reportQualityData("RenderCache",t,Date.now(),[0])}(r)}))}}q("Framework",((e,t)=>{if(e.timeStamp=Math.round(e.timeStamp),"initReady"===e.name)Et(t,e.timeStamp)})),Y("Framework",((e,t,r,n)=>{e.timeStamp=Math.round(e.timeStamp);var o=gt(n);if("initReady"===e.name){var a=window.__route__,s=window.__lastRoute__,c=window.__isFirstPage__;setTimeout((()=>{((e,{route:t,lastRoute:r,isFirstPage:n})=>{var o=e.id;e.g(ut.FCP)?(wxNativeConsole.info(`[reportSkylineVitals] pageId=${o}, rasterFinish=${e.g(ut.FCP)}`),Reporter.reportQualityData2("WeAppCoreWebVitals",[5,e.g(ut.Init_Render_Begin),e.g(ut.Init_Render_End),e.g(ut.FP),e.g(ut.FCP),e.g(ut.LCP),i.SDKVersion,encodeURIComponent(t||""),encodeURIComponent(r||""),0,n?1:0])):wxNativeConsole.info(`[reportSkylineVitals] pageId=${o} has no data, skipped`)})(o,{route:a,lastRoute:s,isFirstPage:c})}),5e3)}})),Foundation.onLoad(xt()((function*(){"undefined"!=typeof __skylineEngine__&&(yield __skylineEngine__.RuntimeCore.registerPerformanceCallback(((e,t,r,n,o)=>{wxNativeConsole.info(`[SkylinePerformance] pageId=${e}, buildDuration=${t}, rasterDuration=${r}, rasterFinish=${n}, totalSpan=${o}`);var i=gt(e);i.set(ut.FCP,n),i.set(ut.LCP,n),i.set(ut.FP,n),bt(i)})))})));var Tt=!1,Ct=[];O("syncHighlightBottomBanner",(({highlighted:e})=>{Tt=e,Ct.forEach((t=>t({highlighted:e})))}));var{EventEmitter:At}=Foundation,Ot=new At,Mt={};i.onReady((e=>{if("undefined"!=typeof __skylineEngine__){var t,r={defaultBlockLayout:(null===(t=e.rendererOptions)||void 0===t?void 0:t.defaultDisplayBlock)||!1};__skylineEngine__.RuntimeCore.setFeatureFlags(r)}}));var Rt=n()(n()({invoke:N,invokeAs:D,on:h,publish:T,publishAsPage:C,publishAsPageSync:A,subscribe:O,subscribeAsPage:e=>function(t,r){!function(e,t,r){m.on(e,(e=>{e.pageId===t&&r(e.params,t)}))}(t,e,r)},getHost:()=>i.host||{},mainContext:{publish(...e){Foundation.onLoad((()=>{JSContext.publish(...e)}))},subscribe(...e){Foundation.onLoad((()=>{JSContext.subscribe(...e)}))}},onAppDataChange:e=>{We("appDataChange",((t,r)=>{e(t,r)}))},saveInitialRenderingCache:()=>{},version:ct,transformRpx:e=>e},J),{},{createTracer:Z,onWindowResize:e=>{E.on(re,e)},onAppEnterForeground:function(e){E.on(ae,e)},onAppEnterBackground:function(e){E.on(se,e)},offAppEnterForeground:function(e){E.off(ae,e)},offAppEnterBackground:function(e){E.off(se,e)},getPluginPermissionBytes:Fe,getPluginPermissionBytesSync:(e,t)=>{var r,n,o;if(e=Te(e),__wxConfig.supportInvokeWithAppId)return Fe(e,t,(e=>{r=e})),r;if(!Ee)throw new Error("Plugin permission bytes have not been prepared");var i=null===(n=Ee)||void 0===n||null===(o=n[e])||void 0===o?void 0:o[t];return null==i?i=[0,0,0]:"object"!=typeof i&&(i=[i,i,i]),i},getPluginInfo:(e,t)=>{Ge({type:"custom",name:"getPluginInfo",args:{pluginId:e,success:t}})},getPluginContactList:e=>{Ge({type:"custom",name:"getPluginContactList",args:{success:e}})},getCloudFileUrl:function(e={}){var t=e.data;!function(e){Ge({name:"getCloudFileInfo",type:"",args:{fileIds:e.fileIds,type:e.type,requestInQueue:!1,success:t=>{"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)},fail:t=>{"function"==typeof e.fail&&e.fail(t),"function"==typeof e.complete&&e.complete(t)}}})}({fileIds:t.fileid_list,type:t.type,success:e.success,fail:e.fail,complete:e.complete})},getVolume:function(e){var t=e;"function"==typeof e&&(t={complete:e}),y("getVolume",t,{beforeAll:e=>{e.current=e.currentVolume||0,e.maximum=e.maxVolume||0}})},setVolume:function(e){var t=e;"number"==typeof e&&(t={value:e}),y("setVolume",t)},getBrightness:function(e){var t=e;"function"==typeof e&&(t={complete:e}),y("getScreenBrightness",t,{beforeAll:e=>{e.value="number"==typeof e.value?e.value:-1}})},setBrightness:function(e){var t=e;"number"==typeof e&&(t={value:e}),y("setScreenBrightness",t)},getSystemInfo:e=>{Ge({name:"getSystemInfo",args:e})},getPlatform:()=>a,generateFormId:()=>{return(e=Date.now(),"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:3&r|8).toString(16)}))).replace(/-/g,"");var e},reportFormId:({source:e,sourceDetail:t,formId:r,hostAppId:n,pluginAppId:o,timeout:i,success:a,fail:s})=>{var c=null;i>0?c=setTimeout((()=>{c&&(c=null,s&&s({errMsg:"requestFormId:fail timeout"}))}),i):a&&a(),wx.operateWXData("webapi_report_tmplmsg_formid",{source:e,sourceDetail:t,uuid:r,hostAppId:n||void 0,pluginAppId:o||void 0,pagePath:window.__DOMTree__.is||"",success:e=>{c&&(clearTimeout(c),c=null,0===e.errcode?a&&a():s&&s({errMsg:"requestFormId:fail "+e.errtype}))},fail:e=>{c&&(clearTimeout(c),c=null,s&&s({errMsg:"requestFormId:fail "+e.errtype}))}},"requestFormId")},publishPageEvent:(e,t,r,n)=>{C(n)("PAGE_EVENT",{eventName:e,data:t,nodeId:r})},getRealRoute:function e(t="",r=""){var n;if(0===r.indexOf("/"))n=r.substr(1);else if(0===r.indexOf("./"))n=e(t,r.substr(2));else{var o,i,a=r.split("/");for(o=0,i=a.length;o<i&&".."===a[o];o++);a.splice(0,o),r=a.join("/");var s=t.length>0?t.split("/"):[];s.splice(s.length-o-1,o+1),n=s.concat(a).join("/")}return l&&(n=window.__RUNTIME_GLOBAL.wxGetRealRoute(n)),n},animationToStyle:function({animates:e,option:t={}}){var{transformOrigin:r,transition:n}=t;if(void 0===n||void 0===e)return{transformOrigin:"",transform:"",transition:""};var o=e.filter((({type:e})=>"style"!==e)).map((({type:e,args:t})=>{switch(e){case"matrix":return`matrix(${t.join(",")})`;case"matrix3d":return`matrix3d(${t.join(",")})`;case"rotate":return`rotate(${(t=t.map(ue))[0]})`;case"rotate3d":return t[3]=ue(t[3]),`rotate3d(${t.join(",")})`;case"rotateX":return`rotateX(${(t=t.map(ue))[0]})`;case"rotateY":return`rotateY(${(t=t.map(ue))[0]})`;case"rotateZ":return`rotateZ(${(t=t.map(ue))[0]})`;case"scale":return`scale(${t.join(",")})`;case"scale3d":return`scale3d(${t.join(",")})`;case"scaleX":return`scaleX(${t[0]})`;case"scaleY":return`scaleY(${t[0]})`;case"scaleZ":return`scaleZ(${t[0]})`;case"translate":return`translate(${(t=t.map(ce)).join(",")})`;case"translate3d":return`translate3d(${(t=t.map(ce)).join(",")})`;case"translateX":return`translateX(${(t=t.map(ce))[0]})`;case"translateY":return`translateY(${(t=t.map(ce))[0]})`;case"translateZ":return`translateZ(${(t=t.map(ce))[0]})`;case"skew":return`skew(${(t=t.map(ue)).join(",")})`;case"skewX":return`skewX(${(t=t.map(ue))[0]})`;case"skewY":return`skewY(${(t=t.map(ue))[0]})`;default:return""}})).join(" "),i=e.filter((({type:e})=>"style"===e)).reduce(((e,t)=>(e[t.args[0]]=t.args[1],e)),{});return{style:i,transformOrigin:r,transform:o,transitionProperty:["transform",...Object.keys(i)].join(","),transition:`${n.duration}ms ${n.timingFunction} ${n.delay}ms`}},navigateToMiniProgram:(e={})=>{e.__noCheckBeforeNavigateToMiniProgram?$e(e):Ge({name:"_checkBeforeNavigateToMiniProgram",type:"custom",args:{appId:e.appId,path:e.path,shortLink:e.shortLink,success(t){$e(e,{appId:t.appId,path:t.path,sourcetype:t.sourcetype})},fail(t){"function"==typeof e.fail&&e.fail(t),"function"==typeof e.complete&&e.complete(t)}}})},operateWXData(e,t,r="",n=""){var o={};Object.keys(t).forEach((e=>{"api_name"!==e&&"pluginId"!==e&&"function"!=typeof t[e]&&(o[e]=t[e])})),w(r||e,e,{data:o},(e=>{var t=JSON.parse(e.data.data||"{}");delete e.data,n?e[n]=t:e=Object.assign(e,t)}),!0)({pluginId:t.pluginId,withCredentials:t.withCredentials,success:t.success,fail:t.fail,complete:t.complete})},enterContact:et,getPhoneNumber:ot,openSetting:e=>{Ge({type:"bridge",name:"openSetting",args:e,ext:{beforeSuccess(){Ge({type:"custom",name:"reportRecycledAPI",args:{name:"openSetting",scene:1}})}}})},triggerPageReRender(){Ot.emit("pageReRender",{})},onPageReRender(e){Ot.on("pageReRender",e)},offPageReRender(e){Ot.off("pageReRender",e)},highlightBottomBanner:e=>{T("highlightBottomBanner",{navigateInfo:e.navigateInfo}),Tt=!0},cancelHighlightBottomBanner:()=>{Tt&&(T("cancelHighlightBottomBanner"),Tt=!1)},onSyncHighlightBottomBanner:e=>{Ct.push(e)}}),Pt={};["initReady","initReadyAfterRenderingCache"].forEach((e=>{Rt[e]=(t,r)=>{!0!==Pt[r]?(Pt[r]=!0,g({pageId:r})(e,t)):wxNativeConsole.info(`[initReady] pageId=${r} already called, ignoring wx.${e}`)}}));["showDatePickerView","insertMap","removeMap","updateMapCovers","insertVideoPlayer","removeVideoPlayer","insertShareButton","updateShareButton","removeShareButton","setNavigationBarTitle","setNavigationBarColor","showNavigationBarLoading","hideNavigationBarLoading","setBackgroundTextStyle","setBackgroundColor","updatePerfData","traceEvent","webViewReadyToTerminate","saveInitialRenderingCache","navigateBackMiniProgram","setNavigationBarRightButton"].forEach((e=>{Rt[e]=(t,r)=>{g({pageId:r})(e,t)}}));var It={wx:["login","getSetting","clearStorage","getSystemInfo","startCustomFacialRecognitionVerify","startCustomFacialRecognitionVerifyAndUploadVideo","saveImageToPhotosAlbum","setWxInterfaceDisabled"],bridge:["getPermissionBytes","authorize","launchApplication","navigateBackApplication","navigateBackNative","operateVideoPlayer","operateLivePlayer","getLocation","downloadAppInternal","getInstallState","addDownloadTaskStraight","queryDownloadTask","installDownloadTask","pauseDownloadTask","resumeDownloadTask","cancelDownloadTask","writeCommData","getNetworkType","batchGetContact","showToast","hideToast","exitMiniProgram","openADCanvas","showActionSheet","preloadMiniProgramEnv","hideHomeButton","predownloadMiniProgramPackage","setTabBarStyle","batchPreloadMiniProgram","showModal"],custom:["checkPermission","redirectTo","navigateTo","navigateToWithRelatedInfo","switchTab","reLaunch","navigateBack","shareImageMessage","setPrivateExtraData","chooseInvoice","chooseInvoiceTitle","getCurrentWebviewId"]};function Nt(e){s?Mt[e]=Rt[e]:Object.defineProperty(Mt,e,{get:()=>"function"!=typeof Rt[e]?Rt[e]:(...t)=>{try{return Rt[e](...t)}catch(e){return void function(e,t){"[object Error]"===Object.prototype.toString.apply(e)?Foundation.onLoad((()=>{Reporter.errorReport({key:"appSubContextThirdScriptError",error:e,extend:t})})):Reporter.errorReport({key:"appSubContextThirdScriptError",error:e,extend:t})}(e)}},enumerable:!0,configurable:!0})}Object.keys(It).forEach((e=>{It[e].forEach((t=>{Rt[t]=r=>{Ge({type:e,name:t,args:r})}}))})),Object.keys(Rt).forEach((e=>{Nt(e)}));var Dt=(e=>t=>(r,n)=>{Ze[r]||(e(r,((e,t)=>{Ye.emit(r,{res:e,pageId:t})})),Ze[r]=!0),Ye.on(r,(({res:e,pageId:r})=>{!0===t(e,r)&&n(e,r)}))})(O),Lt={wx:Mt,createVDTunnel:e=>((e,t)=>({vdSync(t,r){e("vdSync",t,r)},vdSyncBatch(t,r){e("vdSyncBatch",t,r)},onVdSync(e){t("vdSync",e)},onVdSyncBatch(e){t("vdSyncBatch",e)}}))(A(e),Dt(((t,r)=>r===e))),traceBeginEvent:J.traceBeginEvent,traceEndEvent:J.traceEndEvent,predefinedColor:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"#00000000"}},Ft=Lt;__skylineSDK__=t.default})();var wx=__skylineSDK__.wx,xrFrame,__virtualDOM__,__webviewEngine__;!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Kanata={})}(this,(function(e){"use strict";e.Puppet="undefined"!=typeof NativeGlobal?NativeGlobal.Puppet:void 0,e.CREATE_INSTANCE=(t,r,n,o,i,a)=>{var s=globalThis.KANATA_INSTANCES=globalThis.KANATA_INSTANCES||new Map;if(s.get(t))return s.get(t);var c,u,l={exports:{}},f=l.exports;return c=this,u=function(a){var s,c,u,l,f,p,d,h,_,m,v,y,g,b,w,x,S,E,T,C,A,O,M,R,P,I,N,D,L;a.EVertexFormat=void 0,(s=a.EVertexFormat||(a.EVertexFormat={}))[s.FLOAT=0]="FLOAT",s[s.FLOAT2=1]="FLOAT2",s[s.FLOAT3=2]="FLOAT3",s[s.FLOAT4=3]="FLOAT4",s[s.BYTE4=4]="BYTE4",s[s.BYTE4N=5]="BYTE4N",s[s.UBYTE4=6]="UBYTE4",s[s.UBYTE4N=7]="UBYTE4N",s[s.SHORT2=8]="SHORT2",s[s.SHORT2N=9]="SHORT2N",s[s.SHORT4=10]="SHORT4",s[s.SHORT4N=11]="SHORT4N",s[s.UINT10_N2=12]="UINT10_N2",a.EVertexStep=void 0,(c=a.EVertexStep||(a.EVertexStep={}))[c.PER_VERTEX=0]="PER_VERTEX",c[c.PER_INSTANCE=1]="PER_INSTANCE",a.EIndexType=void 0,(u=a.EIndexType||(a.EIndexType={}))[u.NONE=1]="NONE",u[u.UINT16=2]="UINT16",u[u.UINT32=3]="UINT32",a.ETextureType=void 0,(l=a.ETextureType||(a.ETextureType={}))[l.D2=0]="D2",l[l.Cube=1]="Cube",l[l.D2Array=2]="D2Array",l[l.D3=3]="D3",a.ETextureFormat=void 0,(f=a.ETextureFormat||(a.ETextureFormat={}))[f.RGBA8=0]="RGBA8",f[f.SRGBA8=1]="SRGBA8",f[f.RGB10A2=2]="RGB10A2",f[f.RG8=3]="RG8",f[f.R8=4]="R8",f[f.RGBA32F=5]="RGBA32F",f[f.RGBA16F=6]="RGBA16F",f[f.RG11B10F=7]="RG11B10F",f[f.Depth_Low=20]="Depth_Low",f[f.Depth_High=21]="Depth_High",f[f.Depth_Stencil=22]="Depth_Stencil",f[f.RGBA4=23]="RGBA4",f[f.RGB565=24]="RGB565",f[f.RGB5A1=25]="RGB5A1",f[f.ETC1RGB8=100]="ETC1RGB8",f[f.ETC2RGB8=110]="ETC2RGB8",f[f.ETC2RGBA8=111]="ETC2RGBA8",f[f.PVRTC2RGBV1=120]="PVRTC2RGBV1",f[f.PVRTC4RGBV1=121]="PVRTC4RGBV1",f[f.PVRTC2RGBAV1=122]="PVRTC2RGBAV1",f[f.PVRTC4RGBAV1=123]="PVRTC4RGBAV1",f[f.ASTC4x4=140]="ASTC4x4",f[f.ASTC5x5=141]="ASTC5x5",f[f.ASTC6x6=142]="ASTC6x6",f[f.ASTC8x6=143]="ASTC8x6",f[f.ASTC8x8=144]="ASTC8x8",f[f.DXT1=150]="DXT1",f[f.DXT3=151]="DXT3",f[f.DXT5=152]="DXT5",a.EWrapMode=void 0,(p=a.EWrapMode||(a.EWrapMode={}))[p.REPEAT=1]="REPEAT",p[p.CLAMP_TO_EDGE=2]="CLAMP_TO_EDGE",p[p.MIRRORED_REPEAT=3]="MIRRORED_REPEAT",a.EFilterMode=void 0,(d=a.EFilterMode||(a.EFilterMode={}))[d.NEAREST=1]="NEAREST",d[d.LINEAR=2]="LINEAR",d[d.NEAREST_MIPMAP_NEAREST=3]="NEAREST_MIPMAP_NEAREST",d[d.NEAREST_MIPMAP_LINEAR=4]="NEAREST_MIPMAP_LINEAR",d[d.LINEAR_MIPMAP_NEAREST=5]="LINEAR_MIPMAP_NEAREST",d[d.LINEAR_MIPMAP_LINEAR=6]="LINEAR_MIPMAP_LINEAR",a.EUniformType=void 0,(h=a.EUniformType||(a.EUniformType={}))[h.FLOAT=0]="FLOAT",h[h.FLOAT2=1]="FLOAT2",h[h.FLOAT3=2]="FLOAT3",h[h.FLOAT4=3]="FLOAT4",h[h.MAT2=4]="MAT2",h[h.MAT3=5]="MAT3",h[h.MAT4=6]="MAT4",h[h.SAMPLER=7]="SAMPLER",a.ECullMode=void 0,(_=a.ECullMode||(a.ECullMode={}))[_.NONE=0]="NONE",_[_.FRONT=1]="FRONT",_[_.BACK=2]="BACK",a.EFaceWinding=void 0,(m=a.EFaceWinding||(a.EFaceWinding={}))[m.CCW=1]="CCW",m[m.CW=2]="CW",a.ECompareFunc=void 0,(v=a.ECompareFunc||(a.ECompareFunc={}))[v.LESS=1]="LESS",v[v.LEQUAL=2]="LEQUAL",v[v.EQUAL=3]="EQUAL",v[v.GEQUAL=4]="GEQUAL",v[v.GREATER=5]="GREATER",v[v.NOTEQUAL=6]="NOTEQUAL",v[v.NEVER=7]="NEVER",v[v.ALWAYS=8]="ALWAYS",a.EStencilOp=void 0,(y=a.EStencilOp||(a.EStencilOp={}))[y.ZERO=0]="ZERO",y[y.KEEP=1]="KEEP",y[y.REPLACE=2]="REPLACE",y[y.INCR_WRAP=3]="INCR_WRAP",y[y.INCR=4]="INCR",y[y.DECR_WRAP=5]="DECR_WRAP",y[y.DECR=6]="DECR",y[y.INVERT=7]="INVERT",a.EBlendFactor=void 0,(g=a.EBlendFactor||(a.EBlendFactor={}))[g.ZERO=0]="ZERO",g[g.ONE=1]="ONE",g[g.SRC_COLOR=2]="SRC_COLOR",g[g.ONE_MINUS_SRC_COLOR=3]="ONE_MINUS_SRC_COLOR",g[g.SRC_ALPHA=4]="SRC_ALPHA",g[g.ONE_MINUS_SRC_ALPHA=5]="ONE_MINUS_SRC_ALPHA",g[g.DST_ALPHA=6]="DST_ALPHA",g[g.ONE_MINUS_DST_ALPHA=7]="ONE_MINUS_DST_ALPHA",g[g.DST_COLOR=8]="DST_COLOR",g[g.ONE_MINUS_DST_COLOR=9]="ONE_MINUS_DST_COLOR",g[g.SRC_ALPHA_SATURATE=10]="SRC_ALPHA_SATURATE",g[g.CONSTANT_COLOR=11]="CONSTANT_COLOR",g[g.ONE_MINUS_CONSTANT_COLOR=12]="ONE_MINUS_CONSTANT_COLOR",a.EBlendEquation=void 0,(b=a.EBlendEquation||(a.EBlendEquation={}))[b.FUNC_ADD=0]="FUNC_ADD",b[b.FUNC_SUBTRACT=1]="FUNC_SUBTRACT",b[b.FUNC_REVERSE_SUBTRACT=2]="FUNC_REVERSE_SUBTRACT",b[b.MIN=3]="MIN",b[b.MAX=4]="MAX",a.EColorMask=void 0,(w=a.EColorMask||(a.EColorMask={}))[w.NONE=16]="NONE",w[w.R=1]="R",w[w.G=2]="G",w[w.B=4]="B",w[w.A=8]="A",w[w.RGB=7]="RGB",w[w.RGBA=15]="RGBA",a.EPixelType=void 0,(x=a.EPixelType||(a.EPixelType={}))[x.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",x[x.FLOAT=5126]="FLOAT",x[x.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",x[x.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",x[x.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a.ELoadAction=void 0,(S=a.ELoadAction||(a.ELoadAction={}))[S.CLEAR=0]="CLEAR",S[S.LOAD=1]="LOAD",S[S.DONTCARE=2]="DONTCARE",a.EDataModelType=void 0,(E=a.EDataModelType||(a.EDataModelType={}))[E.AnimationClip=1]="AnimationClip",E[E.SkeletonBoneInverse=2]="SkeletonBoneInverse",a.EMeshRenderType=void 0,(T=a.EMeshRenderType||(a.EMeshRenderType={}))[T.UnKnown=0]="UnKnown",T[T.Static3D=1]="Static3D",T[T.Skinned3D=2]="Skinned3D",T[T.UI=3]="UI",a.EPrimitiveType=void 0,(C=a.EPrimitiveType||(a.EPrimitiveType={}))[C.TRIANGLES=0]="TRIANGLES",C[C.TRIANGLE_STRIP=1]="TRIANGLE_STRIP",C[C.LINES=2]="LINES",C[C.LINE_STRIP=3]="LINE_STRIP",C[C.POINTS=4]="POINTS",C[C.ZERO=5]="ZERO",a.EShadowMode=void 0,(A=a.EShadowMode||(a.EShadowMode={}))[A.None=0]="None",A[A.OneCascade_PCF=1]="OneCascade_PCF",A[A.TwoCascade_PCF=2]="TwoCascade_PCF",A[A.FourCascade_PCF=4]="FourCascade_PCF",A[A.PCSS=5]="PCSS",a.EShadowFitMode=void 0,(O=a.EShadowFitMode||(a.EShadowFitMode={}))[O.FitFrustum=0]="FitFrustum",O[O.FitObjects=1]="FitObjects",a.EVertexLayoutUsage=void 0,(M=a.EVertexLayoutUsage||(a.EVertexLayoutUsage={}))[M.CUSTOM=0]="CUSTOM",M[M.POSITION=1]="POSITION",M[M.NORMAL=2]="NORMAL",M[M.TANGENT=3]="TANGENT",M[M.UV0=4]="UV0",M[M.UV1=5]="UV1",M[M.UV2=6]="UV2",M[M.UV3=7]="UV3",M[M.COLOR=8]="COLOR",M[M.BONEINDEX=9]="BONEINDEX",M[M.BONEWEIGHT=10]="BONEWEIGHT",a.EVertexBatchOperator=void 0,(R=a.EVertexBatchOperator||(a.EVertexBatchOperator={}))[R.MatrixMultiple=0]="MatrixMultiple",R[R.UVST=1]="UVST",a.EAnimationBlendType=void 0,(P=a.EAnimationBlendType||(a.EAnimationBlendType={}))[P.Override=0]="Override",P[P.Additive=1]="Additive",a.EUseDefaultAddedAction=void 0,(I=a.EUseDefaultAddedAction||(a.EUseDefaultAddedAction={}))[I.Ignore=0]="Ignore",I[I.Refresh=1]="Refresh",a.EUseDefaultRetainedAction=void 0,(N=a.EUseDefaultRetainedAction||(a.EUseDefaultRetainedAction={}))[N.Keep=0]="Keep",N[N.Refresh=1]="Refresh",N[N.WriteBack=2]="WriteBack",a.EUseDefaultRemovedAction=void 0,(D=a.EUseDefaultRemovedAction||(a.EUseDefaultRemovedAction={}))[D.Keep=0]="Keep",D[D.Clear=1]="Clear",D[D.WriteBack=2]="WriteBack",a.ESkinnedSkeletonFlag=void 0,(L=a.ESkinnedSkeletonFlag||(a.ESkinnedSkeletonFlag={}))[L.Use3x4Matrix=1]="Use3x4Matrix",L[L.UseTextureMatrix=2]="UseTextureMatrix";var F,k={size:21,resetFlag:0,renderPass:1,canvasWidth:2,canvasHeight:3,uniforms:4,useInstanceOrNeverTranspose:20},B=65472,j={size:14,rotation:0,position:1,scale:3,worldMatrix:5},U={size:27,dfRotationType:1,rotationType:0,rotation:1,position:5,scale:8,worldOffset:11,worldMatrix:11},G={size:2,layer:0,mixedLayerMask:1},V={size:7,active:0,dfActive:1,layer:1,boundingBallCenter:2,boundingBallRadius:5,entityId:6},W={size:147,view:0,depth:1,active:2,fov:3,aspect:4,near:5,far:6,up:7,eye:10,orthoSize:13,isProjection:14,cullingMask:15,canvasSizeY:16,targetTransform:17,viewMatrix:18,projectionMatrix:34,viewMatrixInverse:50,viewMatrix2D:66,projectionMatrix2D:82,viewMatrixInverse2D:98,manualMatrix:114,layerCullDistances:115},z={size:78,view:0,depth:1,active:2,shadowDistance:3,shadowMode:4,shadowFilterMode:5,lightDir:6,bounds:9,lightSpaceMatrices:14},H={dynamicBatch:0,skinHandle:1,castShadow:2,bindTarget:3,start:4,size:5,materialId:0,vertexBufferId:1,indexBufferId:2,startIndex:3,numIndices:4},X={size:6,useMaterialStates:0,fstencil:1,bstencil:2,blendRGBA:3,colorDepth:4,state:5},K={size:14,renderQueue:0,effect:1,uniformBlock:2,fstencilMask:3,bstencilMask:4,blendRGBAMask:5,colorDepthMask:6,stateMask:7,fstencil:8,bstencil:9,blendRGBA:10,colorDepth:11,state:12,useInstance:13},$={boneInverseModelId:0,boneIndices:1,perBoneIndices:1,perBoneEntityId:1,perBoneMatrixOld:16,perBoneMatrixNew:12},q={stiffness:0,elasticity:1,damping:2};a.EEventType=void 0,(F=a.EEventType||(a.EEventType={}))[F.SetRootEntity=1]="SetRootEntity",F[F.AddChild=2]="AddChild",F[F.AddChildAtIndex=3]="AddChildAtIndex",F[F.RemoveFromParent=4]="RemoveFromParent",F[F.DisperseSubTree=5]="DisperseSubTree",F[F.BindToBone=6]="BindToBone",F[F.BindToBones=7]="BindToBones",F[F.UnBindFromBone=8]="UnBindFromBone",F[F.UnBindFromBones=9]="UnBindFromBones",F[F.EntityCommandActive=10]="EntityCommandActive",F[F.EntityCommandInActive=11]="EntityCommandInActive";var Y=function(e,t){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Y(e,t)};function Z(e,t){function r(){this.constructor=e}Y(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function J(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}var Q=void 0!==wxNativeConsole,ee=void 0!==Reporter,te=void 0!==__libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",re=void 0!==__libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";"string"==typeof te&&(te=te.replace(" ","")),"string"==typeof re&&(re=re.replace(" ","-"));var ne,oe=te+","+re;function ie(e){return e.replace(/,/g,"，")}!function(e){e[e.Default=1e3]="Default"}(ne||(ne={}));var ae,se,ce={backendVersion:0,backendCommit:"BeforeInit",init:function(e,t){this.backendVersion=e[0]<<16+e[1],this.backendCommit=t},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Q&&(null==wxNativeConsole||wxNativeConsole.log.apply(wxNativeConsole,J(["[kanata]"],e))),console.log.apply(console,J(["[kanata]"],e))},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Q&&(null==wxNativeConsole||wxNativeConsole.warn.apply(wxNativeConsole,J(["[kanata]"],e))),console.warn.apply(console,J(["[kanata]"],e))},error:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if("string"==typeof e&&(e=new Error(e)),Q&&(null==wxNativeConsole||wxNativeConsole.error.apply(wxNativeConsole,J(["[kanata]",e],t))),console.error.apply(console,J(["[kanata]",e],t)),ee){var n=this.backendVersion+","+ie(this.backendCommit)+","+ne.Default+",1,"+ie(e.message)+","+ie(e.stack);Reporter.reportKeyValue({key:"XR_FRAME",value:n+",1,"+oe})}}},ue=t.getContext("wgfx",{bufferPoolSize:40960,shaderPoolSize:5120,imagePoolSize:40960,pipelinePoolSize:1024,passPoolSize:1024,stencil:!0,alpha:"Editor"===n,antialias:r.mainScreenMSAA||!1,preserveDrawingBuffer:!0,ignore_assert:!!r.gfxIgnoreAssert,disable_log:"Editor"!==n});void 0!==window&&window.top?(ae=(window.top.NativeGlobal||{}).Puppet,se=(window.top.NativeGlobal||{}).Phys3D):"undefined"!=typeof NativeGlobal?(ae=NativeGlobal.Puppet,se=NativeGlobal.Phys3D):(ae=((null==wx?void 0:wx.NativeGlobal)||{}).Puppet,se=((null==wx?void 0:wx.NativeGlobal)||{}).Phys3D),ae||ce.error("Puppet is not exist !"),se||ce.error("Phys3D is not exist !"),(null==ue?void 0:ue.gfx)||ce.error("Get gfx context error: hasCTX("+!!ue+"), hasGFX("+!!(null==ue?void 0:ue.gfx)+")!");var le=void 0;ae&&(ue&&ue.gfx||o)&&((le=new ae(null==ue?void 0:ue.gfx,i,o))?ce.init(le.getRenderEnv().version.split(".").map((function(e){return parseInt(e,10)})),le.getRenderEnv().commit_version):ce.error("puppet instance create failed !"));var fe={worker:le||{}},pe=new(function(){function e(e){this._queues=[],this._end=0,this._end=e;for(var t=0;t<=e;t+=1)this._queues.push([])}return e.prototype.add=function(e){this._queues[0].push(e)},e.prototype.step=function(){var e=this._queues[this._end];e.splice(0,e.length);for(var t=this._end;t>0;t-=1)this._queues[t]=this._queues[t-1];this._queues[0]=e},e.prototype.clear=function(){this._queues.length=0},e}())(5),de={inWX:!0,REAL_DOWNLOADER:null,LOAD:function(e){return de.REAL_DOWNLOADER.load(e)}},he=function(){function e(e){this._bufferSize=0,e&&(this.buffer=e,this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=this.buffer.byteLength)}return Object.defineProperty(e.prototype,"commandOffset",{get:function(){return this._u32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commandOffsetUint32",{get:function(){return this._u32view[0]/4},enumerable:!1,configurable:!0}),e.prototype._checkBufferSize=function(e){this._u32view[0]+e+1>this._u32view.length&&(null==fe||fe.worker.refreshNodesWorldTransform())},e.prototype.setCommandSize=function(e){this._u32view[0]=e},e}(),_e=function(e){function t(){return e.call(this,null==fe?void 0:fe.worker.eventBusSM)||this}return Z(t,e),t.prototype.setRootEntity=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=a.EEventType.SetRootEntity,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.addChild=function(e,t){this._checkBufferSize(12);var r=this._u32view[0]/4+1;this._u32view[r]=a.EEventType.AddChild,this._u32view[r+1]=e,this._u32view[r+2]=t,this.setCommandSize(this._u32view[0]+12)},t.prototype.addChildAtIndex=function(e,t,r){this._checkBufferSize(16);var n=this._u32view[0]/4+1;this._u32view[n]=a.EEventType.AddChildAtIndex,this._u32view[n+1]=e,this._u32view[n+2]=t,this._u32view[n+3]=r,this.setCommandSize(this._u32view[0]+16)},t.prototype.removeFromParent=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=a.EEventType.RemoveFromParent,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.disperseSubTree=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=a.EEventType.DisperseSubTree,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.bindToBone=function(e,t){this._checkBufferSize(12);var r=this._u32view[0]/4+1;this._u32view[r]=a.EEventType.BindToBone,this._u32view[r+1]=e,this._u32view[r+2]=t,this.setCommandSize(this._u32view[0]+12)},t.prototype.unbindFromBone=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=a.EEventType.UnBindFromBone,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.entityCommandActive=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=a.EEventType.EntityCommandActive,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.entityCommandInActive=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=a.EEventType.EntityCommandInActive,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.bindToBones=function(e,t){var r=e.length,n=4*(2+2*r);this._checkBufferSize(n);var o=this._u32view[0]/4+1;this._u32view[o]=a.EEventType.BindToBones,this._u32view[o+1]=r;for(var i=0;i<r;i++){var s=e[i],c=t[i];this._u32view[o+2+i]=s.id,this._u32view[o+2+r+i]=c.id}this.setCommandSize(this._u32view[0]+n)},t.prototype.unBindFromBones=function(e){var t=e.length,r=4*(2+t);this._checkBufferSize(r);var n=this._u32view[0]/4+1;this._u32view[n]=a.EEventType.UnBindFromBones,this._u32view[n+1]=t;for(var o=0;o<t;o++){var i=e[o];this._u32view[n+2+o]=i.id}this.setCommandSize(this._u32view[0]+r)},t}(he),me=function(e){function t(){return e.call(this,null==fe?void 0:fe.worker.dirtyNodesSM)||this}return Z(t,e),t.prototype.addDirtyEntity=function(e){this._checkBufferSize(1),this._u32view[this._u32view[0]+1]=e,this.setCommandSize(this._u32view[0]+1)},t.prototype.addDirtyEntityId=function(e){this._checkBufferSize(1),this._u32view[this._u32view[0]+1]=e,this.setCommandSize(this._u32view[0]+1)},t.prototype.addDirtyEntities=function(e,t){if(this._checkBufferSize(t),t>this._u32view.length){for(var r=this._u32view[0]+1,n=t-(this._u32view.length-1),o=0;o<n;o++)this._u32view[r+o]=e[o];var i=t-n;for(o=n;o<i;o++)this.addDirtyEntityId(e[o])}else{for(n=t,r=this._u32view[0]+1,o=0;o<n;o++)this._u32view[r+o]=e[o];this.setCommandSize(this._u32view[0]+n)}},t.prototype.addDirtyEntitiesById=function(e,t){if(this._checkBufferSize(t),t>this._u32view.length){for(var r=this._u32view[0]+1,n=t-(this._u32view.length-1),o=0;o<n;o++)this._u32view[r+o]=e[o];var i=t-n;for(o=n;o<i;o++)this.addDirtyEntityId(e[o])}else{for(n=t,r=this._u32view[0]+1,o=0;o<n;o++)this._u32view[r+o]=e[o];this.setCommandSize(this._u32view[0]+n)}},t}(he),ve=new _e,ye=new me,ge=new(function(){function e(){}return e.prototype.entityAddChild=function(e,t){ve.addChild(e,t)},e.prototype.entityAddChildAtIndex=function(e,t,r){ve.addChildAtIndex(e,t,r)},e.prototype.entityRemoveFromParent=function(e){ve.removeFromParent(e)},e.prototype.entityClear=function(e){ve.disperseSubTree(e)},e.prototype.entitySetActive=function(e,t){t?ve.entityCommandActive(e):ve.entityCommandInActive(e)},e.prototype.entitySetLocalMatrixDirty=function(e){ye.addDirtyEntity(e)},e.prototype.setRootEntity=function(e){ve.setRootEntity(e)},e.prototype.refreshWorldTransform=function(){null==fe||fe.worker.refreshNodesWorldTransform()},e.prototype.bindEntityToBone=function(e,t){ve.bindToBone(e.id,t.id)},e.prototype.unbindEntityFromBone=function(e){ve.unbindFromBone(e.id)},e.prototype.bindEntitiesToBones=function(e,t){ve.bindToBones(e,t)},e.prototype.unbindEntitiesFromBones=function(e){ve.unBindFromBones(e)},e}());function be(e){var t,r;return void 0!==(null===(t=e)||void 0===t?void 0:t.byteLength)&&!!(null===(r=e)||void 0===r?void 0:r.slice)}var we=function(){function e(){this._srcSet=!1,this.isKanataImage=!0,this.premultiplyAlpha=!1,this.autoRelease=!1}return e.IS=function(e){return e&&e.isKanataImage},Object.defineProperty(e.prototype,"data",{get:function(){var e=this._buffer;return this.autoRelease&&delete this._buffer,e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localPath",{get:function(){return this._localPath},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"src",{get:function(){return this._src},set:function(e){this._srcSet?ce.error("cannot set Image.src twice."):"string"==typeof e?(this._src=e,this.createHttpImage(e),this._srcSet=!0):be(e)||be(e.buffer)?(this._src=e,this.createBufferImage(e,"buffer image"),this._srcSet=!0):ce.error("Image.src can only be string or ArrayBuffer.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.createHttpImage=function(e){var t=this;de.LOAD({src:e,encoding:void 0,onLoad:function(r){t._localPath=r.filePath,t.createBufferImage(r.data,e)},onError:function(e){t.onerror&&t.onerror(e)}})},e.prototype.createBufferImage=function(e,t){var r=this;null==fe||fe.worker.decodeImage(e,(function(e,n,o){e?(r._buffer=e,r._width=n,r._height=o,be(r._src)&&(r._src=null),r.onload&&r.onload()):r.onerror&&r.onerror(new Error("Decode Image error: '"+t+"'"))}),this.premultiplyAlpha),pe.add(e)},e}(),xe=function(){function e(e){this._bufferSize=0,e?(this.buffer=e,this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=this.buffer.byteLength):(this.buffer=new ArrayBuffer(1024),this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=1024)}return Object.defineProperty(e.prototype,"commandOffset",{get:function(){return this._u32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commandOffsetUint32",{get:function(){return this._u32view[0]/4},enumerable:!1,configurable:!0}),e.prototype._checkBufferSize=function(e){},e.prototype.setCommandSize=function(e){this._u32view[0]=e},e}(),Se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Z(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateSkinningMatrices=function(e,t){this._checkBufferSize(4*t);for(var r=0;r<t;r++)this._u32view[1+r]=e[r].id;return this.setCommandSize(t),this._u32view},t}(xe),Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Z(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateAnimators=function(e,t){this._checkBufferSize(4*t);for(var r=0;r<t;r++)this._u32view[1+r]=e[r].id;return this.setCommandSize(t),this._u32view},t}(xe),Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Z(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateAnimatorControllers=function(e,t){this._checkBufferSize(4*t);for(var r=0;r<t;r++)this._u32view[1+r]=e[r].id;return this.setCommandSize(t),this._u32view},t}(xe),Ce=new Se,Ae=new Ee,Oe=new Te,Me="undefined"!=typeof WeakRef,Re={downloader:de,eventBridge:ge,update:function(e){pe.step()},destroy:function(){var e,t;fe.worker.submit(),null===(t=(e=fe.worker).destroy)||void 0===t||t.call(e),fe.worker=void 0,Re.downloader=void 0,Re.eventBridge=void 0,pe.clear()},clearView:function(e){return null==fe?void 0:fe.worker.clearView(e.id)},cullCamera:function(e,t,r){return null==fe?void 0:fe.worker.cullCamera(e.id,t.id,r)},drawCamera:function(e,t,r){return null==fe?void 0:fe.worker.drawCamera(e.id,t.id,r)},drawLight:function(e,t,r,n){return null==fe?void 0:fe.worker.drawLight(e.id,t.id,r.id,n)},submit:function(){return null==fe?void 0:fe.worker.submit()},createScalableList:function(e,t){return null==fe?void 0:fe.worker.createScalableList(e,t)},createNodePool:function(e,t){return null==fe?void 0:fe.worker.createNodePool(e,t)},createNodeTree:function(e,t,r,n,o){return null==fe?void 0:fe.worker.createNodeTree(e,t,r,n,o)},createVertexLayout:function(e){return null==fe?void 0:fe.worker.createVertexLayout(JSON.stringify(e))},createVertexDataDescriptor:function(e){return null==fe?void 0:fe.worker.createVertexDataDescriptor(JSON.stringify(e))},createVertexBuffer:function(e,t){return pe.add(e),null==fe?void 0:fe.worker.createVertexBuffer(e,t.id)},updateVertexBuffer:function(e,t,r){return pe.add(t),null==fe?void 0:fe.worker.updateVertexBuffer(e.id,t,r)},createIndexBuffer:function(e,t){return pe.add(e),null==fe?void 0:fe.worker.createIndexBuffer(e,t)},updateIndexBuffer:function(e,t,r){return pe.add(t),null==fe?void 0:fe.worker.updateIndexBuffer(e.id,t,r)},createVertexData:function(e,t,r){return null==fe?void 0:fe.worker.createVertexData(e.id,t,r.id)},createIndexData:function(e){return null==fe?void 0:fe.worker.createIndexData(e)},createTexture:function(e,t,r,n,o,i,a,s,c){return s&&s.forEach((function(e,t){e=we.IS(e)?e.data:e,s[t]=e,pe.add(e)})),null==fe?void 0:fe.worker.createTexture(e,t,r,n,o,i,a,s,c)},createAutoUpdateTextureFromCanvas:function(e){return null==fe?void 0:fe.worker.createTexture(e)},updateTexture:function(e,t,r,n,o,i,a,s,c){return pe.add(c),null==fe?void 0:fe.worker.updateTexture(e.id,t,r,n,o,i,a,s,c)},updateTextureFlags:function(e,t){return null==fe?void 0:fe.worker.updateTextureFlags(e.id,t)},createUniformBlockDescriptor:function(e){return null==fe?void 0:fe.worker.createUniformBlockDescriptor(JSON.stringify(e))},createUniformBlock:function(e){return null==fe?void 0:fe.worker.createUniformBlock(e.id)},createEffect:function(e,t,r,n,o,i,a){return null==fe?void 0:fe.worker.createEffect(e,t,JSON.stringify(r),JSON.stringify(n),o,JSON.stringify(i),a?2:0)},createMaterial:function(e){return null==fe?void 0:fe.worker.createMaterial(JSON.stringify(e||{}))},changeMaterialMacros:function(e,t){return null==fe?void 0:fe.worker.changeMaterialMacros(e.id,JSON.stringify(t))},createView:function(e){var t={passAction:e.passAction,viewport:e.viewport,scissor:e.scissor};return null==fe?void 0:fe.worker.createView(JSON.stringify(t))},updateViewRect:function(e,t){return null==fe?void 0:fe.worker.updateViewRect(e.id,t)},updateViewScissor:function(e,t){return null==fe?void 0:fe.worker.updateViewScissor(e.id,t)},createRenderPass:function(e){var t=e;return t.colors.forEach((function(e){e.texture=e.texture.id})),t.depth.texture=t.depth.texture.id,t.stencil.texture=t.stencil.texture.id,null==fe?void 0:fe.worker.createRenderPass(JSON.stringify(e))},createCullingComponentPool:function(e){return null==fe?void 0:fe.worker.createCullingComponentPool(e)},createRenderComponent:function(e,t,r,n,o,i){return null==fe?void 0:fe.worker.createRenderComponent(e,t.id,r,n,o,JSON.stringify(i||{}))},changeMeshMacros:function(e,t){return null==fe?void 0:fe.worker.changeMeshMacros(e.id,JSON.stringify(t))},createAnimator:function(e,t){return null==fe?void 0:fe.worker.createAnimator(e,t)},updateAnimators:function(e,t){var r=Ae.updateAnimators(e,t);return pe.add(r),null==fe?void 0:fe.worker.updateAnimators(r)},createAnimationClipBinding:function(e,t,r,n,o,i,a,s){for(var c=Math.min(n.length-o,i),u=Math.min(e.length-t,r),l=new ArrayBuffer(4*(c+u)),f=new Uint32Array(l),p=0,d=t;d<u;d++)f[p++]=e[d]?e[d].id:0;for(d=o;d<c;d++)f[p++]=null===n[d]?0:"number"==typeof n[d]?n[d]:n[d].id;return pe.add(l),null==fe?void 0:fe.worker.createAnimationClipBinding(l,0,u,c,a,s.id)},rebindAnimationClipBinding:function(e,t,r,n,o,i,a,s,c,u,l){for(var f=Math.min(o.length-i,a),p=Math.min(t.length-r,n),d=new ArrayBuffer(4*(f+p)),h=new Uint32Array(d),_=0,m=r;m<p;m++)h[_++]=t[m]?t[m].id:0;for(m=i;m<f;m++)h[_++]=null===o[m]?0:"number"==typeof o[m]?o[m]:o[m].id;return pe.add(d),e.rebind(d,0,p,f,s,c,u,l.id)},updateAnimationClipBinding:function(e,t,r,n,o,i,a,s,c,u){for(var l=Math.min(o.length-i,a),f=Math.min(t.length-r,n),p=new ArrayBuffer(4*(l+f)),d=new Uint32Array(p),h=0,_=r;_<f;_++)d[h++]=t[_]?t[_].id:0;for(_=i;_<l;_++)d[h++]=null===o[_]?0:"number"==typeof o[_]?o[_]:o[_].id;return pe.add(p),e.update(p,0,f,l,s,c,u)},writeAnimationClipBindingDefaultValues:function(e){e.writeDefaultValues()},createAnimatorControllerModel:function(e){return null==fe?void 0:fe.worker.createAnimatorControllerModel(e)},setAnimatorControllerModelMaskAtIndex:function(e,t,r){e.setMaskAtIndex(t,r.buffer,r.offset,r.length)},updateAnimatorControllerModel:function(e){e.update()},createAnimatorControllerStateModel:function(e){return null==fe?void 0:fe.worker.createAnimatorControllerStateModel(e)},updateAnimatorControllers:function(e,t){var r=Oe.updateAnimatorControllers(e,t);pe.add(r),null==fe||fe.worker.updateAnimatorControllers(r)},createSkinning:function(e,t){return null==fe?void 0:fe.worker.createSkinning(e,t)},updateSkinnings:function(e,t){var r=Ce.updateSkinningMatrices(e,t);return pe.add(r),null==fe?void 0:fe.worker.updateSkinnings(r)},createRenderCamera:function(e,t){return null==fe?void 0:fe.worker.createRenderCamera(e,t)},createLightCamera:function(){return null==fe?void 0:fe.worker.createLightCamera()},createAnimationClipModel:function(e){return pe.add(e),null==fe?void 0:fe.worker.createAnimationClipModel(e)},createBoneInverseModel:function(e){return pe.add(e),null==fe?void 0:fe.worker.createBoneInverseModel(e)},createDynamicBones:function(e){return null==fe?void 0:fe.worker.createDynamicBones(e)},loadTTFFont:function(e,t){de.LOAD({src:e,encoding:void 0,onLoad:function(e){var r=e.data,n=e.filePath;pe.add(r);var o=null==fe?void 0:fe.worker.loadTTFFont(r,n);t(o)},onError:function(){t("Arial")}})},getGlyphInfo:function(e,t){var r=e.italic?"italic ":" ",n=e.bold?"bold ":" ";return null==fe?void 0:fe.worker.getGlyphInfo((""+r+n+Math.floor(e.size)+"px "+e.fontFamily).trim(),t)},refreshNodesWorldTransform:function(){return null==fe?void 0:fe.worker.refreshNodesWorldTransform()},getRenderEnv:function(){var e=null==fe?void 0:fe.worker.getRenderEnv(),t=e.registerFallbackEffect.bind(e);if(e.registerFallbackEffect=function(e,r){t(e,(null==r?void 0:r.id)||0)},e.changeMacros){var r=e.changeMacros.bind(e);e.changeMacros=function(e){r(JSON.stringify(e))}}else e.changeMacros=function(){};if(e.changeVirtualMacros){var n=e.changeVirtualMacros.bind(e);e.changeVirtualMacros=function(e){n(JSON.stringify(e))}}else e.changeVirtualMacros=function(){};if(e.setInternalInstanceInfo){var o=e.setInternalInstanceInfo.bind(e);e.setInternalInstanceInfo=function(e,t,r){o(e,JSON.stringify(t),JSON.stringify(r))}}else e.setInternalInstanceInfo=function(){};return e},createWeakRef:function(e){return Me?new WeakRef(e):(null==fe?void 0:fe.worker.createWeakRef)?null==fe?void 0:fe.worker.createWeakRef(e):{deref:function(){return e}}},createWeakRefSentry:function(){return(null==fe?void 0:fe.worker.createWeakRefSentry)?null==fe?void 0:fe.worker.createWeakRefSentry():{}},createNativeUUMap:function(){return null==fe?void 0:fe.worker.createNativeUUMap()},createNativeSUMap:function(){return null==fe?void 0:fe.worker.createNativeSUMap()},createNativeULUMap:function(){return null==fe?void 0:fe.worker.createNativeULUMap()},decodeBase64:function(e){return null==fe?void 0:fe.worker.decodeBase64(e)},setNodeName:function(e,t){return null==fe?void 0:fe.worker.setNodeName(e,t)},setRenderComponentName:function(e,t){return null==fe?void 0:fe.worker.setRenderComponentName(e.id,t)},debugPrint:function(e){return null==fe?void 0:fe.worker.debugPrint(e)},setGlobalPhysicSystem:function(e){},bindRigidBodyToNode:function(e,t){},unbindRigidBody:function(e){},bindCCTToNode:function(e,t){},unbindCCT:function(e){}},Pe={IS_VALID:function(){return!!le},GET_MAIN_CANVAS:function(){return t}};Pe.worker=Re,Pe.Image=we,Pe.Phys3D=se;var Ie,Ne=Pe.worker,De=function(){function e(){this._macros={},this._virtualMacros={},this._isWrongWrapMapping=!1,this._isNotWrongEffectSort=!1,this._isGoodInstance=!1,this._isGoodPhysAndScalableList=!1,this._isSizeDirty=!1,this.useExtendedMemory=!1,this._handle=this.__handle=Ne.getRenderEnv(),this.id=this._handle.id,this._uniformBlocks=[],this._u32View=new Uint32Array(this._handle.data),this._f32View=new Float32Array(this._handle.data),"string"==typeof this._handle.version?this._version=this._handle.version.split(".").map((function(e){return parseInt(e,10)})):"WEBGL"!==this.backendType&&(this._version=[0,0]),this._version?(this._isWrongWrapMapping=0===this._version[0],this._isNotWrongEffectSort=!(this._version[0]<=1&&this._version[1]<2),this._isGoodInstance=!(this._version[0]<=1&&this._version[1]<3),this._isGoodPhysAndScalableList=!(this._version[0]<=1&&this._version[1]<6)):(this._isNotWrongEffectSort=!0,this._isGoodInstance=!0,this._isGoodPhysAndScalableList=!0),this._isNotWrongEffectSort&&(this.neverTranspose=!0)}return Object.defineProperty(e.prototype,"version",{get:function(){return this._version.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backendType",{get:function(){return this._handle.backendType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasWidth",{get:function(){return this._f32View[k.canvasWidth]},set:function(e){this._isSizeDirty=!1,this._f32View[k.canvasWidth]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasHeight",{get:function(){return this._f32View[k.canvasHeight]},set:function(e){this._isSizeDirty=!0,this._f32View[k.canvasHeight]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportCompressTextures",{get:function(){return this._handle.supportCompressTextures},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"features",{get:function(){return this._handle.features||{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commitVersion",{get:function(){return this._handle.commit_version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"usePuppetSokol",{get:function(){return this._handle.use_puppet_sokol},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useInstance",{get:function(){return!!(1&this._u32View[k.useInstanceOrNeverTranspose])},set:function(e){var t=this._u32View[k.useInstanceOrNeverTranspose];this._u32View[k.useInstanceOrNeverTranspose]=e?1|t:-2&t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"neverTranspose",{get:function(){return!!(2&this._u32View[k.useInstanceOrNeverTranspose])},set:function(e){var t=this._u32View[k.useInstanceOrNeverTranspose];this._u32View[k.useInstanceOrNeverTranspose]=e?2|t:-3&t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isWrongWrapMapping",{get:function(){return this._isWrongWrapMapping},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNotWrongEffectSort",{get:function(){return this._isNotWrongEffectSort},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isGoodInstance",{get:function(){return this._isGoodInstance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isGoodPhysAndScalableList",{get:function(){return this._isGoodPhysAndScalableList},enumerable:!1,configurable:!0}),e.prototype.supportCompressTexture=function(e){return this.supportCompressTextures.indexOf(e)>=0},e.prototype.registerFallbackEffect=function(e,t){this._handle.registerFallbackEffect(e,null==t?void 0:t.__handle)},e.prototype.beginFrame=function(){this._u32View[k.resetFlag]=1},e.prototype.endFrame=function(){Ne.submit()},e.prototype.clearView=function(e){o&&0===this._renderPass.id||(this._isSizeDirty&&Ne.drawCamera({id:0},{id:0},"ForwardBase"),this._isSizeDirty=!1,Ne.clearView(e.__handle))},e.prototype.setEnvUniform=function(e,t){this._u32View[k.uniforms+e]=t.id,this._uniformBlocks[e]=t},e.prototype.setRenderPass=function(e){this._u32View[k.renderPass]=e.id,this._renderPass=e},e.prototype.changeMacros=function(e){Object.assign(this._macros,e),this._handle.changeMacros(this._macros)},e.prototype.getMacro=function(e){var t;return null===(t=this._macros)||void 0===t?void 0:t[e]},e.prototype.changeVirtualMacros=function(e){Object.assign(this._virtualMacros,e),this._handle.changeVirtualMacros(this._virtualMacros)},e.prototype.getVirtualMacro=function(e){return this._virtualMacros[e]},e.prototype.setInternalInstanceInfo=function(e,t,r){this._handle.setInternalInstanceInfo(e,t,r)},e.prototype.getErrors=function(){var e,t;return null===(t=(e=this.__handle).getErrors)||void 0===t?void 0:t.call(e)},e}(),Le=new De,Fe=function(){function e(){}return Object.defineProperty(e.prototype,"_handle",{get:function(){return this.__handle},set:function(e){this.__handle=e,this.id=e.id},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._handle.destroy&&this._handle.destroy()},e}(),ke=Pe.worker,Be=new Set,je=function(e){function t(t){var r=e.call(this)||this;return r._size=0,r._index=0,r._onBackendEnlarge=function(){r._resized()},Le.isGoodPhysAndScalableList?r._handle=ke.createScalableList(t,r._onBackendEnlarge):(r._handle=ke.createScalableList(t),Be.add(r),r._preData=r._handle.data),r._resized(),r}return Z(t,e),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataView",{get:function(){return this._u32View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"usedSize",{get:function(){return this._sizeView[0]>this.size?this.size:this._sizeView[0]},set:function(e){this._sizeView[0]=e},enumerable:!1,configurable:!0}),t.prototype.enlarge=function(e){this._handle.enlarge(),this._resized()},t.prototype.begin=function(){this._index=0},t.prototype.add=function(e,t){this._index===this._size&&this.enlarge(),this._u32View[this._index++]=e},t.prototype.end=function(){this._sizeView[0]=this._index},t.prototype.reset=function(){this._sizeView[0]=0},t.prototype._checkResize=function(){this._preData.byteLength!==this._handle.data.byteLength&&(this._resized(),this._preData=this._handle.data)},t.prototype._resized=function(){var e=this.__handle.data.byteLength/4-1;this._u32View=new Uint32Array(this.__handle.data,4),this._sizeView=new Uint32Array(this.__handle.data,0,1),this._size=e},t}(Fe),Ue=function(){function t(){var t=e.DATA_BUSES=e.DATA_BUSES||{};this._globalObj=t[i]=t[i]||[]}return t.prototype.postMessage=function(e){!o&&this._globalObj.push(e)},t.prototype.onMessage=function(e){o&&(this._callback=e)},t.prototype.flush=function(){if(o){for(var e=0,t=this._globalObj;e<t.length;e++){var r=t[e];this._callback&&this._callback("string"==typeof r?JSON.parse(r):r)}this._globalObj.length=0}},t}();e&&(Ie=new Ue);var Ge=Ie,Ve=function(){function e(){}return Object.defineProperty(e.prototype,"__handle",{get:function(){return this._handle},enumerable:!1,configurable:!0}),e.prototype._init=function(e){this._fastInit(e)},e.prototype._fastInit=function(e){this._handle=e;var t=e.id,r=e.data,n=r.byteLength;this._bufferLength=n,this._byteOffset=0,this._buffer=r,this.id=t,this._f32view=new Float32Array(r,0,n/4)},e.prototype._initU32View=function(){this._u32view=new Uint32Array(this._buffer,this._byteOffset,this._bufferLength/4)},e.prototype._initPropertyView=function(e,t){return new Float32Array(this._buffer,this._byteOffset+4*e,t)},e.prototype.setRawBuffer=function(e){this._f32view.set(e)},e.prototype.destroy=function(){this._handle.destroy&&this._handle.destroy()},e}(),We=Pe.worker,ze=function(e){function t(){var t=e.call(this)||this;return t._offsetEntityIds=0,t._animationClipCount=0,t._nodeCount=0,t._handle={id:0},t}return Z(t,e),t.UPDATE_ANIMATORS=function(e,t){We.updateAnimators(e,t)},t.prototype.bindAnimations=function(e,t,r){this.entities=t,this.animationClipModels=e,this.animationClipModels=e,this._animationClipCount=e.length;var n=t.length;for(var o in t)n+=t[o].length;this._nodeCount=n;var i=We.createAnimator(e.length,n);if(!(i.id<0)&&i.data){for(this._init(i),this._initU32View(),o=0;o<e.length;o++)this._u32view[3*o]=e[o].id;this._offsetEntityIds=3*e.length;var a,s=0;for(o=0;o<t.length;o++){for(var c=0;c<t[o].length;c++)null!==t[o][c]?(this._u32view[this._offsetEntityIds+s+c]=t[o][c].id,a||(a=t[o][c].id)):this._u32view[this._offsetEntityIds+s+c]=0,this._u32view[this._offsetEntityIds+s+c]=null!==t[o][c]?t[o][c].id:0;s+=t[o].length}0===this._u32view[this._offsetEntityIds]&&(void 0!==r&&r.id?this._u32view[this._offsetEntityIds]=r.id:a&&(this._u32view[this._offsetEntityIds]=a))}},t.prototype.setClipParams=function(e,t,r){if(this._handle){var n=3*e;this._f32view[n+1]=Math.round(t),this._f32view[n+2]=r}},t.prototype.getAnimationClipCount=function(){return this._animationClipCount},t.prototype.getNodeCount=function(){return this._nodeCount},t.prototype.getAnimationParameter=function(e){var t=3*e;return{animationClipId:this._u32view[t],frameIndex:this._f32view[t+1],percentage:this._f32view[t+2]}},t.prototype.getEntity=function(e){return this._u32view[this._offsetEntityIds+e]},t}(Ve),He=Pe.worker,Xe=function(e){function t(t,r){var n=e.call(this)||this,o=He.createRenderCamera(t.id,r||!1);return o.id<0||!o.data||(n._init(o),n._initU32View(),n._layerCullDistances=new Float32Array(n._buffer,4*W.layerCullDistances,32),n._f32view.set([0,1,0],W.up),n.fov=.33*Math.PI,n.aspect=16/9,n.near=.1,n.far=100,n.isProjection=!0),n}return Z(t,e),Object.defineProperty(t.prototype,"active",{get:function(){return!!this._u32view[W.active]},set:function(e){this._u32view[W.active]=e?1:0,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depth",{get:function(){return this._u32view[W.depth]},set:function(e){this._u32view[W.depth]=e<0?0:e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isProjection",{get:function(){return!!this._u32view[W.isProjection]},set:function(e){this._u32view[W.isProjection]=e?1:0,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},set:function(e){this._view=e,this._u32view[W.view]=e.id,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fov",{get:function(){return this._f32view[W.fov]},set:function(e){this._f32view[W.fov]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"aspect",{get:function(){return this._f32view[W.aspect]},set:function(e){Math.abs(this._f32view[W.aspect]-e)<=1e-4||(this._f32view[W.aspect]=e,this._setDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"near",{get:function(){return this._f32view[W.near]},set:function(e){this._f32view[W.near]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"far",{get:function(){return this._f32view[W.far]},set:function(e){this._f32view[W.far]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"orthoSize",{get:function(){return this._f32view[W.orthoSize]},set:function(e){this._f32view[W.orthoSize]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullingMask",{get:function(){return this._u32view[W.cullingMask]},set:function(e){this._u32view[W.cullingMask]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerCullDistances",{get:function(){return this._layerCullDistances},set:function(e){this._layerCullDistances.set(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasSizeY",{get:function(){return this._f32view[W.canvasSizeY]},set:function(e){this._f32view[W.canvasSizeY]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetTransform",{get:function(){return this._u32view[W.targetTransform]},set:function(e){this._u32view[W.targetTransform]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"up",{set:function(e){this._f32view.set(e,W.up)},enumerable:!1,configurable:!0}),t.prototype.cull=function(e,t){He.cullCamera(this.__handle,e.__handle,t)},t.prototype.draw=function(e,t){He.drawCamera(this.__handle,e.__handle,t)},t.prototype.changeProjectionMatrix=function(e,t){e?(this._f32view.set(t,W.projectionMatrix),this._u32view[W.manualMatrix]|=1):this._u32view[W.manualMatrix]&=-2,this._setDirty()},t.prototype.changeViewMatrix=function(e,t){e?(this._f32view.set(t,W.viewMatrix),this._u32view[W.manualMatrix]|=2):this._u32view[W.manualMatrix]&=-3,this._setDirty()},t.prototype._setDirty=function(){this._handle.setSharedDirty()},t.prototype.updateMatrix=function(){this._handle.updateMatrices()},t.OFFSETS=W,t}(Ve),Ke=Pe.worker,$e=function(e){function t(){var t=e.call(this)||this,r=Ke.createLightCamera();return r.id<0||!r.data||(t._init(r),t._initU32View(),t._lightSpaceMatrices=new Float32Array(t._buffer,4*z.lightSpaceMatrices,64),t._tilingOffsets=new Float32Array([1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0]),t._cascadedSplits=new Float32Array(3),t._farBounds=new Float32Array(t._buffer,4*(z.bounds+1),4),t._bounds=new Float32Array(t._buffer,4*z.bounds,5)),t}return Z(t,e),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},set:function(e){this._u32view[z.view]=e.id,this._view=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return!!this._u32view[z.active]},set:function(e){this._u32view[z.active]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depth",{get:function(){return this._u32view[z.depth]},set:function(e){this._u32view[z.depth]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowDistance",{get:function(){return this._f32view[z.shadowDistance]},set:function(e){this._f32view[z.shadowDistance]=e,this._updateBounds(!1),this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowFilterMode",{get:function(){return this._u32view[z.shadowFilterMode]},set:function(e){this._u32view[z.shadowFilterMode]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowMode",{get:function(){return this._u32view[z.shadowMode]},set:function(e){this._u32view[z.shadowMode]=e,this._tilingOffsets.set(e==a.EShadowMode.TwoCascade_PCF||e==a.EShadowMode.FourCascade_PCF?[.5,.5,0,0,.5,.5,.5,0,.5,.5,0,.5,.5,.5,.5,.5]:[1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0]),this._updateBounds(!1),this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lightSpaceMatrices",{get:function(){return this._lightSpaceMatrices},enumerable:!1,configurable:!0}),t.prototype.draw=function(e,t,r){Ke.drawLight(this.__handle,e.__handle,t,r)},t.prototype.prepareUniforms=function(e){e.setUniform("u_csmLightSpaceMatrices",this.lightSpaceMatrices),e.setUniform("u_shadowTilingOffsets",this._tilingOffsets),e.setUniform("u_csmFarBounds",this._farBounds)},t.prototype.setLightDir=function(e,t,r){Math.abs(e-this._f32view[z.lightDir])<1e-6&&Math.abs(t-this._f32view[z.lightDir+1])<1e-6&&Math.abs(r-this._f32view[z.lightDir+2])<1e-6||(this._f32view[z.lightDir]=e,this._f32view[z.lightDir+1]=t,this._f32view[z.lightDir+2]=r,this._setDirty())},t.prototype.setCascadedSplits=function(e,t,r){},t.prototype._updateBounds=function(e){var t=.3,r=this.shadowDistance,n=this.shadowMode;if(e){var o=r/t;this._bounds[0]=t;for(var i=1;i<n;i+=1){var a=i/n,s=t*Math.pow(o,a)*.75+.25*(t+(r-t)*a);this._bounds[i]=s,this._setSplitPercents(i-1,s/r)}this._bounds[n]=r,this._setSplitPercents(n-1,1)}else{for(i=1;i<n;i+=1)s=this._cascadedSplits[i-1]*r,this._bounds[i]=s;this._bounds[n]=r}},t.prototype._adjustSplitPercents=function(e,t){return e<this.shadowMode/2&&(t=Math.min(t,this._cascadedSplits[e+1])),this._setSplitPercents(e,t)},t.prototype._setSplitPercents=function(e,t){var r=this.shadowMode/2;return e>=r?0:e===r-1?1:t},t.prototype._setDirty=function(){this._handle.setSharedDirty()},t.OFFSETS=z,t}(Ve),qe=function(){function e(){}return Object.defineProperty(e.prototype,"float32View",{get:function(){return this._nativePool._f32view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint32View",{get:function(){return this._nativePool._u32view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._nativeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"poolId",{get:function(){return this._poolId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"poolIndex",{get:function(){return this._poolIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"poll",{get:function(){var e=this._nativePool.__handle;return e._wasmPool?e._wasmPool:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUsing",{get:function(){return this._using},set:function(e){this._using=e},enumerable:!1,configurable:!0}),e.prototype._init=function(e,t){this._nativeId=e,this._poolId=-65473&e,this._poolIndex=e&B,this._nativePool=t[this._poolId],this._using=!0},e.prototype.setRawBuffer=function(e){this._nativePool._f32view.set(e,this.entityOffset)},e}(),Ye=function(){function e(e){this._index=0,this._size=void 0!==e?e:500,this._array=new Array(this._size)}return e.prototype.push=function(e){this._index>=this._size&&(this._size*=2,this._array.length=this._size),this._array[this._index]=e,this._index++},e.prototype.pop=function(){return this._index--,this._array[this._index]},e.prototype.getByIndex=function(e){return e>=this._index?-1:this._array[e]},e.prototype.size=function(){return this._index},e.prototype.clear=function(){this._index=0},e}(),Ze=function(e){function t(t){var r=e.call(this)||this;return r._init(t),void 0!==t._byteOffset&&void 0!==t._byteSize&&(r._bufferLength=t._byteSize,r._byteOffset=t._byteOffset,r._f32view=new Float32Array(r._buffer,r._byteOffset,r._bufferLength/4)),r._initU32View(),r}return Z(t,e),t.prototype.supplyExtendedMemory=function(e){var t,r;Le.useExtendedMemory&&(null===(r=(t=this.__handle).setExtendedMemory)||void 0===r||r.call(t,e),this.u32viewExt=new Uint32Array(e))},t}(Ve),Je=function(){function e(e,t,r,n){void 0===n&&(n=0),this.pools={},this._poolIndex=0,this._poolUsedLength=0,this._poolLength=0,this._disposedIds=new Ye,this._template=e,this._templateView=t,this._allocateFunc=r,this._extendedMemSize=n}return e.prototype._enlargePool=function(e){var t=this._allocateFunc(e),r=new Ze(t);this._extendedMemSize>0&&r.supplyExtendedMemory(new ArrayBuffer(e*this._extendedMemSize)),this._poolIndex=r.id,this.pools[r.id]=r,this._poolLength+=e},e.prototype.allocateOne=function(){if(this._disposedIds.size()>0)return this._poolUsedLength++,this._disposedIds.pop();this._poolUsedLength>=this._poolLength&&this._enlargePool(1024);var e=this._poolIndex;return this._poolIndex+=64,this._poolUsedLength++,e},e.prototype.dispose=function(e){e.isUsing&&(this._disposedIds.push(e.id),this._poolUsedLength--,e.setRawBuffer(this._templateView),e.isUsing=!1)},e}(),Qe=Pe.worker,et=new Uint32Array(new ArrayBuffer(4*V.size)),tt=new Float32Array(et.buffer),rt=function(e){function t(r){var n=e.call(this)||this,o=t.POLL_MANAGER.allocateOne();return n._init(o,t.POLL_MANAGER.pools),n.entityOffset=(n._poolIndex>>6)*V.size,n._activeOffset=n.entityOffset+V.active,n._layerOffset=n.entityOffset+V.layer,n._boundingBallCenterOffset=n.entityOffset+V.boundingBallCenter,n._boundingBallRadiusOffset=n.entityOffset+V.boundingBallRadius,n._entityIdOffset=n.entityOffset+V.entityId,n}return Z(t,e),t.prototype.getActive=function(){return 0!=(this._nativePool._u32view[this._activeOffset]&V.dfActive)},t.prototype.setActive=function(e){e?this._nativePool._u32view[this._activeOffset]|=V.dfActive:this._nativePool._u32view[this._activeOffset]&=~V.dfActive},t.prototype.getLayer=function(){return this._nativePool._u32view[this._layerOffset]},t.prototype.setLayer=function(e){this._nativePool._u32view[this._layerOffset]=e},t.prototype.getBoundingBallCenter=function(){return this._boundingBallCenter||(this._boundingBallCenter=new Float32Array(this._nativePool._buffer,4*this._boundingBallCenterOffset,3)),this._boundingBallCenter},t.prototype.setBoundingBallCenter=function(e,t){void 0===t&&(t=0),e[t]===this._nativePool._f32view[this._boundingBallCenterOffset]&&e[t+1]===this._nativePool._f32view[this._boundingBallCenterOffset+1]&&e[t+2]===this._nativePool._f32view[this._boundingBallCenterOffset]+3||(3===e.length?this._nativePool._f32view.set(e,this._boundingBallCenterOffset):(this._nativePool._f32view[this._boundingBallCenterOffset]=e[t],this._nativePool._f32view[this._boundingBallCenterOffset+1]=e[t+1],this._nativePool._f32view[this._boundingBallCenterOffset+2]=e[t+2]))},t.prototype.getBoundingBallRadius=function(){return this._nativePool._f32view[this._boundingBallRadiusOffset]},t.prototype.setBoundingBallRadius=function(e){this._nativePool._f32view[this._boundingBallRadiusOffset]=e},t.prototype.bindEntity=function(e){this._bindEntityNative(e)},t.prototype.destroy=function(){this._unbindEntityNative(),t.POLL_MANAGER.dispose(this)},t.prototype._bindEntityNative=function(e){this.uint32View[this._entityIdOffset]=e.id},t.prototype._unbindEntityNative=function(){this.uint32View[this._entityIdOffset]=0},t.POLL_MANAGER=new Je(et,tt,(function(e){return Qe.createCullingComponentPool(e)})),t}(qe),nt=Pe.worker,ot=function(e){function t(t,r){var n=e.call(this)||this,o=n._createNativeObj(t,r);return o.id<0||!o.data||(n._init(o),n._initU32View(),n._macros=r.macros,n._meshCount=r.meshCount,n._uniforms=r.uniformBlock),n}return Z(t,e),t.CREATE_FAKE=function(e,t){return new it(e,t)},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this._uniforms},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"meshCount",{get:function(){return this._meshCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"castShadow",{get:function(){return!!this._u32view[H.castShadow]},set:function(e){this._u32view[H.castShadow]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dynamicBatch",{get:function(){return!!this._u32view[H.dynamicBatch]},set:function(e){this._u32view[H.dynamicBatch]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skinSkeleton",{set:function(e){this._u32view[H.skinHandle]=e.id,this._skinSkeleton=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bindTarget",{set:function(e){this._u32view[H.bindTarget]=e?e.id:0,this._bindTarget=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"macros",{get:function(){return this._macros},enumerable:!1,configurable:!0}),t.prototype._createNativeObj=function(e,t){return nt.createRenderComponent(t.meshCount,t.uniformBlock.__handle,e.id,t.culling?t.culling.id:0,t.renderType,t.macros)},t.prototype.changeMacros=function(e){this._macros=this._macros||{},Object.assign(this._macros,e),nt.changeMeshMacros(this.__handle,this._macros,!0)},t.prototype.getStartIndex=function(e){return this._u32view[H.start+H.size*e+H.startIndex]},t.prototype.setStartIndex=function(e,t){this._u32view[H.start+H.size*e+H.startIndex]=t},t.prototype.getNumIndices=function(e){return this._u32view[H.start+H.size*e+H.numIndices]},t.prototype.setNumIndices=function(e,t){this._u32view[H.start+H.size*e+H.numIndices]=t},t.prototype.getVertexBuffer=function(e){return this._vertexes[e]},t.prototype.setVertexBuffer=function(e,t){this._vertexes||(this._vertexes=new Array(this._meshCount)),this._u32view[H.start+H.size*e+H.vertexBufferId]=t.id,this._vertexes[e]=t},t.prototype.getIndexBuffer=function(e){return this._indexes[e]},t.prototype.setIndexBuffer=function(e,t){this._indexes||(this._indexes=new Array(this._meshCount)),this._u32view[H.start+H.size*e+H.indexBufferId]=t.id,this._indexes[e]=t},t.prototype.getVertexData=function(e){return this._vertexes&&this._vertexes[e]},t.prototype.setVertexData=function(e,t){this._vertexes||(this._vertexes=new Array(this._meshCount)),this._u32view[H.start+H.size*e+H.vertexBufferId]=t.id,this._vertexes[e]=t},t.prototype.getIndexData=function(e){return this._indexes&&this._indexes[e]},t.prototype.setIndexData=function(e,t){this._indexes||(this._indexes=new Array(this._meshCount)),this._u32view[H.start+H.size*e+H.indexBufferId]=t.id,this._indexes[e]=t},t.prototype.getMaterial=function(e){return this._materials&&this._materials[e]},t.prototype.setMaterial=function(e,t){this._materials||(this._materials=new Array(this._meshCount)),this._u32view[H.start+H.size*e+H.materialId]=t?t.id:0,this._materials[e]=t},t.prototype.fastSet=function(e,t,r,n,o){this._vertexes=e,this._indexes=t,this._materials=r;for(var i=0;i<this._meshCount;i+=1)this.setVertexBuffer(i,e[i]),this.setIndexBuffer(i,t[i]),this.setMaterial(i,r[i]),this.setStartIndex(i,n[i]),this.setNumIndices(i,o[i])},t.prototype.setDirty=function(){this._handle.setSharedDirty&&this._handle.setSharedDirty()},t.prototype.copyStates=function(e){e._u32view.length<this._u32view.length?this._u32view.set(e._u32view,0):this._u32view.set(new Uint32Array(e._u32view.buffer,0,this._u32view.length),0),this._materials=e._materials,this._vertexes=e._vertexes,this._indexes=e._indexes},t.OFFSETS=H,t}(Ve),it=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Z(t,e),t.prototype._createNativeObj=function(e,t){return{id:0,data:new ArrayBuffer(4*(H.start+H.size*t.meshCount)),setSharedDirty:function(){}}},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this._uniforms},set:function(e){this._uniforms=e},enumerable:!1,configurable:!0}),t}(ot),at=Pe.worker,st=function(e){function t(t,r){var n=e.call(this)||this;n.flag=r,n._boneNum=0,n._boneNum=t;var o=at.createSkinning(t,r);return o.id<0||!o.data||(n._init(o),n._initU32View()),n}return Z(t,e),t.UPDATE_MATS=function(e,t){at.updateSkinnings(e,t)},Object.defineProperty(t.prototype,"boneNum",{get:function(){return this._boneNum},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boneInverseModel",{get:function(){return this._boneInverseModel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boneOffsetMatrices",{get:function(){return this._boneOffsetMatrices},enumerable:!1,configurable:!0}),t.prototype.setBoneMatrix=function(e,t,r){var n=this._boneNum;if(t.length===n&&r.length===n){for(var o=[],i=0;i<n;i++)o.push(r[i].id);this._u32view[$.boneInverseModelId]=e.id,this._u32view.set(t,$.boneIndices);var a=$.boneIndices+n*$.perBoneIndices;this._u32view.set(o,a),this._boneOffsetMatrices=new Float32Array(this._buffer,this._byteOffset+4*($.boneIndices+n*($.perBoneIndices+$.perBoneEntityId)),n*(1&this.flag?12:16)),this._boneInverseModel=e}else console.warn("setBoneMatrix Error")},t.prototype.getBoneNum=function(){return this._boneNum},t.prototype.getBoneOffsetMatrices=function(){return this._boneOffsetMatrices},t}(Ve),ct=Pe.worker,ut=function(e){function t(t){var r=e.call(this)||this,n=ct.createDynamicBones(t?t.id:0);return n.id<0||!n.data||(r._init(n),r._initU32View()),r}return Z(t,e),Object.defineProperty(t.prototype,"stiffness",{get:function(){return this._f32view[q.stiffness]},set:function(e){this._f32view[q.stiffness]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"damping",{get:function(){return this._f32view[q.damping]},set:function(e){this._f32view[q.damping]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"elasticity",{get:function(){return this._f32view[q.elasticity]},set:function(e){this._f32view[q.elasticity]=e},enumerable:!1,configurable:!0}),t.prototype.preUpdate=function(){this._handle.preUpdate()},t.prototype.update=function(e,t){t?this._handle.update(e,t.x,t.y,t.z):this._handle.update(e)},t.prototype.rebuild=function(){this._handle.rebuild()},t.prototype.resetRoot=function(e){this._handle.resetRoot(e?e.id:0)},t.OFFSETS=q,t}(Ve),lt=Pe.worker,ft=new Float32Array(new ArrayBuffer(4*j.size));ft.set([0,0,0,1,1],0);var pt=function(e){function t(){var r=e.call(this)||this,n=t.POLL_MANAGER.allocateOne();return r._init(n,t.POLL_MANAGER.pools),r.entityOffset=(r._poolIndex>>6)*j.size,r.localRotationOffset=r.entityOffset+j.rotation,r.localPositionOffset=r.entityOffset+j.position,r.localScaleOffset=r.entityOffset+j.scale,r.worldMatrixOffset=r.entityOffset+j.worldMatrix,r.active=!0,r}return Z(t,e),t.prototype.addChild=function(e){lt.eventBridge.entityAddChild(this.id,e.id)},t.prototype.addChildAtIndex=function(e,t){lt.eventBridge.entityAddChildAtIndex(this.id,e.id,t)},t.prototype.removeFromParent=function(){lt.eventBridge.entityRemoveFromParent(this.id)},t.prototype.setAsRoot=function(){lt.eventBridge.setRootEntity(this.id)},t.prototype.destroy=function(){this.removeFromParent(),t.POLL_MANAGER.dispose(this)},t.prototype.clear=function(){lt.eventBridge.entityClear(this.id)},t.prototype.setLocalMatrixDirty=function(){lt.eventBridge.entitySetLocalMatrixDirty(this.id)},Object.defineProperty(t.prototype,"active",{set:function(e){lt.eventBridge.entitySetActive(this.id,e)},enumerable:!1,configurable:!0}),t.POLL_MANAGER=new Je(ft,ft,(function(e){return lt.createNodePool(e,!1)})),t.OFFSETS=j,t}(qe),dt=function(){function e(e,t){this._ctor=e,this._index=0,this._size=void 0!==t?t:500,this._array=new e(this._size)}return e.prototype.push=function(e){if(this._index>=this._size){var t=new this._ctor(2*this._size);t.set(this._array),this._array=t,this._size*=2}this._array[this._index]=e,this._index++},e.prototype.pop=function(){return this._index--,this._array[this._index]},e.prototype.getByIndex=function(e){return e>=this._index?-1:this._array[e]},e.prototype.size=function(){return this._index},e.prototype.clear=function(){this._index=0},Object.defineProperty(e.prototype,"buffer",{get:function(){return this._array.buffer},enumerable:!1,configurable:!0}),e}(),ht=Pe.worker,_t=new Uint32Array(new ArrayBuffer(4*U.size)),mt=new Float32Array(_t.buffer);_t[0]=1,mt.set([0,0,0,1],1),mt.set([0,0,0],5),mt.set([1,1,1],8);var vt=function(e){function t(){var r=e.call(this)||this,n=t.POLL_MANAGER.allocateOne();return r._init(n,t.POLL_MANAGER.pools),r.entityOffset=(r._poolIndex>>6)*U.size,r.localRotationTypeOffset=r.entityOffset+U.rotationType,r.localQuaternionOffset=r.entityOffset+U.rotation,r.localPositionOffset=r.entityOffset+U.position,r.localScaleOffset=r.entityOffset+U.scale,r.worldMatrixOffset=r.entityOffset+U.worldOffset,r.extOffset=(r._poolIndex>>6)*G.size,r.layerOffset=r.extOffset+G.layer,r.mixedLayerMaskOffset=r.extOffset+G.mixedLayerMask,r.active=!0,r}return Z(t,e),t.CREATE_TREE=function(e,r,n,o){void 0===o&&(o=!1),t._CREATE_TREE_IDS.clear();for(var i=0;i<e;i++)n[i]=new t,t._CREATE_TREE_IDS.push(n[i].id);var a=ht.createNodeTree(e,t._CREATE_TREE_IDS.buffer,r,o,!0);if(!a)for(i=0;i<e;i++)t.POLL_MANAGER.dispose(n[i]);return a},t.prototype.setUsingEuler=function(e){e?this._nativePool._u32view[this.localRotationTypeOffset]&=~U.dfRotationType:this._nativePool._u32view[this.localRotationTypeOffset]|=U.dfRotationType},t.prototype.isUsingEuler=function(){return 0==(this._nativePool._u32view[this.localRotationTypeOffset]&U.dfRotationType)},t.prototype.setLayer=function(e){this._nativePool.u32viewExt&&e!==this.getLayer()&&(this._nativePool.u32viewExt[this.layerOffset]=e,this.setLocalMatrixDirty())},t.prototype.getLayer=function(){return this._nativePool.u32viewExt?this._nativePool.u32viewExt[this.layerOffset]:0},t.prototype.getMixedLayerMask=function(){return this._nativePool.u32viewExt?this._nativePool.u32viewExt[this.mixedLayerMaskOffset]:1},t.prototype.addChild=function(e){ht.eventBridge.entityAddChild(this.id,e.id)},t.prototype.addChildAtIndex=function(e,t){ht.eventBridge.entityAddChildAtIndex(this.id,e.id,t)},t.prototype.removeFromParent=function(){ht.eventBridge.entityRemoveFromParent(this.id)},t.prototype.setAsRoot=function(){ht.eventBridge.setRootEntity(this.id)},t.prototype.destroy=function(){this.removeFromParent(),t.POLL_MANAGER.dispose(this)},t.prototype.clear=function(e,r){for(var n=0;n<r;n++)t.POLL_MANAGER.dispose(e[n]);ht.eventBridge.entityClear(this.id)},t.prototype.setLocalMatrixDirty=function(){ht.eventBridge.entitySetLocalMatrixDirty(this.id)},Object.defineProperty(t.prototype,"active",{set:function(e){ht.eventBridge.entitySetActive(this.id,e)},enumerable:!1,configurable:!0}),t.POLL_MANAGER=new Je(_t,mt,(function(e){return ht.createNodePool(e,!0)}),4*G.size),t.OFFSETS=U,t._CREATE_TREE_IDS=new dt(Uint32Array),t}(qe),yt=Pe.worker,gt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Z(t,e),t.prototype._createNativeModel=function(e,t){var r;e===a.EDataModelType.AnimationClip?r=yt.createAnimationClipModel(t):e===a.EDataModelType.SkeletonBoneInverse&&(r=yt.createBoneInverseModel(t)),r=r||{id:0},this._handle=r},t}(Fe),bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.setAnimationClip=function(e){this._createNativeModel(a.EDataModelType.AnimationClip,e)},t}(gt),wt=Pe.worker,xt=function(e){function t(t,r,n,o,i,a,s,c){var u=e.call(this)||this;return u._handle=wt.createAnimationClipBinding(t,r,n,o,i,a,s,c),u}return Z(t,e),t.prototype.rebind=function(e,t,r,n,o,i,a,s,c,u){return wt.rebindAnimationClipBinding(this.__handle,e,t,r,n,o,i,a,s,c,u)},t.prototype.update=function(e,t,r,n,o,i,a,s,c){return wt.updateAnimationClipBinding(this.__handle,e,t,r,n,o,i,a,s,c)},t.prototype.writeDefaultValues=function(){wt.writeAnimationClipBindingDefaultValues(this.__handle)},t}(Fe),St=Pe.worker,Et=function(e){function t(t){var r=e.call(this)||this;r.layerCount=t,r._handle=St.createAnimatorControllerModel(t),r._uint32View=new Uint32Array(r._handle.data),r._f32View=new Float32Array(r._handle.data),r._blendStates=new Array(t);for(var n=0;n<t;n++)r._uint32View[1+3*n]=1,r._f32View[1+3*n+1]=0,r._f32View[1+3*n+2]=0;return r}return Z(t,e),t.UPDATE_ANIMATOR_CONTROLLERS=function(e,t){St.updateAnimatorControllers(e,t)},t.prototype.setAnimationClipBinding=function(e){this._uint32View[0]=e?e.id:0,this._binding=e},t.prototype.setLayerBlendType=function(e,t){this._uint32View[1+3*e]=t},t.prototype.setLayerWeight=function(e,t){this._f32View[1+3*e+1]=t},t.prototype.setLayerBlend=function(e,t){this._uint32View[1+3*e+2]=t?t.id:0,this._blendStates[e]=t},t.prototype.setLayerMask=function(e,t){St.setAnimatorControllerModelMaskAtIndex(this.__handle,e,t)},t.prototype.update=function(){St.updateAnimatorControllerModel(this.__handle)},t.prototype.destroy=function(){this._binding=null,this._blendStates=null},t}(Fe),Tt=Pe.worker,Ct=function(e){function t(t){var r=e.call(this)||this;r.count=t,r._index=0,r._handle=Tt.createAnimatorControllerStateModel(t),r._f32View=new Float32Array(r._handle.data),r._uint32View=new Uint32Array(r._handle.data);for(var n=0;n<t;n++)r._uint32View[5*n+3]=0,r._f32View[5*n+3+1]=0,r._f32View[5*n+3+2]=0,r._uint32View[5*n+3+3]=0,r._f32View[5*n+3+4]=0;return r}return Z(t,e),Object.defineProperty(t.prototype,"weight",{get:function(){return this._f32View[0]},set:function(e){this._f32View[0]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useDefault",{get:function(){return this._f32View[1]},set:function(e){this._f32View[1]=e},enumerable:!1,configurable:!0}),t.prototype.resetBlendInfo=function(){for(var e=0;e<this.count;e++)this._f32View[5*e+3+1]=0,this._f32View[5*e+3+2]=0;this._index=0},t.prototype.setNextState=function(e){this._uint32View[2]=e?e.id:0,this._nextState=e},t.prototype.setBlendInfo=function(e,t,r,n,o){return!(this._index>=this.count||(this._uint32View[5*this._index+3]=e.id,this._f32View[5*this._index+3+1]=t,this._f32View[5*this._index+3+2]=r,this._uint32View[5*this._index+3+3]=n?n.id:this._uint32View[5*this._index+3],this._f32View[5*this._index+3+4]=o,this._index++,0))},t}(Fe),At=function(e){function t(t){var r=e.call(this)||this;return r._init(t),r}return Z(t,e),Object.defineProperty(t.prototype,"dataLength",{get:function(){return this._u32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"byteOffset",{get:function(){return this._byteOffset+4},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arrayBuffer",{get:function(){return this._buffer},enumerable:!1,configurable:!0}),t}(Ve),Ot=16384,Mt=32768,Rt=393216,Pt=15728640;function It(e,t){return-8&e|t<<0}function Nt(e,t){return-57&e|t<<3}function Dt(e,t){return-449&e|t<<6}function Lt(e,t){return-3585&e|t<<9}function Ft(e,t){return-12289&e|t<<12}function kt(e,t){return t?e|Ot:-16385&e}function Bt(e,t){return-393217&e|(1===t?0:t<<17)}function jt(e,t){return-15728641&e|t-1<<20}function Ut(e,t){return t?e|Mt:-32769&e}function Gt(e){return(7&e)>>0}function Vt(e){return(56&e)>>3}function Wt(e){return(448&e)>>6}var zt=2147483648;function Ht(e,t){return t?e|zt:2147483647&e}function Xt(e){return!!(e&zt)}var Kt=1073741824;function $t(e,t){return t?e|Kt:-1073741825&e}function qt(e){return!!(e&Kt)}var Yt=16776960;function Zt(e,t){return 4294963455&e|t<<8}function Jt(e,t){return 4294905855&e|t<<8<<4}function Qt(e,t){return 4293984255&e|t<<8<<8}function er(e,t){return 4279238655&e|t<<8<<12}function tr(e){return(e&Yt)>>8&15}function rr(e){return(e&Yt)>>8>>4&15}function nr(e){return(e&Yt)>>8>>8&15}function or(e){return(e&Yt)>>8>>12&15}var ir=1056964608;function ar(e,t){return 4043309055&e|t<<24}function sr(e,t){return 3489660927&e|t<<24<<3}function cr(e){return(e&ir)>>24&7}var ur=240;function lr(e,t){return-241&e|t<<4}function fr(e){return 0!=(e&ur)}function pr(e){return(e&ur)>>4}var dr=255;function hr(e,t){return-256&e|(255&t)<<0}function _r(e){return(e&dr)>>0}var mr=65280;function vr(e,t){return-65281&e|t<<8}function yr(e){return(e&mr)>>8}var gr=983040;function br(e,t){return-983041&e|t<<16}function wr(e){return 0!=(e&gr)}function xr(e){return(e&gr)>>16}var Sr=20,Er=4293918720;function Tr(e,t){return 4279238655&e|t<<Sr}function Cr(e,t){return 4043309055&e|t<<Sr<<4}function Ar(e,t){return 268435455&e|t<<Sr<<8}function Or(e){return(e&Er)>>Sr&15}function Mr(e){return(e&Er)>>Sr>>4&15}function Rr(e){return(e&Er)>>Sr>>8&15}var Pr=255;function Ir(e,t){return-256&e|(255&t)<<0}function Nr(e){return e&Pr}var Dr=768;function Lr(e,t){return-769&e|t<<8}function Fr(e){return(e&Dr)>>8}function kr(e){return!!(e&Dr)}var Br=14336;function jr(e,t){return-14337&e|t<<11}function Ur(e){return(e&Br)>>11}var Gr=Pe.worker,Vr=function(e){function t(t,r,n,o,i,s,c){void 0===c&&(c=!1);var u=e.call(this)||this,l=Gr.createEffect(t,r,n,o,i,s,c);if(l.id<0||!l.data)return u;u._handle=l,u._init(l),u._initU32View();for(var f=0;f<r;f+=1){var p=f*X.size+X.colorDepth;u._u32view[p]=15|u._u32view[p],u._u32view[p]=Qt(u._u32view[p],a.EBlendFactor.ZERO),u._u32view[p]=er(u._u32view[p],a.EBlendFactor.ONE)}return u._passCount=r,u}return Z(t,e),Object.defineProperty(t.prototype,"passCount",{get:function(){return this._passCount},enumerable:!1,configurable:!0}),t.prototype.warmUp=function(){return this._handle.warmUp()},t.prototype.getBlendOn=function(e){return qt(this._u32view[e*X.size+X.colorDepth])},t.prototype.setBlendOn=function(e,t){var r=e*X.size+X.colorDepth;this._u32view[r]=$t(this._u32view[r],t)},t.prototype.getBlendSrc=function(e){return tr(this._u32view[e*X.size+X.colorDepth])},t.prototype.setBlendSrc=function(e,t){var r=e*X.size+X.colorDepth;this._u32view[r]=Zt(this._u32view[r],t),this._u32view[r]=Qt(this._u32view[r],t)},t.prototype.getBlendDst=function(e){return rr(this._u32view[e*X.size+X.colorDepth])},t.prototype.setBlendDst=function(e,t){var r=e*X.size+X.colorDepth;this._u32view[r]=Jt(this._u32view[r],t),this._u32view[r]=er(this._u32view[r],t)},t.prototype.getBlendSrcRGB=function(e){return tr(this._u32view[e*X.size+X.colorDepth])},t.prototype.setBlendSrcRGB=function(e,t){var r=e*X.size+X.colorDepth;this._u32view[r]=Zt(this._u32view[r],t)},t.prototype.getBlendSrcAlpha=function(e){return nr(this._u32view[e*X.size+X.colorDepth])},t.prototype.setBlendSrcAlpha=function(e,t){var r=e*X.size+X.colorDepth;this._u32view[r]=Qt(this._u32view[r],t)},t.prototype.getBlendDstRGB=function(e){return rr(this._u32view[e*X.size+X.colorDepth])},t.prototype.setBlendDstRGB=function(e,t){var r=e*X.size+X.colorDepth;this._u32view[r]=Jt(this._u32view[r],t)},t.prototype.getBlendDstAlpha=function(e){return or(this._u32view[e*X.size+X.colorDepth])},t.prototype.setBlendDstAlpha=function(e,t){var r=e*X.size+X.colorDepth;this._u32view[r]=er(this._u32view[r],t)},t.prototype.getBlendFunc=function(e){return cr(this._u32view[e*X.size+X.colorDepth])},t.prototype.setBlendFunc=function(e,t){var r=e*X.size+X.colorDepth;this._u32view[r]=ar(this._u32view[r],t),this._u32view[r]=sr(this._u32view[r],t)},t.prototype.getDepthTestOn=function(e){return fr(this._u32view[e*X.size+X.colorDepth])},t.prototype.setDepthTestOn=function(e,t){var r=e*X.size+X.colorDepth;this._u32view[r]=lr(this._u32view[r],t?a.ECompareFunc.LEQUAL:0)},t.prototype.getDepthTestComp=function(e){return pr(this._u32view[e*X.size+X.colorDepth])},t.prototype.setDepthTestComp=function(e,t){var r=e*X.size+X.colorDepth;this._u32view[r]=lr(this._u32view[r],t)},t.prototype.getDepthWrite=function(e){return Xt(this._u32view[e*X.size+X.colorDepth])},t.prototype.setDepthWrite=function(e,t){var r=e*X.size+X.colorDepth;this._u32view[r]=Ht(this._u32view[r],t)},t.prototype.getCullFace=function(e){return Fr(this._u32view[e*X.size+X.state])},t.prototype.setCullFace=function(e,t){var r=e*X.size+X.state;this._u32view[r]=Lr(this._u32view[r],t)},t.prototype.getCullOn=function(e){return kr(this._u32view[e*X.size+X.state])},t.prototype.setCullOn=function(e,t){var r=e*X.size+X.state;this._u32view[r]=Lr(this._u32view[r],t?a.ECullMode.BACK:a.ECullMode.NONE)},t.prototype.getPrimitiveType=function(e){return Ur(this._u32view[e*X.size+X.state])},t.prototype.setPrimitiveType=function(e,t){var r=e*X.size+X.state;this._u32view[r]=jr(this._u32view[r],t)},t.prototype.getStencilTestOn=function(e){return wr(this._u32view[e*X.size+X.fstencil])},t.prototype.setStencilTestOn=function(e,t){var r=e*X.size+X.bstencil,n=br(this._u32view[r],t?a.ECompareFunc.LEQUAL:0);this._u32view[r]=n,r=e*X.size+X.fstencil,this._u32view[r]=n},t.prototype.getStencilComp=function(e){return xr(this._u32view[e*X.size+X.fstencil])},t.prototype.setStencilComp=function(e,t){var r=e*X.size+X.bstencil,n=br(this._u32view[r],t);this._u32view[r]=n,r=e*X.size+X.fstencil,this._u32view[r]=n},t.prototype.getStencilPass=function(e){return Rr(this._u32view[e*X.size+X.fstencil])},t.prototype.setStencilPass=function(e,t){var r=e*X.size+X.bstencil,n=Ar(this._u32view[r],t);this._u32view[r]=n,r=e*X.size+X.fstencil,this._u32view[r]=n},t.prototype.getStencilFail=function(e){return Or(this._u32view[e*X.size+X.fstencil])},t.prototype.setStencilFail=function(e,t){var r=e*X.size+X.bstencil,n=Tr(this._u32view[r],t);this._u32view[r]=n,r=e*X.size+X.fstencil,this._u32view[r]=n},t.prototype.getStencilZFail=function(e){return Mr(this._u32view[e*X.size+X.fstencil])},t.prototype.setStencilZFail=function(e,t){var r=e*X.size+X.bstencil,n=Cr(this._u32view[r],t);this._u32view[r]=n,r=e*X.size+X.fstencil,this._u32view[r]=n},t.prototype.getStencilWriteMask=function(e){return Nr(this._u32view[e*X.size+X.fstencil])},t.prototype.setStencilWriteMask=function(e,t){var r=e*X.size+X.bstencil,n=Ir(this._u32view[r],t);this._u32view[r]=n,r=e*X.size+X.fstencil,this._u32view[r]=n},t.prototype.getStencilReadMask=function(e){return _r(this._u32view[e*X.size+X.fstencil])},t.prototype.setStencilReadMask=function(e,t){var r=e*X.size+X.bstencil,n=hr(this._u32view[r],t);this._u32view[r]=n,r=e*X.size+X.fstencil,this._u32view[r]=n},t.prototype.getStencilRef=function(e){return yr(this._u32view[e*X.size+X.fstencil])},t.prototype.setStencilRef=function(e,t){var r=e*X.size+X.bstencil,n=vr(this._u32view[r],t);this._u32view[r]=n,r=e*X.size+X.fstencil,this._u32view[r]=n},t.prototype.getUseMaterialStates=function(e){return!!(1&this._u32view[e*X.size+X.useMaterialStates])},t.prototype.setUseMaterialStates=function(e,t){this._u32view[e*X.size+X.useMaterialStates]=t?4294967295:0},t.prototype._getUseMaterialStateMask=function(e,t){return function(e,t){return!!(e&1<<t)}(this._u32view[e*X.size+X.useMaterialStates],t)},t.prototype._setUseMaterialStateMask=function(e,t,r){this._u32view[e*X.size+X.useMaterialStates]=function(e,t,r){return r?e|t:e&~t}(this._u32view[e*X.size+X.useMaterialStates],t,r)},t.prototype.getUseMaterialStateBlendOn=function(e){return this._getUseMaterialStateMask(e,1)},t.prototype.setUseMaterialStateBlendOn=function(e,t){return this._setUseMaterialStateMask(e,1,t)},t.prototype.getUseMaterialStateBlendSrcRGB=function(e){return this._getUseMaterialStateMask(e,2)},t.prototype.setUseMaterialStateBlendSrcRGB=function(e,t){return this._setUseMaterialStateMask(e,2,t)},t.prototype.getUseMaterialStateBlendSrcAlpha=function(e){return this._getUseMaterialStateMask(e,3)},t.prototype.setUseMaterialStateBlendSrcAlpha=function(e,t){return this._setUseMaterialStateMask(e,3,t)},t.prototype.getUseMaterialStateBlendDstRGB=function(e){return this._getUseMaterialStateMask(e,4)},t.prototype.setUseMaterialStateBlendDstRGB=function(e,t){return this._setUseMaterialStateMask(e,4,t)},t.prototype.getUseMaterialStateBlendDstAlpha=function(e){return this._getUseMaterialStateMask(e,5)},t.prototype.setUseMaterialStateBlendDstAlpha=function(e,t){return this._setUseMaterialStateMask(e,5,t)},t.prototype.getUseMaterialStateBlendFunc=function(e){return this._getUseMaterialStateMask(e,6)},t.prototype.setUseMaterialStateBlendFunc=function(e,t){return this._setUseMaterialStateMask(e,6,t)},t.prototype.getUseMaterialStateDepthTestOn=function(e){return this._getUseMaterialStateMask(e,7)},t.prototype.setUseMaterialStateDepthTestOn=function(e,t){return this._setUseMaterialStateMask(e,7,t)},t.prototype.getUseMaterialStateDepthTestComp=function(e){return this._getUseMaterialStateMask(e,8)},t.prototype.setUseMaterialStateDepthTestComp=function(e,t){return this._setUseMaterialStateMask(e,8,t)},t.prototype.getUseMaterialStateDepthWrite=function(e){return this._getUseMaterialStateMask(e,9)},t.prototype.setUseMaterialStateDepthWrite=function(e,t){return this._setUseMaterialStateMask(e,9,t)},t.prototype.getUseMaterialStateCullOn=function(e){return this._getUseMaterialStateMask(e,10)},t.prototype.setUseMaterialStateCullOn=function(e,t){return this._setUseMaterialStateMask(e,10,t)},t.prototype.getUseMaterialStateCullFace=function(e){return this._getUseMaterialStateMask(e,11)},t.prototype.setUseMaterialStateCullFace=function(e,t){return this._setUseMaterialStateMask(e,11,t)},t.prototype.getUseMaterialStatePrimitiveType=function(e){return this._getUseMaterialStateMask(e,12)},t.prototype.setUseMaterialStatePrimitiveType=function(e,t){return this._setUseMaterialStateMask(e,12,t)},t.prototype.getUseMaterialStateStencilTestOn=function(e){return this._getUseMaterialStateMask(e,13)},t.prototype.setUseMaterialStateStencilTestOn=function(e,t){return this._setUseMaterialStateMask(e,13,t)},t.prototype.getUseMaterialStateStencilTestComp=function(e){return this._getUseMaterialStateMask(e,14)},t.prototype.setUseMaterialStateStencilTestComp=function(e,t){return this._setUseMaterialStateMask(e,14,t)},t.prototype.getUseMaterialStateStencilTestPass=function(e){return this._getUseMaterialStateMask(e,15)},t.prototype.setUseMaterialStateStencilTestPass=function(e,t){return this._setUseMaterialStateMask(e,15,t)},t.prototype.getUseMaterialStateStencilTestFail=function(e){return this._getUseMaterialStateMask(e,16)},t.prototype.setUseMaterialStateStencilTestFail=function(e,t){return this._setUseMaterialStateMask(e,16,t)},t.prototype.getUseMaterialStateStencilTestZFail=function(e){return this._getUseMaterialStateMask(e,17)},t.prototype.setUseMaterialStateStencilTestZFail=function(e,t){return this._setUseMaterialStateMask(e,17,t)},t.prototype.showDebugInfo=function(){for(var e="",t=0;t<this._passCount;t+=1)e+="Pass: "+t+":\nPrimitiveType("+a.EPrimitiveType[this.getPrimitiveType(t)]+"),\nBlendOn("+this.getBlendOn(t)+"), BlendSrc("+a.EBlendFactor[this.getBlendSrcRGB(t)]+","+a.EBlendFactor[this.getBlendSrcAlpha(t)]+"), BlendDst("+a.EBlendFactor[this.getBlendDstRGB(t)]+","+a.EBlendFactor[this.getBlendDstAlpha(t)]+"), BlendFunc("+a.EBlendEquation[this.getBlendFunc(t)]+"),\nDepthTestOn("+this.getDepthTestOn(t)+"), DepthTestComp("+a.ECompareFunc[this.getDepthTestComp(t)]+"), DepthWrite("+this.getDepthWrite(t)+"),\nCullOn("+this.getCullOn(t)+"), CullFace("+a.ECullMode[this.getCullFace(t)]+"),\nStencilTestOn("+this.getStencilTestOn(t)+"), StencilComp("+a.ECompareFunc[this.getStencilComp(t)]+"), StencilPass("+a.EStencilOp[this.getStencilPass(t)]+"), StencilFail("+a.EStencilOp[this.getStencilFail(t)]+"), StencilZFail("+a.EStencilOp[this.getStencilZFail(t)]+"),\nStencilWriteMask("+this.getStencilWriteMask(t)+"), StencilReadMask("+this.getStencilReadMask(t)+"), StencilRef("+this.getStencilRef(t)+")\n      ";return e},t.OFFSETS=X,t}(Ve),Wr=Pe.worker,zr=function(e){function t(t,r,n){var o=e.call(this)||this;return o._createNativeMat(t,r,n),o.renderQueue=2e3,o._macros=t,r&&(o.effect=r),n&&(o.uniforms=n),o}return Z(t,e),Object.defineProperty(t.prototype,"effect",{get:function(){return this._effect},set:function(e){this._u32view[K.effect]=e.id,this._effect=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uniforms",{get:function(){return this._uniforms},set:function(e){this._u32view[K.uniformBlock]=e.id,this._uniforms=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderQueue",{get:function(){return this._u32view[K.renderQueue]},set:function(e){this._u32view[K.renderQueue]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useInstance",{get:function(){return!!this._u32view[K.useInstance]},set:function(e){this._u32view[K.useInstance]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendOn",{get:function(){return qt(this._u32view[K.colorDepth])},set:function(e){var t=K.colorDepth;this._u32view[t]=$t(this._u32view[t],e),this._u32view[K.colorDepthMask]|=Kt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcRGB",{get:function(){return tr(this._u32view[K.colorDepth])},set:function(e){var t=K.colorDepth;this._u32view[t]=Zt(this._u32view[t],e),this._u32view[K.colorDepthMask]|=3840},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcRGBChanged",{get:function(){return!!(3840&this._u32view[K.colorDepthMask])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcAlpha",{get:function(){return nr(this._u32view[K.colorDepth])},set:function(e){var t=K.colorDepth;this._u32view[t]=Qt(this._u32view[t],e),this._u32view[K.colorDepthMask]|=983040},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrc",{set:function(e){this.blendSrcRGB=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstRGB",{get:function(){return rr(this._u32view[K.colorDepth])},set:function(e){var t=K.colorDepth;this._u32view[t]=Jt(this._u32view[t],e),this._u32view[K.colorDepthMask]|=61440},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstRGBChanged",{get:function(){return!!(61440&this._u32view[K.colorDepthMask])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstAlpha",{get:function(){return or(this._u32view[K.colorDepth])},set:function(e){var t=K.colorDepth;this._u32view[t]=er(this._u32view[t],e),this._u32view[K.colorDepthMask]|=15728640},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDst",{set:function(e){this.blendDstRGB=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendFunc",{get:function(){return cr(this._u32view[K.colorDepth])},set:function(e){var t=K.colorDepth;this._u32view[t]=ar(this._u32view[t],e),this._u32view[t]=sr(this._u32view[t],e),this._u32view[K.colorDepthMask]|=ir},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTestOn",{get:function(){return fr(this._u32view[K.colorDepth])},set:function(e){var t=K.colorDepth;this._u32view[t]=lr(this._u32view[t],e?a.ECompareFunc.LEQUAL:0),this._u32view[K.colorDepthMask]|=ur},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTestComp",{get:function(){return pr(this._u32view[K.colorDepth])},set:function(e){var t=K.colorDepth;this._u32view[t]=lr(this._u32view[t],e),this._u32view[K.colorDepthMask]|=ur},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthWrite",{get:function(){return Xt(this._u32view[K.colorDepth])},set:function(e){var t=K.colorDepth;this._u32view[t]=Ht(this._u32view[t],e),this._u32view[K.colorDepthMask]|=zt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullFace",{get:function(){return Fr(this._u32view[K.state])},set:function(e){var t=K.state;this._u32view[t]=Lr(this._u32view[t],e),this._u32view[K.stateMask]|=Dr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullOn",{get:function(){return kr(this._u32view[K.state])},set:function(e){var t=K.state;this._u32view[t]=Lr(this._u32view[t],e?a.ECullMode.BACK:a.ECullMode.NONE),this._u32view[K.stateMask]|=Dr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"primitiveType",{get:function(){return Ur(this._u32view[K.state])},set:function(e){var t=K.state;this._u32view[t]=jr(this._u32view[t],e),this._u32view[K.stateMask]|=Br},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilTestOn",{get:function(){return wr(this._u32view[K.fstencil])},set:function(e){var t=K.bstencil,r=br(this._u32view[t],e?a.ECompareFunc.LEQUAL:0);this._u32view[t]=r,t=K.fstencil,this._u32view[t]=r,this._u32view[K.bstencilMask]|=gr,this._u32view[K.fstencilMask]|=gr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilComp",{get:function(){return xr(this._u32view[K.fstencil])},set:function(e){var t=K.bstencil,r=br(this._u32view[t],e);this._u32view[t]=r,t=K.fstencil,this._u32view[t]=r,this._u32view[K.bstencilMask]|=gr,this._u32view[K.fstencilMask]|=gr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilPass",{get:function(){return Rr(this._u32view[K.fstencil])},set:function(e){var t=K.bstencil,r=Ar(this._u32view[t],e);this._u32view[t]=r,t=K.fstencil,this._u32view[t]=r,this._u32view[K.bstencilMask]|=4026531840,this._u32view[K.fstencilMask]|=4026531840},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilFail",{get:function(){return Or(this._u32view[K.fstencil])},set:function(e){var t=K.bstencil,r=Tr(this._u32view[t],e);this._u32view[t]=r,t=K.fstencil,this._u32view[t]=r,this._u32view[K.bstencilMask]|=15728640,this._u32view[K.fstencilMask]|=15728640},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilZFail",{get:function(){return Mr(this._u32view[K.fstencil])},set:function(e){var t=K.bstencil,r=Cr(this._u32view[t],e);this._u32view[t]=r,t=K.fstencil,this._u32view[t]=r,this._u32view[K.bstencilMask]|=251658240,this._u32view[K.fstencilMask]|=251658240},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilWriteMask",{get:function(){return Nr(this._u32view[K.state])},set:function(e){var t=K.state,r=Ir(this._u32view[t],e);this._u32view[t]=r,this._u32view[K.stateMask]|=Pr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilReadMask",{get:function(){return _r(this._u32view[K.fstencil])},set:function(e){var t=K.bstencil,r=hr(this._u32view[t],e);this._u32view[t]=r,t=K.fstencil,this._u32view[t]=r,this._u32view[K.bstencilMask]|=dr,this._u32view[K.fstencilMask]|=dr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilRef",{get:function(){return yr(this._u32view[K.fstencil])},set:function(e){var t=K.bstencil,r=vr(this._u32view[t],e);this._u32view[t]=r,t=K.fstencil,this._u32view[t]=r,this._u32view[K.bstencilMask]|=mr,this._u32view[K.fstencilMask]|=mr},enumerable:!1,configurable:!0}),t.prototype._setMask=function(e,t,r){this._u32view[e]=r?this._u32view[e]|t:this._u32view[e]&~t},t.prototype._getMask=function(e,t){return!!(this._u32view[e]&t)},Object.defineProperty(t.prototype,"blendOnMask",{get:function(){return this._getMask(K.colorDepthMask,Kt)},set:function(e){this._setMask(K.colorDepthMask,Kt,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcRGBMask",{get:function(){return this._getMask(K.colorDepthMask,3840)},set:function(e){this._setMask(K.colorDepthMask,3840,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcAlphaMask",{get:function(){return this._getMask(K.colorDepthMask,983040)},set:function(e){this._setMask(K.colorDepthMask,983040,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcMask",{set:function(e){this.blendSrcRGBMask=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstRGBMask",{get:function(){return this._getMask(K.colorDepthMask,61440)},set:function(e){this._setMask(K.colorDepthMask,61440,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstAlphaMask",{get:function(){return this._getMask(K.colorDepthMask,15728640)},set:function(e){this._setMask(K.colorDepthMask,15728640,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstMask",{set:function(e){this.blendDstRGBMask=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendFuncMask",{get:function(){return this._getMask(K.colorDepthMask,ir)},set:function(e){this._setMask(K.colorDepthMask,ir,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTestOnMask",{get:function(){return this._getMask(K.colorDepthMask,ur)},set:function(e){this._setMask(K.colorDepthMask,ur,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTestCompMask",{get:function(){return this._getMask(K.colorDepthMask,ur)},set:function(e){this._setMask(K.colorDepthMask,ur,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthWriteMask",{get:function(){return this._getMask(K.colorDepthMask,zt)},set:function(e){this._setMask(K.colorDepthMask,zt,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullFaceMask",{get:function(){return this._getMask(K.stateMask,Dr)},set:function(e){this._setMask(K.stateMask,Dr,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullOnMask",{get:function(){return this._getMask(K.stateMask,Dr)},set:function(e){this._setMask(K.stateMask,Dr,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"primitiveTypeMask",{get:function(){return this._getMask(K.stateMask,Br)},set:function(e){this._setMask(K.stateMask,Br,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilTestOnMask",{get:function(){return this._getMask(K.bstencilMask,gr)},set:function(e){this._setMask(K.bstencilMask,gr,e),this._setMask(K.fstencilMask,gr,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilCompMask",{get:function(){return this._getMask(K.bstencilMask,gr)},set:function(e){this._setMask(K.bstencilMask,gr,e),this._setMask(K.fstencilMask,gr,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilPassMask",{get:function(){return this._getMask(K.bstencilMask,4026531840)},set:function(e){this._setMask(K.bstencilMask,4026531840,e),this._setMask(K.fstencilMask,4026531840,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilFailMask",{get:function(){return this._getMask(K.bstencilMask,15728640)},set:function(e){this._setMask(K.bstencilMask,15728640,e),this._setMask(K.fstencilMask,15728640,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilZFailMask",{get:function(){return this._getMask(K.bstencilMask,251658240)},set:function(e){this._setMask(K.bstencilMask,251658240,e),this._setMask(K.fstencilMask,251658240,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilWriteMaskMask",{get:function(){return this._getMask(K.stateMask,Pr)},set:function(e){this._setMask(K.stateMask,Pr,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilReadMaskMask",{get:function(){return this._getMask(K.bstencilMask,dr)},set:function(e){this._setMask(K.bstencilMask,dr,e),this._setMask(K.fstencilMask,dr,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilRefMask",{get:function(){return this._getMask(K.bstencilMask,mr)},set:function(e){this._setMask(K.bstencilMask,mr,e),this._setMask(K.fstencilMask,mr,e)},enumerable:!1,configurable:!0}),t.prototype._createNativeMat=function(e,t,r){var n=Wr.createMaterial(e,r);n.id<0||!n.data||(this._handle=n,this._init(n),this._initU32View())},t.prototype.changeMacros=function(e){this._macros=this._macros||{},Object.assign(this._macros,e),Wr.changeMaterialMacros(this.__handle,this._macros,!0)},t.prototype.getMacro=function(e){var t;return null===(t=this._macros)||void 0===t?void 0:t[e]},t.prototype.clone=function(e){var r=new t(this._macros,this._effect);return r._f32view.set(this._f32view),r.uniforms=e||this._uniforms.clone(),r},t.prototype.showDebugInfo=function(){var e="";return e+="RenderQueue("+this.renderQueue+"), PrimitiveType("+a.EPrimitiveType[this.primitiveType]+"),\nOverwrite("+this._u32view[K.fstencilMask].toString(16)+", "+this._u32view[K.bstencilMask].toString(16)+", "+this._u32view[K.blendRGBAMask].toString(16)+", "+this._u32view[K.colorDepthMask].toString(16)+", "+this._u32view[K.stateMask].toString(16)+"),\nBlendOn("+this.blendOn+"), BlendSrc("+a.EBlendFactor[this.blendSrcRGB]+","+a.EBlendFactor[this.blendSrcAlpha]+"), BlendDst("+a.EBlendFactor[this.blendDstRGB]+","+a.EBlendFactor[this.blendDstAlpha]+"), BlendFunc("+a.EBlendEquation[this.blendFunc]+"),\nDepthTestOn("+this.depthTestOn+"), DepthTestComp("+a.ECompareFunc[this.depthTestComp]+"), DepthWrite("+this.depthWrite+"),\nCullOn("+this.cullOn+"), CullFace("+a.ECullMode[this.cullFace]+"),\nStencilTestOn("+this.stencilTestOn+"), StencilComp("+a.ECompareFunc[this.stencilComp]+"), StencilComp("+a.EStencilOp[this.stencilPass]+"), StencilFail("+a.EStencilOp[this.stencilFail]+"), StencilZFail("+a.EStencilOp[this.stencilZFail]+"),\nStencilWriteMask("+this.stencilWriteMask+"), StencilReadMask("+this.stencilReadMask+"), StencilRef("+this.stencilRef+")\n      "},t.OFFSETS=K,t}(Ve),Hr=Pe.worker,Xr=function(e){function t(t){var r=e.call(this)||this,n=t;return n.colors.forEach((function(e,t){e.texture=e.texture.__handle})),n.depth.texture=n.depth.texture.__handle,t.stencil?n.stencil.texture=n.stencil.texture.__handle:n.stencil={texture:{id:0}},r._handle=Hr.createRenderPass(n),r}return Z(t,e),t.SCREEN_RENDER_PASS={id:0,__handle:{id:0}},t}(Fe),Kr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.setBoneInverseMatrix=function(e){var t=new Float32Array(e.length);t.set(e),this._createNativeModel(a.EDataModelType.SkeletonBoneInverse,t.buffer)},t}(gt),$r=Pe.worker,qr=function(e){function t(t){var r=e.call(this)||this,n=t.canvas;n?(r._width=n.width,r._height=n.height):(r._width=t.width,r._height=t.height),r._type=t.type||a.ETextureType.D2,r._slice=t.slices||0,r._mips=t.mips||0,r._pixelFormat=t.pixelFormat||a.ETextureFormat.RGBA8,Math.log2(r.width)%1==0&&Math.log2(r.height)%1==0||r.fixNonPOT(t),r._flags=r._buildFlags(t);var o=n?$r.createAutoUpdateTextureFromCanvas(n):$r.createTexture(r._type,r._width,r._height,r._slice,r._mips,r._pixelFormat,r._flags,t.source,t.offsets);return r._handle=o||{id:0},r}return Z(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slice",{get:function(){return this._slice},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mips",{get:function(){return this._mips},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelFormat",{get:function(){return this._pixelFormat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapU",{get:function(){return Le.isWrongWrapMapping?Wt(this._flags):Gt(this._flags)},set:function(e){$r.updateTextureFlags(this.__handle,this._flags=Le.isWrongWrapMapping?Dt(this._flags,e):It(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapV",{get:function(){return Le.isWrongWrapMapping?Gt(this._flags):Vt(this._flags)},set:function(e){$r.updateTextureFlags(this.__handle,this._flags=Le.isWrongWrapMapping?It(this._flags,e):Nt(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapW",{get:function(){return Le.isWrongWrapMapping?Vt(this._flags):Wt(this._flags)},set:function(e){$r.updateTextureFlags(this.__handle,this._flags=Le.isWrongWrapMapping?Nt(this._flags,e):Dt(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"magFilter",{get:function(){return(12288&this._flags)>>12},set:function(e){$r.updateTextureFlags(this.__handle,this._flags=Ft(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFilter",{get:function(){return(3584&this._flags)>>9},set:function(e){$r.updateTextureFlags(this.__handle,this._flags=Lt(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anisoLevel",{get:function(){return 1+((this._flags&Pt)>>20)},set:function(e){$r.updateTextureFlags(this.__handle,this._flags=jt(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sampleCount",{get:function(){return(this._flags&Rt)>>17},set:function(e){$r.updateTextureFlags(this.__handle,this._flags=Bt(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generateMipmaps",{get:function(){return!!(this._flags&Ot)},set:function(e){$r.updateTextureFlags(this.__handle,this._flags=kt(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRenderTarget",{get:function(){return!!(this._flags&Mt)},set:function(e){$r.updateTextureFlags(this.__handle,this._flags=Ut(this._flags,e))},enumerable:!1,configurable:!0}),t.prototype.update=function(e){var t=e.level||0;$r.updateTexture(this.__handle,t,e.slice||0,e.xoffset||0,e.yoffset||0,e.zoffset||0,e.width||this.width>>t||1,e.height||this.height>>t||1,e.buffer)},t.prototype._buildFlags=function(e){var t;return this._flags=0,Le.isWrongWrapMapping?(e.wrapU&&(this._flags=Dt(this._flags,e.wrapU)),e.wrapV&&(this._flags=It(this._flags,e.wrapV)),e.wrapW&&(this._flags=Nt(this._flags,e.wrapW))):(e.wrapU&&(this._flags=It(this._flags,e.wrapU)),e.wrapV&&(this._flags=Nt(this._flags,e.wrapV)),e.wrapW&&(this._flags=Dt(this._flags,e.wrapW))),e.magFilter&&(this._flags=Ft(this._flags,e.magFilter)),e.minFilter&&(this._flags=Lt(this._flags,e.minFilter)),e.anisoLevel&&(this._flags=jt(this._flags,e.anisoLevel)),e.sampleCount&&(this._flags=Bt(this._flags,e.sampleCount)),e.generateMipmaps&&(this._flags=kt(this._flags,e.generateMipmaps)),e.isRenderTarget&&(this._flags=Ut(this._flags,e.isRenderTarget)),e.isWriteOnly&&(this._flags=(t=this._flags,e.isWriteOnly?65536|t:-65537&t)),this._flags},t.prototype.fixNonPOT=function(e){e.wrapU=a.EWrapMode.CLAMP_TO_EDGE,e.wrapV=a.EWrapMode.CLAMP_TO_EDGE,e.wrapW=a.EWrapMode.CLAMP_TO_EDGE,e.minFilter=Yr.get(e.minFilter),e.magFilter=Yr.get(e.magFilter),e.anisoLevel=0,e.mips=0,e.generateMipmaps=!1},t.prototype.showDebugInfo=function(){var e="";return e+="type("+a.ETextureType[this.type]+"), format("+a.ETextureFormat[this.pixelFormat]+"),\nwidth("+this.width+"), height("+this.height+"), slice("+this.slice+"), mips("+this.mips+"),\nwrapU("+a.EWrapMode[this.wrapU]+"), wrapV("+a.EWrapMode[this.wrapV]+"), wrapW("+a.EWrapMode[this.wrapW]+"),\nmagFilter("+a.EFilterMode[this.magFilter]+"), minFilter("+a.EFilterMode[this.minFilter]+"),\nanisoLevel("+this.anisoLevel+"), sampleCount("+this.sampleCount+"), generateMipmaps("+this.generateMipmaps+")\n    "},t}(Fe),Yr=new Map([[a.EFilterMode.LINEAR,a.EFilterMode.LINEAR],[a.EFilterMode.LINEAR_MIPMAP_LINEAR,a.EFilterMode.LINEAR],[a.EFilterMode.LINEAR_MIPMAP_NEAREST,a.EFilterMode.LINEAR],[a.EFilterMode.NEAREST,a.EFilterMode.NEAREST],[a.EFilterMode.NEAREST_MIPMAP_LINEAR,a.EFilterMode.NEAREST],[a.EFilterMode.NEAREST_MIPMAP_NEAREST,a.EFilterMode.NEAREST]]),Zr=Pe.worker,Jr=function(e){function t(t){var r=e.call(this)||this;return r._handle=r._createNativeObj(t),r._handle.data&&(r._f32View=new Float32Array(r._handle.data),r._u32View=new Uint32Array(r._handle.data)),r._descriptor=t,r}return Z(t,e),t.CREATE_FAKE=function(e){return new Qr(e)},Object.defineProperty(t.prototype,"_dataView",{get:function(){return this._f32View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"descriptor",{get:function(){return this._descriptor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},enumerable:!1,configurable:!0}),t.prototype._createNativeObj=function(e){return Zr.createUniformBlock(e.__handle)||{id:0}},t.prototype.hasKey=function(e){return this._descriptor.hasKey(e)},t.prototype.setUniform=function(e,t){var r=this._descriptor.layout[e];return!!r&&(r[0]===a.EUniformType.SAMPLER&&(t instanceof qr?(this._textures=this._textures||{},this._textures[e]=t,t=t.id):this._textures&&(this._textures[e]=void 0)),this._descriptor.setUniform(e,t,this._f32View,this._u32View),!0)},t.prototype.getUniform=function(e){return this._descriptor.getUniform(e,this._f32View,this._u32View)},t.prototype.getTexture=function(e){return this._textures[e]},t.prototype._getFloatOffset=function(e){return this._descriptor._getFloatOffset(e)},t.prototype.setAllData=function(e){this._f32View.set(e,0)},t.prototype.clone=function(){var e=new t(this._descriptor);return e._f32View?(this._textures&&(e._textures=Object.assign({},this._textures)),e._f32View.set(this._f32View),e):e},t.prototype.copy=function(e){if(this._descriptor.id===e._descriptor.id)return this._f32View.set(e._f32View),void(this._textures=e.textures);var t=e.descriptor.layout;for(var r in t)if(this.hasKey(r)){var n=e.getUniform(r);this.setUniform(r,n),e._textures&&e._textures[r]&&(this._textures=this._textures||{},this._textures[r]=e._textures[r])}},t.prototype.showDebugInfo=function(){var e=this,t="";return Object.keys(this._descriptor.layout).forEach((function(r){var n=e._descriptor.getUniform(r,e._f32View,e._u32View);t+=r+": ["+("number"==typeof n?[n]:n).join(",")+"]\n"})),t},t}(Fe),Qr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Z(t,e),t.prototype._createNativeObj=function(e){return{id:0,data:new ArrayBuffer(4*e.size)}},t}(Jr),en=Pe.worker,tn=function(e){function t(t){var r=e.call(this)||this;r._layout={};var n=0;return t.uniforms.forEach((function(e){var t=e.type;Le.neverTranspose||e.type===a.EUniformType.MAT4&&(e.type=a.EUniformType.FLOAT4,e.num=4*(e.num||1));var o=void 0!==e.num?e.num:1,i=r._getLength(e.type),s=n+i*o;r._layout[e.name]=[e.type,n,o,i,t,!!e.needTranspose],n=s})),r._size=n,r._handle=en.createUniformBlockDescriptor(t)||{id:0},r}return Z(t,e),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype._getLength=function(e){var t=0;switch(e){case a.EUniformType.FLOAT:t=1;break;case a.EUniformType.FLOAT2:t=2;break;case a.EUniformType.FLOAT3:t=3;break;case a.EUniformType.FLOAT4:t=4;case a.EUniformType.MAT2:t=4;break;case a.EUniformType.MAT3:t=9;break;case a.EUniformType.MAT4:t=16;break;case a.EUniformType.SAMPLER:t=1}return t},t.prototype.hasKey=function(e){return void 0!==this._layout[e]},t.prototype.setUniform=function(e,t,r,n){var o=this._layout[e];if(o){var i=o[0],s=o[1];switch(i){case a.EUniformType.FLOAT:case a.EUniformType.FLOAT2:case a.EUniformType.FLOAT3:case a.EUniformType.FLOAT4:case a.EUniformType.MAT2:case a.EUniformType.MAT3:case a.EUniformType.MAT4:this._setFloatArray(s,t,r);break;case a.EUniformType.SAMPLER:this._setTexture(s,t,n)}}},t.prototype._setFloatArray=function(e,t,r){r.set(t,e)},t.prototype._setTexture=function(e,t,r){r[e]=t},t.prototype.getUniform=function(e,t,r){var n=this._layout[e];if(!n)return null;var o=n[0],i=n[1],s=n[2],c=n[3];switch(o){case a.EUniformType.FLOAT:case a.EUniformType.FLOAT2:case a.EUniformType.FLOAT3:case a.EUniformType.FLOAT4:case a.EUniformType.MAT2:case a.EUniformType.MAT3:case a.EUniformType.MAT4:return new Float32Array(t.buffer,4*i,s*c);case a.EUniformType.SAMPLER:return r[i]}},t.prototype._getFloatOffset=function(e){var t=this._layout[e];return t?t[1]:-1},t}(Fe),rn=Pe.worker,nn=function(e){function t(t,r){void 0===r&&(r=!1);var n=e.call(this)||this;return n._handle=rn.createIndexBuffer(t,r)||{id:0},n._byteSize=t.byteLength,n}return Z(t,e),Object.defineProperty(t.prototype,"byteSize",{get:function(){return this._byteSize},enumerable:!1,configurable:!0}),t.prototype.update=function(e,t){rn.updateIndexBuffer(this.__handle,e,t)},t}(Fe),on=Pe.worker,an=function(e){function t(t){var r=e.call(this)||this;return r._handle=on.createIndexData(t),r}return Z(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._handle.data},enumerable:!1,configurable:!0}),t}(Fe),sn=Pe.worker,cn=function(e){function t(t,r){var n=e.call(this)||this;return n._handle=sn.createVertexBuffer(t,r.__handle)||{id:0},n._layout=r,n._byteSize=t.byteLength,n}return Z(t,e),Object.defineProperty(t.prototype,"byteSize",{get:function(){return this._byteSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),t.prototype.update=function(e,t){sn.updateVertexBuffer(this.__handle,e,t)},t}(Fe),un=Pe.worker,ln=function(e){function t(t,r,n){var o=e.call(this)||this;return o._handle=un.createVertexData(t.__handle,r,n.__handle),o._layout=t,o}return Z(t,e),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._handle.data},enumerable:!1,configurable:!0}),t}(Fe),fn=Pe.worker,pn=function(e){function t(t){var r=e.call(this)||this;return r._attributes={},r._usages={},r._options=t,t.attributes.forEach((function(e){r._attributes[e.name]=e,r._usages[e.usage]=e})),r._handle=fn.createVertexLayout(t),r}return Z(t,e),Object.defineProperty(t.prototype,"stride",{get:function(){return this._options.stride},enumerable:!1,configurable:!0}),t.prototype.getConfigByName=function(e){return this._attributes[e]},t.prototype.getConfigByUsage=function(e){return this._usages[e]},t}(Fe),dn=Pe.worker,hn=function(e){function t(t){var r=e.call(this)||this;return r._options=t,r._handle=dn.createVertexDataDescriptor(t),r}return Z(t,e),t}(Fe),_n=Pe.worker,mn=function(e){function t(t){var r=e.call(this)||this;return r._handle=_n.createView(t),r}return Z(t,e),t}(Fe),vn=Pe.worker,yn=Pe.IS_VALID,gn=Pe.GET_MAIN_CANVAS,bn=Pe.Image,wn=Pe.Phys3D,xn=vn.downloader,Sn=vn.createWeakRef,En=vn.createWeakRefSentry,Tn=vn.createNativeUUMap,Cn=vn.createNativeSUMap,An=vn.createNativeULUMap,On=vn.loadTTFFont,Mn=vn.getGlyphInfo,Rn=vn.refreshNodesWorldTransform,Pn=vn.setGlobalPhysicSystem,In=vn.bindRigidBodyToNode,Nn=vn.bindCCTToNode,Dn=vn.unbindRigidBody,Ln=vn.unbindCCT,Fn=vn.decodeBase64,kn=vn.eventBridge,Bn={bindEntityToBone:kn.bindEntityToBone.bind(kn),unbindEntityFromBone:kn.unbindEntityFromBone.bind(kn),bindEntitiesToBones:kn.bindEntitiesToBones.bind(kn),unbindEntitiesFromBones:kn.unbindEntitiesFromBones.bind(kn)},jn=void 0,Un=void 0!==(jn=void 0!==window&&window.top?window.top.NativeGlobal:"undefined"!=typeof NativeGlobal?NativeGlobal:null==wx?void 0:wx.NativeGlobal)&&jn.Puppet;a.AnimationClipBinding=xt,a.AnimationClipModel=bt,a.AnimatorComponent=ze,a.AnimatorControllerModel=Et,a.AnimatorControllerStateModel=Ct,a.CAMERA_OFFSETS=W,a.CULLING_OFFSETS=V,a.CameraComponent=Xe,a.CullingComponent=rt,a.DYNAMIC_BONES_OFFSETS=q,a.DataBuffer=At,a.DataModel=gt,a.Downloader=xn,a.DynamicBonesComponent=ut,a.EFFECT_OFFSETS=X,a.ENTITY2D_OFFSETS=j,a.ENTITY3D_EXT_OFFSETS=G,a.ENTITY3D_OFFSETS=U,a.Effect=Vr,a.Entity2D=pt,a.Entity3D=vt,a.GET_MAIN_CANVAS=gn,a.IS_VALID=yn,a.Image=bn,a.IndexBuffer=nn,a.IndexData=an,a.LIGHT_OFFSETS=z,a.LightCameraComponent=$e,a.MATERIAL_OFFSETS=K,a.MESH_OFFSETS=H,a.Material=zr,a.MeshRendererComponent=ot,a.POOL_SUB_ID_MASK=B,a.POOL_SUB_ID_SHIT=6,a.Phys3D=wn,a.Puppet=Un,a.RENDER_ENV_OFFSETS=k,a.RenderEnv=De,a.RenderPass=Xr,a.SKINNED_SKELETON_OFFSETS=$,a.ScalableList=je,a.SkeletonBoneInverseModel=Kr,a.SkinnedSkeletonComponent=st,a.Texture=qr,a.UniformBlock=Jr,a.UniformDescriptor=tn,a.VERSION="1.0.4",a.VertexBuffer=cn,a.VertexData=ln,a.VertexDataDescriptor=hn,a.VertexLayout=pn,a.View=mn,a.bindCCTToNode=Nn,a.bindRigidBodyToNode=In,a.composeRawBufferEntity2D=function(e,t,r){var n=new ArrayBuffer(4*j.size),o=new Float32Array(n);return o[j.rotation]=e,o[j.position]=t[0],o[j.position+1]=t[1],o[j.scale]=r[0],o[j.scale+1]=r[1],o},a.composeRawBufferEntity3D=function(e,t,r,n){var o=new ArrayBuffer(4*(U.size-16)),i=new Uint32Array(o),a=new Float32Array(o);return i[U.rotationType]=e?0:1,a.set(t,U.rotation),a.set(r,U.position),a.set(n,U.scale),a},a.composeRawBufferEntity3DWhole=function(e,t,r,n){var o=new ArrayBuffer(4*U.size),i=new Uint32Array(o),a=new Float32Array(o);return i[U.rotationType]=e?0:1,a.set(t,U.rotation),a.set(r,U.position),a.set(n,U.scale),a},a.createNativeSUMap=Cn,a.createNativeULUMap=An,a.createNativeUUMap=Tn,a.createWeakRef=Sn,a.createWeakRefSentry=En,a.crossContext=Ge,a.debugPrint=function(e){},a.decodeBase64=Fn,a.destroy=function(){!Le.isGoodPhysAndScalableList&&Be.clear(),vn.destroy()},a.eventBridge=Bn,a.getGlyphInfo=Mn,a.loadTTFFont=On,a.refreshNodesWorldTransform=Rn,a.renderEnv=Le,a.setGlobalPhysicSystem=Pn,a.setNodeName=function(e,t){},a.setRenderComponentName=function(e,t){},a.unbindCCT=Ln,a.unbindRigidBody=Dn,a.update=function(e){Ge.flush(),!Le.isGoodPhysAndScalableList&&Be.forEach((function(e){return e._checkResize()})),vn.update(e)},Object.defineProperty(a,"__esModule",{value:!0})},"object"==typeof f&&void 0!==l?u(f):"function"==typeof define&&define.amd?define(["exports"],u):u((c="undefined"!=typeof globalThis?globalThis:c||self).KanataClass={}),e.EVertexFormat=f.EVertexFormat,e.EVertexStep=f.EVertexStep,e.EIndexType=f.EIndexType,e.ETextureType=f.ETextureType,e.ETextureFormat=f.ETextureFormat,e.EWrapMode=f.EWrapMode,e.EFilterMode=f.EFilterMode,e.EUniformType=f.EUniformType,e.ECullMode=f.ECullMode,e.EFaceWinding=f.EFaceWinding,e.ECompareFunc=f.ECompareFunc,e.EStencilOp=f.EStencilOp,e.EBlendFactor=f.EBlendFactor,e.EBlendEquation=f.EBlendEquation,e.EColorMask=f.EColorMask,e.EPixelType=f.EPixelType,e.ELoadAction=f.ELoadAction,e.EDataModelType=f.EDataModelType,e.EMeshRenderType=f.EMeshRenderType,e.EPrimitiveType=f.EPrimitiveType,e.EShadowMode=f.EShadowMode,e.EShadowFitMode=f.EShadowFitMode,e.EVertexLayoutUsage=f.EVertexLayoutUsage,e.EVertexBatchOperator=f.EVertexBatchOperator,e.EAnimationBlendType=f.EAnimationBlendType,e.EUseDefaultAddedAction=f.EUseDefaultAddedAction,e.EUseDefaultRetainedAction=f.EUseDefaultRetainedAction,e.EUseDefaultRemovedAction=f.EUseDefaultRemovedAction,e.ESkinnedSkeletonFlag=f.ESkinnedSkeletonFlag,e.RENDER_ENV_OFFSETS=f.RENDER_ENV_OFFSETS,e.POOL_SUB_ID_MASK=f.POOL_SUB_ID_MASK,e.POOL_SUB_ID_SHIT=f.POOL_SUB_ID_SHIT,e.ENTITY2D_OFFSETS=f.ENTITY2D_OFFSETS,e.ENTITY3D_OFFSETS=f.ENTITY3D_OFFSETS,e.ENTITY3D_EXT_OFFSETS=f.ENTITY3D_EXT_OFFSETS,e.CULLING_OFFSETS=f.CULLING_OFFSETS,e.CAMERA_OFFSETS=f.CAMERA_OFFSETS,e.LIGHT_OFFSETS=f.LIGHT_OFFSETS,e.MESH_OFFSETS=f.MESH_OFFSETS,e.EFFECT_OFFSETS=f.EFFECT_OFFSETS,e.MATERIAL_OFFSETS=f.MATERIAL_OFFSETS,e.SKINNED_SKELETON_OFFSETS=f.SKINNED_SKELETON_OFFSETS,e.DYNAMIC_BONES_OFFSETS=f.DYNAMIC_BONES_OFFSETS,e.EEventType=f.EEventType,s.set(t,f),f},e.RELEASE_INSTANCE=e=>{var t=globalThis.KANATA_INSTANCES=globalThis.KANATA_INSTANCES||new Map;t.has(e)&&t.delete(e)}})),(()=>{var e={"./src/animation/Animation.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n=function(){function e(e,t){this._scene=e,this.onInit(t)}return Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!1,configurable:!0}),e.prototype.onInit=function(e){},e.prototype.onPlay=function(e,t,r){},e.prototype.onUpdate=function(e,t,r){},e.prototype.onPause=function(e){},e.prototype.onResume=function(e){},e.prototype.onStop=function(e){},e}()},"./src/animation/KeyframeAnimation.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{EKeyframeAnimationPropType:()=>o,Keyframe:()=>h,default:()=>_});var n,o,i=r("./src/animation/Animation.ts"),a=r("./src/assets/easeFunctions.ts"),s=r("./src/core/logger.ts"),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};!function(e){e[e.Default=0]="Default",e[e.Math=1]="Math",e[e.Uniform=2]="Uniform",e[e.ComponentData=3]="ComponentData"}(o||(o={}));var l={position:["transform","position"],scale:["transform","scale"],rotation:["transform","rotation"],material:["mesh","material","_uniforms"]};function f(e){return!!e.setArray}function p(e){return!!e.slice}function d(e){return!!e.setUniform}var h=function(){function e(e){var t,r=Object.keys(e).map((function(e){return parseInt(e,10)})).sort((function(e,t){return e-t}));this._times=r.map((function(e){return e/100})),this._seqInfos=[];for(var n={},o=0,i=0,a=r;i<a.length;i++){var s=e[a[i]];for(var c in s)if(void 0===n[c]){var f=c.split("."),d=l[f[0]];d&&f.splice.apply(f,u([0,1],d));var h=f.splice(0,1)[0],_=f.pop();this._seqInfos.push({prop:c,comp:h,path:f,key:_,value:void 0,values:[],times:[]}),n[c]=o,o+=1}}for(var m=0,v=this._seqInfos;m<v.length;m++){var y=v[m],g=(c=y.prop,y.values),b=y.times,w=null===(t=e[0])||void 0===t?void 0:t[c];if(void 0===w)for(var x=0,S=r;x<S.length;x++){if(w=e[C=S[x]][c])break}b.push(0),g.push(w),y.isArray=p(w),y.value=p(w)?w.slice():w,0===r[0]&&r.splice(0,1),o=0;for(var E=0,T=r;E<T.length;E++){var C,A=e[C=T[E]][c];A&&(b.push(C/100),g.push(A))}}}return Object.defineProperty(e.prototype,"times",{get:function(){return this._times},enumerable:!1,configurable:!0}),e.prototype.start=function(e){for(var t,r=this,n={},i=0,a=this._seqInfos;i<a.length;i++){var s=a[i],c=e.getComponent(s.comp);if(c){for(var u=c,l=0,p=s.path;l<p.length;l++){u=u[p[l]]}if(d(u))n[s.prop]=[u,o.Uniform];else{var h=u[s.key];if(void 0!==h){var _=f(h)?o.Math:void 0!==(null===(t=null==u?void 0:u.getData)||void 0===t?void 0:t.call(u,s.key))?o.ComponentData:o.Default;n[s.prop]=[u,_]}}}}return function(e){return r._update(n,e)}},e.prototype._update=function(e,t){for(var r=0,n=this._seqInfos;r<n.length;r++){var i=n[r],a=i.prop,s=i.key,c=i.times,u=i.values,l=i.value,f=e[a];if(f){for(var p=f[0],d=f[1],h=void 0,_=void 0,m=void 0,v=void 0,y=0;y<c.length-1;y+=1)if(h=c[y],_=c[y+1],h<=t&&t<=_){m=u[y],v=u[y+1];break}if(void 0!==m&&void 0!==v){var g=(t-h)/(_-h),b=i.isArray?this._lerpArray(m,v,g,l):this._lerp(m,v,g);switch(d){case o.Math:p[s].setArray(b);break;case o.Uniform:p.setUniform(s,b);break;case o.ComponentData:p.setDataOne(s,b);break;case o.Default:p[s]=b}}}}},e.prototype._lerp=function(e,t,r){return e*(1-r)+t*r},e.prototype._lerpArray=function(e,t,r,n){for(var o=1-r,i=0;i<e.length;i+=1)n[i]=e[i]*o+t[i]*r;return n},e}();const _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.onInit=function(e){var t=e.keyframe,r=e.animation;for(var n in this._keyframes={},this._clips={},this._playing={},t)this._keyframes[n]=new h(t[n]);for(var n in r){var o=r[n];this._keyframes[o.keyframe]?(o.loop=-1===o.loop?1/0:o.loop,this._clips[n]=o):s.default.warn("Keyframe "+o.keyframe+" is not existed, ignore...")}this.clipNames=Object.keys(this._clips)},t.prototype.onPlay=function(e,t,r){var n=this._clips[t];if(n){var o=r.ease||n.ease,i=n.easeParams||[],s=this._keyframes[n.keyframe],c=a.useParamsEaseFuncs[o]?a.useParamsEaseFuncs[o](s.times,i):a.noneParamsEaseFuncs[o],u=s.start(e);return this._playing[e._elId]=function(e,t){return u(c(t?1-e:e))},n}},t.prototype.onUpdate=function(e,t,r){this._playing[e._elId](t,r)},t.prototype.onPause=function(e){},t.prototype.onResume=function(e){},t.prototype.onStop=function(e){delete this._playing[e._elId]},t}(i.default)},"./src/animation/NativeAnimation.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{DefaultNativeAnimationFPS:()=>f,ENativeAnimationSimulatorType:()=>o,default:()=>p});var n,o,i=r("./src/ext.ts"),a=r("./src/animation/Animation.ts"),s=r("./src/components/Mesh.ts"),c=r("./src/components/Transform.ts"),u=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};!function(e){e[e.None=0]="None",e[e.Morph=1]="Morph"}(o||(o={}));var f=60;const p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.onInit=function(e){var t;this.animator=new((0,i.getKanata)(this.scene).AnimatorComponent),this.animator.bindAnimations([e.clip],[e.bindings]),this.frameCount=e.frameCount,this.clipNames=l([],e.names),this.simulators=null!==(t=e.simulators)&&void 0!==t?t:[]},t.prototype.onPlay=function(e,t,r){return this.animator.setClipParams(0,0,1),(0,i.getKanata)(this.scene).AnimatorComponent.UPDATE_ANIMATORS([this.animator],1),{duration:this.frameCount/f,loop:1/0}},t.prototype.onUpdate=function(e,t,r){this.animator.setClipParams(0,t*this.frameCount,1),(0,i.getKanata)(this.scene).AnimatorComponent.UPDATE_ANIMATORS([this.animator],1),this.simulateAnimations()},t.prototype.simulateAnimations=function(){for(var e=0;e<this.simulators.length;e++){var t=this.simulators[e];if(t.type===o.Morph){var r=t.target._children.map((function(e){return e.getComponent(s.default)})).filter((function(e){return!!e}));if(0===r.length)continue;for(var n=0;n<t.subElements.length;n++)for(var i=t.subElements[n].getComponent(c.default),a=0,u=r;a<u.length;a++){u[a].morphWeights.set(i.position.toArray(),9*n+0)}}}},t}(a.default)},"./src/assets/Atlas.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r("./src/math/matrix3.ts"),o=r("./src/math/vector4.ts");const i=function(){function e(e,t){this._scene=e,this.isAtlas=!0,this._AUTO_ID=0,this._area=0,this._needReBuild=!1,this._frames=t.frames,this._meta=t.meta,t.texture?this._texture=t.texture:(this._image=t.image,this._texture=e.createTexture({width:t.meta.size.w,height:t.meta.size.h,source:t.image?[t.image]:void 0}))}return e.CREATE_FROM_GRIDS=function(t,r,n){for(var o=r.width,i=r.height,a=r.rows,s=r.cols,c=r.space,u=~~(o/s)-(c=c||0),l=~~(i/a)-c,f={},p=0;p<a;p+=1)for(var d=0;d<s;d+=1){var h=d*(u+c),_=p*(l+c);f[y=""+p+d]={frame:{x:h,y:_,w:u,h:l},space:c}}var m=t.createTexture({width:o,height:i}),v=new e(t,{texture:m,frames:f,meta:{size:{w:o,h:i}}});if(n)for(p=0;p<a;p+=1)for(d=0;d<s;d+=1){var y=""+p+d,g=v.getFrame(y);n(m,{x:h=g.x,y:_=g.y,w:g.w,h:g.h,row:p,col:d},y)}return v},e.CREATE_FROM_TEXTURE=function(t,r,n){var o=n.cellWidth,i=n.cellHeight,a=r.width,s=r.height,c=n.space||0,u=n.framesPerLine,l=n.frameStart,f=n.frameCount;void 0===l&&(l=0),void 0===f&&(f=1/0);for(var p={},d=l;;){var h=(1===u?0:d%u)*(o+c),_=(1===u?d:~~(d/u))*(i+c);if(d>=f||_+i+c>=s)break;p[d]={frame:{x:h,y:_,w:o,h:i}},d+=1}return new e(t,{texture:r,frames:p,meta:{size:{w:a,h:s}}})},Object.defineProperty(e.prototype,"meta",{get:function(){return this._meta},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frames",{get:function(){return this._frames},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},enumerable:!1,configurable:!0}),e.prototype.getFrame=function(e){return this._frames[e].frame},e.prototype.getUVMatrix=function(e){var t=this._frames[e];if(!t)throw new Error("Frame "+e+" is not existed!");var r=t.uvMatrix,n=t.frame;return r||(t.uvMatrix=this._buildUVMatrix(n)),t.uvMatrix},e.prototype._buildUVMatrix=function(e){var t=this._meta.size,r=t.w,o=t.h,i=new n.default;return i.setArray([e.w/r,0,0,0,-e.h/o,0,e.x/r,(e.y+e.h)/o,1]),i},e.prototype.getUVST=function(e){var t=this._frames[e];if(!t)throw new Error("Frame "+e+" is not existed!");var r=t.uvST,n=t.frame;return r||(t.uvST=this._buildUVST(n)),t.uvST},e.prototype._buildUVST=function(e){var t=this._meta.size,r=t.w,n=t.h,i=new o.default;return i.setValue(e.w/r,e.h/n,e.x/r,e.y/n),i},e.prototype.updateFrame=function(e,t){if(!this._updatable)throw new Error("Atlas is not updatable !");var r=this.getFrame(e),n=r.x,o=r.y,i=r.w,a=r.h;t(this._texture,{x:n,y:o,w:i,h:a},e)},e}()},"./src/assets/Effect.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n,o,i=r("./src/core/DataValue.ts"),a=r("./src/ext.ts"),s=r("./src/loader/types.ts"),c=function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)};const u=function(){function e(e,t){var r,u=this;this._scene=e,this.description=t,this._isNoProperties=!1,this._isNoImages=!1,this._effect=void 0,this._uniformMacroTable={},!n&&(n={blendOn:!1,blendSrc:a.Kanata.EBlendFactor.ZERO,blendSrcAlpha:a.Kanata.EBlendFactor.ONE,blendDst:a.Kanata.EBlendFactor.ZERO,blendDstAlpha:a.Kanata.EBlendFactor.ONE_MINUS_SRC_ALPHA,blendFunc:a.Kanata.EBlendEquation.FUNC_ADD,cullOn:!1,cullFace:a.Kanata.ECullMode.NONE,depthWrite:!1,depthTestOn:!1,depthTestComp:0,stencilWriteMask:0,stencilTestOn:!1,stencilRef:0,stencilReadMask:0,stencilComp:0,stencilPass:a.Kanata.EStencilOp.ZERO,stencilFail:a.Kanata.EStencilOp.ZERO,stencilZFail:a.Kanata.EStencilOp.ZERO,primitiveType:a.Kanata.EPrimitiveType.TRIANGLES},o=c(c({},n),{blendOn:!0,blendSrc:a.Kanata.EBlendFactor.SRC_ALPHA,blendDst:a.Kanata.EBlendFactor.ONE_MINUS_SRC_ALPHA,blendFunc:a.Kanata.EBlendEquation.FUNC_ADD,cullOn:!0,cullFace:a.Kanata.ECullMode.BACK,depthWrite:!0,depthTestOn:!0,depthTestComp:a.Kanata.ECompareFunc.LEQUAL,stencilWriteMask:255,stencilRef:0,stencilReadMask:255,stencilComp:a.Kanata.ECompareFunc.ALWAYS,stencilPass:a.Kanata.EStencilOp.KEEP,stencilFail:a.Kanata.EStencilOp.KEEP,stencilZFail:a.Kanata.EStencilOp.KEEP,primitiveType:a.Kanata.EPrimitiveType.TRIANGLES}));var l=[];if(t.properties&&0!==t.properties.length)for(var f=0,p=t.properties;f<p.length;f++){var d=p[f];l.push({name:d.key,type:d.type,num:d.num}),d.macro&&(this._uniformMacroTable[d.key]=d.macro)}else this._isNoProperties=!0;if(t.images&&0!==t.images.length)for(var h=0;h<t.images.length;h++){var _=t.images[h],m=_.key,v=_.macro;l.push({name:m,type:a.Kanata.EUniformType.SAMPLER}),v&&(this._uniformMacroTable[m]=v)}else this._isNoImages=!0;if(this._shaderUniformBlockDesc=this._scene.createUniformBlockDesc({uniforms:l}),this._defaultUniforms=this._scene.createUniformBlock(this._shaderUniformBlockDesc),!this._isNoProperties)for(var y=0,g=t.properties;y<g.length;y++){m=(d=g[y]).key;this._defaultUniforms.setUniform(m,d.default)}if(t.images){var b=function(e){var r=t.images[e],n=(0,i.parseDataValue)("texture",r.default,void 0,w.scene);(null==n?void 0:n.state)===s.EAssetState.Loading?(w._loadingTextures=w._loadingTextures||{},w._loadingTextures[r.key]=n,n.promise.then((function(e){u._defaultUniforms.setUniform(r.key,(0,i.isTextureWrapper)(e.value)?e.value.texture:e.value)})).finally((function(){delete u._loadingTextures[r.key]}))):n&&w._defaultUniforms.setUniform(r.key,(0,i.isTextureWrapper)(n.value)?n.value.texture:n.value)},w=this;for(h=0;h<t.images.length;h++)b(h)}var x=t.passes;x.map((function(e,t){return e.index=t,e})),x.sort((function(e,t){return e.lightMode===t.lightMode?e.index>t.index?1:-1:e.lightMode>t.lightMode?1:-1}));var S=this._effect=new((0,a.getKanata)(this._scene).Effect)(t.name,x.length,[],x.map((function(e){return{lightMode:e.lightMode,shaders:e.shaders}})),t.shaders,[],!0),E=0;(null===(r=(0,a.getKanata)(this._scene).renderEnv)||void 0===r?void 0:r.isNotWrongEffectSort)||x.sort((function(e,t){return e.lightMode===t.lightMode?1:-1}));for(var T=0,C=t.passes;T<C.length;T++){var A=C[T];S.setUseMaterialStates(E,void 0===A.useMaterialRenderStates||A.useMaterialRenderStates);var O=A.renderStates||{};S.setBlendOn(E,void 0!==O.blendOn?O.blendOn:o.blendOn),S.setBlendSrcRGB(E,void 0!==O.blendSrc?O.blendSrc:o.blendSrc),S.setBlendDstRGB(E,void 0!==O.blendDst?O.blendDst:o.blendDst),S.setBlendSrcAlpha(E,void 0!==O.blendSrcAlpha?O.blendSrcAlpha:o.blendSrcAlpha),S.setBlendDstAlpha(E,void 0!==O.blendDstAlpha?O.blendDstAlpha:o.blendDstAlpha),S.setBlendFunc(E,void 0!==O.blendFunc?O.blendFunc:o.blendFunc),S.setCullOn(E,void 0!==O.cullOn?O.cullOn:o.cullOn),S.getCullOn(E)&&S.setCullFace(E,void 0!==O.cullFace?O.cullFace:o.cullFace),S.setDepthTestComp(E,void 0!==O.depthTestComp?O.depthTestComp:o.depthTestComp),S.setDepthTestOn(E,void 0!==O.depthTestOn?O.depthTestOn:o.depthTestOn),S.setDepthWrite(E,void 0!==O.depthWrite?O.depthWrite:o.depthWrite),S.setPrimitiveType(E,void 0!==O.primitiveType?O.primitiveType:o.primitiveType),S.setStencilTestOn(E,void 0!==O.stencilTestOn?O.stencilTestOn:o.stencilTestOn),S.setStencilComp(E,void 0!==O.stencilComp?O.stencilComp:o.stencilComp),S.setStencilPass(E,void 0!==O.stencilPass?O.stencilPass:o.stencilPass),S.setStencilFail(E,void 0!==O.stencilFail?O.stencilFail:o.stencilFail),S.setStencilZFail(E,void 0!==O.stencilZFail?O.stencilZFail:o.stencilZFail),S.setStencilWriteMask(E,void 0!==O.stencilWriteMask?O.stencilWriteMask:o.stencilWriteMask),S.setStencilReadMask(E,void 0!==O.stencilReadMask?O.stencilReadMask:o.stencilReadMask),S.setStencilRef(E,void 0!==O.stencilRef?O.stencilRef:o.stencilRef),E+=1}delete t.passes,delete t.shaders}return Object.defineProperty(e.prototype,"name",{get:function(){return this.description.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kanataEffect",{get:function(){return this._effect},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"passCount",{get:function(){var e;return null===(e=this._effect)||void 0===e?void 0:e.passCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loadingTextures",{get:function(){return this._loadingTextures},enumerable:!1,configurable:!0}),e.prototype._createUniforms=function(){if(this._defaultUniforms)return this._defaultUniforms.clone()},e.prototype._getMarcoByUniform=function(e){return this._uniformMacroTable[e]},e.prototype.warmUp=function(){var e;return null===(e=this._effect)||void 0===e||e.warmUp(),!0},e}()},"./src/assets/EnvData.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n=function(){function e(e){this._skybox=e.skybox,this._diffuse=e.diffuse,this._specular=e.specular}return Object.defineProperty(e.prototype,"useHalfSkyMap",{get:function(){var e;return!!(null===(e=this._skybox)||void 0===e?void 0:e.half)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skyboxMap",{get:function(){var e;return null===(e=this._skybox)||void 0===e?void 0:e.map},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasDiffuse",{get:function(){return!!this._diffuse},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"diffuseSH",{get:function(){var e;return null===(e=this._diffuse)||void 0===e?void 0:e.coefficients},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasSpecular",{get:function(){return!!this._diffuse},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specularRGBD",{get:function(){var e;return null===(e=this._specular)||void 0===e?void 0:e.rgbd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specularMipmaps",{get:function(){var e;return null===(e=this._specular)||void 0===e?void 0:e.mipmaps},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specularMipmapCount",{get:function(){return this._specular.mipmapCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specularMap",{get:function(){var e;return null===(e=this._specular)||void 0===e?void 0:e.map},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._skybox=void 0,this._diffuse=void 0,this._specular=void 0},e}()},"./src/assets/GLTFModel.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{GLTFInstanceResourceCollector:()=>p,default:()=>d});var n=r("./src/animation/NativeAnimation.ts"),o=r("./src/components/Mesh.ts"),i=r("./src/components/skinning/Skeleton.ts"),a=r("./src/components/skinning/SkinnedMesh.ts"),s=r("./src/components/Transform.ts"),c=r("./src/core/logger.ts"),u=r("./src/elements/xr-node.ts"),l=r("./src/loader/glTF/animations/channels/GLTFTargetNode.ts"),f=r("./src/loader/GlTFLoader.ts"),p=function(){function e(){this.list=[]}return e.prototype.add=function(e){this.list.push(e)},e.prototype.release=function(){for(var e,t=0,r=this.list;t<r.length;t++){var n=r[t];null===(e=n.destroy)||void 0===e||e.call(n)}this.list=[]},e}();const d=function(){function e(e,t){this._scene=e,this.model=t}return e.createFromBuffer=function(e,t){return f.default.createGLTFModel(e,t)},e.prototype.instantiate=function(e,t){if(e.scene!==this._scene)throw"GLTF model instantiate in a different context!";var r=this.model.scene;if(!r)return c.default.warn("Trying to instantiate a GLTFModel without scenes."),[[],new Map,[],[]];for(var n=[],o=new Map,i=0,a=r;i<a.length;i++){var s=a[i],u=this.dfsBuildNodes(e,s,this.model,o);n.push(u)}for(var l=[],f=0,p=r;f<p.length;f++){s=p[f];this.dfsBuildMesh(s,this.model,o,l,t)}return[n,o,this.buildAnimation(e,this.model,o),l]},e.prototype.dfsBuildNodes=function(e,t,r,n){var o=this._scene.createElement(u.default);o.name=t.data.name,e.addChild(o),n.set(t,o);var i=o.getComponent(s.default);i.setData(t.data.transform),t.data.transform.quat&&i.quaternion.set(t.data.transform.quat);for(var a=0,c=t.children;a<c.length;a++){var l=c[a];this.dfsBuildNodes(o,l,r,n)}return o},e.prototype.dfsBuildMesh=function(e,t,r,n,c){var l=r.get(e);if(e.data.mesh)for(var f=e.data.mesh,p=0,d=f.subMeshes;p<d.length;p++){var h=d[p],_={geometry:h.geometry,material:h.material,castShadow:c.castShadow,receiveShadow:c.receiveShadow,neverCull:c.neverCull},m=this._scene.createElement(u.default);if(l.addChild(m),e.data.skin){var v=e.data.skin,y={boneNum:v.joints.length,boneNodes:v.joints.map((function(e){return r.get(t.nodes[e]).getComponent(s.default)})),boneInverseMatrices:v.inverseBindMatrices},g=(m.addComponent(i.default,y),m.addComponent(a.default,_));n.push(g),g.morphWeights.set(f.weights)}else{var b=m.addComponent(o.default,_);n.push(b),b.morphWeights.set(f.weights)}}for(var w=0,x=e.children;w<x.length;w++){var S=x[w];this.dfsBuildMesh(S,t,r,n,c)}},e.prototype.buildAnimation=function(e,t,r){for(var o,i=[],a={},c=[],f=0;f<t.animations.length;f++){var p=this._scene.createElement(u.default);e.addChild(p);for(var d=t.animations[f],h=[],_=0,m=d.channels;_<m.length;_++){var v=m[_],y=r.get(v.target.node);if(v.target.path!==l.GLTFEnumAnimationTargetPath.WEIGHTS)h.push(y.getComponent(s.default).node);else if(v.morphNodeCount>0){for(var g={type:n.ENativeAnimationSimulatorType.Morph,target:y,subElements:[]},b=0;b<v.morphNodeCount;b++){var w=this._scene.createElement(u.default);y.addChild(w),h.push(w.getComponent(s.default).node),g.subElements.push(w)}c.push(g)}}var x=null!==(o=d.name)&&void 0!==o?o:"gltfAnimation";a[x]||(a[x]=0);var S={clip:d.clip,bindings:h,frameCount:d.frameCount,names:[x,x+"#"+a[x]],simulators:c};a[x]++;var E=new n.default(this._scene,S);i.push(E)}return i},e}()},"./src/assets/Geometry.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n=r("./src/core/logger.ts"),o=r("./src/ext.ts"),i=r("./src/math/boundBall.ts"),a=r("./src/math/boundBox.ts"),s=r("./src/math/utils.ts"),c=new WeakMap,u=new WeakMap;const l=function(){function e(t,r,n,i,a){void 0===a&&(a=o.Kanata.EIndexType.UINT16),this._scene=t,this._releaseRawBuffer=!1,this._vertexBuffer=null,this._indexBuffer=null,this._vertexData=null,this._indexData=null,this._indexType=o.Kanata.EIndexType.UINT16,this._boundBall=null,this._boundBox=null,this._rawVertexBuffer=null,this._rawIndiceBuffer=null,this._layout=r,this._raw=new Float32Array(e.RAWLENGTH),this._valid=!1,this._indexType=a,this._subMeshes=[];var s=n;this._rawVertexBuffer=new Float32Array(s.buffer,s.byteOffset,s.byteLength/4);var c=this._indexType===o.Kanata.EIndexType.UINT16?new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2):new Uint32Array(i.buffer,i.byteOffset,i.byteLength/4);this._rawIndiceBuffer=c}return Object.defineProperty(e.prototype,"vertexLayout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indexBuffer",{get:function(){return this._indexBuffer||(this._indexBuffer=new((0,o.getKanata)(this._scene).IndexBuffer)(this._rawIndiceBuffer,this._indexType===o.Kanata.EIndexType.UINT32),this._releaseRawBuffer&&(this._rawIndiceBuffer=null)),this._indexBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexBuffer",{get:function(){return this._vertexBuffer||(this._vertexBuffer=c.get(this._rawVertexBuffer.buffer),this._vertexBuffer||(this._vertexBuffer=new((0,o.getKanata)(this._scene).VertexBuffer)(this._rawVertexBuffer,this._layout),c.set(this._rawVertexBuffer,this._vertexBuffer)),this._releaseRawBuffer&&(this._rawVertexBuffer=null)),this._vertexBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indexData",{get:function(){if(!this._indexData){if(!this._rawIndiceBuffer)return n.default.warn("try to get index data fail, because raw buffer maybe release"),null;this._indexData=new((0,o.getKanata)(this._scene).IndexData)(this._rawIndiceBuffer.length),new Uint16Array(this._indexData.data).set(this._rawIndiceBuffer)}return this._indexData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexData",{get:function(){if(!this._vertexData){if(!this._rawVertexBuffer)return n.default.warn("try to get vertex data fail,because raw buffer maybe release"),null;this._vertexData=u.get(this._rawVertexBuffer.buffer),this._vertexData||(this._vertexData=new((0,o.getKanata)(this._scene).VertexData)(this._layout,this._rawVertexBuffer.length,this._scene.assets.getAsset("vertex-data-desc","static-3d")),new Float32Array(this._vertexData.data).set(this._rawVertexBuffer),u.set(this._rawVertexBuffer,this._vertexData))}return this._vertexData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this._valid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundBall",{get:function(){return this._boundBall||(this._boundBall=new i.default(this._raw,0)),this._boundBall},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundBox",{get:function(){return this._boundBall||(this._boundBox=new a.default(this._raw,4)),this._boundBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subMeshes",{get:function(){return this._subMeshes},enumerable:!1,configurable:!0}),e.prototype.uploadBufferData=function(e,t,r,n){var o,i,a,s;e!==t&&(null===(o=this._vertexBuffer)||void 0===o||o.update(new Uint8Array(null===(i=this._rawVertexBuffer)||void 0===i?void 0:i.buffer,e,t),e)),r!==n&&(null===(a=this._indexBuffer)||void 0===a||a.update(new Uint8Array(null===(s=this._rawIndiceBuffer)||void 0===s?void 0:s.buffer,r,n),r))},e.prototype.uploadVertexBuffer=function(e,t){var r;null===(r=this._vertexBuffer)||void 0===r||r.update(t,e)},e.prototype.uploadIndexBuffer=function(e,t){var r;null===(r=this._indexBuffer)||void 0===r||r.update(t,e)},e.prototype.getSubMeshCount=function(){return this._subMeshes.length},e.prototype.getIndiceStart=function(e){var t=this._subMeshes[e];return t?t.offset:-1},e.prototype.getIndiceLength=function(e){var t=this._subMeshes[e];return t?t.length:-1},e.prototype.getMaterialIndex=function(e){var t=this._subMeshes[e];return t?t.materialIndex:-1},e.prototype.getVertexLayout=function(){return this._layout},e.prototype.modifySubMesh=function(e,t,r){var n=this._subMeshes[e];return!!n&&(n.offset===r&&n.length===t||(n.offset=r,n.length=t),!0)},e.prototype.addSubMesh=function(e,t,r){r=r||this._subMeshes.length,this._subMeshes.push({offset:t,length:e,materialIndex:r})},e.prototype.setBoundBox=function(e,t,r){void 0===r&&(r=!0);var n=4+a.default.OFFSETS.size,o=4+a.default.OFFSETS.center;s.v3Helper.copy(e._raw,e._offset,this._raw,o),s.v3Helper.copy(t._raw,t._offset,this._raw,n),r&&this.setBoundBall(e,t.length()/2)},e.prototype.setBoundBall=function(e,t){var r=i.default.OFFSETS.radius,n=i.default.OFFSETS.center;s.v3Helper.copy(e._raw,e._offset,this._raw,n),this._raw[r]=t},e.prototype._getRawVertexBuffer=function(){return this._rawVertexBuffer||n.default.warn("try to get raw buffer fail,because raw buffer maybe release"),this._rawVertexBuffer},e.prototype._getRawIndiceBuffer=function(){return this._rawIndiceBuffer||n.default.warn("try to get raw buffer fail,because raw buffer maybe release"),this._rawIndiceBuffer},e.RAWLENGTH=10,e.MAX_BONECOUNT=96,e}()},"./src/assets/Material.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var n=r("./src/ext.ts"),o=r("./src/loader/types.ts"),i=r("./src/math/vector2.ts"),a=r("./src/math/vector3.ts"),s=r("./src/math/vector4.ts"),c=r("./src/math/matrix3.ts"),u=r("./src/math/matrix4.ts"),l=r("./src/core/logger.ts"),f=r("./src/core/DataValue.ts");const p=function(){function e(e){this._scene=e,this._preUniformStrs={},this._preStateStrs={},this._loadingTexturesCount=0,this._delta=0}return Object.defineProperty(e.prototype,"kanataMaterial",{get:function(){return this._material},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uniforms",{get:function(){return this._uniforms},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alphaMode",{set:function(e){var t=this._material;switch(e){case"BLEND":t.blendOn=!0,t.blendSrc=n.Kanata.EBlendFactor.SRC_ALPHA,t.blendDst=n.Kanata.EBlendFactor.ONE_MINUS_SRC_ALPHA,this.setMacro("WX_USE_ALPHA_CUTOFF",!1);break;case"MASK":t.blendOn=!1,this.setMacro("WX_USE_ALPHA_CUTOFF",!0);break;default:t.blendOn=!1,this.setMacro("WX_USE_ALPHA_CUTOFF",!1)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alphaCutOff",{set:function(e){this.setFloat("u_alphaCutoff",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderQueue",{get:function(){return this._material.renderQueue},set:function(e){this._material.renderQueue=e},enumerable:!1,configurable:!0}),e.prototype.initByEffect=function(e,t){var r=e._createUniforms();if(this._effect=e,e.loadingTextures&&(this._loadingTextures=Object.assign({},e.loadingTextures),this._loadingTexturesCount=Object.keys(this._loadingTextures).length),this._material||(this._material=new((0,n.getKanata)(this._scene).Material)),this._material.effect=e.kanataEffect,this._material.uniforms=r,this._material.renderQueue=e.description.defaultRenderQueue,this._uniforms=this._material.uniforms,t){var o;for(var i in t){var a=t[i];r.setUniform(i,a);var s=e._getMarcoByUniform(i);s&&void 0!==a&&((o=o||{})[s]=!0)}o&&this._material.changeMacros(o)}},e.prototype.getFloat=function(e){var t;return this._uniforms?null===(t=this._uniforms.getUniform(e))||void 0===t?void 0:t[0]:null},e.prototype.setFloat=function(e,t){return!!this._uniforms&&(this._setUniform(e,[t]),!0)},e.prototype.setVector=function(e,t){return!!this._uniforms&&(this._setUniform(e,t._raw),!0)},e.prototype.getVector=function(e){if(!this._uniforms)return null;var t=this._uniforms.getUniform(e);return t?2===t.length?new i.default(t.slice()):3===t.length?new a.default(t.slice()):4===t.length?new s.default(t.slice()):null:null},e.prototype.setMatrix=function(e,t){return!!this._uniforms&&(this._setUniform(e,t._raw),!0)},e.prototype.getMatrix=function(e){if(!this._uniforms)return null;var t=this._uniforms.getUniform(e);return t?9===t.length?new c.default(t.slice()):16===t.length?new u.default(t.slice()):null:null},e.prototype.setTexture=function(e,t){var r,n;return!!this._effect&&(null===(null===(r=this._uniforms)||void 0===r?void 0:r.getUniform(e))?(l.default.warn('Texture named with "'+e+'" no found in effect.'),!1):(this.getTexture(e)===t||(this._setUniform(e,t),(null===(n=this._loadingTextures)||void 0===n?void 0:n[e])&&(delete this._loadingTextures[e],this._loadingTexturesCount-=1)),!0))},e.prototype.setTextureAsset=function(e,t){var r,n;if(!this._effect)return!1;if(null===(null===(r=this._uniforms)||void 0===r?void 0:r.getUniform(e)))return l.default.warn('Texture named with "'+e+'" no found in effect.'),!1;var i=(0,f.parseDataValue)("texture",t,void 0,this._scene);return i.state!==o.EAssetState.Loading?((null===(n=this._loadingTextures)||void 0===n?void 0:n[e])&&(delete this._loadingTextures[e],this._loadingTexturesCount-=1),void this._uniforms.setUniform(e,(0,f.isTextureWrapper)(i.value)?i.value.texture:i.value)):(i.state===o.EAssetState.Loading&&(this._loadingTextures=this._loadingTextures||{},this._loadingTextures[e]||(this._loadingTexturesCount+=1),this._loadingTextures[e]=i),!0)},e.prototype.resetTexture=function(e){if(!this._effect)return null;var t=this._effect.description;if(t.images){this._loadingTexturesCount=0;for(var r=0;r<t.images.length;r++){var n=t.images[r].default;if("string"===n){var i=(0,f.parseDataValue)("texture",n,void 0,this._scene);if((null==i?void 0:i.state)===o.EAssetState.Loading)this._loadingTextures=this._loadingTextures||{},this._loadingTextures[n]=i,this._loadingTexturesCount+=1;else if(i){this._uniforms.setUniform(n,(0,f.isTextureWrapper)(i.value)?i.value.texture:i.value);var a=this._effect._getMarcoByUniform(n);a&&this.setMacro(a,!1)}}}}},e.prototype.setFontTexture=function(e,t){return!!this._uniforms&&(this._setUniform(e,t),!0)},e.prototype.getTexture=function(e){return this._effect?this._uniforms.getTexture(e):null},e.prototype._setUniform=function(e,t){var r;this._uniforms.setUniform(e,t);var n=this._effect._getMarcoByUniform(e);n&&this._material.getMacro(n)!==!!t&&this._material.changeMacros(((r={})[n]=!!t,r))},e.prototype.setRenderState=function(e,t){return null!=this._material[e]&&(this._material[e]=t),!0},e.prototype.setRenderStates=function(e){for(var t in e)this.setRenderState(t,e[t]);return!0},e.prototype.clearRenderState=function(e){return null!=this._material[e]&&(this._material[e+"Mask"]=!1),!0},e.prototype.clearRenderStates=function(e){for(var t in e)this.clearRenderState(t);return!0},e.prototype.getRenderState=function(e){return this._material?this._material[e]:void 0},e.prototype.setMacro=function(e,t){var r,n;null===(n=this._material)||void 0===n||n.changeMacros(((r={})[e]=t,r))},e.prototype.setMacros=function(e){var t;null===(t=this._material)||void 0===t||t.changeMacros(e)},e.prototype.getMacro=function(e){var t;return null===(t=this._material)||void 0===t?void 0:t.getMacro(e)},e.prototype._checkTextures=function(e){if(this._loadingTexturesCount&&(this._delta+=e,!(this._delta<200)))for(var t in this._delta=0,this._loadingTextures){var r=this._loadingTextures[t];r.state!==o.EAssetState.Loading&&this.setTexture(t,(0,f.isTextureWrapper)(r.value)?r.value.texture:r.value)}},e.prototype.clone=function(){var t,r=new e(this._scene);return r._effect=this._effect,r._loadingTextures=Object.assign({},this._loadingTextures),r._loadingTexturesCount=this._loadingTexturesCount,r._material=null===(t=this._material)||void 0===t?void 0:t.clone(),r._uniforms=r._material.uniforms,r},e.prototype._parseUniforms=function(e){var t,r=this,n=this._preUniformStrs,o=this._material.uniforms,i=this._scene.assets,a=this._effect;e.forEach((function(e){var s=e[0],c=e[1];if(n[s]!==c){r._parseAndSetUniform(i,o,s,c),n[s]=c;var u=a._getMarcoByUniform(s);u&&((t=t||{})[u]=!0)}})),t&&this.setMacros(t)},e.prototype._parseAndSetUniform=function(e,t,r,o){var i=t.descriptor.layout[r];if(i)if(i[0]===n.Kanata.EUniformType.SAMPLER)this.setTextureAsset(r,o);else{var a=(0,f.parseDataValue)("number-array",o,void 0,this._scene);a&&t.setUniform(r,a)}},e.prototype._parseRenderStates=function(e){var t=this,r=this._preStateStrs,n=this;e.forEach((function(e){var o=e[0],i=e[1];if(r[o]!==i){switch(o){case"renderQueue":n.renderQueue=(0,f.parseDataValue)("number",i,void 0,t._scene);break;case"cullOn":var a=(0,f.parseDataValue)("boolean",i,void 0,t._scene);n.setRenderState("cullOn",a),a?n.setMacro("WX_USE_CULLON",!0):n.setMacro("WX_USE_CULLON",!1);break;case"cullFace":n.setRenderState("cullFace",(0,f.parseDataValue)("number",i,void 0,t._scene));break;case"depthTestOn":n.setRenderState("depthTestOn",(0,f.parseDataValue)("boolean",i,void 0,t._scene));break;case"depthTestComp":n.setRenderState("depthTestComp",(0,f.parseDataValue)("number",i,void 0,t._scene));break;case"depthTestWrite":n.setRenderState("depthWrite",(0,f.parseDataValue)("boolean",i,void 0,t._scene));break;case"alphaMode":n.alphaMode=i;case"alphaCutOff":n.alphaCutOff=(0,f.parseDataValue)("number",i,void 0,t._scene);break;case"stencilTestOn":n.setRenderState("stencilTestOn",(0,f.parseDataValue)("boolean",i,void 0,t._scene));break;case"stencilComp":n.setRenderState("stencilComp",(0,f.parseDataValue)("number",i,void 0,t._scene));break;case"stencilRef":n.setRenderState("stencilRef",(0,f.parseDataValue)("number",i,void 0,t._scene));break;case"stencilReadMask":n.setRenderState("stencilReadMask",(0,f.parseDataValue)("number",i,void 0,t._scene));break;case"stencilWriteMask":n.setRenderState("stencilWriteMask",(0,f.parseDataValue)("number",i,void 0,t._scene));break;case"stencilPass":n.setRenderState("stencilPass",(0,f.parseDataValue)("number",i,void 0,t._scene));break;case"stencilFail":n.setRenderState("stencilFail",(0,f.parseDataValue)("number",i,void 0,t._scene));break;case"stencilZFail":n.setRenderState("stencilZFail",(0,f.parseDataValue)("number",i,void 0,t._scene))}r[o]=i}}))},e}()},"./src/assets/PostProcess.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n=function(){function e(e,t){if(this._scene=e,!t.type)throw new Error("PostProcess must has options 'type' !");this._type=t.type,this._isHDR=t.isHDR||!1,this._data=t.data||{}}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHDR",{get:function(){return this._isHDR},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),e}()},"./src/assets/RenderTexture.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r("./src/core/logger.ts"),o=r("./src/ext.ts");const i=function(){function e(e,t){this._scene=e,this.isRenderTexture=!0,this._initByOptions(t)}return e.IS=function(e){return e&&!!e.isRenderTexture},Object.defineProperty(e.prototype,"depthStencil",{get:function(){return this._depthStencil},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._color},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTexture",{get:function(){return this._depthStencil},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderPass",{get:function(){return this._pass},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._pass.id},enumerable:!1,configurable:!0}),e.prototype._initByOptions=function(e){var t=e.width,r=e.height;t&&r||n.default.throw(new Error("RenderTexture must has width and height!")),this._width=t,this._height=r;var i=o.Kanata.ETextureFormat.Depth_Stencil;this._color=this._scene.createTexture({width:this._width,height:this._height,wrapU:o.Kanata.EWrapMode.CLAMP_TO_EDGE,wrapV:o.Kanata.EWrapMode.CLAMP_TO_EDGE,minFilter:o.Kanata.EFilterMode.LINEAR,magFilter:o.Kanata.EFilterMode.LINEAR,pixelFormat:e.isHDR?o.Kanata.ETextureFormat.RGBA16F:o.Kanata.ETextureFormat.RGBA8,sampleCount:1,isRenderTarget:!0}),this._depthStencil=this._scene.createTexture({width:this._width,height:this._height,sampleCount:1,pixelFormat:i,isRenderTarget:!0,wrapU:o.Kanata.EWrapMode.CLAMP_TO_EDGE,wrapV:o.Kanata.EWrapMode.CLAMP_TO_EDGE,minFilter:o.Kanata.EFilterMode.LINEAR,magFilter:o.Kanata.EFilterMode.LINEAR,isWriteOnly:!0}),this._pass=new((0,o.getKanata)(this._scene).RenderPass)({colors:[{texture:this._color}],depth:{texture:this._depthStencil},stencil:i!==o.Kanata.ETextureFormat.Depth_Stencil?void 0:{texture:this._depthStencil}})},e}()},"./src/assets/VideoTexture.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{EVideoState:()=>n,default:()=>u});var n,o=r("./src/core/logger.ts"),i=r("./src/core/reporter.ts"),a=r("./src/ext.ts"),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},c=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e[e.Idle=0]="Idle",e[e.WaitPlay=1]="WaitPlay",e[e.Playing=2]="Playing",e[e.Released=3]="Released"}(n||(n={}));const u=function(){function e(e,t,r,o){var i=this;this.onEnd=o,this._handleEnd=function(){i._options.loop?i.seek(0):i.stop()},this._scene=e,this._options=t,this._state=n.Idle,this._decoder=a._wx.createVideoDecoder({type:"wemedia"}),this._decoder.on("ended",this._handleEnd);var s=this._options.placeHolder;s&&(this._texture=this._scene.createTexture({source:[s],width:s.width,height:s.height,wrapU:a.Kanata.EWrapMode.CLAMP_TO_EDGE,wrapV:a.Kanata.EWrapMode.CLAMP_TO_EDGE,minFilter:a.Kanata.EFilterMode.LINEAR,magFilter:a.Kanata.EFilterMode.LINEAR,pixelFormat:a.Kanata.ETextureFormat.RGBA8})),this._init(r)}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype._init=function(e){return s(this,void 0,void 0,(function(){var t,r,n,o;return c(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.play(!0)];case 1:return t=i.sent(),r=t.width,n=t.height,this._width=r,this._height=n,[3,3];case 2:return o=i.sent(),e(this,o),[2];case 3:if(this._texture){if(this._texture.width!==this._width||this._texture.height!==this._height)return e(this,new Error("Video has placeHolder but the size of video is different from placeHolder !")),[2]}else this._texture=this._scene.createTexture({width:this._width,height:this._height,wrapU:a.Kanata.EWrapMode.CLAMP_TO_EDGE,wrapV:a.Kanata.EWrapMode.CLAMP_TO_EDGE,minFilter:a.Kanata.EFilterMode.LINEAR,magFilter:a.Kanata.EFilterMode.LINEAR,pixelFormat:a.Kanata.ETextureFormat.RGBA8});return e(this),this._scene.video._addVideo(this),this._options.autoPlay||this.stop(),[2]}}))}))},e.prototype._tick=function(e){if(this._state===n.Playing){var t=this._getFrame();t&&this._texture.update({buffer:t})}},e.prototype._getFrame=function(){var e;try{return null===(e=this._decoder.getFrameData())||void 0===e?void 0:e.data}catch(e){return void o.default.error("video texture "+e,i.EEReportScope.Asset)}},e.prototype.play=function(e){return void 0===e&&(e=!1),s(this,void 0,Promise,(function(){var t,r,o=this;return c(this,(function(i){switch(i.label){case 0:return this._state===n.Playing?[2,new Promise((function(e){return e({width:o._width,height:o._height})}))]:(this._state=n.WaitPlay,t=this._options.src+"?random="+Math.random(),[4,this._decoder.start({source:t,mode:0,abortAudio:this._options.abortAudio})]);case 1:return r=i.sent(),e?[2,new Promise((function(e){var t=function(){o._decoder.off("bufferchange",t),o._state=n.Playing,e(r)};o._decoder.on("bufferchange",t)}))]:(this._state=n.Playing,[2,r])}}))}))},e.prototype.seek=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return this._state!==n.Idle?[3,2]:[4,this.play()];case 1:t.sent(),t.label=2;case 2:return[2,this._decoder.seek(e)]}}))}))},e.prototype.stop=function(){this._decoder.stop(),this._state=n.Idle,this._state=n.Idle,this.onEnd&&this.onEnd()},e.prototype.release=function(){this.stop(),this._state=n.Released,this._decoder.remove(),this._scene.video._removeVideo(this)},e}()},"./src/assets/easeFunctions.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{noneParamsEaseFuncs:()=>m,useParamsEaseFuncs:()=>h});var n=Math.pow,o=Math.sqrt,i=Math.sin,a=Math.cos,s=Math.PI,c=1.70158,u=1.525*c,l=c+1,f=2*s/3,p=2*s/4.5,d=1e-6,h={"cubic-bezier":function(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=3*r,s=3*(o-r)-a,c=1-a-s,u=3*n,l=3*(i-n)-u,f=1-u-l;function p(e){return((c*e+s)*e+a)*e}return function(e){return t=function(e){for(var t,r,n,o,i,u=e,l=0;l<8;l+=1){if(n=p(u)-e,Math.abs(n)<d)return u;if(o=(3*c*(i=u)+2*s)*i+a,Math.abs(o)<d)break;u-=n/o}if((u=e)<(t=0))return t;if(u>(r=1))return r;for(;t<r;){if(n=p(u),Math.abs(n-e)<d)return u;e>n?t=u:r=u,u=.5*(r-t)+t}return u}(e),((f*t+l)*t+u)*t;var t}},steps:function(e,t){var r=e.length;return r?function(t){for(var n=r-1;n>=0;n-=1){var o=e[n];if(o<=t)return o}return 1}:function(e){return 1}}},_=function(e){var t=7.5625,r=2.75;return e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375},m={linear:function(e){return e},"ease-in":h["cubic-bezier"]([],[.42,0,1,1]),"ease-out":h["cubic-bezier"]([],[0,0,.58,1]),"ease-in-out":h["cubic-bezier"]([],[.42,0,.58,1]),"ease-in-quad":function(e){return e*e},"ease-out-quad":function(e){return 1-(1-e)*(1-e)},"ease-in-out-quad":function(e){return e<.5?2*e*e:1-n(-2*e+2,2)/2},"ease-in-cubic":function(e){return e*e*e},"ease-out-cubic":function(e){return 1-n(1-e,3)},"ease-in-out-cubic":function(e){return e<.5?4*e*e*e:1-n(-2*e+2,3)/2},"ease-in-quart":function(e){return e*e*e*e},"ease-out-quart":function(e){return 1-n(1-e,4)},"ease-in-out-quart":function(e){return e<.5?8*e*e*e*e:1-n(-2*e+2,4)/2},"ease-in-quint":function(e){return e*e*e*e*e},"ease-out-quint":function(e){return 1-n(1-e,5)},"ease-in-out-quint":function(e){return e<.5?16*e*e*e*e*e:1-n(-2*e+2,5)/2},"ease-in-sine":function(e){return 1-a(e*s/2)},"ease-out-sine":function(e){return i(e*s/2)},"ease-in-out-sine":function(e){return-(a(s*e)-1)/2},"ease-in-expo":function(e){return 0===e?0:n(2,10*e-10)},"ease-out-expo":function(e){return 1===e?1:1-n(2,-10*e)},"ease-in-out-expo":function(e){return 0===e?0:1===e?1:e<.5?n(2,20*e-10)/2:(2-n(2,-20*e+10))/2},"ease-in-circ":function(e){return 1-o(1-n(e,2))},"ease-out-circ":function(e){return o(1-n(e-1,2))},"ease-in-out-circ":function(e){return e<.5?(1-o(1-n(2*e,2)))/2:(o(1-n(-2*e+2,2))+1)/2},"ease-in-back":function(e){return l*e*e*e-c*e*e},"ease-out-back":function(e){return 1+l*n(e-1,3)+c*n(e-1,2)},"ease-in-out-back":function(e){return e<.5?n(2*e,2)*(7.189819*e-u)/2:(n(2*e-2,2)*((u+1)*(2*e-2)+u)+2)/2},"ease-in-elastic":function(e){return 0===e?0:1===e?1:-n(2,10*e-10)*i((10*e-10.75)*f)},"ease-out-elastic":function(e){return 0===e?0:1===e?1:n(2,-10*e)*i((10*e-.75)*f)+1},"ease-in-out-elastic":function(e){return 0===e?0:1===e?1:e<.5?-n(2,20*e-10)*i((20*e-11.125)*p)/2:n(2,-20*e+10)*i((20*e-11.125)*p)/2+1},"ease-in-bounce":function(e){return 1-_(1-e)},"ease-out-bounce":_,"ease-in-out-bounce":function(e){return e<.5?(1-_(1-2*e))/2:(1+_(2*e-1))/2}}},"./src/assets/factories.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{getAssetFactory:()=>a,registerEffect:()=>c,registerGeometry:()=>s,registerMaterial:()=>h,registerTexture:()=>u,registerTextureCube:()=>l,registerUniformDesc:()=>p,registerVertexDataDesc:()=>f,registerVertexLayout:()=>d});var n=r("./src/core/logger.ts"),o={};function i(e){return function(t,r){o[e]||(o[e]={});var i=o[e];i[t]?n.default.warn(e+" "+t+" is already existed !"):i[t]=r}}function a(e,t){var r;return null===(r=o[e])||void 0===r?void 0:r[t]}var s=i("geometry"),c=i("effect"),u=i("texture"),l=i("cube-texture"),f=i("vertex-data-desc"),p=i("uniform-desc"),d=i("vertex-layout"),h=i("material")},"./src/builtinAssets/effects/ar-camera-yuv.ts":(e,t,r)=>{"use strict";r.r(t),(0,r("./src/assets/factories.ts").registerEffect)("ar-camera-yuv",(function(e){return e.createEffect({name:"ar-camera-yuv",properties:[{key:"u_displayMatrix",type:6,default:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}],images:[{key:"u_yTexture",default:"black",macro:"WX_AR_CAMERA_READY"},{key:"u_uvTexture",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!0},lightMode:"Skybox",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:["#version 100\n  attribute vec3 a_position;\n  attribute vec2 a_texCoord;\n\n  uniform mat4 u_displayMatrix;\n  varying vec2 v_texCoord;\n\n  void main() {\n    v_texCoord = a_texCoord;\n    gl_Position = u_displayMatrix * vec4(a_position.xy, 1., 1.);\n  }","#version 100\n    precision highp float;\n    uniform sampler2D u_yTexture;\n    uniform sampler2D u_uvTexture;\n    varying vec2 v_texCoord;\n\n    float unpack(float h, float l) {\n      return h * 0.94117647 + l * 0.0588235;\n    }\n\n    void main() {\n#ifdef WX_AR_CAMERA_READY\n      vec4 yColor = texture2D(u_yTexture, v_texCoord);\n      vec4 uvColor = texture2D(u_uvTexture, v_texCoord);\n\n      float Y, U, V;\n      float R ,G, B;\n      Y = yColor.r;\n      U = unpack(uvColor.r, uvColor.g) - 0.5;\n      V = unpack(uvColor.b, uvColor.a) - 0.5;\n      \n      R = Y + 1.402 * V;\n      G = Y - 0.344 * U - 0.714 * V;\n      B = Y + 1.772 * U;\n      \n      // BGRA\n      #ifdef WX_PP_ACTIVE\n        gl_FragData[0] = vec4(pow(vec3(B, G, R), vec3(2.2)), 1.);\n      #else\n        gl_FragData[0] = vec4(B, G, R, 1.0);\n      #endif\n#else\n      gl_FragColor = vec4(0., 0., 0., 1.0);\n#endif\n    }\n    "]})}))},"./src/builtinAssets/effects/gizmo.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/ext.ts");(0,n.registerEffect)("gizmo",(function(e){return e.createEffect({name:"gizmo",properties:[{key:"u_baseColorFactor",type:3,default:[1,1,1,1]},{key:"u_gizmoTransformMatrices",type:6,default:[1,1,1,1],num:5}],defaultRenderQueue:3e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1,primitiveType:o.Kanata.EPrimitiveType.LINE_STRIP},lightMode:"ForwardBase",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:["#version 100\n\n  uniform mat4 u_view;\n  uniform mat4 u_viewInverse;\n  uniform mat4 u_vp;\n  uniform mat4 u_projection;\n  uniform mat4 u_lightSpaceMatrix;\n  uniform vec4 u_fogInfos;\n  uniform vec3 u_fogColor;\n  uniform float u_gameTime;\n  uniform float u_aspect;\n  uniform vec3 u_ambientLight;\n  uniform vec3 u_lightDir;\n  uniform vec3 u_lightColor;\n  uniform vec3 u_shadowColor;\n  uniform float u_shadowStrength;\n  uniform float u_shadowBias;\n  uniform float u_lightWidthPCSS;\n  uniform float u_blockSizePCSS;\n  uniform vec4 u_csmFarBounds;\n  uniform vec4 u_shadowTilingOffsets[4];\n  uniform mat4 u_csmLightSpaceMatrices[4];\n  uniform vec3 u_SH[9];\n  \n  \n  uniform mat4 u_world;\n  uniform mat4 u_gizmoTransformMatrices[5];\n  \n  attribute vec3 a_position;\n  attribute vec2 a_gizmoTransformIndex;\n  \n  void main()\n  {\n\n\n    vec4 worldPosition = u_world * u_gizmoTransformMatrices[int(a_gizmoTransformIndex.x)] * vec4(a_position, 1.0);\n    // vec4 worldPosition = u_world * u_gizmoTransformMatrices[0] * vec4(a_position, 1.0);\n    // vec4 worldPosition = u_world * vec4(a_position, 1.0);\n    gl_Position = u_projection * u_view * worldPosition;\n  }","#version 100\n  precision mediump float;\n  precision highp int;\n\n  void main()\n  {\n  gl_FragData[0] = vec4(1.0, 0.0, 1.0, 1.0);\n  }  \n    "]})}))},"./src/builtinAssets/effects/particle.ts":(e,t,r)=>{"use strict";r.r(t),(0,r("./src/assets/factories.ts").registerEffect)("particle",(function(e){return e.createEffect({name:"particle",properties:[{key:"u_baseColorFactor",type:3,default:[1,1,1,1]}],images:[{key:"u_baseColorMap",default:"white",macro:"WX_USE_BASECOLORMAP"},{key:"u_rampColorMap",default:"white",macro:"WX_USE_RAMPCOLORMAP"}],defaultRenderQueue:3e3,passes:[{renderStates:{cullOn:!1,blendOn:!0,depthWrite:!1},lightMode:"ForwardBase",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:["#version 100\n\n  uniform highp mat4 u_view;\n  uniform highp mat4 u_projection;\n  uniform highp mat4 u_world;\n  \n  attribute vec3 a_position;\n  attribute highp vec2 a_texCoord;\n  attribute vec3 a_offset;\n  attribute vec4 a_color;\n  attribute float a_angle;\n\n  #ifdef WX_BILLBOARDMODE_STRETCHED\n    attribute vec3 a_direction;\n    attribute float a_lengthScale;\n  #endif\n\n  #ifdef WX_USE_RAMPCOLORMAP\n    attribute vec4 a_rampPos;\n  #endif\n\n  #ifdef WX_SPRITESHEET\n    attribute vec4 a_cellPosition;\n  #endif\n\n  varying highp vec2 v_Uv;\n  varying highp vec4 v_Color;\n\n  #ifdef WX_USE_RAMPCOLORMAP\n    varying highp vec4 v_rampData;\n  #endif\n\n  uniform mat4 u_viewInverse;\n\n  #ifdef WX_BILLBOARDMODE_Y\n  vec3 rotate(vec3 yaxis,vec3 rotatedOffset) {\n    vec3 xaxis=normalize(cross(vec3(0.,1.0,0.),yaxis));\n    vec3 zaxis=normalize(cross(yaxis,xaxis));\n    vec3 row0=vec3(xaxis.x,xaxis.y,xaxis.z);\n    vec3 row1=vec3(yaxis.x,yaxis.y,yaxis.z);\n    vec3 row2=vec3(zaxis.x,zaxis.y,zaxis.z);\n    mat3 rotMatrix= mat3(row0,row1,row2);\n    vec3 alignedOffset=rotMatrix*rotatedOffset;\n    return alignedOffset;\n  }\n  #endif\n\n  #ifdef WX_BILLBOARDMODE_STRETCHED\n  vec3 rotateAlign(vec3 toCamera, vec3 rotatedOffset) {\n    vec3 normalizedToCamera = normalize(toCamera);\n    vec3 normalizedCrossVec = normalize(cross(normalize(a_direction), normalizedToCamera));\n    vec3 normalizedCrossResult = normalize(cross(normalizedToCamera, normalizedCrossVec)) * a_lengthScale;\n    vec3 row0 = normalizedCrossVec;\n    vec3 row1 = normalizedCrossResult;\n    vec3 row2 = normalizedToCamera;\n    mat3 rotMatrix = mat3(row0, row1, row2);\n    vec3 alignedOffset = rotMatrix * rotatedOffset;\n    return alignedOffset; \n  }\n  #endif\n\n  vec3 extractScale(mat4 matrix){\n    vec3 scale;\n    scale.x = length(vec4(matrix[0][0],matrix[0][1],matrix[0][2],matrix[0][3]));\n    scale.y = length(vec4(matrix[1][0],matrix[1][1],matrix[1][2],matrix[1][3]));\n    scale.z = length(vec4(matrix[2][0],matrix[2][1],matrix[2][2],matrix[2][3]));\n    return scale;\n  }\n  \n  void main()\n  {\n  #ifdef WX_SPRITESHEET\n    vec2 uvOffset = vec2(a_texCoord.x * a_cellPosition.z ,a_texCoord.y * a_cellPosition.w);\n    v_Uv = vec2(a_cellPosition.x, a_cellPosition.y) + uvOffset;\n  #else\n    v_Uv = a_texCoord;\n  #endif \n    vec4 localPosition = vec4(a_position, 1.0);\n    vec4 cameraPosition;\n    vec3 rotatedOffset;\n    vec3 viewPos;\n    v_Color = a_color;\n  #ifdef WX_BILLBOARDMODE_Y\n    rotatedOffset.x = a_offset.x * cos(a_angle) - a_offset.y * sin(a_angle);\n    rotatedOffset.z = a_offset.x * sin(a_angle) + a_offset.y * cos(a_angle);\n    rotatedOffset.y = 0.0;\n    vec3 yaxis = a_position - vec3(u_viewInverse[3][0], u_viewInverse[3][1], u_viewInverse[3][2]);\n    yaxis.y = 0.0;\n    vec3 alignedOffset = rotate(yaxis, rotatedOffset);\n    cameraPosition = u_view * u_world * vec4(localPosition.xyz + alignedOffset.xyz, 1.0);\n    viewPos = cameraPosition.xyz;\n  #elif defined(WX_BILLBOARDMODE_STRETCHED)\n    rotatedOffset.x = a_offset.x * cos(a_angle) - a_offset.y * sin(a_angle);\n    rotatedOffset.y = a_offset.x * sin(a_angle) + a_offset.y * cos(a_angle);\n    rotatedOffset.z = 0.0;\n    vec3 toCamera = a_position - vec3(u_viewInverse[3][0], u_viewInverse[3][1], u_viewInverse[3][2]);\n    vec3 alignedOffset = rotateAlign(toCamera, rotatedOffset);\n    cameraPosition = u_view * u_world * vec4(localPosition.xyz + alignedOffset.xyz, 1.0);\n    viewPos = cameraPosition.xyz;\n  #elif defined(WX_BILLBOARD)\n    vec3 scale = extractScale(u_world);\n    rotatedOffset.x = (a_offset.x * cos(a_angle) - a_offset.y * sin(a_angle)) * scale.x;\n    rotatedOffset.y = (a_offset.x * sin(a_angle) + a_offset.y * cos(a_angle)) * scale.y;\n    rotatedOffset.z = 0.0;\n    cameraPosition = u_view * u_world * localPosition + vec4(rotatedOffset, 1.0);\n    viewPos = cameraPosition.xyz;\n  #elif defined(WX_RENDERMESH)\n    rotatedOffset.x = a_offset.x * cos(a_angle) - a_offset.z * sin(a_angle);\n    rotatedOffset.z = a_offset.x * sin(a_angle) + a_offset.z * cos(a_angle);\n    rotatedOffset.y = a_offset.y;\n    cameraPosition = u_view * u_world * vec4(localPosition.xyz + rotatedOffset.xyz, 1.0);\n    viewPos = cameraPosition.xyz;\n  #else\n    rotatedOffset.x = a_offset.x * cos(a_angle) - a_offset.y * sin(a_angle);\n    rotatedOffset.y = a_offset.x * sin(a_angle) + a_offset.y * cos(a_angle);\n    rotatedOffset.z = 0.0;\n    cameraPosition = u_view * u_world * vec4(localPosition.xyz + rotatedOffset.xyz, 1.0);\n    viewPos = cameraPosition.xyz;\n  #endif\n  #ifdef WX_USE_RAMPCOLORMAP\n    v_rampData = a_rampPos;\n  #endif\n    gl_Position = u_projection * vec4(viewPos, 1.0);\n  }","#version 100\n  precision mediump float;\n  precision highp int;\n  varying highp vec2 v_Uv;\n  varying highp vec4 v_Color;\n  #ifdef WX_USE_RAMPCOLORMAP\n    varying highp vec4 v_rampData;\n    uniform sampler2D u_rampColorMap;\n  #endif\n\n  uniform highp vec4 u_baseColorFactor;\n  \n  #ifdef WX_USE_BASECOLORMAP\n    uniform sampler2D u_baseColorMap;\n  #endif\n\n  void main()\n  {\n    vec4 baseColor;\n    #ifdef WX_USE_BASECOLORMAP\n      vec4 textureColor = texture2D(u_baseColorMap, v_Uv) * u_baseColorFactor;\n      baseColor = textureColor * v_Color;\n    #else\n      baseColor = v_Color;\n    #endif\n\n    #ifdef WX_USE_RAMPCOLORMAP\n      float alpha=baseColor.a;\n      float remappedIndex=clamp((alpha-v_rampData.x)/v_rampData.y,0.0,1.0);\n      vec4 rampColor = texture2D(u_rampColorMap,vec2(1.0-remappedIndex,0.));\n      baseColor.rgb *= rampColor.rgb;\n      baseColor.a=clamp((alpha*rampColor.a-v_rampData.z)/v_rampData.w,0.0,1.0);\n    #endif\n\n    #ifdef WX_PP_ACTIVE\n        // removeGammaCorrection\n        gl_FragData[0] = vec4(pow(baseColor.rgb, vec3(2.2)), baseColor.a);\n    #else\n        gl_FragData[0] = baseColor;\n    #endif\n\n  }  \n    "]})}))},"./src/builtinAssets/effects/postprocessing/blend.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/builtinAssets/effects/shader/postprocessing/screen.vert.glsl"),i=r.n(o);(0,n.registerEffect)("post-process-blend",(function(e){return e.createEffect({name:"post-process-blend",properties:[],images:[{key:"u_sourceTex",default:"white"},{key:"u_bottomTex",default:"white"},{key:"u_upperTex",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"Default",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:[i(),r("./src/builtinAssets/effects/shader/postprocessing/blend/blend.frag.glsl")]})}))},"./src/builtinAssets/effects/postprocessing/blit.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/ext.ts"),i=r("./src/builtinAssets/effects/shader/postprocessing/screen.vert.glsl"),a=r.n(i);(0,n.registerEffect)("post-process-blit",(function(e){return e.createEffect({name:"post-process-blit",properties:[{key:"u_alpha",type:o.Kanata.EUniformType.FLOAT,default:[1]}],images:[{key:"u_sourceTex",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"PostProcess",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:[a(),r("./src/builtinAssets/effects/shader/postprocessing/blit/blit.frag.glsl")]})}))},"./src/builtinAssets/effects/postprocessing/bloom.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/ext.ts"),i=r("./src/builtinAssets/effects/shader/postprocessing/screen.vert.glsl"),a=r.n(i);(0,n.registerEffect)("post-process-bloom",(function(e){return e.createEffect({name:"post-process-bloom",properties:[{key:"u_width",type:o.Kanata.EUniformType.FLOAT,default:[1]},{key:"u_height",type:o.Kanata.EUniformType.FLOAT,default:[1]},{key:"u_threshold",type:o.Kanata.EUniformType.FLOAT,default:[1]},{key:"u_softThreshold",type:o.Kanata.EUniformType.FLOAT,default:[1]},{key:"u_intensity",type:o.Kanata.EUniformType.FLOAT,default:[1]}],images:[{key:"u_sourceTex",default:"white"},{key:"u_horizontalBlur",default:"white"},{key:"u_verticalBlur",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"Prefilter",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:[a(),r("./src/builtinAssets/effects/shader/postprocessing/bloom/threshold.frag.glsl")]})}))},"./src/builtinAssets/effects/postprocessing/blur.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/ext.ts"),i=r("./src/builtinAssets/effects/shader/postprocessing/blur/genBlur.ts"),a=r("./src/builtinAssets/effects/shader/postprocessing/screen.vert.glsl"),s=r.n(a);(0,n.registerEffect)("post-process-blur",(function(e){return e.createEffect({name:"post-process-blur",properties:[{key:"u_width",type:o.Kanata.EUniformType.FLOAT,default:[1]},{key:"u_height",type:o.Kanata.EUniformType.FLOAT,default:[1]},{key:"u_radius",type:o.Kanata.EUniformType.FLOAT,default:[4]},{key:"u_sampleCount",type:o.Kanata.EUniformType.FLOAT,default:[1]},{key:"u_sd",type:o.Kanata.EUniformType.FLOAT,default:[1]}],images:[{key:"u_sourceTex",default:"white"},{key:"u_horizontalBlur",default:"white"},{key:"u_verticalBlur",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"Horizontal",useMaterialRenderStates:!0,shaders:[0,1]},{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"Vertical",useMaterialRenderStates:!0,shaders:[0,2]},{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"Resolve",useMaterialRenderStates:!0,shaders:[0,3]}],shaders:[s(),(0,i.genBlur)(r("./src/builtinAssets/effects/shader/postprocessing/blur/blur_horizontal.frag.glsl")),(0,i.genBlur)(r("./src/builtinAssets/effects/shader/postprocessing/blur/blur_vertical.frag.glsl")),r("./src/builtinAssets/effects/shader/postprocessing/blur/blur_resolve.frag.glsl")]})}))},"./src/builtinAssets/effects/postprocessing/fastblur.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/ext.ts"),i=r("./src/builtinAssets/effects/shader/postprocessing/screen.vert.glsl"),a=r.n(i);(0,n.registerEffect)("post-process-fast-blur",(function(e){return e.createEffect({name:"post-process-fast-blur",properties:[{key:"u_width",type:o.Kanata.EUniformType.FLOAT,default:[1]},{key:"u_height",type:o.Kanata.EUniformType.FLOAT,default:[1]},{key:"u_radius",type:o.Kanata.EUniformType.FLOAT,default:[4]},{key:"u_sampleCount",type:o.Kanata.EUniformType.FLOAT,default:[1]}],images:[{key:"u_sourceTex",default:"white"},{key:"u_horizontalBlur",default:"white"},{key:"u_verticalBlur",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"Horizontal",useMaterialRenderStates:!0,shaders:[0,1]},{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"Vertical",useMaterialRenderStates:!0,shaders:[0,2]}],shaders:[a(),r("./src/builtinAssets/effects/shader/postprocessing/blur/fast_blur_horizontal.frag.glsl"),r("./src/builtinAssets/effects/shader/postprocessing/blur/fast_blur_vertical.frag.glsl")]})}))},"./src/builtinAssets/effects/postprocessing/fxaa.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/ext.ts"),i=r("./src/builtinAssets/effects/shader/postprocessing/screen.vert.glsl"),a=r.n(i),s=r("./src/builtinAssets/effects/shader/postprocessing/fxaa/fxaa.frag.glsl"),c=r.n(s);(0,n.registerEffect)("post-process-fxaa",(function(e){return e.createEffect({name:"post-process-fxaa",properties:[{key:"u_width",type:o.Kanata.EUniformType.FLOAT,default:[1]},{key:"u_height",type:o.Kanata.EUniformType.FLOAT,default:[1]}],images:[{key:"u_sourceTex",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"PostProcess",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:[a(),c()]})}))},"./src/builtinAssets/effects/postprocessing/tone.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/ext.ts"),i=r("./src/builtinAssets/effects/shader/postprocessing/screen.vert.glsl"),a=r.n(i),s=r("./src/builtinAssets/effects/shader/postprocessing/tone/tone.frag.glsl"),c=r.n(s);(0,n.registerEffect)("post-process-tone",(function(e){return e.createEffect({name:"post-process-tone",properties:[{key:"u_width",type:o.Kanata.EUniformType.FLOAT,default:[1]},{key:"u_height",type:o.Kanata.EUniformType.FLOAT,default:[1]},{key:"u_exposure",type:o.Kanata.EUniformType.FLOAT,default:[1]}],images:[{key:"u_sourceTex",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"PostProcess",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:[a(),c()]})}))},"./src/builtinAssets/effects/postprocessing/vignette.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/ext.ts"),i=r("./src/builtinAssets/effects/shader/postprocessing/screen.vert.glsl"),a=r.n(i),s=r("./src/builtinAssets/effects/shader/postprocessing/vignette/vignette.frag.glsl"),c=r.n(s);(0,n.registerEffect)("post-process-vignette",(function(e){return e.createEffect({name:"post-process-vignette",properties:[{key:"u_width",type:o.Kanata.EUniformType.FLOAT,default:[1]},{key:"u_height",type:o.Kanata.EUniformType.FLOAT,default:[1]},{key:"u_color",type:o.Kanata.EUniformType.FLOAT4,default:[0,0,0,1]},{key:"u_center",type:o.Kanata.EUniformType.FLOAT2,default:[.5,.5]},{key:"u_intensity",type:o.Kanata.EUniformType.FLOAT,default:[1]},{key:"u_smoothness",type:o.Kanata.EUniformType.FLOAT,default:[.2]},{key:"u_roundness",type:o.Kanata.EUniformType.FLOAT,default:[1]},{key:"u_rounded",type:o.Kanata.EUniformType.FLOAT,default:[0]}],images:[{key:"u_sourceTex",default:"white"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,depthTestOn:!1},lightMode:"PostProcess",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:[a(),c()]})}))},"./src/builtinAssets/effects/shader/bsdfs.glsl.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t// float fresnel = pow( 1.0 - dotVH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disney’s reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX_SmithCorrelated Visibility\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4's roughness\n\t// float alpha = roughness;\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\t// Debug List\n\t// return vec3(alpha, alpha, alpha);\n\t// return f0;\n\t// return vec3(f90, f90, f90);\n\t// return F;\n\t// return vec3(V, V, V);\n\t// return vec3(D, D, D);\n\t// return vec3(( V * D ), ( V * D ), ( V * D ));\n\n\t// return F * V;\n\t// return F * D;\n\n\treturn F * ( V * D );\n}\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via 'environmentBRDF' from \"Physically Based Shading on Mobile\"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\n\treturn fab;\n\n}\n\n// Fdez-Agüera's \"Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting\"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n\n"},"./src/builtinAssets/effects/shader/common_frag.glsl.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="\n#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#define EPSILON_ATAN 1e-2\n\n#define WX_MANUAL_SRGB true\n#define WX_SRGB_FAST_APPROXIMATION true\n\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n\tvec3 clearcoatNormal;\n};\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\n\nuniform vec4 u_ambientLightColorIns;\nuniform vec3 u_mainLightDir;\nuniform vec4 u_mainLightColorIns;\n\nuniform vec3 u_addLightsPos[4];\nuniform vec3 u_addLightsDir[4];\nuniform vec4 u_addLightsColorIns[4];\nuniform vec4 u_addLightsInfo[4];\n\n// temporary\nvec3 clearcoatSpecular = vec3( 0.0 );\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef WX_MANUAL_SRGB\n\n    #ifdef WX_SRGB_FAST_APPROXIMATION\n        vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n    #else //SRGB_FAST_APPROXIMATION\n        vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n        vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n    #endif //SRGB_FAST_APPROXIMATION\n\n    return vec4(linOut, srgbIn.w);;\n\n#else //MANUAL_SRGB\n    \n    return srgbIn;\n\n#endif //MANUAL_SRGB\n}\n\nvec3 gammaCorrection(vec3 color) {\n  return pow(color, vec3(1.0 / 2.2));\n}\n\nvec3 removeGammaCorrection(vec3 color) {\n  return pow(color, vec3(2.2));\n}\n\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/EXT_lights_image_based/README.md#rgbd\nvec3 decodeRGBD(in vec4 color){\n\t\treturn color.rgb / color.a;\n}\n\nfloat getFace( vec3 direction ) {\n\tvec3 absDirection = abs( direction );\n\tfloat face = - 1.0;\n\tif ( absDirection.x > absDirection.z ) {\n\t\tif ( absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t} else {\n\t\tif ( absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t}\n\treturn face;\n}\nvec2 getUV( vec3 direction, float face ) {\n\tvec2 uv;\n\tif ( face == 0.0 ) {\n\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x ); // pos x\n\t} else if ( face == 1.0 ) {\n\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y ); // pos y\n\t} else if ( face == 2.0 ) {\n\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z ); // pos z\n\t} else if ( face == 3.0 ) {\n\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x ); // neg x\n\t} else if ( face == 4.0 ) {\n\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y ); // neg y\n\t} else {\n\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z ); // neg z\n\t}\n\treturn 0.5 * ( uv + 1.0 );\n}\n\n\nvec4 textureEnvMap(sampler2D texture, vec3 position){\n\treturn texture2D(texture, vec2(atan(position.x, position.z) * RECIPROCAL_PI * 0.5+0.5,  acos(position.y) * RECIPROCAL_PI));\n}\n\nvec4 textureEnvMapIncludeMipmapsLod(sampler2D texture, vec3 position, float lod){\n\tlod = floor(lod);\n\n\tif (lod > 7.0) {\n\t\tlod = 7.0;\n\t}\n\n\tfloat posZ = abs(position.z) < EPSILON_ATAN ? EPSILON_ATAN : position.z;\n\n\tvec2 uv = vec2(atan(position.x, posZ) * RECIPROCAL_PI * 0.5 + 0.5, acos(position.y) * RECIPROCAL_PI);\n\n\tfloat scale = pow(2.0, lod);\n\n\treturn texture2D(texture, vec2(uv.x / scale, (uv.y / scale / 2.0) + 1.0 - 1.0/pow(2.0, lod)));\n\n\treturn vec4( position, 0.0);\n}\n\nvec4 textureBilinearEnvMap(sampler2D texture, vec3 direction, float roughness){\n\n\tfloat uvX = (atan(direction.x, direction.z) ) * RECIPROCAL_PI * 0.5 + 0.5;\n\tfloat uvY = acos(direction.y) * RECIPROCAL_PI;\n\tvec2 uv = vec2(uvX, uvY);\n\tvec4 envmap = texture2D(texture, uv);\n\n\treturn envmap;\n\n}\n\n\nvec3 computeDiffuseSHLight(vec3 normal, in vec3 sh[9]) {\n\treturn sh[0] +\n\t\tsh[1] * (normal.y) +\n\t\tsh[2] * (normal.z) +\n\t\tsh[3] * (normal.x) +\n\t\tsh[4] * (normal.y * normal.x) +\n\t\tsh[5] * (normal.y * normal.z) +\n\t\tsh[6] * ((3.0 * normal.z * normal.z) - 1.0) +\n\t\tsh[7] * (normal.z * normal.x) +\n\t\tsh[8] * (normal.x * normal.x - (normal.y * normal.y));\n}\n\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\t// dir can be either a direction vector or a normal vector\n\t// upper-left 3x3 of matrix is assumed to be orthogonal\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\n\n\n\n"},"./src/builtinAssets/effects/shader/common_vert.glsl.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="\nvec4 ObjectToWorldPosition(vec4 point1)\n{\n    return u_world * point1;\n}\n\nmat4 rotation3dY(float angle) {\n\tfloat s = sin(angle);\n\tfloat c = cos(angle);\n\n\treturn mat4(\n\t\tc, 0.0, -s, 0.0,\n\t\t0.0, 1.0, 0.0, 0.0,\n\t\ts, 0.0, c, 0.0,\n    0.0, 0.0, 0.0, 1.0\n\t);\n}\n\n\nmat4 rotation3dX(float angle) {\n\tfloat s = sin(angle);\n\tfloat c = cos(angle);\n\n\treturn mat4(\n\t\t1.0, 0.0, 0.0, 0.0,\n\t\t0.0, c, s, 0.0,\n\t\t0.0, -s, c, 0.0,\n    0.0, 0.0, 0.0, 1.0\n\t);\n}\n\nmat4 BuildTranslation(vec3 delta)\n{\n    mat4 m;\n    m[0][0] = 1.0;\n    m[1][1] = 1.0;\n    m[2][2] = 1.0;\n    m[3] = vec4(delta, 1.0);\n    return m;\n}\n\nmat3 transpose(mat3 m) {\n    return mat3(m[0][0], m[1][0], m[2][0],\n            m[0][1], m[1][1], m[2][1],\n            m[0][2], m[1][2], m[2][2]);\n}\n\nmat4 transpose4(mat4 m) {\n    return mat4(m[0][0], m[1][0], m[2][0], m[3][0],\n                m[0][1], m[1][1], m[2][1], m[3][1],\n                m[0][2], m[1][2], m[2][2], m[3][2],\n                m[0][3], m[1][3], m[2][3], m[3][3]);\n  }\n\nmat3 inverse(mat3 m) {\n    float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n    float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n    float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n    float b01 = a22 * a11 - a12 * a21;\n    float b11 = -a22 * a10 + a12 * a20;\n    float b21 = a21 * a10 - a11 * a20;\n\n    float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n    return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n                b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n                b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\n  \n"},"./src/builtinAssets/effects/shader/morph/index.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{getDefineCode:()=>h});var n,o=r("./src/builtinAssets/effects/shader/morph/attributes.template.glsl"),i=r.n(o),a=r("./src/builtinAssets/effects/shader/morph/funcbody.template.glsl"),s=r.n(a),c=r("./src/builtinAssets/effects/shader/morph/funcdefine.template.glsl"),u=r.n(c),l=r("./src/builtinAssets/effects/shader/morph/defines.inc.glsl"),f=r.n(l),p=r("./src/loader/glTF/geometry/primitives/targets/GLTFTargetsNode.ts"),d=r("./src/loader/glTF/geometry/primitives/attributes/GLTFAttributesNode.ts");function h(){if(!n){for(var e=f().slice(),t=0,r=p.validMorphAttribs;t<r.length;t++){for(var o=r[t],a=u().slice(),c="",l=0;l<32;l++){var h=i().slice();e+=h=_(h,o,l);var v=s().slice();v=m(v=_(v,o,l),"weight_index",Math.floor(l/4)),c+=v=m(v,"weight_sub",String.fromCharCode(119+(l+1)%4))}a=m(a,"func_name","morph"+o),a=m(a,"name_uppercase",o),a=m(a,"func_body",c),e+=a=m(a,"func_type","vec"+(0,d.getComponentCountFromAttributeName)(o))}n=e}return n}function _(e,t,r){return e=m(e,"name_uppercase",t),e=m(e,"name_lowercase",t.toLowerCase()),e=m(e,"index",r)}function m(e,t,r){return e.replace(new RegExp("\\$\\{"+t+"\\}","g"),r.toString())}},"./src/builtinAssets/effects/shader/postprocessing/blur/genBlur.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{genBlur:()=>o});var n="${sample}";function o(e){var t=e.indexOf(n);if(t<0)return e;for(var r=e.substring(0,t),o=0;o<100;o++)r+="#if WX_SAMPLE_COUNT > "+o+"\nsum+=sampleAt("+o+".);\n#endif\n";return r+=e.substring(t+n.length)}},"./src/builtinAssets/effects/shader/skinning/index.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{defines:()=>o.a});var n=r("./src/builtinAssets/effects/shader/skinning/defines.inc.glsl"),o=r.n(n)},"./src/builtinAssets/effects/shader/standard_frag.glsl.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="\n\nvec3 diffuse = vec3( 1.0 );\nfloat opacity = 1.0;\n\nstruct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n\tvec3 clearcoatF0;\n\tfloat clearcoatF90;\n};\n\nuniform vec2 u_metallicRoughnessValues;\nuniform vec4 u_baseColorFactor;\nuniform vec3 u_emissiveFactor;\n\nuniform float u_ior;\n\n#ifdef WX_USE_ALPHA_CUTOFF\n\tuniform float u_alphaCutoff;\n#endif\n\n#ifdef WX_USE_CLEARCOAT\n\tuniform float u_clearcoatFactor;\n\tuniform float u_clearcoatRoughnessFactor;\n\tuniform float u_clearcoatNormalScale;\n#endif\n\n#ifdef WX_USE_BASECOLORMAP\n\tuniform sampler2D u_baseColorMap;\n#endif\n#ifdef WX_USE_NORMALMAP\n\tuniform sampler2D u_normalMap;\n\tuniform float u_normalScale;\n#endif\n#ifdef WX_USE_EMISSIVEMAP\nuniform sampler2D u_emissiveMap;\n#endif\n#ifdef WX_USE_METALMAP\n\tuniform sampler2D u_metallicMap;\n#endif\n#ifdef WX_USE_ROUGHNESSMAP\n\tuniform sampler2D u_roughnessMap;\n#endif\n#ifdef WX_USE_METALROUGHNESSMAP\n\tuniform sampler2D u_metallicRoughnessMap;\n#endif\n#ifdef WX_USE_OCCLUSIONMAP\n\tuniform sampler2D u_occlusionMap;\n\tuniform float u_occlusionStrength;\n#endif\n#ifdef WX_USE_CLEARCOATMAP\n\tuniform sampler2D u_clearcoatMap;\n#endif\n#ifdef WX_USE_CLEARCOATROUGHNESSMAP\n\tuniform sampler2D u_clearcoatRoughnessMap;\n#endif\n#ifdef WX_USE_CLEARCOATNORMALMAP\n\tuniform sampler2D u_clearcoatNormalMap;\n#endif\n#ifdef WX_USE_SPECULARGLOSSINESS\n\tuniform vec3 u_specularFactor;\n\tuniform float u_glossinessFactor;\n\n\t#ifdef WX_USE_SPECULARGLOSSINESSMAP\n\t\tuniform sampler2D u_specularGlossinessMap;\n\t#endif\n#endif\n\n#ifdef WX_USE_TRANSMISSION\n\tuniform float u_transmissionFactor;\n\n\t#ifdef WX_USE_TRANSMISSIONMAP\n\t\tuniform sampler2D u_transmissionMap;\n\t#endif\n#endif\n\nuniform sampler2D u_specularEnvMap;\nuniform float u_specularEnvMapMipCount;\nuniform sampler2D u_brdfLUT;\n\nuniform vec3 u_diffuseSH[9];\n\n#ifdef WX_RECEIVE_SHADOW\n\tuniform float u_shadowStrength;\n\tuniform float u_shadowBias;\n\tuniform vec3 u_shadowColor;\n\tuniform sampler2D u_shadowMap;\n\n\tuniform mat4 u_csmLightSpaceMatrices[4];\n\tuniform vec4 u_csmFarBounds;\n\tuniform vec4 u_shadowTilingOffsets[4];\n#endif\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\t\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n\n}\n\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t// page 32, equation 26: E[window1]\n\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n\t\n}\n\nvoid Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\tvec3 brdf = BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\n\tvec3 irradianceBRDF = irradiance * brdf;\n\t// TODO fix brdf too big or too small\n\tirradianceBRDF = vec3(saturate(irradianceBRDF.x), saturate(irradianceBRDF.y), saturate(irradianceBRDF.z));\n\n\n\t#ifdef WX_USE_CLEARCOAT\n\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\n\treflectedLight.directSpecular += irradianceBRDF;\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\n\t// reflectedLight.directDiffuse += vec3(dotNL, dotNL, dotNL);\n\t// reflectedLight.directDiffuse += geometry.normal;\n\t// reflectedLight.directDiffuse += directLight.direction;\n\n}\n\nvoid IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n\nvoid IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n#ifdef WX_USE_BRDFLUT\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir) );\n\t\t// @Fix change (1.0 - material.roughness) to (material.roughness), for using u_brdfLUT that is Y filp.\n\t\tvec3 brdf = texture2D(u_brdfLUT, vec2(dotNV, material.roughness)).rgb;\n\t\treflectedLight.indirectSpecular += radiance * (material.specularColor * brdf.x + brdf.y);\n\t\treflectedLight.indirectDiffuse += irradiance;\n\n\t\t#ifdef WX_USE_CLEARCOAT\n\t\t\t\tclearcoatSpecular += clearcoatRadiance * (material.specularColor * brdf.x + brdf.y);\n\t\t#endif\n#else\n\t\t// Both indirect specular and indirect diffuse light accumulate here\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance;\n\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\n\t\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\n\t\treflectedLight.indirectSpecular += radiance * singleScattering;\n\t\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n\t\t#ifdef WX_USE_CLEARCOAT\n\t\t\t\tclearcoatSpecular += clearcoatRadiance * singleScattering;\n\t\t#endif\n#endif\n}\n\n\nvec3 getIBLRadiance(vec3 viewDir, vec3 normal, float roughness) {\n\tfloat u_specularEnvIntensity = 1.0;\n\n    vec3 reflectVec = reflect( - viewDir, normal );\n\n    // Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n    reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n    reflectVec = inverseTransformDirection( reflectVec, u_view );\n\n    #ifdef WX_USE_SPECULAR_MIPMAPS\n        float mipCount = 7.0;\n\n        float mip = clamp(roughness * mipCount * 1.5, 0.0, mipCount);\n        float mipF = fract( mip );\n\t\t    float mipInt = floor( mip );\n        float mipBig = clamp(mipInt + 1.0, 0.0, mipCount);\n\n        vec4 specularEnvMapInt = textureEnvMapIncludeMipmapsLod(u_specularEnvMap, reflectVec, mipInt);\n        vec4 specularEnvMapBig = textureEnvMapIncludeMipmapsLod(u_specularEnvMap, reflectVec, mipBig);\n        vec4 specularEnvMap = mix(specularEnvMapInt, specularEnvMapBig, mipF);\n\n    #else\n        vec4 specularEnvMap = textureBilinearEnvMap(u_specularEnvMap, reflectVec, roughness);\n    #endif\n\n    #ifdef WX_USE_SPECULAR_RGBD\n        vec3 specularLight = decodeRGBD(specularEnvMap);\n    #else\n        vec3 specularLight = specularEnvMap.rgb;\n        specularLight = removeGammaCorrection(specularLight);\n    #endif\n\n    return specularLight * u_specularEnvIntensity;\n}\n\n#ifdef WX_USE_TRANSMISSION\n\nvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior,  mat4 modelMatrix ) {\n\n\t// Direction of refracted light.\n\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\n\tvec3 modelScale;\n\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\n\t// The thickness is specified in local space.\n\treturn normalize( refractionVector ) * modelScale * thickness;\n}\n\nvec3 getIBLVolumeRefractionVec (const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\tconst in vec3 specularColor, const in float specularF90, const in vec3 position,  mat4 modelMatrix) {\n\t\t\n\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, 1.0, 1.0, modelMatrix);\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\n\t\treturn refractedRayExit;\n}\n\nfloat getRangeAttenuation(float range, float distance)\n{\n\t// negative range means infinite\n    if (range <= 0.0)\n    {\n        return 1.0 / pow(distance, 2.0);\n    }\n    return max(min(1.0 - pow(distance / range, 4.0), 1.0), 0.0) / pow(distance, 2.0);\n}\n\nfloat getSpotAttenuation(vec3 pointToLight, vec3 spotDirection, float outerConeCos, float innerConeCos)\n{\n    float actualCos = dot(normalize(spotDirection), normalize(-pointToLight));\n    if (actualCos > outerConeCos)\n    {\n        if (actualCos < innerConeCos)\n        {\n            return smoothstep(outerConeCos, innerConeCos, actualCos);\n        }\n        return 1.0;\n    }\n    return 0.0;\n}\n\nvec3 getLightIntensity(vec4 sourceLight, vec3 pointToLight, vec3 color, vec3 direction, float intensity)\n{\n\tfloat rangeAttenuation = 1.0;\n    float spotAttenuation = 1.0;\n    if (sourceLight.x != 0.0)\n    {\n        rangeAttenuation = getRangeAttenuation(sourceLight.y, length(pointToLight));\n    }\n    if (sourceLight.x == 2.0)\n    {\n        spotAttenuation = getSpotAttenuation(pointToLight, direction, sourceLight.w, sourceLight.z);\n    }\n     return rangeAttenuation * spotAttenuation * color * intensity;\n\t//return sourceLight.color;\n}\n\nfloat iorToRoughness(float roughness, float ior)\n{\n    // an IOR of 1.0 results in no microfacet refraction\n    // an IOR of 1.5 results in the default amount of microfacet refraction.\n    return roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n}\n\nvec3 getPunctualTransmissionIntensity( const in vec3 lightDir, const in vec3 view, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness, const in vec3 baseColor, const in float ior )\n{\n\n\tfloat alphaRoughness = pow2( roughness ); \n\tfloat tranmissionRoughness = iorToRoughness(alphaRoughness, ior);\n\tvec3 normalDir = normalize( normal );\n\tvec3 viewDir = normalize( view );\n\tvec3 lightDirMirror = normalize(lightDir + 2.0 * normalDir * dot(-lightDir, normalDir));\n\tvec3 halfDir = normalize( lightDirMirror + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\n\tfloat V = V_GGX_SmithCorrelated( alphaRoughness, dotNL, dotNV );\n\n\tfloat D = D_GGX( alphaRoughness, dotNH );\n\n\treturn (1.0 - F) * baseColor * D * V;\n}\n\n\n#endif\n\n#ifdef WX_RECEIVE_SHADOW\n\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tvec4 bitShift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\n\nfloat shadowCalculation(vec3 posWorld) {\n\tfloat srcShadow = 1.0;\n\n\tvec4 shadowCoord = u_csmLightSpaceMatrices[0] * vec4(posWorld, 1.0);\n\tshadowCoord.xyz = shadowCoord.xyz / shadowCoord.w;\n\tshadowCoord = shadowCoord * 0.5 + 0.5;\n\tshadowCoord.z = shadowCoord.z + step(shadowCoord.x, 0.001) + step(shadowCoord.y, 0.001) + step(0.999, shadowCoord.x) + step(0.999, shadowCoord.y);\n\tshadowCoord.xy = shadowCoord.xy * u_shadowTilingOffsets[0].xy + u_shadowTilingOffsets[0].zw;\n\n\tif (shadowCoord.z > 1.0)\n\t{\n\t\tshadowCoord.z = 1.0;\n\t}\n\n\tfloat currentDepth = shadowCoord.z;\n\n\tfloat bias = u_shadowBias;\n\tfloat zRef = currentDepth - bias;\n\n\tfloat sourceVal = float(zRef < unpackDepth(texture2D(u_shadowMap, shadowCoord.xy)));\n\tsrcShadow = sourceVal;\n\n\treturn srcShadow;\n\t\n\t// return unpackDepth(texture2D(u_shadowMap, shadowCoord.xy));\n\n}\n#endif\n"},"./src/builtinAssets/effects/shader/standard_vert.glsl.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r("./src/builtinAssets/effects/shader/common_vert.glsl.ts"),o=r("./src/builtinAssets/effects/shader/skinning/index.ts"),i=r("./src/builtinAssets/effects/shader/morph/index.ts");const a="#version 100\n\nprecision highp float;\nprecision highp int;\n\nuniform highp mat4 u_world;\nuniform highp mat4 u_view;\nuniform highp mat4 u_viewInverse;\nuniform highp mat4 u_projection;\n\nattribute vec3 a_position;\nattribute highp vec2 a_texCoord;\n#ifdef WX_USE_UV1\nattribute highp vec2 a_texCoord_1;\n#endif\n#ifdef WX_USE_UV2\nattribute highp vec2 a_texCoord_2;\n#endif\n#ifdef WX_USE_UV3\nattribute highp vec2 a_texCoord_3;\n#endif\n#ifdef WX_USE_NORMAL\n  attribute highp vec3 a_normal;\n  #ifdef WX_USE_TANGENT\n    attribute highp vec4 a_tangent;\n  #endif\n#endif\n\nvarying highp vec2 v_UV;\n#ifdef WX_USE_UV1\nvarying highp vec2 v_UV1;\n#endif\n#ifdef WX_USE_UV2\nvarying highp vec2 v_UV2;\n#endif\n#ifdef WX_USE_UV3\nvarying highp vec2 v_UV3;\n#endif\nvarying highp vec3 v_ViewPosition;\n\n#ifdef WX_USE_COLOR_0\n    attribute vec3 a_color;\n    varying highp vec3 v_Color;\n#endif\n\n#ifdef WX_USE_NORMAL\n  varying highp vec3 v_Normal;\n  #ifdef WX_USE_TANGENT\n    varying highp vec3 v_Tangent;\n    varying highp vec3 v_BitTangent;\n  #endif\n#endif\n\n#ifdef WX_USE_TRANSMISSION\n  varying highp vec3 v_WorldPosition;\n#else\n  #ifdef WX_RECEIVE_SHADOW\n    varying highp vec3 v_WorldPosition;\n  #endif\n#endif\n\n#ifdef WX_USE_MAIN_DIR_LIGHT\n  uniform vec3 u_mainLightDir;\n\n  varying highp vec3 v_MainLightDir;\n#endif\n\n#ifdef WX_USE_ADD_LIGHTS\n  uniform vec4 u_addLightsInfo[4];\n  uniform vec3 u_addLightsPos[4];\n  uniform vec3 u_addLightsDir[4];\n\n  varying highp vec3 v_AddLightsDir[WX_ADD_LIGHTS_COUNT];\n  varying highp vec3 v_AddLightsPos[WX_ADD_LIGHTS_COUNT];\n#endif\n\n"+n.default+o.defines+i.getDefineCode()+"\nvoid main()\n{\n#ifdef WX_SKINNED\n    mat4 boneMat = getBoneMat();\n    mat4 modelViewMatrix = u_view * boneMat;\n#else\n    mat4 modelViewMatrix = u_view * u_world;\n#endif\n    mat3 viewMatrixMat3 = mat3(u_view);\n    mat3 normalMatrix = mat3(modelViewMatrix);\n    // TODO ModleViewMatrix Inverse TransposeMatrix\n    // mat3 normalMatrix = transpose(inverse(mat3(modelViewMatrix)));\n\n    vec3 morphedPosition = morphPOSITION(a_position);\n    vec4 mvPosition = modelViewMatrix * vec4(morphedPosition, 1.0);\n\n    // varing\n    v_UV = a_texCoord;\n#ifdef WX_USE_UV1\n    v_UV1 = a_texCoord_1;\n#endif\n#ifdef WX_USE_UV2\n    v_UV2 = a_texCoord_2;\n#endif\n#ifdef WX_USE_UV3\n    v_UV3 = a_texCoord_3;\n#endif\n    v_ViewPosition = mvPosition.xyz;\n\n#ifdef WX_USE_COLOR_0\n    v_Color = a_color;\n#endif\n\n#ifdef WX_USE_TRANSMISSION\n    v_WorldPosition = (u_world * vec4(a_position, 1.0)).xyz;\n#else\n    #ifdef WX_RECEIVE_SHADOW\n        v_WorldPosition = (u_world * vec4(a_position, 1.0)).xyz;\n    #endif\n#endif\n\n#ifdef WX_USE_NORMAL\n    v_Normal = normalize(vec3(normalMatrix * a_normal));\n    #ifdef WX_USE_TANGENT\n        vec3 transformedTangent = (modelViewMatrix * vec4(a_tangent.xyz, 0.0)).xyz;\n        v_Tangent = normalize( transformedTangent );\n        v_BitTangent = normalize(cross(v_Normal, v_Tangent) * a_tangent.w);\n    #endif\n#endif\n\n#ifdef WX_USE_MAIN_DIR_LIGHT\n    // TransformDirection\n    vec3 lightDir = u_mainLightDir;\n\n    v_MainLightDir = normalize(viewMatrixMat3 * lightDir);\n#endif\n\n#ifdef WX_USE_ADD_LIGHTS\n    for(int i = 0; i < WX_ADD_LIGHTS_COUNT; ++i)\n    {\n      vec4 addLightInfo = u_addLightsInfo[i];\n      if (addLightInfo.x == 0.0) {\n        // TransformDirection\n        vec3 addLightDir = u_addLightsDir[i];\n        v_AddLightsDir[i] = normalize(viewMatrixMat3 * addLightDir);\n      } else if (addLightInfo.x == 1.0) {\n        vec3 addlightPos = u_addLightsPos[i];\n\n        // ApplyMatrix\n        v_AddLightsPos[i] = (u_view * vec4(addlightPos, 1.0)).xyz;\n      } else if (addLightInfo.x == 2.0) {\n        vec3 addLightDir = u_addLightsDir[i];\n\n        // TransformDirection\n        v_AddLightsDir[i] = normalize(viewMatrixMat3 * addLightDir);\n        // ApplyMatrix\n        v_AddLightsPos[i] = (u_view * vec4(u_addLightsPos[i], 1.0)).xyz;\n      }\n    }\n#endif\n\n    gl_Position = u_projection * mvPosition;\n\n}\n"},"./src/builtinAssets/effects/shadow-caster.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/builtinAssets/effects/shader/skinning/index.ts"),i=r("./src/ext.ts");(0,n.registerEffect)("shadow-caster",(function(e){return e.createEffect({name:"shadow-caster",properties:[{key:"u_baseColorFactor",type:3,default:[1,1,1,1]}],images:[{key:"u_baseColorMap",default:"white",macro:"WX_USE_BASECOLORMAP"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!0,blendOn:!1,depthWrite:!0,cullFace:i.Kanata.ECullMode.BACK},lightMode:"ShadowCaster",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:["#version 100\n  uniform highp mat4 u_world;\n  uniform highp mat4 u_lightSpaceMatrix;\n\n  "+o.defines+"\n  \n  attribute vec3 a_position;\n  attribute highp vec2 a_texCoord;\n  varying highp vec2 v_uv;\n  varying highp float v_z;\n  \n  void main()\n  {\n      v_uv = a_texCoord;\n\n      vec4 worldPosition = getSkinningWorldPosition(vec4(a_position, 1.0));\n      vec4 lightPos = u_lightSpaceMatrix * worldPosition;\n      v_z = lightPos.z / lightPos.w;\n      gl_Position = lightPos;\n  }","#version 100\n  precision mediump float;\n  precision highp int;\n  varying highp vec2 v_uv;\n  varying highp float v_z;\n  \n  uniform highp vec4 u_baseColorFactor;\n  uniform sampler2D u_baseColorMap;\n\n  vec4 packDepth(float depth)\n  {\n    vec4 bitShift = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);\n    vec4 bitMask = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);\n    vec4 res = mod(\n      depth * bitShift * vec4(255.0, 255.0, 255.0, 255.0),\n      vec4(256.0, 256.0, 256.0, 256.0)) / vec4(255.0, 255.0, 255.0, 255.0);\n    res -= res.xxyz * bitMask;\n    return res;\n  }\n\n  void main()\n  {\n    float a;\n#ifdef WX_USE_BASECOLORMAP\n    a = texture2D(u_baseColorMap, v_uv).a * u_baseColorFactor.a;\n#else\n    a = u_baseColorFactor.a;\n#endif\n    if (a < 0.7114514) {\n      discard;\n    }\n\n    gl_FragData[0] = packDepth(v_z * 0.5 + 0.5);\n  }  \n    "]})}))},"./src/builtinAssets/effects/simple.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/builtinAssets/effects/shader/skinning/index.ts"),i=r("./src/builtinAssets/effects/shader/morph/index.ts"),a=r("./src/ext.ts");(0,n.registerEffect)("simple",(function(e){return e.createEffect({name:"simple",properties:[{key:"u_baseColorFactor",type:a.Kanata.EUniformType.FLOAT4,default:[1,1,1,1]},{key:"u_alphaCutoff",type:a.Kanata.EUniformType.FLOAT,default:[.5]}],images:[{key:"u_baseColorMap",default:"white",macro:"WX_USE_BASECOLORMAP"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!0,blendOn:!1,depthWrite:!0,cullFace:a.Kanata.ECullMode.BACK},lightMode:"ForwardBase",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:["#version 100\n\n  uniform highp mat4 u_view;\n  uniform highp mat4 u_viewInverse;\n  uniform highp mat4 u_vp;\n  uniform highp mat4 u_projection;\n  uniform mat4 u_lightSpaceMatrix;\n  uniform vec4 u_fogInfos;\n  uniform vec3 u_fogColor;\n  uniform float u_gameTime;\n  uniform float u_aspect;\n  uniform vec3 u_ambientLight;\n  uniform vec3 u_lightDir;\n  uniform vec3 u_lightColor;\n  uniform vec3 u_shadowColor;\n  uniform float u_shadowStrength;\n  uniform float u_shadowBias;\n  uniform float u_lightWidthPCSS;\n  uniform float u_blockSizePCSS;\n  uniform vec4 u_csmFarBounds;\n  uniform vec4 u_shadowTilingOffsets[4];\n  uniform mat4 u_csmLightSpaceMatrices[4];\n  uniform vec3 u_SH[9];\n\n  uniform highp mat4 u_world;\n  uniform vec4 u_lightMapScaleOffset;\n\n  "+i.getDefineCode()+"\n\n  "+o.defines+"\n  \n  attribute vec3 a_position;\n  attribute highp vec2 a_texCoord;\n  attribute highp vec2 a_texCoord_1;\n\n  varying highp vec2 v_UV;\n  varying highp vec2 v_UV1;\n  \n  #ifdef WX_USE_COLOR_0\n      attribute vec3 a_color;\n      varying highp vec3 v_Color;\n  #endif\n  \n  void main()\n  {\n    v_UV = a_texCoord;\n    v_UV1 = a_texCoord_1;\n\n    #ifdef WX_USE_COLOR_0\n        v_Color = a_color;\n    #endif\n    \n    vec3 morphedPos = morphPOSITION(a_position);\n\n    vec4 worldPosition = getSkinningWorldPosition(vec4(morphedPos, 1.0));\n    // vec4 worldPosition = getSkinningWorldPosition(vec4(a_position, 1.0));\n\n    gl_Position = u_projection * u_view * worldPosition;\n  }","#version 100\n  precision mediump float;\n  precision highp int;\n  varying highp vec2 v_UV;\n  varying highp vec2 v_UV1;\n\n#ifdef WX_USE_ALPHA_CUTOFF\n\tuniform float u_alphaCutoff;\n#endif\n\n\n#ifdef WX_USE_COLOR_0\n  varying highp vec3 v_Color;\n#endif\n    \n  uniform highp vec4 u_baseColorFactor;\n\n  #ifdef WX_USE_BASECOLORMAP\n    uniform sampler2D u_baseColorMap;\n  #endif\n\n  void main()\n  {\n#ifdef WX_USE_BASECOLORMAP\n    #ifdef WX_BASECOLORMAP_USE_UV1\n        vec2 uvBaseColor = v_UV1;\n    #else\n        vec2 uvBaseColor = v_UV;\n    #endif\n    vec4 baseColor = texture2D(u_baseColorMap, uvBaseColor) * u_baseColorFactor;\n#else\n    vec4 baseColor = u_baseColorFactor;\n#endif\n\n#ifdef WX_USE_ALPHA_CUTOFF\n    if (baseColor.a < u_alphaCutoff) {\n        discard;\n    } else {\n        baseColor.a = 1.0;\n    }\n#endif\n\n#ifdef WX_USE_COLOR_0\n  baseColor = baseColor * vec4(pow(v_Color, vec3(2.2)), 1.0);\n#endif\n\n#ifdef WX_PP_ACTIVE\n    // removeGammaCorrection\n    gl_FragData[0] = vec4(pow(baseColor.rgb, vec3(2.2)), baseColor.a);\n#else\n    gl_FragData[0] = baseColor;\n#endif\n\n  }  \n    "]})}))},"./src/builtinAssets/effects/skybox.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/ext.ts"),i=r("./src/builtinAssets/effects/shader/common_vert.glsl.ts");(0,n.registerEffect)("skybox",(function(e){return e.createEffect({name:"skybox",properties:[{key:"u_rotation",type:o.Kanata.EUniformType.FLOAT,default:[0]},{key:"u_st",type:o.Kanata.EUniformType.FLOAT4,default:[1,1,0,0]}],images:[{key:"u_texture",default:"red"}],defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!1,blendOn:!1,depthWrite:!1,cullFace:o.Kanata.ECullMode.BACK},lightMode:"Skybox",useMaterialRenderStates:!0,shaders:[0,1]}],shaders:["#version 100\n\nuniform float u_gameTime;\n\nuniform highp mat4 u_world;\nuniform highp mat4 u_view;\nuniform highp mat4 u_viewInverse;\nuniform highp mat4 u_projection;\n\nuniform float u_envRotation;\n#ifdef WX_USE_SKY_2D\nuniform vec4 u_st;\n#endif\n\nattribute vec3 a_position;\nattribute highp vec2 a_texCoord;\nvarying highp vec3 v_uv;\nvarying highp vec3 v_ViewPosition;\n"+i.default+"\n\nvoid main()\n{\n\n  mat4 mt_view = u_view;\n\n  mat4 rmt = rotation3dY(u_envRotation);\n  mt_view *= rmt;\n  mt_view = mat4(mat3(mt_view));\n\n#ifdef WX_USE_SKY_CUBE\n    v_uv = a_position;\n#else\n    v_uv = vec3(a_texCoord.xy, 1.0);\n#endif\n\n#ifdef WX_USE_SKY_2D\n    gl_Position = vec4(a_position.xy * u_st.xy + u_st.zw, 1.0, 1.0);\n#else\n    gl_Position = u_projection * mt_view * vec4(a_position, 1.0);\n#endif\n}","#version 100\n\nprecision mediump float;\nprecision highp int;\nvarying highp vec3 v_uv;\n\n#ifdef WX_USE_SKY_CUBE\nuniform samplerCube u_texture;\n#else\nuniform sampler2D u_texture;\n#endif\n\nconst vec2 invAtan = vec2(0.1591, 0.3183);\nvec2 SampleSphericalMap(vec3 v)\n{\n    vec2 uv = vec2(atan(v.z, v.x), asin(v.y));\n    uv *= invAtan;\n    uv += 0.5;\n    return uv;\n}\n\nvoid main()\n{\n  \n#ifdef WX_USE_SKY_CUBE\n  vec4 baseColor = textureCube(u_texture, v_uv);\n#else\n  #ifdef WX_USE_SKY_2D\n      vec2 uv = v_uv.xy;\n      #ifdef WX_USE_SKY_RT\n      uv.y = 1. - uv.y;\n      #endif\n      vec4 baseColor = texture2D(u_texture, uv);\n  #else\n      vec2 sphericalUv = v_uv.xy;\n      #ifdef WX_SAMPLER_SKY_HALF\n          vec4 baseColor = texture2D(u_texture, vec2(sphericalUv.x, sphericalUv.y / 2.0 ));\n      #else\n          vec4 baseColor = texture2D(u_texture, sphericalUv);\n      #endif\n  #endif\n#endif\n\n#ifdef WX_PP_ACTIVE\n  gl_FragData[0] = vec4(pow(baseColor.rgb, vec3(2.2)), baseColor.a);\n#else\n  gl_FragData[0] = baseColor;\n#endif\n\n}  \n"]})}))},"./src/builtinAssets/effects/standard.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/ext.ts"),o=r("./src/assets/factories.ts"),i=r("./src/builtinAssets/effects/shader/standard_vert.glsl.ts"),a=r("./src/builtinAssets/effects/shader/common_frag.glsl.ts"),s=r("./src/builtinAssets/effects/shader/standard_frag.glsl.ts"),c=r("./src/builtinAssets/effects/shader/bsdfs.glsl.ts");(0,o.registerEffect)("standard",(function(e){return e.createEffect({name:"standard",defaultRenderQueue:2e3,passes:[{renderStates:{cullOn:!0,blendOn:!1,depthWrite:!0,cullFace:n.Kanata.ECullMode.BACK},lightMode:"ForwardBase",useMaterialRenderStates:!0,shaders:[0,1]}],properties:[{key:"u_baseColorFactor",type:3,default:[1,1,1,1]},{key:"u_metallicRoughnessValues",type:1,default:[0,1]},{key:"u_normalScale",type:0,default:[1]},{key:"u_emissiveFactor",type:2,default:[0,0,0]},{key:"u_occlusionStrength",type:0,default:[1]},{key:"u_specularFactor",type:2,default:[1,1,1]},{key:"u_glossinessFactor",type:0,default:[1]},{key:"u_ior",type:0,default:[1.5]},{key:"u_clearcoatFactor",type:0,default:[0]},{key:"u_clearcoatRoughnessFactor",type:0,default:[0]},{key:"u_clearcoatNormalScale",type:0,default:[1]},{key:"u_alphaCutoff",type:0,default:[.5]},{key:"u_transmissionFactor",type:0,default:[1]}],images:[{key:"u_brdfLUT",default:"brdf-lut"},{key:"u_baseColorMap",default:"white",macro:"WX_USE_BASECOLORMAP"},{key:"u_metallicRoughnessMap",default:"green",macro:"WX_USE_METALROUGHNESSMAP"},{key:"u_normalMap",default:"white",macro:"WX_USE_NORMALMAP"},{key:"u_emissiveMap",default:"white",macro:"WX_USE_EMISSIVEMAP"},{key:"u_occlusionMap",default:"white",macro:"WX_USE_OCCLUSIONMAP"},{key:"u_clearcoatMap",default:"white",macro:"WX_USE_CLEARCOATMAP"},{key:"u_specularGlossinessMap",default:"white",macro:"WX_USE_SPECULARGLOSSINESSMAP"},{key:"u_metallicMap",default:"black",macro:"WX_USE_METALMAP"},{key:"u_roughnessMap",default:"white",macro:"WX_USE_ROUGHNESSMAP"},{key:"u_clearcoatRoughnessMap",default:"white",macro:"WX_USE_CLEARCOATROUGHNESSMAP"},{key:"u_clearcoatNormalMap",default:"white",macro:"WX_USE_CLEARCOATNORMALMAP"},{key:"u_transmissionMap",default:"white",macro:"WX_USE_TRANSMISSIONMAP"}],shaders:[i.default,"#version 100\n\n#define WX_USE_BRDFLUT true\n\nprecision highp float;\nprecision highp int;\n\nuniform float u_gameTime;\nuniform highp mat4 u_world;\nuniform highp mat4 u_view;\nuniform highp mat4 u_projection;\nuniform highp mat4 u_viewInverse;\n\nvarying highp vec2 v_UV;\nvarying highp vec2 v_UV1;\nvarying highp vec3 v_ViewPosition;\n\n#ifdef WX_USE_COLOR_0\n      varying highp vec3 v_Color;\n  #endif\n\n#ifdef WX_USE_NORMAL\n  varying highp vec3 v_Normal;\n\n  #ifdef WX_USE_TANGENT\n      varying highp vec3 v_Tangent;\n      varying highp vec3 v_BitTangent;\n  #endif\n#endif\n\n#ifdef WX_USE_TRANSMISSION\n  varying highp vec3 v_WorldPosition;\n#else\n  #ifdef WX_RECEIVE_SHADOW\n    varying highp vec3 v_WorldPosition;\n  #endif\n#endif\n\n#ifdef WX_USE_MAIN_DIR_LIGHT\n  varying highp vec3 v_MainLightDir;\n#endif\n\n#ifdef WX_USE_ADD_LIGHTS\n  varying highp vec3 v_AddLightsDir[WX_ADD_LIGHTS_COUNT];\n  varying highp vec3 v_AddLightsPos[WX_ADD_LIGHTS_COUNT];\n#endif\n\n"+a.default+c.default+s.default+"\nvoid main()\n{\n    vec4 diffuseColor = vec4 (diffuse, opacity);\n\n    // ReflectedLight\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = vec3(0.0);\n\n#ifdef WX_USE_BASECOLORMAP\n    #ifdef WX_BASECOLOR_MAP_USE_UV1\n        vec2 uvBaseColor = v_UV1;\n    #elif defined(WX_BASECOLOR_MAP_USE_UV2)\n        vec2 uvBaseColor = v_UV2;\n    #elif defined(WX_BASECOLOR_MAP_USE_UV3)\n        vec2 uvBaseColor = v_UV3;\n    #else\n        vec2 uvBaseColor = v_UV;\n    #endif\n\n    vec4 baseColor = SRGBtoLINEAR(texture2D(u_baseColorMap, uvBaseColor));\n#else\n    vec4 baseColor = vec4(1.0, 1.0, 1.0, 1.0);\n#endif\n\n#ifdef WX_MANUAL_LINEAR_BASECOLORFACTOR\n    baseColor *= u_baseColorFactor;\n#else\n    baseColor *= SRGBtoLINEAR(u_baseColorFactor);\n#endif\n\n#ifdef WX_USE_ALPHA_CUTOFF\n    if (baseColor.a < u_alphaCutoff) {\n        discard;\n    } else {\n        baseColor.a = 1.0;\n    }\n#endif\n\n    diffuseColor *= baseColor;\n\n#ifdef WX_USE_COLOR_0\n    diffuseColor *= vec4(v_Color, 1.0);\n#endif\n\n    // metallic roughness\n    float roughness = u_metallicRoughnessValues.y;\n    float metallic = u_metallicRoughnessValues.x;\n#ifdef WX_USE_METALROUGHNESSMAP\n    #ifdef WX_METALROUGHNESS_MAP_USE_UV1\n        vec2 uvMetalRougness = v_UV1;\n    #elif defined(WX_METALROUGHNESS_MAP_USE_UV2)\n        vec2 uvMetalRougness = v_UV2;\n    #elif defined(WX_METALROUGHNESS_MAP_USE_UV3)\n        vec2 uvMetalRougness = v_UV3;\n    #else\n        vec2 uvMetalRougness = v_UV;\n    #endif\n\n    // Roughness is stored in the 'g' channel, metallic is stored in the 'b' channel.\n    // This layout intentionally reserves the 'r' channel for (optional) occlusion map data\n    vec4 mrSample = texture2D(u_metallicRoughnessMap, uvMetalRougness);\n    roughness *= mrSample.g;\n    metallic *= mrSample.b;\n#else\n    #ifdef WX_USE_ROUGHNESSMAP\n        roughness *= texture2D(u_roughnessMap, v_UV).r;\n    #endif\n    #ifdef WX_USE_METALMAP\n        metallic *= texture2D(u_metallicMap, v_UV).r;\n    #endif\n#endif\n\n    // Normal\n#ifdef WX_USE_NORMAL\n    vec3 normal = normalize(v_Normal);\n\n    #ifndef WX_USE_CULLON\n      #ifndef WX_USE_GLTF\n        float facing = gl_FrontFacing ? 1.0 : -1.0;\n        normal *= facing;\n      #endif\n    #endif\n\n    #ifdef WX_USE_TANGENT\n        vec3 tangent = normalize(v_Tangent);\n\n        #ifdef WX_USE_NORMALMAP\n            #ifdef WX_NORMAL_MAP_USE_UV1\n                vec2 uvNormal = v_UV1;\n            #elif defined(WX_NORMAL_MAP_USE_UV2)\n                vec2 uvNormal = v_UV2;\n            #elif defined(WX_NORMAL_MAP_USE_UV3)\n                vec2 uvNormal = v_UV3;\n            #else\n                vec2 uvNormal = v_UV;\n            #endif\n\n            vec3 normalSample = texture2D(u_normalMap, uvNormal).xyz * 2.0 - 1.0;\n            normalSample *= u_normalScale;\n\n            vec3 bitangent = normalize( v_BitTangent );\n            mat3 vTBN = mat3( tangent, bitangent, normal );\n            normal = normalize( vTBN * normalSample );\n        #endif\n    #else\n        vec3 tangent = vec3(0.0, 0.0, 0.0);\n    #endif\n#else\n    vec3 normal = vec3(0.0, 0.0, 1.0);\n#endif\n\n    // Emissivemap\n    totalEmissiveRadiance = u_emissiveFactor;\n#ifdef WX_USE_EMISSIVEMAP\n    #ifdef WX_EMISSIVE_MAP_USE_UV1\n        vec2 uvEmissive = v_UV1;\n    #elif defined(WX_EMISSIVE_MAP_USE_UV2)\n        vec2 uvEmissive = v_UV2;\n    #elif defined(WX_EMISSIVE_MAP_USE_UV3)\n        vec2 uvEmissive = v_UV3;\n    #else\n        vec2 uvEmissive = v_UV;\n    #endif\n\n    vec4 emissiveColor = SRGBtoLINEAR(texture2D(u_emissiveMap, uvEmissive));\n    totalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n\n  // Apply optional PBR terms for additional (optional) shading\n  #ifdef WX_USE_OCCLUSIONMAP\n      #ifdef WX_OCCLUSION_MAP_USE_UV1\n        vec2 uvOcclusion = v_UV1;\n      #elif defined(WX_OCCLUSION_MAP_USE_UV2)\n        vec2 uvOcclusion = v_UV2;\n      #elif defined(WX_OCCLUSION_MAP_USE_UV3)\n        vec2 uvOcclusion = v_UV3;\n      #else\n        vec2 uvOcclusion = v_UV;\n      #endif\n      float ao = texture2D(u_occlusionMap, uvOcclusion).r;\n      ao *= u_occlusionStrength;\n  #else\n      float ao = 1.0;\n  #endif\n      \n    // accumulation\n    PhysicalMaterial material;\n\n#ifdef WX_USE_SPECULARGLOSSINESS\n    vec3 specularFactor = u_specularFactor;\n    float glossinessFactor = u_glossinessFactor;\n\n    #ifdef WX_USE_SPECULARGLOSSINESSMAP\n        vec4 specularGlossinessMap = texture2D(u_specularGlossinessMap, v_UV);\n        specularFactor *= SRGBtoLINEAR(specularGlossinessMap).rgb;\n        glossinessFactor *= specularGlossinessMap.a;\n    #endif\n\n    material.diffuseColor = diffuseColor.rgb * ( 1.0 - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );\n    material.specularColor = specularFactor;\n\t  material.specularF90 = 1.0;\n\n    roughness = 1.0 - glossinessFactor;\n#else\n    material.diffuseColor = diffuseColor.rgb * ( 1.0 - metallic );\n    float specularIntensityFactor = 1.0;\n    vec3 specularColorFactor = vec3( 1.0 );\n    material.specularColor = mix( min( pow2( ( u_ior - 1.0 ) / ( u_ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metallic );\n\n    material.specularF90 = 1.0;\n#endif\n\n    material.roughness = max( roughness, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.\n    material.roughness = min( material.roughness, 1.0 );\n\n    GeometricContext geometry;\n\n    geometry.position = v_ViewPosition;\n    geometry.normal = normal;\n    geometry.viewDir = normalize( vec3(0.0) - v_ViewPosition );\n\n    IncidentLight directLight;\n\n    vec3 iblIrradiance = vec3( 0.0 );\n    vec3 irradiance = vec3( 0.0 );\n    vec3 radiance = vec3( 0.0 );\n\t  vec3 clearcoatRadiance = vec3( 0.0 );\n\n#ifdef WX_USE_CLEARCOAT\n    geometry.clearcoatNormal = geometry.normal;\n\n    material.clearcoat = u_clearcoatFactor;\n    material.clearcoat = saturate( material.clearcoat ); // Burley clearcoat model\n\n    material.clearcoatRoughness = u_clearcoatRoughnessFactor;\n    material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n    material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n\n    material.clearcoatF0 = vec3( 0.04 );\n\t  material.clearcoatF90 = 1.0;\n\n    clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n#endif\n    \n    // MainLights\n#ifdef WX_USE_MAIN_DIR_LIGHT\n    vec3 lightDir = v_MainLightDir;\n\n    vec3 mainLightColor = u_mainLightColorIns.rgb * u_mainLightColorIns.a;\n    directLight.color = mainLightColor;\n\n    #ifdef WX_RECEIVE_SHADOW\n        directLight.color = directLight.color * shadowCalculation(v_WorldPosition);\n    #endif\n    directLight.direction = lightDir;\n    directLight.visible = true;\n    Direct_Physical( directLight, geometry, material, reflectedLight );\n#endif\n\n\n  vec3 tranmissionAll = vec3(0.0);\n  float transmissionFactor = 0.0;\n  \n    // AddLights\n#ifdef WX_USE_ADD_LIGHTS\n\n    for(int i = 0; i < WX_ADD_LIGHTS_COUNT; ++i)\n    {\n      vec4 addLightInfo = u_addLightsInfo[i];\n      vec3 addLightColor = u_addLightsColorIns[i].rgb * u_addLightsColorIns[i].a;\n\n      if (addLightInfo.x == 0.0) {\n        // Directional Light\n        directLight.direction = v_AddLightsDir[i];\n        Direct_Physical( directLight, geometry, material, reflectedLight );\n      } else if (addLightInfo.x == 1.0) {\n        // Point Light\n        float range = addLightInfo.y;\n        vec3 pointLightPos = v_AddLightsPos[i];\n        vec3 lVector = pointLightPos - geometry.position;\n        \n        float lightDistance = length( lVector );\n        float attenuation = getDistanceAttenuation(lightDistance, range, 1.0);\n\n        directLight.color = addLightColor * attenuation;\n        directLight.direction = normalize( lVector );\n        directLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n        Direct_Physical( directLight, geometry, material, reflectedLight );\n      } else if (addLightInfo.x == 2.0) {\n        // Spot Light\n        float range = addLightInfo.y;\n        vec3 spotLightPos = v_AddLightsPos[i];\n        vec3 spotLightDir = v_AddLightsDir[i];\n        vec3 lVector = spotLightPos - geometry.position;\n\n        directLight.direction = normalize( lVector );\n\n        float angleCos = dot( directLight.direction, spotLightDir );\n        // Use Basic Clamp\n        // float spotAttenuation = clamp((angleCos - addLightInfo.w) / (addLightInfo.z - addLightInfo.w), 0.0, 1.0);\n\n        // Use smoothstep\n        float spotAttenuation = smoothstep( addLightInfo.w, addLightInfo.z, angleCos );\n\n        if ( spotAttenuation > 0.0 ) {\n          float lightDistance = length( lVector );\n    \n          directLight.color = addLightColor * spotAttenuation;\n          directLight.color *= getDistanceAttenuation( lightDistance, range, 1.0 );\n          directLight.visible = ( directLight.color != vec3( 0.0 ) );\n        } else {\n          directLight.color = vec3( 0.0 );\n          directLight.visible = false;\n        }\n\n        Direct_Physical( directLight, geometry, material, reflectedLight );\n      }\n\n      #ifdef WX_USE_TRANSMISSION\n        transmissionFactor = u_transmissionFactor;\n\n        #ifdef WX_USE_TRANSMISSIONMAP\n            transmissionFactor *= texture2D( u_transmissionMap, v_UV ).r;\n        #endif\n\n          vec3 pos = v_WorldPosition;\n        vec3 cameraPos = vec3(u_viewInverse[3][0], u_viewInverse[3][1], u_viewInverse[3][2]);\n\n          vec3 v = normalize( cameraPos - pos );\n        // vec3 n = inverseTransformDirection( normal, u_view );\n          vec3 n = geometry.normal;\n\n          vec3 transmissionVec = getIBLVolumeRefractionVec(n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90, pos, u_world);\n          vec3 pointToLight = directLight.direction;\n          pointToLight -= transmissionVec;\n          vec3 lightDir = normalize(pointToLight);\n          vec3 intensity =  getLightIntensity(addLightInfo, pointToLight, directLight.color, directLight.direction, u_addLightsColorIns[i].a);\n          tranmissionAll += intensity * getPunctualTransmissionIntensity(lightDir, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness, material.diffuseColor, u_ior);\n      #endif\n      \n    }\n#endif\n\n    // AmbientLight\n#ifdef WX_USE_AMBIENT_LIGHT\n    vec3 ambientLightColor = u_ambientLightColorIns.rgb * u_ambientLightColorIns.a;\n    irradiance = getAmbientLightIrradiance( ambientLightColor ) * ao;\n#endif\n\n#ifdef WX_USE_IBL_DIFFUSE\n    float u_diffuseEnvIntensity = 1.0;\n\n    // vec3 shNormal = geometry.normal;\n    vec3 shNormal = inverseTransformDirection( geometry.normal, u_view );\n    \n    vec3 diffuseLight = computeDiffuseSHLight(shNormal, u_diffuseSH);\n\n    iblIrradiance += diffuseLight *  material.diffuseColor * ao * u_diffuseEnvIntensity;\n#endif\n\n#ifdef WX_USE_IBL_SPECULAR\n    radiance += getIBLRadiance(geometry.viewDir, geometry.normal, material.roughness);\n#endif\n\n    // IndirectDiffuse\n    IndirectDiffuse_Physical( irradiance, geometry, material, reflectedLight );\n    \n    // IndirectSpecular\n    IndirectSpecular_Physical( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n\n    vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\t  vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\n\n  //  totalSpecular = vec3( 0.0 );\n  //  totalEmissiveRadiance = vec3( 0.0 );\n    totalDiffuse = mix( totalDiffuse, tranmissionAll.rgb, transmissionFactor );\n\n    vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\n#ifdef WX_USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n#endif\n\n    vec3 color = outgoingLight;\n\n    // Debug OutputColor\n    // color = baseColor.rgb;\n    // color = irradiance;\n    // color = radiance;\n    // color = reflectedLight.directDiffuse;\n    // color = reflectedLight.directSpecular;\n    // color = reflectedLight.directDiffuse + reflectedLight.directSpecular;\n    // color = reflectedLight.indirectDiffuse;\n    // color = reflectedLight.indirectSpecular;\n    // color = reflectedLight.indirectDiffuse + reflectedLight.indirectSpecular;\n    // color = totalDiffuse;\n    // color = totalSpecular;\n    // color = totalEmissiveRadiance;\n\n    // gamma correct\n#ifndef WX_PP_ACTIVE\n    color = gammaCorrection(color);\n#endif\n\n    // Debug OutputColor Last\n    // color = directLight.color;\n    // color = baseColor.rgb;\n    // color = geometry.viewDir;\n    // color = geometry.normal;\n    // color = normal;\n    // color = (v_Normal + vec3(1.0, 1.0, 1.0)) / 2.0;\n    // color = v_Tangent;\n    // color = v_BitTangent;\n    // color = reflect( - geometry.viewDir, geometry.normal );\n    // color = geometry.position;\n    // color = geometry.viewDir;\n    // color = vec3(metallic, metallic, metallic);\n    // color = material.specularColor;\n    // color = diffuseColor.rgb;\n    // color = vec3(material.roughness);\n    // color = vec3(u_clearcoatRoughnessFactor, u_clearcoatRoughnessFactor, u_clearcoatRoughnessFactor);\n    // color = iblIrradiance;\n\n    // color = vec3(gl_FrontFacing? 1.0: 0.0, 0.0, 0.0);\n\n\n    gl_FragData[0] = vec4(color, diffuseColor.a);\n}\n"]})}))},"./src/builtinAssets/geometries/ar-camera-plane.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/builtinAssets/geometries/getBuiltinVertexLayout.ts"),i=r("./src/math/vector3.ts");(0,n.registerGeometry)("ar-camera-plane",(function(e){var t=e.createGeometry((0,o.default)(e),new Float32Array([1,1,0,0,0,-1,1,1,0,0,0,0,0,0,-1,1,0,0,0,-1,0,1,0,0,0,0,0,0,1,-1,0,0,0,-1,1,0,0,0,0,0,0,0,-1,-1,0,0,0,-1,0,0,0,0,0,0,0,0]),new Uint16Array([3,1,0,2,3,0]));return t.setBoundBox(new i.default,i.default.createFromNumber(1,1,.05)),t.addSubMesh(6,0,0),t}))},"./src/builtinAssets/geometries/cube.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/builtinAssets/geometries/getBuiltinVertexLayout.ts"),i=r("./src/math/vector3.ts"),a=new Float32Array([-.5,-.5,.5,0,0,1,0,1,.6909865140914917,.6528356075286865,1,0,0,-1,.5,-.5,.5,0,0,1,1,1,.9966580867767334,.6528356075286865,1,0,0,-1,-.5,.5,.5,0,0,1,0,0,.6909865140914917,.3471641540527344,1,0,0,-1,.5,.5,.5,0,0,1,1,0,.9966580867767334,.3471641540527344,1,0,0,-1,-.5,.5,-.5,0,1,0,0,0,.3097273111343384,.6528357267379761,1,0,0,-1,.5,.5,-.5,0,1,0,1,0,.004055766388773918,.6528357267379761,1,0,0,-1,-.5,-.5,-.5,0,0,-1,0,0,.34716424345970154,.3471641540527344,1,0,0,-1,.5,-.5,-.5,0,0,-1,1,0,.6528358459472656,.3471641540527344,1,0,0,-1,-.5,.5,.5,0,1,0,0,1,.3097273111343384,.3471641540527344,1,0,0,-1,.5,.5,.5,0,1,0,1,1,.004055766388773918,.3471641540527344,1,0,0,-1,-.5,.5,-.5,0,0,-1,0,1,.34716424345970154,.6528357267379761,1,0,0,-1,.5,.5,-.5,0,0,-1,1,1,.6528358459472656,.6528357267379761,1,0,0,-1,-.5,-.5,-.5,0,-1,0,0,1,.34716424345970154,.9959442615509033,1,0,0,-1,-.5,-.5,.5,0,-1,0,0,0,.34716424345970154,.6902726888656616,1,0,0,-1,.5,-.5,.5,0,-1,0,1,0,.6528358459472656,.6902726888656616,1,0,0,-1,.5,-.5,-.5,0,-1,0,1,1,.6528358459472656,.9959442615509033,1,0,0,-1,.5,-.5,.5,1,0,0,0,1,.6902728080749512,.6902726888656616,0,0,-1,-1,.5,.5,.5,1,0,0,0,0,.9959442615509033,.6902726888656616,0,0,-1,-1,.5,.5,-.5,1,0,0,1,0,.9959442615509033,.9959442615509033,0,0,-1,-1,.5,-.5,-.5,1,0,0,1,1,.6902728080749512,.9959442615509033,0,0,-1,-1,-.5,-.5,-.5,-1,0,0,0,1,.3097273111343384,.9959442615509033,0,0,1,-1,-.5,.5,-.5,-1,0,0,0,0,.004055766388773918,.9959442615509033,0,0,1,-1,-.5,.5,.5,-1,0,0,1,0,.004055766388773918,.6902726888656616,0,0,1,-1,-.5,-.5,.5,-1,0,0,1,1,.3097273111343384,.6902726888656616,0,0,1,-1]),s=new Uint16Array([0,2,3,0,3,1,8,4,5,8,5,9,10,6,7,10,7,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),c=i.default.createFromNumber(0,0,0),u=i.default.createFromNumber(1,1,1);(0,n.registerGeometry)("cube",(function(e){var t=e.createGeometry((0,o.default)(e),a,s);return t.setBoundBox(c,u),t.addSubMesh(36,0,0),t}))},"./src/builtinAssets/geometries/cylinder.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/builtinAssets/geometries/getBuiltinVertexLayout.ts"),i=r("./src/math/vector3.ts"),a=new Float32Array([.4755285680294037,-1,-.1545085906982422,.9510567784309387,0,-.30901601910591125,.10059985518455505,.9995462894439697,.00828967522829771,.9973998069763184,-.30901607871055603,0,-.9510568380355835,-1,.4045087695121765,-1,-.2938928008079529,.80901700258255,0,-.5877853631973267,.20050539076328278,.9995462894439697,.05773448944091797,.9973998069763184,-.5877853035926819,0,-.80901700258255,-1,.2938928008079529,-1,-.4045087397098541,.5877850651741028,0,-.8090171217918396,.3004109859466553,.9995462894439697,.10717926919460297,.9973998069763184,-.8090171217918396,0,-.5877850651741028,-1,.154508575797081,-1,-.4755285084247589,.30901679396629333,0,-.9510565400123596,.4003165066242218,.9995462894439697,.15662389993667603,.9973998069763184,-.9510565996170044,0,-.30901679396629333,-1,0,-1,-.5000002384185791,0,0,-1,.5002219676971436,.9995462894439697,.20606841146945953,.9973998069763184,-1,0,0,-1,-.154508575797081,-1,-.4755284786224365,-.3090171217918396,0,-.9510564804077148,.6001272797584534,.9995462894439697,.2555127739906311,.9973998069763184,-.9510564804077148,0,.3090171217918396,-1,-.2938927412033081,-1,-.40450865030288696,-.5877854228019714,0,-.8090168237686157,.7000327110290527,.9995462894439697,.30495697259902954,.9973998069763184,-.8090168833732605,0,.5877854228019714,-1,-.4045086205005646,-1,-.2938927114009857,-.8090170621871948,0,-.5877851247787476,.7999379634857178,.9995462894439697,.35440075397491455,.9973997473716736,-.5877851247787476,0,.8090170621871948,-1,-.47552838921546936,-1,-.1545085310935974,-.9510565400123596,0,-.3090168535709381,.8998432159423828,.9995462894439697,.40384477376937866,.9973997473716736,-.3090168833732605,0,.9510565400123596,-1,-.5000001192092896,-1,0,-1,0,0,.9997490048408508,.9995462894439697,.45328840613365173,.9973998069763184,0,0,1,-1,-.47552838921546936,-1,.1545085310935974,-.9510565400123596,0,.30901703238487244,.10059934854507446,.9995462894439697,.5027321577072144,.9973998069763184,.30901703238487244,0,.9510564804077148,-1,-.4045085906982422,-1,.29389268159866333,-.8090168833732605,0,.5877853631973267,.20050501823425293,.9995462894439697,.5521758198738098,.9973998069763184,.5877853631973267,0,.8090168833732605,-1,-.29389268159866333,-1,.4045085608959198,-.5877851843833923,0,.8090170621871948,.30041056871414185,.9995462894439697,.6016191244125366,.9973998069763184,.8090170621871948,0,.5877851843833923,-1,-.1545085310935974,-1,.4755283296108246,-.3090169429779053,0,.9510565400123596,.4003159999847412,.9995462894439697,.6510623097419739,.9973998069763184,.9510565400123596,0,.3090169429779053,-1,-1.4901161193847656e-8,-1,.5000000596046448,0,0,1,.5002214908599854,.9995462894439697,.7005053162574768,.9973998069763184,1,0,0,-1,.15450848639011383,-1,.4755282998085022,.3090170621871948,0,.9510565400123596,.6001268029212952,.9995462894439697,.7499484419822693,.9973998069763184,.9510564804077148,0,-.3090170621871948,-1,.29389262199401855,-1,.4045085310935974,.5877852439880371,0,.80901700258255,.7000321745872498,.9995462894439697,.7993921637535095,.9973998069763184,.80901700258255,0,-.5877852439880371,-1,.404508501291275,-1,.29389265179634094,.80901700258255,0,.5877852439880371,.7999374866485596,.9995462894439697,.8488357663154602,.9973998069763184,.5877852439880371,0,-.80901700258255,-1,.4755282700061798,-1,.15450850129127502,.9510565400123596,0,.3090169429779053,.8998427987098694,.9995462894439697,.8982797265052795,.9973998069763184,.3090169429779053,0,-.9510565400123596,-1,.5,-1,0,1,0,0,.9997480511665344,.9995462894439697,.9477241039276123,.9973998069763184,0,0,-1,-1,.4755285680294037,1,-.1545085906982422,.9510567784309387,0,-.30901601910591125,.10059956461191177,.0005692243576049805,.008289572782814503,.3652527928352356,-.30901604890823364,0,-.9510568380355835,-1,.4045087695121765,1,-.2938928008079529,.80901700258255,0,-.5877853631973267,.20050527155399323,.0005692243576049805,.05773448944091797,.3652527928352356,-.5877853035926819,0,-.8090169429779053,-1,.2938928008079529,1,-.4045087397098541,.5877850651741028,0,-.8090171217918396,.3004109859466553,.0005692243576049805,.10717926919460297,.3652527928352356,-.8090171217918396,0,-.5877850651741028,-1,.154508575797081,1,-.4755285084247589,.30901679396629333,0,-.9510565400123596,.4003165066242218,.0005692243576049805,.15662389993667603,.3652527928352356,-.9510565996170044,0,-.30901679396629333,-1,0,1,-.5000002384185791,0,0,-1,.5002219676971436,.0005692243576049805,.20606841146945953,.3652527928352356,-1,0,0,-1,-.154508575797081,1,-.4755284786224365,-.3090171217918396,0,-.9510564804077148,.6001272797584534,.0005692243576049805,.2555127739906311,.3652527928352356,-.9510564804077148,0,.3090171217918396,-1,-.2938927412033081,1,-.40450865030288696,-.5877854228019714,0,-.8090168237686157,.7000327706336975,.0005692243576049805,.30495697259902954,.3652527928352356,-.8090168833732605,0,.5877854228019714,-1,-.4045086205005646,1,-.2938927114009857,-.8090170621871948,0,-.5877851247787476,.7999381422996521,.0005692243576049805,.354401171207428,.3652527928352356,-.5877851247787476,0,.8090170621871948,-1,-.47552838921546936,1,-.1545085310935974,-.9510565400123596,0,-.3090168535709381,.8998434543609619,.0005692243576049805,.4038451611995697,.3652527928352356,-.3090168535709381,0,.9510565400123596,-1,-.5000001192092896,1,0,-1,0,0,.9997491240501404,.0005692243576049805,.4532887637615204,.3652527928352356,0,0,1,-1,-.47552838921546936,1,.1545085310935974,-.9510565400123596,0,.30901703238487244,.10059964656829834,.0005692243576049805,.5027323961257935,.3652527928352356,.30901697278022766,0,.9510565400123596,-1,-.4045085906982422,1,.29389268159866333,-.8090168833732605,0,.5877853631973267,.2005050927400589,.0005692243576049805,.5521758198738098,.3652527928352356,.5877854228019714,0,.8090168833732605,-1,-.29389268159866333,1,.4045085608959198,-.5877851843833923,0,.8090170621871948,.30041056871414185,.0005692243576049805,.6016191244125366,.3652527928352356,.8090170621871948,0,.5877851843833923,-1,-.1545085310935974,1,.4755283296108246,-.3090169429779053,0,.9510565400123596,.4003159999847412,.0005692243576049805,.6510623097419739,.3652527928352356,.9510565400123596,0,.3090169429779053,-1,-1.4901161193847656e-8,1,.5000000596046448,0,0,1,.5002214908599854,.0005692243576049805,.7005053162574768,.3652527928352356,1,0,0,-1,.15450848639011383,1,.4755282998085022,.3090170621871948,0,.9510565400123596,.6001268029212952,.0005692243576049805,.7499484419822693,.3652527928352356,.9510564804077148,0,-.3090170621871948,-1,.29389262199401855,1,.4045085310935974,.5877852439880371,0,.80901700258255,.700032114982605,.0005692243576049805,.7993921637535095,.3652527928352356,.80901700258255,0,-.5877852439880371,-1,.404508501291275,1,.29389265179634094,.80901700258255,0,.5877852439880371,.7999371290206909,.0005692243576049805,.8488357663154602,.3652527928352356,.5877852439880371,0,-.80901700258255,-1,.4755282700061798,1,.15450850129127502,.9510565400123596,0,.3090169429779053,.8998424410820007,.0005692243576049805,.8982797265052795,.3652527928352356,.3090169429779053,0,-.9510565400123596,-1,.5,1,0,1,0,0,.9997478127479553,.0005692243576049805,.9477241039276123,.3652527928352356,0,0,-1,-1,0,-1,0,0,-1,0,.5002238750457764,.500055730342865,.553604245185852,.17257791757583618,-1,0,-4.0938650158750534e-7,-1,0,1,0,0,1,0,.5002244710922241,.5000558495521545,.17481893301010132,.17257797718048096,1,0,7.830051629298396e-8,-1,-.5000001192092896,-1,0,-1,0,0,.0006936856079846621,.9995462894439697,.45328840613365173,.9973998069763184,0,0,1,-1,-.5000001192092896,1,0,-1,0,0,.0006940446328371763,.0005692243576049805,.4532887637615204,.3652527928352356,0,0,1,-1,.5,-1,0,1,0,0,.0006942700129002333,.9995462894439697,.9477241039276123,.9973998069763184,0,0,-1,-1,.5,1,0,1,0,0,.0006939088925719261,.0005692243576049805,.9477241039276123,.3652527928352356,0,0,-1,-1,.4755285680294037,1,-.1545085906982422,.9510567784309387,0,-.30901601910591125,.10059956461191177,.0005692243576049805,.9971683621406555,.3652527928352356,-.30901604890823364,0,-.9510568380355835,-1,.4755285680294037,-1,-.1545085906982422,.9510567784309387,0,-.30901601910591125,.10059985518455505,.9995462894439697,.9971683621406555,.9973998069763184,-.30901607871055603,0,-.9510568380355835,-1,.4045087695121765,-1,-.2938928008079529,0,-1,0,.09885690361261368,.20844608545303345,.4157004952430725,.07238495349884033,-.8457278609275818,0,-.533614456653595,-1,.4755285680294037,-1,-.1545085906982422,0,-1,0,.028388768434524536,.3467476963996887,.3914884924888611,.11990350484848022,-.7257986664772034,0,-.6879071593284607,-1,.2938928008079529,-1,-.4045087397098541,0,-1,0,.20861363410949707,.0986892580986023,.45341116189956665,.034674108028411865,-.9313521385192871,0,-.3641197681427002,-1,.154508575797081,-1,-.4755285084247589,0,-1,0,.3469153642654419,.028220951557159424,.5009297728538513,.010462343692779541,-.9828193783760071,0,-.1845698058605194,-1,0,-1,-.5000002384185791,0,-1,0,.5002239942550659,.003939151763916016,.553604245185852,.0021193623542785645,-1,0,2.5340204601320693e-8,-1,-.154508575797081,-1,-.4755284786224365,0,-1,0,.6535326838493347,.028220951557159424,.6062788367271423,.010462343692779541,-.9828193783760071,0,.18456989526748657,-1,-.2938927412033081,-1,-.40450865030288696,0,-1,0,.7918344140052795,.09868937730789185,.6537972688674927,.03467434644699097,-.9313523173332214,0,.3641192317008972,-1,-.4045086205005646,-1,-.2938927114009857,0,-1,0,.9015910029411316,.2084464430809021,.6915079951286316,.07238513231277466,-.8457282185554504,0,.5336138606071472,-1,-.47552838921546936,-1,-.1545085310935974,0,-1,0,.9720588326454163,.3467479348182678,.7157197594642639,.119903564453125,-.7257992625236511,0,.6879065632820129,-1,-.5000001192092896,-1,0,0,-1,0,.9963404536247253,.500056266784668,.7240625619888306,.1725780963897705,-.8398557901382446,0,.5428096055984497,-1,-.47552838921546936,-1,.1545085310935974,0,-1,0,.9720585942268372,.6533645391464233,.7157197594642639,.22525256872177124,-1,0,-10118088766830624e-22,-1,-.4045085906982422,-1,.29389268159866333,0,-1,0,.9015904068946838,.7916658520698547,.691507875919342,.2727710008621216,-1,0,-8.285851436085068e-7,-1,-.29389268159866333,-1,.4045085608959198,0,-1,0,.7918336987495422,.9014224410057068,.6537968516349792,.3104817271232605,-1,0,-4.6902908934498555e-7,-1,-.1545085310935974,-1,.4755283296108246,0,-1,0,.6535319685935974,.9718905687332153,.6062787175178528,.3346934914588928,-1,0,-3.832987829355261e-7,-1,-1.4901161193847656e-8,-1,.5000000596046448,0,-1,0,.5002233982086182,.9961721301078796,.553604245185852,.34303635358810425,-1,0,-8.053084457060322e-7,-1,.15450848639011383,-1,.4755282998085022,0,-1,0,.34691500663757324,.9718902707099915,.5009297728538513,.3346934914588928,-1,0,-9.092273671740259e-7,-1,.29389262199401855,-1,.4045085310935974,0,-1,0,.20861363410949707,.9014220237731934,.45341116189956665,.3104816675186157,-1,0,-6.892228157084901e-7,-1,.404508501291275,-1,.29389265179634094,0,-1,0,.098857082426548,.7916653156280518,.4157004952430725,.27277088165283203,-1,0,-3.318496624160616e-7,-1,.4755282700061798,-1,.15450850129127502,0,-1,0,.028389133512973785,.6533639430999756,.3914886713027954,.22525256872177124,-1,0,1.0190984056634989e-7,-1,.5,-1,0,0,-1,0,.0041075050830841064,.5000558495521545,.3831457495689392,.17257797718048096,-.8398553729057312,0,-.5428102612495422,-1,.4755285680294037,1,-.1545085906982422,0,1,0,.9720596075057983,.3467476963996887,.33693474531173706,.119903564453125,1,0,-5.740443498325476e-7,-1,.4045087695121765,1,-.2938928008079529,0,1,0,.9015914797782898,.20844608545303345,.3127228617668152,.07238495349884033,1,0,-6.830559300396999e-7,-1,.2938928008079529,1,-.4045087397098541,0,1,0,.7918346524238586,.0986892580986023,.2750120759010315,.03467434644699097,1,0,-8.931256729738379e-7,-1,.154508575797081,1,-.4755285084247589,0,1,0,.6535329818725586,.028220951557159424,.22749347984790802,.010462343692779541,1,0,-10122446383320494e-22,-1,0,1,-.5000002384185791,0,1,0,.5002242922782898,.003939151763916016,.17481893301010132,.002119600772857666,1,0,-9.644246290463343e-8,-1,-.154508575797081,1,-.4755284786224365,0,1,0,.34691566228866577,.028220951557159424,.12214438617229462,.010462343692779541,1,0,10884197081395541e-22,-1,-.2938927412033081,1,-.40450865030288696,0,1,0,.20861418545246124,.09868937730789185,.0746258795261383,.03467434644699097,1,0,14022843970451504e-22,-1,-.4045086205005646,1,-.2938927114009857,0,1,0,.09885760396718979,.20844632387161255,.03691514953970909,.07238531112670898,1,0,9.838694268182735e-7,-1,-.47552838921546936,1,-.1545085310935974,0,1,0,.028389595448970795,.34674781560897827,.012703415006399155,.11990362405776978,1,0,5.983875439596886e-7,-1,-.5000001192092896,1,0,0,1,0,.004108026623725891,.5000561475753784,.004360619001090527,.1725780963897705,.8398556113243103,0,.5428099036216736,-1,-.47552838921546936,1,.1545085310935974,0,1,0,.028389714658260345,.6533644199371338,.012703415006399155,.22525256872177124,.725799024105072,0,.687906801700592,-1,-.4045085906982422,1,.29389268159866333,0,1,0,.0988578200340271,.7916658520698547,.03691532835364342,.2727710008621216,.8457275032997131,0,.533614993095398,-1,-.29389268159866333,1,.4045085608959198,0,1,0,.20861442387104034,.9014224410057068,.07462605834007263,.3104817271232605,.931351900100708,0,.36412039399147034,-1,-.1545085310935974,1,.4755283296108246,0,1,0,.3469158709049225,.9718906283378601,.12214449793100357,.3346935510635376,.9828193187713623,0,.18457035720348358,-1,-1.4901161193847656e-8,1,.5000000596046448,0,1,0,.5002241730690002,.9961722493171692,.17481884360313416,.343036413192749,1,0,2.4648217689104968e-8,-1,.15450848639011383,1,.4755282998085022,0,1,0,.6535326838493347,.9718905687332153,.22749342024326324,.3346935510635376,.9828193187713623,0,-.1845702826976776,-1,.29389262199401855,1,.4045085310935974,0,1,0,.7918344140052795,.9014224410057068,.2750118374824524,.31048184633255005,.9313521981239319,0,-.36411967873573303,-1,.404508501291275,1,.29389265179634094,0,1,0,.9015910029411316,.7916657328605652,.31272268295288086,.2727710008621216,.8457278609275818,0,-.533614456653595,-1,.4755282700061798,1,.15450850129127502,0,1,0,.9720590710639954,.6533643007278442,.33693450689315796,.22525256872177124,.7257993817329407,0,-.6879064440727234,-1,.5,1,0,0,1,0,.996340811252594,.5000560879707336,.3452773690223694,.1725780963897705,.8398562669754028,0,-.5428088903427124,-1]),s=new Uint16Array([0,20,21,0,21,1,1,21,22,1,22,2,2,22,23,2,23,3,3,23,24,3,24,4,4,24,25,4,25,5,5,25,26,5,26,6,6,26,27,6,27,7,7,27,28,7,28,8,8,28,29,8,29,9,42,43,30,42,30,10,10,30,31,10,31,11,11,31,32,11,32,12,12,32,33,12,33,13,13,33,34,13,34,14,14,34,35,14,35,15,15,35,36,15,36,16,16,36,37,16,37,17,17,37,38,17,38,18,18,38,39,18,39,19,44,45,46,44,46,47,48,40,49,50,40,48,49,40,67,51,40,50,67,40,66,52,40,51,66,40,65,53,40,52,65,40,64,54,40,53,64,40,63,55,40,54,63,40,62,56,40,55,62,40,61,57,40,56,61,40,60,58,40,57,60,40,59,59,40,58,68,41,69,87,41,68,69,41,70,86,41,87,70,41,71,85,41,86,71,41,72,84,41,85,72,41,73,83,41,84,73,41,74,82,41,83,74,41,75,81,41,82,75,41,76,80,41,81,76,41,77,79,41,80,77,41,78,78,41,79]),c=i.default.createFromNumber(0,0,0),u=i.default.createFromNumber(1,2,1);(0,n.registerGeometry)("cylinder",(function(e){var t=e.createGeometry((0,o.default)(e),a,s);return t.setBoundBox(c,u),t.addSubMesh(240,0,0),t}))},"./src/builtinAssets/geometries/getBuiltinVertexLayout.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=[{name:"a_position",format:2,offset:0,usage:1},{name:"a_normal",format:2,offset:12,usage:2},{name:"a_texCoord",format:1,offset:24,usage:4},{name:"a_lightMapCoord",format:1,offset:32,usage:5},{name:"a_tangent",format:3,offset:40,usage:3}];function o(e){var t=e._requestTmpObj("builtin-vertex-layouts");return t.default||(t.default=e.createVertexLayout({attributes:n,stride:56})),t.default}},"./src/builtinAssets/geometries/plane.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/builtinAssets/geometries/getBuiltinVertexLayout.ts"),i=r("./src/math/vector3.ts");var a=[],s=[];!function(e,t,r,n,o,i){void 0===r&&(r=1),void 0===n&&(n=1),void 0===o&&(o=1),void 0===i&&(i=1);for(var a=r/2,s=n/2,c=Math.floor(o),u=Math.floor(i),l=c+1,f=u+1,p=r/c,d=n/u,h=0;h<f;h++)for(var _=h*d-s,m=0;m<l;m++){var v=m*p-a;e.push(v,0,-_,0,1,0,m/c,1-h/u,0,0,0,0,1,1)}for(h=0;h<u;h++)for(m=0;m<c;m++){var y=m+l*h,g=m+l*(h+1),b=m+1+l*(h+1),w=m+1+l*h;t.push(y,g,w),t.push(g,b,w)}}(a,s,1,1);var c=new Float32Array(a),u=new Uint16Array(s),l=i.default.createFromNumber(0,0,0),f=i.default.createFromNumber(1,.05,1),p=s.length;(0,n.registerGeometry)("plane",(function(e){var t=e.createGeometry((0,o.default)(e),c,u);return t.setBoundBox(l,f),t.addSubMesh(p,0,0),t}))},"./src/builtinAssets/geometries/specialCylinder.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/assets/factories.ts"),o=r("./src/math/vector3.ts"),i=new Float32Array([-5.678913339579594e-9,-.10497161746025085,-1,-.08775380253791809,.44548818469047546,-.8909766674041748,1.0009496212005615,.0009514093399047852,0,0,0,0,-5.678913339579594e-9,-.10497161746025085,-1,.08775380253791809,.44548821449279785,-.8909766674041748,.0009514391422271729,-.0009496212005615234,0,0,0,0,.19509032368659973,-.10497161746025085,-.9807852506637573,.08775380253791809,.44548821449279785,-.8909766674041748,1.0009496212005615,.0009514093399047852,0,0,0,0,.19509032368659973,-.10497161746025085,-.9807852506637573,.25988829135894775,.44548869132995605,-.8567367792129517,.0009514391422271729,-.0009496212005615234,0,0,0,0,.3826834261417389,-.10497161746025085,-.9238795042037964,.25988829135894775,.44548869132995605,-.8567367792129517,1.0009496212005615,.0009514093399047852,0,0,0,0,.3826834261417389,-.10497161746025085,-.9238795042037964,.42203545570373535,.44548848271369934,-.7895733714103699,.0009514391422271729,-.0009496212005615234,0,0,0,0,.5555702447891235,-.10497161746025085,-.8314695954322815,.42203545570373535,.44548848271369934,-.7895733714103699,1.0009496212005615,.0009514093399047852,0,0,0,0,.5555702447891235,-.10497161746025085,-.8314695954322815,.5679646134376526,.44548842310905457,-.6920666098594666,.0009514391422271729,-.0009496212005615234,0,0,0,0,.7071067690849304,-.10497161746025085,-.7071067690849304,.5679646134376526,.44548842310905457,-.6920666098594666,1.0009496212005615,.0009514093399047852,0,0,0,0,.7071067690849304,-.10497161746025085,-.7071067690849304,.6920667886734009,.4454883933067322,-.5679644346237183,.0009514391422271729,-.0009496212005615234,0,0,0,0,.8314695954322815,-.10497161746025085,-.5555702447891235,.6920667886734009,.4454883933067322,-.5679644346237183,1.0009496212005615,.0009514093399047852,0,0,0,0,.8314695954322815,-.10497161746025085,-.5555702447891235,.7895731925964355,.4454883635044098,-.42203593254089355,.0009514391422271729,-.0009496212005615234,0,0,0,0,.9238795042037964,-.10497161746025085,-.3826834261417389,.7895731925964355,.4454883635044098,-.42203593254089355,1.0009496212005615,.0009514093399047852,0,0,0,0,.9238795042037964,-.10497161746025085,-.3826834261417389,.856736958026886,.4454883933067322,-.2598881423473358,.0009514391422271729,-.0009496212005615234,0,0,0,0,.9807852506637573,-.10497161746025085,-.19509030878543854,.856736958026886,.4454883933067322,-.2598881423473358,1.0009496212005615,.0009514093399047852,0,0,0,0,.9807852506637573,-.10497161746025085,-.19509030878543854,.8909766674041748,.4454883337020874,-.0877537727355957,.0009514391422271729,-.0009496212005615234,0,0,0,0,1,-.10497161746025085,1.955777406692505e-8,.8909766674041748,.4454883337020874,-.0877537727355957,1.0009496212005615,.0009514093399047852,0,0,0,0,1,-.10497161746025085,1.955777406692505e-8,.8909766674041748,.4454883337020874,.0877537727355957,.0009514391422271729,-.0009496212005615234,0,0,0,0,.9807852506637573,-.10497161746025085,.19509033858776093,.856736958026886,.44548842310905457,.2598881423473358,.0009514391422271729,-.0009496212005615234,0,0,0,0,.9807852506637573,-.10497161746025085,.19509033858776093,.8909766674041748,.4454883337020874,.0877537727355957,1.0009496212005615,.0009514093399047852,0,0,0,0,.9238795042037964,-.10497161746025085,.38268348574638367,.7895732522010803,.44548821449279785,.4220360517501831,.0009514391422271729,-.0009496212005615234,0,0,0,0,.9238795042037964,-.10497161746025085,.38268348574638367,.856736958026886,.44548842310905457,.2598881423473358,1.0009496212005615,.0009514093399047852,0,0,0,0,.8314695954322815,-.10497161746025085,.5555702447891235,.6920667886734009,.4454882740974426,.5679645538330078,.0009514391422271729,-.0009496212005615234,0,0,0,0,.8314695954322815,-.10497161746025085,.5555702447891235,.7895732522010803,.44548821449279785,.4220360517501831,1.0009496212005615,.0009514093399047852,0,0,0,0,.7071067690849304,-.10497161746025085,.7071067690849304,.5679647326469421,.4454883635044098,.6920666694641113,.0009514391422271729,-.0009496212005615234,0,0,0,0,.7071067690849304,-.10497161746025085,.7071067690849304,.6920667886734009,.4454882740974426,.5679645538330078,1.0009496212005615,.0009514093399047852,0,0,0,0,.5555702447891235,-.10497161746025085,.8314695954322815,.4220355749130249,.4454882740974426,.7895734310150146,.0009514391422271729,-.0009496212005615234,0,0,0,0,.5555702447891235,-.10497161746025085,.8314695954322815,.5679647326469421,.4454883635044098,.6920666694641113,1.0009496212005615,.0009514093399047852,0,0,0,0,.3826834261417389,-.10497161746025085,.9238795042037964,.25988829135894775,.44548851251602173,.8567368388175964,.0009514391422271729,-.0009496212005615234,0,0,0,0,.3826834261417389,-.10497161746025085,.9238795042037964,.4220355749130249,.4454882740974426,.7895734310150146,1.0009496212005615,.0009514093399047852,0,0,0,0,.19509032368659973,-.10497161746025085,.9807852506637573,.08775380253791809,.44548818469047546,.8909766674041748,.0009514391422271729,-.0009496212005615234,0,0,0,0,.19509032368659973,-.10497161746025085,.9807852506637573,.25988829135894775,.44548851251602173,.8567368388175964,1.0009496212005615,.0009514093399047852,0,0,0,0,-5.678913339579594e-9,-.10497161746025085,1,-.08775380253791809,.44548821449279785,.8909766674041748,.0009514391422271729,-.0009496212005615234,0,0,0,0,-5.678913339579594e-9,-.10497161746025085,1,.08775380253791809,.44548818469047546,.8909766674041748,1.0009496212005615,.0009514093399047852,0,0,0,0,-.19509032368659973,-.10497161746025085,.9807852506637573,-.25988826155662537,.445488303899765,.8567370772361755,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.19509032368659973,-.10497161746025085,.9807852506637573,-.08775380253791809,.44548821449279785,.8909766674041748,1.0009496212005615,.0009514093399047852,0,0,0,0,-.38268348574638367,-.10497161746025085,.9238795042037964,-.4220356345176697,.44548842310905457,.7895733118057251,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.38268348574638367,-.10497161746025085,.9238795042037964,-.25988826155662537,.445488303899765,.8567370772361755,1.0009496212005615,.0009514093399047852,0,0,0,0,-.5555702447891235,-.10497161746025085,.8314695954322815,-.5679647326469421,.4454881548881531,.6920667290687561,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.5555702447891235,-.10497161746025085,.8314695954322815,-.4220356345176697,.44548842310905457,.7895733118057251,1.0009496212005615,.0009514093399047852,0,0,0,0,-.7071067690849304,-.10497161746025085,.7071067690849304,-.6920667290687561,.44548842310905457,.567964494228363,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.7071067690849304,-.10497161746025085,.7071067690849304,-.5679647326469421,.4454881548881531,.6920667290687561,1.0009496212005615,.0009514093399047852,0,0,0,0,-.8314695954322815,-.10497161746025085,.5555702447891235,-.7895732522010803,.44548821449279785,.4220360517501831,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.8314695954322815,-.10497161746025085,.5555702447891235,-.6920667290687561,.44548842310905457,.567964494228363,1.0009496212005615,.0009514093399047852,0,0,0,0,-.9238795042037964,-.10497161746025085,.38268348574638367,-.856736958026886,.4454883933067322,.2598881125450134,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.9238795042037964,-.10497161746025085,.38268348574638367,-.7895732522010803,.44548821449279785,.4220360517501831,1.0009496212005615,.0009514093399047852,0,0,0,0,-.9807852506637573,-.10497161746025085,.19509033858776093,-.8909767866134644,.44548824429512024,.08775343745946884,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.9807852506637573,-.10497161746025085,.19509033858776093,-.856736958026886,.4454883933067322,.2598881125450134,1.0009496212005615,.0009514093399047852,0,0,0,0,-.9999999403953552,-.10497161746025085,1.955777406692505e-8,-.8909767866134644,.44548824429512024,-.08775343745946884,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.9999999403953552,-.10497161746025085,1.955777406692505e-8,-.8909767866134644,.44548824429512024,.08775343745946884,1.0009496212005615,.0009514093399047852,0,0,0,0,-.9807852506637573,-.10497161746025085,-.19509030878543854,-.8909767866134644,.44548824429512024,-.08775343745946884,1.0009496212005615,.0009514093399047852,0,0,0,0,-.9807852506637573,-.10497161746025085,-.19509030878543854,-.856736958026886,.4454883933067322,-.2598881721496582,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.9238795042037964,-.10497161746025085,-.3826834261417389,-.856736958026886,.4454883933067322,-.2598881721496582,1.0009496212005615,.0009514093399047852,0,0,0,0,-.9238795042037964,-.10497161746025085,-.3826834261417389,-.7895731925964355,.4454882740974426,-.42203593254089355,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.8314695954322815,-.10497161746025085,-.5555702447891235,-.7895731925964355,.4454882740974426,-.42203593254089355,1.0009496212005615,.0009514093399047852,0,0,0,0,-.8314695954322815,-.10497161746025085,-.5555702447891235,-.6920668482780457,.44548824429512024,-.567964494228363,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.7071067690849304,-.10497161746025085,-.7071067690849304,-.6920668482780457,.44548824429512024,-.567964494228363,1.0009496212005615,.0009514093399047852,0,0,0,0,-.7071067690849304,-.10497161746025085,-.7071067690849304,-.5679647326469421,.4454882740974426,-.6920666694641113,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.5555702447891235,-.10497161746025085,-.8314695954322815,-.5679647326469421,.4454882740974426,-.6920666694641113,1.0009496212005615,.0009514093399047852,0,0,0,0,-.5555702447891235,-.10497161746025085,-.8314695954322815,-.42203566431999207,.44548851251602173,-.7895731925964355,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.38268348574638367,-.10497161746025085,-.9238795042037964,-.42203566431999207,.44548851251602173,-.7895731925964355,1.0009496212005615,.0009514093399047852,0,0,0,0,-.38268348574638367,-.10497161746025085,-.9238795042037964,-.259888231754303,.4454883933067322,-.856736958026886,.0009514391422271729,-.0009496212005615234,0,0,0,0,-.19509032368659973,-.10497161746025085,-.9807852506637573,-.259888231754303,.4454883933067322,-.856736958026886,1.0009496212005615,.0009514093399047852,0,0,0,0,-.19509032368659973,-.10497161746025085,-.9807852506637573,-.08775380253791809,.44548818469047546,-.8909766674041748,.0009514391422271729,-.0009496212005615234,0,0,0,0,-5.678913339579594e-9,.10497245192527771,-.8950279951095581,-.08775380253791809,.44548818469047546,-.8909766674041748,.9990485906600952,1.0009496212005615,0,0,0,0,-5.678913339579594e-9,.10497245192527771,-.8950279951095581,.08775380253791809,.44548821449279785,-.8909766674041748,-.0009496510028839111,.9990485906600952,0,0,0,0,.17461130023002625,.10497245192527771,-.8778302073478699,.08775380253791809,.44548821449279785,-.8909766674041748,.9990485906600952,1.0009496212005615,0,0,0,0,.17461130023002625,.10497245192527771,-.8778302073478699,.25988829135894775,.44548869132995605,-.8567367792129517,-.0009496510028839111,.9990485906600952,0,0,0,0,.3425123393535614,.10497245192527771,-.8268979787826538,.25988829135894775,.44548869132995605,-.8567367792129517,.9990485906600952,1.0009496212005615,0,0,0,0,.3425123393535614,.10497245192527771,-.8268979787826538,.42203545570373535,.44548848271369934,-.7895733714103699,-.0009496510028839111,.9990485906600952,0,0,0,0,.49725088477134705,.10497245192527771,-.7441885471343994,.42203545570373535,.44548848271369934,-.7895733714103699,.9990485906600952,1.0009496212005615,0,0,0,0,.49725088477134705,.10497245192527771,-.7441885471343994,.5679646134376526,.44548842310905457,-.6920666098594666,-.0009496510028839111,.9990485906600952,0,0,0,0,.6328803300857544,.10497245192527771,-.6328803300857544,.5679646134376526,.44548842310905457,-.6920666098594666,.9990485906600952,1.0009496212005615,0,0,0,0,.6328803300857544,.10497245192527771,-.6328803300857544,.6920667886734009,.4454883933067322,-.5679644346237183,-.0009496510028839111,.9990485906600952,0,0,0,0,.7441885471343994,.10497245192527771,-.49725088477134705,.6920667886734009,.4454883933067322,-.5679644346237183,.9990485906600952,1.0009496212005615,0,0,0,0,.7441885471343994,.10497245192527771,-.49725088477134705,.7895731925964355,.4454883635044098,-.42203593254089355,-.0009496510028839111,.9990485906600952,0,0,0,0,.8268979787826538,.10497245192527771,-.3425123393535614,.7895731925964355,.4454883635044098,-.42203593254089355,.9990485906600952,1.0009496212005615,0,0,0,0,.8268979787826538,.10497245192527771,-.3425123393535614,.856736958026886,.4454883933067322,-.2598881423473358,-.0009496510028839111,.9990485906600952,0,0,0,0,.8778302073478699,.10497245192527771,-.17461128532886505,.856736958026886,.4454883933067322,-.2598881423473358,.9990485906600952,1.0009496212005615,0,0,0,0,.8778302073478699,.10497245192527771,-.17461128532886505,.8909766674041748,.4454883337020874,-.0877537727355957,-.0009496510028839111,.9990485906600952,0,0,0,0,.8950279951095581,.10497245192527771,1.955777406692505e-8,.8909766674041748,.4454883337020874,-.0877537727355957,.9990485906600952,1.0009496212005615,0,0,0,0,.8950279951095581,.10497245192527771,1.955777406692505e-8,.8909766674041748,.4454883337020874,.0877537727355957,-.0009496510028839111,.9990485906600952,0,0,0,0,.8778302073478699,.10497245192527771,.17461131513118744,.856736958026886,.44548842310905457,.2598881423473358,-.0009496510028839111,.9990485906600952,0,0,0,0,.8778302073478699,.10497245192527771,.17461131513118744,.8909766674041748,.4454883337020874,.0877537727355957,.9990485906600952,1.0009496212005615,0,0,0,0,.8268979787826538,.10497245192527771,.3425123989582062,.7895732522010803,.44548821449279785,.4220360517501831,-.0009496510028839111,.9990485906600952,0,0,0,0,.8268979787826538,.10497245192527771,.3425123989582062,.856736958026886,.44548842310905457,.2598881423473358,.9990485906600952,1.0009496212005615,0,0,0,0,.7441885471343994,.10497245192527771,.4972509443759918,.6920667886734009,.4454882740974426,.5679645538330078,-.0009496510028839111,.9990485906600952,0,0,0,0,.7441885471343994,.10497245192527771,.4972509443759918,.7895732522010803,.44548821449279785,.4220360517501831,.9990485906600952,1.0009496212005615,0,0,0,0,.6328803300857544,.10497245192527771,.6328803300857544,.5679647326469421,.4454883635044098,.6920666694641113,-.0009496510028839111,.9990485906600952,0,0,0,0,.6328803300857544,.10497245192527771,.6328803300857544,.6920667886734009,.4454882740974426,.5679645538330078,.9990485906600952,1.0009496212005615,0,0,0,0,.49725088477134705,.10497245192527771,.7441885471343994,.4220355749130249,.4454882740974426,.7895734310150146,-.0009496510028839111,.9990485906600952,0,0,0,0,.49725088477134705,.10497245192527771,.7441885471343994,.5679647326469421,.4454883635044098,.6920666694641113,.9990485906600952,1.0009496212005615,0,0,0,0,.3425123393535614,.10497245192527771,.8268979787826538,.25988829135894775,.44548851251602173,.8567368388175964,-.0009496510028839111,.9990485906600952,0,0,0,0,.3425123393535614,.10497245192527771,.8268979787826538,.4220355749130249,.4454882740974426,.7895734310150146,.9990485906600952,1.0009496212005615,0,0,0,0,.17461130023002625,.10497245192527771,.8778302073478699,.08775380253791809,.44548818469047546,.8909766674041748,-.0009496510028839111,.9990485906600952,0,0,0,0,.17461130023002625,.10497245192527771,.8778302073478699,.25988829135894775,.44548851251602173,.8567368388175964,.9990485906600952,1.0009496212005615,0,0,0,0,-5.678913339579594e-9,.10497245192527771,.8950279951095581,-.08775380253791809,.44548821449279785,.8909766674041748,-.0009496510028839111,.9990485906600952,0,0,0,0,-5.678913339579594e-9,.10497245192527771,.8950279951095581,.08775380253791809,.44548818469047546,.8909766674041748,.9990485906600952,1.0009496212005615,0,0,0,0,-.17461130023002625,.10497245192527771,.8778302073478699,-.25988826155662537,.445488303899765,.8567370772361755,-.0009496510028839111,.9990485906600952,0,0,0,0,-.17461130023002625,.10497245192527771,.8778302073478699,-.08775380253791809,.44548821449279785,.8909766674041748,.9990485906600952,1.0009496212005615,0,0,0,0,-.3425123989582062,.10497245192527771,.8268979787826538,-.4220356345176697,.44548842310905457,.7895733118057251,-.0009496510028839111,.9990485906600952,0,0,0,0,-.3425123989582062,.10497245192527771,.8268979787826538,-.25988826155662537,.445488303899765,.8567370772361755,.9990485906600952,1.0009496212005615,0,0,0,0,-.4972509443759918,.10497245192527771,.7441885471343994,-.5679647326469421,.4454881548881531,.6920667290687561,-.0009496510028839111,.9990485906600952,0,0,0,0,-.4972509443759918,.10497245192527771,.7441885471343994,-.4220356345176697,.44548842310905457,.7895733118057251,.9990485906600952,1.0009496212005615,0,0,0,0,-.6328803300857544,.10497245192527771,.6328803300857544,-.6920667290687561,.44548842310905457,.567964494228363,-.0009496510028839111,.9990485906600952,0,0,0,0,-.6328803300857544,.10497245192527771,.6328803300857544,-.5679647326469421,.4454881548881531,.6920667290687561,.9990485906600952,1.0009496212005615,0,0,0,0,-.7441885471343994,.10497245192527771,.4972509443759918,-.7895732522010803,.44548821449279785,.4220360517501831,-.0009496510028839111,.9990485906600952,0,0,0,0,-.7441885471343994,.10497245192527771,.4972509443759918,-.6920667290687561,.44548842310905457,.567964494228363,.9990485906600952,1.0009496212005615,0,0,0,0,-.8268979787826538,.10497245192527771,.3425123989582062,-.856736958026886,.4454883933067322,.2598881125450134,-.0009496510028839111,.9990485906600952,0,0,0,0,-.8268979787826538,.10497245192527771,.3425123989582062,-.7895732522010803,.44548821449279785,.4220360517501831,.9990485906600952,1.0009496212005615,0,0,0,0,-.8778302073478699,.10497245192527771,.17461131513118744,-.8909767866134644,.44548824429512024,.08775343745946884,-.0009496510028839111,.9990485906600952,0,0,0,0,-.8778302073478699,.10497245192527771,.17461131513118744,-.856736958026886,.4454883933067322,.2598881125450134,.9990485906600952,1.0009496212005615,0,0,0,0,-.8950279951095581,.10497245192527771,1.955777406692505e-8,-.8909767866134644,.44548824429512024,-.08775343745946884,-.0009496510028839111,.9990485906600952,0,0,0,0,-.8950279951095581,.10497245192527771,1.955777406692505e-8,-.8909767866134644,.44548824429512024,.08775343745946884,.9990485906600952,1.0009496212005615,0,0,0,0,-.8778302073478699,.10497245192527771,-.17461128532886505,-.8909767866134644,.44548824429512024,-.08775343745946884,.9990485906600952,1.0009496212005615,0,0,0,0,-.8778302073478699,.10497245192527771,-.17461128532886505,-.856736958026886,.4454883933067322,-.2598881721496582,-.0009496510028839111,.9990485906600952,0,0,0,0,-.8268979787826538,.10497245192527771,-.3425123393535614,-.856736958026886,.4454883933067322,-.2598881721496582,.9990485906600952,1.0009496212005615,0,0,0,0,-.8268979787826538,.10497245192527771,-.3425123393535614,-.7895731925964355,.4454882740974426,-.42203593254089355,-.0009496510028839111,.9990485906600952,0,0,0,0,-.7441885471343994,.10497245192527771,-.49725088477134705,-.7895731925964355,.4454882740974426,-.42203593254089355,.9990485906600952,1.0009496212005615,0,0,0,0,-.7441885471343994,.10497245192527771,-.49725088477134705,-.6920668482780457,.44548824429512024,-.567964494228363,-.0009496510028839111,.9990485906600952,0,0,0,0,-.6328803300857544,.10497245192527771,-.6328803300857544,-.6920668482780457,.44548824429512024,-.567964494228363,.9990485906600952,1.0009496212005615,0,0,0,0,-.6328803300857544,.10497245192527771,-.6328803300857544,-.5679647326469421,.4454882740974426,-.6920666694641113,-.0009496510028839111,.9990485906600952,0,0,0,0,-.4972509443759918,.10497245192527771,-.7441885471343994,-.5679647326469421,.4454882740974426,-.6920666694641113,.9990485906600952,1.0009496212005615,0,0,0,0,-.4972509443759918,.10497245192527771,-.7441885471343994,-.42203566431999207,.44548851251602173,-.7895731925964355,-.0009496510028839111,.9990485906600952,0,0,0,0,-.3425123989582062,.10497245192527771,-.8268979787826538,-.42203566431999207,.44548851251602173,-.7895731925964355,.9990485906600952,1.0009496212005615,0,0,0,0,-.3425123989582062,.10497245192527771,-.8268979787826538,-.259888231754303,.4454883933067322,-.856736958026886,-.0009496510028839111,.9990485906600952,0,0,0,0,-.17461130023002625,.10497245192527771,-.8778302073478699,-.259888231754303,.4454883933067322,-.856736958026886,.9990485906600952,1.0009496212005615,0,0,0,0,-.17461130023002625,.10497245192527771,-.8778302073478699,-.08775380253791809,.44548818469047546,-.8909766674041748,-.0009496510028839111,.9990485906600952,0,0,0,0]),a=new Uint16Array([63,127,64,63,64,0,61,125,126,61,126,62,59,123,124,59,124,60,57,121,122,57,122,58,55,119,120,55,120,56,53,117,118,53,118,54,51,115,116,51,116,52,48,112,114,48,114,50,46,110,113,46,113,49,44,108,111,44,111,47,42,106,109,42,109,45,40,104,107,40,107,43,38,102,105,38,105,41,36,100,103,36,103,39,34,98,101,34,101,37,32,96,99,32,99,35,30,94,97,30,97,33,28,92,95,28,95,31,26,90,93,26,93,29,24,88,91,24,91,27,22,86,89,22,89,25,20,84,87,20,87,23,18,82,85,18,85,21,17,81,83,17,83,19,15,79,80,15,80,16,13,77,78,13,78,14,11,75,76,11,76,12,9,73,74,9,74,10,7,71,72,7,72,8,5,69,70,5,70,6,3,67,68,3,68,4,1,65,66,1,66,2]),s=o.default.createFromNumber(0,0,0),c=o.default.createFromNumber(1,1,1),u=a.length;(0,n.registerGeometry)("specialCylinder",(function(e){var t=e.createGeometry(function(e){return e.createVertexLayout({attributes:l,stride:48})}(e),i,a);return t.setBoundBox(s,c),t.addSubMesh(u,0,0),t}));var l=[{name:"a_normal",format:2,offset:12,usage:2},{name:"a_position",format:2,offset:0,usage:1},{name:"a_tangent",format:3,offset:40,usage:3},{name:"a_texCoord",format:1,offset:24,usage:4}]},"./src/builtinAssets/geometries/sphere.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{buildSphere:()=>a});var n=r("./src/assets/factories.ts"),o=r("./src/builtinAssets/geometries/getBuiltinVertexLayout.ts"),i=r("./src/math/vector3.ts");function a(e,t,r,n,o,i,a,s,c){void 0===r&&(r=1),void 0===n&&(n=32),void 0===o&&(o=16),void 0===i&&(i=Math.PI/2),void 0===a&&(a=2*Math.PI),void 0===s&&(s=Math.PI),void 0===c&&(c=Math.PI),n=Math.max(3,Math.floor(n)),o=Math.max(2,Math.floor(o));for(var u=Math.min(s+c,Math.PI),l=0,f=[],p=0;p<=o;p++){var d=[],h=p/o,_=0;0==p&&0==s?_=.5/n:p==o&&u==Math.PI&&(_=-.5/n);for(var m=0;m<=n;m++){var v=m/n,y=-r*Math.cos(i+v*a)*Math.sin(s+h*c),g=r*Math.cos(s+h*c),b=r*Math.sin(i+v*a)*Math.sin(s+h*c);e.push(y,g,b),e.push(y/3,g/3,b/3),e.push(v+_,1-h),e.push(0,0,0,0,0,0),d.push(l++)}f.push(d)}for(p=0;p<o;p++)for(m=0;m<n;m++){var w=f[p][m+1],x=f[p][m],S=f[p+1][m],E=f[p+1][m+1];(0!==p||s>0)&&t.push(w,x,E),(p!==o-1||u<Math.PI)&&t.push(x,S,E)}}var s=[],c=[];a(s,c,1);var u=new Float32Array(s),l=new Uint16Array(c),f=i.default.createFromNumber(0,0,0),p=i.default.createFromNumber(2,2,2),d=c.length;(0,n.registerGeometry)("sphere",(function(e){var t=e.createGeometry((0,o.default)(e),u,l);return t.setBoundBox(f,p),t.addSubMesh(d,0,0),t}))},"./src/builtinAssets/index.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/ext.ts"),o=r("./src/assets/factories.ts");r("./src/builtinAssets/effects/simple.ts"),r("./src/builtinAssets/effects/standard.ts"),r("./src/builtinAssets/effects/particle.ts"),r("./src/builtinAssets/effects/skybox.ts"),r("./src/builtinAssets/effects/shadow-caster.ts"),r("./src/builtinAssets/effects/ar-camera-yuv.ts"),r("./src/builtinAssets/effects/postprocessing/blit.ts"),r("./src/builtinAssets/effects/postprocessing/fxaa.ts"),r("./src/builtinAssets/effects/postprocessing/blur.ts"),r("./src/builtinAssets/effects/postprocessing/fastblur.ts"),r("./src/builtinAssets/effects/postprocessing/vignette.ts"),r("./src/builtinAssets/effects/postprocessing/bloom.ts"),r("./src/builtinAssets/effects/postprocessing/tone.ts"),r("./src/builtinAssets/effects/postprocessing/blend.ts"),r("./src/builtinAssets/effects/gizmo.ts"),r("./src/builtinAssets/geometries/cube.ts"),r("./src/builtinAssets/geometries/sphere.ts"),r("./src/builtinAssets/geometries/cylinder.ts"),r("./src/builtinAssets/geometries/specialCylinder.ts"),r("./src/builtinAssets/geometries/plane.ts"),r("./src/builtinAssets/geometries/ar-camera-plane.ts"),r("./src/builtinAssets/textures/texture2ds.ts"),r("./src/builtinAssets/textures/textureCubes.ts"),r("./src/builtinAssets/uniform-desc/global.ts"),r("./src/builtinAssets/uniform-desc/mesh.ts");(0,o.registerVertexDataDesc)("static-3d",(function(e){return new((0,n.getKanata)(e).VertexDataDescriptor)({vuMap:[["a_position","u_world",n.Kanata.EVertexBatchOperator.MatrixMultiple],["a_lightMapCoord","u_lightMapScaleOffset",n.Kanata.EVertexBatchOperator.UVST]]})}))},"./src/builtinAssets/textures/texture2ds.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/ext.ts"),o=r("./src/assets/factories.ts");function i(e,t,r,o,i){return function(a){return a.createTexture({source:[new Uint8Array([e,t,r,o])],pixelFormat:i||n.Kanata.ETextureFormat.RGBA8,width:1,height:1,magFilter:n.Kanata.EFilterMode.NEAREST,minFilter:n.Kanata.EFilterMode.NEAREST,wrapU:n.Kanata.EWrapMode.CLAMP_TO_EDGE,wrapV:n.Kanata.EWrapMode.CLAMP_TO_EDGE,anisoLevel:1})}}(0,o.registerTexture)("white",i(255,255,255,255)),(0,o.registerTexture)("transparent",i(255,255,255,0)),(0,o.registerTexture)("black",i(0,0,0,255)),(0,o.registerTexture)("red",i(255,0,0,255)),(0,o.registerTexture)("green",i(0,255,0,255)),(0,o.registerTexture)("blue",i(0,0,255,255)),(0,o.registerTexture)("yellow",i(255,255,0,255)),(0,o.registerTexture)("bump",i(128,128,255,255)),(0,o.registerTexture)("babyblue",i(62,131,248,255)),(0,o.registerTexture)("babygreen",i(167,245,82,255)),(0,o.registerTexture)("babyred",i(254,85,47,255))},"./src/builtinAssets/textures/textureCubes.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/ext.ts"),o=r("./src/assets/factories.ts");function i(e,t,r,o){var i=new Uint8Array([e,t,r,o]);return function(e){return e.createTexture({type:n.Kanata.ETextureType.Cube,slices:6,source:[i,i,i,i,i,i],width:1,height:1,magFilter:n.Kanata.EFilterMode.NEAREST,minFilter:n.Kanata.EFilterMode.NEAREST,wrapU:n.Kanata.EWrapMode.CLAMP_TO_EDGE,wrapV:n.Kanata.EWrapMode.CLAMP_TO_EDGE,anisoLevel:1})}}(0,o.registerTextureCube)("white",i(255,255,255,255)),(0,o.registerTextureCube)("transparent",i(255,255,255,0)),(0,o.registerTextureCube)("black",i(0,0,0,255)),(0,o.registerTextureCube)("red",i(255,0,0,255)),(0,o.registerTextureCube)("green",i(0,255,0,255)),(0,o.registerTextureCube)("blue",i(0,0,255,255)),(0,o.registerTextureCube)("yellow",i(255,255,0,255))},"./src/builtinAssets/uniform-desc/global.ts":(e,t,r)=>{"use strict";r.r(t);var n=r("./src/ext.ts"),o=r("./src/assets/factories.ts");(0,o.registerUniformDesc)("global-forward-base",(function(e){return new((0,n.getKanata)(e).UniformDescriptor)({uniforms:[{name:"u_view",type:n.Kanata.EUniformType.MAT4,needTranspose:!0},{name:"u_viewInverse",type:n.Kanata.EUniformType.MAT4,needTranspose:!0},{name:"u_projection",type:n.Kanata.EUniformType.MAT4,needTranspose:!0},{name:"u_vp",type:n.Kanata.EUniformType.MAT4,needTranspose:!0},{name:"u_gameTime",type:n.Kanata.EUniformType.FLOAT},{name:"u_fogColor",type:n.Kanata.EUniformType.FLOAT3},{name:"u_fogInfos",type:n.Kanata.EUniformType.FLOAT4},{name:"u_ambientLightColorIns",type:n.Kanata.EUniformType.FLOAT4},{name:"u_mainLightDir",type:n.Kanata.EUniformType.FLOAT3},{name:"u_mainLightColorIns",type:n.Kanata.EUniformType.FLOAT4},{name:"u_addLightsPos",type:n.Kanata.EUniformType.FLOAT3,num:4},{name:"u_addLightsDir",type:n.Kanata.EUniformType.FLOAT3,num:4},{name:"u_addLightsColorIns",type:n.Kanata.EUniformType.FLOAT4,num:4},{name:"u_addLightsInfo",type:n.Kanata.EUniformType.FLOAT4,num:4},{name:"u_shadowBias",type:n.Kanata.EUniformType.FLOAT},{name:"u_shadowColor",type:n.Kanata.EUniformType.FLOAT3},{name:"u_shadowMap",type:n.Kanata.EUniformType.SAMPLER},{name:"u_csmLightSpaceMatrices",type:n.Kanata.EUniformType.MAT4,num:4},{name:"u_csmFarBounds",type:n.Kanata.EUniformType.FLOAT4},{name:"u_shadowTilingOffsets",type:n.Kanata.EUniformType.FLOAT4,num:4},{name:"u_diffuseSH",type:n.Kanata.EUniformType.FLOAT3,num:9},{name:"u_diffuseExp",type:n.Kanata.EUniformType.FLOAT},{name:"u_specularEnvMap",type:n.Kanata.EUniformType.SAMPLER},{name:"u_specularExp",type:n.Kanata.EUniformType.FLOAT},{name:"u_envRotation",type:n.Kanata.EUniformType.FLOAT}]})})),(0,o.registerUniformDesc)("global-forward-add",(function(e){return e.createUniformBlockDesc({uniforms:[{name:"u_view",type:n.Kanata.EUniformType.MAT4,needTranspose:!0},{name:"u_viewInverse",type:n.Kanata.EUniformType.MAT4,needTranspose:!0},{name:"u_projection",type:n.Kanata.EUniformType.MAT4,needTranspose:!0},{name:"u_vp",type:n.Kanata.EUniformType.MAT4,needTranspose:!0},{name:"u_fogColor",type:n.Kanata.EUniformType.FLOAT3},{name:"u_fogInfos",type:n.Kanata.EUniformType.FLOAT4},{name:"u_gameTime",type:n.Kanata.EUniformType.FLOAT}]})})),(0,o.registerUniformDesc)("global-shadow-caster",(function(e){return e.createUniformBlockDesc({uniforms:[{name:"u_lightSpaceMatrix",type:n.Kanata.EUniformType.MAT4,needTranspose:!0}]})}))},"./src/builtinAssets/uniform-desc/mesh.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{MAX_ADD_LIGHT:()=>a,defaultMeshUniformDescOptions:()=>s,getSkinnedMeshUniformDesc:()=>c});var n=r("./src/ext.ts"),o=r("./src/assets/factories.ts"),i=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},a=4;function s(){return[{name:"u_world",type:n.Kanata.EUniformType.MAT4,needTranspose:!0},{name:"u_lightMapScaleOffset",type:n.Kanata.EUniformType.FLOAT4},{name:"u_lightMap",type:n.Kanata.EUniformType.SAMPLER},{name:"u_morphWeights",type:n.Kanata.EUniformType.FLOAT4,num:8}]}function c(e,t,r){void 0===r&&(r=!1);var o="mesh-skinned-"+t+(r?"-useDataTexture":""),a=e.assets.getAsset("uniform-desc",o);return a||(a=r?e.createUniformBlockDesc({uniforms:i(i([],s()),[{name:"u_boneMatrixTexture",type:n.Kanata.EUniformType.SAMPLER}])}):e.createUniformBlockDesc({uniforms:i(i([],s()),[{name:"u_boneOffsetMatrix",type:n.Kanata.EUniformType.MAT4,num:t}])})),a}(0,o.registerUniformDesc)("mesh-static",(function(e){return e.createUniformBlockDesc({uniforms:s()})}))},"./src/components/ARTracker.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ARTrackSchema:()=>_,EARTrackerState:()=>o,default:()=>v});var n,o,i=r("./src/ext.ts"),a=r("./src/core/Component.ts"),s=r("./src/loader/downloader/fetch.ts"),c=r("./src/loader/downloader/url.ts"),u=r("./src/components/Transform.ts"),l=r("./src/math/vector3.ts"),f=r("./src/core/logger.ts"),p=r("./src/core/reporter.ts"),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function h(e){return e!==o.Init&&e!==o.Error}!function(e){e[e.Init=0]="Init",e[e.Detecting=1]="Detecting",e[e.Detected=2]="Detected",e[e.Error=3]="Error"}(o||(o={}));var _={mode:{type:"string"},image:{type:"image"},src:{type:"string"},autoSync:{type:"number-array"}},m=new l.default;const v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=_,t._state=o.Init,t._errorMessage="",t._filePath="",t._fetchCancelMap={},t._rawData={},t._rawScale=1,t._autoSync=void 0,t}return d(t,e),Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorMessage",{get:function(){return this._errorMessage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arActive",{get:function(){return this._state===o.Detected},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){var e;return(null===(e=this._rawData)||void 0===e?void 0:e.score)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gesture",{get:function(){var e,t;return null!==(t=null===(e=this._rawData)||void 0===e?void 0:e.gesture)&&void 0!==t?t:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filePath",{get:function(){return this._filePath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackId",{get:function(){return this._trackId},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){this._processData(t),this.el.getComponent(u.default).visible=!1},t.prototype.onUpdate=function(e,t){this._processData(e)},t.prototype.onRemove=function(e,t){h(this._state)&&this.el.scene.ar._removeTracker(this)},t.prototype.getPosition=function(e,t,r){var n,i;if(void 0===r&&(r=!0),this._state===o.Detected){var a=null===(i=null===(n=this._rawData)||void 0===n?void 0:n.points)||void 0===i?void 0:i[e];if(a){var s=t||new l.default;if(this.scene.ar._convertScreenPoint(2*a.x-1,1-2*a.y,s),!r)return s;var c=this.el.getComponent(u.default);return s.sub(c.position,s),s.x/=this._rawScale,s.y/=this._rawScale,s}}},t.prototype._switch=function(e){this.arActive!==e&&(this._setState(e?o.Detected:o.Detecting),this.el.getComponent(u.default).visible=e,e||(this._rawData={}),this.el.event.trigger("ar-tracker-switch",e))},t.prototype._setRawData=function(e,t){var r,n,o,i=this;this._rawData.score=(null!==(r=e.score)&&void 0!==r?r:"Hand"===this._mode)?e.score-2:e.score,this._rawData.gesture=e.gesture,this._rawData.points=e.points,this._rawData.confidence=e.confidence,this._rawData.origin=e.origin,this._rawData.size=e.size,this._rawData.angle=e.angle,this._rawScale=t,null===(n=this.el.getComponent(u.default))||void 0===n||n.scale.setValue(t,t,t),(null===(o=this._autoSync)||void 0===o?void 0:o.length)&&this._autoSync.forEach((function(e,t){var r,n=null===(r=i.el.getChildAtIndex(t))||void 0===r?void 0:r.getComponent(u.default);if(n&&-1!==e){var o=i.getPosition(e,m);o&&n.position.set(o)}}))},t.prototype._processData=function(e){var t=this,r=this.scene.ar;if(r){if(r._support(e.mode))return r.ready?void this._processTracker(e):(this._defer&&this.scene.event.remove("ar-ready",this._defer),this._defer=function(){return t._processTracker(e)},void this.scene.event.addOnce("ar-ready",this._defer));this._setState(o.Error,"AR track mode "+e.mode+" is not supported in current ar system now, ignore...")}else this._setState(o.Error,"ar-system is not existed in scene, ignore...")},t.prototype._processTracker=function(e){var t=this,r=this.scene.ar;if(this._autoSync=e.autoSync,this._mode=e.mode,h(this._state)&&(r._removeTracker(this),this._trackId=void 0,this._filePath=""),this._setState(o.Init),"Marker"!==e.mode&&"OSD"!==e.mode)return this._trackId=this.scene.ar._addTacker(this),void this._setState(o.Detecting);if(e.image||e.src)if(e.image)this._saveAndUseFile(e.image.localPath);else if(e.src){if(void 0!==this._fetchCancelMap[e.src])return;for(var n in this._fetchCancelMap)this._fetchCancelMap[n]=!0;if((0,c.isUserChooseFile)(e.src)||(0,c.isPackageFileURL)(e.src))return void this._saveAndUseFile(e.src);this._fetchCancelMap[e.src]=!1,(0,s.fetch)(e.src).then((function(r){var n=r.filePath;t._fetchCancelMap[e.src]||t._saveAndUseFile(n,e.src)})).catch((function(r){t._setState(o.Error,"Tracker src "+e.src+" is invalid, ignore..."+(r.message||r))})).finally((function(){delete t._fetchCancelMap[e.src]}))}},t.prototype._saveAndUseFile=function(e,t){var r=(t=t||e).split("."),n=r.pop();try{if(r.length<1)throw new Error("Tracker src must have extension like '.jpg'(2d) or '.map'(3d) !");var a=i._wx.env.USER_DATA_PATH+"/xr-frame-ar-tracker-"+this.el._elId+"."+n;(0,c.isPackageFileURL)(e)?i._wx.getFileSystemManager().copyFileSync(e,a):i._wx.getFileSystemManager().saveFileSync(e,a),this._filePath=a,this._trackId=this.scene.ar._addTacker(this),this._setState(o.Detecting),i._wx.getFileSystemManager().unlink({filePath:a})}catch(e){this._setState(o.Error,"Ar tracker process file error: "+(e.message||e))}},t.prototype._setState=function(e,t){this._state=e,this._errorMessage=t||"",this.el.event.trigger("ar-tracker-state",this),t&&f.default.error(this._errorMessage,p.EEReportScope.AR)},t}(a.default)},"./src/components/Animator.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AnimatorSchema:()=>u,EAnimationPlayState:()=>o,default:()=>l});var n,o,i=r("./src/core/Component.ts"),a=r("./src/core/logger.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};!function(e){e[e.Playing=0]="Playing",e[e.Paused=1]="Paused",e[e.Stopt=2]="Stopt"}(o||(o={}));var u={keyframe:{type:"keyframe"},clipMap:{type:"dict"},autoPlay:{type:"dict"}};const l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=u,t.priority=200,t._clips=new Map,t._animation2Clips=new Map,t._currents={},t}return s(t,e),t.prototype.onAdd=function(e,t){this._processData(t,null),this.scene.animation._addAnimator(this)},t.prototype.onUpdate=function(e,t){this._processData(e,t)},t.prototype.onRemove=function(e,t){this.scene.animation._removeAnimator(this),this.stop()},t.prototype.onRelease=function(e){this._clips=void 0,this._animation2Clips=void 0},t.prototype.addAnimation=function(e,t){if(!this._animation2Clips.has(e)){for(var r=0,n=e.clipNames;r<n.length;r++){var o=n[r],i=(null==t?void 0:t[o])||o;if(this._clips.has(i))a.default.warn("Clip "+i+" has already existed, ignore...");else if(this._clips.set(i,[e,o]),this._autoPlay){var s=this._autoPlay,u=s.clip,l=c(s,["clip"]);u?u===i&&this._startAutoPlay(i,l):this._startAutoPlay(i,l)}}return e}},t.prototype.createAnimation=function(e,t,r){var n=new e(this.scene,t);return this.addAnimation(n,r),n},t.prototype.removeAnimation=function(e){var t,r,n=this;e&&(null===(t=this._animation2Clips)||void 0===t?void 0:t.has(e))&&(null===(r=this._animation2Clips)||void 0===r||r.get(e).forEach((function(e){n._clips.delete(e)})))},t.prototype._tickAnimation=function(e){var t=e/1e3;for(var r in this._currents){var n=this._currents[r];if(n.delay-=t,!(n.delay>0)){var i=n.anim,a=n.duration,s=n.time,c=n.reverse,u=n.loop,l=n.direction,f=n.state,p=n.speed;if(f===o.Playing){var d=s/a;d=d>1?1:d,i.onUpdate(this.el,d,c),1!==d||0!==u?1===d?(n.loop-=1,n.time=0,"both"===l&&(n.reverse=!n.reverse)):n.time+=t*p:this.stop(r)}}}},t.prototype._processData=function(e,t){var r=this;if(e.keyframe!==(null==t?void 0:t.keyframe)?(this.removeAnimation(null==t?void 0:t.keyframe),this.addAnimation(e.keyframe,e.clipMap)):(e.clipMap,null==t||t.clipMap),this._autoPlay=e.autoPlay,e.autoPlay){var n=e.autoPlay,o=n.clip,i=c(n,["clip"]);if(o&&!this._clips.has(o))return;this._clips.forEach((function(e,t){o?o===t&&r._startAutoPlay(t,i):r._startAutoPlay(t,i)}))}},t.prototype.play=function(e,t){if(!this._currents[e]){var r=this._clips.get(e);if(r){if(!this._currents[e]){var n=t||{},i=n.speed,s=n.loop,u=n.delay,l=n.direction,f=c(n,["speed","loop","delay","direction"]),p=r[0],d=r[1],h=p.onPlay(this.el,d,f),_=this._currents[e]={anim:p,speed:i||1,duration:h.duration,delay:null!=u?u:h.delay||0,loop:null!=s?s:h.loop||0,direction:l||h.direction||"forwards",reverse:!1,time:0,state:o.Playing};_.reverse="backwards"===_.direction}}else a.default.warn("Clip "+e+" is not existed, ignore...")}},t.prototype.pauseToFrame=function(e,t){var r;this.play(e);var n=null===(r=this._currents[e])||void 0===r?void 0:r.anim;n&&(n.onUpdate(this.el,t,!1),this.pause())},t.prototype.pause=function(e){if(e){var t=this._currents[e];(null==t?void 0:t.state)===o.Playing&&(t.anim.onPause(this.el),t.state=o.Paused)}else for(var r in this._currents)this.pause(r)},t.prototype.resume=function(e){if(e){var t=this._currents[e];(null==t?void 0:t.state)===o.Paused&&(t.anim.onResume(this.el),t.state=o.Playing)}else for(var r in this._currents)this.resume(r)},t.prototype.stop=function(e){if(e){var t=this._currents[e];t.anim.onStop(this.el),t.state=o.Stopt,this.el.event.trigger("anim-stop",{name:e}),delete this._currents[e]}else for(var r in this._currents)this.stop(r)},t.prototype._startAutoPlay=function(e,t){if(this._autoPlay){var r={};for(var n in t){var o=t[n];try{r[n]=parseFloat(o)}catch(e){r[n]=o}}this.play(e,r)}},t}(i.default)},"./src/components/AssetLoad.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AssetLoadSchema:()=>s,default:()=>c});var n,o=r("./src/core/Component.ts"),i=r("./src/core/logger.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s={type:{type:"string"},assetId:{type:"string"},src:{type:"string"},defer:{type:"boolean"},weight:{type:"number",defaultValue:1},options:{type:"dict",defaultValue:{}}};const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=s,t._inited=!1,t}return a(t,e),Object.defineProperty(t.prototype,"loadParams",{get:function(){return this._loadParams},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){if(t.type&&t.assetId||i.default.throw(new Error("Asset must load with params: type, assetId")),this._loadParams=t,!t.src&&!this.scene.assets._checkAssetIsDefer(t.type,t.assetId))return this._parent=e,void i.default.warn("Wait src for asset "+t.type+", "+t.assetId+"...");this.scene.assets.loadAsset(this._loadParams,e),this._inited=!0},t.prototype.onUpdate=function(e,t){this._inited?i.default.warn("'src' for asset '"+e.assetId+"' has already been set, you can't change it anymore!"):(this._loadParams.src=e.src,this.scene.assets.loadAsset(this._loadParams,this._parent),this._parent=void 0,this._inited=!0)},t.prototype.onRemove=function(e,t){this.scene.assets.releaseAsset(this._loadParams.type,this._loadParams.assetId)},t}(o.default)},"./src/components/AssetMaterial.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AssetMaterialSchema:()=>c,default:()=>u});var n,o=r("./src/core/Component.ts"),i=r("./src/assets/Material.ts"),a=r("./src/core/logger.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c={assetId:{type:"string"},effect:{type:"effect",defaultValue:"simple"},uniforms:{type:"map"},states:{type:"map"},renderQueue:{type:"number"}};const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=c,t._preUniformStrs={},t._preStateStrs={},t._delta=0,t}return s(t,e),t.prototype.onAdd=function(e,t){t.assetId?(this._material=new i.default(this.scene),this._processData(t,null),this.scene.assets.addAsset("material",t.assetId,this._material)):a.default.error("You must give data 'assetId' for asset-material component !")},t.prototype.onUpdate=function(e,t){this._processData(e,t)},t.prototype.onRemove=function(e,t){t.assetId&&this.scene.assets.releaseAsset("material",t.assetId)},t.prototype._processData=function(e,t){var r=e.effect,n=e.uniforms,o=e.states,i=e.renderQueue;r&&r!==(null==t?void 0:t.effect)&&(this._material.initByEffect(r),this._effect=r),n&&n!==(null==t?void 0:t.uniforms)&&this._material._parseUniforms(n),o&&o!==(null==t?void 0:t.states)&&this._material._parseRenderStates(o),i&&i!==(null==t?void 0:t.renderQueue)&&(this._material.renderQueue=i)},t}(o.default)},"./src/components/AssetPostProcess.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AssetPostProcessSchema:()=>l,default:()=>f});var n,o=r("./src/core/Component.ts"),i=r("./src/assets/PostProcess.ts"),a=r("./src/core/logger.ts"),s=r("./src/core/DataValue.ts"),c=r("./src/render-graph/buildinRGNodes/postProcess.ts"),u=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l={assetId:{type:"string"},type:{type:"string"},isHDR:{type:"boolean"},data:{type:"dict"}};const f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=l,t}return u(t,e),Object.defineProperty(t.prototype,"assetData",{get:function(){return this._asset.data},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){var r;if(t.assetId){var n=null===(r=(0,c.getRGPostProcessNode)(t.type))||void 0===r?void 0:r.schema;n?(this._asset=new i.default(this.scene,this._parseOptionsData(t,n)),this.scene.assets.addAsset("post-process",t.assetId,this._asset)):a.default.error("Type "+t.type+" is invalid in post processing system !")}else a.default.error("You must give data 'assetId' for asset-post-process component !")},t.prototype.onUpdate=function(e,t){var r;if(e.data!==t.data){var n=null===(r=(0,c.getRGPostProcessNode)(e.type))||void 0===r?void 0:r.schema;Object.assign(this._asset.data,this._parseOptionsData(e,n).data)}},t.prototype.onRemove=function(e,t){t.assetId&&(this.scene.assets.releaseAsset("post-process",t.assetId),this._asset=void 0)},t.prototype._parseOptionsData=function(e,t){var r,n={};for(var o in t){var i=t[o];n[o]=(0,s.parseDataValue)(i.type,null===(r=e.data)||void 0===r?void 0:r[o],i.defaultValue,this.scene)}return{type:e.type,data:n,isHDR:e.isHDR}},t}(o.default)},"./src/components/AssetRenderTexture.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AssetRenderTextureSchema:()=>c,default:()=>u});var n,o=r("./src/core/Component.ts"),i=r("./src/assets/RenderTexture.ts"),a=r("./src/core/logger.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c={assetId:{type:"string"},width:{type:"number"},height:{type:"number"},isHDR:{type:"boolean"}};const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=c,t.isAssetRenderTexture=!0,t}return s(t,e),t.prototype.onAdd=function(e,t){t.assetId?(this._rt=new i.default(this.scene,t),this.scene.assets.addAsset("render-texture",t.assetId,this._rt)):a.default.error("You must give data 'assetId' for asset-render-texture component !")},t.prototype.onRemove=function(e,t){t.assetId&&(this.scene.assets.releaseAsset("render-texture",t.assetId),this._rt=void 0)},t}(o.default)},"./src/components/Assets.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AssetsSchema:()=>a,default:()=>s});var n,o=r("./src/core/Component.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a={};const s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=a,t._totalCount=0,t._totalWeight=0,t._currentCount=0,t._currentWeight=0,t._errorMap={},t._loadedAssets={},t}return i(t,e),t.prototype._addAsset=function(e){this._totalCount+=1,this._totalWeight+=e.weight},t.prototype._removeAsset=function(e){this._totalCount-=1,this._totalWeight-=e.weight,this._currentCount-=1,this._currentWeight-=e.weight},t.prototype._onProgressOne=function(e,t){this._currentWeight-=e.weight*e.progress,this._currentWeight+=e.weight*t,e.progress=t,this.el.event.trigger("progress",{progress:this._currentWeight/this._totalWeight,asset:e})},t.prototype._onLoadOne=function(e,t){this._currentCount+=1,this._loadedAssets[this._getName(e)]=e,t&&(this._errorMap[this._getName(e)]=t),this._currentCount===this._totalCount&&this.el.event.trigger("loaded",{errors:this._errorMap,assets:this._loadedAssets})},t.prototype._getName=function(e){return e.type+"-"+e.assetId},t}(o.default)},"./src/components/Camera.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{CameraSchema:()=>m,default:()=>g});var n,o=r("./src/core/Component.ts"),i=r("./src/ext.ts"),a=r("./src/math/vector3.ts"),s=r("./src/math/matrix4.ts"),c=r("./src/math/quaternion.ts"),u=r("./src/assets/RenderTexture.ts"),l=r("./src/components/Transform.ts"),f=r("./src/core/logger.ts"),p=r("./src/core/reporter.ts"),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),h=(new a.default).setValue(0,1,0),_=new a.default,m={target:{type:"transform"},renderTarget:{type:"render-texture"},isPerspective:{type:"boolean",defaultValue:!0},cullMask:{type:"number",defaultValue:4294967295},depth:{type:"number",defaultValue:0},fov:{type:"number",defaultValue:60},near:{type:"number",defaultValue:.1},far:{type:"number",defaultValue:100},orthSize:{type:"number",defaultValue:4},background:{type:"string",defaultValue:"default"},isARCamera:{type:"boolean",defaultValue:!1},isClearDepth:{type:"boolean",defaultValue:!0},isClearStencil:{type:"boolean",defaultValue:!0},isClearColor:{type:"boolean",defaultValue:!0},clearDepth:{type:"number",defaultValue:1},clearStencil:{type:"number",defaultValue:0},clearColor:{type:"color",defaultValue:[0,0,0,1]},postProcess:{type:"array",defaultValue:[]},allowFeatures:{type:"array",defaultValue:[]}};function v(e){return void 0!==e.buffer}var y=new s.default;const g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=m,t.priority=200,t._background="default",t._postProcess=[],t._hdr=!1,t._bgStates={},t._bgStatesClear=!0,t._allowFeatures=[],t._features={},t._modifyToRenderSystem=function(){t.scene.render._modifyCameraImportantProps(t)},t}return d(t,e),Object.defineProperty(t.prototype,"depth",{get:function(){return this._depth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderTarget",{get:function(){return this._renderTarget},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){var e;return null===(e=this._cameraComp)||void 0===e?void 0:e.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bgStates",{get:function(){return this._bgStates},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bgStatesClear",{get:function(){return this._bgStatesClear},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"background",{get:function(){return this._background},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"near",{get:function(){return this._cameraComp.near},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"far",{get:function(){return this._cameraComp.far},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullMask",{get:function(){return this._cameraComp.cullingMask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"postProcess",{get:function(){return this._postProcess},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hdr",{get:function(){return this._hdr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowFeatures",{get:function(){return this._allowFeatures},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"features",{get:function(){return this._features},enumerable:!1,configurable:!0}),t.prototype.cull=function(e,t){this._cameraComp&&(this._changeAspect(),this._cameraComp.cull(e,t))},t.prototype.clear=function(){this.view&&(this._changeAspect(),(0,i.getKanata)(this.scene).renderEnv.clearView(this.view))},t.prototype.draw=function(e,t){e.usedSize&&this._cameraComp&&(this._changeAspect(),this._cameraComp.draw(e,t))},t.prototype.drawLight=function(e,t,r){e.lightCamera&&t.usedSize&&(this._changeAspect(),e.lightCamera.draw(this._cameraComp,t,r))},t.prototype.convertWorldPositionToClip=function(e,t){var r=y;return this._projMatrix.multiply(this._viewMatrix,r).transformPoint(e,t)},t.prototype.convertClipPositionToWorld=function(e,t){var r=y;return this._projMatrix.multiply(this._viewMatrix,r).inverse(r).transformPoint(e,t)},t.prototype.changeViewMatrix=function(e,t){this._cameraComp&&(e?(t=v(t)?t:null==t?void 0:t._raw.slice(t._offset,t._offset+16),this._cameraComp.changeViewMatrix(e,t)):this._cameraComp.changeViewMatrix(!1))},t.prototype.changeProjectMatrix=function(e,t){this._cameraComp&&(e?(t=v(t)?t:null==t?void 0:t._raw.slice(t._offset,t._offset+16),this._cameraComp.changeProjectionMatrix(e,t)):this._cameraComp.changeProjectionMatrix(!1))},t.prototype.setBackgroundRenderStates=function(e){Object.assign(this._bgStates,e||{}),this._bgStatesClear=!1},t.prototype.clearBackgroundRenderStates=function(){this._bgStatesClear=!0},t.prototype._setFeatures=function(e){this._features=e},t.prototype.onAdd=function(e,t){if(!this._cameraComp){var r=(0,i.getKanata)(this.scene);this._cameraComp=new r.CameraComponent(this.el.getComponent(l.default).node),this._cameraComp.cullingMask=4294967295,this._viewMatrix=new s.default(this._cameraComp._f32view,r.CameraComponent.OFFSETS.viewMatrix),this._projMatrix=new s.default(this._cameraComp._f32view,r.CameraComponent.OFFSETS.projectionMatrix),this._id=this._cameraComp.id}this._processData(t,void 0),this._cameraComp.active=!0,this.scene.render._addCamera(this)},t.prototype.onUpdate=function(e,t){this._processData(e,t)},t.prototype.onRemove=function(e,t){this._cameraComp.active=!1,this.scene.render._removeCamera(this)},t.prototype.onRelease=function(e){var t;this._cameraComp&&(null===(t=this._cameraComp)||void 0===t||t.destroy(),this._cameraComp=null)},t.prototype._processData=function(e,t){var r,n=this,o=e.target,i=e.renderTarget,a=e.depth,s=e.isPerspective,u=e.fov,d=e.near,m=e.far,v=e.orthSize,y=e.background,g=e.isARCamera,b=e.isClearColor,w=e.isClearDepth,x=e.isClearStencil,S=e.clearColor,E=e.clearDepth,T=e.clearStencil,C=e.postProcess,A=e.allowFeatures,O=this._cameraComp;if(O.cullingMask=e.cullMask,s!==(null==t?void 0:t.isPerspective)&&(O.isProjection=s),a!==(null==t?void 0:t.depth)&&(this._depth=a,this._modifyToRenderSystem()),u!==(null==t?void 0:t.fov)&&(O.fov=u*Math.PI/180),d!==(null==t?void 0:t.near)&&(O.near=d),m!==(null==t?void 0:t.far)&&(O.far=m),v!==(null==t?void 0:t.orthSize)&&(O.orthoSize=v),o!==(null==t?void 0:t.target)){this._target=o,O.targetTransform=o?o.node.id:0;var M=this.el.getComponent(l.default),R=M.position,P=M.quaternion;_.set(R).sub(o.position,_),c.default.lookRotation(_,h,P)}if(i!==(null==t?void 0:t.renderTarget)&&(this._renderTarget=i,this._modifyToRenderSystem()),y!==(null==t?void 0:t.background)&&("ar"!==y||this.scene.ar?(this._background=y,"default"!==y&&this._rebuildView(e),this._modifyToRenderSystem()):f.default.error("Camera background 'ar' request ARSystem, ignore...",p.EEReportScope.AR)),C!==(null==t?void 0:t.postProcess)){var I=!1;this._postProcess=C.map((function(e){var t=n.scene.assets.getAsset("post-process",e);return I=I||(null==t?void 0:t.isHDR),t})).filter((function(e){return!!e})),this._hdr=I,this._rebuildView(e),this._modifyToRenderSystem()}A!==(null==t?void 0:t.allowFeatures)&&(this._allowFeatures=A,this._modifyToRenderSystem()),g!==(null==t?void 0:t.isARCamera)&&(null===(r=this.el.scene.ar)||void 0===r||r._setTrackCamera(this,!g)),g&&o&&f.default.error("Camera that enabled `isARCamera` property must not have `target` !"),b===(null==t?void 0:t.isClearColor)&&w===(null==t?void 0:t.isClearDepth)&&x===(null==t?void 0:t.isClearStencil)&&S===(null==t?void 0:t.clearColor)&&E==E&&T==T||this._rebuildView(e)},t.prototype._changeAspect=function(){var e=this._renderTarget;u.default.IS(e)?this._cameraComp.aspect=e.width/e.height:this._cameraComp.aspect=Math.floor(this.scene.width)/Math.floor(this.scene.height)},t.prototype._rebuildView=function(e){var t,r,n=e.isClearColor,o=e.isClearDepth,a=e.isClearStencil,s={};s.colorAction=n?i.Kanata.ELoadAction.CLEAR:i.Kanata.ELoadAction.LOAD,s.depthAction=o?i.Kanata.ELoadAction.CLEAR:i.Kanata.ELoadAction.LOAD,s.stencilAction=a?i.Kanata.ELoadAction.CLEAR:i.Kanata.ELoadAction.LOAD,s.clearColor=(null===(t=this._postProcess)||void 0===t?void 0:t.length)?(r=e.clearColor,[Math.pow(r[0],2.2),Math.pow(r[1],2.2),Math.pow(r[2],2.2),r[3]]):e.clearColor,s.clearDepth=e.clearDepth,s.clearStencil=e.clearStencil;var c=this._viewport,u=c?c.xMin:0,l=c?c.yMin:0,f=c?c.width:1,p=c?c.height:1,d={x:u,y:l,w:f,h:p},h={x:u,y:l,w:f,h:p};this._cameraComp.view=new((0,i.getKanata)(this.scene).View)({passAction:s,viewport:d,scissor:h})},t}(o.default)},"./src/components/CameraOrbitControl.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{CameraOrbitControlSchema:()=>b,default:()=>w});var n,o,i,a=r("./src/core/Component.ts"),s=r("./src/math/quaternion.ts"),c=r("./src/math/Spherical.ts"),u=r("./src/math/vector3.ts"),l=r("./src/math/vector2.ts"),f=r("./src/components/Camera.ts"),p=r("./src/components/Transform.ts"),d=r("./src/core/logger.ts"),h=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),_=(new u.default).setValue(0,1,0);!function(e){e[e.NONE=-1]="NONE",e[e.MOVE=0]="MOVE",e[e.ZOOM_OR_PAN=1]="ZOOM_OR_PAN"}(o||(o={})),function(e){e[e.NONE=-1]="NONE",e[e.MOVE=0]="MOVE",e[e.ZOOM=1]="ZOOM",e[e.PAN=2]="PAN"}(i||(i={}));var m=new l.default,v=new l.default,y=new u.default,g=new c.default,b={isLockX:{type:"boolean",defaultValue:!1},isLockY:{type:"boolean",defaultValue:!1},isLockZoom:{type:"boolean",defaultValue:!1},isLockRotate:{type:"boolean",defaultValue:!1},isLockMove:{type:"boolean",defaultValue:!1},enableDamping:{type:"boolean",defaultValue:!0},zoomMax:{type:"number",defaultValue:1/0},zoomMin:{type:"number",defaultValue:-1/0},panSpeed:{type:"number",defaultValue:1},rotateSpeed:{type:"number",defaultValue:1},zoomSpeed:{type:"number",defaultValue:1},dampingFactor:{type:"number",defaultValue:.1}};const w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=b,t.isLockX=!1,t.isLockY=!1,t.isLockZoom=!1,t.isLockRotate=!1,t.isLockMove=!1,t.isEnabled=!1,t.zoomMax=1/0,t.zoomMin=-1/0,t.panSpeed=1,t.rotateSpeed=1,t.zoomSpeed=1,t.enableDamping=!0,t.dampingFactor=.1,t._eye=new u.default,t._spherical=new c.default,t._originSpherical=new c.default,t._mouseInfo=null,t._tmpVec=new u.default,t._tmpUp=new u.default,t.overBounding=!1,t._onResize=function(){var e=t.scene,r=e.width,n=e.height;t._radius=(r+n)/4},t._handleTouchStart=function(e){t._mouseInfo.isDown=!0;var r=e.touches[0],n=e.touches[1];switch(e.touches.length){case 1:t._mouseInfo.startX=r.pageX,t._mouseInfo.startY=r.pageY,t._mouseInfo.state=o.MOVE;break;case 2:t._mouseInfo.startPointerDistance=m.setValue(r.pageX,r.pageY).sub(v.setValue(n.pageX,n.pageY)).length(),t._mouseInfo.startX=(r.pageX+n.pageX)/2,t._mouseInfo.startY=(r.pageY+n.pageY)/2,t._mouseInfo.state=o.ZOOM_OR_PAN}var i=t.scene.event;t.scene.event.remove("touchstart",t._handleTouchStart),i.add("touchmove",t._handleTouchMove),i.addOnce("touchend",t._handleTouchEnd)},t._handleTouchMove=function(e){if(t._mouseInfo.isDown)switch(t._mouseInfo.state){case o.MOVE:1===e.touches.length?t._handleToucheMove(e):2===e.touches.length&&(t._handleTouchEnd(e),t._handleTouchStart(e));break;case o.ZOOM_OR_PAN:1===e.touches.length||2===e.touches.length&&t._handleToucheZoomOrPan(e)}},t._handleTouchEnd=function(e){t._mouseInfo.isDown=!1,t._mouseInfo.state=o.NONE,t.scene.event.remove("touchmove",t._handleTouchMove),t.scene.event.remove("touchend",t._handleTouchEnd),t.scene.event.addOnce("touchstart",t._handleTouchStart)},t._handleToucheZoomOrPan=function(e){var r=e.touches[0],n=e.touches[1],o=m.setValue(r.pageX,r.pageY).sub(v.setValue(n.pageX,n.pageY)).length(),i=o-t._mouseInfo.startPointerDistance;t._mouseInfo.startPointerDistance=o;r.pageX,t._mouseInfo.startX,r.pageY,t._mouseInfo.startY;t._mouseInfo.startX=(r.pageX+n.pageX)/2,t._mouseInfo.startY=(r.pageY+n.pageY)/2,i<-2?i=-2:i>2&&(i=2);var a=.02*-i+1;t._scale(a)},t}return h(t,e),Object.defineProperty(t.prototype,"damping",{get:function(){return this.enableDamping&&(Math.abs(g.radius)>.01||Math.abs(g.theta)>.01||Math.abs(g.phi)>.01||y.length()>.01)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){this._processData(t),this._onResize(),this.enable()},t.prototype.onUpdate=function(e){this._processData(e)},t.prototype.onTick=function(e,t){var r,n;(null===(r=this._camera)||void 0===r?void 0:r.target)&&this._target!==this._camera.target.position&&(this._target=null===(n=this._camera)||void 0===n?void 0:n.target.position.clone(),this._resetSpherical()),this._updateTransform()},t.prototype.onRemove=function(){this.disable()},t.prototype._processData=function(e){for(var t in this._camera||(this._camera=this.el.getComponent(f.default),this._transform=this.el.getComponent(p.default)),e)this[t]=e[t]},t.prototype.enable=function(){var e;this.isEnabled||((null===(e=this._camera)||void 0===e?void 0:e.target)?(this._mouseInfo={startX:0,startY:0,isDown:!1,startPointerDistance:0,state:o.NONE,dampState:i.NONE},this.scene.event.addOnce("touchstart",this._handleTouchStart),this.isEnabled=!0):d.default.warn("'CameraOrbitControl' requires an camera with valid 'target' !"))},t.prototype.disable=function(){this.isEnabled&&(this.isEnabled=!1)},t.prototype._resetSpherical=function(){this._spherical.setFromVector3(this._eye.set(this._transform.position).sub(this._target,this._eye)),this._originSpherical.copy(this._spherical)},t.prototype._rotate=function(e,t){if(!this.isLockRotate){var r=this._mouseInfo,n=r.startX,o=r.startY,a=(e-n)/this._radius*-this.rotateSpeed,s=(t-o)/this._radius*-this.rotateSpeed;Math.abs(a)<.01&&Math.abs(s)<.01||(this.isLockX&&(a=0),this.isLockY&&(s=0),g.theta=a,g.phi=s,this._mouseInfo.startX=e,this._mouseInfo.startY=t,this._mouseInfo.dampState=i.MOVE)}},t.prototype._scale=function(e){if(!this.isLockZoom){var t=this._spherical.radius,r=this.zoomMax,n=this.zoomMin,o=t*e;g.radius=o>r?r-t:o<n?n-t:(o-t)*this.zoomSpeed,this._mouseInfo.dampState=i.ZOOM}},t.prototype._move=function(e,t){if(!this.isLockMove){this._camera;var r=this._transform,n=r.position,o=r.worldRight,a=r.worldUp,s=this.panMax,c=this.panMin;this._tmpVec.set(o),this._tmpUp.set(a);var u=this._setVector3Length(this._tmpVec,e);if(u.add(this._setVector3Length(this._tmpUp,-t)),u.scale(this.panSpeed),s||c){var l=this._tmpVec.set(n).add(u,this._tmpVec);l.x>=s.x?(u.x=s.x-n.x,this.overBounding=!0):l.x<=c.x&&(u.x=c.x-n.x,this.overBounding=!0),l.y>=s.y?(u.y=s.y-n.y,this.overBounding=!0):l.y<=c.y&&(u.y=c.y-n.y,this.overBounding=!0),l.z>=s.z?(u.z=s.z-n.z,this.overBounding=!0):l.x<=c.x&&(u.z=c.z-n.z,this.overBounding=!0)}y.set(u),this._mouseInfo.dampState=i.PAN}},t.prototype._updateTransform=function(){if(this.damping){var e=this._transform,t=e.position,r=e.quaternion;switch(this._eye.set(t).sub(this._target,this._eye),this._mouseInfo.dampState){case i.PAN:this._target.add(y);break;case i.MOVE:this._spherical.theta+=g.theta,this._spherical.phi+=g.phi,this._spherical.makeSafe(),this._spherical.toVector3(this._eye);break;case i.ZOOM:this._spherical.radius+=g.radius,this._spherical.makeSafe(),this._spherical.toVector3(this._eye)}if(this._eye.add(this._target,t),s.default.lookRotation(this._eye,_,r),!this.enableDamping)return y.setValue(0,0,0),void(g.theta=g.phi=0);var n=1-this.dampingFactor;this.overBounding?(y.setValue(0,0,0),this.overBounding=!1):y.scale(n),g.theta*=n,g.phi*=n;var o=(g.radius*=n)+this._spherical.radius;(o>this.zoomMax||o<this.zoomMin)&&(g.radius=0)}},t.prototype._handleToucheMove=function(e){this._rotate(e.touches[0].pageX,e.touches[0].pageY)},t.prototype._setVector3Length=function(e,t){return e.normalize().scale(t)},t}(a.default)},"./src/components/Env.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{EnvSchema:()=>c,default:()=>u});var n,o=r("./src/core/Component.ts"),i=r("./src/assets/RenderTexture.ts"),a=r("./src/core/DataValue.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c={rotation:{type:"number",defaultValue:0},isSky2D:{type:"boolean",defaultValue:!1},diffuseExp:{type:"number",defaultValue:1},specularExp:{type:"number",defaultValue:1},envData:{type:"env-data"},skyMap:{type:"texture"}};const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=c,t._isSky2D=!1,t._isSkyRT=!1,t}return s(t,e),Object.defineProperty(t.prototype,"useHalfSkyMap",{get:function(){var e;return!!(null===(e=this._envData)||void 0===e?void 0:e.useHalfSkyMap)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skyMap",{get:function(){var e;return this._skyMap||(null===(e=this._envData)||void 0===e?void 0:e.skyboxMap)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSky2D",{get:function(){return this._isSky2D},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSkyRT",{get:function(){return this._isSkyRT},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasDiffuse",{get:function(){var e;return!!(null===(e=this._envData)||void 0===e?void 0:e.hasDiffuse)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"diffuseSH",{get:function(){var e;return null===(e=this._envData)||void 0===e?void 0:e.diffuseSH},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"diffuseExp",{get:function(){return this._diffuseExp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSpecular",{get:function(){var e;return!!(null===(e=this._envData)||void 0===e?void 0:e.hasSpecular)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"specularRGBD",{get:function(){var e;return null===(e=this._envData)||void 0===e?void 0:e.specularRGBD},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"specularMipmaps",{get:function(){var e;return null===(e=this._envData)||void 0===e?void 0:e.specularMipmaps},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"specularMipmapCount",{get:function(){var e;return null===(e=this._envData)||void 0===e?void 0:e.specularMipmapCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"specularMap",{get:function(){var e;return null===(e=this._envData)||void 0===e?void 0:e.specularMap},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"specularExp",{get:function(){return this._specularExp},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){this._processData(t),this.scene.render._setEnv(this)},t.prototype.onUpdate=function(e,t){this._processData(e)},t.prototype._processData=function(e){this._rotation=e.rotation*Math.PI/180,this._diffuseExp=e.diffuseExp,this._specularExp=e.specularExp,this._envData=e.envData,this._skyMap=(0,a.isTextureWrapper)(e.skyMap)?e.skyMap.texture:e.skyMap,this._isSky2D=!!e.isSky2D,this._isSkyRT=e.skyMap instanceof i.default},t.prototype.onRemove=function(e,t){this.scene.render._setEnv(void 0)},t}(o.default)},"./src/components/GLTF.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{GLTFSchema:()=>p,default:()=>d});var n,o=r("./src/core/Component.ts"),i=r("./src/loader/glTF/utils/types.ts"),a=r("./src/math/boundBox.ts"),s=r("./src/components/Animator.ts"),c=r("./src/components/Mesh.ts"),u=r("./src/components/Transform.ts"),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},p={model:{type:"gltf"},castShadow:{type:"boolean",defaultValue:!1},receiveShadow:{type:"boolean",defaultValue:!1},states:{type:"map"}};const d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=p,t.priority=300,t._subRoots=[],t._nodeMap=new Map,t._animations=[],t._meshes=[],t}return l(t,e),t.prototype.onAdd=function(e,t){this.releaseSubTree(),t.model&&this.buildSubTree(t)},t.prototype.onUpdate=function(e,t){var r;e.model!==t.model&&(this.releaseSubTree(),e.model&&this.buildSubTree(e)),e.states!==t.states&&(null===(r=this._meshes)||void 0===r?void 0:r.length)&&this._meshes.forEach((function(t){return t.material._parseRenderStates(e.states)}))},t.prototype.onRemove=function(e,t){this.releaseSubTree()},t.prototype.onRelease=function(e){},t.prototype.buildSubTree=function(e){var t=this,r={castShadow:!!e.castShadow,receiveShadow:!!e.receiveShadow,neverCull:!!e.neverCull},n=e.model.instantiate(this.el,r),o=n[0],i=n[1],a=n[2],u=n[3];this._subRoots=o,this._meshes=u,this._nodeMap.clear(),i.forEach((function(e,r){if(r.data.name&&(t._nodeMap.set(r.data.name,{el:e,hasMesh:!1}),r.data.mesh)){var n=t._nodeMap.get(r.data.name);Object.assign(n,{hasMesh:!0,meshName:r.data.mesh.name,meshes:[]});for(var o=0,i=e._children;o<i.length;o++){var a=i[o];a.getComponent(c.default)&&n.meshes.push(a.getComponent(c.default))}}}));var l=this.el.getComponent(s.default);l||(l=this.el.addComponent(s.default)),this._animations=a;for(var f=0,p=a;f<p.length;f++){var d=p[f];l.addAnimation(d)}if(e.states)for(var h=0,_=u;h<_.length;h++){_[h].material._parseRenderStates(e.states)}this.el.event.trigger("gltf-loaded",{target:this.el},!0,!0,!0)},t.prototype.releaseSubTree=function(){for(var e=0;e<this._subRoots.length;e++)this.el.removeChild(this._subRoots[e]);this._subRoots=[],this._nodeMap.clear();var t=this.el.getComponent(s.default);if(t)for(var r=0,n=this._animations;r<n.length;r++){var o=n[r];t.removeAnimation(o)}this._animations=[]},t.prototype.getInternalNodeByName=function(e){return this._nodeMap.get(e).el},t.prototype._dfs=function(e){for(var t=f([],this._subRoots);t.length>0;){var r=t.pop();e(r);for(var n=0,o=r._children;n<o.length;n++){var i=o[n];t.push(i)}}},Object.defineProperty(t.prototype,"meshes",{get:function(){return this._meshes},enumerable:!1,configurable:!0}),t.prototype.calcTotalBoundBox=function(){for(var e=i.GLTF.BoundingBox.createInfinite(),t=0;t<this._meshes.length;t++){var r=this._meshes[t],n=r.geometry.boundBox.center.sub(r.geometry.boundBox.size.scale(.5)),o=r.geometry.boundBox.center.add(r.geometry.boundBox.size.scale(.5)),s=r.el.getComponent(u.default);s.worldMatrix.transformPoint(n,n),s.worldMatrix.transformPoint(o,o),e.adoptMin(n),e.adoptMax(o)}var c=this.el.getComponent(u.default);e.min=c.worldMatrix.inverse().transformPoint(e.min),e.max=c.worldMatrix.inverse().transformPoint(e.max);var l=new a.default;return l.center=e.max.add(e.min).scale(.5),l.size=e.max.sub(e.min),l},t.prototype.getPrimitivesByNodeName=function(e){var t,r=this._nodeMap.get(e);return r&&r.hasMesh&&null!==(t=r.meshes)&&void 0!==t?t:[]},t.prototype.getPrimitivesByMeshName=function(e){var t=[];return this._nodeMap.forEach((function(r,n){var o;r.hasMesh&&r.meshName===e&&t.push({nodeName:n,primitives:null!==(o=r.meshes)&&void 0!==o?o:[]})})),t},t}(o.default)},"./src/components/Light.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ELightType:()=>o,LightSchema:()=>u,default:()=>l});var n,o,i=r("./src/core/Component.ts"),a=r("./src/ext.ts"),s=r("./src/components/Transform.ts"),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){e.Ambient="ambient",e.Directional="directional",e.Point="point",e.Spot="spot"}(o||(o={}));var u={type:{type:"string",defaultValue:"directional"},color:{type:"color",defaultValue:[1,1,1,1]},range:{type:"number",defaultValue:1},intensity:{type:"number",defaultValue:1},innerConeAngle:{type:"number",defaultValue:0},outerConeAngle:{type:"number",defaultValue:45},castShadow:{type:"boolean",defaultValue:!1},shadowDistance:{type:"number",defaultValue:10},shadowBias:{type:"number",defaultValue:.002}};const l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=u,t.priority=200,t}return c(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._currentData.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._currentData.color},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"intensity",{get:function(){return this._currentData.intensity},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){return this._currentData.range},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"innerConeAngle",{get:function(){return this._currentData.innerConeAngle*Math.PI/180},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outerConeAngle",{get:function(){return this._currentData.outerConeAngle*Math.PI/180},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"castShadow",{get:function(){return this._currentData.castShadow},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowDistance",{get:function(){return this._currentData.shadowDistance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowBias",{get:function(){return this._currentData.shadowBias},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lightCamera",{get:function(){return this._lightCamera},enumerable:!1,configurable:!0}),t.prototype._getType=function(){switch(this.type){case o.Directional:return 0;case o.Point:return 1;case o.Spot:return 2;default:return-1}},t.prototype.onAdd=function(e,t){this.scene.render.lights._addLight(this),this._changeLightCamera(t)},t.prototype.onUpdate=function(e,t){this.scene.render.lights._modifyLight(this),this._changeLightCamera(e)},t.prototype.onTick=function(e,t){var r=this.el.getComponent(s.default);this._preTrsVersion!==r.version&&(this.scene.render.lights._modifyLight(this),this._preTrsVersion=r.version)},t.prototype.onRemove=function(e,t){this.scene.render.lights._removeLight(this)},t.prototype.onRelease=function(e){},t.prototype._changeLightCamera=function(e){if(e.castShadow&&this.type===o.Directional){if(!this._lightCamera){this._lightCamera=new((0,a.getKanata)(this.scene).LightCameraComponent),this._lightCamera.shadowFilterMode=a.Kanata.EShadowFitMode.FitFrustum,this._lightCamera.shadowMode=a.Kanata.EShadowMode.OneCascade_PCF,this._lightCamera.setCascadedSplits(1,1,1);var t={colorAction:a.Kanata.ELoadAction.CLEAR,depthAction:a.Kanata.ELoadAction.CLEAR,stencilAction:a.Kanata.ELoadAction.LOAD,clearColor:[1,1,1,1],clearDepth:1,clearStencil:0},r={x:0,y:0,w:1,h:1},n=r;this._lightCamera.view=new((0,a.getKanata)(this.scene).View)({passAction:t,viewport:r,scissor:n})}this._lightCamera.shadowDistance=e.shadowDistance}else this._lightCamera=void 0},t.prototype._copyLightMatrices=function(e){this._lightCamera.prepareUniforms(e)},t}(i.default)},"./src/components/Mesh.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{MeshSchema:()=>u,default:()=>l});var n,o=r("./src/core/Component.ts"),i=r("./src/ext.ts"),a=r("./src/math/boundBall.ts"),s=r("./src/components/Transform.ts"),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u={neverCull:{type:"boolean",defaultValue:!1},castShadow:{type:"boolean",defaultValue:!1},receiveShadow:{type:"boolean",defaultValue:!1},geometry:{type:"geometry"},material:{type:"material",defaultValue:"default"},uniforms:{type:"map"},states:{type:"map"}};const l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=u,t.priority=300,t}return c(t,e),Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this._material},set:function(e){if(this._mesh){for(var t=0;t<this._geometry.getSubMeshCount();t+=1)this._mesh.setMaterial(t,e.kanataMaterial);this._material=e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"morphWeights",{get:function(){var e;return null===(e=this._mesh)||void 0===e?void 0:e.uniforms.getUniform("u_morphWeights")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._mesh.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_visible",{set:function(e){var t;null===(t=this._cull)||void 0===t||t.setActive(e)},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){this._mesh||t.geometry&&(this._rebuildMesh(t.geometry,t.neverCull),this._setMeshData(t.geometry,t.material,t.uniforms,t.states,t.castShadow,t.receiveShadow))},t.prototype.onTick=function(e,t){var r;null===(r=this._material)||void 0===r||r._checkTextures(e)},t.prototype.onUpdate=function(e,t){this._mesh&&((e.geometry!==t.geometry&&e.geometry.getSubMeshCount()!==t.geometry.getSubMeshCount()||e.neverCull!==t.neverCull)&&this._rebuildMesh(e.geometry,e.neverCull),this._setMeshData(e.geometry,e.material,e.uniforms,e.states,e.castShadow,e.receiveShadow))},t.prototype.onRemove=function(e,t){var r;null===(r=this._cull)||void 0===r||r.setActive(!1)},t.prototype.onRelease=function(e){var t,r;null===(t=this._mesh)||void 0===t||t.destroy(),null===(r=this._cull)||void 0===r||r.destroy(),this._mesh=void 0,this._cull=void 0},t.prototype._rebuildMesh=function(e,t){var r=this.el.getComponent(s.default);this._trs=r,this._cull||(this._cull=new((0,i.getKanata)(this.scene).CullingComponent)(r.node),this._cull.bindEntity(r.node)),this._geometry=e,this._mesh=new((0,i.getKanata)(this.scene).MeshRendererComponent)(r.node,{meshCount:e.getSubMeshCount(),renderType:this._getMeshType(),uniformBlock:new((0,i.getKanata)(this.scene).UniformBlock)(this._getUniformDesc()),culling:t?void 0:this._cull,macros:this._getMarcos(e)})},t.prototype._setMeshData=function(e,t,r,n,o,i){r||n?this._sourceMaterial===t&&this._sourceMaterial!==this._material||(this._material=t.clone()):this._material=t,r&&this._material._parseUniforms(r),n&&this._material._parseRenderStates(n),this._sourceMaterial=t;for(var s=0;s<e.getSubMeshCount();s+=1){var c=e.subMeshes[s];this._mesh.setIndexBuffer(s,e.indexBuffer),this._mesh.setVertexBuffer(s,e.vertexBuffer),this._mesh.setStartIndex(s,c.offset),this._mesh.setNumIndices(s,c.length),this._mesh.setMaterial(s,this._material.kanataMaterial)}this._cull.setBoundingBallCenter(e._raw,a.default.OFFSETS.center),this._cull.setBoundingBallRadius(e._raw[a.default.OFFSETS.radius]),this._mesh.castShadow=!!o,this._mesh.changeMacros({WX_RECEIVE_SHADOW:!!i})},t.prototype._getMarcos=function(e){var t={},r=e.vertexLayout,n=!!r.getConfigByUsage(i.Kanata.EVertexLayoutUsage.UV1);t.WX_USE_UV1=n,r.getConfigByUsage(i.Kanata.EVertexLayoutUsage.UV2)&&(t.WX_USE_UV2=!0),r.getConfigByUsage(i.Kanata.EVertexLayoutUsage.UV3)&&(t.WX_USE_UV3=!0);var o=!!r.getConfigByUsage(i.Kanata.EVertexLayoutUsage.NORMAL);t.WX_USE_NORMAL=o;var a=!!r.getConfigByUsage(i.Kanata.EVertexLayoutUsage.TANGENT);t.WX_USE_TANGENT=a;var s=!!r.getConfigByUsage(i.Kanata.EVertexLayoutUsage.COLOR);return t.WX_USE_MESH_COLOR=s,t},t.prototype._getUniformDesc=function(){return this.scene.assets.getAsset("uniform-desc","mesh-static")},t.prototype._getMeshType=function(){return i.Kanata.EMeshRenderType.Static3D},t}(o.default)},"./src/components/Text.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{TextSchema:()=>u,default:()=>d});var n,o=r("./src/core/Component.ts"),i=r("./src/ext.ts"),a=r("./src/components/Transform.ts"),s=r("./src/glyph/query.ts"),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u={neverCull:{type:"boolean",defaultValue:!1},material:{type:"material",defaultValue:"default"},uniforms:{type:"map"},value:{type:"string"},states:{type:"map"}},l=[{name:"a_position",format:2,offset:0,usage:1},{name:"a_texCoord",format:1,offset:12,usage:4},{name:"a_normal",format:2,offset:20,usage:2}],f=function(e,t,r,n,o,i,a,s,c,u){var l=4*t*8;e[l+0]=r,e[l+1]=n,e[l+8]=o,e[l+8+1]=i,e[l+16]=a,e[l+16+1]=s,e[l+24]=c,e[l+24+1]=u},p=function(e,t,r){var n=4*t*8;e[n+3]=r[0],e[n+3+1]=r[1],e[n+8+3]=r[2],e[n+8+3+1]=r[3],e[n+16+3]=r[4],e[n+16+3+1]=r[5],e[n+24+3]=r[6],e[n+24+3+1]=r[7]};const d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=u,t.priority=300,t._value="",t._glyphs=[],t._renderDatas=[],t._textDataDirty=!1,t}return c(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this._material},set:function(e){if(this._mesh){for(var t=0;t<1;t+=1)this._mesh.setMaterial(t,e.kanataMaterial);this._material=e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._mesh.id},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){this._mesh||(this._updateRenderData(t),this._glyphs.length>0&&(this._textDataDirty=!1,this._rebuildMesh(t.neverCull),this._setMeshData(t.material,t.uniforms)))},t.prototype.onTick=function(e,t){var r,n,o;this._trs&&(null===(r=this._cull)||void 0===r||r.setActive(this._trs.visible),null===(n=this._cull)||void 0===n||n.setLayer(this._trs.layer)),null===(o=this._material)||void 0===o||o._checkTextures(e)},t.prototype.onUpdate=function(e,t){this._mesh&&this._textDataDirty&&(this._textDataDirty=!1,this._rebuildMesh(!0),this._setMeshData(e.material,e.uniforms,e.states))},t.prototype.onRemove=function(e,t){var r;null===(r=this._cull)||void 0===r||r.setActive(!1)},t.prototype.onRelease=function(e){this._mesh.destroy(),this._cull.destroy(),this._mesh=void 0,this._cull=void 0,this._glyphs=[],this._renderDatas=[]},t.prototype._updateRenderData=function(e){if(e.value&&this._value!==e.value){e.value;var t=(0,s.queryGlyphs)(this.scene,e.value,!1,!1,120,"Arial");this._glyphs=t}if(this._glyphs.length>0){for(var r=[],n=[],o=0,a=0,c=0,u=0;u<this._glyphs.length;u++){var l=this._glyphs[u],d=l.width||0,h=l.height||0,_=l.advance||0,m=l.offsetX||0,v=l.offsetY||0,y=l.bearingX||0,g=l.bearingY||0,b=l.texture,w=_,x=g,S=h-g;a=Math.max(a,x),c=Math.max(c,S);var E=null,T=o+m+y,C=v+g;if(0!==b){var A=r.indexOf(b);-1!==A?(E={character:l.character,x:T,y:C,width:d,height:h,batchIndex:A,glyph:l},n[A].push(E)):(r.push(b),n.push([]),E={character:l.character,x:T,y:C,width:d,height:h,batchIndex:r.length-1,glyph:l},n[r.length-1].push(E))}o+=w}this._renderDatas=[];for(var O=0;O<n.length;O++){for(var M=r[O],R=n[O],P=R.length,I=4*P,N=6*P,D=new Float32Array(8*I),L=new Uint16Array(N),F=0;F<R.length;F++){d=(E=R[F]).width,h=E.height;var k=E.x,B=E.y;f(D,F,k,B-h,k,B,k+d,B,k+d,B-h),p(D,F,E.glyph.uvs),L[6*F]=4*F,L[6*F+1]=4*F+1,L[6*F+2]=4*F+2,L[6*F+3]=4*F,L[6*F+4]=4*F+2,L[6*F+5]=4*F+3}var j={vertexBuffer:new((0,i.getKanata)(this.scene).VertexBuffer)(D,this._getVertexLayout()),indexBuffer:new((0,i.getKanata)(this.scene).IndexBuffer)(L,!1),vertexNum:I,indiceNum:N,texture:M};this._renderDatas.push(j)}}},t.prototype._rebuildMesh=function(e){var t=this.el.getComponent(a.default);this._trs=t,this._cull||(this._cull=new((0,i.getKanata)(this.scene).CullingComponent)(t.node),this._cull.bindEntity(t.node)),this._mesh=new((0,i.getKanata)(this.scene).MeshRendererComponent)(t.node,{meshCount:this._renderDatas.length,renderType:this._getMeshType(),uniformBlock:new((0,i.getKanata)(this.scene).UniformBlock)(this._getUniformDesc()),culling:void 0,macros:{}})},t.prototype._setMeshData=function(e,t,r){t||r?this._sourceMaterial===e&&this._sourceMaterial!==this._material||(this._material=e.clone()):this._material=e,t&&this._material._parseUniforms(t),r&&this._material._parseRenderStates(r),this._sourceMaterial=e;for(var n=0;n<this._renderDatas.length;n+=1){var o=this._renderDatas[n];this._mesh.setVertexBuffer(n,o.vertexBuffer),this._mesh.setIndexBuffer(n,o.indexBuffer),this._mesh.setStartIndex(n,0),this._mesh.setNumIndices(n,o.indiceNum),this._mesh.setMaterial(n,this._material.kanataMaterial),this._material.setFontTexture("u_baseColorMap",o.texture),this._material.alphaMode="BLEND",this._material.setRenderState("cullOn",!1),this._material.renderQueue=3e3}},t.prototype._getUniformDesc=function(){return this.scene.assets.getAsset("uniform-desc","mesh-static")},t.prototype._getMeshType=function(){return i.Kanata.EMeshRenderType.Static3D},t.prototype._getVertexLayout=function(){var e=this.scene._requestTmpObj("builtin-text-vertex-layouts");return e.text||(e.text=this.scene.createVertexLayout({attributes:l,stride:32})),e.text},t}(o.default)},"./src/components/Transform.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{TransformSchema:()=>p,default:()=>d});var n,o=r("./src/core/Component.ts"),i=r("./src/ext.ts"),a=r("./src/math/matrix4.ts"),s=r("./src/math/quaternion.ts"),c=r("./src/math/utils.ts"),u=r("./src/math/vector3.ts"),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=new a.default,p={nodeId:{type:"string"},position:{type:"number-array",defaultValue:[0,0,0]},rotation:{type:"number-array",defaultValue:[0,0,0]},scale:{type:"number-array",defaultValue:[1,1,1]},visible:{type:"boolean",defaultValue:!0},layer:{type:"number",defaultValue:0}};const d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=p,t.priority=100,t._isWorldDirty=!0,t}return l(t,e),Object.defineProperty(t.prototype,"node",{get:function(){return this._node},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldMatrix",{get:function(){return this._calcWorld(),this._worldMat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldPosition",{get:function(){return this._calcWorld(),this._worldPos},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldQuaternion",{get:function(){return this._calcWorld(),this._worldQuaternion},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldScale",{get:function(){return this._calcWorld(),this._worldScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldForward",{get:function(){return this._calcWorld(),this._worldForward},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldUp",{get:function(){return this._calcWorld(),this._worldUp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldRight",{get:function(){return this._calcWorld(),this._worldRight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quaternion",{get:function(){return this._quat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible!==e&&(this._version+=1),this._visible=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layer",{get:function(){return this._node.getLayer()},set:function(e){this._node.getLayer()!==e&&(this._version+=1),this._node.setLayer(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_finalMask",{get:function(){return this._node.getMixedLayerMask()},enumerable:!1,configurable:!0}),t.prototype.setLocalMatrix=function(e){var t=this._position,r=this._quat;e.decomposeTransRotMatScale(t,f,this._scale),c.quatHelper.fromMatrix4(f._raw,0,r._raw,r._offset),c.quatHelper.toEulerAngles(r._raw,r._offset,this._rotation._raw,0),t._isDirty=!0},t.prototype.onAdd=function(e,r){if(!this._node){var n=this._node=new((0,i.getKanata)(this.scene).Entity3D);n.setUsingEuler(!1),this._worldMat=new a.default(n.float32View,n.worldMatrixOffset),this._position=new u.default(n.float32View,n.localPositionOffset),this._quat=new s.default(n.float32View,n.localQuaternionOffset),this._scale=new u.default(n.float32View,n.localScaleOffset),this._rotation=new u.default,this._worldPos=new u.default,this._worldScale=new u.default,this._worldRotMat=new a.default,this._worldForward=new u.default,this._worldRight=new u.default(this._worldRotMat._raw,0),this._worldUp=new u.default(this._worldRotMat._raw,4)}var o=e.getComponent(t);o?o.node.addChild(this._node):this.scene.rootNode.addChild(this._node),this._processData(r)},t.prototype.onUpdate=function(e,t){this._processData(e,t)},t.prototype.onRemove=function(e,t){t.nodeId&&this.scene._removeNodeById(t.nodeId),this._node.removeFromParent()},t.prototype.onRelease=function(e){this._node.destroy(),this._node=void 0},t.prototype._processData=function(e,t){var r=e.nodeId,n=e.position,o=e.rotation,i=e.scale,a=e.visible,s=e.layer;this._visible=a,this.layer=s,r&&r!==(null==t?void 0:t.nodeId)&&(this.scene._addNodeById(r,this),(null==t?void 0:t.nodeId)&&this.scene._removeNodeById(t.nodeId)),n!==(null==t?void 0:t.position)&&this._position.setArray(n),o!==(null==t?void 0:t.rotation)&&(this._rotation.setArray(o.map((function(e){return e*Math.PI/180}))),c.quatHelper.fromEulerAngles(this._rotation._raw,0,this._quat._raw,this._quat._offset)),i!==(null==t?void 0:t.scale)&&this._scale.setArray(i)},t.prototype._checkDirty=function(){var e=this,t=e._position,r=e._quat,n=e._scale,o=e._rotation;return!!(t._isDirty||r._isDirty||n._isDirty||o._isDirty)&&(r._isDirty?c.quatHelper.toEulerAngles(r._raw,r._offset,o._raw,0):o._isDirty&&c.quatHelper.fromEulerAngles(this._rotation._raw,0,this._quat._raw,this._quat._offset),t._isDirty=!1,r._isDirty=!1,n._isDirty=!1,o._isDirty=!1,this._node.setLocalMatrixDirty(),!0)},t.prototype._setDirty=function(){this._isWorldDirty=!0,this._version+=1},t.prototype._calcWorld=function(){this._isWorldDirty&&((0,i.getKanata)(this.scene).refreshNodesWorldTransform(),c.m4Helper.decomposeTransRotMatScale(this._worldMat._raw,this._worldMat._offset,this._worldPos._raw,0,this._worldRotMat._raw,0,this._worldScale._raw,0),this._worldQuaternion=s.default.createFromMatrix4(this._worldRotMat),c.v3Helper.scale(this._worldRotMat._raw,8,-1,this._worldForward._raw,0),this._isWorldDirty=!1)},t}(o.default)},"./src/components/emitter/BasicShapeEmitter.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{BasicShapeEmitter:()=>o});var n=r("./src/math/vector3.ts"),o=function(){function e(){}return e.prototype.setProperty=function(e){var t=this;null==e||e.forEach((function(e){var r=e[0],o=e[1];switch(typeof t[r]){case"number":t[r]=parseFloat(o);break;case"object":var i=o.split(" ");t[r]=n.default.createFromNumber(parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2]))}}))},e}()},"./src/components/emitter/BoxShapeEmitter.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n,o=r("./src/math/vector3.ts"),i=r("./src/components/emitter/BasicShapeEmitter.ts"),a=r("./src/math/utils.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const c=function(e){function t(){var t=e.call(this)||this;return t.direction=o.default.createFromNumber(0,1,0),t.direction2=o.default.createFromNumber(0,1,0),t.minEmitBox=o.default.createFromNumber(-.5,-.5,-.5),t.maxEmitBox=o.default.createFromNumber(.5,.5,.5),t}return s(t,e),t.prototype.startDirection=function(e,t){var r=(0,a.randomBetween)(this.direction.x,this.direction2.x),n=(0,a.randomBetween)(this.direction.y,this.direction2.y),i=(0,a.randomBetween)(this.direction.z,this.direction2.z),s=o.default.createFromNumber(r,n,i);t.set(s.normalize().transformDirection(e))},t.prototype.startPosition=function(e,t){var r=(0,a.randomBetween)(this.minEmitBox.x,this.maxEmitBox.x),n=(0,a.randomBetween)(this.minEmitBox.y,this.maxEmitBox.y),i=(0,a.randomBetween)(this.minEmitBox.z,this.maxEmitBox.z),s=o.default.createFromNumber(r,n,i);t.set(s.applyMatrix4(e))},t}(i.BasicShapeEmitter)},"./src/components/emitter/CircleShapeEmitter.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n,o=r("./src/math/vector3.ts"),i=r("./src/components/emitter/BasicShapeEmitter.ts"),a=r("./src/math/utils.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const c=function(e){function t(){var t=e.call(this)||this;return t.radius=1,t.radiusRange=0,t.arc=360,t.direction=o.default.createFromNumber(0,1,0),t.direction2=o.default.createFromNumber(0,1,0),t.angle=0,t}return s(t,e),t.prototype.startDirection=function(e,t,r){var n=o.default.createFromNumber(e.getValue(3,0),e.getValue(3,1),e.getValue(3,2)),i=r.sub(n).normalize(),s=(0,a.randomBetween)(this.direction.x,this.direction2.x),c=(0,a.randomBetween)(this.direction.y,this.direction2.y),u=(0,a.randomBetween)(this.direction.z,this.direction2.z),l=o.default.createFromNumber(s,c,u),f=i.cross(l).normalize();l=this.osgRotate(l,f,this.angle/180*Math.PI),t.set(l.normalize().transformDirection(e))},t.prototype.startPosition=function(e,t){var r=this.radius-(0,a.randomBetween)(0,this.radius*this.radiusRange),n=((0,a.randomBetween)(0,1),(0,a.randomBetween)(0,this.arc/360*2*Math.PI)),i=r*Math.cos(n),s=r*Math.sin(n),c=o.default.createFromNumber(i,0,s);t.set(c.applyMatrix4(e))},t.prototype.osgRotate=function(e,t,r){return e.scale(Math.cos(r)).add(e.cross(t).scale(Math.sin(r))).add(t.scale(e.dot(t)).scale(1-Math.cos(r)))},t}(i.BasicShapeEmitter)},"./src/components/emitter/ConeShapeEmitter.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n,o=r("./src/math/vector3.ts"),i=r("./src/components/emitter/BasicShapeEmitter.ts"),a=r("./src/math/utils.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const c=function(e){function t(){var t=e.call(this)||this;return t.radius=3,t.angle=60,t.radiusRange=0,t.heightRange=1,t.arc=360,t.randomizeDirection=0,t}return s(t,e),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},set:function(e){this._radius!=e&&(this._radius=e,this.updateHeight())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle!=e&&(this._angle=e,this.updateHeight())},enumerable:!1,configurable:!0}),t.prototype.updateHeight=function(){0!=this.angle?this._height=this._radius/Math.tan(this.angle/2*Math.PI/180):this._height=1},t.prototype.startDirection=function(e,t,r){var n=o.default.createFromNumber(e.getValue(3,0),e.getValue(3,1),e.getValue(3,2)),i=r.sub(n).normalize(),s=(0,a.randomBetween)(0,this.randomizeDirection),c=(0,a.randomBetween)(0,this.randomizeDirection),u=(0,a.randomBetween)(0,this.randomizeDirection),l=o.default.createFromNumber(s,c,u);t.set(i.add(l).normalize().transformDirection(e))},t.prototype.startPosition=function(e,t){var r=(0,a.randomBetween)(0,this.arc/360*Math.PI*2),n=this._height*this.heightRange,i=n*Math.tan(this.angle/2*Math.PI/180),s=i-(0,a.randomBetween)(0,i*this.radiusRange)*Math.pow(Math.random(),.5),c=n*Math.pow(Math.random(),1/3),u=c*s/n,l=u*Math.sin(r),f=u*Math.cos(r),p=o.default.createFromNumber(l,c,f);t.set(p.applyMatrix4(e))},t}(i.BasicShapeEmitter)},"./src/components/emitter/DrawShapeEmitter.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n,o=r("./src/math/utils.ts"),i=r("./src/math/vector3.ts"),a=r("./src/components/emitter/BasicShapeEmitter.ts"),s=r("./src/components/emitter/content.ts"),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const u=function(e){function t(){var t=e.call(this)||this;return t._originX=0,t.direction=i.default.createFromNumber(1,0,0),t.setContent(s.default),t}return c(t,e),t.prototype.setContent=function(e,t){void 0===t&&(t=.02),this._content=e,this._cellNumY=e.length,this._cellNumX=e[0].length,this._step=t,this._width=Math.floor(this._step*this._cellNumX),this._height=Math.floor(this._step*this._cellNumY)},t.prototype.translateBase64ToArrayBuffer=function(e){e=e.substring(e.indexOf(",")+1);for(var t=window.atob(e),r=t.length,n=new Uint8Array(r),o=0;o<r;o++)n[o]=t.charCodeAt(o);return n.buffer},t.prototype.startDirection=function(e,t){t.set(this.direction.normalize().transformDirection(e))},t.prototype.startPosition=function(e,t){var r=(0,o.randomBetween)(0,this._height),n=i.default.createFromNumber(0,r,0);t.set(n.applyMatrix4(e)),this._originX=t.x},t.prototype.processInstance=function(e,t){if(e.position.x-this._originX>this._width)e.age=e.lifeTime;else{e.age=0;var r=Math.floor((e.position.x-this._originX)/this._step),n=Math.floor(e.position.y/this._step),o=.97*this._content[this._cellNumY-1-n][r];e.position.x+=.03*(1-.97*o)+.007*Math.random(),e.color.w=.3*o}},t.prototype.lerpNumberArrayToVector=function(e,t,r,n,o){void 0===o&&(o=4);for(var i=new Array(o),a=0;a<o;a++)i[a]=t[a]+(r[a]-t[a])*n;e.setValue.apply(e,i)},t}(a.BasicShapeEmitter)},"./src/components/emitter/PointShapeEmitter.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n,o=r("./src/math/vector3.ts"),i=r("./src/components/emitter/BasicShapeEmitter.ts"),a=r("./src/math/utils.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const c=function(e){function t(){var t=e.call(this)||this;return t.direction=o.default.createFromNumber(0,1,0),t.direction2=o.default.createFromNumber(0,1,0),t}return s(t,e),t.prototype.startDirection=function(e,t){var r=(0,a.randomBetween)(this.direction.x,this.direction2.x),n=(0,a.randomBetween)(this.direction.y,this.direction2.y),i=(0,a.randomBetween)(this.direction.z,this.direction2.z),s=o.default.createFromNumber(r,n,i);t.set(s.normalize().transformDirection(e))},t.prototype.startPosition=function(e,t){t.set(o.default.createFromNumber(0,0,0).applyMatrix4(e))},t}(i.BasicShapeEmitter)},"./src/components/emitter/SphereShapeEmitter.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n,o=r("./src/math/vector3.ts"),i=r("./src/components/emitter/BasicShapeEmitter.ts"),a=r("./src/math/utils.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const c=function(e){function t(){var t=e.call(this)||this;return t.radius=3,t.radiusRange=0,t.arc=360,t.randomizeDirection=0,t}return s(t,e),t.prototype.startDirection=function(e,t,r){var n=o.default.createFromNumber(e.getValue(3,0),e.getValue(3,1),e.getValue(3,2)),i=r.sub(n).normalize(),s=(0,a.randomBetween)(0,this.randomizeDirection),c=(0,a.randomBetween)(0,this.randomizeDirection),u=(0,a.randomBetween)(0,this.randomizeDirection),l=o.default.createFromNumber(s,c,u);t.set(i.add(l).normalize().transformDirection(e))},t.prototype.startPosition=function(e,t){var r=this.radius-(0,a.randomBetween)(0,this.radius*this.radiusRange),n=(0,a.randomBetween)(0,1),i=(0,a.randomBetween)(0,this.arc/360*2*Math.PI),s=Math.acos(2*n-1),c=r*Math.cos(i)*Math.sin(s),u=r*Math.cos(s),l=r*Math.sin(i)*Math.sin(s),f=o.default.createFromNumber(c,u,l);t.set(f.applyMatrix4(e))},t}(i.BasicShapeEmitter)},"./src/components/emitter/SubEmitter.ts":(e,t,r)=>{"use strict";var n;r.r(t),r.d(t,{SubEmitter:()=>o,SubEmitterState:()=>n}),function(e){e[e.ATTACH=0]="ATTACH",e[e.END=1]="END"}(n||(n={}));var o=function(){function e(e){this.particleSystem=e,this.state=n.END}return e.prototype.clone=function(){var t=this.particleSystem.clone();t.initParticle(t.data);var r=new e(t);return r.state=this.state,r},e}()},"./src/components/emitter/content.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n=[[.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.0784313725490196,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.0588235294117647,.06666666666666667,.08235294117647057,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.0588235294117647,.06274509803921569,.07058823529411765,.06666666666666667,.07450980392156863,.06274509803921569,.07450980392156863,.08235294117647057,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.0784313725490196,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.06274509803921569,.09803921568627452,.07450980392156863,.0784313725490196,.0784313725490196,.0588235294117647,.07058823529411765,.09411764705882353,.07450980392156863,.07058823529411765,.10980392156862745,.06274509803921569,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.09411764705882353,.07058823529411765,.07058823529411765,.09411764705882353,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.09019607843137255,.07058823529411765,.08235294117647057,.06274509803921569,.0784313725490196,.0588235294117647,.09019607843137255,.07058823529411765,.07450980392156863,.06274509803921569,.08627450980392157,.06666666666666667,.0588235294117647,.0784313725490196,.07058823529411765,.06274509803921569,.07058823529411765,.0588235294117647,.07450980392156863,.07450980392156863,.054901960784313725,.08627450980392157,.0784313725490196,.06274509803921569,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.06274509803921569,.0784313725490196,.07058823529411765,.07058823529411765,.0784313725490196,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.1450980392156863,.07058823529411765],[.09019607843137255,.08235294117647057,.07450980392156863,.07058823529411765,.09019607843137255,.0784313725490196,.06274509803921569,.06274509803921569,.0784313725490196,.07058823529411765,.06666666666666667,.06666666666666667,.07450980392156863,.07450980392156863,.06666666666666667,.07450980392156863,.09019607843137255,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.10196078431372549,.06274509803921569,.07058823529411765,.07450980392156863,.07058823529411765,.0588235294117647,.06274509803921569,.07058823529411765,.0588235294117647,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.0784313725490196,.0784313725490196,.07058823529411765,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765,.08235294117647057,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.06666666666666667,.0784313725490196,.07450980392156863,.07058823529411765,.054901960784313725,.06666666666666667,.07058823529411765,.07058823529411765,.06274509803921569,.0784313725490196,.0784313725490196,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.0588235294117647,.07058823529411765,.07450980392156863,.07450980392156863,.0784313725490196,.07058823529411765,.06666666666666667,.06666666666666667,.07450980392156863,.050980392156862744,.0588235294117647,.07450980392156863,.07058823529411765,.0588235294117647,.07058823529411765,.07058823529411765,.07450980392156863,.0784313725490196,.06274509803921569,.07058823529411765,.10588235294117647,.07450980392156863,.07450980392156863,.0588235294117647,.07058823529411765,.0588235294117647,.07058823529411765,.08235294117647057,.0784313725490196],[.0784313725490196,.0588235294117647,.07058823529411765,.06666666666666667,.0784313725490196,.0588235294117647,.06666666666666667,.0784313725490196,.07450980392156863,.0784313725490196,.06274509803921569,.050980392156862744,.06666666666666667,.07450980392156863,.07058823529411765,.07450980392156863,.09411764705882353,.06666666666666667,.09411764705882353,.06666666666666667,.0784313725490196,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.07450980392156863,.06274509803921569,.07450980392156863,.054901960784313725,.07450980392156863,.0588235294117647,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.0784313725490196,.07450980392156863,.07450980392156863,.0588235294117647,.07058823529411765,.07450980392156863,.07450980392156863,.06274509803921569,.06274509803921569,.06274509803921569,.07058823529411765,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.07450980392156863,.07058823529411765,.0784313725490196,.0588235294117647,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.0588235294117647,.07058823529411765,.06666666666666667,.07450980392156863,.06274509803921569,.06666666666666667,.0588235294117647,.08235294117647057,.06666666666666667,.08627450980392157,.08627450980392157,.0784313725490196,.07058823529411765,.08235294117647057,.07450980392156863,.06666666666666667,.07058823529411765,.13725490196078433,.10196078431372549,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.06274509803921569,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.0588235294117647,.08627450980392157,.07058823529411765],[.06666666666666667,.08235294117647057,.0588235294117647,.0784313725490196,.07058823529411765,.0588235294117647,.07450980392156863,.0784313725490196,.10980392156862745,.07058823529411765,.08235294117647057,.08627450980392157,.0588235294117647,.06274509803921569,.08235294117647057,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.09411764705882353,.06666666666666667,.08235294117647057,.06666666666666667,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.09411764705882353,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.08235294117647057,.09019607843137255,.06274509803921569,.08235294117647057,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.08235294117647057,.0784313725490196,.08627450980392157,.08627450980392157,.07058823529411765,.050980392156862744,.07058823529411765,.0588235294117647,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.09803921568627452,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.09411764705882353,.0588235294117647,.06274509803921569,.07058823529411765,.07058823529411765,.0784313725490196,.1176470588235294,.10196078431372549,.09019607843137255,.0784313725490196,.07058823529411765,.0784313725490196,.08235294117647057,.07058823529411765,.07058823529411765,.06666666666666667,.09019607843137255,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.0784313725490196,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765],[.11372549019607843,.054901960784313725,.07058823529411765,.06666666666666667,.0588235294117647,.0784313725490196,.09019607843137255,.06666666666666667,.08627450980392157,.07058823529411765,.054901960784313725,.07450980392156863,.08235294117647057,.050980392156862744,.06274509803921569,.07058823529411765,.07450980392156863,.06274509803921569,.050980392156862744,.043137254901960784,.0784313725490196,.0784313725490196,.06274509803921569,.06274509803921569,.07450980392156863,.06274509803921569,.06274509803921569,.0588235294117647,.08235294117647057,.07450980392156863,.08627450980392157,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765,.06666666666666667,.0588235294117647,.054901960784313725,.09411764705882353,.07058823529411765,.07058823529411765,.0784313725490196,.0588235294117647,.09411764705882353,.0784313725490196,.0784313725490196,.10980392156862745,.07058823529411765,.07450980392156863,.06274509803921569,.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.06666666666666667,.07450980392156863,.07058823529411765,.09019607843137255,.06274509803921569,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.054901960784313725,.07058823529411765,.09019607843137255,.0784313725490196,.07058823529411765,.07450980392156863,.09803921568627452,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863],[.07450980392156863,.07450980392156863,.07450980392156863,.09019607843137255,.10588235294117647,.07450980392156863,.0784313725490196,.07450980392156863,.07058823529411765,.0784313725490196,.0784313725490196,.06666666666666667,.07058823529411765,.09019607843137255,.07450980392156863,.0588235294117647,.054901960784313725,.06666666666666667,.07450980392156863,.1176470588235294,.06274509803921569,.08235294117647057,.07058823529411765,.06666666666666667,.07058823529411765,.08627450980392157,.0588235294117647,.0784313725490196,.06666666666666667,.07450980392156863,.07450980392156863,.0588235294117647,.06666666666666667,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.0588235294117647,.12549019607843137,.06666666666666667,.06274509803921569,.0784313725490196,.06666666666666667,.07450980392156863,.08235294117647057,.0588235294117647,.06274509803921569,.0784313725490196,.07450980392156863,.08235294117647057,.07450980392156863,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.07058823529411765,.06274509803921569,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.08235294117647057,.10196078431372549,.07450980392156863,.09019607843137255,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.0588235294117647,.06274509803921569,.06274509803921569,.0784313725490196,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.0588235294117647,.06274509803921569,.0588235294117647,.07058823529411765,.09411764705882353,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863],[.07058823529411765,.0784313725490196,.10196078431372549,.08235294117647057,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.06274509803921569,.07058823529411765,.09019607843137255,.050980392156862744,.06666666666666667,.08235294117647057,.07058823529411765,.0784313725490196,.08235294117647057,.06666666666666667,.054901960784313725,.0588235294117647,.11372549019607843,.0784313725490196,.0784313725490196,.06666666666666667,.06274509803921569,.047058823529411764,.0784313725490196,.08235294117647057,.06274509803921569,.0784313725490196,.07450980392156863,.0784313725490196,.08627450980392157,.054901960784313725,.06666666666666667,.10588235294117647,.07058823529411765,.07450980392156863,.0588235294117647,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.08235294117647057,.07450980392156863,.06274509803921569,.06666666666666667,.06666666666666667,.08627450980392157,.09411764705882353,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.07450980392156863,.10196078431372549,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.06274509803921569,.07058823529411765,.07058823529411765,.050980392156862744,.07058823529411765,.07450980392156863,.050980392156862744,.06666666666666667,.06666666666666667,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.0784313725490196,.06666666666666667,.07450980392156863,.06274509803921569,.07058823529411765,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.08235294117647057,.0784313725490196,.08627450980392157,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.09019607843137255,.07450980392156863],[.06666666666666667,.06274509803921569,.08235294117647057,.07450980392156863,.09803921568627452,.06666666666666667,.06274509803921569,.08235294117647057,.10196078431372549,.0784313725490196,.10588235294117647,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.0784313725490196,.054901960784313725,.06274509803921569,.10980392156862745,.0784313725490196,.06666666666666667,.06666666666666667,.050980392156862744,.07058823529411765,.054901960784313725,.08235294117647057,.0588235294117647,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.054901960784313725,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.0784313725490196,.07450980392156863,.07058823529411765,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196,.0588235294117647,.0588235294117647,.06666666666666667,.08627450980392157,.08235294117647057,.07058823529411765,.0588235294117647,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.06274509803921569,.07450980392156863,.07450980392156863,.06666666666666667,.07450980392156863,.06666666666666667,.07058823529411765,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.08235294117647057,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.09411764705882353,.07058823529411765,.11372549019607843,.07450980392156863,.07450980392156863,.09803921568627452,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863],[.06274509803921569,.07450980392156863,.07450980392156863,.07058823529411765,.08235294117647057,.06666666666666667,.0588235294117647,.06666666666666667,.06666666666666667,.09803921568627452,.08235294117647057,.07058823529411765,.0784313725490196,.07058823529411765,.0588235294117647,.0784313725490196,.06666666666666667,.0784313725490196,.06274509803921569,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.06274509803921569,.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.10588235294117647,.07450980392156863,.0784313725490196,.07450980392156863,.07450980392156863,.0784313725490196,.0784313725490196,.07058823529411765,.07450980392156863,.07450980392156863,.0784313725490196,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.08235294117647057,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.08235294117647057,.07450980392156863,.0784313725490196,.0784313725490196,.0588235294117647,.07450980392156863,.07058823529411765,.0784313725490196,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.0784313725490196,.0784313725490196,.07058823529411765,.07058823529411765,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196,.07058823529411765,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.07450980392156863,.06274509803921569,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.08627450980392157,.09803921568627452,.07450980392156863],[.06274509803921569,.06666666666666667,.07058823529411765,.06666666666666667,.06274509803921569,.08235294117647057,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.08235294117647057,.0784313725490196,.06666666666666667,.050980392156862744,.06666666666666667,.08235294117647057,.06274509803921569,.07058823529411765,.0588235294117647,.06666666666666667,.07450980392156863,.07058823529411765,.06274509803921569,.054901960784313725,.0784313725490196,.0784313725490196,.07450980392156863,.07058823529411765,.08627450980392157,.08235294117647057,.0588235294117647,.0784313725490196,.06274509803921569,.07450980392156863,.07450980392156863,.06666666666666667,.0588235294117647,.0588235294117647,.08235294117647057,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.06274509803921569,.07058823529411765,.07058823529411765,.08235294117647057,.0784313725490196,.06666666666666667,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.0588235294117647,.054901960784313725,.07058823529411765,.07058823529411765,.06274509803921569,.0588235294117647,.0588235294117647,.08235294117647057,.07058823529411765,.06666666666666667,.07450980392156863,.06666666666666667,.07450980392156863,.0784313725490196,.08627450980392157,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.0784313725490196,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.0784313725490196,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.0784313725490196,.07058823529411765,.06274509803921569,.0784313725490196,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.06666666666666667,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.0588235294117647],[.08235294117647057,.07058823529411765,.06666666666666667,.06274509803921569,.054901960784313725,.054901960784313725,.07058823529411765,.07450980392156863,.08235294117647057,.06666666666666667,.06666666666666667,.09019607843137255,.07450980392156863,.06666666666666667,.09411764705882353,.08235294117647057,.06274509803921569,.07450980392156863,.054901960784313725,.06274509803921569,.06274509803921569,.07450980392156863,.06274509803921569,.0588235294117647,.07058823529411765,.10980392156862745,.07058823529411765,.0588235294117647,.050980392156862744,.07450980392156863,.07058823529411765,.06274509803921569,.08235294117647057,.06666666666666667,.07450980392156863,.07058823529411765,.0784313725490196,.07450980392156863,.07058823529411765,.06274509803921569,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.07058823529411765,.0784313725490196,.08627450980392157,.07450980392156863,.0588235294117647,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.08627450980392157,.08235294117647057,.10588235294117647,.06666666666666667,.06666666666666667,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.07450980392156863,.054901960784313725,.07058823529411765,.0784313725490196,.06666666666666667,.0784313725490196,.07058823529411765,.07058823529411765,.07450980392156863,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.06274509803921569,.08627450980392157,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.08235294117647057,.07450980392156863,.07450980392156863,.06666666666666667,.08627450980392157,.06666666666666667,.08235294117647057,.07058823529411765,.06666666666666667,.07450980392156863,.06666666666666667,.047058823529411764,.07450980392156863],[.0588235294117647,.08627450980392157,.07058823529411765,.07058823529411765,.07450980392156863,.09019607843137255,.0784313725490196,.06274509803921569,.07058823529411765,.054901960784313725,.06666666666666667,.0588235294117647,.06274509803921569,.09411764705882353,.0784313725490196,.0588235294117647,.07450980392156863,.06274509803921569,.06666666666666667,.06666666666666667,.06274509803921569,.08235294117647057,.07450980392156863,.08235294117647057,.07450980392156863,.0784313725490196,.0784313725490196,.08235294117647057,.08235294117647057,.0784313725490196,.047058823529411764,.09411764705882353,.07450980392156863,.0784313725490196,.0784313725490196,.08235294117647057,.07450980392156863,.0784313725490196,.08235294117647057,.06666666666666667,.06666666666666667,.0784313725490196,.09411764705882353,.07058823529411765,.07450980392156863,.07058823529411765,.09019607843137255,.0784313725490196,.10980392156862745,.0588235294117647,.0588235294117647,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.08235294117647057,.06666666666666667,.0784313725490196,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.08627450980392157,.06666666666666667,.06274509803921569,.054901960784313725,.08235294117647057,.07058823529411765,.07058823529411765,.08235294117647057,.054901960784313725,.09019607843137255,.07450980392156863,.07058823529411765,.11372549019607843,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.0588235294117647,.09019607843137255,.08627450980392157,.06274509803921569,.07450980392156863,.0784313725490196,.0588235294117647,.07450980392156863,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.0784313725490196,.06274509803921569,.0588235294117647,.06666666666666667,.06274509803921569,.09803921568627452,.1176470588235294,.07058823529411765,.07058823529411765,.07058823529411765,.08235294117647057,.07450980392156863,.07058823529411765],[.0588235294117647,.08627450980392157,.06666666666666667,.06666666666666667,.054901960784313725,.09019607843137255,.050980392156862744,.07058823529411765,.07450980392156863,.06274509803921569,.050980392156862744,.0588235294117647,.054901960784313725,.0784313725490196,.07058823529411765,.1176470588235294,.08627450980392157,.054901960784313725,.047058823529411764,.09411764705882353,.06666666666666667,.0784313725490196,.09019607843137255,.06274509803921569,.0784313725490196,.06666666666666667,.08627450980392157,.0588235294117647,.06666666666666667,.08627450980392157,.06274509803921569,.06274509803921569,.09411764705882353,.0784313725490196,.06666666666666667,.07058823529411765,.07450980392156863,.09019607843137255,.07450980392156863,.07450980392156863,.08235294117647057,.07058823529411765,.07450980392156863,.07058823529411765,.0784313725490196,.07058823529411765,.06666666666666667,.050980392156862744,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.10588235294117647,.07058823529411765,.054901960784313725,.07450980392156863,.07058823529411765,.08235294117647057,.06666666666666667,.08235294117647057,.07450980392156863,.08627450980392157,.10980392156862745,.07058823529411765,.07058823529411765,.09019607843137255,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.054901960784313725,.07450980392156863,.06274509803921569,.07058823529411765,.08235294117647057,.0784313725490196,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.09019607843137255,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.07450980392156863,.07450980392156863,.09803921568627452,.07450980392156863,.0784313725490196,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765],[.06666666666666667,.08235294117647057,.06274509803921569,.07450980392156863,.0784313725490196,.0588235294117647,.07058823529411765,.06666666666666667,.06274509803921569,.09019607843137255,.07058823529411765,.08627450980392157,.06274509803921569,.07450980392156863,.06274509803921569,.06666666666666667,.07058823529411765,.09019607843137255,.07058823529411765,.1411764705882353,.06666666666666667,.08627450980392157,.06666666666666667,.050980392156862744,.06274509803921569,.08627450980392157,.07450980392156863,.054901960784313725,.0588235294117647,.07450980392156863,.06274509803921569,.0784313725490196,.07058823529411765,.07058823529411765,.07450980392156863,.0784313725490196,.07450980392156863,.06274509803921569,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.08627450980392157,.07450980392156863,.08235294117647057,.06666666666666667,.0588235294117647,.0784313725490196,.07450980392156863,.06666666666666667,.07058823529411765,.07450980392156863,.0588235294117647,.06666666666666667,.07450980392156863,.06666666666666667,.07058823529411765,.08627450980392157,.07058823529411765,.06666666666666667,.08627450980392157,.06666666666666667,.09803921568627452,.0784313725490196,.0588235294117647,.06666666666666667,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.0784313725490196,.06666666666666667,.09803921568627452,.07058823529411765,.07450980392156863,.0784313725490196,.07450980392156863,.07058823529411765,.06666666666666667,.054901960784313725,.07450980392156863,.07058823529411765,.11372549019607843,.07058823529411765,.06666666666666667,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.1176470588235294,.07450980392156863,.06666666666666667,.06666666666666667,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765],[.07450980392156863,.07450980392156863,.07058823529411765,.06274509803921569,.07058823529411765,.06666666666666667,.09411764705882353,.08235294117647057,.07058823529411765,.07058823529411765,.0588235294117647,.0784313725490196,.0784313725490196,.06666666666666667,.08235294117647057,.07058823529411765,.06274509803921569,.06666666666666667,.0784313725490196,.06274509803921569,.07450980392156863,.07058823529411765,.06274509803921569,.0784313725490196,.054901960784313725,.07058823529411765,.07058823529411765,.0588235294117647,.06274509803921569,.0588235294117647,.054901960784313725,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.054901960784313725,.07058823529411765,.07450980392156863,.06666666666666667,.06274509803921569,.07450980392156863,.08235294117647057,.0588235294117647,.09803921568627452,.07058823529411765,.09019607843137255,.06666666666666667,.06274509803921569,.0588235294117647,.06274509803921569,.07450980392156863,.07450980392156863,.0784313725490196,.06666666666666667,.07058823529411765,.10196078431372549,.0784313725490196,.10196078431372549,.07450980392156863,.07058823529411765,.050980392156862744,.10588235294117647,.06274509803921569,.06666666666666667,.07058823529411765,.06666666666666667,.054901960784313725,.0588235294117647,.06666666666666667,.07450980392156863,.08235294117647057,.08627450980392157,.06666666666666667,.0784313725490196,.07450980392156863,.06274509803921569,.0588235294117647,.07450980392156863,.0784313725490196,.06274509803921569,.06666666666666667,.07450980392156863,.0588235294117647,.0588235294117647,.09803921568627452,.07450980392156863,.0784313725490196,.07450980392156863,.07450980392156863,.07450980392156863,.06274509803921569,.09019607843137255,.06666666666666667,.06666666666666667,.07450980392156863,.07450980392156863,.06274509803921569,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863],[.06666666666666667,.06274509803921569,.06666666666666667,.09803921568627452,.10196078431372549,.07058823529411765,.07058823529411765,.06274509803921569,.07450980392156863,.06666666666666667,.0784313725490196,.13725490196078433,.06274509803921569,.06666666666666667,.0784313725490196,.06666666666666667,.06666666666666667,.09803921568627452,.0784313725490196,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.06274509803921569,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.0784313725490196,.08627450980392157,.0588235294117647,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.08235294117647057,.07450980392156863,.0784313725490196,.0588235294117647,.07450980392156863,.07058823529411765,.054901960784313725,.06666666666666667,.0784313725490196,.07058823529411765,.10588235294117647,.07450980392156863,.06666666666666667,.07450980392156863,.12941176470588237,.08627450980392157,.07058823529411765,.07058823529411765,.06274509803921569,.0784313725490196,.07450980392156863,.09803921568627452,.09411764705882353,.10980392156862745,.17647058823529413,.2235294117647059,.10196078431372549,.09803921568627452,.09019607843137255,.08235294117647057,.054901960784313725,.07058823529411765,.08627450980392157,.0784313725490196,.07058823529411765,.07450980392156863,.06666666666666667,.07450980392156863,.1176470588235294,.07450980392156863,.050980392156862744,.07450980392156863,.08235294117647057,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.06274509803921569,.08627450980392157,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863],[.07058823529411765,.0588235294117647,.06274509803921569,.0784313725490196,.06666666666666667,.07058823529411765,.0588235294117647,.07058823529411765,.09411764705882353,.1568627450980392,.12549019607843137,.0784313725490196,.10588235294117647,.10196078431372549,.08235294117647057,.06274509803921569,.07058823529411765,.08627450980392157,.07058823529411765,.050980392156862744,.0588235294117647,.054901960784313725,.06666666666666667,.0588235294117647,.07058823529411765,.06274509803921569,.054901960784313725,.07058823529411765,.06274509803921569,.08627450980392157,.0588235294117647,.06666666666666667,.07058823529411765,.06666666666666667,.0784313725490196,.0784313725490196,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.0588235294117647,.07450980392156863,.0588235294117647,.11372549019607843,.06666666666666667,.07058823529411765,.0784313725490196,.0784313725490196,.08235294117647057,.06666666666666667,.0784313725490196,.08627450980392157,.07058823529411765,.1176470588235294,.6901960784313725,.8196078431372549,.7647058823529411,.6666666666666665,.6549019607843136,.6627450980392156,.5686274509803921,.615686274509804,.5254901960784314,.44313725490196076,.10980392156862745,.09019607843137255,.09803921568627452,.09411764705882353,.08235294117647057,.12156862745098039,.09803921568627452,.08235294117647057,.054901960784313725,.06666666666666667,.10980392156862745,.09411764705882353,.0784313725490196,.06666666666666667,.06274509803921569,.07450980392156863,.07450980392156863,.07450980392156863,.13333333333333333,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.06274509803921569,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863],[.09411764705882353,.08627450980392157,.08235294117647057,.09019607843137255,.12941176470588237,.050980392156862744,.08235294117647057,.1176470588235294,.06274509803921569,.07450980392156863,.07450980392156863,.08235294117647057,.06666666666666667,.06666666666666667,.08235294117647057,.054901960784313725,.08235294117647057,.07450980392156863,.054901960784313725,.1176470588235294,.08627450980392157,.09411764705882353,.06666666666666667,.0784313725490196,.07450980392156863,.0784313725490196,.07058823529411765,.07058823529411765,.07450980392156863,.0784313725490196,.07058823529411765,.08627450980392157,.07058823529411765,.06274509803921569,.07450980392156863,.06274509803921569,.08235294117647057,.07058823529411765,.06666666666666667,.07450980392156863,.09803921568627452,.08627450980392157,.0784313725490196,.0588235294117647,.06666666666666667,.06274509803921569,.07450980392156863,.054901960784313725,.06666666666666667,.06666666666666667,.08627450980392157,.0588235294117647,.07058823529411765,.09411764705882353,.06666666666666667,.0784313725490196,.06666666666666667,.06274509803921569,.09019607843137255,.07450980392156863,.7137254901960784,.6431372549019607,.6862745098039216,.5450980392156862,.803921568627451,.6980392156862745,.5450980392156862,.8117647058823529,.9294117647058823,.8588235294117647,.6235294117647059,.6392156862745098,.6745098039215687,.5882352941176471,.15294117647058825,.10588235294117647,.09411764705882353,.0784313725490196,.07450980392156863,.07058823529411765,.0784313725490196,.050980392156862744,.07058823529411765,.07450980392156863,.06274509803921569,.0784313725490196,.0784313725490196,.054901960784313725,.07450980392156863,.06666666666666667,.047058823529411764,.06274509803921569,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.0784313725490196,.09411764705882353,.054901960784313725,.07058823529411765,.09019607843137255,.06274509803921569,.06274509803921569,.08627450980392157,.0588235294117647,.08627450980392157,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.06274509803921569,.0784313725490196,.07058823529411765,.050980392156862744,.10980392156862745,.06666666666666667,.07450980392156863,.12941176470588237,.06666666666666667,.06666666666666667,.07450980392156863,.07450980392156863,.08627450980392157,.09019607843137255,.06274509803921569,.09803921568627452,.06274509803921569,.09803921568627452,.07058823529411765,.07058823529411765,.12156862745098039,.07450980392156863,.0588235294117647,.07058823529411765,.0784313725490196,.0784313725490196,.0784313725490196,.07058823529411765,.07450980392156863,.050980392156862744,.06274509803921569,.07058823529411765,.08235294117647057,.06666666666666667,.09803921568627452,.06666666666666667,.06274509803921569,.07450980392156863,.0588235294117647,.08627450980392157,.0784313725490196,.0784313725490196,.06666666666666667,.07450980392156863,.2549019607843137,.596078431372549,.7647058823529411,.7058823529411765,.6039215686274509,.8156862745098039,.3176470588235294,.7882352941176471,.9725490196078431,.9647058823529412,.984313725490196,.9529411764705881,.9921568627450981,.9294117647058823,.9490196078431371,.7137254901960784,.6274509803921569,.25098039215686274,.06666666666666667,.0588235294117647,.050980392156862744,.09803921568627452,.09411764705882353,.0784313725490196,.08627450980392157,.047058823529411764,.07058823529411765,.07450980392156863,.07450980392156863,.06666666666666667,.054901960784313725,.054901960784313725,.0784313725490196,.12549019607843137,.06666666666666667,.07450980392156863,.08627450980392157,.047058823529411764,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765],[.08235294117647057,.07450980392156863,.054901960784313725,.07058823529411765,.1176470588235294,.06666666666666667,.09803921568627452,.12156862745098039,.07450980392156863,.07058823529411765,.0588235294117647,.07450980392156863,.10588235294117647,.12156862745098039,.07450980392156863,.0588235294117647,.06666666666666667,.09411764705882353,.06274509803921569,.10980392156862745,.0784313725490196,.07058823529411765,.08235294117647057,.054901960784313725,.07058823529411765,.06666666666666667,.054901960784313725,.06274509803921569,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.09019607843137255,.06274509803921569,.07058823529411765,.07450980392156863,.07450980392156863,.0588235294117647,.054901960784313725,.0784313725490196,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.0784313725490196,.08627450980392157,.054901960784313725,.0588235294117647,.10588235294117647,.07058823529411765,.0588235294117647,.050980392156862744,.07058823529411765,.07058823529411765,.08235294117647057,.1411764705882353,.5411764705882353,.5647058823529412,.6784313725490196,.7411764705882353,.7490196078431373,.403921568627451,.38431372549019616,.6039215686274509,.8549019607843137,.9607843137254902,.9294117647058823,.9568627450980393,.7686274509803923,.9333333333333332,.9568627450980393,.9098039215686274,.5843137254901961,.5607843137254902,.4470588235294118,.1450980392156863,.07058823529411765,.07058823529411765,.0784313725490196,.06666666666666667,.08235294117647057,.07450980392156863,.06666666666666667,.07450980392156863,.08627450980392157,.07450980392156863,.07450980392156863,.10588235294117647,.06274509803921569,.0784313725490196,.07450980392156863,.07058823529411765,.07058823529411765,.09019607843137255,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.11372549019607843,.054901960784313725,.07450980392156863,.06274509803921569,.08235294117647057,.06274509803921569,.0784313725490196,.06666666666666667,.07058823529411765,.06666666666666667,.08235294117647057,.08627450980392157,.07450980392156863,.10980392156862745,.06274509803921569,.06274509803921569,.06274509803921569,.08627450980392157,.07058823529411765,.10196078431372549,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.08235294117647057,.06274509803921569,.06274509803921569,.10196078431372549,.07058823529411765,.09411764705882353,.06274509803921569,.06274509803921569,.09019607843137255,.0588235294117647,.06666666666666667,.06666666666666667,.0784313725490196,.0588235294117647,.10588235294117647,.09803921568627452,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.06274509803921569,.07450980392156863,.054901960784313725,.12941176470588237,.0588235294117647,.06666666666666667,.06274509803921569,.054901960784313725,.06274509803921569,.06666666666666667,.08627450980392157,.25098039215686274,.5058823529411764,.7098039215686275,.8509803921568627,.9254901960784313,.9058823529411765,.8627450980392157,.8823529411764706,.9098039215686274,.8627450980392157,.8117647058823529,.7529411764705882,.6901960784313725,.9490196078431371,.8823529411764706,.8509803921568627,.8627450980392157,.9019607843137255,.8313725490196079,.5882352941176471,.6,.47450980392156855,.3294117647058823,.08235294117647057,.09019607843137255,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.06666666666666667,.09411764705882353,.07450980392156863,.08235294117647057,.07450980392156863,.054901960784313725,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196,.07450980392156863,.07058823529411765,.06666666666666667,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.09411764705882353,.07058823529411765],[.06274509803921569,.10588235294117647,.07450980392156863,.08627450980392157,.050980392156862744,.0588235294117647,.09019607843137255,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.08627450980392157,.12156862745098039,.10588235294117647,.07058823529411765,.06666666666666667,.10588235294117647,.06666666666666667,.0588235294117647,.08235294117647057,.07450980392156863,.07058823529411765,.08235294117647057,.06666666666666667,.06274509803921569,.06666666666666667,.06274509803921569,.09019607843137255,.07058823529411765,.0784313725490196,.10196078431372549,.06274509803921569,.08235294117647057,.07058823529411765,.06274509803921569,.06666666666666667,.06666666666666667,.08235294117647057,.06274509803921569,.07450980392156863,.07450980392156863,.054901960784313725,.08627450980392157,.0588235294117647,.06666666666666667,.06666666666666667,.08235294117647057,.0784313725490196,.1411764705882353,.08627450980392157,.06666666666666667,.09803921568627452,.08235294117647057,.43137254901960786,.8431372549019608,.8235294117647058,.8980392156862745,.9686274509803922,.9529411764705881,.9490196078431371,.8784313725490196,.9215686274509803,.803921568627451,.7882352941176471,.9254901960784313,.807843137254902,.9568627450980393,.7803921568627452,.6941176470588235,.6,.9215686274509803,.9411764705882352,.8470588235294118,.8627450980392157,.8823529411764706,.47843137254901963,.3607843137254902,.37254901960784315,.41568627450980394,.1843137254901961,.09019607843137255,.10588235294117647,.07450980392156863,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.07450980392156863,.0784313725490196,.07450980392156863,.07450980392156863,.06274509803921569,.07058823529411765,.07450980392156863,.07058823529411765,.0588235294117647,.0588235294117647,.06274509803921569,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765],[.06274509803921569,.08235294117647057,.07058823529411765,.0784313725490196,.0588235294117647,.07058823529411765,.06274509803921569,.06274509803921569,.0588235294117647,.06666666666666667,.09411764705882353,.10196078431372549,.06274509803921569,.09411764705882353,.07058823529411765,.06274509803921569,.0784313725490196,.0784313725490196,.09019607843137255,.12549019607843137,.07058823529411765,.10588235294117647,.07450980392156863,.07450980392156863,.054901960784313725,.050980392156862744,.0784313725490196,.0784313725490196,.07450980392156863,.07450980392156863,.0784313725490196,.0588235294117647,.0588235294117647,.07058823529411765,.0784313725490196,.054901960784313725,.08235294117647057,.09019607843137255,.0588235294117647,.07450980392156863,.06666666666666667,.0588235294117647,.07058823529411765,.07058823529411765,.054901960784313725,.07450980392156863,.054901960784313725,.0588235294117647,.12156862745098039,.13725490196078433,.13333333333333333,.19607843137254904,.5411764705882353,.4549019607843137,.5647058823529412,.6823529411764706,.807843137254902,.7960784313725491,.8745098039215686,.9372549019607842,.9568627450980393,.9411764705882352,.9686274509803922,.8627450980392157,.6470588235294117,.5529411764705883,.7372549019607844,.7686274509803923,.8666666666666667,.5843137254901961,.5411764705882353,.5568627450980392,.6196078431372549,.807843137254902,.7215686274509804,.7137254901960784,.35294117647058826,.2549019607843137,.20392156862745098,.30980392156862746,.1803921568627451,.06274509803921569,.07450980392156863,.07058823529411765,.07450980392156863,.08235294117647057,.0784313725490196,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.09019607843137255,.07450980392156863,.08627450980392157,.0784313725490196,.07450980392156863,.07058823529411765,.06274509803921569,.07058823529411765,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765],[.0588235294117647,.11372549019607843,.06274509803921569,.07450980392156863,.13725490196078433,.06274509803921569,.0784313725490196,.10980392156862745,.0784313725490196,.10196078431372549,.09019607843137255,.06666666666666667,.0588235294117647,.0784313725490196,.07058823529411765,.054901960784313725,.07058823529411765,.06274509803921569,.06274509803921569,.06274509803921569,.08627450980392157,.08235294117647057,.07450980392156863,.07058823529411765,.0784313725490196,.14901960784313725,.07450980392156863,.06666666666666667,.07450980392156863,.06666666666666667,.050980392156862744,.06666666666666667,.054901960784313725,.06666666666666667,.06666666666666667,.06666666666666667,.054901960784313725,.07450980392156863,.07058823529411765,.054901960784313725,.07058823529411765,.0784313725490196,.054901960784313725,.06666666666666667,.08235294117647057,.054901960784313725,.10980392156862745,.3686274509803922,.3058823529411765,.5019607843137255,.8196078431372549,.8941176470588236,.6823529411764706,.8431372549019608,.7333333333333333,.6627450980392156,.7450980392156863,.7764705882352942,.592156862745098,.3294117647058823,.5254901960784314,.8627450980392157,.9450980392156861,.9647058823529412,.9490196078431371,.9686274509803922,.6666666666666665,.6352941176470588,.7215686274509804,.6745098039215687,.6941176470588235,.5372549019607843,.47843137254901963,.7647058823529411,.8156862745098039,.7803921568627452,.5450980392156862,.27058823529411763,.2235294117647059,.2823529411764706,.22745098039215686,.1176470588235294,.08235294117647057,.08235294117647057,.06666666666666667,.06274509803921569,.054901960784313725,.07450980392156863,.07450980392156863,.07058823529411765,.0588235294117647,.11372549019607843,.06666666666666667,.0784313725490196,.0784313725490196,.09019607843137255,.07450980392156863,.08235294117647057,.06666666666666667,.06274509803921569,.06274509803921569,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667],[.06666666666666667,.06666666666666667,.06666666666666667,.09411764705882353,.06666666666666667,.0588235294117647,.0784313725490196,.06666666666666667,.0588235294117647,.08627450980392157,.11372549019607843,.1411764705882353,.07058823529411765,.054901960784313725,.11372549019607843,.06666666666666667,.07058823529411765,.09019607843137255,.047058823529411764,.06274509803921569,.08627450980392157,.06274509803921569,.09411764705882353,.12156862745098039,.0784313725490196,.06274509803921569,.07450980392156863,.0588235294117647,.08235294117647057,.06666666666666667,.09411764705882353,.054901960784313725,.10196078431372549,.0588235294117647,.06274509803921569,.08235294117647057,.10980392156862745,.09019607843137255,.08627450980392157,.054901960784313725,.09411764705882353,.06666666666666667,.10980392156862745,.06666666666666667,.08235294117647057,.20784313725490197,.6588235294117646,.7764705882352942,.9058823529411765,.8196078431372549,.8352941176470589,.7254901960784313,.7607843137254902,.8274509803921568,.6392156862745098,.8941176470588236,.7803921568627452,.8627450980392157,.6588235294117646,.6509803921568627,.47843137254901963,.6549019607843136,.615686274509804,.6705882352941175,.996078431372549,.9725490196078431,.7686274509803923,.6196078431372549,.7254901960784313,.5411764705882353,.6941176470588235,.8705882352941177,.6078431372549019,.6,.38431372549019616,.8784313725490196,.7647058823529411,.6235294117647059,.39607843137254906,.19607843137254904,.09411764705882353,.21568627450980393,.09019607843137255,.07450980392156863,.07450980392156863,.10196078431372549,.0784313725490196,.08627450980392157,.07450980392156863,.07450980392156863,.0588235294117647,.07450980392156863,.0588235294117647,.07450980392156863,.08627450980392157,.08627450980392157,.0784313725490196,.06274509803921569,.07058823529411765,.08235294117647057,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765],[.0588235294117647,.08627450980392157,.06666666666666667,.06274509803921569,.06274509803921569,.050980392156862744,.07058823529411765,.06666666666666667,.07058823529411765,.06274509803921569,.06666666666666667,.07058823529411765,.10588235294117647,.06274509803921569,.10980392156862745,.10588235294117647,.0784313725490196,.13725490196078433,.0784313725490196,.10196078431372549,.07450980392156863,.08235294117647057,.10588235294117647,.054901960784313725,.06274509803921569,.06274509803921569,.0784313725490196,.07058823529411765,.06666666666666667,.0784313725490196,.06666666666666667,.0588235294117647,.07058823529411765,.07058823529411765,.07450980392156863,.0784313725490196,.0588235294117647,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.0784313725490196,.08235294117647057,.20784313725490197,.8156862745098039,.8431372549019608,.7529411764705882,.8745098039215686,.8274509803921568,.8392156862745098,.7960784313725491,.6588235294117646,.7254901960784313,.6980392156862745,.5607843137254902,.8392156862745098,.8431372549019608,.8235294117647058,.7921568627450981,.8313725490196079,.6549019607843136,.6862745098039216,.6549019607843136,.5137254901960784,.5568627450980392,.5803921568627451,.9725490196078431,.9686274509803922,.6784313725490196,.8627450980392157,.5882352941176471,.6039215686274509,.803921568627451,.5411764705882353,.6274509803921569,.4980392156862745,.7686274509803923,.7176470588235294,.5254901960784314,.5058823529411764,.2,.1803921568627451,.12549019607843137,.0784313725490196,.0784313725490196,.07058823529411765,.12941176470588237,.08627450980392157,.07058823529411765,.050980392156862744,.07058823529411765,.0588235294117647,.07450980392156863,.07450980392156863,.0784313725490196,.0588235294117647,.06666666666666667,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.07450980392156863,.08235294117647057],[.06666666666666667,.07058823529411765,.07058823529411765,.06274509803921569,.054901960784313725,.050980392156862744,.10588235294117647,.06274509803921569,.07450980392156863,.07058823529411765,.07450980392156863,.12549019607843137,.0588235294117647,.08627450980392157,.06274509803921569,.09411764705882353,.06274509803921569,.13333333333333333,.08627450980392157,.08235294117647057,.06666666666666667,.0784313725490196,.07058823529411765,.0588235294117647,.06274509803921569,.10588235294117647,.08235294117647057,.07450980392156863,.08235294117647057,.08235294117647057,.10196078431372549,.07058823529411765,.07058823529411765,.07058823529411765,.08627450980392157,.08627450980392157,.08235294117647057,.06274509803921569,.0588235294117647,.07058823529411765,.06666666666666667,.1411764705882353,.11372549019607843,.6666666666666665,.8901960784313725,.7725490196078433,.8196078431372549,.8745098039215686,.8745098039215686,.7607843137254902,.7372549019607844,.8431372549019608,.8470588235294118,.8352941176470589,.8196078431372549,.8352941176470589,.7725490196078433,.7058823529411765,.8470588235294118,.7411764705882353,.7254901960784313,.7254901960784313,.6196078431372549,.6235294117647059,.5529411764705883,.6235294117647059,.5686274509803921,.7137254901960784,.8588235294117647,.7490196078431373,.8,.6039215686274509,.5254901960784314,.6509803921568627,.5843137254901961,.7254901960784313,.3764705882352941,.6196078431372549,.4470588235294118,.35294117647058826,.43529411764705883,.12941176470588237,.1450980392156863,.11372549019607843,.0784313725490196,.0784313725490196,.0784313725490196,.06666666666666667,.0784313725490196,.07058823529411765,.06666666666666667,.06274509803921569,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765,.0588235294117647,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.07450980392156863],[.06666666666666667,.0784313725490196,.07450980392156863,.07450980392156863,.07450980392156863,.06274509803921569,.054901960784313725,.08235294117647057,.0784313725490196,.0784313725490196,.0588235294117647,.06666666666666667,.09411764705882353,.12156862745098039,.08627450980392157,.08235294117647057,.0588235294117647,.07058823529411765,.06666666666666667,.13333333333333333,.09019607843137255,.07058823529411765,.07058823529411765,.09803921568627452,.07450980392156863,.11372549019607843,.07058823529411765,.0784313725490196,.08235294117647057,.07058823529411765,.09019607843137255,.12549019607843137,.07058823529411765,.08235294117647057,.07058823529411765,.07058823529411765,.10196078431372549,.06274509803921569,.09019607843137255,.10980392156862745,.10588235294117647,.17254901960784313,.9254901960784313,.8745098039215686,.8941176470588236,.8627450980392157,.8745098039215686,.8666666666666667,.8823529411764706,.8274509803921568,.8901960784313725,.8431372549019608,.7882352941176471,.807843137254902,.8784313725490196,.8705882352941177,.8196078431372549,.7803921568627452,.6705882352941175,.7254901960784313,.6980392156862745,.6941176470588235,.6705882352941175,.6901960784313725,.6078431372549019,.6431372549019607,.43529411764705883,.6980392156862745,.4,.7137254901960784,.6823529411764706,.8352941176470589,.48627450980392156,.47843137254901963,.5882352941176471,.5019607843137255,.4549019607843137,.3411764705882353,.6470588235294117,.29411764705882354,.2235294117647059,.30980392156862746,.13725490196078433,.2235294117647059,.10196078431372549,.0784313725490196,.06666666666666667,.07058823529411765,.06666666666666667,.07450980392156863,.06274509803921569,.0588235294117647,.0784313725490196,.07450980392156863,.06666666666666667,.0784313725490196,.06666666666666667,.07450980392156863,.07450980392156863,.07450980392156863,.0784313725490196,.047058823529411764,.07058823529411765,.09803921568627452,.07058823529411765,.07450980392156863,.06666666666666667],[.08627450980392157,.07450980392156863,.0784313725490196,.07450980392156863,.06666666666666667,.0784313725490196,.06666666666666667,.08235294117647057,.09019607843137255,.09411764705882353,.07058823529411765,.12549019607843137,.09803921568627452,.08235294117647057,.08235294117647057,.10196078431372549,.0588235294117647,.08627450980392157,.10980392156862745,.09019607843137255,.050980392156862744,.06666666666666667,.08235294117647057,.06666666666666667,.10196078431372549,.0784313725490196,.13725490196078433,.07058823529411765,.07450980392156863,.11372549019607843,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.0784313725490196,.06666666666666667,.0784313725490196,.09803921568627452,.07450980392156863,.07058823529411765,.37254901960784315,.8431372549019608,.7686274509803923,.7725490196078433,.8313725490196079,.8431372549019608,.8627450980392157,.7725490196078433,.8117647058823529,.8862745098039215,.8745098039215686,.7372549019607844,.8235294117647058,.7843137254901962,.7725490196078433,.8117647058823529,.8235294117647058,.7607843137254902,.7921568627450981,.8509803921568627,.6941176470588235,.7372549019607844,.6627450980392156,.7019607843137254,.611764705882353,.611764705882353,.596078431372549,.5686274509803921,.5843137254901961,.4117647058823529,.6941176470588235,.6313725490196078,.7921568627450981,.5019607843137255,.42745098039215684,.44313725490196076,.49411764705882355,.22745098039215686,.4705882352941176,.6627450980392156,.20784313725490197,.2627450980392157,.3254901960784313,.09411764705882353,.09411764705882353,.06666666666666667,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.0784313725490196,.06274509803921569,.09019607843137255,.07058823529411765,.09019607843137255,.08235294117647057,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.08627450980392157,.10196078431372549],[.0784313725490196,.06666666666666667,.07058823529411765,.08235294117647057,.07450980392156863,.11372549019607843,.07058823529411765,.07450980392156863,.09411764705882353,.06666666666666667,.08627450980392157,.08235294117647057,.050980392156862744,.07058823529411765,.08235294117647057,.09803921568627452,.06666666666666667,.06666666666666667,.07058823529411765,.09803921568627452,.10980392156862745,.0784313725490196,.07058823529411765,.08235294117647057,.08235294117647057,.09019607843137255,.07450980392156863,.09803921568627452,.06274509803921569,.06666666666666667,.06274509803921569,.0784313725490196,.07450980392156863,.0784313725490196,.0784313725490196,.0588235294117647,.08627450980392157,.0784313725490196,.16862745098039217,.10980392156862745,.9215686274509803,.8588235294117647,.9019607843137255,.8627450980392157,.8627450980392157,.8313725490196079,.8235294117647058,.8745098039215686,.8196078431372549,.8901960784313725,.8705882352941177,.8431372549019608,.8235294117647058,.803921568627451,.6588235294117646,.803921568627451,.7490196078431373,.7882352941176471,.6941176470588235,.7294117647058823,.6235294117647059,.7215686274509804,.7568627450980392,.5725490196078431,.6980392156862745,.6980392156862745,.6470588235294117,.49411764705882355,.49019607843137253,.27058823529411763,.32156862745098036,.6784313725490196,.592156862745098,.6039215686274509,.5019607843137255,.29411764705882354,.2627450980392157,.33333333333333326,.3294117647058823,.7137254901960784,.2627450980392157,.25098039215686274,.23137254901960783,.21568627450980393,.08235294117647057,.07058823529411765,.050980392156862744,.054901960784313725,.07450980392156863,.06274509803921569,.07450980392156863,.0784313725490196,.06666666666666667,.07450980392156863,.09411764705882353,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.07450980392156863,.07450980392156863],[.06274509803921569,.07058823529411765,.054901960784313725,.07450980392156863,.06274509803921569,.0588235294117647,.07058823529411765,.07450980392156863,.08627450980392157,.07058823529411765,.08235294117647057,.1568627450980392,.08235294117647057,.0784313725490196,.07450980392156863,.12156862745098039,.0784313725490196,.10588235294117647,.09411764705882353,.07450980392156863,.07450980392156863,.0588235294117647,.06666666666666667,.07450980392156863,.08235294117647057,.10196078431372549,.0588235294117647,.06666666666666667,.0784313725490196,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.09411764705882353,.07058823529411765,.08235294117647057,.0784313725490196,.08627450980392157,.07058823529411765,.7882352941176471,.8509803921568627,.9294117647058823,.9098039215686274,.8823529411764706,.8313725490196079,.8549019607843137,.8235294117647058,.8196078431372549,.8588235294117647,.7843137254901962,.803921568627451,.8627450980392157,.8666666666666667,.7568627450980392,.6862745098039216,.7019607843137254,.8,.7490196078431373,.7803921568627452,.7019607843137254,.7372549019607844,.7647058823529411,.6745098039215687,.6196078431372549,.7294117647058823,.8470588235294118,.7372549019607844,.35294117647058826,.5843137254901961,.3411764705882353,.34509803921568627,.21176470588235294,.29411764705882354,.5215686274509804,.47843137254901963,.47450980392156855,.26666666666666666,.28627450980392155,.2901960784313726,.8470588235294118,.35294117647058826,.2549019607843137,.25098039215686274,.10588235294117647,.10196078431372549,.09411764705882353,.10196078431372549,.11372549019607843,.08235294117647057,.06274509803921569,.0784313725490196,.07450980392156863,.07058823529411765,.07058823529411765,.050980392156862744,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.13333333333333333,.07058823529411765,.0588235294117647,.07058823529411765,.06274509803921569,.07450980392156863,.07058823529411765],[.07058823529411765,.06666666666666667,.15294117647058825,.0784313725490196,.047058823529411764,.06274509803921569,.06274509803921569,.07450980392156863,.0588235294117647,.06274509803921569,.10588235294117647,.08235294117647057,.0784313725490196,.0588235294117647,.09803921568627452,.09411764705882353,.0588235294117647,.13725490196078433,.06274509803921569,.06274509803921569,.09411764705882353,.07058823529411765,.10196078431372549,.09411764705882353,.054901960784313725,.07058823529411765,.09411764705882353,.06666666666666667,.08627450980392157,.09019607843137255,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.09411764705882353,.10196078431372549,.16470588235294115,.8313725490196079,.8627450980392157,.8745098039215686,.9372549019607842,.8509803921568627,.8470588235294118,.8666666666666667,.8196078431372549,.7921568627450981,.9529411764705881,.7686274509803923,.8,.8235294117647058,.8666666666666667,.8392156862745098,.8705882352941177,.9215686274509803,.7294117647058823,.7411764705882353,.7529411764705882,.7882352941176471,.7803921568627452,.7450980392156863,.7843137254901962,.7215686274509804,.7058823529411765,.6666666666666665,.6549019607843136,.6313725490196078,.4705882352941176,.403921568627451,.45098039215686275,.3568627450980392,.09019607843137255,.2235294117647059,.21176470588235294,.5372549019607843,.4705882352941176,.3137254901960784,.21568627450980393,.27450980392156865,.7098039215686275,.4588235294117647,.2627450980392157,.23137254901960783,.14901960784313725,.09803921568627452,.09019607843137255,.054901960784313725,.07058823529411765,.07058823529411765,.09411764705882353,.09019607843137255,.07450980392156863,.0588235294117647,.07450980392156863,.07058823529411765,.0588235294117647,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.054901960784313725,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765],[.09019607843137255,.054901960784313725,.06666666666666667,.054901960784313725,.06274509803921569,.0784313725490196,.06666666666666667,.08235294117647057,.0784313725490196,.0588235294117647,.06666666666666667,.08627450980392157,.10196078431372549,.09019607843137255,.09411764705882353,.0784313725490196,.09019607843137255,.1176470588235294,.0784313725490196,.09019607843137255,.09019607843137255,.09019607843137255,.06666666666666667,.07450980392156863,.06274509803921569,.07450980392156863,.054901960784313725,.08235294117647057,.08235294117647057,.09411764705882353,.07450980392156863,.07450980392156863,.06666666666666667,.07450980392156863,.0588235294117647,.0784313725490196,.047058823529411764,.33333333333333326,.8156862745098039,.7450980392156863,.7803921568627452,.8470588235294118,.9254901960784313,.8392156862745098,.8823529411764706,.7372549019607844,.8705882352941177,.8117647058823529,.7215686274509804,.7843137254901962,.8,.7450980392156863,.8862745098039215,.6588235294117646,.803921568627451,.7921568627450981,.8156862745098039,.7294117647058823,.8313725490196079,.8313725490196079,.6745098039215687,.7450980392156863,.7607843137254902,.7450980392156863,.6745098039215687,.7058823529411765,.6431372549019607,.7372549019607844,.40784313725490196,.30980392156862746,.3764705882352941,.2823529411764706,.09803921568627452,.1176470588235294,.36470588235294116,.46274509803921565,.44313725490196076,.2784313725490196,.33333333333333326,.9098039215686274,.5529411764705883,.2627450980392157,.23921568627450981,.28627450980392155,.10196078431372549,.08235294117647057,.06274509803921569,.07058823529411765,.06274509803921569,.07058823529411765,.09019607843137255,.0784313725490196,.050980392156862744,.06274509803921569,.07450980392156863,.07058823529411765,.06274509803921569,.08627450980392157,.07450980392156863,.08627450980392157,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765],[.06666666666666667,.047058823529411764,.0784313725490196,.07450980392156863,.08235294117647057,.07058823529411765,.07450980392156863,.08235294117647057,.06274509803921569,.0784313725490196,.06274509803921569,.09803921568627452,.0784313725490196,.0588235294117647,.08235294117647057,.08235294117647057,.09803921568627452,.07450980392156863,.06274509803921569,.10588235294117647,.07058823529411765,.06274509803921569,.06666666666666667,.06274509803921569,.06274509803921569,.06666666666666667,.0784313725490196,.0784313725490196,.0784313725490196,.12549019607843137,.07058823529411765,.08235294117647057,.08235294117647057,.06666666666666667,.07058823529411765,.06666666666666667,.08235294117647057,.8549019607843137,.7686274509803923,.9019607843137255,.8509803921568627,.8117647058823529,.8156862745098039,.8941176470588236,.8705882352941177,.8588235294117647,.7450980392156863,.8823529411764706,.803921568627451,.8392156862745098,.7686274509803923,.7254901960784313,.7215686274509804,.8901960784313725,.8862745098039215,.7490196078431373,.7843137254901962,.7843137254901962,.7450980392156863,.6823529411764706,.803921568627451,.8117647058823529,.7137254901960784,.6901960784313725,.7294117647058823,.7294117647058823,.5882352941176471,.5411764705882353,.43529411764705883,.4117647058823529,.48627450980392156,.23921568627450981,.35294117647058826,.27450980392156865,.23137254901960783,.3176470588235294,.49019607843137253,.3882352941176471,.29411764705882354,.807843137254902,.5372549019607843,.23921568627450981,.25098039215686274,.4470588235294118,.14901960784313725,.06666666666666667,.07450980392156863,.07450980392156863,.06274509803921569,.07058823529411765,.054901960784313725,.0588235294117647,.06666666666666667,.0784313725490196,.07058823529411765,.07450980392156863,.054901960784313725,.06666666666666667,.0784313725490196,.07450980392156863,.07058823529411765,.07450980392156863,.0784313725490196,.0784313725490196,.07058823529411765,.06666666666666667,.07058823529411765],[.09803921568627452,.07058823529411765,.0588235294117647,.06666666666666667,.0784313725490196,.06274509803921569,.07058823529411765,.06274509803921569,.07058823529411765,.0588235294117647,.07450980392156863,.06666666666666667,.06666666666666667,.06274509803921569,.08235294117647057,.06274509803921569,.08627450980392157,.08627450980392157,.06666666666666667,.08627450980392157,.07058823529411765,.0784313725490196,.08627450980392157,.06666666666666667,.10196078431372549,.10980392156862745,.08627450980392157,.06666666666666667,.0784313725490196,.08235294117647057,.0784313725490196,.06666666666666667,.0588235294117647,.08235294117647057,.10196078431372549,.10588235294117647,.1411764705882353,.8431372549019608,.6588235294117646,.8666666666666667,.8745098039215686,.7372549019607844,.7843137254901962,.7058823529411765,.8431372549019608,.8901960784313725,.8117647058823529,.8705882352941177,.7137254901960784,.8313725490196079,.7764705882352942,.7098039215686275,.7568627450980392,.7372549019607844,.8745098039215686,.8588235294117647,.7882352941176471,.8470588235294118,.803921568627451,.8392156862745098,.7764705882352942,.7372549019607844,.7098039215686275,.7607843137254902,.6588235294117646,.611764705882353,.3921568627450981,.23921568627450981,.30980392156862746,.43137254901960786,.2980392156862745,.3294117647058823,.3921568627450981,.2627450980392157,.4392156862745098,.2627450980392157,.34509803921568627,.43137254901960786,.40784313725490196,.6431372549019607,.6745098039215687,.2627450980392157,.25098039215686274,.34901960784313724,.43529411764705883,.06666666666666667,.07058823529411765,.06274509803921569,.09019607843137255,.06274509803921569,.06274509803921569,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.0588235294117647,.08627450980392157,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.0588235294117647,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.0588235294117647,.0784313725490196,.07058823529411765,.07058823529411765,.06274509803921569,.06274509803921569,.07058823529411765,.11372549019607843,.10196078431372549,.07450980392156863,.054901960784313725,.07450980392156863,.10588235294117647,.0784313725490196,.08235294117647057,.06666666666666667,.12549019607843137,.043137254901960784,.06274509803921569,.07058823529411765,.08627450980392157,.09019607843137255,.06666666666666667,.10980392156862745,.10588235294117647,.07450980392156863,.07450980392156863,.06666666666666667,.06274509803921569,.08235294117647057,.054901960784313725,.09411764705882353,.0588235294117647,.08627450980392157,.12156862745098039,.7764705882352942,.8470588235294118,.7647058823529411,.8392156862745098,.8392156862745098,.7607843137254902,.8156862745098039,.8431372549019608,.7294117647058823,.9137254901960784,.8549019607843137,.7450980392156863,.7607843137254902,.8196078431372549,.7215686274509804,.6784313725490196,.6862745098039216,.6745098039215687,.7137254901960784,.7647058823529411,.8,.7803921568627452,.8784313725490196,.7254901960784313,.7921568627450981,.7529411764705882,.47450980392156855,.6078431372549019,.6980392156862745,.7019607843137254,.38431372549019616,.3254901960784313,.30980392156862746,.33333333333333326,.3686274509803922,.33725490196078434,.36470588235294116,.2901960784313726,.3803921568627451,.4,.3254901960784313,.33725490196078434,.32156862745098036,.6823529411764706,.7843137254901962,.36470588235294116,.2980392156862745,.33725490196078434,.4470588235294118,.13725490196078433,.07058823529411765,.08235294117647057,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.09019607843137255,.0784313725490196,.07450980392156863,.07450980392156863,.07450980392156863,.054901960784313725,.07450980392156863,.0588235294117647,.07450980392156863,.11372549019607843,.06274509803921569,.07058823529411765,.08235294117647057],[.06274509803921569,.08235294117647057,.06274509803921569,.050980392156862744,.07450980392156863,.06666666666666667,.08235294117647057,.10196078431372549,.0784313725490196,.06666666666666667,.10588235294117647,.08627450980392157,.06666666666666667,.08235294117647057,.10196078431372549,.09019607843137255,.09803921568627452,.10588235294117647,.047058823529411764,.08627450980392157,.06274509803921569,.054901960784313725,.09411764705882353,.050980392156862744,.0784313725490196,.06274509803921569,.06274509803921569,.0784313725490196,.0784313725490196,.07058823529411765,.0784313725490196,.07058823529411765,.09803921568627452,.0588235294117647,.08235294117647057,.0784313725490196,.7098039215686275,.7019607843137254,.7137254901960784,.6549019607843136,.7137254901960784,.8705882352941177,.8823529411764706,.7843137254901962,.9098039215686274,.7725490196078433,.803921568627451,.8627450980392157,.6823529411764706,.6980392156862745,.5843137254901961,.5254901960784314,.6313725490196078,.6627450980392156,.6823529411764706,.7098039215686275,.7098039215686275,.6784313725490196,.6705882352941175,.7058823529411765,.7098039215686275,.34509803921568627,.6039215686274509,.5568627450980392,.7098039215686275,.5882352941176471,.33725490196078434,.1450980392156863,.3254901960784313,.1411764705882353,.38431372549019616,.2352941176470588,.2823529411764706,.3176470588235294,.30980392156862746,.24313725490196078,.35294117647058826,.2196078431372549,.4,.5843137254901961,.7411764705882353,.30196078431372547,.2823529411764706,.29411764705882354,.4549019607843137,.09019607843137255,.0588235294117647,.0588235294117647,.07450980392156863,.07058823529411765,.06274509803921569,.07058823529411765,.09019607843137255,.06274509803921569,.054901960784313725,.07058823529411765,.06274509803921569,.054901960784313725,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06274509803921569,.09803921568627452,.0784313725490196,.07450980392156863,.07058823529411765],[.07450980392156863,.07450980392156863,.08235294117647057,.09411764705882353,.0784313725490196,.06274509803921569,.07058823529411765,.06666666666666667,.08235294117647057,.07058823529411765,.10196078431372549,.09019607843137255,.07058823529411765,.09411764705882353,.12941176470588237,.06274509803921569,.0784313725490196,.050980392156862744,.07058823529411765,.08235294117647057,.10196078431372549,.08235294117647057,.07058823529411765,.0588235294117647,.07450980392156863,.06274509803921569,.054901960784313725,.10980392156862745,.08235294117647057,.07058823529411765,.0784313725490196,.08627450980392157,.0784313725490196,.07450980392156863,.0588235294117647,.19607843137254904,.6,.5490196078431373,.9490196078431371,.9058823529411765,.9215686274509803,.8745098039215686,.9686274509803922,.8980392156862745,.8666666666666667,.6549019607843136,.8,.8274509803921568,.7294117647058823,.6392156862745098,.6431372549019607,.6235294117647059,.6823529411764706,.6078431372549019,.5019607843137255,.5529411764705883,.6901960784313725,.5764705882352941,.7294117647058823,.6588235294117646,.7137254901960784,.27058823529411763,.6,.403921568627451,.2549019607843137,.5568627450980392,.3686274509803922,.37254901960784315,.3411764705882353,.10980392156862745,.29411764705882354,.3176470588235294,.2,.3882352941176471,.2627450980392157,.27450980392156865,.33333333333333326,.27450980392156865,.26666666666666666,.8313725490196079,.7843137254901962,.3607843137254902,.2549019607843137,.2784313725490196,.44313725490196076,.47843137254901963,.10588235294117647,.0392156862745098,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06274509803921569,.0784313725490196,.07058823529411765,.07450980392156863,.06274509803921569,.06274509803921569,.07058823529411765,.050980392156862744,.07450980392156863,.07058823529411765,.07058823529411765,.10196078431372549,.07058823529411765,.07058823529411765,.07450980392156863],[.08235294117647057,.07058823529411765,.09411764705882353,.08235294117647057,.06666666666666667,.08627450980392157,.09019607843137255,.054901960784313725,.0588235294117647,.08627450980392157,.06666666666666667,.0784313725490196,.10196078431372549,.1411764705882353,.06274509803921569,.054901960784313725,.050980392156862744,.07058823529411765,.14901960784313725,.08235294117647057,.06666666666666667,.06666666666666667,.07450980392156863,.050980392156862744,.0784313725490196,.09019607843137255,.0784313725490196,.07058823529411765,.0784313725490196,.06666666666666667,.07450980392156863,.07058823529411765,.06666666666666667,.06274509803921569,.1568627450980392,.10980392156862745,.47843137254901963,.9686274509803922,.8588235294117647,.9450980392156861,.9647058823529412,.9607843137254902,.9058823529411765,.9254901960784313,.9411764705882352,.8862745098039215,.7568627450980392,.7294117647058823,.8196078431372549,.7372549019607844,.7607843137254902,.6627450980392156,.6509803921568627,.6784313725490196,.5725490196078431,.3686274509803922,.2980392156862745,.4980392156862745,.5725490196078431,.7058823529411765,.9019607843137255,.08235294117647057,.08235294117647057,.09411764705882353,.10196078431372549,.2549019607843137,.25882352941176473,.38431372549019616,.2196078431372549,.27058823529411763,.1176470588235294,.23921568627450981,.39607843137254906,.12156862745098039,.34901960784313724,.2823529411764706,.3176470588235294,.2901960784313726,.2549019607843137,.8745098039215686,.9372549019607842,.3607843137254902,.23921568627450981,.2549019607843137,.4,.5529411764705883,.12941176470588237,.10980392156862745,.06274509803921569,.08235294117647057,.07058823529411765,.07058823529411765,.07450980392156863,.09411764705882353,.0588235294117647,.12941176470588237,.07450980392156863,.06666666666666667,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.054901960784313725,.07450980392156863,.07058823529411765,.07058823529411765,.0588235294117647],[.07450980392156863,.07058823529411765,.07450980392156863,.06666666666666667,.06274509803921569,.06274509803921569,.054901960784313725,.07058823529411765,.0784313725490196,.09803921568627452,.07450980392156863,.09411764705882353,.0784313725490196,.06666666666666667,.07450980392156863,.08627450980392157,.07450980392156863,.06666666666666667,.054901960784313725,.08235294117647057,.09803921568627452,.07058823529411765,.054901960784313725,.0588235294117647,.10980392156862745,.0588235294117647,.07450980392156863,.0588235294117647,.06666666666666667,.07058823529411765,.09411764705882353,.06666666666666667,.0588235294117647,.09411764705882353,.06666666666666667,.18823529411764706,.9686274509803922,.9215686274509803,.9450980392156861,.9686274509803922,.9450980392156861,.9254901960784313,.9568627450980393,.9215686274509803,.9294117647058823,.9254901960784313,.8156862745098039,.7529411764705882,.6196078431372549,.6509803921568627,.7058823529411765,.6313725490196078,.5607843137254902,.8549019607843137,.38431372549019616,.3882352941176471,.1803921568627451,.3882352941176471,.4666666666666666,.6078431372549019,.4666666666666666,.33333333333333326,.3294117647058823,.09019607843137255,.34509803921568627,.3411764705882353,.3294117647058823,.2823529411764706,.4392156862745098,.2901960784313726,.21176470588235294,.2235294117647059,.3058823529411765,.37254901960784315,.403921568627451,.33725490196078434,.3411764705882353,.2980392156862745,.28627450980392155,.8549019607843137,.9137254901960784,.33333333333333326,.24313725490196078,.30196078431372547,.5843137254901961,.5137254901960784,.16470588235294115,.07058823529411765,.08235294117647057,.07450980392156863,.0784313725490196,.07058823529411765,.06666666666666667,.09019607843137255,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.0588235294117647,.09411764705882353,.07450980392156863,.07058823529411765,.08235294117647057,.10196078431372549],[.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.07450980392156863,.0784313725490196,.09803921568627452,.0784313725490196,.08235294117647057,.06274509803921569,.07058823529411765,.06666666666666667,.08235294117647057,.07450980392156863,.06274509803921569,.09019607843137255,.07058823529411765,.12156862745098039,.12156862745098039,.12549019607843137,.06274509803921569,.09019607843137255,.06666666666666667,.06666666666666667,.07058823529411765,.08235294117647057,.0784313725490196,.06274509803921569,.07058823529411765,.06274509803921569,.09803921568627452,.0784313725490196,.5764705882352941,.9568627450980393,.8274509803921568,.9333333333333332,.9725490196078431,.8941176470588236,.9686274509803922,.9254901960784313,.9333333333333332,.9098039215686274,.9176470588235294,.9411764705882352,.9058823529411765,.8274509803921568,.7764705882352942,.6039215686274509,.4117647058823529,.6705882352941175,.8,.7960784313725491,.10588235294117647,.21568627450980393,.45098039215686275,.4,.33725490196078434,.45098039215686275,.2980392156862745,.3764705882352941,.19215686274509808,.20392156862745098,.3803921568627451,.5098039215686274,.3764705882352941,.3803921568627451,.4,.3764705882352941,.23137254901960783,.15294117647058825,.19215686274509808,.32156862745098036,.34509803921568627,.3058823529411765,.0784313725490196,.1843137254901961,.8627450980392157,.6196078431372549,.34509803921568627,.27450980392156865,.24313725490196078,.5333333333333333,.3882352941176471,.10980392156862745,.0588235294117647,.09803921568627452,.07058823529411765,.08627450980392157,.07058823529411765,.06274509803921569,.10980392156862745,.07058823529411765,.07450980392156863,.06274509803921569,.07450980392156863,.06666666666666667,.07058823529411765,.07450980392156863,.0784313725490196,.09019607843137255,.07058823529411765,.07058823529411765,.07058823529411765,.08235294117647057],[.07058823529411765,.0784313725490196,.07058823529411765,.07058823529411765,.06666666666666667,.0784313725490196,.06666666666666667,.07058823529411765,.09019607843137255,.07058823529411765,.06274509803921569,.06666666666666667,.1176470588235294,.06274509803921569,.07450980392156863,.06274509803921569,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.0784313725490196,.050980392156862744,.07450980392156863,.08627450980392157,.11372549019607843,.07058823529411765,.06274509803921569,.06274509803921569,.09019607843137255,.07058823529411765,.07058823529411765,.0784313725490196,.09803921568627452,.08235294117647057,.13333333333333333,.9411764705882352,.9411764705882352,.7568627450980392,.7882352941176471,.9176470588235294,.9725490196078431,.9490196078431371,.8980392156862745,.9058823529411765,.9058823529411765,.9176470588235294,.8862745098039215,.9294117647058823,.8588235294117647,.8431372549019608,.6980392156862745,.3882352941176471,.4,.5176470588235295,.807843137254902,.4549019607843137,.24705882352941178,.2823529411764706,.27058823529411763,.3058823529411765,.27058823529411763,.4705882352941176,.2901960784313726,.2549019607843137,.34901960784313724,.2627450980392157,.26666666666666666,.35294117647058826,.3921568627450981,.4,.13725490196078433,.3686274509803922,.30196078431372547,.1803921568627451,.1803921568627451,.3058823529411765,.22745098039215686,.13725490196078433,.17647058823529413,.8235294117647058,.7882352941176471,.35294117647058826,.30980392156862746,.25882352941176473,.4666666666666666,.45098039215686275,.25882352941176473,.2627450980392157,.054901960784313725,.0588235294117647,.07058823529411765,.08627450980392157,.06666666666666667,.08235294117647057,.07450980392156863,.06274509803921569,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.09411764705882353,.11372549019607843,.06666666666666667,.07450980392156863,.07058823529411765,.09803921568627452],[.07450980392156863,.09411764705882353,.07058823529411765,.07058823529411765,.08627450980392157,.06274509803921569,.06666666666666667,.07058823529411765,.06274509803921569,.06274509803921569,.08235294117647057,.054901960784313725,.0784313725490196,.06274509803921569,.06666666666666667,.06666666666666667,.06274509803921569,.0784313725490196,.06666666666666667,.0784313725490196,.06666666666666667,.10196078431372549,.08627450980392157,.08627450980392157,.09803921568627452,.09411764705882353,.07450980392156863,.08627450980392157,.12549019607843137,.08235294117647057,.07450980392156863,.08235294117647057,.09411764705882353,.054901960784313725,.5686274509803921,.8745098039215686,.8313725490196079,.9450980392156861,.8784313725490196,.9411764705882352,.7647058823529411,.8745098039215686,.9137254901960784,.9176470588235294,.9019607843137255,.8627450980392157,.9333333333333332,.9333333333333332,.9372549019607842,.8313725490196079,.8941176470588236,.8235294117647058,.5882352941176471,.3176470588235294,.4196078431372549,.3294117647058823,.25882352941176473,.09411764705882353,.2196078431372549,.2784313725490196,.28627450980392155,.2352941176470588,.40784313725490196,.2196078431372549,.2196078431372549,.10196078431372549,.27450980392156865,.38431372549019616,.3882352941176471,.403921568627451,.2549019607843137,.24313725490196078,.16470588235294115,.24313725490196078,.15294117647058825,.09803921568627452,.3411764705882353,.27058823529411763,.0784313725490196,.9411764705882352,.7803921568627452,.3686274509803922,.33725490196078434,.2352941176470588,.3607843137254902,.49019607843137253,.23137254901960783,.10196078431372549,.06274509803921569,.07450980392156863,.10980392156862745,.07058823529411765,.07058823529411765,.0588235294117647,.06666666666666667,.07058823529411765,.0588235294117647,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765,.11372549019607843,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765],[.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.06274509803921569,.0784313725490196,.08235294117647057,.08627450980392157,.08235294117647057,.08235294117647057,.0588235294117647,.06274509803921569,.06274509803921569,.07450980392156863,.06666666666666667,.0784313725490196,.10196078431372549,.07450980392156863,.07450980392156863,.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.06274509803921569,.10588235294117647,.11372549019607843,.08627450980392157,.07058823529411765,.0784313725490196,.09019607843137255,.08627450980392157,.09803921568627452,.7333333333333333,.8901960784313725,.8901960784313725,.9450980392156861,.9647058823529412,.9686274509803922,.9803921568627451,.9725490196078431,.9450980392156861,.9372549019607842,.9176470588235294,.9490196078431371,.8705882352941177,.9058823529411765,.9294117647058823,.9411764705882352,.8823529411764706,.8862745098039215,.807843137254902,.7215686274509804,.34509803921568627,.25098039215686274,.28627450980392155,.21176470588235294,.25098039215686274,.3411764705882353,.16862745098039217,.18823529411764706,.10980392156862745,.2352941176470588,.3607843137254902,.13725490196078433,.10588235294117647,.34901960784313724,.25882352941176473,.3294117647058823,.32156862745098036,.2901960784313726,.2627450980392157,.44313725490196076,.3411764705882353,.0784313725490196,.22745098039215686,.16470588235294115,.07058823529411765,.5450980392156862,.7921568627450981,.3686274509803922,.27058823529411763,.2196078431372549,.2901960784313726,.4980392156862745,.25098039215686274,.10588235294117647,.09411764705882353,.0588235294117647,.07450980392156863,.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.0784313725490196,.06666666666666667,.07058823529411765,.06274509803921569,.07450980392156863,.0588235294117647,.06274509803921569,.10588235294117647,.07058823529411765,.07058823529411765,.06666666666666667],[.07450980392156863,.0784313725490196,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.09411764705882353,.07058823529411765,.07450980392156863,.0784313725490196,.09019607843137255,.047058823529411764,.050980392156862744,.12941176470588237,.06666666666666667,.06666666666666667,.08235294117647057,.07450980392156863,.08235294117647057,.08627450980392157,.06274509803921569,.06666666666666667,.06666666666666667,.10588235294117647,.07058823529411765,.07450980392156863,.07450980392156863,.09019607843137255,.06274509803921569,.08627450980392157,.07450980392156863,.08235294117647057,.0784313725490196,.10980392156862745,.6862745098039216,.8352941176470589,.8274509803921568,.7686274509803923,.9294117647058823,.8980392156862745,.9333333333333332,.9294117647058823,.8627450980392157,.8862745098039215,.8980392156862745,.8627450980392157,.7647058823529411,.8941176470588236,.8196078431372549,.8901960784313725,.8980392156862745,.8274509803921568,.8196078431372549,.7372549019607844,.611764705882353,.3294117647058823,.19607843137254904,.08627450980392157,.47450980392156855,.1450980392156863,.11372549019607843,.12156862745098039,.10196078431372549,.12549019607843137,.20392156862745098,.20784313725490197,.16862745098039217,.13725490196078433,.2196078431372549,.10588235294117647,.29411764705882354,.3686274509803922,.22745098039215686,.33725490196078434,.42745098039215684,.33725490196078434,.34509803921568627,.26666666666666666,.16470588235294115,.5215686274509804,.7215686274509804,.34509803921568627,.3176470588235294,.22745098039215686,.2549019607843137,.5019607843137255,.34901960784313724,.17254901960784313,.0784313725490196,.07450980392156863,.0784313725490196,.07058823529411765,.06666666666666667,.07450980392156863,.043137254901960784,.0784313725490196,.11372549019607843,.07450980392156863,.08627450980392157,.07058823529411765,.07058823529411765,.06666666666666667,.054901960784313725,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07450980392156863,.07450980392156863,.0588235294117647,.07058823529411765,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765,.07450980392156863,.06666666666666667,.0588235294117647,.0784313725490196,.054901960784313725,.054901960784313725,.1176470588235294,.07058823529411765,.07058823529411765,.054901960784313725,.0784313725490196,.07058823529411765,.0784313725490196,.08627450980392157,.07058823529411765,.0588235294117647,.07450980392156863,.050980392156862744,.06666666666666667,.08235294117647057,.08235294117647057,.06666666666666667,.07450980392156863,.0784313725490196,.10980392156862745,.09803921568627452,.2901960784313726,.7333333333333333,.7882352941176471,.7960784313725491,.6392156862745098,.9215686274509803,.9568627450980393,.9137254901960784,.8196078431372549,.8117647058823529,.7568627450980392,.8235294117647058,.7450980392156863,.7960784313725491,.7294117647058823,.8392156862745098,.8235294117647058,.8392156862745098,.8235294117647058,.7764705882352942,.6078431372549019,.5215686274509804,.3568627450980392,.35294117647058826,.27450980392156865,.24313725490196078,.06666666666666667,.09411764705882353,.11372549019607843,.10196078431372549,.19607843137254904,.13333333333333333,.0784313725490196,.2549019607843137,.10980392156862745,.24313725490196078,.13333333333333333,.29411764705882354,.3294117647058823,.38431372549019616,.3607843137254902,.3254901960784313,.29411764705882354,.3254901960784313,.10196078431372549,.21568627450980393,.7882352941176471,.4117647058823529,.34901960784313724,.26666666666666666,.2549019607843137,.6274509803921569,.3058823529411765,.09411764705882353,.0784313725490196,.06666666666666667,.06666666666666667,.07450980392156863,.06666666666666667,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.09019607843137255,.0784313725490196,.13725490196078433,.07450980392156863,.07058823529411765,.06274509803921569],[.07058823529411765,.07058823529411765,.10196078431372549,.07058823529411765,.08235294117647057,.06274509803921569,.09019607843137255,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.09411764705882353,.08235294117647057,.06666666666666667,.06274509803921569,.054901960784313725,.07058823529411765,.07450980392156863,.054901960784313725,.054901960784313725,.054901960784313725,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.08627450980392157,.13333333333333333,.08235294117647057,.07450980392156863,.07450980392156863,.06274509803921569,.054901960784313725,.10588235294117647,.11372549019607843,.24313725490196078,.3764705882352941,.49411764705882355,.5882352941176471,.6823529411764706,.9098039215686274,.9137254901960784,.9176470588235294,.803921568627451,.7058823529411765,.7215686274509804,.7372549019607844,.7450980392156863,.9058823529411765,.7960784313725491,.7647058823529411,.7607843137254902,.8823529411764706,.8235294117647058,.7490196078431373,.6980392156862745,.5490196078431373,.3411764705882353,.24313725490196078,.34509803921568627,.1843137254901961,.27058823529411763,.3058823529411765,.10980392156862745,.25098039215686274,.11372549019607843,.27058823529411763,.21176470588235294,.08235294117647057,.23137254901960783,.1176470588235294,.3176470588235294,.24705882352941178,.35294117647058826,.3568627450980392,.34901960784313724,.2627450980392157,.37254901960784315,.10196078431372549,.13333333333333333,.27058823529411763,.8666666666666667,.47450980392156855,.3568627450980392,.23921568627450981,.2549019607843137,.7098039215686275,.5176470588235295,.14901960784313725,.0784313725490196,.10196078431372549,.07450980392156863,.07450980392156863,.0784313725490196,.0784313725490196,.07450980392156863,.07058823529411765,.050980392156862744,.10588235294117647,.06274509803921569,.06666666666666667,.0784313725490196,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.06666666666666667,.09411764705882353],[.0784313725490196,.0784313725490196,.07450980392156863,.06666666666666667,.06666666666666667,.06666666666666667,.0784313725490196,.07058823529411765,.06274509803921569,.06666666666666667,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.1411764705882353,.08627450980392157,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.10588235294117647,.06666666666666667,.07450980392156863,.07450980392156863,.08627450980392157,.07450980392156863,.07058823529411765,.08627450980392157,.07450980392156863,.08235294117647057,.0784313725490196,.10196078431372549,.1411764705882353,.38431372549019616,.9372549019607842,.7960784313725491,.26666666666666666,.13333333333333333,.9019607843137255,.9647058823529412,.8705882352941177,.7490196078431373,.6274509803921569,.7647058823529411,.5803921568627451,.6823529411764706,.8274509803921568,.8627450980392157,.8117647058823529,.7882352941176471,.8313725490196079,.8901960784313725,.7686274509803923,.5529411764705883,.42745098039215684,.3686274509803922,.26666666666666666,.1803921568627451,.30196078431372547,.2784313725490196,.3176470588235294,.30980392156862746,.20784313725490197,.2784313725490196,.08627450980392157,.18823529411764706,.0784313725490196,.10588235294117647,.24313725490196078,.15294117647058825,.1843137254901961,.2196078431372549,.3764705882352941,.24313725490196078,.18823529411764706,.26666666666666666,.08627450980392157,.054901960784313725,.14901960784313725,.9254901960784313,.4117647058823529,.40784313725490196,.25098039215686274,.27450980392156865,.5607843137254902,.6196078431372549,.21568627450980393,.20392156862745098,.06274509803921569,.07450980392156863,.0784313725490196,.10196078431372549,.0784313725490196,.12941176470588237,.07450980392156863,.07450980392156863,.08235294117647057,.08627450980392157,.06274509803921569,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.0784313725490196,.07058823529411765],[.06666666666666667,.07450980392156863,.0588235294117647,.07450980392156863,.10588235294117647,.06666666666666667,.06666666666666667,.08235294117647057,.054901960784313725,.06274509803921569,.050980392156862744,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.10588235294117647,.06274509803921569,.054901960784313725,.0784313725490196,.07450980392156863,.07450980392156863,.09019607843137255,.06666666666666667,.07450980392156863,.06666666666666667,.08627450980392157,.07450980392156863,.06666666666666667,.08627450980392157,.10980392156862745,.06666666666666667,.0588235294117647,.13333333333333333,.11372549019607843,.09019607843137255,.8901960784313725,.6784313725490196,.2549019607843137,.34901960784313724,.8549019607843137,.9490196078431371,.8588235294117647,.6705882352941175,.6313725490196078,.6901960784313725,.7137254901960784,.8509803921568627,.7568627450980392,.7490196078431373,.47843137254901963,.5137254901960784,.5725490196078431,.7568627450980392,.7411764705882353,.6,.3686274509803922,.37254901960784315,.30980392156862746,.25098039215686274,.1450980392156863,.07450980392156863,.2784313725490196,.2901960784313726,.29411764705882354,.2196078431372549,.07450980392156863,.3254901960784313,.050980392156862744,.13333333333333333,.12156862745098039,.1803921568627451,.11372549019607843,.3568627450980392,.33333333333333326,.3294117647058823,.2627450980392157,.23137254901960783,.09411764705882353,.11372549019607843,.1176470588235294,.8745098039215686,.43529411764705883,.5254901960784314,.2980392156862745,.27450980392156865,.48627450980392156,.6274509803921569,.1803921568627451,.09019607843137255,.050980392156862744,.23921568627450981,.0784313725490196,.07058823529411765,.07058823529411765,.08627450980392157,.07058823529411765,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.08627450980392157],[.07450980392156863,.07058823529411765,.07058823529411765,.08235294117647057,.06274509803921569,.0588235294117647,.0784313725490196,.08235294117647057,.06666666666666667,.10196078431372549,.08235294117647057,.06666666666666667,.08627450980392157,.07450980392156863,.06666666666666667,.08627450980392157,.07450980392156863,.0784313725490196,.06274509803921569,.07450980392156863,.07058823529411765,.07058823529411765,.0588235294117647,.07058823529411765,.08627450980392157,.07450980392156863,.07058823529411765,.07058823529411765,.10196078431372549,.07450980392156863,.08235294117647057,.09803921568627452,.08627450980392157,.08627450980392157,.49411764705882355,.8470588235294118,.8862745098039215,.9019607843137255,.7176470588235294,.8862745098039215,.9333333333333332,.7686274509803923,.6039215686274509,.6,.8,.7647058823529411,.9176470588235294,.9725490196078431,.9529411764705881,.12941176470588237,.2352941176470588,.3803921568627451,.4666666666666666,.6313725490196078,.5490196078431373,.3686274509803922,.4117647058823529,.39607843137254906,.3607843137254902,.2823529411764706,.24313725490196078,.2627450980392157,.2549019607843137,.33725490196078434,.2549019607843137,.27058823529411763,.12941176470588237,.2549019607843137,.3254901960784313,.09019607843137255,.08235294117647057,.28627450980392155,.2627450980392157,.28627450980392155,.34509803921568627,.2627450980392157,.24705882352941178,.07450980392156863,.07450980392156863,.14901960784313725,.8431372549019608,.5019607843137255,.6470588235294117,.25098039215686274,.28627450980392155,.5882352941176471,.6745098039215687,.24705882352941178,.11372549019607843,.08627450980392157,.07058823529411765,.07058823529411765,.08235294117647057,.07450980392156863,.10196078431372549,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.06274509803921569,.09019607843137255,.07450980392156863],[.0784313725490196,.08235294117647057,.07058823529411765,.06274509803921569,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.0588235294117647,.0784313725490196,.08235294117647057,.06666666666666667,.06666666666666667,.0588235294117647,.07450980392156863,.06666666666666667,.07450980392156863,.06274509803921569,.07058823529411765,.07450980392156863,.07450980392156863,.08235294117647057,.06274509803921569,.050980392156862744,.07450980392156863,.09803921568627452,.06274509803921569,.07058823529411765,.07450980392156863,.06274509803921569,.09803921568627452,.0588235294117647,.06666666666666667,.10196078431372549,.9490196078431371,.8941176470588236,.807843137254902,.8196078431372549,.7019607843137254,.9019607843137255,.9254901960784313,.6784313725490196,.6235294117647059,.5843137254901961,.7568627450980392,.6980392156862745,.996078431372549,.9764705882352941,.6078431372549019,.29411764705882354,.14901960784313725,.1568627450980392,.3568627450980392,.47843137254901963,.4,.4470588235294118,.4196078431372549,.37254901960784315,.3764705882352941,.33725490196078434,.29411764705882354,.19215686274509808,.27450980392156865,.32156862745098036,.3058823529411765,.1568627450980392,.12941176470588237,.12549019607843137,.2823529411764706,.21568627450980393,.10980392156862745,.17647058823529413,.23137254901960783,.1411764705882353,.33333333333333326,.20784313725490197,.12941176470588237,.10588235294117647,.0784313725490196,.09019607843137255,.8313725490196079,.592156862745098,.7529411764705882,.2549019607843137,.24313725490196078,.592156862745098,.5686274509803921,.29411764705882354,.2235294117647059,.08627450980392157,.25882352941176473,.0588235294117647,.06666666666666667,.07058823529411765,.13725490196078433,.0784313725490196,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.054901960784313725,.07058823529411765,.0784313725490196,.07450980392156863,.06274509803921569,.06274509803921569],[.07450980392156863,.07058823529411765,.0588235294117647,.07450980392156863,.06666666666666667,.07450980392156863,.07450980392156863,.0588235294117647,.06274509803921569,.0784313725490196,.07450980392156863,.07058823529411765,.043137254901960784,.0588235294117647,.06274509803921569,.07450980392156863,.07058823529411765,.0784313725490196,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.0784313725490196,.054901960784313725,.07450980392156863,.0588235294117647,.09411764705882353,.1176470588235294,.07058823529411765,.09803921568627452,.11372549019607843,.06666666666666667,.9254901960784313,.9058823529411765,.9058823529411765,.8431372549019608,.9529411764705881,.9725490196078431,.8784313725490196,.6784313725490196,.6470588235294117,.611764705882353,.7490196078431373,.8862745098039215,.8196078431372549,.9019607843137255,.8823529411764706,.24313725490196078,.2901960784313726,.3058823529411765,.42745098039215684,.5019607843137255,.3882352941176471,.41568627450980394,.4823529411764706,.3686274509803922,.403921568627451,.3254901960784313,.3137254901960784,.24313725490196078,.14901960784313725,.27450980392156865,.32156862745098036,.10196078431372549,.2549019607843137,.13333333333333333,.18823529411764706,.09803921568627452,.2196078431372549,.13333333333333333,.24705882352941178,.1803921568627451,.23921568627450981,.13725490196078433,.09803921568627452,.07058823529411765,.06274509803921569,.07450980392156863,.8156862745098039,.6313725490196078,.7921568627450981,.44313725490196076,.24313725490196078,.5058823529411764,.36470588235294116,.5411764705882353,.16078431372549018,.09411764705882353,.1450980392156863,.12156862745098039,.07058823529411765,.0784313725490196,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.08235294117647057,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.08235294117647057,.07058823529411765],[.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.08235294117647057,.07058823529411765,.09019607843137255,.07058823529411765,.0784313725490196,.0784313725490196,.07058823529411765,.0784313725490196,.07058823529411765,.07450980392156863,.07450980392156863,.0588235294117647,.07058823529411765,.08235294117647057,.0784313725490196,.0784313725490196,.0784313725490196,.0588235294117647,.07058823529411765,.06274509803921569,.06666666666666667,.09019607843137255,.06666666666666667,.07058823529411765,.10980392156862745,.09411764705882353,.09803921568627452,.0784313725490196,.08627450980392157,.09019607843137255,.9176470588235294,.8588235294117647,.9411764705882352,.9686274509803922,.9529411764705881,.984313725490196,.8431372549019608,.7764705882352942,.6352941176470588,.6039215686274509,.8509803921568627,.8980392156862745,.9372549019607842,.7725490196078433,.8117647058823529,.5372549019607843,.48627450980392156,.2901960784313726,.4980392156862745,.7019607843137254,.7843137254901962,.6784313725490196,.615686274509804,.5411764705882353,.4980392156862745,.3686274509803922,.3176470588235294,.30980392156862746,.23137254901960783,.21568627450980393,.33333333333333326,.2823529411764706,.24313725490196078,.1450980392156863,.07450980392156863,.23137254901960783,.33333333333333326,.18823529411764706,.3058823529411765,.13725490196078433,.16078431372549018,.14901960784313725,.0784313725490196,.08235294117647057,.09411764705882353,.047058823529411764,.803921568627451,.8274509803921568,.9529411764705881,.8313725490196079,.22745098039215686,.27450980392156865,.596078431372549,.45098039215686275,.17254901960784313,.050980392156862744,.14901960784313725,.08627450980392157,.06274509803921569,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.08627450980392157,.08235294117647057,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.07058823529411765,.06274509803921569,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.054901960784313725,.07450980392156863,.06274509803921569,.06666666666666667,.08627450980392157,.06666666666666667,.08627450980392157,.0588235294117647,.08235294117647057,.07450980392156863,.0784313725490196,.08627450980392157,.0784313725490196,.08235294117647057,.06274509803921569,.06274509803921569,.06274509803921569,.07058823529411765,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.08235294117647057,.12941176470588237,.06666666666666667,.9294117647058823,.9294117647058823,.8352941176470589,.8705882352941177,.9529411764705881,.9647058823529412,.8549019607843137,.7411764705882353,.6470588235294117,.5803921568627451,.9058823529411765,.9333333333333332,.8901960784313725,.8901960784313725,.8352941176470589,.7450980392156863,.6196078431372549,.6588235294117646,.6705882352941175,.6431372549019607,.7764705882352942,.7843137254901962,.6470588235294117,.4705882352941176,.3882352941176471,.43137254901960786,.34509803921568627,.3254901960784313,.30196078431372547,.24705882352941178,.24705882352941178,.3058823529411765,.12156862745098039,.20784313725490197,.08627450980392157,.10588235294117647,.24313725490196078,.25098039215686274,.30196078431372547,.19607843137254904,.13333333333333333,.13333333333333333,.08235294117647057,.06274509803921569,.07058823529411765,.09803921568627452,.6705882352941175,.8352941176470589,.7568627450980392,.8470588235294118,.27450980392156865,.2235294117647059,.7411764705882353,.46274509803921565,.2627450980392157,.26666666666666666,.16470588235294115,.06274509803921569,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765],[.07058823529411765,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.08235294117647057,.07058823529411765,.07058823529411765,.06274509803921569,.09411764705882353,.07450980392156863,.0588235294117647,.06666666666666667,.07058823529411765,.08627450980392157,.050980392156862744,.07058823529411765,.07058823529411765,.06666666666666667,.0784313725490196,.07058823529411765,.07058823529411765,.050980392156862744,.10196078431372549,.06666666666666667,.10196078431372549,.06666666666666667,.09411764705882353,.0784313725490196,.08235294117647057,.06666666666666667,.9411764705882352,.7803921568627452,.9529411764705881,.9568627450980393,.8431372549019608,.9215686274509803,.7568627450980392,.5647058823529412,.6431372549019607,.6078431372549019,.8392156862745098,.8627450980392157,.8784313725490196,.9450980392156861,.8862745098039215,.8313725490196079,.8156862745098039,.8196078431372549,.7294117647058823,.8,.8156862745098039,.8117647058823529,.6078431372549019,.4823529411764706,.33725490196078434,.34901960784313724,.34901960784313724,.3568627450980392,.2980392156862745,.29411764705882354,.2549019607843137,.30196078431372547,.3411764705882353,.22745098039215686,.33725490196078434,.12941176470588237,.17254901960784313,.17254901960784313,.16470588235294115,.20784313725490197,.20784313725490197,.3176470588235294,.17647058823529413,.08235294117647057,.0784313725490196,.09411764705882353,.6627450980392156,.8705882352941177,.7019607843137254,.9137254901960784,.3254901960784313,.23137254901960783,.6705882352941175,.47450980392156855,.09411764705882353,.3137254901960784,.1568627450980392,.0784313725490196,.0588235294117647,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.0784313725490196,.07058823529411765,.054901960784313725,.07450980392156863,.07450980392156863,.0784313725490196,.0784313725490196,.07058823529411765],[.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.050980392156862744,.07058823529411765,.06274509803921569,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.07058823529411765,.07450980392156863,.06274509803921569,.07058823529411765,.07450980392156863,.054901960784313725,.06666666666666667,.07058823529411765,.06666666666666667,.06274509803921569,.07058823529411765,.08627450980392157,.08627450980392157,.9333333333333332,.9137254901960784,.8470588235294118,.9411764705882352,.9450980392156861,.7568627450980392,.6941176470588235,.611764705882353,.5882352941176471,.615686274509804,.7529411764705882,.8941176470588236,.9490196078431371,.9372549019607842,.8980392156862745,.9647058823529412,.9176470588235294,.8745098039215686,.8862745098039215,.7843137254901962,.7921568627450981,.6823529411764706,.5607843137254902,.47450980392156855,.33333333333333326,.34901960784313724,.33725490196078434,.3568627450980392,.33725490196078434,.3294117647058823,.23921568627450981,.26666666666666666,.17254901960784313,.27058823529411763,.30980392156862746,.28627450980392155,.1843137254901961,.12941176470588237,.11372549019607843,.16862745098039217,.12941176470588237,.09803921568627452,.09019607843137255,.0784313725490196,.0784313725490196,.09019607843137255,.4235294117647059,.8313725490196079,.5372549019607843,.8862745098039215,.2823529411764706,.25098039215686274,.6235294117647059,.3411764705882353,.24705882352941178,.4,.35294117647058826,.12156862745098039,.08235294117647057,.07058823529411765,.06666666666666667,.08235294117647057,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.0784313725490196,.07450980392156863,.07058823529411765,.0784313725490196,.07058823529411765,.06274509803921569,.08235294117647057,.07058823529411765,.07450980392156863,.08235294117647057,.07058823529411765,.08235294117647057,.07058823529411765,.09411764705882353,.08627450980392157,.06666666666666667,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.047058823529411764,.07058823529411765,.050980392156862744,.07058823529411765,.050980392156862744,.10588235294117647,.07450980392156863,.07058823529411765,.0588235294117647,.9137254901960784,.9372549019607842,.9411764705882352,.9215686274509803,.9294117647058823,.7215686274509804,.6235294117647059,.5450980392156862,.5137254901960784,.5450980392156862,.7215686274509804,.807843137254902,.8784313725490196,.9490196078431371,.9490196078431371,.9372549019607842,.9725490196078431,.9568627450980393,.8745098039215686,.8549019607843137,.7137254901960784,.6627450980392156,.5568627450980392,.38431372549019616,.39607843137254906,.34509803921568627,.33725490196078434,.3176470588235294,.3058823529411765,.3568627450980392,.26666666666666666,.24313725490196078,.25882352941176473,.21568627450980393,.16470588235294115,.20784313725490197,.34509803921568627,.1843137254901961,.09803921568627452,.1176470588235294,.08627450980392157,.12549019607843137,.07058823529411765,.07058823529411765,.09019607843137255,.1176470588235294,.29411764705882354,.8,.5176470588235295,.8470588235294118,.29411764705882354,.22745098039215686,.6509803921568627,.24313725490196078,.19215686274509808,.34901960784313724,.33725490196078434,.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.08627450980392157,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.0784313725490196,.10980392156862745],[.07450980392156863,.07058823529411765,.06666666666666667,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.0588235294117647,.06274509803921569,.07450980392156863,.06666666666666667,.06274509803921569,.07450980392156863,.09019607843137255,.08627450980392157,.07058823529411765,.06666666666666667,.07058823529411765,.0588235294117647,.06274509803921569,.054901960784313725,.08627450980392157,.06666666666666667,.06666666666666667,.07058823529411765,.08627450980392157,.07450980392156863,.07058823529411765,.06666666666666667,.10980392156862745,.09019607843137255,.13725490196078433,.9137254901960784,.8431372549019608,.9215686274509803,.9098039215686274,.7843137254901962,.6627450980392156,.615686274509804,.5215686274509804,.5058823529411764,.5333333333333333,.8705882352941177,.8745098039215686,.9058823529411765,.8823529411764706,.9019607843137255,.9450980392156861,.9254901960784313,.8901960784313725,.7960784313725491,.8117647058823529,.7411764705882353,.6392156862745098,.45098039215686275,.33333333333333326,.3568627450980392,.32156862745098036,.3764705882352941,.37254901960784315,.37254901960784315,.3568627450980392,.27058823529411763,.25098039215686274,.25882352941176473,.22745098039215686,.12941176470588237,.2352941176470588,.2627450980392157,.19215686274509808,.16862745098039217,.25098039215686274,.07450980392156863,.09019607843137255,.0588235294117647,.1176470588235294,.06274509803921569,.0588235294117647,.20784313725490197,.7725490196078433,.6431372549019607,.9215686274509803,.33333333333333326,.30196078431372547,.5764705882352941,.2784313725490196,.23921568627450981,.15294117647058825,.2823529411764706,.12941176470588237,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.12549019607843137,.07058823529411765,.11372549019607843,.07450980392156863],[.07058823529411765,.0588235294117647,.07058823529411765,.07450980392156863,.07058823529411765,.047058823529411764,.07450980392156863,.08627450980392157,.07058823529411765,.06666666666666667,.0588235294117647,.06666666666666667,.0588235294117647,.07058823529411765,.09019607843137255,.07058823529411765,.0784313725490196,.07450980392156863,.07450980392156863,.06274509803921569,.050980392156862744,.054901960784313725,.07450980392156863,.06274509803921569,.07058823529411765,.06274509803921569,.12156862745098039,.06666666666666667,.07058823529411765,.07450980392156863,.09411764705882353,.0588235294117647,.09019607843137255,.10980392156862745,.807843137254902,.9490196078431371,.9098039215686274,.9333333333333332,.7843137254901962,.6823529411764706,.5137254901960784,.5529411764705883,.5450980392156862,.4549019607843137,.592156862745098,.9411764705882352,.9254901960784313,.7921568627450981,.8431372549019608,.8862745098039215,.9019607843137255,.807843137254902,.7450980392156863,.5803921568627451,.6352941176470588,.5882352941176471,.4117647058823529,.33725490196078434,.34509803921568627,.40784313725490196,.39607843137254906,.33725490196078434,.3921568627450981,.3254901960784313,.2901960784313726,.3254901960784313,.19215686274509808,.1803921568627451,.26666666666666666,.33333333333333326,.3294117647058823,.18823529411764706,.12941176470588237,.0784313725490196,.07058823529411765,.07058823529411765,.06666666666666667,.10196078431372549,.10588235294117647,.09803921568627452,.20392156862745098,.7568627450980392,.5882352941176471,.9568627450980393,.3294117647058823,.30196078431372547,.7176470588235294,.6313725490196078,.2352941176470588,.13725490196078433,.2196078431372549,.1450980392156863,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.12156862745098039,.06666666666666667,.07058823529411765,.08235294117647057,.07058823529411765,.07450980392156863,.06666666666666667,.07450980392156863,.09803921568627452],[.07058823529411765,.07058823529411765,.050980392156862744,.06274509803921569,.0588235294117647,.09803921568627452,.10196078431372549,.07450980392156863,.0588235294117647,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.0588235294117647,.06666666666666667,.06274509803921569,.07450980392156863,.07450980392156863,.0784313725490196,.06274509803921569,.07450980392156863,.06666666666666667,.09411764705882353,.06666666666666667,.06666666666666667,.06274509803921569,.0588235294117647,.07450980392156863,.07450980392156863,.07058823529411765,.09019607843137255,.09019607843137255,.06666666666666667,.07058823529411765,.40784313725490196,.9568627450980393,.9568627450980393,.8627450980392157,.5372549019607843,.5725490196078431,.5450980392156862,.48627450980392156,.5215686274509804,.43529411764705883,.47450980392156855,.8823529411764706,.9411764705882352,.8549019607843137,.8745098039215686,.7803921568627452,.8235294117647058,.8235294117647058,.7176470588235294,.6509803921568627,.6313725490196078,.4196078431372549,.3803921568627451,.32156862745098036,.35294117647058826,.39607843137254906,.3882352941176471,.35294117647058826,.29411764705882354,.3764705882352941,.26666666666666666,.3058823529411765,.24705882352941178,.34509803921568627,.30196078431372547,.23921568627450981,.20784313725490197,.06666666666666667,.15294117647058825,.08235294117647057,.07058823529411765,.07450980392156863,.07058823529411765,.09411764705882353,.07450980392156863,.07450980392156863,.12549019607843137,.8901960784313725,.6941176470588235,.8862745098039215,.3411764705882353,.29411764705882354,.6549019607843136,.8980392156862745,.2784313725490196,.10980392156862745,.3294117647058823,.3411764705882353,.09803921568627452,.0784313725490196,.06666666666666667,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.0784313725490196,.0784313725490196,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.0588235294117647],[.07450980392156863,.07058823529411765,.07450980392156863,.08235294117647057,.06274509803921569,.07058823529411765,.09019607843137255,.07058823529411765,.11372549019607843,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.0784313725490196,.0784313725490196,.07058823529411765,.06274509803921569,.07450980392156863,.07058823529411765,.10980392156862745,.0588235294117647,.07058823529411765,.0588235294117647,.08235294117647057,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.07450980392156863,.06666666666666667,.06666666666666667,.06666666666666667,.08235294117647057,.19215686274509808,.9098039215686274,.9411764705882352,.9254901960784313,.7607843137254902,.3294117647058823,.3411764705882353,.40784313725490196,.403921568627451,.4705882352941176,.3058823529411765,.8784313725490196,.9529411764705881,.9215686274509803,.8549019607843137,.8274509803921568,.7960784313725491,.8156862745098039,.6666666666666665,.6431372549019607,.596078431372549,.48627450980392156,.3411764705882353,.34509803921568627,.3568627450980392,.3411764705882353,.3764705882352941,.3568627450980392,.3803921568627451,.34901960784313724,.32156862745098036,.2980392156862745,.30196078431372547,.3294117647058823,.30980392156862746,.2352941176470588,.16470588235294115,.06666666666666667,.08235294117647057,.07058823529411765,.07450980392156863,.07058823529411765,.09019607843137255,.06666666666666667,.06666666666666667,.10196078431372549,.11372549019607843,.8627450980392157,.7019607843137254,.9333333333333332,.3254901960784313,.33333333333333326,.6509803921568627,.9450980392156861,.33333333333333326,.14901960784313725,.2784313725490196,.5529411764705883,.09019607843137255,.0784313725490196,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.08235294117647057],[.0784313725490196,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.06274509803921569,.09019607843137255,.07058823529411765,.07058823529411765,.07058823529411765,.050980392156862744,.0588235294117647,.06666666666666667,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.12941176470588237,.08235294117647057,.07450980392156863,.06274509803921569,.0784313725490196,.06666666666666667,.07058823529411765,.07450980392156863,.09803921568627452,.09019607843137255,.9254901960784313,.9333333333333332,.9098039215686274,.9764705882352941,.8509803921568627,.40784313725490196,.3764705882352941,.43137254901960786,.5333333333333333,.5764705882352941,.8705882352941177,.8980392156862745,.8392156862745098,.8627450980392157,.8823529411764706,.7803921568627452,.8941176470588236,.6823529411764706,.6745098039215687,.5450980392156862,.42745098039215684,.3568627450980392,.37254901960784315,.403921568627451,.43137254901960786,.4,.3411764705882353,.39607843137254906,.37254901960784315,.3058823529411765,.3254901960784313,.3254901960784313,.3764705882352941,.2549019607843137,.25098039215686274,.08235294117647057,.07058823529411765,.0784313725490196,.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.0784313725490196,.08235294117647057,.10980392156862745,.043137254901960784,.9411764705882352,.7529411764705882,.8784313725490196,.37254901960784315,.3568627450980392,.6901960784313725,.9725490196078431,.44313725490196076,.22745098039215686,.1803921568627451,.5450980392156862,.09803921568627452,.08627450980392157,.0588235294117647,.08627450980392157,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06274509803921569,.0784313725490196,.07058823529411765,.0784313725490196,.07058823529411765],[.06274509803921569,.06274509803921569,.0588235294117647,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.054901960784313725,.06274509803921569,.10196078431372549,.0588235294117647,.06666666666666667,.07450980392156863,.06666666666666667,.054901960784313725,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.09019607843137255,.0784313725490196,.07058823529411765,.07058823529411765,.06274509803921569,.0588235294117647,.054901960784313725,.08235294117647057,.11372549019607843,.08235294117647057,.09803921568627452,.8745098039215686,.9215686274509803,.9372549019607842,.9411764705882352,.8823529411764706,.6470588235294117,.6784313725490196,.6627450980392156,.7372549019607844,.803921568627451,.8509803921568627,.9411764705882352,.8274509803921568,.8705882352941177,.8274509803921568,.7450980392156863,.6313725490196078,.6588235294117646,.6352941176470588,.4980392156862745,.403921568627451,.40784313725490196,.3764705882352941,.403921568627451,.43137254901960786,.4,.3176470588235294,.36470588235294116,.29411764705882354,.3764705882352941,.38431372549019616,.32156862745098036,.30980392156862746,.19215686274509808,.06666666666666667,.0784313725490196,.07058823529411765,.09411764705882353,.07450980392156863,.06666666666666667,.09019607843137255,.08235294117647057,.09411764705882353,.06666666666666667,.09803921568627452,.08627450980392157,.9568627450980393,.9725490196078431,.8745098039215686,.43529411764705883,.4,.8509803921568627,.9686274509803922,.4980392156862745,.24313725490196078,.20784313725490197,.47843137254901963,.16470588235294115,.0784313725490196,.0588235294117647,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.050980392156862744,.08235294117647057,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765],[.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.06274509803921569,.0588235294117647,.06666666666666667,.07058823529411765,.06666666666666667,.0588235294117647,.07450980392156863,.06666666666666667,.0588235294117647,.0784313725490196,.06274509803921569,.07450980392156863,.08235294117647057,.050980392156862744,.07450980392156863,.06274509803921569,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.0784313725490196,.07058823529411765,.07450980392156863,.09019607843137255,.12156862745098039,.596078431372549,.9529411764705881,.984313725490196,.8745098039215686,.9411764705882352,.5803921568627451,.6588235294117646,.6941176470588235,.6705882352941175,.803921568627451,.7803921568627452,.8313725490196079,.7803921568627452,.807843137254902,.8156862745098039,.6901960784313725,.6392156862745098,.6745098039215687,.5568627450980392,.49019607843137253,.4470588235294118,.38431372549019616,.34901960784313724,.38431372549019616,.36470588235294116,.36470588235294116,.3803921568627451,.33725490196078434,.3176470588235294,.27450980392156865,.1411764705882353,.25882352941176473,.12941176470588237,.0784313725490196,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.0784313725490196,.08627450980392157,.0784313725490196,.07450980392156863,.06666666666666667,.07450980392156863,.20784313725490197,.9411764705882352,.8705882352941177,.9058823529411765,.4666666666666666,.35294117647058826,.34509803921568627,.9176470588235294,.9647058823529412,.24313725490196078,.20784313725490197,.30980392156862746,.42745098039215684,.07058823529411765,.06274509803921569,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.0588235294117647,.07450980392156863,.0588235294117647,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.07058823529411765,.0588235294117647,.07058823529411765,.06274509803921569,.07058823529411765,.07450980392156863,.0784313725490196,.07058823529411765,.07450980392156863,.07058823529411765,.0784313725490196,.07058823529411765,.06666666666666667,.06274509803921569,.07058823529411765,.08235294117647057,.06274509803921569,.050980392156862744,.08235294117647057,.0588235294117647,.07450980392156863,.08235294117647057,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.08235294117647057,.054901960784313725,.12549019607843137,.07058823529411765,.10196078431372549,.08627450980392157,.07058823529411765,.9019607843137255,.7411764705882353,.6549019607843136,.6588235294117646,.6274509803921569,.6392156862745098,.6705882352941175,.6941176470588235,.7254901960784313,.7764705882352942,.7607843137254902,.8392156862745098,.8196078431372549,.6588235294117646,.6627450980392156,.5254901960784314,.5725490196078431,.5176470588235295,.4705882352941176,.46274509803921565,.4666666666666666,.4549019607843137,.44313725490196076,.4,.4705882352941176,.403921568627451,.3764705882352941,.3411764705882353,.2823529411764706,.22745098039215686,.2823529411764706,.10196078431372549,.07450980392156863,.06666666666666667,.07450980392156863,.08235294117647057,.06274509803921569,.07058823529411765,.07058823529411765,.0588235294117647,.06666666666666667,.07058823529411765,.09019607843137255,.14901960784313725,.1176470588235294,.9294117647058823,.7882352941176471,.9450980392156861,.4666666666666666,.3607843137254902,.37254901960784315,.9568627450980393,.9450980392156861,.2627450980392157,.2549019607843137,.3137254901960784,.4235294117647059,.15294117647058825,.2235294117647059,.09019607843137255,.07058823529411765,.08235294117647057,.07450980392156863,.07058823529411765,.07450980392156863,.1450980392156863,.06274509803921569,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765],[.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.054901960784313725,.07058823529411765,.08627450980392157,.0784313725490196,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.0784313725490196,.06666666666666667,.06274509803921569,.1176470588235294,.0588235294117647,.0588235294117647,.0784313725490196,.0588235294117647,.054901960784313725,.07450980392156863,.07450980392156863,.07058823529411765,.06274509803921569,.08235294117647057,.06274509803921569,.07450980392156863,.07450980392156863,.09803921568627452,.07058823529411765,.0784313725490196,.9019607843137255,.9411764705882352,.6078431372549019,.4980392156862745,.6235294117647059,.5764705882352941,.596078431372549,.5843137254901961,.6549019607843136,.6627450980392156,.7764705882352942,.8352941176470589,.7647058823529411,.6705882352941175,.6,.6392156862745098,.5372549019607843,.5058823529411764,.4470588235294118,.4588235294117647,.5098039215686274,.47843137254901963,.43529411764705883,.4980392156862745,.40784313725490196,.39607843137254906,.3411764705882353,.29411764705882354,.27058823529411763,.27450980392156865,.18823529411764706,.2352941176470588,.10196078431372549,.08235294117647057,.06666666666666667,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.13725490196078433,.0784313725490196,.0784313725490196,.06666666666666667,.07058823529411765,.1411764705882353,.9019607843137255,.9254901960784313,.8705882352941177,.4549019607843137,.3686274509803922,.3176470588235294,.8,.9215686274509803,.27058823529411763,.16078431372549018,.25098039215686274,.45098039215686275,.592156862745098,.3764705882352941,.0588235294117647,.07058823529411765,.07450980392156863,.0784313725490196,.07058823529411765,.07450980392156863,.07058823529411765,.06274509803921569,.06666666666666667,.07058823529411765,.07450980392156863,.0588235294117647],[.07058823529411765,.0588235294117647,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765,.07450980392156863,.0588235294117647,.0588235294117647,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.08627450980392157,.09019607843137255,.07450980392156863,.07058823529411765,.07058823529411765,.0784313725490196,.07450980392156863,.08235294117647057,.06666666666666667,.0784313725490196,.09803921568627452,.07450980392156863,.06274509803921569,.08627450980392157,.07450980392156863,.06666666666666667,.07450980392156863,.08235294117647057,.3254901960784313,.8901960784313725,.7098039215686275,.7058823529411765,.6666666666666665,.7882352941176471,.47450980392156855,.5529411764705883,.5019607843137255,.6196078431372549,.7372549019607844,.7294117647058823,.6549019607843136,.7411764705882353,.6235294117647059,.5686274509803921,.49411764705882355,.47843137254901963,.44313725490196076,.48627450980392156,.5254901960784314,.5294117647058824,.48627450980392156,.48627450980392156,.4705882352941176,.41568627450980394,.36470588235294116,.3058823529411765,.2784313725490196,.3176470588235294,.2901960784313726,.23137254901960783,.11372549019607843,.07450980392156863,.0784313725490196,.06274509803921569,.0784313725490196,.12941176470588237,.07450980392156863,.08235294117647057,.08235294117647057,.0784313725490196,.07058823529411765,.09411764705882353,.1568627450980392,.9529411764705881,.9490196078431371,.9411764705882352,.4823529411764706,.37254901960784315,.33333333333333326,.8392156862745098,.9176470588235294,.43137254901960786,.1843137254901961,.3176470588235294,.5529411764705883,.2784313725490196,.06666666666666667,.0588235294117647,.08235294117647057,.08235294117647057,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.0784313725490196],[.06666666666666667,.0784313725490196,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.07058823529411765,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765,.06274509803921569,.07058823529411765,.07450980392156863,.1176470588235294,.07450980392156863,.06274509803921569,.07058823529411765,.06666666666666667,.07450980392156863,.06666666666666667,.07058823529411765,.0588235294117647,.07058823529411765,.06274509803921569,.06274509803921569,.07450980392156863,.08235294117647057,.06666666666666667,.07450980392156863,.0588235294117647,.09411764705882353,.08235294117647057,.09019607843137255,.12156862745098039,.09411764705882353,.8196078431372549,.8901960784313725,.9529411764705881,.8705882352941177,.8117647058823529,.6901960784313725,.6745098039215687,.615686274509804,.6509803921568627,.7686274509803923,.7960784313725491,.6784313725490196,.6274509803921569,.5647058823529412,.5254901960784314,.48627450980392156,.5058823529411764,.5098039215686274,.5019607843137255,.5058823529411764,.5137254901960784,.5215686274509804,.5294117647058824,.4823529411764706,.4,.3568627450980392,.37254901960784315,.3254901960784313,.9019607843137255,.3764705882352941,.2980392156862745,.1803921568627451,.08235294117647057,.07058823529411765,.14901960784313725,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.0784313725490196,.054901960784313725,.054901960784313725,.10980392156862745,.0784313725490196,.9450980392156861,.9647058823529412,.9215686274509803,.5254901960784314,.5529411764705883,.3803921568627451,.7882352941176471,.9294117647058823,.7450980392156863,.2549019607843137,.25882352941176473,.4117647058823529,.3607843137254902,.08627450980392157,.0784313725490196,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.06274509803921569,.054901960784313725,.07450980392156863,.054901960784313725,.07058823529411765,.06666666666666667],[.09019607843137255,.0588235294117647,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.09803921568627452,.09411764705882353,.06274509803921569,.07058823529411765,.07058823529411765,.06666666666666667,.06274509803921569,.07450980392156863,.09019607843137255,.07450980392156863,.07450980392156863,.06274509803921569,.0784313725490196,.0784313725490196,.0588235294117647,.06666666666666667,.0588235294117647,.06274509803921569,.07058823529411765,.07058823529411765,.09019607843137255,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.07058823529411765,.0784313725490196,.09019607843137255,.0784313725490196,.08235294117647057,.08235294117647057,.7882352941176471,.9098039215686274,.8509803921568627,.8549019607843137,.6509803921568627,.5803921568627451,.6274509803921569,.6039215686274509,.7019607843137254,.7686274509803923,.7686274509803923,.7568627450980392,.6745098039215687,.596078431372549,.5647058823529412,.5294117647058824,.5176470588235295,.5137254901960784,.47450980392156855,.4823529411764706,.5450980392156862,.5137254901960784,.5294117647058824,.4549019607843137,.4235294117647059,.30980392156862746,.30980392156862746,.34509803921568627,.9294117647058823,.5372549019607843,.24705882352941178,.17647058823529413,.13333333333333333,.1176470588235294,.06666666666666667,.07450980392156863,.07450980392156863,.06274509803921569,.07450980392156863,.06666666666666667,.0784313725490196,.09019607843137255,.09411764705882353,.13333333333333333,.9490196078431371,.9372549019607842,.9764705882352941,.5058823529411764,.5725490196078431,.3882352941176471,.8745098039215686,.803921568627451,.9686274509803922,.23921568627450981,.28627450980392155,.4117647058823529,.5607843137254902,.09019607843137255,.054901960784313725,.06666666666666667,.07058823529411765,.07450980392156863,.06274509803921569,.07450980392156863,.0784313725490196,.06274509803921569,.08235294117647057,.07450980392156863,.07058823529411765,.07450980392156863],[.07058823529411765,.0784313725490196,.07058823529411765,.054901960784313725,.07058823529411765,.08235294117647057,.0588235294117647,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.0588235294117647,.08627450980392157,.07058823529411765,.07058823529411765,.10196078431372549,.07450980392156863,.043137254901960784,.08235294117647057,.07058823529411765,.06666666666666667,.06274509803921569,.08627450980392157,.08627450980392157,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.08627450980392157,.0588235294117647,.06666666666666667,.08627450980392157,.06666666666666667,.050980392156862744,.07450980392156863,.09019607843137255,.19215686274509808,.9686274509803922,.8196078431372549,.6941176470588235,.6274509803921569,.6078431372549019,.5764705882352941,.6078431372549019,.611764705882353,.6470588235294117,.6549019607843136,.7019607843137254,.5686274509803921,.5529411764705883,.5686274509803921,.5725490196078431,.5137254901960784,.5333333333333333,.5215686274509804,.5254901960784314,.596078431372549,.5137254901960784,.5333333333333333,.4980392156862745,.34901960784313724,.2901960784313726,.3411764705882353,.403921568627451,.5764705882352941,.42745098039215684,.16470588235294115,.14901960784313725,.0588235294117647,.06666666666666667,.06666666666666667,.23137254901960783,.07058823529411765,.08627450980392157,.06666666666666667,.16078431372549018,.12156862745098039,.12549019607843137,.10980392156862745,.09411764705882353,.9411764705882352,.9607843137254902,.9450980392156861,.611764705882353,.8352941176470589,.403921568627451,.7254901960784313,.9058823529411765,.9686274509803922,.27058823529411763,.3176470588235294,.3294117647058823,.5411764705882353,.14901960784313725,.0784313725490196,.09019607843137255,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.050980392156862744,.07058823529411765,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765],[.07450980392156863,.07450980392156863,.06274509803921569,.07450980392156863,.07450980392156863,.054901960784313725,.08627450980392157,.07450980392156863,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06274509803921569,.06274509803921569,.06666666666666667,.07450980392156863,.0784313725490196,.06666666666666667,.0784313725490196,.09019607843137255,.06666666666666667,.06666666666666667,.09803921568627452,.09803921568627452,.07450980392156863,.07450980392156863,.0784313725490196,.054901960784313725,.07450980392156863,.07450980392156863,.08235294117647057,.08235294117647057,.11372549019607843,.08627450980392157,.9254901960784313,.9333333333333332,.8588235294117647,.8901960784313725,.6196078431372549,.5529411764705883,.592156862745098,.6313725490196078,.6588235294117646,.6509803921568627,.6941176470588235,.5803921568627451,.5725490196078431,.5725490196078431,.47843137254901963,.596078431372549,.5490196078431373,.6,.615686274509804,.5215686274509804,.5686274509803921,.49411764705882355,.3294117647058823,.37254901960784315,.3568627450980392,.34509803921568627,.3607843137254902,.30980392156862746,.4823529411764706,.24313725490196078,.4549019607843137,.09803921568627452,.07450980392156863,.09803921568627452,.09019607843137255,.0588235294117647,.06666666666666667,.09411764705882353,.054901960784313725,.1450980392156863,.16078431372549018,.0588235294117647,.0784313725490196,.9411764705882352,.9294117647058823,.8352941176470589,.6549019607843136,.8784313725490196,.39607843137254906,.8666666666666667,.9137254901960784,.9215686274509803,.24705882352941178,.27058823529411763,.16470588235294115,.5882352941176471,.5098039215686274,.11372549019607843,.10196078431372549,.08627450980392157,.07450980392156863,.08235294117647057,.06666666666666667,.12156862745098039,.07058823529411765,.07450980392156863,.07450980392156863,.06274509803921569,.07450980392156863],[.0784313725490196,.07450980392156863,.07450980392156863,.08235294117647057,.0784313725490196,.054901960784313725,.0784313725490196,.06666666666666667,.06666666666666667,.08627450980392157,.06666666666666667,.06666666666666667,.050980392156862744,.07058823529411765,.06274509803921569,.06666666666666667,.0588235294117647,.07450980392156863,.0784313725490196,.07058823529411765,.06274509803921569,.06274509803921569,.07450980392156863,.0784313725490196,.047058823529411764,.07450980392156863,.06274509803921569,.0588235294117647,.0588235294117647,.08235294117647057,.0784313725490196,.0784313725490196,.07058823529411765,.054901960784313725,.07058823529411765,.08627450980392157,.0588235294117647,.09803921568627452,.9333333333333332,.9490196078431371,.9411764705882352,.9137254901960784,.7803921568627452,.7450980392156863,.6705882352941175,.5647058823529412,.6,.6235294117647059,.5882352941176471,.6078431372549019,.6039215686274509,.5882352941176471,.5803921568627451,.611764705882353,.5686274509803921,.5607843137254902,.5254901960784314,.5607843137254902,.403921568627451,.41568627450980394,.37254901960784315,.34509803921568627,.3803921568627451,.3764705882352941,.34509803921568627,.3764705882352941,.5411764705882353,.3686274509803922,.2627450980392157,.16470588235294115,.2,.36470588235294116,.5372549019607843,.3607843137254902,.5333333333333333,.596078431372549,.4980392156862745,.3568627450980392,.33725490196078434,.3176470588235294,.1176470588235294,.807843137254902,.9529411764705881,.6313725490196078,.7294117647058823,.9254901960784313,.39607843137254906,.5450980392156862,.8980392156862745,.8784313725490196,.3058823529411765,.20392156862745098,.3803921568627451,.49411764705882355,.6352941176470588,.16862745098039217,.10980392156862745,.0588235294117647,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.07450980392156863,.07058823529411765],[.07450980392156863,.06274509803921569,.07450980392156863,.06274509803921569,.06274509803921569,.07450980392156863,.06666666666666667,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.0784313725490196,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.08235294117647057,.0784313725490196,.06666666666666667,.0588235294117647,.07058823529411765,.07058823529411765,.06666666666666667,.0588235294117647,.09019607843137255,.054901960784313725,.07450980392156863,.07058823529411765,.08627450980392157,.06666666666666667,.0588235294117647,.08235294117647057,.08235294117647057,.0784313725490196,.1803921568627451,.9294117647058823,.9686274509803922,.8666666666666667,.7764705882352942,.7490196078431373,.6784313725490196,.6196078431372549,.5725490196078431,.5725490196078431,.5764705882352941,.5490196078431373,.611764705882353,.5803921568627451,.5058823529411764,.6274509803921569,.5254901960784314,.5607843137254902,.4235294117647059,.44313725490196076,.3882352941176471,.41568627450980394,.33725490196078434,.3686274509803922,.38431372549019616,.34901960784313724,.3411764705882353,.34509803921568627,.2196078431372549,.2901960784313726,.49019607843137253,.6,.5725490196078431,.6,.5686274509803921,.6941176470588235,.6745098039215687,.5882352941176471,.5254901960784314,.4666666666666666,.34901960784313724,.3058823529411765,.27450980392156865,.8784313725490196,.8784313725490196,.6549019607843136,.7019607843137254,.9019607843137255,.7803921568627452,.403921568627451,.8823529411764706,.9372549019607842,.36470588235294116,.12156862745098039,.2823529411764706,.43529411764705883,.5607843137254902,.12156862745098039,.12549019607843137,.08235294117647057,.10196078431372549,.07058823529411765,.0784313725490196,.06666666666666667,.06666666666666667,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.07450980392156863,.050980392156862744,.07058823529411765,.08235294117647057,.06666666666666667,.07450980392156863,.08235294117647057,.0784313725490196,.07450980392156863,.07058823529411765,.08627450980392157,.07058823529411765,.09019607843137255,.07450980392156863,.07450980392156863,.09019607843137255,.0784313725490196,.07058823529411765,.07058823529411765,.050980392156862744,.07450980392156863,.06666666666666667,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.0784313725490196,.06666666666666667,.0588235294117647,.09019607843137255,.08627450980392157,.07450980392156863,.09411764705882353,.10588235294117647,.10196078431372549,.07450980392156863,.3294117647058823,.8784313725490196,.8745098039215686,.7960784313725491,.7176470588235294,.5882352941176471,.5686274509803921,.5803921568627451,.5215686274509804,.5607843137254902,.5882352941176471,.5333333333333333,.5215686274509804,.5843137254901961,.5294117647058824,.49411764705882355,.4196078431372549,.45098039215686275,.4235294117647059,.4,.39607843137254906,.42745098039215684,.34509803921568627,.36470588235294116,.3803921568627451,.3294117647058823,.4235294117647059,.5803921568627451,.7764705882352942,.7568627450980392,.8352941176470589,.8274509803921568,.7803921568627452,.6352941176470588,.6039215686274509,.6509803921568627,.6666666666666665,.5450980392156862,.45098039215686275,.3764705882352941,.34509803921568627,.25098039215686274,.5686274509803921,.8862745098039215,.6196078431372549,.596078431372549,.9215686274509803,.9647058823529412,.41568627450980394,.8941176470588236,.9254901960784313,.3921568627450981,.3137254901960784,.25882352941176473,.2901960784313726,.6196078431372549,.2901960784313726,.0784313725490196,.09411764705882353,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.0588235294117647,.07058823529411765,.07058823529411765,.06666666666666667],[.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.054901960784313725,.054901960784313725,.0784313725490196,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.0588235294117647,.07058823529411765,.07058823529411765,.08627450980392157,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.06274509803921569,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.06666666666666667,.06274509803921569,.07058823529411765,.07450980392156863,.06666666666666667,.08235294117647057,.06274509803921569,.07058823529411765,.09411764705882353,.09019607843137255,.0784313725490196,.0588235294117647,.06666666666666667,.44313725490196076,.6666666666666665,.6470588235294117,.5529411764705883,.4980392156862745,.5411764705882353,.5254901960784314,.37254901960784315,.3568627450980392,.4196078431372549,.4980392156862745,.39607843137254906,.4196078431372549,.41568627450980394,.5333333333333333,.4823529411764706,.4705882352941176,.45098039215686275,.45098039215686275,.43137254901960786,.5019607843137255,.5176470588235295,.7411764705882353,.9450980392156861,.9137254901960784,.9450980392156861,.9058823529411765,.8941176470588236,.8980392156862745,.8392156862745098,.6509803921568627,.6862745098039216,.6745098039215687,.42745098039215684,.28627450980392155,.1411764705882353,.25098039215686274,.27450980392156865,.2823529411764706,.1843137254901961,.5333333333333333,.7333333333333333,.6392156862745098,.7411764705882353,.8156862745098039,.9490196078431371,.4549019607843137,.8784313725490196,.9490196078431371,.7254901960784313,.14901960784313725,.22745098039215686,.3803921568627451,.5137254901960784,.4196078431372549,.0784313725490196,.08235294117647057,.07450980392156863,.07450980392156863,.07450980392156863,.054901960784313725,.07058823529411765,.0588235294117647,.07058823529411765,.07450980392156863,.09019607843137255],[.07058823529411765,.06274509803921569,.07450980392156863,.06666666666666667,.043137254901960784,.07450980392156863,.08235294117647057,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.1450980392156863,.07058823529411765,.06274509803921569,.07058823529411765,.08627450980392157,.07450980392156863,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.07450980392156863,.07058823529411765,.07450980392156863,.0392156862745098,.0588235294117647,.07058823529411765,.07058823529411765,.07058823529411765,.1176470588235294,.07450980392156863,.07450980392156863,.07058823529411765,.09411764705882353,.08627450980392157,.08627450980392157,.054901960784313725,.06274509803921569,.08235294117647057,.06274509803921569,.047058823529411764,.17647058823529413,.2235294117647059,.2549019607843137,.17254901960784313,.06274509803921569,.08235294117647057,.08235294117647057,.3176470588235294,.7137254901960784,.6352941176470588,.6196078431372549,.5607843137254902,.5607843137254902,.5137254901960784,.5490196078431373,.35294117647058826,.9333333333333332,.9764705882352941,.9647058823529412,.8980392156862745,.9490196078431371,.9568627450980393,.984313725490196,.9411764705882352,.8862745098039215,.7725490196078433,.7450980392156863,.49019607843137253,.24705882352941178,.24313725490196078,.28627450980392155,.27058823529411763,.2352941176470588,.25882352941176473,.24313725490196078,.25882352941176473,.2627450980392157,.23137254901960783,.41568627450980394,.6470588235294117,.6509803921568627,.8980392156862745,.7137254901960784,.9058823529411765,.42745098039215684,.7647058823529411,.8823529411764706,.9372549019607842,.2627450980392157,.21568627450980393,.39607843137254906,.44313725490196076,.5647058823529412,.10588235294117647,.07058823529411765,.0784313725490196,.07058823529411765,.07450980392156863,.09411764705882353,.07058823529411765,.07058823529411765,.0588235294117647,.08235294117647057,.07058823529411765],[.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.08235294117647057,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.06274509803921569,.07450980392156863,.07450980392156863,.06666666666666667,.0588235294117647,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.08627450980392157,.06666666666666667,.07058823529411765,.07450980392156863,.07450980392156863,.06666666666666667,.08235294117647057,.07058823529411765,.08235294117647057,.06666666666666667,.09411764705882353,.07450980392156863,.07450980392156863,.06666666666666667,.06274509803921569,.07450980392156863,.10196078431372549,.07450980392156863,.06274509803921569,.06274509803921569,.09019607843137255,.07058823529411765,.10980392156862745,.8156862745098039,.807843137254902,.7764705882352942,.6196078431372549,.5803921568627451,.5215686274509804,.9372549019607842,.9764705882352941,.996078431372549,.9450980392156861,.9333333333333332,.9686274509803922,.9725490196078431,.9882352941176471,.9764705882352941,.8901960784313725,.7058823529411765,.34901960784313724,.25098039215686274,.23137254901960783,.20392156862745098,.20392156862745098,.1843137254901961,.22745098039215686,.2352941176470588,.19215686274509808,.2235294117647059,.22745098039215686,.27450980392156865,.2549019607843137,.21568627450980393,.6431372549019607,.7176470588235294,.9294117647058823,.6313725490196078,.7843137254901962,.4470588235294118,.6666666666666665,.8705882352941177,.9372549019607842,.3411764705882353,.19215686274509808,.33333333333333326,.32156862745098036,.5176470588235295,.1803921568627451,.06666666666666667,.08627450980392157,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.06666666666666667,.07450980392156863],[.07450980392156863,.07058823529411765,.11372549019607843,.0784313725490196,.07450980392156863,.0784313725490196,.0784313725490196,.07450980392156863,.07058823529411765,.07058823529411765,.08235294117647057,.06666666666666667,.07450980392156863,.050980392156862744,.08235294117647057,.09411764705882353,.06666666666666667,.06666666666666667,.08235294117647057,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.12549019607843137,.09803921568627452,.07058823529411765,.07058823529411765,.08235294117647057,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.08235294117647057,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.047058823529411764,.054901960784313725,.054901960784313725,.07450980392156863,.06666666666666667,.07450980392156863,.06666666666666667,.054901960784313725,.07450980392156863,.07058823529411765,.0588235294117647,.0784313725490196,.06274509803921569,.45098039215686275,.7372549019607844,.9019607843137255,.7764705882352942,.9019607843137255,.9411764705882352,.9490196078431371,.9725490196078431,.9333333333333332,.9882352941176471,.9529411764705881,.9607843137254902,.803921568627451,.592156862745098,.32156862745098036,.3137254901960784,.24313725490196078,.25882352941176473,.24705882352941178,.14901960784313725,.11372549019607843,.1843137254901961,.24313725490196078,.24313725490196078,.22745098039215686,.2235294117647059,.19215686274509808,.2235294117647059,.25882352941176473,.1568627450980392,.16862745098039217,.7019607843137254,.6588235294117646,.9098039215686274,.7254901960784313,.8745098039215686,.5137254901960784,.3764705882352941,.8666666666666667,.9764705882352941,.2901960784313726,.1568627450980392,.34509803921568627,.3058823529411765,.5215686274509804,.2901960784313726,.07058823529411765,.10196078431372549,.07450980392156863,.06666666666666667,.08627450980392157,.06666666666666667,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765],[.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.07450980392156863,.09803921568627452,.08627450980392157,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.08627450980392157,.08235294117647057,.08235294117647057,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765,.06274509803921569,.054901960784313725,.043137254901960784,.06666666666666667,.07450980392156863,.07450980392156863,.06666666666666667,.07058823529411765,.047058823529411764,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.0784313725490196,.06666666666666667,.047058823529411764,.07058823529411765,.07058823529411765,.07058823529411765,.08235294117647057,.09019607843137255,.07058823529411765,.08627450980392157,.06666666666666667,.07450980392156863,.06274509803921569,.07450980392156863,.07450980392156863,.07058823529411765,.6666666666666665,.7490196078431373,.8627450980392157,.9372549019607842,.9529411764705881,.8980392156862745,.9725490196078431,.9607843137254902,.9607843137254902,.5176470588235295,.5725490196078431,.4549019607843137,.27450980392156865,.27450980392156865,.25882352941176473,.2627450980392157,.21568627450980393,.21568627450980393,.16862745098039217,.22745098039215686,.1843137254901961,.25882352941176473,.21568627450980393,.2,.19607843137254904,.2196078431372549,.14901960784313725,.15294117647058825,.27450980392156865,.1568627450980392,.7568627450980392,.6509803921568627,.9254901960784313,.8980392156862745,.6745098039215687,.596078431372549,.37254901960784315,.7803921568627452,.9137254901960784,.3411764705882353,.12549019607843137,.2196078431372549,.5294117647058824,.4705882352941176,.4823529411764706,.07450980392156863,.0784313725490196,.07058823529411765,.07058823529411765,.0784313725490196,.0784313725490196,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863],[.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.06666666666666667,.07450980392156863,.06666666666666667,.07450980392156863,.06274509803921569,.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.07450980392156863,.0784313725490196,.07450980392156863,.07058823529411765,.07450980392156863,.0784313725490196,.07450980392156863,.07058823529411765,.06274509803921569,.07058823529411765,.054901960784313725,.06666666666666667,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.06666666666666667,.07058823529411765,.08627450980392157,.07058823529411765,.07450980392156863,.06666666666666667,.0588235294117647,.07058823529411765,.08235294117647057,.06274509803921569,.06274509803921569,.07450980392156863,.06274509803921569,.07058823529411765,.08235294117647057,.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.07450980392156863,.12549019607843137,.8941176470588236,.807843137254902,.984313725490196,.9333333333333332,.9098039215686274,.984313725490196,.9647058823529412,.9254901960784313,.6431372549019607,.611764705882353,.5098039215686274,.34509803921568627,.34901960784313724,.2352941176470588,.29411764705882354,.28627450980392155,.2235294117647059,.14901960784313725,.1843137254901961,.18823529411764706,.2196078431372549,.23137254901960783,.1843137254901961,.22745098039215686,.11372549019607843,.19215686274509808,.19607843137254904,.13725490196078433,.17254901960784313,.10980392156862745,.7568627450980392,.7803921568627452,.7882352941176471,.9294117647058823,.6784313725490196,.7725490196078433,.43137254901960786,.6980392156862745,.8745098039215686,.4392156862745098,.19607843137254904,.27058823529411763,.6392156862745098,.39607843137254906,.4235294117647059,.12549019607843137,.08627450980392157,.07450980392156863,.09803921568627452,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196],[.07450980392156863,.07450980392156863,.10196078431372549,.07450980392156863,.06274509803921569,.07058823529411765,.07450980392156863,.11372549019607843,.06666666666666667,.0588235294117647,.09411764705882353,.07058823529411765,.07450980392156863,.0784313725490196,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.06274509803921569,.06666666666666667,.07450980392156863,.0588235294117647,.07450980392156863,.06666666666666667,.07058823529411765,.06666666666666667,.08235294117647057,.07058823529411765,.06274509803921569,.06666666666666667,.08235294117647057,.07058823529411765,.12941176470588237,.07450980392156863,.0588235294117647,.06666666666666667,.07058823529411765,.08235294117647057,.09019607843137255,.0784313725490196,.09803921568627452,.0588235294117647,.07058823529411765,.07058823529411765,.07058823529411765,.054901960784313725,.09019607843137255,.9098039215686274,.7921568627450981,.9411764705882352,.9490196078431371,.8901960784313725,.9137254901960784,.9294117647058823,.7098039215686275,.6352941176470588,.6235294117647059,.5725490196078431,.5176470588235295,.41568627450980394,.3764705882352941,.3176470588235294,.27058823529411763,.1803921568627451,.21176470588235294,.13333333333333333,.21176470588235294,.25882352941176473,.24313725490196078,.20784313725490197,.16470588235294115,.12156862745098039,.13333333333333333,.2,.21568627450980393,.18823529411764706,.1176470588235294,.13333333333333333,.7882352941176471,.9490196078431371,.7372549019607844,.7411764705882353,.6549019607843136,.9372549019607842,.4666666666666666,.6470588235294117,.7450980392156863,.7215686274509804,.2549019607843137,.27058823529411763,.5882352941176471,.4117647058823529,.5607843137254902,.12156862745098039,.0784313725490196,.054901960784313725,.0784313725490196,.06666666666666667,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.06666666666666667,.07058823529411765,.12156862745098039,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.0784313725490196,.07058823529411765,.07058823529411765,.0784313725490196,.0588235294117647,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.06274509803921569,.0784313725490196,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.0784313725490196,.07450980392156863,.06274509803921569,.07450980392156863,.07058823529411765,.0588235294117647,.08235294117647057,.07058823529411765,.07058823529411765,.06274509803921569,.06274509803921569,.06666666666666667,.09019607843137255,.06274509803921569,.06666666666666667,.06666666666666667,.19215686274509808,.9490196078431371,.9490196078431371,.9137254901960784,.9764705882352941,.8627450980392157,.6509803921568627,.7450980392156863,.7607843137254902,.7254901960784313,.6705882352941175,.596078431372549,.45098039215686275,.33333333333333326,.32156862745098036,.23921568627450981,.2823529411764706,.2549019607843137,.23137254901960783,.1843137254901961,.2196078431372549,.2352941176470588,.2196078431372549,.20392156862745098,.2,.2,.12156862745098039,.2,.17254901960784313,.16078431372549018,.21176470588235294,.10588235294117647,.7137254901960784,.9372549019607842,.7333333333333333,.8980392156862745,.6705882352941175,.9490196078431371,.4470588235294118,.5529411764705883,.592156862745098,.8705882352941177,.2,.1450980392156863,.5686274509803921,.42745098039215684,.6235294117647059,.3137254901960784,.07450980392156863,.07058823529411765,.08235294117647057,.06666666666666667,.07450980392156863,.12156862745098039,.07450980392156863,.07450980392156863,.07450980392156863],[.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.050980392156862744,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.0588235294117647,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765,.09803921568627452,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.054901960784313725,.06274509803921569,.06666666666666667,.06666666666666667,.07058823529411765,.0588235294117647,.06274509803921569,.06666666666666667,.0588235294117647,.9647058823529412,.9686274509803922,.9764705882352941,.9372549019607842,.8431372549019608,.6352941176470588,.7254901960784313,.7843137254901962,.7647058823529411,.8,.7372549019607844,.5294117647058824,.5176470588235295,.3803921568627451,.32156862745098036,.3058823529411765,.29411764705882354,.23921568627450981,.1568627450980392,.16470588235294115,.23137254901960783,.1803921568627451,.16470588235294115,.1176470588235294,.21568627450980393,.16078431372549018,.1843137254901961,.2352941176470588,.23137254901960783,.17254901960784313,.11372549019607843,.1843137254901961,.7568627450980392,.9215686274509803,.8941176470588236,.8862745098039215,.7490196078431373,.8784313725490196,.7843137254901962,.403921568627451,.592156862745098,.8235294117647058,.21568627450980393,.15294117647058825,.47843137254901963,.4588235294117647,.5686274509803921,.3882352941176471,.18823529411764706,.07450980392156863,.0784313725490196,.07058823529411765,.09803921568627452,.07450980392156863,.07450980392156863,.10980392156862745,.07450980392156863],[.06666666666666667,.07058823529411765,.0588235294117647,.07058823529411765,.054901960784313725,.050980392156862744,.09019607843137255,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.0588235294117647,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.0588235294117647,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.054901960784313725,.07058823529411765,.054901960784313725,.07058823529411765,.06274509803921569,.07058823529411765,.07450980392156863,.07450980392156863,.06666666666666667,.06274509803921569,.0784313725490196,.07450980392156863,.07450980392156863,.0588235294117647,.07058823529411765,.06274509803921569,.06666666666666667,.050980392156862744,.14901960784313725,.9411764705882352,.9294117647058823,.9411764705882352,.9686274509803922,.6705882352941175,.8274509803921568,.7921568627450981,.8941176470588236,.8470588235294118,.7764705882352942,.8,.7294117647058823,.5647058823529412,.5254901960784314,.30196078431372547,.3058823529411765,.3176470588235294,.21568627450980393,.16862745098039217,.12156862745098039,.2,.21568627450980393,.16470588235294115,.17254901960784313,.2,.16862745098039217,.16470588235294115,.24705882352941178,.16078431372549018,.2352941176470588,.1568627450980392,.14901960784313725,.10980392156862745,.4,.9568627450980393,.8862745098039215,.8901960784313725,.7529411764705882,.8980392156862745,.8235294117647058,.4,.5176470588235295,.7921568627450981,.3686274509803922,.17647058823529413,.49019607843137253,.35294117647058826,.48627450980392156,.6901960784313725,.4196078431372549,.15294117647058825,.06666666666666667,.10980392156862745,.06666666666666667,.07450980392156863,.07450980392156863,.07058823529411765,.07058823529411765],[.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.0784313725490196,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.06666666666666667,.047058823529411764,.06666666666666667,.08627450980392157,.06274509803921569,.06666666666666667,.050980392156862744,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196,.0784313725490196,.07058823529411765,.07450980392156863,.1411764705882353,.07450980392156863,.07058823529411765,.07058823529411765,.0784313725490196,.07450980392156863,.07058823529411765,.06274509803921569,.08627450980392157,.25098039215686274,.9450980392156861,.9647058823529412,.8862745098039215,.6352941176470588,.7176470588235294,.8509803921568627,.8666666666666667,.9058823529411765,.7921568627450981,.8941176470588236,.7686274509803923,.6313725490196078,.5647058823529412,.39607843137254906,.3058823529411765,.30196078431372547,.2784313725490196,.22745098039215686,.32156862745098036,.10980392156862745,.1568627450980392,.16470588235294115,.2235294117647059,.20784313725490197,.13333333333333333,.0784313725490196,.16862745098039217,.1843137254901961,.2549019607843137,.19607843137254904,.12941176470588237,.19215686274509808,.1176470588235294,.34509803921568627,.8509803921568627,.7803921568627452,.9372549019607842,.6901960784313725,.7019607843137254,.9490196078431371,.41568627450980394,.5686274509803921,.2,.2784313725490196,.19215686274509808,.3568627450980392,.4588235294117647,.46274509803921565,.9607843137254902,.3882352941176471,.25098039215686274,.07450980392156863,.0588235294117647,.07058823529411765,.07450980392156863,.0784313725490196,.07058823529411765,.07058823529411765],[.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.06274509803921569,.07058823529411765,.06666666666666667,.054901960784313725,.07058823529411765,.07058823529411765,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.06666666666666667,.06274509803921569,.07058823529411765,.08235294117647057,.08235294117647057,.06666666666666667,.07058823529411765,.07058823529411765,.0588235294117647,.0588235294117647,.08627450980392157,.07450980392156863,.07058823529411765,.08235294117647057,.07450980392156863,.07450980392156863,.10588235294117647,.06666666666666667,.07058823529411765,.07450980392156863,.054901960784313725,.07450980392156863,.8627450980392157,.9137254901960784,.9764705882352941,.5372549019607843,.7568627450980392,.7450980392156863,.8509803921568627,.8980392156862745,.8862745098039215,.8156862745098039,.7019607843137254,.592156862745098,.6078431372549019,.4392156862745098,.38431372549019616,.3411764705882353,.2901960784313726,.26666666666666666,.2980392156862745,.17647058823529413,.14901960784313725,.2,.16078431372549018,.09803921568627452,.1450980392156863,.14901960784313725,.11372549019607843,.21176470588235294,.16862745098039217,.1803921568627451,.1568627450980392,.16470588235294115,.1803921568627451,.1450980392156863,.0784313725490196,.803921568627451,.9098039215686274,.9333333333333332,.8588235294117647,.6313725490196078,.7607843137254902,.49019607843137253,.4196078431372549,.4823529411764706,.3294117647058823,.3137254901960784,.42745098039215684,.3137254901960784,.5490196078431373,.8901960784313725,.592156862745098,.30980392156862746,.09803921568627452,.06666666666666667,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.07058823529411765],[.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.07450980392156863,.06666666666666667,.07058823529411765,.06274509803921569,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.050980392156862744,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.07450980392156863,.06274509803921569,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.1176470588235294,.0588235294117647,.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.0588235294117647,.07058823529411765,.06274509803921569,.9058823529411765,.9803921568627451,.5725490196078431,.6470588235294117,.6627450980392156,.8352941176470589,.7882352941176471,.8823529411764706,.7176470588235294,.8,.8627450980392157,.7529411764705882,.5411764705882353,.403921568627451,.4235294117647059,.4196078431372549,.3137254901960784,.27450980392156865,.3254901960784313,.12549019607843137,.16470588235294115,.14901960784313725,.19215686274509808,.1843137254901961,.12549019607843137,.16078431372549018,.12549019607843137,.17647058823529413,.21568627450980393,.19607843137254904,.20784313725490197,.22745098039215686,.22745098039215686,.15294117647058825,.10588235294117647,.9215686274509803,.8588235294117647,.9568627450980393,.7529411764705882,.8235294117647058,.9215686274509803,.4666666666666666,.5176470588235295,.7294117647058823,.4,.23137254901960783,.35294117647058826,.6470588235294117,.7215686274509804,.9019607843137255,.6392156862745098,.30196078431372547,.10980392156862745,.06666666666666667,.06666666666666667,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765],[.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.08235294117647057,.07058823529411765,.06666666666666667,.11372549019607843,.10588235294117647,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765,.07058823529411765,.09019607843137255,.08235294117647057,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.0784313725490196,.07058823529411765,.07450980392156863,.07058823529411765,.08235294117647057,.12156862745098039,.07058823529411765,.07058823529411765,.0588235294117647,.06666666666666667,.0784313725490196,.07058823529411765,.07450980392156863,.054901960784313725,.07058823529411765,.07450980392156863,.0784313725490196,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.08235294117647057,.06666666666666667,.047058823529411764,.7960784313725491,.6235294117647059,.6823529411764706,.5294117647058824,.6313725490196078,.7490196078431373,.7568627450980392,.7843137254901962,.8235294117647058,.8235294117647058,.8470588235294118,.6392156862745098,.5725490196078431,.45098039215686275,.4196078431372549,.3882352941176471,.34901960784313724,.19607843137254904,.12156862745098039,.13725490196078433,.17647058823529413,.12941176470588237,.16470588235294115,.13725490196078433,.15294117647058825,.16078431372549018,.1450980392156863,.20392156862745098,.24705882352941178,.20392156862745098,.2196078431372549,.23137254901960783,.12941176470588237,.16078431372549018,.1843137254901961,.9411764705882352,.8941176470588236,.8509803921568627,.9215686274509803,.8117647058823529,.7607843137254902,.47450980392156855,.49019607843137253,.6588235294117646,.4823529411764706,.3921568627450981,.2901960784313726,.8313725490196079,.7725490196078433,.7764705882352942,.7333333333333333,.29411764705882354,.3686274509803922,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765],[.06666666666666667,.07450980392156863,.09411764705882353,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.10588235294117647,.06666666666666667,.06666666666666667,.06666666666666667,.0588235294117647,.08627450980392157,.07058823529411765,.06274509803921569,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.10980392156862745,.07450980392156863,.11372549019607843,.07058823529411765,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.06666666666666667,.06274509803921569,.0588235294117647,.0588235294117647,.06666666666666667,.06274509803921569,.07450980392156863,.0588235294117647,.07058823529411765,.06666666666666667,.07058823529411765,.0588235294117647,.08235294117647057,.09803921568627452,.06274509803921569,.07450980392156863,.06666666666666667,.07450980392156863,.06666666666666667,.06666666666666667,.027450980392156862,.7960784313725491,.7215686274509804,.5803921568627451,.6392156862745098,.7215686274509804,.7372549019607844,.7725490196078433,.8588235294117647,.8352941176470589,.8117647058823529,.7568627450980392,.7333333333333333,.615686274509804,.5725490196078431,.4392156862745098,.3137254901960784,.27058823529411763,.2,.1568627450980392,.14901960784313725,.1843137254901961,.10588235294117647,.1843137254901961,.16078431372549018,.17647058823529413,.09411764705882353,.17254901960784313,.1176470588235294,.23921568627450981,.1450980392156863,.16470588235294115,.16862745098039217,.17254901960784313,.09803921568627452,.13333333333333333,.9098039215686274,.8549019607843137,.9607843137254902,.8705882352941177,.7529411764705882,.8156862745098039,.46274509803921565,.46274509803921565,.7294117647058823,.4588235294117647,.34901960784313724,.41568627450980394,.7254901960784313,.8274509803921568,.8470588235294118,.6705882352941175,.5490196078431373,.24313725490196078,.06666666666666667,.08235294117647057,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863],[.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.08627450980392157,.06274509803921569,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.08627450980392157,.09411764705882353,.07058823529411765,.07450980392156863,.06274509803921569,.06666666666666667,.07058823529411765,.07058823529411765,.09019607843137255,.06666666666666667,.06274509803921569,.07450980392156863,.0784313725490196,.07450980392156863,.07450980392156863,.07450980392156863,.06274509803921569,.07450980392156863,.06274509803921569,.06666666666666667,.0588235294117647,.054901960784313725,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.0784313725490196,.6470588235294117,.48627450980392156,.6941176470588235,.6509803921568627,.6784313725490196,.7450980392156863,.8666666666666667,.8352941176470589,.8274509803921568,.8509803921568627,.8392156862745098,.7568627450980392,.6941176470588235,.7215686274509804,.6784313725490196,.5411764705882353,.3176470588235294,.2823529411764706,.23921568627450981,.16470588235294115,.2196078431372549,.21568627450980393,.1803921568627451,.14901960784313725,.1176470588235294,.19215686274509808,.10196078431372549,.23921568627450981,.17254901960784313,.19607843137254904,.2,.17647058823529413,.1176470588235294,.14901960784313725,.12549019607843137,.09803921568627452,.7882352941176471,.8941176470588236,.8627450980392157,.8313725490196079,.8509803921568627,.8117647058823529,.5490196078431373,.44313725490196076,.7764705882352942,.5215686274509804,.4,.3882352941176471,.7529411764705882,.8509803921568627,.8823529411764706,.7921568627450981,.5058823529411764,.35294117647058826,.043137254901960784,.0588235294117647,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.07058823529411765,.06274509803921569,.07450980392156863,.06666666666666667,.0588235294117647,.07058823529411765,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.0784313725490196,.06666666666666667,.06666666666666667,.06666666666666667,.08235294117647057,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.08235294117647057,.08627450980392157,.08235294117647057,.07058823529411765,.06666666666666667,.0784313725490196,.0784313725490196,.06274509803921569,.0784313725490196,.07058823529411765,.09803921568627452,.06274509803921569,.07058823529411765,.07058823529411765,.06666666666666667,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.09019607843137255,.0588235294117647,.5882352941176471,.6862745098039216,.8313725490196079,.7647058823529411,.6941176470588235,.9058823529411765,.9333333333333332,.8392156862745098,.8705882352941177,.7882352941176471,.7098039215686275,.6549019607843136,.5803921568627451,.5607843137254902,.5490196078431373,.7098039215686275,.26666666666666666,.30196078431372547,.1568627450980392,.4196078431372549,.17647058823529413,.21568627450980393,.17647058823529413,.17647058823529413,.23921568627450981,.19607843137254904,.09803921568627452,.1843137254901961,.10588235294117647,.20392156862745098,.12941176470588237,.12941176470588237,.13333333333333333,.13333333333333333,.09019607843137255,.1176470588235294,.8509803921568627,.8823529411764706,.8901960784313725,.5686274509803921,.7843137254901962,.7882352941176471,.5058823529411764,.3607843137254902,.7254901960784313,.6,.5098039215686274,.2627450980392157,.7254901960784313,.8980392156862745,.7607843137254902,.8470588235294118,.6196078431372549,.35294117647058826,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.06666666666666667,.08235294117647057,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.0588235294117647,.07058823529411765,.06274509803921569,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.0588235294117647,.0784313725490196,.07058823529411765,.06666666666666667,.07450980392156863,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.06274509803921569,.06666666666666667,.0784313725490196,.0784313725490196,.07450980392156863,.054901960784313725,.06666666666666667,.0784313725490196,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.0784313725490196,.0784313725490196,.07058823529411765,.07450980392156863,.07450980392156863,.054901960784313725,.06274509803921569,.07450980392156863,.07450980392156863,.08235294117647057,.6509803921568627,.6039215686274509,.6901960784313725,.7647058823529411,.7137254901960784,.8274509803921568,.8235294117647058,.9333333333333332,.6627450980392156,.6352941176470588,.6941176470588235,.6666666666666665,.6901960784313725,.7960784313725491,.7215686274509804,.6745098039215687,.5450980392156862,.5843137254901961,.20392156862745098,.16470588235294115,.1803921568627451,.1843137254901961,.2196078431372549,.14901960784313725,.16470588235294115,.17254901960784313,.1568627450980392,.1450980392156863,.21176470588235294,.1803921568627451,.2196078431372549,.15294117647058825,.17647058823529413,.16862745098039217,.13725490196078433,.10980392156862745,.10588235294117647,.596078431372549,.7450980392156863,.6823529411764706,.7176470588235294,.7058823529411765,.8,.6823529411764706,.4549019607843137,.6745098039215687,.6313725490196078,.5568627450980392,.23921568627450981,.5764705882352941,.8941176470588236,.7686274509803923,.807843137254902,.5490196078431373,.47843137254901963,.09019607843137255,.10588235294117647,.06666666666666667,.06666666666666667,.07058823529411765,.07450980392156863],[.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.054901960784313725,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.07450980392156863,.12549019607843137,.06274509803921569,.06666666666666667,.07058823529411765,.07450980392156863,.06274509803921569,.0784313725490196,.06666666666666667,.07058823529411765,.0784313725490196,.07058823529411765,.0588235294117647,.06666666666666667,.07450980392156863,.08235294117647057,.050980392156862744,.06666666666666667,.06274509803921569,.1450980392156863,.12156862745098039,.06666666666666667,.06666666666666667,.07058823529411765,.07450980392156863,.06274509803921569,.07058823529411765,.07058823529411765,.06666666666666667,.0784313725490196,.08235294117647057,.07058823529411765,.07450980392156863,.07450980392156863,.5254901960784314,.7607843137254902,.5568627450980392,.8,.8117647058823529,.6392156862745098,.9764705882352941,.5686274509803921,.6392156862745098,.6039215686274509,.6,.7254901960784313,.7725490196078433,.6627450980392156,.7294117647058823,.7372549019607844,.6784313725490196,.6588235294117646,.3882352941176471,.2235294117647059,.2235294117647059,.25098039215686274,.21176470588235294,.1803921568627451,.13333333333333333,.16078431372549018,.17647058823529413,.14901960784313725,.20392156862745098,.16470588235294115,.16078431372549018,.19215686274509808,.13725490196078433,.12156862745098039,.1176470588235294,.10588235294117647,.12941176470588237,.5803921568627451,.5568627450980392,.7294117647058823,.7411764705882353,.8745098039215686,.8901960784313725,.6313725490196078,.43137254901960786,.6549019607843136,.7529411764705882,.6431372549019607,.20784313725490197,.5137254901960784,.7372549019607844,.6784313725490196,.8901960784313725,.5450980392156862,.3176470588235294,.08235294117647057,.07058823529411765,.06666666666666667,.12156862745098039,.07450980392156863,.07450980392156863],[.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765,.047058823529411764,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.0588235294117647,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.08235294117647057,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.054901960784313725,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.09411764705882353,.0588235294117647,.07058823529411765,.07058823529411765,.0784313725490196,.06666666666666667,.07450980392156863,.06274509803921569,.07058823529411765,.0588235294117647,.06666666666666667,.07450980392156863,.0588235294117647,.47450980392156855,.5843137254901961,.5490196078431373,.803921568627451,.7921568627450981,.6,.6274509803921569,.41568627450980394,.6274509803921569,.6235294117647059,.6313725490196078,.6941176470588235,.6666666666666665,.7803921568627452,.8588235294117647,.8352941176470589,.7764705882352942,.615686274509804,.8274509803921568,.5411764705882353,.30980392156862746,.30980392156862746,.2196078431372549,.30196078431372547,.24705882352941178,.23921568627450981,.23921568627450981,.1411764705882353,.12549019607843137,.09411764705882353,.1450980392156863,.16862745098039217,.1411764705882353,.17647058823529413,.11372549019607843,.1176470588235294,.11372549019607843,.17647058823529413,.615686274509804,.7019607843137254,.6078431372549019,.6666666666666665,.8470588235294118,.7882352941176471,.5882352941176471,.45098039215686275,.5098039215686274,.6901960784313725,.5764705882352941,.33725490196078434,.40784313725490196,.807843137254902,.803921568627451,.8862745098039215,.4235294117647059,.34901960784313724,.10196078431372549,.07450980392156863,.0784313725490196,.10196078431372549,.07450980392156863,.07450980392156863],[.06666666666666667,.07058823529411765,.06666666666666667,.0784313725490196,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.07450980392156863,.054901960784313725,.07058823529411765,.06666666666666667,.06274509803921569,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.06274509803921569,.07058823529411765,.08235294117647057,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.09019607843137255,.07450980392156863,.06666666666666667,.08627450980392157,.06274509803921569,.06274509803921569,.07450980392156863,.10980392156862745,.07058823529411765,.07058823529411765,.0784313725490196,.07450980392156863,.07058823529411765,.0588235294117647,.3764705882352941,.5254901960784314,.6274509803921569,.7098039215686275,.5607843137254902,.5803921568627451,.4588235294117647,.5647058823529412,.47843137254901963,.6235294117647059,.7254901960784313,.8666666666666667,.7176470588235294,.803921568627451,.8392156862745098,.7882352941176471,.8274509803921568,.8470588235294118,.7568627450980392,.5372549019607843,.2196078431372549,.2784313725490196,.22745098039215686,.3137254901960784,.34509803921568627,.3411764705882353,.2196078431372549,.19607843137254904,.14901960784313725,.16470588235294115,.20784313725490197,.21176470588235294,.19215686274509808,.18823529411764706,.10588235294117647,.13333333333333333,.1176470588235294,.19215686274509808,.5333333333333333,.7450980392156863,.7215686274509804,.6274509803921569,.8,.8313725490196079,.6392156862745098,.4705882352941176,.47450980392156855,.6941176470588235,.5137254901960784,.3921568627450981,.615686274509804,.7803921568627452,.9176470588235294,.5803921568627451,.403921568627451,.0784313725490196,.09803921568627452,.07450980392156863,.08627450980392157,.07058823529411765,.07058823529411765,.0784313725490196],[.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.08627450980392157,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.0784313725490196,.08235294117647057,.10196078431372549,.06666666666666667,.06666666666666667,.07058823529411765,.0588235294117647,.06666666666666667,.0784313725490196,.08235294117647057,.07058823529411765,.06274509803921569,.08627450980392157,.06274509803921569,.0588235294117647,.07058823529411765,.054901960784313725,.07450980392156863,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.06666666666666667,.5372549019607843,.4235294117647059,.4235294117647059,.6274509803921569,.5372549019607843,.5294117647058824,.4235294117647059,.5411764705882353,.48627450980392156,.6352941176470588,.6784313725490196,.8,.8666666666666667,.9058823529411765,.8313725490196079,.8705882352941177,.8941176470588236,.8,.7725490196078433,.7215686274509804,.5529411764705883,.2196078431372549,.2549019607843137,.2352941176470588,.3058823529411765,.3568627450980392,.2196078431372549,.3137254901960784,.27058823529411763,.1803921568627451,.18823529411764706,.22745098039215686,.1411764705882353,.20392156862745098,.1568627450980392,.10588235294117647,.1176470588235294,.10980392156862745,.10196078431372549,.5843137254901961,.7137254901960784,.6078431372549019,.6431372549019607,.6666666666666665,.7843137254901962,.7568627450980392,.3294117647058823,.3568627450980392,.10196078431372549,.11372549019607843,.13333333333333333,.27058823529411763,.1803921568627451,.12549019607843137,.10980392156862745,.12941176470588237,.07450980392156863,.0784313725490196,.07450980392156863,.06274509803921569,.0784313725490196,.08235294117647057,.07450980392156863],[.06666666666666667,.0784313725490196,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.09019607843137255,.0784313725490196,.06666666666666667,.06274509803921569,.0588235294117647,.10588235294117647,.0588235294117647,.07058823529411765,.06274509803921569,.08235294117647057,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.0588235294117647,.054901960784313725,.06666666666666667,.07058823529411765,.07058823529411765,.09803921568627452,.0784313725490196,.07058823529411765,.06274509803921569,.054901960784313725,.0588235294117647,.0784313725490196,.07058823529411765,.06274509803921569,.07450980392156863,.07450980392156863,.06666666666666667,.5764705882352941,.48627450980392156,.45098039215686275,.6274509803921569,.6235294117647059,.5333333333333333,.5294117647058824,.5764705882352941,.6941176470588235,.6745098039215687,.6823529411764706,.7607843137254902,.7568627450980392,.5411764705882353,.6980392156862745,.6901960784313725,.7215686274509804,.7294117647058823,.7607843137254902,.7294117647058823,.592156862745098,.2901960784313726,.3568627450980392,.26666666666666666,.30980392156862746,.3411764705882353,.33725490196078434,.34901960784313724,.3058823529411765,.14901960784313725,.29411764705882354,.23137254901960783,.21176470588235294,.1568627450980392,.14901960784313725,.12549019607843137,.1176470588235294,.11372549019607843,.09411764705882353,.615686274509804,.7137254901960784,.6509803921568627,.615686274509804,.6431372549019607,.7215686274509804,.7372549019607844,.3254901960784313,.2196078431372549,.1176470588235294,.08235294117647057,.0588235294117647,.07058823529411765,.07450980392156863,.08235294117647057,.09019607843137255,.09019607843137255,.06666666666666667,.07058823529411765,.0784313725490196,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765],[.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.06274509803921569,.1568627450980392,.06666666666666667,.06274509803921569,.06666666666666667,.0784313725490196,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.0588235294117647,.08235294117647057,.06666666666666667,.09019607843137255,.06666666666666667,.0588235294117647,.07058823529411765,.0784313725490196,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.0588235294117647,.06666666666666667,.07450980392156863,.08627450980392157,.050980392156862744,.06666666666666667,.08235294117647057,.09019607843137255,.5058823529411764,.5843137254901961,.5215686274509804,.6627450980392156,.5843137254901961,.6431372549019607,.6078431372549019,.6666666666666665,.7098039215686275,.6705882352941175,.7176470588235294,.6823529411764706,.7725490196078433,.8352941176470589,.6901960784313725,.6470588235294117,.6784313725490196,.7019607843137254,.7254901960784313,.6862745098039216,.6470588235294117,.2784313725490196,.3137254901960784,.2196078431372549,.3607843137254902,.3176470588235294,.32156862745098036,.32156862745098036,.26666666666666666,.33725490196078434,.30196078431372547,.34901960784313724,.21176470588235294,.2196078431372549,.13333333333333333,.10980392156862745,.09803921568627452,.1176470588235294,.10980392156862745,.6509803921568627,.4823529411764706,.6039215686274509,.5764705882352941,.4823529411764706,.5372549019607843,.6862745098039216,.2823529411764706,.2,.23137254901960783,.08235294117647057,.0588235294117647,.06666666666666667,.0784313725490196,.0784313725490196,.0784313725490196,.06274509803921569,.06666666666666667,.08235294117647057,.07058823529411765,.08627450980392157,.08235294117647057,.0784313725490196,.07058823529411765],[.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.0588235294117647,.07058823529411765,.06666666666666667,.07058823529411765,.08627450980392157,.054901960784313725,.06666666666666667,.0784313725490196,.06666666666666667,.09019607843137255,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.06666666666666667,.07058823529411765,.06274509803921569,.07058823529411765,.0784313725490196,.07058823529411765,.0588235294117647,.07058823529411765,.07058823529411765,.06666666666666667,.06274509803921569,.07058823529411765,.07058823529411765,.10196078431372549,.07058823529411765,.4117647058823529,.4980392156862745,.7137254901960784,.5843137254901961,.44313725490196076,.6470588235294117,.5294117647058824,.7137254901960784,.6274509803921569,.6549019607843136,.807843137254902,.7647058823529411,.7019607843137254,.5882352941176471,.7176470588235294,.6352941176470588,.7333333333333333,.6862745098039216,.7098039215686275,.6823529411764706,.6862745098039216,.5529411764705883,.4705882352941176,.3568627450980392,.32156862745098036,.24705882352941178,.34509803921568627,.33725490196078434,.3058823529411765,.2980392156862745,.23921568627450981,.2549019607843137,.3176470588235294,.16078431372549018,.32156862745098036,.12549019607843137,.1176470588235294,.16078431372549018,.12156862745098039,.08235294117647057,.6823529411764706,.5803921568627451,.611764705882353,.615686274509804,.596078431372549,.6352941176470588,.7019607843137254,.2784313725490196,.20784313725490197,.1176470588235294,.08235294117647057,.0784313725490196,.0588235294117647,.08627450980392157,.07058823529411765,.17647058823529413,.0784313725490196,.07058823529411765,.07450980392156863,.08235294117647057,.06666666666666667,.06274509803921569,.06274509803921569,.07450980392156863],[.07058823529411765,.07058823529411765,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.06274509803921569,.06666666666666667,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07450980392156863,.06666666666666667,.06666666666666667,.0588235294117647,.08235294117647057,.08627450980392157,.07058823529411765,.06666666666666667,.07058823529411765,.08235294117647057,.09411764705882353,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.0784313725490196,.08235294117647057,.06666666666666667,.43137254901960786,.5294117647058824,.5725490196078431,.6862745098039216,.6470588235294117,.5843137254901961,.6941176470588235,.6666666666666665,.7333333333333333,.7215686274509804,.7529411764705882,.7372549019607844,.8,.6745098039215687,.6,.6666666666666665,.6392156862745098,.6470588235294117,.6509803921568627,.6078431372549019,.7294117647058823,.6549019607843136,.6431372549019607,.4470588235294118,.34509803921568627,.23921568627450981,.24313725490196078,.2901960784313726,.2549019607843137,.3176470588235294,.13333333333333333,.25098039215686274,.2,.1803921568627451,.33333333333333326,.15294117647058825,.2,.15294117647058825,.12549019607843137,.10980392156862745,.5568627450980392,.5843137254901961,.5254901960784314,.6549019607843136,.8509803921568627,.6745098039215687,.6901960784313725,.1450980392156863,.20784313725490197,.0588235294117647,.08627450980392157,.0588235294117647,.11372549019607843,.08235294117647057,.06274509803921569,.06274509803921569,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.08627450980392157,.07058823529411765,.07450980392156863,.07450980392156863],[.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.08627450980392157,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.0588235294117647,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.054901960784313725,.047058823529411764,.06274509803921569,.0784313725490196,.054901960784313725,.4588235294117647,.5333333333333333,.596078431372549,.5254901960784314,.5490196078431373,.7333333333333333,.6392156862745098,.8588235294117647,.7960784313725491,.7058823529411765,.7607843137254902,.7568627450980392,.6862745098039216,.596078431372549,.48627450980392156,.5764705882352941,.5803921568627451,.6941176470588235,.6901960784313725,.6039215686274509,.6549019607843136,.6509803921568627,.615686274509804,.4588235294117647,.33725490196078434,.32156862745098036,.27058823529411763,.14901960784313725,.2980392156862745,.30196078431372547,.25098039215686274,.3137254901960784,.25882352941176473,.2627450980392157,.26666666666666666,.2901960784313726,.25882352941176473,.22745098039215686,.1411764705882353,.11372549019607843,.5019607843137255,.45098039215686275,.49411764705882355,.6274509803921569,.3764705882352941,.4196078431372549,.4549019607843137,.2901960784313726,.07058823529411765,.0784313725490196,.07450980392156863,.09019607843137255,.06274509803921569,.0784313725490196,.08627450980392157,.12549019607843137,.06666666666666667,.08627450980392157,.07450980392156863,.0784313725490196,.08235294117647057,.07058823529411765,.07450980392156863,.07058823529411765],[.07450980392156863,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.06274509803921569,.07058823529411765,.06666666666666667,.06274509803921569,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.07450980392156863,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.0588235294117647,.06274509803921569,.054901960784313725,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.07450980392156863,.06274509803921569,.30196078431372547,.5098039215686274,.5372549019607843,.6392156862745098,.592156862745098,.6745098039215687,.7921568627450981,.7725490196078433,.6705882352941175,.8666666666666667,.8392156862745098,.7372549019607844,.596078431372549,.5137254901960784,.5333333333333333,.5450980392156862,.5137254901960784,.6196078431372549,.5882352941176471,.6509803921568627,.5607843137254902,.611764705882353,.596078431372549,.5019607843137255,.35294117647058826,.32156862745098036,.2980392156862745,.24313725490196078,.23921568627450981,.2549019607843137,.12941176470588237,.27450980392156865,.22745098039215686,.24705882352941178,.2627450980392157,.39607843137254906,.2,.29411764705882354,.27450980392156865,.08235294117647057,.0784313725490196,.054901960784313725,.09019607843137255,.06666666666666667,.06274509803921569,.07450980392156863,.0784313725490196,.07450980392156863,.09019607843137255,.0588235294117647,.07058823529411765,.0784313725490196,.06274509803921569,.06274509803921569,.07450980392156863,.09411764705882353,.07450980392156863,.054901960784313725,.06666666666666667,.0588235294117647,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.06666666666666667,.07058823529411765,.07058823529411765,.0588235294117647,.06666666666666667,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.07450980392156863,.06666666666666667,.06666666666666667,.06666666666666667,.0588235294117647,.06274509803921569,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.0784313725490196,.054901960784313725,.07058823529411765,.0784313725490196,.07450980392156863,.10588235294117647,.07450980392156863,.054901960784313725,.5176470588235295,.5490196078431373,.7372549019607844,.6196078431372549,.7215686274509804,.8196078431372549,.7568627450980392,.8627450980392157,.7803921568627452,.8274509803921568,.7568627450980392,.6941176470588235,.6235294117647059,.5686274509803921,.5490196078431373,.5372549019607843,.5686274509803921,.5019607843137255,.5450980392156862,.4549019607843137,.5411764705882353,.5882352941176471,.6196078431372549,.47843137254901963,.4392156862745098,.35294117647058826,.3254901960784313,.21176470588235294,.13725490196078433,.2196078431372549,.26666666666666666,.2352941176470588,.2235294117647059,.26666666666666666,.28627450980392155,.29411764705882354,.24313725490196078,.30980392156862746,.26666666666666666,.23921568627450981,.08235294117647057,.06274509803921569,.06274509803921569,.07450980392156863,.0784313725490196,.06274509803921569,.0784313725490196,.08235294117647057,.07450980392156863,.11372549019607843,.12549019607843137,.06274509803921569,.08235294117647057,.0588235294117647,.07450980392156863,.08235294117647057,.0784313725490196,.06666666666666667,.07450980392156863,.09411764705882353,.0784313725490196,.07058823529411765,.07058823529411765,.07450980392156863],[.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.0784313725490196,.06666666666666667,.07058823529411765,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.06274509803921569,.07058823529411765,.07058823529411765,.047058823529411764,.06666666666666667,.0588235294117647,.5725490196078431,.6745098039215687,.5098039215686274,.6705882352941175,.7921568627450981,.8745098039215686,.8901960784313725,.8627450980392157,.8470588235294118,.8549019607843137,.7725490196078433,.6980392156862745,.5607843137254902,.5098039215686274,.4666666666666666,.5137254901960784,.49019607843137253,.6313725490196078,.6313725490196078,.6235294117647059,.43137254901960786,.4823529411764706,.5725490196078431,.5607843137254902,.5176470588235295,.3686274509803922,.36470588235294116,.26666666666666666,.2627450980392157,.2549019607843137,.16862745098039217,.16078431372549018,.20392156862745098,.21176470588235294,.18823529411764706,.3176470588235294,.1568627450980392,.32156862745098036,.33725490196078434,.2352941176470588,.12549019607843137,.10980392156862745,.0784313725490196,.06666666666666667,.0784313725490196,.0784313725490196,.07058823529411765,.09411764705882353,.0784313725490196,.0784313725490196,.06666666666666667,.07450980392156863,.07450980392156863,.0784313725490196,.06666666666666667,.0784313725490196,.07450980392156863,.07058823529411765,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765],[.0784313725490196,.07058823529411765,.06274509803921569,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.054901960784313725,.06666666666666667,.08235294117647057,.07058823529411765,.06274509803921569,.07058823529411765,.10196078431372549,.06666666666666667,.07450980392156863,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.0588235294117647,.050980392156862744,.07058823529411765,.06666666666666667,.0784313725490196,.07058823529411765,.0588235294117647,.054901960784313725,.07450980392156863,.06666666666666667,.06666666666666667,.054901960784313725,.06666666666666667,.07058823529411765,.054901960784313725,.06274509803921569,.06666666666666667,.10196078431372549,.07058823529411765,.054901960784313725,.49411764705882355,.6980392156862745,.6705882352941175,.611764705882353,.6666666666666665,.8431372549019608,.8941176470588236,.9215686274509803,.7843137254901962,.8588235294117647,.8156862745098039,.8470588235294118,.6549019607843136,.5333333333333333,.5098039215686274,.43137254901960786,.4666666666666666,.5215686274509804,.5019607843137255,.5058823529411764,.5450980392156862,.5215686274509804,.5490196078431373,.5843137254901961,.6,.592156862745098,.4196078431372549,.32156862745098036,.19607843137254904,.25882352941176473,.25882352941176473,.12156862745098039,.2196078431372549,.23921568627450981,.1568627450980392,.12941176470588237,.2784313725490196,.23921568627450981,.17647058823529413,.29411764705882354,.1411764705882353,.2549019607843137,.11372549019607843,.09411764705882353,.07450980392156863,.0784313725490196,.0784313725490196,.0588235294117647,.06666666666666667,.07058823529411765,.0784313725490196,.07058823529411765,.06274509803921569,.1176470588235294,.08235294117647057,.08235294117647057,.07450980392156863,.06666666666666667,.07450980392156863,.0784313725490196,.0784313725490196,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765],[.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.07450980392156863,.06666666666666667,.06274509803921569,.08627450980392157,.06274509803921569,.07450980392156863,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.054901960784313725,.07058823529411765,.06274509803921569,.06274509803921569,.06274509803921569,.06274509803921569,.07058823529411765,.06666666666666667,.06666666666666667,.10196078431372549,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.050980392156862744,.06666666666666667,.09411764705882353,.07058823529411765,.06274509803921569,.06666666666666667,.08235294117647057,.10196078431372549,.1843137254901961,.7137254901960784,.7058823529411765,.5254901960784314,.611764705882353,.45098039215686275,.8196078431372549,.8156862745098039,.7843137254901962,.8941176470588236,.8588235294117647,.8431372549019608,.7254901960784313,.5450980392156862,.5215686274509804,.4705882352941176,.5098039215686274,.5607843137254902,.4549019607843137,.4196078431372549,.5764705882352941,.47843137254901963,.4392156862745098,.5450980392156862,.4980392156862745,.5647058823529412,.5764705882352941,.5254901960784314,.26666666666666666,.2235294117647059,.15294117647058825,.2235294117647059,.23137254901960783,.29411764705882354,.25098039215686274,.2352941176470588,.24705882352941178,.19215686274509808,.24313725490196078,.25098039215686274,.2352941176470588,.2,.2784313725490196,.25882352941176473,.10980392156862745,.08235294117647057,.10980392156862745,.0784313725490196,.06274509803921569,.06274509803921569,.07450980392156863,.09803921568627452,.08235294117647057,.09019607843137255,.06666666666666667,.08235294117647057,.07058823529411765,.07450980392156863,.07058823529411765,.0588235294117647,.07450980392156863,.0588235294117647,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863],[.07058823529411765,.06666666666666667,.06666666666666667,.09803921568627452,.06666666666666667,.06274509803921569,.09019607843137255,.07450980392156863,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.054901960784313725,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.0784313725490196,.06666666666666667,.06274509803921569,.06274509803921569,.07058823529411765,.0588235294117647,.06274509803921569,.06666666666666667,.06666666666666667,.050980392156862744,.07058823529411765,.0784313725490196,.06666666666666667,.06666666666666667,.07058823529411765,.07450980392156863,.07058823529411765,.09803921568627452,.6274509803921569,.7529411764705882,.6588235294117646,.611764705882353,.6666666666666665,.6784313725490196,.8156862745098039,.9058823529411765,.9058823529411765,.9058823529411765,.8470588235294118,.7803921568627452,.6901960784313725,.6941176470588235,.5607843137254902,.4823529411764706,.42745098039215684,.4666666666666666,.5725490196078431,.4823529411764706,.43137254901960786,.5137254901960784,.4705882352941176,.4470588235294118,.48627450980392156,.47450980392156855,.5372549019607843,.3764705882352941,.29411764705882354,.16470588235294115,.2784313725490196,.13725490196078433,.2901960784313726,.18823529411764706,.21568627450980393,.22745098039215686,.20392156862745098,.1568627450980392,.34509803921568627,.25882352941176473,.1843137254901961,.2235294117647059,.2196078431372549,.27058823529411763,.20392156862745098,.13333333333333333,.08627450980392157,.07058823529411765,.07058823529411765,.08235294117647057,.050980392156862744,.08627450980392157,.0784313725490196,.06274509803921569,.054901960784313725,.0784313725490196,.0784313725490196,.07058823529411765,.07058823529411765,.12156862745098039,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765],[.06666666666666667,.06666666666666667,.07450980392156863,.07058823529411765,.06666666666666667,.08235294117647057,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.06274509803921569,.09019607843137255,.07058823529411765,.07058823529411765,.06274509803921569,.06274509803921569,.06666666666666667,.06666666666666667,.0588235294117647,.0588235294117647,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.06274509803921569,.07450980392156863,.07058823529411765,.06666666666666667,.06666666666666667,.07450980392156863,.0588235294117647,.06274509803921569,.054901960784313725,.0784313725490196,.06666666666666667,.050980392156862744,.07058823529411765,.07058823529411765,.2352941176470588,.7176470588235294,.7058823529411765,.6078431372549019,.5803921568627451,.6,.8784313725490196,.7803921568627452,.807843137254902,.8352941176470589,.6705882352941175,.6862745098039216,.7333333333333333,.6941176470588235,.46274509803921565,.5098039215686274,.47450980392156855,.4392156862745098,.4588235294117647,.46274509803921565,.4117647058823529,.44313725490196076,.45098039215686275,.4666666666666666,.4117647058823529,.42745098039215684,.5137254901960784,.4196078431372549,.3764705882352941,.3176470588235294,.13725490196078433,.2352941176470588,.16078431372549018,.27450980392156865,.19215686274509808,.27058823529411763,.27058823529411763,.28627450980392155,.08627450980392157,.30980392156862746,.3137254901960784,.19607843137254904,.25098039215686274,.3137254901960784,.22745098039215686,.1803921568627451,.1803921568627451,.06274509803921569,.0588235294117647,.06274509803921569,.07450980392156863,.08627450980392157,.08627450980392157,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.054901960784313725,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06274509803921569,.06666666666666667,.06274509803921569,.07058823529411765,.06666666666666667,.06274509803921569,.10980392156862745,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.07450980392156863,.06274509803921569,.07058823529411765,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.0588235294117647,.09411764705882353,.07058823529411765,.0588235294117647,.6235294117647059,.7294117647058823,.5882352941176471,.6588235294117646,.6039215686274509,.6627450980392156,.8117647058823529,.5803921568627451,.4980392156862745,.5411764705882353,.6549019607843136,.6862745098039216,.596078431372549,.6,.49411764705882355,.4588235294117647,.45098039215686275,.4823529411764706,.40784313725490196,.43137254901960786,.4549019607843137,.39607843137254906,.47843137254901963,.48627450980392156,.4823529411764706,.6705882352941175,.5294117647058824,.4588235294117647,.3294117647058823,.2549019607843137,.1450980392156863,.2,.14901960784313725,.24705882352941178,.2549019607843137,.27058823529411763,.25882352941176473,.27450980392156865,.1176470588235294,.2627450980392157,.3568627450980392,.2549019607843137,.1568627450980392,.2549019607843137,.2549019607843137,.26666666666666666,.26666666666666666,.16470588235294115,.07058823529411765,.0784313725490196,.07450980392156863,.06274509803921569,.0784313725490196,.07450980392156863,.07058823529411765,.07058823529411765,.0588235294117647,.08235294117647057,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.11372549019607843,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.06274509803921569,.0588235294117647,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.054901960784313725,.06274509803921569,.06274509803921569,.0588235294117647,.07058823529411765,.06666666666666667,.10196078431372549,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.08235294117647057,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.11372549019607843,.06274509803921569,.047058823529411764,.07058823529411765,.7098039215686275,.6509803921568627,.6,.6666666666666665,.6039215686274509,.7803921568627452,.7058823529411765,.4549019607843137,.5137254901960784,.45098039215686275,.5176470588235295,.611764705882353,.5843137254901961,.6039215686274509,.4666666666666666,.4588235294117647,.47843137254901963,.4235294117647059,.43137254901960786,.4196078431372549,.44313725490196076,.38431372549019616,.4392156862745098,.4,.48627450980392156,.5372549019607843,.5490196078431373,.4705882352941176,.3921568627450981,.2,.1450980392156863,.20392156862745098,.1411764705882353,.23921568627450981,.30196078431372547,.24313725490196078,.25882352941176473,.2627450980392157,.1411764705882353,.2823529411764706,.3058823529411765,.25098039215686274,.12549019607843137,.27450980392156865,.23137254901960783,.2901960784313726,.1450980392156863,.08627450980392157,.06666666666666667,.07058823529411765,.0784313725490196,.050980392156862744,.06666666666666667,.06666666666666667,.0784313725490196,.06666666666666667,.07058823529411765,.06666666666666667,.07450980392156863,.050980392156862744,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765],[.06666666666666667,.06274509803921569,.06274509803921569,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.0784313725490196,.06666666666666667,.050980392156862744,.08235294117647057,.07058823529411765,.06666666666666667,.06274509803921569,.06666666666666667,.054901960784313725,.06274509803921569,.07450980392156863,.054901960784313725,.06666666666666667,.07058823529411765,.09803921568627452,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06274509803921569,.07058823529411765,.06666666666666667,.06666666666666667,.07450980392156863,.07450980392156863,.06274509803921569,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.07450980392156863,.6,.7490196078431373,.5372549019607843,.6039215686274509,.5607843137254902,.6274509803921569,.7803921568627452,.6274509803921569,.43529411764705883,.4666666666666666,.49019607843137253,.5019607843137255,.5529411764705883,.615686274509804,.5411764705882353,.48627450980392156,.4549019607843137,.49411764705882355,.3607843137254902,.4470588235294118,.41568627450980394,.5058823529411764,.4117647058823529,.3686274509803922,.5725490196078431,.4980392156862745,.6,.592156862745098,.5372549019607843,.4,.23137254901960783,.21568627450980393,.19215686274509808,.14901960784313725,.20784313725490197,.2980392156862745,.2549019607843137,.27058823529411763,.22745098039215686,.10980392156862745,.27450980392156865,.25098039215686274,.25882352941176473,.12941176470588237,.25882352941176473,.24313725490196078,.2196078431372549,.25098039215686274,.16862745098039217,.09019607843137255,.07058823529411765,.06666666666666667,.07450980392156863,.08235294117647057,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.07450980392156863,.06666666666666667,.07450980392156863,.06274509803921569,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.07058823529411765,.06274509803921569,.06666666666666667,.07058823529411765,.06666666666666667,.08235294117647057,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.07450980392156863,.06666666666666667,.07450980392156863,.0588235294117647,.047058823529411764,.054901960784313725,.06666666666666667,.07450980392156863,.06666666666666667,.06274509803921569,.06666666666666667,.054901960784313725,.16470588235294115,.0588235294117647,.054901960784313725,.06666666666666667,.07058823529411765,.0784313725490196,.06666666666666667,.11372549019607843,.6980392156862745,.7333333333333333,.6313725490196078,.6392156862745098,.592156862745098,.7686274509803923,.6823529411764706,.6235294117647059,.3058823529411765,.4470588235294118,.403921568627451,.4823529411764706,.5607843137254902,.6431372549019607,.6666666666666665,.4549019607843137,.45098039215686275,.47843137254901963,.39607843137254906,.4470588235294118,.4470588235294118,.403921568627451,.3176470588235294,.4588235294117647,.5019607843137255,.5686274509803921,.6039215686274509,.5450980392156862,.5215686274509804,.44313725490196076,.27058823529411763,.2,.2,.2,.3137254901960784,.3137254901960784,.30196078431372547,.23137254901960783,.27058823529411763,.12549019607843137,.34901960784313724,.3607843137254902,.2980392156862745,.1843137254901961,.19607843137254904,.17254901960784313,.2627450980392157,.2627450980392157,.21568627450980393,.13333333333333333,.054901960784313725,.09411764705882353,.0784313725490196,.06666666666666667,.07058823529411765,.10588235294117647,.06666666666666667,.07058823529411765,.07450980392156863,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765],[.10588235294117647,.07058823529411765,.06666666666666667,.06666666666666667,.09411764705882353,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.054901960784313725,.06274509803921569,.054901960784313725,.08235294117647057,.06666666666666667,.06666666666666667,.0784313725490196,.09019607843137255,.06666666666666667,.07450980392156863,.07450980392156863,.07058823529411765,.10588235294117647,.07058823529411765,.06274509803921569,.06666666666666667,.07450980392156863,.07058823529411765,.06666666666666667,.0588235294117647,.06274509803921569,.054901960784313725,.06666666666666667,.06274509803921569,.12156862745098039,.06274509803921569,.10196078431372549,.07450980392156863,.7176470588235294,.6980392156862745,.6274509803921569,.5372549019607843,.5372549019607843,.8235294117647058,.9450980392156861,.8705882352941177,.4980392156862745,.4588235294117647,.4823529411764706,.44313725490196076,.5294117647058824,.49019607843137253,.6352941176470588,.611764705882353,.5490196078431373,.5137254901960784,.43529411764705883,.3921568627450981,.2980392156862745,.4666666666666666,.40784313725490196,.4392156862745098,.3411764705882353,.6196078431372549,.5333333333333333,.5686274509803921,.5686274509803921,.5215686274509804,.4196078431372549,.3058823529411765,.21176470588235294,.21176470588235294,.2,.13725490196078433,.2823529411764706,.21568627450980393,.2549019607843137,.16078431372549018,.1450980392156863,.34901960784313724,.3137254901960784,.35294117647058826,.23137254901960783,.18823529411764706,.13725490196078433,.3568627450980392,.2823529411764706,.22745098039215686,.19607843137254904,.0784313725490196,.07058823529411765,.050980392156862744,.06274509803921569,.07450980392156863,.08235294117647057,.06274509803921569,.07450980392156863,.07450980392156863,.07058823529411765,.06666666666666667,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.06274509803921569,.08235294117647057,.07058823529411765,.06274509803921569,.07058823529411765,.06666666666666667,.0784313725490196,.0588235294117647,.07450980392156863,.09803921568627452,.06274509803921569,.07450980392156863,.050980392156862744,.06274509803921569,.047058823529411764,.06274509803921569,.07450980392156863,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.07450980392156863,.06274509803921569,.07058823529411765,.08235294117647057,.054901960784313725,.07058823529411765,.06274509803921569,.08235294117647057,.22745098039215686,.7176470588235294,.6627450980392156,.6,.5803921568627451,.6980392156862745,.8196078431372549,.8666666666666667,.8745098039215686,.592156862745098,.3137254901960784,.3254901960784313,.4549019607843137,.47843137254901963,.5450980392156862,.6862745098039216,.6392156862745098,.615686274509804,.5411764705882353,.46274509803921565,.4705882352941176,.47450980392156855,.47450980392156855,.4196078431372549,.3607843137254902,.4117647058823529,.6235294117647059,.7058823529411765,.6352941176470588,.5333333333333333,.5568627450980392,.25882352941176473,.3176470588235294,.23921568627450981,.17647058823529413,.10588235294117647,.1843137254901961,.29411764705882354,.19607843137254904,.24705882352941178,.22745098039215686,.16862745098039217,.35294117647058826,.4117647058823529,.34509803921568627,.30196078431372547,.19215686274509808,.25098039215686274,.17647058823529413,.1568627450980392,.23137254901960783,.17647058823529413,.08235294117647057,.0784313725490196,.0784313725490196,.06666666666666667,.0784313725490196,.07450980392156863,.07450980392156863,.08627450980392157,.0784313725490196,.07058823529411765,.06274509803921569,.06666666666666667,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.06666666666666667,.06666666666666667,.07058823529411765,.09019607843137255,.06666666666666667,.08627450980392157,.06666666666666667,.06666666666666667,.06666666666666667,.09019607843137255,.06666666666666667,.07450980392156863,.0588235294117647,.050980392156862744,.06274509803921569,.054901960784313725,.10196078431372549,.07058823529411765,.0588235294117647,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.0784313725490196,.07058823529411765,.14901960784313725,.5725490196078431,.7176470588235294,.5529411764705883,.5568627450980392,.6078431372549019,.7450980392156863,.8666666666666667,.8352941176470589,.8274509803921568,.5294117647058824,.3764705882352941,.3607843137254902,.43529411764705883,.4588235294117647,.5882352941176471,.596078431372549,.592156862745098,.5803921568627451,.5411764705882353,.4470588235294118,.42745098039215684,.39607843137254906,.4235294117647059,.39607843137254906,.3882352941176471,.47843137254901963,.5568627450980392,.6705882352941175,.6431372549019607,.5725490196078431,.5647058823529412,.33725490196078434,.27058823529411763,.28627450980392155,.2235294117647059,.19607843137254904,.20392156862745098,.17254901960784313,.20784313725490197,.24705882352941178,.2352941176470588,.2823529411764706,.3764705882352941,.33333333333333326,.34901960784313724,.3254901960784313,.25098039215686274,.20392156862745098,.19607843137254904,.2901960784313726,.24705882352941178,.21176470588235294,.09411764705882353,.08235294117647057,.10196078431372549,.06666666666666667,.07450980392156863,.07450980392156863,.0784313725490196,.09019607843137255,.06666666666666667,.07058823529411765,.07058823529411765,.0784313725490196,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863],[.07058823529411765,.06274509803921569,.050980392156862744,.06274509803921569,.06666666666666667,.06274509803921569,.07058823529411765,.06274509803921569,.07450980392156863,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.054901960784313725,.06666666666666667,.06666666666666667,.06666666666666667,.0784313725490196,.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.18823529411764706,.6392156862745098,.6784313725490196,.6235294117647059,.6274509803921569,.6666666666666665,.8117647058823529,.8705882352941177,.8431372549019608,.6627450980392156,.5647058823529412,.4,.40784313725490196,.3803921568627451,.4980392156862745,.5647058823529412,.5764705882352941,.5450980392156862,.6,.5490196078431373,.4392156862745098,.39607843137254906,.43137254901960786,.4,.3686274509803922,.4,.4588235294117647,.5882352941176471,.615686274509804,.5450980392156862,.6274509803921569,.5098039215686274,.43529411764705883,.28627450980392155,.2823529411764706,.19215686274509808,.1843137254901961,.1176470588235294,.17254901960784313,.2784313725490196,.18823529411764706,.2352941176470588,.2235294117647059,.3607843137254902,.33333333333333326,.3176470588235294,.3568627450980392,.22745098039215686,.20784313725490197,.16862745098039217,.21568627450980393,.2823529411764706,.22745098039215686,.12941176470588237,.07450980392156863,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.08235294117647057,.08235294117647057,.06666666666666667,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.10980392156862745],[.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.054901960784313725,.06274509803921569,.06274509803921569,.054901960784313725,.054901960784313725,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.054901960784313725,.07058823529411765,.06274509803921569,.0784313725490196,.06274509803921569,.047058823529411764,.0588235294117647,.054901960784313725,.06666666666666667,.06666666666666667,.0588235294117647,.13725490196078433,.06666666666666667,.08627450980392157,.06274509803921569,.054901960784313725,.49019607843137253,.6470588235294117,.6392156862745098,.5607843137254902,.5882352941176471,.7843137254901962,.9019607843137255,.8235294117647058,.8823529411764706,.6745098039215687,.5215686274509804,.4549019607843137,.33725490196078434,.34509803921568627,.5137254901960784,.5607843137254902,.6392156862745098,.596078431372549,.5882352941176471,.48627450980392156,.45098039215686275,.3607843137254902,.4235294117647059,.3607843137254902,.25882352941176473,.44313725490196076,.4196078431372549,.5490196078431373,.5803921568627451,.5764705882352941,.6078431372549019,.4705882352941176,.43137254901960786,.2627450980392157,.2980392156862745,.17647058823529413,.16862745098039217,.2627450980392157,.2352941176470588,.16862745098039217,.16862745098039217,.18823529411764706,.2980392156862745,.3254901960784313,.3411764705882353,.3803921568627451,.33333333333333326,.2235294117647059,.19607843137254904,.2352941176470588,.27058823529411763,.1568627450980392,.2,.12156862745098039,.10588235294117647,.07058823529411765,.07058823529411765,.09803921568627452,.07058823529411765,.08235294117647057,.07058823529411765,.0784313725490196,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.09803921568627452,.07058823529411765,.07058823529411765,.07058823529411765],[.06274509803921569,.07450980392156863,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.0784313725490196,.07058823529411765,.0588235294117647,.06274509803921569,.06274509803921569,.054901960784313725,.06274509803921569,.07058823529411765,.0588235294117647,.07058823529411765,.0784313725490196,.06666666666666667,.09803921568627452,.07058823529411765,.07450980392156863,.07058823529411765,.07450980392156863,.0784313725490196,.06274509803921569,.06274509803921569,.06274509803921569,.0784313725490196,.0588235294117647,.07058823529411765,.06666666666666667,.07450980392156863,.09411764705882353,.1176470588235294,.07058823529411765,.28627450980392155,.6431372549019607,.5882352941176471,.6,.6470588235294117,.5490196078431373,.7411764705882353,.9333333333333332,.7921568627450981,.7843137254901962,.592156862745098,.5176470588235295,.3921568627450981,.3411764705882353,.33725490196078434,.4980392156862745,.5725490196078431,.5490196078431373,.6274509803921569,.5254901960784314,.5176470588235295,.4117647058823529,.403921568627451,.40784313725490196,.4392156862745098,.4,.2823529411764706,.4392156862745098,.592156862745098,.6313725490196078,.5372549019607843,.6,.48627450980392156,.3764705882352941,.23137254901960783,.2627450980392157,.2352941176470588,.1411764705882353,.1568627450980392,.1450980392156863,.19607843137254904,.13725490196078433,.17254901960784313,.25882352941176473,.2823529411764706,.25882352941176473,.2549019607843137,.20392156862745098,.30980392156862746,.2352941176470588,.2196078431372549,.29411764705882354,.17647058823529413,.13725490196078433,.10588235294117647,.10196078431372549,.08235294117647057,.08235294117647057,.08235294117647057,.07450980392156863,.07058823529411765,.06274509803921569,.09019607843137255,.07058823529411765,.06666666666666667,.07058823529411765,.0588235294117647,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863],[.07058823529411765,.0784313725490196,.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.06274509803921569,.08235294117647057,.06274509803921569,.06666666666666667,.06666666666666667,.0588235294117647,.06274509803921569,.06274509803921569,.054901960784313725,.07450980392156863,.054901960784313725,.054901960784313725,.1176470588235294,.050980392156862744,.054901960784313725,.0588235294117647,.06666666666666667,.07058823529411765,.06666666666666667,.054901960784313725,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.054901960784313725,.07058823529411765,.07058823529411765,.06274509803921569,.5803921568627451,.6235294117647059,.5450980392156862,.6235294117647059,.6627450980392156,.7215686274509804,.8352941176470589,.8901960784313725,.7568627450980392,.5686274509803921,.615686274509804,.44313725490196076,.4666666666666666,.3254901960784313,.35294117647058826,.43137254901960786,.5882352941176471,.5843137254901961,.6274509803921569,.5843137254901961,.4235294117647059,.39607843137254906,.4549019607843137,.3254901960784313,.3686274509803922,.3803921568627451,.3921568627450981,.4,.5803921568627451,.5686274509803921,.5176470588235295,.5058823529411764,.3882352941176471,.35294117647058826,.3254901960784313,.19215686274509808,.20784313725490197,.16862745098039217,.1411764705882353,.08627450980392157,.20784313725490197,.22745098039215686,.2196078431372549,.12941176470588237,.23137254901960783,.22745098039215686,.24313725490196078,.13333333333333333,.1411764705882353,.1843137254901961,.22745098039215686,.1411764705882353,.2352941176470588,.12156862745098039,.12156862745098039,.07058823529411765,.07450980392156863,.08235294117647057,.1411764705882353,.0588235294117647,.0588235294117647,.07450980392156863,.07058823529411765,.08235294117647057,.07058823529411765,.07058823529411765,.08235294117647057,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765],[.08235294117647057,.07058823529411765,.07058823529411765,.0784313725490196,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06274509803921569,.06666666666666667,.047058823529411764,.06666666666666667,.06274509803921569,.06274509803921569,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.06274509803921569,.054901960784313725,.06666666666666667,.06274509803921569,.06274509803921569,.06274509803921569,.06666666666666667,.07058823529411765,.0588235294117647,.07058823529411765,.06666666666666667,.10196078431372549,.6235294117647059,.5490196078431373,.5803921568627451,.5803921568627451,.6980392156862745,.803921568627451,.8156862745098039,.7960784313725491,.5568627450980392,.6352941176470588,.5647058823529412,.611764705882353,.47843137254901963,.34509803921568627,.3411764705882353,.38431372549019616,.5411764705882353,.5764705882352941,.6039215686274509,.5686274509803921,.3882352941176471,.4196078431372549,.41568627450980394,.37254901960784315,.38431372549019616,.45098039215686275,.36470588235294116,.5254901960784314,.6392156862745098,.615686274509804,.5882352941176471,.5294117647058824,.5254901960784314,.44313725490196076,.32156862745098036,.2980392156862745,.26666666666666666,.17647058823529413,.18823529411764706,.17254901960784313,.14901960784313725,.1843137254901961,.19607843137254904,.1568627450980392,.2196078431372549,.13333333333333333,.15294117647058825,.21568627450980393,.21176470588235294,.23137254901960783,.2235294117647059,.19607843137254904,.2784313725490196,.2235294117647059,.12941176470588237,.10196078431372549,.07058823529411765,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.07450980392156863,.0784313725490196,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.07058823529411765,.07450980392156863,.06666666666666667,.07450980392156863,.07058823529411765],[.07058823529411765,.0588235294117647,.0588235294117647,.0588235294117647,.06666666666666667,.0588235294117647,.10980392156862745,.06274509803921569,.0588235294117647,.0784313725490196,.07450980392156863,.07450980392156863,.0588235294117647,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.054901960784313725,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.0784313725490196,.07450980392156863,.39607843137254906,.615686274509804,.6235294117647059,.5843137254901961,.6627450980392156,.7647058823529411,.6784313725490196,.8,.7686274509803923,.6509803921568627,.6196078431372549,.6039215686274509,.5607843137254902,.4666666666666666,.33333333333333326,.30196078431372547,.32156862745098036,.5058823529411764,.5529411764705883,.596078431372549,.5764705882352941,.4666666666666666,.4392156862745098,.4,.4117647058823529,.35294117647058826,.33725490196078434,.4470588235294118,.43529411764705883,.5450980392156862,.5647058823529412,.6392156862745098,.5372549019607843,.46274509803921565,.3882352941176471,.33333333333333326,.28627450980392155,.21568627450980393,.13725490196078433,.15294117647058825,.1411764705882353,.20392156862745098,.19215686274509808,.2235294117647059,.1803921568627451,.22745098039215686,.1450980392156863,.16470588235294115,.1411764705882353,.16078431372549018,.17254901960784313,.23137254901960783,.19607843137254904,.1450980392156863,.25098039215686274,.09019607843137255,.13333333333333333,.07450980392156863,.07450980392156863,.07058823529411765,.07450980392156863,.07058823529411765,.07058823529411765,.06666666666666667,.0784313725490196,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.07058823529411765,.0784313725490196,.09019607843137255,.07058823529411765],[.08627450980392157,.06666666666666667,.11372549019607843,.06666666666666667,.07450980392156863,.06666666666666667,.06666666666666667,.09019607843137255,.09019607843137255,.07450980392156863,.0588235294117647,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.06274509803921569,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.0784313725490196,.06666666666666667,.07058823529411765,.06666666666666667,.07058823529411765,.07058823529411765,.06666666666666667,.06666666666666667,.07058823529411765,.08627450980392157,.6274509803921569,.592156862745098,.6274509803921569,.5882352941176471,.6980392156862745,.7372549019607844,.8156862745098039,.7137254901960784,.8352941176470589,.5725490196078431,.615686274509804,.6196078431372549,.5450980392156862,.43137254901960786,.403921568627451,.3176470588235294,.3058823529411765,.4117647058823529,.5490196078431373,.5725490196078431,.5764705882352941,.4117647058823529,.4117647058823529,.43137254901960786,.41568627450980394,.41568627450980394,.3137254901960784,.4117647058823529,.41568627450980394,.4705882352941176,.49411764705882355,.5764705882352941,.615686274509804,.4588235294117647,.3568627450980392,.29411764705882354,.2901960784313726,.1176470588235294,.15294117647058825,.1411764705882353,.1411764705882353,.16470588235294115,.17647058823529413,.22745098039215686,.2549019607843137,.2196078431372549,.2549019607843137,.25098039215686274,.21176470588235294,.12941176470588237,.1568627450980392,.16470588235294115,.27450980392156865,.3058823529411765,.27450980392156865,.10980392156862745,.20392156862745098,.06666666666666667,.06274509803921569,.07450980392156863,.06666666666666667,.09803921568627452,.06666666666666667,.07450980392156863,.08627450980392157,.07450980392156863,.07058823529411765,.06666666666666667,.07450980392156863,.07058823529411765,.08235294117647057,.0784313725490196,.06666666666666667],[.07058823529411765,.07058823529411765,.07058823529411765,.06666666666666667,.09411764705882353,.09803921568627452,.06274509803921569,.07058823529411765,.06274509803921569,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07058823529411765,.050980392156862744,.08627450980392157,.07058823529411765,.06666666666666667,.06274509803921569,.07058823529411765,.06666666666666667,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.07450980392156863,.0784313725490196,.07058823529411765,.09019607843137255,.12941176470588237,.49019607843137253,.5803921568627451,.596078431372549,.6078431372549019,.7764705882352942,.8,.7529411764705882,.7529411764705882,.6862745098039216,.6627450980392156,.6862745098039216,.5411764705882353,.5411764705882353,.4392156862745098,.38431372549019616,.32156862745098036,.2980392156862745,.34901960784313724,.48627450980392156,.6078431372549019,.5450980392156862,.4980392156862745,.4235294117647059,.40784313725490196,.4235294117647059,.3294117647058823,.3411764705882353,.37254901960784315,.4117647058823529,.5568627450980392,.43529411764705883,.4470588235294118,.3921568627450981,.27058823529411763,.2823529411764706,.3294117647058823,.2823529411764706,.1803921568627451,.12941176470588237,.12156862745098039,.1568627450980392,.14901960784313725,.18823529411764706,.25098039215686274,.26666666666666666,.17647058823529413,.1568627450980392,.15294117647058825,.17647058823529413,.16078431372549018,.13333333333333333,.21176470588235294,.16470588235294115,.2627450980392157,.17647058823529413,.13725490196078433,.2549019607843137,.07450980392156863,.0588235294117647,.0784313725490196,.07058823529411765,.06666666666666667,.07450980392156863,.07450980392156863,.08627450980392157,.07058823529411765,.07058823529411765,.08235294117647057,.07450980392156863,.0588235294117647,.06666666666666667,.08627450980392157,.07450980392156863],[.14901960784313725,.07058823529411765,.06274509803921569,.07058823529411765,.07058823529411765,.09411764705882353,.06274509803921569,.08235294117647057,.10980392156862745,.06666666666666667,.08235294117647057,.07058823529411765,.06274509803921569,.0588235294117647,.06666666666666667,.10196078431372549,.047058823529411764,.06666666666666667,.09019607843137255,.06666666666666667,.0784313725490196,.07058823529411765,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.06666666666666667,.08235294117647057,.06274509803921569,.06666666666666667,.08235294117647057,.5490196078431373,.5450980392156862,.596078431372549,.592156862745098,.6862745098039216,.7686274509803923,.7372549019607844,.7725490196078433,.7490196078431373,.592156862745098,.5843137254901961,.6196078431372549,.5529411764705883,.5647058823529412,.3921568627450981,.39607843137254906,.2901960784313726,.27058823529411763,.3294117647058823,.5529411764705883,.5529411764705883,.592156862745098,.4980392156862745,.40784313725490196,.4549019607843137,.40784313725490196,.38431372549019616,.3568627450980392,.3294117647058823,.403921568627451,.5058823529411764,.5137254901960784,.5137254901960784,.4196078431372549,.35294117647058826,.27450980392156865,.2823529411764706,.17254901960784313,.16078431372549018,.14901960784313725,.20784313725490197,.21568627450980393,.1450980392156863,.1568627450980392,.16470588235294115,.13725490196078433,.21176470588235294,.1450980392156863,.1411764705882353,.10196078431372549,.16078431372549018,.1843137254901961,.14901960784313725,.2,.22745098039215686,.15294117647058825,.16470588235294115,.12549019607843137,.08235294117647057,.07058823529411765,.07058823529411765,.07450980392156863,.06274509803921569,.07450980392156863,.0784313725490196,.06274509803921569,.0784313725490196,.08627450980392157,.07058823529411765,.050980392156862744,.07058823529411765,.0784313725490196,.07450980392156863,.07450980392156863],[.047058823529411764,.0784313725490196,.1411764705882353,.0784313725490196,.10588235294117647,.0588235294117647,.0784313725490196,.07450980392156863,.07058823529411765,.06666666666666667,.10980392156862745,.06666666666666667,.0588235294117647,.10588235294117647,.07058823529411765,.050980392156862744,.07450980392156863,.08235294117647057,.06274509803921569,.07450980392156863,.07058823529411765,.07450980392156863,.06666666666666667,.06666666666666667,.06274509803921569,.06666666666666667,.06666666666666667,.0588235294117647,.06666666666666667,.06274509803921569,.0588235294117647,.0784313725490196,.2,.5372549019607843,.5725490196078431,.5019607843137255,.5333333333333333,.6588235294117646,.6980392156862745,.7215686274509804,.7058823529411765,.6745098039215687,.5333333333333333,.5254901960784314,.5058823529411764,.47450980392156855,.3921568627450981,.4117647058823529,.3686274509803922,.3058823529411765,.2901960784313726,.3254901960784313,.42745098039215684,.4588235294117647,.4705882352941176,.46274509803921565,.47843137254901963,.3921568627450981,.4235294117647059,.3294117647058823,.3411764705882353,.3803921568627451,.5529411764705883,.5725490196078431,.5058823529411764,.4588235294117647,.4588235294117647,.35294117647058826,.2627450980392157,.27058823529411763,.20392156862745098,.12156862745098039,.1176470588235294,.1450980392156863,.1450980392156863,.12156862745098039,.12941176470588237,.16470588235294115,.15294117647058825,.10588235294117647,.12156862745098039,.1176470588235294,.12156862745098039,.12549019607843137,.10980392156862745,.11372549019607843,.24705882352941178,.2235294117647059,.20392156862745098,.1568627450980392,.12941176470588237,.07450980392156863,.07450980392156863,.07450980392156863,.0784313725490196,.0588235294117647,.08235294117647057,.06274509803921569,.10588235294117647,.06666666666666667,.054901960784313725,.07058823529411765,.0588235294117647,.08627450980392157,.07058823529411765,.10980392156862745,.09411764705882353]]},"./src/components/emitter/index.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{BoxShapeEmitter:()=>n.default,CircleShapeEmitter:()=>c.default,ConeShapeEmitter:()=>s.default,DrawShapeEmitter:()=>i.default,PointShapeEmitter:()=>o.default,SphereShapeEmitter:()=>a.default});var n=r("./src/components/emitter/BoxShapeEmitter.ts"),o=r("./src/components/emitter/PointShapeEmitter.ts"),i=r("./src/components/emitter/DrawShapeEmitter.ts"),a=r("./src/components/emitter/SphereShapeEmitter.ts"),s=r("./src/components/emitter/ConeShapeEmitter.ts"),c=r("./src/components/emitter/CircleShapeEmitter.ts")},"./src/components/gizmo/CapsuleGizmo.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{CapsuleGizmoSchema:()=>m,default:()=>v});var n,o=r("./src/core/Component.ts"),i=r("./src/components/Mesh.ts"),a=r("./src/assets/Material.ts"),s=r("./src/math/matrix4.ts"),c=r("./src/math/vector3.ts"),u=r("./src/math/quaternion.ts"),l=r("./src/components/physics/CapsuleShape.ts"),f=r("./src/math/utils.ts"),p=r("./src/gizmo/capsule.ts"),d=r("./src/elements/xr-shadow.ts"),h=r("./src/components/Transform.ts"),_=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),m={};const v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.subElements=[],t.transforms=[],t}return _(t,e),t.prototype.onAdd=function(e,t){this.buildMesh(t),this.updateTransform(t),this.setUniforms()},t.prototype.onUpdate=function(e,t){this.updateTransform(e),this.setUniforms()},t.prototype.onTick=function(e,t){},t.prototype.onRemove=function(e,t){this.gizmo=null,this.scene.gizmo.removeGizmo(this)},t.prototype.onRelease=function(e){},t.prototype.buildMesh=function(e){this.gizmo=(0,p.getCapsuleGizmo)(this.scene);var r=this.gizmo.getGeometry(),n=new a.default(this.scene);n.initByEffect(this.scene.assets.getAsset("effect","gizmo"));for(var o={geometry:r,material:n,neverCull:!0},s=this.scene.gizmo.addGizmo(this),c=0;c<t.pieces;c++){var u=this.scene.createElement(d.default);this.subElements.push(u),s.addChild(u),u.addComponent(i.default,o)}this.transformUniformBuffer||this.initTransforms(this.gizmo.transformCount)},t.prototype.updateTransform=function(e){var r,n,o=this.transforms[0],i=this.transforms[1],a=e.radius,c=.5*Math.max(e.height-2*e.radius,0);o.position.setValue(0,c,0),o.scale.setValue(a,a,a),i.rotation.setValue(0,0,0,1),i.position.setValue(0,-c,0),i.scale.setValue(a,a,a),i.rotation.setValue(0,0,1,0),s.default.composeTQS(o.position,o.rotation,o.scale,this.transformUniformMatrices[0]),s.default.composeTQS(i.position,i.rotation,i.scale,this.transformUniformMatrices[1]),e.direction===l.ECapsuleShapeDirection["X-Axis"]?(r=s.default.createRotationZ(.5*Math.PI),n=[180,0,0]):e.direction===l.ECapsuleShapeDirection["Y-Axis"]?(r=s.default.IDENTITY,n=[0,180,0]):e.direction===l.ECapsuleShapeDirection["Z-Axis"]&&(r=s.default.createRotationX(.5*Math.PI),n=[0,0,180]);for(var u=0;u<this.transformUniformMatrices.length;u++)f.m4Helper.multiply(r._raw,r._offset,this.transformUniformBuffer,16*u,this.transformUniformBuffer,16*u);for(u=0;u<t.pieces;u++)this.subElements[u].getComponent(h.default).setData({rotation:[n[0]/t.pieces*u,n[1]/t.pieces*u,n[2]/t.pieces*u],position:e.center})},t.prototype.setUniforms=function(){var e=this;this.subElements.forEach((function(t){var r=t.getComponent(i.default);r&&r.material._setUniform("u_gizmoTransformMatrices",e.transformUniformBuffer)}))},t.prototype.initTransforms=function(e){this.transformUniformBuffer=new Float32Array(16*e),this.transformUniformMatrices=[];for(var t=0;t<e;t++)this.transforms.push({position:c.default.ZERO.clone(),rotation:u.default.DEFAULT.clone(),scale:c.default.ZERO.clone()}),this.transformUniformMatrices.push(new s.default(this.transformUniformBuffer,16*t))},t.pieces=3,t}(o.default)},"./src/components/gizmo/CubeGizmo.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{CubeGizmoSchema:()=>f,default:()=>p});var n,o=r("./src/core/Component.ts"),i=r("./src/components/Mesh.ts"),a=r("./src/assets/Material.ts"),s=r("./src/gizmo/cube.ts"),c=r("./src/elements/xr-shadow.ts"),u=r("./src/components/Transform.ts"),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f={};const p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.subElement=null,t}return l(t,e),t.prototype.onAdd=function(e,t){this.buildMesh(t),this.updateTransform(t)},t.prototype.onUpdate=function(e,t){this.updateTransform(e)},t.prototype.onTick=function(e,t){},t.prototype.onRemove=function(e,t){this.gizmo=null,this.releaseSubElement()},t.prototype.onRelease=function(e){},t.prototype.releaseSubElement=function(){this.subElement=null,this.scene.gizmo.removeGizmo(this)},t.prototype.buildMesh=function(e){this.gizmo=(0,s.getCubeGizmo)(this.scene);var t=this.gizmo.getGeometry(),r=new a.default(this.scene);r.initByEffect(this.scene.assets.getAsset("effect","gizmo")),r._setUniform("u_gizmoTransformMatrices",this.gizmo.getTransformUniformBuffer());var n={geometry:t,material:r,neverCull:!0};this.releaseSubElement();var o=this.scene.gizmo.addGizmo(this);this.subElement=this.scene.createElement(c.default),o.addChild(this.subElement),this.subElement.addComponent(i.default,n)},t.prototype.updateTransform=function(e){if(this.subElement){var t=this.subElement.getComponent(u.default);t.scale.setArray(e.size),t.position.setArray(e.center)}},t}(o.default)},"./src/components/gizmo/ShapeGizmos.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ShapeGizmosSchema:()=>p,default:()=>d});var n,o=r("./src/core/Component.ts"),i=r("./src/components/gizmo/CapsuleGizmo.ts"),a=r("./src/components/physics/CapsuleShape.ts"),s=r("./src/components/physics/CubeShape.ts"),c=r("./src/components/Transform.ts"),u=r("./src/components/physics/Shape.ts"),l=r("./src/components/gizmo/CubeGizmo.ts"),f=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),p={};const d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subElements=[],t}return f(t,e),t.prototype.onAdd=function(e,t){},t.prototype.onUpdate=function(e,t){},t.prototype.onTick=function(e,t){for(var r=this.findAllShapes(),n=function(e){var t=r[e];if(t.version>0){var n=o._subElements.find((function(e){return e.shape===t}));if(n){var i=n.version;t.version>i&&(o.buildGizmo(n),n.version=t.version)}else{var a={shape:t,gizmoCtor:null,shadowGizmos:[],type:u.ShapeImplType.None,version:-1};o.buildGizmo(a),o._subElements.push(a)}}},o=this,i=0;i<r.length;i++)n(i);for(i=this._subElements.length-1;i>=0;i--){var a=this._subElements[i];-1===r.lastIndexOf(a.shape)&&this._subElements.splice(i,1)}},t.prototype.onRemove=function(e,t){},t.prototype.onRelease=function(e){for(var t=0;t<this._subElements.length;t++){var r=this._subElements[t];r.gizmoCtor&&this.el.removeComponent(r.gizmoCtor),this.releaseShadowGizmos(r.shadowGizmos)}},t.prototype.findAllShapes=function(){var e=[],t=this.el.getComponent(a.default),r=this.el.getComponent(s.default);return t&&e.push(t),r&&e.push(r),e},t.prototype.getGizmoDesc=function(e){if(e.type===u.EShapeType.Capsule){var t=(n=e).center,r=n.el.getComponent(c.default).worldScale;return[{radius:n.radius,height:n.height,direction:n.direction,center:t.scaleXYZ(1/r.x,1/r.y,1/r.z).toArray()},i.default]}if(e.type===u.EShapeType.Cube){var n;t=(n=e).center,r=n.el.getComponent(c.default).worldScale;return[{size:n.size.toArray(),center:t.scaleXYZ(1/r.x,1/r.y,1/r.z).toArray()},l.default]}throw"[ShapeGizmos] unsupported shape."},t.prototype.buildGizmo=function(e){var r=e.shape;if(r.implType===u.ShapeImplType.Basic||r.implType===u.ShapeImplType.AttachedToMesh){var n=this.getGizmoDesc(r),o=n[0],i=n[1];if(e.type!==u.ShapeImplType.Basic&&e.type!==u.ShapeImplType.AttachedToMesh)this.releaseShadowGizmos(e.shadowGizmos),e.shadowGizmos=[],e.gizmoCtor=i,this.el.addComponent(i,o),e.type=r.implType;else{var a=this.el.getComponent(i);if(!a)throw"[ShapeGizmos] no gizmo found at sub element.";a.setData(o)}}else if(r.implType===u.ShapeImplType.GLTFMultiple){e.gizmoCtor&&(this.el.removeComponent(e.gizmoCtor),e.gizmoCtor=null),e.type=r.implType,this.releaseShadowGizmos(e.shadowGizmos),e.shadowGizmos=[];for(var s=r.shadowShapes,c=0;c<s.length;c++){var l=s[c];e.shadowGizmos.push(l.el.addComponent(t))}}},t.prototype.releaseShadowGizmos=function(e){for(var r=0;r<e.length;r++){var n=e[r];n.el&&n.el.removeComponent(t)}},t}(o.default)},"./src/components/index.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ARTrackSchema:()=>i.ARTrackSchema,ARTracker:()=>i.default,Animator:()=>o.default,AnimatorSchema:()=>o.AnimatorSchema,AssetLoad:()=>a.default,AssetLoadSchema:()=>a.AssetLoadSchema,AssetMaterial:()=>d.default,AssetMaterialSchema:()=>d.AssetMaterialSchema,AssetPostProcess:()=>C.default,AssetRenderTexture:()=>w.default,AssetRenderTextureSchema:()=>w.AssetRenderTextureSchema,Assets:()=>s.default,AssetsSchema:()=>s.AssetsSchema,Camera:()=>c.default,CameraOrbitControl:()=>u.default,CameraOrbitControlSchema:()=>u.CameraOrbitControlSchema,CameraSchema:()=>c.CameraSchema,CapsuleShape:()=>v.default,CapsuleShapeSchema:()=>v.CapsuleShapeSchema,CubeShape:()=>b.default,CubeShapeSchema:()=>b.CubeShapeSchema,EARTrackerState:()=>i.EARTrackerState,ECapsuleShapeDirection:()=>v.ECapsuleShapeDirection,EShapeType:()=>O.EShapeType,Env:()=>l.default,EnvSchema:()=>l.EnvSchema,GLTF:()=>f.default,GLTFSchema:()=>f.GLTFSchema,IARTrackerData:()=>i.IARTrackerData,IARTrackerRawData:()=>i.IARTrackerRawData,IAnimationPlayOptions:()=>o.IAnimationPlayOptions,IAnimatorAutoPlay:()=>o.IAnimatorAutoPlay,IAnimatorData:()=>o.IAnimatorData,IAssetMaterialData:()=>d.IAssetMaterialData,IAssetPostProcessData:()=>C.IAssetPostProcessData,IAssetRenderTextureData:()=>w.IAssetRenderTextureData,IAssetsData:()=>s.IAssetsData,ICameraData:()=>c.ICameraData,ICameraOrbitControlData:()=>u.ICameraOrbitControlData,ICapsuleShapeData:()=>v.ICapsuleShapeData,ICubeShapeData:()=>b.ICubeShapeData,IEnvData:()=>l.IEnvData,IGLTFData:()=>f.IGLTFData,ILightData:()=>p.ILightData,IMeshData:()=>h.IMeshData,IMeshShapeData:()=>y.IMeshShapeData,IParticleData:()=>A.IParticleData,IShapeData:()=>O.IShapeData,IShapeGizmosData:()=>S.IShapeGizmosData,ISphereShapeData:()=>g.ISphereShapeData,ITextData:()=>_.ITextData,ITransformData:()=>x.ITransformData,Light:()=>p.default,LightSchema:()=>p.LightSchema,Mesh:()=>h.default,MeshSchema:()=>h.MeshSchema,MeshShape:()=>y.default,MeshShapeSchema:()=>y.MeshShapeSchema,Particle:()=>m.default,ParticleSchema:()=>A.ParticleSchema,Shape:()=>O.default,ShapeGizmos:()=>S.default,SphereShape:()=>g.default,SphereShapeSchema:()=>g.SphereShapeSchema,TCameraBackground:()=>c.TCameraBackground,TTrackMode:()=>i.TTrackMode,Text:()=>_.default,TextSchema:()=>_.TextSchema,Transform:()=>x.default,TransformSchema:()=>x.TransformSchema});var n=r("./src/core/Component.ts"),o=r("./src/components/Animator.ts"),i=r("./src/components/ARTracker.ts"),a=r("./src/components/AssetLoad.ts"),s=r("./src/components/Assets.ts"),c=r("./src/components/Camera.ts"),u=r("./src/components/CameraOrbitControl.ts"),l=r("./src/components/Env.ts"),f=r("./src/components/GLTF.ts"),p=r("./src/components/Light.ts"),d=r("./src/components/AssetMaterial.ts"),h=r("./src/components/Mesh.ts"),_=r("./src/components/Text.ts"),m=r("./src/components/particle/Particle.ts"),v=r("./src/components/physics/CapsuleShape.ts"),y=r("./src/components/physics/MeshShape.ts"),g=r("./src/components/physics/SphereShape.ts"),b=r("./src/components/physics/CubeShape.ts"),w=r("./src/components/AssetRenderTexture.ts"),x=r("./src/components/Transform.ts"),S=r("./src/components/gizmo/ShapeGizmos.ts"),E=r("./src/components/gizmo/CapsuleGizmo.ts"),T=r("./src/components/gizmo/CubeGizmo.ts"),C=r("./src/components/AssetPostProcess.ts"),A=r("./src/components/particle/BasicParticle.ts"),O=r("./src/components/physics/Shape.ts");(0,n.registerComponent)("transform",x.default),(0,n.registerComponent)("asset-material",d.default),(0,n.registerComponent)("mesh",h.default),(0,n.registerComponent)("text",_.default),(0,n.registerComponent)("particle",m.default),(0,n.registerComponent)("camera",c.default),(0,n.registerComponent)("light",p.default),(0,n.registerComponent)("asset-render-texture",w.default),(0,n.registerComponent)("assets",s.default),(0,n.registerComponent)("asset-load",a.default),(0,n.registerComponent)("gltf",f.default),(0,n.registerComponent)("env",l.default),(0,n.registerComponent)("animator",o.default),(0,n.registerComponent)("camera-orbit-control",u.default),(0,n.registerComponent)("ar-tracker",i.default),(0,n.registerComponent)("asset-post-process",C.default),(0,n.registerComponent)("sphere-shape",g.default),(0,n.registerComponent)("mesh-shape",y.default),(0,n.registerComponent)("capsule-shape",v.default),(0,n.registerComponent)("cube-shape",b.default),(0,n.registerComponent)("shape-gizmo",S.default),(0,n.registerComponent)("capsule-gizmo",E.default),(0,n.registerComponent)("cube-gizmo",T.default)},"./src/components/particle/BasicParticle.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{BillBoardMode:()=>o,ParticleSchema:()=>m,default:()=>v});var n,o,i=r("./src/core/Component.ts"),a=r("./src/components/emitter/index.ts"),s=r("./src/ext.ts"),c=r("./src/components/Transform.ts"),u=r("./src/math/vector3.ts"),l=r("./src/components/particle/Particle.ts"),f=r("./src/components/emitter/SubEmitter.ts"),p=r("./src/core/logger.ts"),d=r("./src/math/vector4.ts"),h=r("./src/components/particle/gradient.ts"),_=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),m={neverCull:{type:"boolean",defaultValue:!1},renderMode:{type:"string",defaultValue:"default"},uniforms:{type:"map"},states:{type:"map"},texture:{type:"texture"},capacity:{type:"number"},emitRate:{type:"number"},angle:{type:"number-array"},delay:{type:"number"},gravity:{type:"number"},emitterPosition:{type:"number-array"},size:{type:"number-array"},scaleX:{type:"number-array"},scaleY:{type:"number-array"},speed:{type:"number-array"},lifeTime:{type:"number-array"},startColor:{type:"number-array"},startColor2:{type:"number-array"},endColor:{type:"number-array"},angularSpeed:{type:"number-array"},emitterType:{type:"string"},emitterProps:{type:"map"},stopDuration:{type:"number"},callbackParameter:{type:"map"},prewarmCycles:{type:"number"},speedDampen:{type:"number",defaultValue:0},atlas:{type:"atlas"},atlasSpeed:{type:"number",defaultValue:1},atlasRandom:{type:"boolean"},atlasLoop:{type:"boolean",defaultValue:!0},atlasFrames:{type:"array"},mesh:{type:"geometry"},sizeChange:{type:"map"},colorChange:{type:"map"},speedChange:{type:"map"},burstCount:{type:"number"},burstTime:{type:"number"},burstCycle:{type:"number"},burstInterval:{type:"number"}};!function(e){e[e.BILLBOARDMODE_DEFAULT=0]="BILLBOARDMODE_DEFAULT",e[e.BILLBOARDMODE_Y=1]="BILLBOARDMODE_Y",e[e.BILLBOARDMODE_STRETCHED=2]="BILLBOARDMODE_STRETCHED"}(o||(o={}));const v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=m,t._instances=new Array,t._stockInstances=new Array,t._capacity=1,t._delay=0,t._updateSpeed=.01,t._stopDuration=0,t._emitRate=10,t._gravity=0,t._preWarmCycles=0,t._preWarmStepOffset=5,t._particleEmitter=null,t._burstCount=0,t._burstTime=0,t._burstCycle=-1,t._burstInterval=1,t._burstCountTime=0,t._burstCountCycle=0,t._burstCountInterval=0,t._minLifeTime=1,t._maxLifeTime=1,t._minScaleX=1,t._maxScaleX=1,t._minScaleY=1,t._maxScaleY=1,t._minSize=.3,t._maxSize=.3,t._minSpeed=1,t._maxSpeed=1,t._particleLengthScale=1,t._startColor=[1,1,1,1],t._startColor2=null,t._endColor=null,t._useSpriteSheet=!1,t._startSpriteCellIndex=0,t._endSpriteCellIndex=0,t._useRandomSpriteCellIndex=!1,t._useSpriteCellLoop=!0,t._spriteChangeSpeed=1,t._textureData=null,t._atlasObj=null,t._renderMesh=null,t._indexSize=0,t._vertexSize=0,t._useBillboard=!0,t._useRenderMesh=!1,t._billboardMode=o.BILLBOARDMODE_DEFAULT,t._useRampGradients=!1,t._vertexLayoutDirty=!1,t._startAngle=0,t._startAngle2=0,t._minAngularSpeed=0,t._maxAngularSpeed=0,t._subEmitters=null,t._emitterPosition=u.default.createFromNumber(0,0,0),t}return _(t,e),Object.defineProperty(t.prototype,"material",{get:function(){return this._material},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_visible",{set:function(e){var t;null===(t=this._cull)||void 0===t||t.setActive(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useBillboard",{get:function(){return this._useBillboard},set:function(e){this.useBillboard!=e&&(this._useBillboard=e,this._vertexLayoutDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useRampGradients",{get:function(){return this._useRampGradients},set:function(e){this._useRampGradients!=e&&(this._useRampGradients=e,this._vertexLayoutDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"billboardMode",{get:function(){return this._billboardMode},set:function(e){this._billboardMode!=e&&(this._billboardMode=e,this._vertexLayoutDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useSpriteSheet",{get:function(){return this._useSpriteSheet},set:function(e){this._useSpriteSheet!=e&&(this._useSpriteSheet=e,this._vertexLayoutDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useRandomSpriteCellIndex",{get:function(){return this._useRandomSpriteCellIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useSpriteCellLoop",{get:function(){return this._useSpriteCellLoop},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spriteChangeSpeed",{get:function(){return this._spriteChangeSpeed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emitterPosition",{get:function(){return this._emitterPosition},set:function(e){this._emitterPosition=e},enumerable:!1,configurable:!0}),t.prototype._parseAttribute=function(){this.ParticleAttributes=[],this.ParticleAttributes.push({name:"a_position",format:2,offset:0,usage:1},{name:"a_texCoord",format:1,offset:12,usage:4},{name:"a_offset",format:2,offset:20,usage:0},{name:"a_color",format:3,offset:32,usage:7},{name:"a_angle",format:0,offset:48,usage:0});var e=52;this._useBillboard&&this._billboardMode==o.BILLBOARDMODE_STRETCHED&&(this.ParticleAttributes.push({name:"a_direction",format:2,offset:e,usage:0}),e+=12,this.ParticleAttributes.push({name:"a_lengthScale",format:0,offset:e,usage:0}),e+=4),this._useRampGradients&&(this.ParticleAttributes.push({name:"a_rampPos",format:3,offset:e,usage:0}),e+=16),this.useSpriteSheet&&(this.ParticleAttributes.push({name:"a_cellPosition",format:3,offset:e,usage:0}),e+=16),this.particleStride=e,this.byteStride=4,this.particleVertexSize=this.particleStride/this.byteStride},t.prototype.clone=function(){var e=new l.default,t={};for(var r in this._data)t[r]=this._data[r];return e.data=t,e.particleEl=this.particleEl,e.particleScene=this.particleScene,e},t.prototype.createSubEmitter=function(e){var t=new l.default;for(var r in t.data={},t.particleEl=this.particleEl,t.particleScene=this.particleScene,e)t.data[r]=e[r];return new f.SubEmitter(t)},t.prototype.createPointEmitter=function(e,t){var r=new a.PointShapeEmitter;return r.direction=e,r.direction2=t,this._particleEmitter=r,this._particleEmitterType="PointShape",r},t.prototype.createBoxEmitter=function(e,t,r,n){var o=new a.BoxShapeEmitter;return o.direction=e,o.direction2=t,o.minEmitBox=r,o.maxEmitBox=n,this._particleEmitter=o,this._particleEmitterType="BoxShape",o},t.prototype.createSphereEmitter=function(e,t,r,n){var o=new a.SphereShapeEmitter;return o.radius=e,o.radiusRange=t,o.arc=r,o.randomizeDirection=n,this._particleEmitter=o,this._particleEmitterType="SphereShape",o},t.prototype._parseProperties=function(e){var t,r=this,n=!1;for(var i in e){var a=e[i];switch(i){case"capacity":this._capacity=a;break;case"renderMode":switch(a){case"off":this.useBillboard=!1;break;case"default":this.useBillboard=!0,this.billboardMode=o.BILLBOARDMODE_DEFAULT;break;case"y":this.useBillboard=!0,this.billboardMode=o.BILLBOARDMODE_Y;break;case"stretched":this.useBillboard=!0,this.billboardMode=o.BILLBOARDMODE_STRETCHED;break;case"mesh":this.useBillboard=!1,this._useRenderMesh=!0}break;case"mesh":if(null==a)break;this._renderMesh=a,this._vertexCount=this._renderMesh._getRawVertexBuffer().byteLength/this._renderMesh.vertexLayout.stride;break;case"delay":this._delay=a;break;case"burstCount":this._burstCount=a;break;case"burstTime":this._burstTime=a;break;case"burstCycle":this._burstCycle=a;break;case"burstInterval":this._burstInterval=a;break;case"stopDuration":this._stopDuration=a;break;case"updateSpeed":this._updateSpeed=a;break;case"emitRate":this._emitRate=a;break;case"gravity":this._gravity=a;break;case"prewarmCycles":this._preWarmCycles=a;break;case"particleLengthScale":this._particleLengthScale=a;break;case"speedDampen":this._speedDampenFactor=a;break;case"texture":if(null==a)break;this._textureData=a;break;case"atlas":if(null==a)break;this._useSpriteSheet=!0,this._startSpriteCellIndex=0;var s=0;this._spriteFrameInfo=new Array,this._spriteNameToCellIndex=new Map;var c=a;for(var i in this._atlasObj=c,this._atlasTexture=c.texture,c.frames)this._spriteNameToCellIndex.set(i,s),this._spriteFrameInfo.push(c.getUVST(i)),s++;this._endSpriteCellIndex=s;break;case"atlasFrames":n=!0,t=a;break;case"atlasLoop":this._useSpriteCellLoop=a;break;case"atlasSpeed":this._spriteChangeSpeed=a;break;case"atlasRandom":this._useRandomSpriteCellIndex=a;break;case"angle":this._startAngle=this._startAngle2=a[0],a[1]&&(this._startAngle2=a[1]);break;case"lifeTime":this._minLifeTime=this._maxLifeTime=a[0],a[1]&&(this._maxLifeTime=a[1]);break;case"scaleX":this._minScaleX=this._maxScaleX=a[0],a[1]&&(this._maxScaleX=a[1]);break;case"scaleY":this._minScaleY=this._maxScaleY=a[0],a[1]&&(this._maxScaleY=a[1]);break;case"size":this._minSize=this._maxSize=a[0],a[1]&&(this._maxSize=a[1]);break;case"speed":this._minSpeed=this._maxSpeed=a[0],a[1]&&(this._maxSpeed=a[1]);break;case"angularSpeed":this._minAngularSpeed=this._maxAngularSpeed=a[0],a[1]&&(this._maxAngularSpeed=a[1]);break;case"emitterType":this._particleEmitterType=a;break;case"emitterProps":this._particleEmitterProperties=a;break;case"emitterPosition":this._emitterPosition.x=a[0],this._emitterPosition.y=a[1],this._emitterPosition.z=a[2];break;case"startColor":for(var u=0;u<4;u++)this._startColor[u]=a[u];break;case"sizeChange":a.forEach((function(e){var t=e[0],n=e[1];r.addSizeGradient(parseFloat(t),parseFloat(n))}));break;case"speedChange":a.forEach((function(e){var t=e[0],n=e[1];r.addSpeedScaleGradient(parseFloat(t),parseFloat(n))}));break;case"colorChange":a.forEach((function(e){var t=e[0],n=e[1].split(" ");r.addColorGradient(parseFloat(t),d.default.createFromNumber(parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])))}));break;case"startColor2":this._startColor2=this._startColor2||[0,0,0,0];for(u=0;u<4;u++)this._startColor2[u]=a[u];break;case"endColor":this._endColor=this._endColor||[0,0,0,0];for(u=0;u<4;u++)this._endColor[u]=a[u]}}if(n)if(this._atlasObj){s=0;for(var l in this._startSpriteCellIndex=0,this._spriteFrameInfo=new Array,this._spriteNameToCellIndex=new Map,this._atlasObj.frames)t.forEach((function(e,t){l==e&&(r._spriteNameToCellIndex.set(l,s),r._spriteFrameInfo.push(r._atlasObj.getUVST(l)),s++)}));this._endSpriteCellIndex=s}else p.default.log("未取得图集信息")},t.prototype._chooseEmitterProcess=function(){if(null==this._particleEmitter){if(this._particleEmitterType)switch(this._particleEmitterType){case"BoxShape":this._particleEmitter=new a.BoxShapeEmitter;break;case"PointShape":this._particleEmitter=new a.PointShapeEmitter;break;case"DrawShape":this._particleEmitter=new a.DrawShapeEmitter;break;case"SphereShape":this._particleEmitter=new a.SphereShapeEmitter;break;case"ConeShape":this._particleEmitter=new a.ConeShapeEmitter;break;case"CircleShape":this._particleEmitter=new a.CircleShapeEmitter}else this._particleEmitter=new a.PointShapeEmitter;this._particleEmitter.setProperty(this._particleEmitterProperties)}},t.prototype._createVertexBuffers=function(){if(this._useRenderMesh){var e=this._renderMesh.getVertexLayout().stride,t=this._renderMesh._getRawVertexBuffer().byteLength/e;this._vertexSize=this._capacity*t}else this._vertexSize=4*this._capacity;this._vertexData=new Float32Array(this.particleVertexSize*this._vertexSize),this._vertexBuffer=new((0,s.getKanata)(this.particleScene).VertexBuffer)(this._vertexData,this._getVertexLayout(this.ParticleAttributes,this.particleStride))},t.prototype._createIndexBuffer=function(){if(this._useRenderMesh){var e=this._renderMesh._getRawIndiceBuffer();this._indexBuffer=new((0,s.getKanata)(this.particleScene).IndexBuffer)(e,!1),this._eachIndexSize=e.byteLength/2,this._indexSize=this._capacity*this._eachIndexSize;for(var t=new Uint16Array(this._indexSize),r=0;r<this._capacity;r++)for(var n=r*this._eachIndexSize,o=0;o<this._eachIndexSize;o++)t[n+o]=e[o]+r*this._vertexCount;this._indexBuffer=new((0,s.getKanata)(this.particleScene).IndexBuffer)(t,!1)}else{this._indexSize=6*this._capacity;for(t=new Uint16Array(this._indexSize),r=0;r<this._capacity;r++)t[6*r]=4*r,t[6*r+1]=4*r+1,t[6*r+2]=4*r+2,t[6*r+3]=4*r,t[6*r+4]=4*r+2,t[6*r+5]=4*r+3;this._indexBuffer=new((0,s.getKanata)(this.particleScene).IndexBuffer)(t,!1)}},t.prototype._appendParticleVertices=function(e,t){if(void 0===t&&(t=null),this._useRenderMesh)for(var r=this._renderMesh._getRawVertexBuffer(),n=this._renderMesh.vertexLayout,o=n.stride,i=0;i<this._vertexCount;i++){var a=n.getConfigByName("a_texCoord"),s=o/4,c=i*s+n.getConfigByName("a_position").offset/4,u=i*s+a.offset/4;this._appendParticleVertex(e++,t,r[c+0],r[c+1],r[c+2],r[u+0],r[u+1])}else this._appendParticleVertex(e++,t,-1,-1,0,0,1),this._appendParticleVertex(e++,t,1,-1,0,1,1),this._appendParticleVertex(e++,t,1,1,0,1,0),this._appendParticleVertex(e++,t,-1,1,0,0,0)},t.prototype._appendParticleVertex=function(e,t,r,n,i,a,s){var c=e*this.particleVertexSize;if(this._vertexData[c++]=t.position.x,this._vertexData[c++]=t.position.y,this._vertexData[c++]=t.position.z,this._vertexData[c++]=a,this._vertexData[c++]=s,this._vertexData[c++]=r*t.size*t.scale.x,this._vertexData[c++]=n*t.size*t.scale.y,this._vertexData[c++]=i*t.size,this._vertexData[c++]=t.color.x,this._vertexData[c++]=t.color.y,this._vertexData[c++]=t.color.z,this._vertexData[c++]=t.color.w,this._vertexData[c++]=t.angle*Math.PI/180,this._useBillboard&&this._billboardMode==o.BILLBOARDMODE_STRETCHED&&(this._vertexData[c++]=t.direction.x,this._vertexData[c++]=t.direction.y,this._vertexData[c++]=t.direction.z,this._vertexData[c++]=this._particleLengthScale),this._useRampGradients&&(this._vertexData[c++]=t.rampPos.x,this._vertexData[c++]=t.rampPos.y,this._vertexData[c++]=0,this._vertexData[c++]=1),this.useSpriteSheet){var u=~~t.cellIndex;this._vertexData[c++]=this._spriteFrameInfo[u].z,this._vertexData[c++]=this._spriteFrameInfo[u].w,this._vertexData[c++]=this._spriteFrameInfo[u].x,this._vertexData[c++]=this._spriteFrameInfo[u].y}},t.prototype._rebuildMesh=function(e){var t=this.particleEl.getComponent(c.default);this._trs=t,this._cull||(this._cull=new((0,s.getKanata)(this.particleScene).CullingComponent)(t.node),this._cull.bindEntity(t.node)),this._mesh=new((0,s.getKanata)(this.particleScene).MeshRendererComponent)(t.node,{meshCount:this._renderMesh?this._renderMesh.getSubMeshCount():1,renderType:this._getMeshType(),uniformBlock:new((0,s.getKanata)(this.particleScene).UniformBlock)(this._getUniformDesc()),culling:e?void 0:this._cull,macros:{}})},t.prototype._getUniformDesc=function(){return this.particleScene.assets.getAsset("uniform-desc","mesh-static")},t.prototype._getMeshType=function(){return s.Kanata.EMeshRenderType.Static3D},t.prototype._getVertexLayout=function(e,t){var r=this.particleScene._requestTmpObj("builtin-particle-vertex-layouts");return r["particle"+this._systemId]&&!this._vertexLayoutDirty||(r["particle"+this._systemId]=this.particleScene.createVertexLayout({attributes:e,stride:t})),r["particle"+this._systemId]},t.prototype._setMeshData=function(e,t,r){if(t||r?this._sourceMaterial===e&&this._sourceMaterial!==this._material||(this._material=e.clone()):this._material=e,this._textureData&&this._material.setTexture("u_baseColorMap",this._textureData),this._atlasTexture&&this._material.setTexture("u_baseColorMap",this._atlasTexture),this._useRampGradients&&this._rampGradientsTexture&&this._material.setTexture("u_rampColorMap",this._rampGradientsTexture),this.useSpriteSheet?this._material.setMacro("WX_SPRITESHEET",!0):this._material.setMacro("WX_SPRITESHEET",!1),this._useRenderMesh?this._material.setMacro("WX_RENDERMESH",!0):this._material.setMacro("WX_RENDERMESH",!1),this._useBillboard)switch(this._material.setMacros({WX_BILLBOARD:!0}),this._billboardMode){case o.BILLBOARDMODE_Y:this._material.setMacros({WX_BILLBOARDMODE_Y:!0});break;case o.BILLBOARDMODE_STRETCHED:this._material.setMacros({WX_BILLBOARDMODE_STRETCHED:!0});break;case o.BILLBOARDMODE_DEFAULT:this._material.setMacros({WX_BILLBOARDMODE_DEFAULT:!0})}else this._material.setMacro("WX_BILLBOARD",!1),this._material.setMacro("WX_BILLBOARDMODE_Y",!1),this._material.setMacro("WX_BILLBOARDMODE_STRETCHED",!1),this._material.setMacro("WX_BILLBOARDMODE_DEFAULT",!1);t&&this._material._parseUniforms(t),r&&this._material._parseRenderStates(r),this._sourceMaterial=e,this._useRenderMesh?(this._mesh.setVertexBuffer(0,this._vertexBuffer),this._mesh.setIndexBuffer(0,this._indexBuffer),this._mesh.setStartIndex(0,0),this._mesh.setNumIndices(0,this._instances.length*this._eachIndexSize),this._mesh.setMaterial(0,this._material.kanataMaterial)):(this._mesh.setVertexBuffer(0,this._vertexBuffer),this._mesh.setIndexBuffer(0,this._indexBuffer),this._mesh.setStartIndex(0,0),this._mesh.setNumIndices(0,6*this._instances.length),this._mesh.setMaterial(0,this._material.kanataMaterial))},t.prototype.addColorGradient=function(e,t,r){this._colorGradients||(this._colorGradients=[]);var n=new h.ColorGradient(e,t,r);this._colorGradients.push(n),this._colorGradients.sort((function(e,t){return e.gradient<t.gradient?-1:e.gradient>t.gradient?1:0}))},t.prototype.addSpeedScaleGradient=function(e,t,r){this._speedScaleGradients||(this._speedScaleGradients=[]),this.addFactorGradient(this._speedScaleGradients,e,t,r)},t.prototype.addLimitSpeedGradient=function(e,t,r){this._limitSpeedGradients||(this._limitSpeedGradients=[]),this.addFactorGradient(this._limitSpeedGradients,e,t,r)},t.prototype.addDragGradient=function(e,t,r){this._dragGradients||(this._dragGradients=[]),this.addFactorGradient(this._dragGradients,e,t,r)},t.prototype.addAlphaGradient=function(e,t,r){this._alphaGradients||(this._alphaGradients=[]),this.addFactorGradient(this._alphaGradients,e,t,r)},t.prototype.addSizeGradient=function(e,t,r){this._sizeGradients||(this._sizeGradients=[]),this.addFactorGradient(this._sizeGradients,e,t,r)},t.prototype.addColorRemapGradient=function(e,t,r){this._colorRemapGradients||(this._colorRemapGradients=[]),this.addFactorGradient(this._colorRemapGradients,e,t,r)},t.prototype.addFactorGradient=function(e,t,r,n){var o=new h.FactorGradient(t,r,n);e.push(o),e.sort((function(e,t){return e.gradient<t.gradient?-1:e.gradient>t.gradient?1:0}))},t.prototype.addRampGradient=function(e,t){this._rampGradients||(this._rampGradients=[]);var r=new h.Color3Gradient(e,t);this._rampGradients.push(r),this._rampGradients.sort((function(e,t){return e.gradient<t.gradient?-1:e.gradient>t.gradient?1:0})),this.createRampGradientTexture()},t.prototype.createRampGradientTexture=function(){for(var e,t=this,r=new Uint8Array(1024),n=function(n){var o=n/256;h.BasicGradientMethod.GetCurrentGradient(o,t._rampGradients,(function(t,o,i){e=t.color.lerp(o.color,i),r[4*n]=255*e.x,r[4*n+1]=255*e.y,r[4*n+2]=255*e.z,r[4*n+3]=255}))},o=0;o<256;o++)n(o);this._rampGradientsTexture=this.particleScene.createTexture({width:256,height:1,source:[r],pixelFormat:s.Kanata.ETextureFormat.RGBA8})},t.prototype.lerpNumberArrayToVector=function(e,t,r,n,o){void 0===o&&(o=4);for(var i=new Array(o),a=0;a<o;a++)i[a]=t[a]+(r[a]-t[a])*n;e.setValue.apply(e,i)},t.count=0,t}(i.default)},"./src/components/particle/Particle.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n,o=r("./src/assets/Material.ts"),i=r("./src/math/vector3.ts"),a=r("./src/math/vector4.ts"),s=r("./src/math/matrix4.ts"),c=r("./src/math/utils.ts"),u=r("./src/components/particle/BasicParticle.ts"),l=r("./src/components/particle/gradient.ts"),f=r("./src/components/emitter/SubEmitter.ts"),p=r("./src/components/particle/ParticleInstance.ts"),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=300,t.subEmitters=null,t._start=!1,t._stop=!1,t._alive=!1,t._actualFrame=0,t._excessInstance=0,t._tempEndColor=a.default.createFromNumber(0,0,0,0),t._tempDiffColor=a.default.createFromNumber(0,0,0,0),t._tempAccColorStep=a.default.createFromNumber(0,0,0,0),t}return d(t,e),Object.defineProperty(t.prototype,"material",{get:function(){return this._material},set:function(e){this._mesh},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._mesh.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"particleEmitter",{get:function(){return this._particleEmitter},enumerable:!1,configurable:!0}),t.prototype.start=function(e){var t=this;if(e)setTimeout((function(){t.start(0)}),e);else if(this._start=!0,this._stop=!1,this._preWarmCycles)for(var r=0;r<this._preWarmCycles;r++)this._updateRenderData(0,!0)},t.prototype.stop=function(){this._stop||(this.el.event.trigger("stop"),this._stop=!0,this.stopSubEmitters())},t.prototype.onAdd=function(e,t){this._mesh||(this.particleEl=this.el,this.particleScene=this.el.scene,this._data=t,this.initParticle(this._data),this._prepareSubEmitterArray(),this.start(this._delay))},t.prototype.createMaterial=function(){var e=null;return(e=new o.default(this.particleScene)).initByEffect(this.particleScene.assets.getAsset("effect","particle")),e},t.prototype.initParticle=function(e){this._systemId=t.count++,this._parseProperties(e),this._parseAttribute(),this._createVertexBuffers(),this._createIndexBuffer(),this._chooseEmitterProcess(),this._rebuildMesh(e.neverCull),this._setMeshData(this.createMaterial(),e.uniforms,e.states)},t.prototype.resetParticle=function(){this._stockInstances.length=0,this._instances.length=0,this._updateRenderData(0),this._setMeshData(this._material)},t.prototype._prepareSubEmitterArray=function(){var e=this;this._subEmitters=[],this.subEmitters&&this.subEmitters.forEach((function(r){r instanceof t?e._subEmitters.push([new f.SubEmitter(r)]):r instanceof f.SubEmitter?e._subEmitters.push([r]):r instanceof Array&&e._subEmitters.push(r)})),this._subEmitters&&0!=this._subEmitters.length&&(this._activeSubEmitterSystem=new Array)},t.prototype.stopSubEmitters=function(){this._activeSubEmitterSystem&&(this._activeSubEmitterSystem.forEach((function(e){e.stop()})),this._activeSubEmitterSystem=new Array)},t.prototype.removeFromRoot=function(){if(this._rootEmitterSystem){var e=this._rootEmitterSystem._activeSubEmitterSystem.indexOf(this);-1!==e&&this._rootEmitterSystem._activeSubEmitterSystem.splice(e,1),this._rootEmitterSystem=null}},t.prototype.onTick=function(e,t){var r,n,o;this._trs&&(null===(r=this._cull)||void 0===r||r.setActive(this._trs.visible),null===(n=this._cull)||void 0===n||n.setLayer(this._trs.layer)),this._updateSpeed=e/1e3,this._vertexLayoutDirty?this.onUpdate(t,null):(this._updateRenderData(e),this._setMeshData(this._material,t.uniforms)),null===(o=this._material)||void 0===o||o._checkTextures(e)},t.prototype.onUpdate=function(e,t){this._mesh&&(this._vertexLayoutDirty?(this.resetParticle(),this._parseAttribute(),this._createVertexBuffers(),this._setMeshData(this._material,e.uniforms),this._vertexLayoutDirty=!1):(this.resetParticle(),this.initParticle(e)))},t.prototype.onRemove=function(e,t){var r;null===(r=this._cull)||void 0===r||r.setActive(!1)},t.prototype.onRelease=function(e){this._mesh.destroy(),this._cull.destroy(),this._mesh=void 0,this._cull=void 0},t.prototype._updateRenderData=function(e,t){if(void 0===t&&(t=!1),this._start){var r,n=this._emitRate,o=this._updateSpeed*(t?this._preWarmStepOffset:1);if(r=n*o>>0,this._excessInstance+=n*o-r,this._excessInstance>1&&(r+=this._excessInstance>>0,this._excessInstance-=this._excessInstance>>0),this._burstCount>0){var i=!1,a=!1;this._burstCountTime<this._burstTime?this._burstCountTime+=this._updateSpeed:a=!0,a&&(this._burstInterval<.01?this._burstInterval>=0&&(r+=this._burstCount,this._burstInterval=-1):(this._burstCountInterval+=this._updateSpeed,this._burstCountInterval>this._burstInterval&&(i=!0,this._burstCountInterval=0))),i&&-1!=this._burstCycle&&(this._burstCountCycle>=this._burstCycle>>0?i=!1:this._burstCountCycle++),i&&(r+=this._burstCount>>0)}if(this._alive=!1,this._stop?r=0:(this._actualFrame+=o,this._stopDuration&&this._actualFrame>=this._stopDuration&&this.stop()),this.update(r),this._stop&&(this._alive||(this._start=!1,this.resetParticle(),this.removeFromRoot())),!t){for(var s=0,c=0;c<this._instances.length;c++){var u=this._instances[c];this._appendParticleVertices(s,u),this._useRenderMesh?s+=this._vertexCount:s+=4,u.subEmitterMuster&&u.subEmitterMuster.length>0&&u.subEmitterMuster.forEach((function(t){t.particleSystem.onTick(e,t.particleSystem.data)}))}this._activeSubEmitterSystem&&this._activeSubEmitterSystem.length>0&&this._activeSubEmitterSystem.forEach((function(t){t.onTick(e,t.data)})),this._vertexBuffer&&(this._useRenderMesh?this._vertexBuffer.update(this._vertexData.subarray(0,this._instances.length*this._vertexCount*this.particleStride),0):this._vertexBuffer.update(this._vertexData.subarray(0,this._instances.length*this.particleStride),0))}}},t.prototype.createParticle=function(){var e;if(0!==this._stockInstances.length?(e=this._stockInstances.pop()).reset():e=new p.default(this),this._subEmitters&&this._subEmitters.length>0){var t=this._subEmitters[Math.floor(Math.random()*this._subEmitters.length)];e.subEmitterMuster=[],t.forEach((function(t){if(t.state==f.SubEmitterState.ATTACH){var r=t.clone();e.subEmitterMuster.push(r),r.particleSystem.start()}}))}return e},t.prototype.particleSubEmitter=function(e){var t=this;if(this._subEmitters&&0!=this._subEmitters.length){var r=Math.floor(Math.random()*this._subEmitters.length);this._subEmitters[r].forEach((function(r){if(r.state==f.SubEmitterState.END){var n=r.clone();n.particleSystem._rootEmitterSystem=t,n.particleSystem.emitterPosition=e.position.clone(),t._activeSubEmitterSystem.push(n.particleSystem),n.particleSystem.start()}}))}},t.prototype.recycleParticle=function(e){var t=this._instances.pop();t!==e&&t.copyTo(e),this._stockInstances.push(t)},t.prototype.update=function(e){var t=this;if(this._alive=this._instances.length>0,this._alive||!this._stop){var r,n=this._emitterPosition;this._emitterWorldMatrix=s.default.IDENTITY.translate(n.x,n.y,n.z),this._emitterWorldMatrix.inverse(this._emitterInverseWorldMatrix);for(var o=function(e){if(t._instances.length===t._capacity)return"break";r=t.createParticle(),t._instances.push(r),t.initInstanceProperty(r)},i=0;i<e;i++){if("break"===o())break}this.updateInstanceProperty(this._instances)}},t.prototype.initInstanceProperty=function(e){var t,r;if(e.lifeTime=(0,c.randomBetween)(this._minLifeTime,this._maxLifeTime),this._useRampGradients&&(e.rampPos=a.default.createFromNumber(0,1,0,1)),this._particleEmitter.startPosition(this._emitterWorldMatrix,e.position),e.angularSpeed=(0,c.randomBetween)(this._minAngularSpeed,this._maxAngularSpeed),e.angle=(0,c.randomBetween)(this._startAngle,this._startAngle2),e.speed=(0,c.randomBetween)(this._minSpeed,this._maxSpeed),this._particleEmitter.startDirection(this._emitterWorldMatrix,e.direction,e.position),this._colorGradients&&this._colorGradients.length>0)e.currentColorGradient=this._colorGradients[0],e.currentColorGradient.getColor(e.currentColor),e.color=e.currentColor.clone(),this._colorGradients.length>1?this._colorGradients[1].getColor(e.currentColor2):e.currentColor2=e.currentColor.clone();else{var n,o,i=Math.random();n=null!==(t=this._startColor2)&&void 0!==t?t:this._startColor,o=null!==(r=this._endColor)&&void 0!==r?r:this._startColor,this.lerpNumberArrayToVector(e.color,this._startColor,n,i),this.lerpNumberArrayToVector(this._tempEndColor,o,o,i),this._tempEndColor.sub(e.color,this._tempDiffColor),this._tempDiffColor.scale(1/e.lifeTime,e.colorStep)}this._alphaGradients&&this._alphaGradients.length>0&&(e.currentAlphaGradient=this._alphaGradients[0],e.currentAlpha=e.currentAlphaGradient.getFactor(),e.color.w=e.currentAlpha,this._alphaGradients.length>1?e.currentAlpha2=this._alphaGradients[1].getFactor():e.currentAlpha2=e.currentAlpha),this._speedScaleGradients&&this._speedScaleGradients.length>0&&(e.currentSpeedScaleGradient=this._speedScaleGradients[0],e.currentSpeedScale=e.currentSpeedScaleGradient.getFactor(),this._speedScaleGradients.length>1?e.currentSpeedScale2=this._speedScaleGradients[1].getFactor():e.currentSpeedScale2=e.currentSpeedScale),this._limitSpeedGradients&&this._limitSpeedGradients.length>0&&(e.currentLimitSpeedGradient=this._limitSpeedGradients[0],e.currentLimitSpeed=e.currentLimitSpeedGradient.getFactor(),this._limitSpeedGradients.length>1?e.currentLimitSpeed2=this._limitSpeedGradients[1].getFactor():e.currentLimitSpeed2=e.currentLimitSpeed),this._dragGradients&&this._dragGradients.length>0&&(e.currentDragGradient=this._dragGradients[0],e.currentDrag=e.currentDragGradient.getFactor(),this._dragGradients.length>1?e.currentDrag2=this._dragGradients[1].getFactor():e.currentDrag2=e.currentDrag),e.scale.setValue((0,c.randomBetween)(this._minScaleX,this._maxScaleX),(0,c.randomBetween)(this._minScaleY,this._maxScaleY)),this._sizeGradients&&this._sizeGradients.length>0?(e.currentSizeGradient=this._sizeGradients[0],e.currentSize=e.currentSizeGradient.getFactor(),e.sizeGradientFactor=e.currentSize,e.startSize=(0,c.randomBetween)(this._minSize,this._maxSize),e.size=e.startSize*e.sizeGradientFactor,this._sizeGradients.length>1?e.currentSize2=this._sizeGradients[1].getFactor():e.currentSize2=e.currentSize):e.size=(0,c.randomBetween)(this._minSize,this._maxSize),this.useSpriteSheet&&(e.startSpriteCellIndex=this._startSpriteCellIndex,e.endSpriteCellIndex=this._endSpriteCellIndex)},t.prototype.updateInstanceProperty=function(e){for(var t,r=this,n=function(n){var o=e[n],i=r._updateSpeed,a=o.age;if(o.age+=r._updateSpeed,o.age>o.lifeTime){var s=o.age-a;i=(o.lifeTime-a)*i/s,o.age=o.lifeTime}r.processInstance(o),r._particleEmitter.processInstance&&r._particleEmitter.processInstance(o,r._updateSpeed),o.subEmitterMuster&&o.subEmitterMuster.forEach((function(e){e.particleSystem.emitterPosition=o.position.clone()})),r.useSpriteSheet&&o.updateCellIndex(),o.age>=o.lifeTime&&(r.particleSubEmitter(o),o.subEmitterMuster&&(o.subEmitterMuster.forEach((function(e){e.particleSystem.stop()})),o.subEmitterMuster=null),r.recycleParticle(o),n--),t=n},o=0;o<e.length;o++)n(o),o=t},t.prototype.processInstance=function(e){var t=this,r=e.age/e.lifeTime,n=this._updateSpeed;this._useRampGradients&&this._colorRemapGradients&&this._colorRemapGradients.length>0&&l.BasicGradientMethod.GetCurrentGradient(r,this._colorRemapGradients,(function(t,r,n){var o=t.factor+(r.factor-t.factor)*n,i=t.factor2+(r.factor2-t.factor2)*n;e.rampPos.x=o,e.rampPos.y=i-o})),this._colorGradients&&this._colorGradients.length>0?l.BasicGradientMethod.GetCurrentGradient(r,this._colorGradients,(function(t,r,n){e.currentColorGradient!=t&&(e.currentColor=e.currentColor2.clone(),r.getColor(e.currentColor2),e.currentColorGradient=t),e.color.x=e.currentColor.x+(e.currentColor2.x-e.currentColor.x)*n,e.color.y=e.currentColor.y+(e.currentColor2.y-e.currentColor.y)*n,e.color.z=e.currentColor.z+(e.currentColor2.z-e.currentColor.z)*n,e.color.w=e.currentColor.w+(e.currentColor2.w-e.currentColor.w)*n})):(e.colorStep.scale(n,this._tempAccColorStep),e.color.add(this._tempAccColorStep,e.color),e.color.w<0&&(e.color.w=0),e.color.w>1&&(e.color.w=1)),this._alphaGradients&&this._alphaGradients.length>0&&l.BasicGradientMethod.GetCurrentGradient(r,this._alphaGradients,(function(t,r,n){e.currentAlphaGradient!=t&&(e.currentAlpha=e.currentAlpha2,e.currentAlpha2=r.getFactor(),e.currentAlphaGradient=t),e.color.w=e.currentAlpha+(e.currentAlpha2-e.currentAlpha)*n}));var o=e.speed;this._speedScaleGradients&&this._speedScaleGradients.length>0&&l.BasicGradientMethod.GetCurrentGradient(r,this._speedScaleGradients,(function(t,r,n){e.currentSpeedScaleGradient!=t&&(e.currentSpeedScale=e.currentSpeedScale2,e.currentSpeedScale=r.getFactor(),e.currentSpeedScaleGradient=t);var i=e.currentSpeedScale+(e.currentSpeedScale2-e.currentSpeedScale)*n;o*=i})),this._limitSpeedGradients&&this._limitSpeedGradients.length>0&&l.BasicGradientMethod.GetCurrentGradient(r,this._limitSpeedGradients,(function(r,n,i){e.currentLimitSpeedGradient!=r&&(e.currentLimitSpeed=e.currentSpeedScale2,e.currentLimitSpeed=n.getFactor(),e.currentLimitSpeedGradient=r);var a=e.currentLimitSpeed+(e.currentLimitSpeed2-e.currentLimitSpeed)*i;Math.abs(e.speed)>a&&(o*=1-t._speedDampenFactor)})),this._dragGradients&&this._dragGradients.length>0&&l.BasicGradientMethod.GetCurrentGradient(r,this._dragGradients,(function(t,r,n){e.currentDragGradient!=t&&(e.currentDrag=e.currentSpeedScale2,e.currentDrag=r.getFactor(),e.currentDragGradient=t),e.drag=e.currentDrag+(e.currentDrag2-e.currentDrag)*n}));var a=e.direction.scale(o*(1-e.drag));e.angle+=e.angularSpeed*n;var s=i.default.createFromNumber(0,-1*this._gravity,0),c=a.add(s).scale(n);e.position.add(c,e.position),this._sizeGradients&&this._sizeGradients.length>0&&l.BasicGradientMethod.GetCurrentGradient(r,this._sizeGradients,(function(t,r,n){e.currentSizeGradient!=t&&(e.currentSize=e.currentSize2,e.currentSize2=r.getFactor(),e.currentSizeGradient=t),e.sizeGradientFactor=e.currentSize+(e.currentSize2-e.currentSize)*n,e.size=e.startSize*e.sizeGradientFactor}))},t}(u.default)},"./src/components/particle/ParticleInstance.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r("./src/math/vector2.ts"),o=r("./src/math/vector3.ts"),i=r("./src/math/vector4.ts");const a=function(){function e(t){this.cellIndex=0,this.particleSystem=t,this.position=o.default.createFromNumber(0,0,0),this.direction=o.default.createFromNumber(0,0,0),this.speed=0,this.color=i.default.createFromNumber(0,0,0,0),this.colorStep=i.default.createFromNumber(0,0,0,0),this.rampPos=i.default.createFromNumber(0,0,0,1),this.currentSize=0,this.currentSize2=0,this.currentColor=i.default.createFromNumber(0,0,0,0),this.currentColor2=i.default.createFromNumber(0,0,0,1),this.currentAlpha=0,this.currentAlpha2=0,this.startSpriteCellIndex=0,this.endSpriteCellIndex=0,this.lifeTime=1,this.age=0,this.drag=0,this.size=1,this.startSize=1,this.sizeGradientFactor=1,this.scale=n.default.createFromNumber(0,0),this.angle=0,this.angularSpeed=0,this.id=e.count++}return e.prototype.reset=function(){this.age=0,this.id=e.count++,this.randomCellOffset=void 0,this.cellIndex=this.startSpriteCellIndex},e.prototype.copyTo=function(e){e.position.set(this.position),e.direction.set(this.direction),e.color.set(this.color),e.colorStep.set(this.colorStep),e.rampPos.set(this.rampPos),e.speed=this.speed,e.lifeTime=this.lifeTime,e.size=this.size,e.scale.set(this.scale),e.angle=this.angle,e.angularSpeed=this.angularSpeed,e.particleSystem=this.particleSystem,e.id=this.id,e.age=this.age,e.subEmitterMuster=this.subEmitterMuster,this.currentColorGradient&&(e.currentColorGradient=this.currentColorGradient,e.currentColor=this.currentColor.clone(),e.currentColor2=this.currentColor2.clone()),this.currentSizeGradient&&(e.currentSizeGradient=this.currentSizeGradient,e.currentSize=this.currentSize,e.currentSize2=this.currentSize2),this.currentAlphaGradient&&(e.currentAlphaGradient=this.currentAlphaGradient,e.currentAlpha=this.currentAlpha,e.currentAlpha2=this.currentAlpha2),this.currentSpeedScaleGradient&&(e.currentSpeedScaleGradient=this.currentSpeedScaleGradient,e.currentSpeedScale=this.currentSpeedScale,e.currentSpeedScale2=this.currentSpeedScale2),this.currentLimitSpeedGradient&&(e.currentLimitSpeedGradient=this.currentLimitSpeedGradient,e.currentLimitSpeed=this.currentLimitSpeed,e.currentLimitSpeed2=this.currentLimitSpeed2),this.currentDragGradient&&(e.currentDragGradient=this.currentDragGradient,e.currentDrag=this.currentDrag,e.currentDrag2=this.currentDrag2),this.particleSystem.useSpriteCellLoop&&(e.randomCellOffset=this.randomCellOffset,e.startSpriteCellIndex=this.startSpriteCellIndex,e.endSpriteCellIndex=this.endSpriteCellIndex)},e.prototype.updateCellIndex=function(){var e,t=this.age,r=this.particleSystem.spriteChangeSpeed;this.particleSystem.useRandomSpriteCellIndex&&(null==this.randomCellOffset&&(this.randomCellOffset=Math.random()*this.lifeTime),0==r?(r=1,t=this.randomCellOffset):t+=this.randomCellOffset);var n=this.endSpriteCellIndex-this.startSpriteCellIndex;e=this.particleSystem.useSpriteCellLoop?this.clamp(t*r%this.lifeTime/this.lifeTime):this.clamp(t*r/this.lifeTime),this.cellIndex=this.startSpriteCellIndex+e*n|0},e.prototype.clamp=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),e<t?t:e>r?r:e},e.count=0,e}()},"./src/components/particle/gradient.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{BasicGradientMethod:()=>a,Color3Gradient:()=>o,ColorGradient:()=>n,FactorGradient:()=>i});var n=function(){function e(e,t,r){this.gradient=e,this.color=t,this.color2=r}return e.prototype.getColor=function(e){if(!this.color2)return e.x=this.color.x,e.y=this.color.y,e.z=this.color.z,void(e.w=this.color.w);var t=Math.random();e.x=this.color.x+(this.color2.x-this.color.x)*t,e.y=this.color.y+(this.color2.y-this.color.y)*t,e.z=this.color.z+(this.color2.z-this.color.z)*t,e.w=this.color.w+(this.color2.w-this.color.w)*t},e}(),o=function(e,t){this.gradient=e,this.color=t},i=function(){function e(e,t,r){this.gradient=e,this.factor=t,this.factor2=r}return e.prototype.getFactor=function(){return this.factor2&&this.factor2!=this.factor?this.factor+(this.factor2-this.factor)*Math.random():this.factor},e}(),a=function(){function e(){}return e.GetCurrentGradient=function(e,t,r){if(t[0].graident>e)r(t[0],t[0],1);else{for(var n=t.length-1,o=0;o<n;o++){var i=t[o],a=t[o+1];if(e>=i.gradient&&e<=a.gradient)return void r(i,a,(e-i.gradient)/(a.gradient-i.gradient))}r(t[n],t[n],1)}},e}()},"./src/components/physics/CapsuleShape.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{CapsuleShapeSchema:()=>h,ECapsuleShapeDirection:()=>o,default:()=>_});var n,o,i=r("./src/physics/utils.ts"),a=r("./src/components/physics/Shape.ts"),s=r("./src/math/vector3.ts"),c=r("./src/ext.ts"),u=r("./src/core/logger.ts"),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=function(){return f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},f.apply(this,arguments)},p=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},d=(0,i.genProxy)("_nativeCollider"),h=f(f({},a.ShapeSchema),{radius:{type:"number"},height:{type:"number"},direction:{type:"number"}});!function(e){e[e["X-Axis"]=0]="X-Axis",e[e["Y-Axis"]=1]="Y-Axis",e[e["Z-Axis"]=2]="Z-Axis"}(o||(o={}));const _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=h,t._type=a.EShapeType.Capsule,t}return l(t,e),Object.defineProperty(t.prototype,"center",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),t.prototype._createBasic=function(e){var r,n,i;this._nativeColliders.push(new((0,c.getKanata)(this.scene).Phys3D.CapsuleCollider)(this.scene.physics.nativeSystem,e.center?s.default.createFromArray(e.center).toPhysics():s.default.ZERO.toPhysics(),null!==(r=e.height)&&void 0!==r?r:t.defaultHeight,null!==(n=e.radius)&&void 0!==n?n:t.defaultRadius)),this._nativeColliders[0].direction=null!==(i=e.direction)&&void 0!==i?i:o["Y-Axis"],this._nativeColliders[0].height=this._nativeColliders[0].height,this._baseInit()},t.prototype._createAttachedToMesh=function(e,t){u.default.assert(e.autoFit,"capsule attached to mesh, autoFit is false.");var r=f({},e);this.autoFit(r,t),this._createBasic(r)},t.prototype._createGLTFMultiple=function(e,t){var r=this;u.default.assert(e.autoFit,"capsule gltf, autoFit is false."),t.meshes.forEach((function(e){r._createShapeForShadowNode(e.el)}))},t.prototype._createShapeForShadowNode=function(e){var r=e.addComponent(t,{autoFit:!0});this._shadowShapes.push(r),r._parentShape=this},t.prototype.autoFit=function(e,t){for(var r=t.geometry.boundBox,n=r.size.toArray(),o=0,i=0,a=0,s=0;s<3;s++)n[s]>i&&(o=s,a=i,i=n[s]);e.direction=o,e.radius=.5*a,e.height=i,e.center=r.center.toArray()},t.prototype._cleanUp=function(){e.prototype._cleanUp.call(this);for(var r=0,n=this._shadowShapes;r<n.length;r++){var o=n[r];o.el&&o.el.removeComponent(t)}this._shadowShapes=[]},t.defaultRadius=.5,t.defaultHeight=2,p([d(s.default)],t.prototype,"center",null),p([d()],t.prototype,"radius",null),p([d()],t.prototype,"height",null),p([d()],t.prototype,"direction",null),t}(a.default)},"./src/components/physics/CubeShape.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{CubeShapeSchema:()=>d,default:()=>h});var n,o=r("./src/physics/utils.ts"),i=r("./src/components/physics/Shape.ts"),a=r("./src/math/vector3.ts"),s=r("./src/ext.ts"),c=r("./src/core/logger.ts"),u=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(){return l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)},f=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},p=(0,o.genProxy)("_nativeCollider"),d=l(l({},i.ShapeSchema),{size:{type:"number-array"}});const h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=d,t._type=i.EShapeType.Cube,t}return u(t,e),Object.defineProperty(t.prototype,"center",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),t.prototype._createBasic=function(e){this._nativeColliders.push(new((0,s.getKanata)(this.scene).Phys3D.BoxCollider)(this.scene.physics.nativeSystem,e.center?a.default.createFromArray(e.center).toPhysics():a.default.ZERO.toPhysics(),e.size?a.default.createFromArray(e.size).toPhysics():a.default.ONE.toPhysics())),this._baseInit()},t.prototype._createAttachedToMesh=function(e,t){c.default.assert(e.autoFit,"cube attached to mesh, autoFit is false.");var r=l({},e);this.autoFit(r,t),this._createBasic(r)},t.prototype._createGLTFMultiple=function(e,t){var r=this;c.default.assert(e.autoFit,"cube gltf, autoFit is false."),t.meshes.forEach((function(e){r._createShapeForShadowNode(e.el)}))},t.prototype._createShapeForShadowNode=function(e){var r=e.addComponent(t,{autoFit:!0});this._shadowShapes.push(r),r._parentShape=this},t.prototype.autoFit=function(e,t){var r=t.geometry.boundBox;e.size=r.size.toArray(),e.center=r.center.toArray()},t.prototype._cleanUp=function(){e.prototype._cleanUp.call(this);for(var r=0,n=this._shadowShapes;r<n.length;r++){var o=n[r];o.el&&o.el.removeComponent(t)}this._shadowShapes=[]},f([p(a.default)],t.prototype,"center",null),f([p(a.default)],t.prototype,"size",null),t}(i.default)},"./src/components/physics/MeshShape.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{MeshShapeSchema:()=>f,default:()=>p});var n,o=r("./src/physics/utils.ts"),i=r("./src/components/physics/Shape.ts"),a=r("./src/components/Mesh.ts"),s=r("./src/ext.ts"),c=r("./src/core/logger.ts"),u=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(){return l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)},f=((0,o.genProxy)("_nativeCollider"),l({},i.ShapeSchema));const p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=f,t.priority=350,t._physMeshes=[],t._type=i.EShapeType.Mesh,t}return u(t,e),t.prototype._createBasic=function(e){throw"[MeshShape] mesh shape cannot create basic."},t.prototype._createAttachedToMesh=function(e){var t=this.el.getComponent(a.default);this._createCollider(t),this._baseInit()},t.prototype._createGLTFMultiple=function(e,t){var r=this;t.meshes.forEach((function(e){r._createShapeForShadowNode(e.el)}))},t.prototype._createCollider=function(e){var t=new((0,s.getKanata)(this.scene).Phys3D.PhysMesh)(this.scene.physics.nativeSystem);this._initPhysMesh(e.geometry,t)&&(this._physMeshes.push(t),this._nativeColliders.push(new((0,s.getKanata)(this.scene).Phys3D.MeshCollider)(this.scene.physics.nativeSystem,!1,0,t)))},t.prototype._createShapeForShadowNode=function(e){var r=e.addComponent(t,{});this._shadowShapes.push(r),r._parentShape=this},t.prototype._initPhysMesh=function(e,t){var r=e._getRawVertexBuffer(),n=e._getRawIndiceBuffer();if(!r||!n)return!1;var o=e.vertexLayout.stride/4,i=e.vertexLayout.getConfigByUsage(1).offset/4,a=r.length/o;if(a>65535)return c.default.warn("[MeshShape] mesh vertices count exceeded limit 65535! Pleases use CubeShape+autoFit instead."),!1;for(var s=new Float32Array(3*a),u=0;u<a;u++)for(var l=0;l<3;l++)s[3*u+l]=r[l+u*o+i];var f=n.length/3;return t.SetVertices(s,a),t.SetTriangles(n,f,!0),!0},t.prototype._cleanUp=function(){e.prototype._cleanUp.call(this);for(var r=0,n=this._shadowShapes;r<n.length;r++){var o=n[r];o.el&&o.el.removeComponent(t)}this._shadowShapes=[]},t}(i.default)},"./src/components/physics/Shape.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{EShapeType:()=>o,ShapeImplType:()=>i,ShapeSchema:()=>v,default:()=>y,shapeMap:()=>m});var n,o,i,a=r("./src/physics/utils.ts"),s=r("./src/core/Component.ts"),c=r("./src/math/vector3.ts"),u=r("./src/ext.ts"),l=r("./src/components/Transform.ts"),f=r("./src/components/Mesh.ts"),p=r("./src/components/GLTF.ts"),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),h=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},_=(0,a.genProxy)("_nativeCollider"),m=new Map;!function(e){e[e.None=0]="None",e[e.Cube=1]="Cube",e[e.CharacterController=2]="CharacterController",e[e.Capsule=3]="Capsule",e[e.Mesh=4]="Mesh",e[e.Sphere=5]="Sphere"}(o||(o={})),function(e){e[e.None=0]="None",e[e.Basic=1]="Basic",e[e.AttachedToMesh=2]="AttachedToMesh",e[e.GLTFMultiple=3]="GLTFMultiple"}(i||(i={}));var v={center:{type:"number-array"},autoFit:{type:"boolean"},disabled:{type:"boolean"}};const y=function(e){function t(){var t=e.call(this)||this;return t.priority=400,t._nativeStaticRigidbody=null,t._nativeColliders=[],t._rigidbodyComp=null,t._type=o.None,t._implType=i.None,t._shadowShapes=[],t._parentShape=null,t._disabled=!1,t.meshVersion=0,t.gltfVersion=0,t}return d(t,e),Object.defineProperty(t.prototype,"implType",{get:function(){return this._implType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowShapes",{get:function(){return this._shadowShapes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disabledInData",{get:function(){return this._disabled},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){(0,u.getKanata)(this.scene).renderEnv.isGoodPhysAndScalableList||this.scene.physics.addShape(this),this._createIfNecessary(t),this._disabled=!!t.disabled},t.prototype.onUpdate=function(e,t){this._createIfNecessary(e),this._disabled=!!e.disabled},t.prototype.onTick=function(e,t){this._createIfNecessary(t)},t.prototype._decideImplType=function(e){for(var t=this._implType,r=!1,n=0;!n++;){if(!e.autoFit&&this.type!==o.Mesh){t=i.Basic;break}var a=this.el.getComponent(f.default);if(a&&a.version>0){t=i.AttachedToMesh,r=a.version>this.meshVersion;break}var s=this.el.getComponent(p.default);if(s&&s.version>0){t=i.GLTFMultiple,r=s.version>this.gltfVersion;break}t=i.None}return[t,r||t!==this._implType]},t.prototype._createIfNecessary=function(e){var t=this._decideImplType(e),r=t[0];if(t[1])if(this._implType=r,this._cleanUp(),this._implType===i.Basic)this._createBasic(e),this._version+=1;else if(this._implType===i.AttachedToMesh){var n=this.el.getComponent(f.default);this._createAttachedToMesh(e,n),this.meshVersion=n.version,this.gltfVersion=0,this._version+=1}else if(this._implType===i.GLTFMultiple){var o=this.el.getComponent(p.default);this._createGLTFMultiple(e,o),this.meshVersion=0,this.gltfVersion=o.version,this._version+=1}},t.prototype.onRemove=function(e,t){(0,u.getKanata)(this.scene).renderEnv.isGoodPhysAndScalableList||this.scene.physics.removeShape(this)},t.prototype.onRelease=function(){this._cleanUp(),this._shadowShapes=[],this._parentShape=null},Object.defineProperty(t.prototype,"_nativeCollider",{get:function(){return this._nativeColliders[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entity",{get:function(){return this.el.getComponent(l.default).node},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTrigger",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attachedRigidbody",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contactOffset",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),t.prototype.enable=function(){if(!this._disabled)for(var e=0,t=this._nativeColliders;e<t.length;e++){t[e].enabled=!0}},t.prototype.disable=function(){for(var e=0,t=this._nativeColliders;e<t.length;e++){t[e].enabled=!1}},t.prototype._cleanUp=function(){for(var e=0,t=this._nativeColliders;e<t.length;e++){var r=t[e];this.type!==o.CharacterController?(r&&(r.enabled=!1,m.delete(r)),this._nativeStaticRigidbody&&(this._nativeStaticRigidbody.Detach(),this._nativeStaticRigidbody.Remove(),this._nativeStaticRigidbody=null)):(m.delete(r),r.userData=null)}this._nativeColliders=[]},t.prototype._create=function(e){},t.prototype.onAddRigidbody=function(e){this._initRigidbodyComp(e)},t.prototype.onRemoveRigidbody=function(){this._rigidbodyComp=null,this._initStaticRigidbody()},t.prototype._baseInit=function(){if(this.type!==o.CharacterController){this._initStaticRigidbody()}for(var e=0,t=this._nativeColliders;e<t.length;e++){var r=t[e];r.userData=this,m.set(r,this),r.layer=0}},t.prototype._initRigidbodyComp=function(e){if(this.type!==o.CharacterController)if(this._nativeStaticRigidbody);else if(this._rigidbodyComp=e,e.nativeComp)for(var t=0,r=this._nativeColliders;t<r.length;t++){r[t].attachedRigidbody=e.nativeComp}},t.prototype._initStaticRigidbody=function(){if(this._nativeStaticRigidbody||(this._nativeStaticRigidbody=new((0,u.getKanata)(this.scene).Phys3D.StaticRigidbody)(this.scene.physics.nativeSystem)),this.scene.physics.bindRigidbodyWithEntity(this._nativeStaticRigidbody,this.entity),!this._rigidbodyComp)for(var e=0,t=this._nativeColliders;e<t.length;e++){t[e].attachedRigidbody=this._nativeStaticRigidbody}},t.prototype._onLayerChange=function(e){for(var t=0,r=this._nativeColliders;t<r.length;t++){r[t].layer=e}},h([_()],t.prototype,"isTrigger",null),h([_(c.default)],t.prototype,"scale",null),h([_()],t.prototype,"contactOffset",null),t}(s.default)},"./src/components/physics/SphereShape.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{SphereShapeSchema:()=>d,default:()=>h});var n,o=r("./src/physics/utils.ts"),i=r("./src/components/physics/Shape.ts"),a=r("./src/math/vector3.ts"),s=r("./src/ext.ts"),c=r("./src/core/logger.ts"),u=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(){return l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)},f=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},p=(0,o.genProxy)("_nativeCollider"),d=l(l({},i.ShapeSchema),{radius:{type:"number"}});const h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=d,t._type=i.EShapeType.Sphere,t}return u(t,e),Object.defineProperty(t.prototype,"center",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),t.prototype._createBasic=function(e){var r;this._nativeColliders.push(new((0,s.getKanata)(this.scene).Phys3D.SphereCollider)(this.scene.physics.nativeSystem,e.center?a.default.createFromArray(e.center).toPhysics():a.default.ZERO.toPhysics(),null!==(r=e.radius)&&void 0!==r?r:t.defaultRadius)),this._baseInit()},t.prototype._createAttachedToMesh=function(e,t){c.default.assert(e.autoFit,"sphere attached to mesh, autoFit is false.");var r=l({},e);this.autoFit(r,t),this._createBasic(r)},t.prototype._createGLTFMultiple=function(e,t){var r=this;c.default.assert(e.autoFit,"sphere gltf, autoFit is false."),t.meshes.forEach((function(e){r._createShapeForShadowNode(e.el)}))},t.prototype._createShapeForShadowNode=function(e){var r=e.addComponent(t,{autoFit:!0});this._shadowShapes.push(r),r._parentShape=this},t.prototype.autoFit=function(e,t){e.radius=t.geometry.boundBall.radius,e.center=t.geometry.boundBall.center.toArray()},t.prototype._cleanUp=function(){e.prototype._cleanUp.call(this);for(var r=0,n=this._shadowShapes;r<n.length;r++){n[r].el.removeComponent(t)}this._shadowShapes=[]},t.defaultRadius=1,f([p(a.default)],t.prototype,"center",null),f([p()],t.prototype,"radius",null),t}(i.default)},"./src/components/physics/types.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{allShapes:()=>s});var n=r("./src/components/physics/CapsuleShape.ts"),o=r("./src/components/physics/CubeShape.ts"),i=r("./src/components/physics/MeshShape.ts"),a=r("./src/components/physics/SphereShape.ts"),s=[o.default,a.default,i.default,n.default]},"./src/components/skinning/Skeleton.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{BONE_MATRIX_TEXTURE_COLUMNS:()=>c,MAX_BONE_NUM:()=>s,SkeletonSchema:()=>u,default:()=>l});var n,o=r("./src/core/Component.ts"),i=r("./src/ext.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=96,c=2048,u={boneNum:{type:"number",defaultValue:0},boneNodes:{type:"array"},boneInverseMatrices:{type:"boneInverseMatrices"}};const l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._boneNum=0,t._zeroModel=null,t}return a(t,e),Object.defineProperty(t.prototype,"skeleton",{get:function(){return this._skeleton},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boneNum",{get:function(){return this._boneNum},enumerable:!1,configurable:!0}),t.prototype.create=function(e){if(e.boneNum){this._boneNum=e.boneNum,this._skeleton=new((0,i.getKanata)(this.scene).SkinnedSkeletonComponent)(e.boneNum,this.useDataTexture?i.Kanata.ESkinnedSkeletonFlag.UseTextureMatrix:0);var t,r=Array.from(Array(e.boneNum).keys()),n=e.boneNodes.map((function(e){return e.node}));t=e.boneInverseMatrices?e.boneInverseMatrices:this._zeroModel,this._skeleton.setBoneMatrix(t,r,n)}},t.prototype.cleanUp=function(){this._zeroModel=null,this._skeleton=null},t.prototype.onAdd=function(e,t){t.boneNum&&this.create(t)},t.prototype.onUpdate=function(e,t){this.cleanUp(),this.create(e)},t.prototype.onTick=function(e,t){(0,i.getKanata)(this.scene).SkinnedSkeletonComponent.UPDATE_MATS([this._skeleton],1)},Object.defineProperty(t.prototype,"useDataTexture",{get:function(){return this.boneNum>s},enumerable:!1,configurable:!0}),t}(o.default)},"./src/components/skinning/SkinnedMesh.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n,o=r("./src/builtinAssets/uniform-desc/mesh.ts"),i=r("./src/ext.ts"),a=r("./src/components/Mesh.ts"),s=r("./src/components/skinning/Skeleton.ts"),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype._getUniformDesc=function(){var t=this.el.getComponent(s.default);return t?(0,o.getSkinnedMeshUniformDesc)(this.scene,t.boneNum,t.useDataTexture):e.prototype._getUniformDesc.call(this)},t.prototype._getMeshType=function(){return i.Kanata.EMeshRenderType.Skinned3D},t.prototype.onTick=function(t,r){e.prototype.onTick.call(this,t,r);var n=this.el.getComponent(s.default);this._mesh.skinSkeleton=n.skeleton},t.prototype._getMarcos=function(t){var r=e.prototype._getMarcos.call(this,t),n=this.el.getComponent(s.default);return n?(r.WX_SKINNED=!0,r.WX_BONE_NUM=n.boneNum,n.useDataTexture?r.WX_USE_BONE_MATRIX_TEXTURE=!0:r.WX_USE_BONE_MATRIX_TEXTURE=!1):(r.WX_SKINNED=!1,r.WX_BONE_NUM=0,r.WX_USE_BONE_MATRIX_TEXTURE=!1),r},t}(a.default)},"./src/core/Component.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,getComponent:()=>c,registerComponent:()=>u});var n=r("./src/loader/types.ts"),o=r("./src/core/DataValue.ts"),i=r("./src/core/logger.ts");const a=function(){function e(){this.schema={},this.priority=1/0,this._version=0,this._isAdded=!1,this._isRemoved=!1,this._dataCache={},this._dataStrPre={},this._dataStrCache={},this._assetsLoadingCache={},this._hasLoadingAssets=!1,this._dataDirty=!1}return e.SPLIT_DATA=function(e){var t=e.split(";"),r={};return t.forEach((function(e){var t=e.indexOf(":"),n=e.substring(0,t).trim(),o=e.substring(t+1).trim();r[n]=o})),r},Object.defineProperty(e.prototype,"el",{get:function(){return this._el},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._el.scene},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this._dataCache2=Object.assign(this._dataCache2||{},e),this._dataDirty=!0,this._beforeTick()},e.prototype.setDataOne=function(e,t){this._dataCache2=this._dataCache2||{},this._dataCache2[e]=t,this._dataDirty=!0,this._beforeTick()},e.prototype.getData=function(e){return this._currentData[e]},e.prototype._init=function(e,t,r){void 0===r&&(r=!1),this._el=e,r?this._dataStrCache=Object.assign({},t,this._dataStrCache):Object.assign(this._dataStrCache,t)},e.prototype._init2=function(e,t){this._el=e,this._dataCache2=Object.assign(this._dataCache2||{},t)},e.prototype._added=function(e){var t=this;if(!this._isAdded){var r=this._currentData=this._parseData();if(!this._hasLoadingAssets)return this.onAdd(e,r),this._preData=r,this._isAdded=!0,void(this._version+=1);var n=[],o=function(e){var t=i._assetsLoadingCache[e].promise;n.push(t.then((function(t){r[e]=t.value})).catch((function(t){r[e]=void 0})))},i=this;for(var a in this._assetsLoadingCache)o(a);Promise.all(n).then((function(){t._isRemoved||(t.onAdd(e,r),t._preData=r,t._hasLoadingAssets=!1,t._isAdded=!0,t._version+=1)}))}},e.prototype._update=function(e){Object.assign(this._dataStrCache,e),this._dataDirty=!0},e.prototype._updateOne=function(e,t){var r;Object.assign(this._dataStrCache,((r={})[e]=t,r)),this._dataDirty=!0},e.prototype._beforeTick=function(){if(this._isAdded){var e=this._dataCache;if(this._dataDirty&&(e=this._parseData()),this._currentData=e,this._hasLoadingAssets)for(var t in this._hasLoadingAssets=!1,this._assetsLoadingCache){var r=this._assetsLoadingCache[t];r.state!==n.EAssetState.Loading?e[t]=r.value:this._hasLoadingAssets=!0}this._hasLoadingAssets||e===this._preData||(this.onUpdate(e,this._preData),this._preData=e,this._version+=1)}},e.prototype._tick=function(e){this._isAdded&&this.onTick(e,this._preData)},e.prototype._removed=function(e){this._isAdded&&this.onRemove(e,this._preData),this._isRemoved=!0},e.prototype._release=function(){this._isAdded&&(this.onRelease(this._preData),this._el=void 0,this._preData=void 0,this._currentData=void 0,this._dataCache=void 0,this._dataCache2=void 0,this._dataStrCache=void 0,this._dataStrPre=void 0)},e.prototype._parseData=function(){var e=this,t=e.schema,r=e.scene,i=e._dataStrPre,a=e._dataCache,s=e._assetsLoadingCache,c=e._dataStrCache,u=this._dataCache2||{};for(var l in this._hasLoadingAssets=this._hasLoadingAssets||!1,t)if(void 0===u[l]){var f=t[l],p=c[l];if(void 0===p){if(void 0!==a[l]){u[l]=a[l];continue}i[l]=void 0}else if(i[l]===p){u[l]=a[l];continue}var d=(0,o.parseDataValue)(f.type,p,f.defaultValue,r);void 0!==d?((0,n.isAsset)(d)?d.state!==n.EAssetState.Loading?u[l]=d.value:(s[l]=d,this._hasLoadingAssets=!0):u[l]=d,i[l]=p):i[l]=void 0}return this._dataCache=u,this._dataCache2=void 0,this._dataStrCache={},this._dataDirty=!1,u},e.prototype.onAdd=function(e,t){},e.prototype.onUpdate=function(e,t){},e.prototype.onTick=function(e,t){},e.prototype.onRemove=function(e,t){},e.prototype.onRelease=function(e){},e.TYPE="component",e}();var s={};function c(e){return s[e]}function u(e,t){s[e]?i.default.warn("Component "+e+" is already existed !"):(t.TYPE=e,s[e]=t)}},"./src/core/DataValue.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{isDataValueHandlerExisted:()=>a,isTextureWrapper:()=>i,parseDataValue:()=>c,registerDataValue:()=>s});var n=r("./src/core/logger.ts"),o={string:{create:function(e,t){return void 0!==e?e:t}},number:{create:function(e,t){return void 0===e?t:e.startsWith&&e.startsWith("0b")?parseInt(e.substring(2),2):parseFloat(e)}},boolean:{create:function(e,t){return void 0!==e?"false"!==e:t}},array:{create:function(e,t){return void 0!==e?e.split(" "):t}},"number-array":{create:function(e,t){return void 0!==e?e.split(" ").map((function(e){return parseFloat(e)})):t}},color:{create:function(e,t){return void 0===e?t:"#"!==e[0]?e.split(" ").map((function(e){return parseFloat(e)})):void n.default.error("Not support color with start # now !")}},map:{create:function(e,t){return void 0!==e?e.split(",").map((function(e){return e.split(":").map((function(e){return e.trim()}))})):t}},dict:{create:function(e,t){if(void 0===e)return t;var r={};return e.split(",").forEach((function(e){var t,n,o=e.split(":");o.length>2?(t=o[0],o.shift(),n=o.join(":")):(t=o[0],n=o[1]),t&&n&&(r[t.trim()]=n.trim())})),r}},"boolean-dict":{create:function(e,t){if(void 0===e)return t;var r={};return e.split(",").forEach((function(e){var t=e.split(":"),n=t[0],o=t[1];n&&o&&(r[n.trim()]="false"!==o.trim())})),r}},transform:{create:function(e,t,r){return r._getNodeById(e)}},effect:{create:function(e,t,r){return r.assets.getAssetWithState("effect",e,t)}},image:{create:function(e,t,r){return r.assets.getAssetWithState("image",e,t)}},texture:{create:function(e,t,r){return(null==e?void 0:e.startsWith("cube-"))?r.assets.getAssetWithState("cube-texture",e.replace("cube-","")):(null==e?void 0:e.startsWith("video-"))?r.assets.getAssetWithState("video-texture",e.replace("video-","")):(null==e?void 0:e.startsWith("render-"))?r.assets.getAssetWithState("render-texture",e.replace("render-","")):r.assets.getAssetWithState("texture",e,t)}},"cube-texture":{create:function(e,t,r){return r.assets.getAssetWithState("cube-texture",e,t)}},material:{create:function(e,t,r){return r.assets.getAssetWithState("material",e,t)}},geometry:{create:function(e,t,r){return r.assets.getAssetWithState("geometry",e,t)}},"render-texture":{create:function(e,t,r){return r.assets.getAssetWithState("render-texture",e,t)}},"post-process":{create:function(e,t,r){return r.assets.getAssetWithState("post-process",e,t)}},model:{create:function(e,t,r){return r.assets.getAssetWithState("model",e,t)}}};function i(e){var t;return!!(null===(t=e)||void 0===t?void 0:t.texture)}function a(e){return!!o[e]}function s(e,t){o[e]?n.default.warn("DataValue "+e+" is already existed !"):o[e]=t}function c(e,t,r,n){var i;return null===(i=o[e])||void 0===i?void 0:i.create(t,r,n)}},"./src/core/Element.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{BasicDataMapping:()=>c,BasicDefaultComponents:()=>s,default:()=>u,getElement:()=>f,registerElement:()=>p});var n=r("./src/core/Component.ts"),o=r("./src/core/EventManager.ts"),i=r("./src/core/logger.ts"),a=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},s={},c={"anim-keyframe":["animator","keyframe"],"anim-clipmap":["animator","clipMap"],"anim-autoplay":["animator","autoPlay"]};const u=function(){function e(t,r){this._type=t,this.defaultComponents=s,this.dataMapping=c,this.neverTick=!1,this._inXML=!1,this._children=[],this._components={},this._sortedComps=[],this._componentsDirty=!1,this._inited=!1,this._isAdded=!1,e._IDS[t]=e._IDS[t]||0,this._id=t+"-"+(e._IDS[t]+=1),this._event=new o.default(this,r)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._backendId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_elId",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inXML",{get:function(){return this._inXML},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"event",{get:function(){return this._event},enumerable:!1,configurable:!0}),e.prototype._addToParent=function(e){this._parent=e;var t=e.scene;(null==t?void 0:t.ready)&&!this._isAdded&&this.dfs((function(e){e._scene=t,e._added()}))},e.prototype._removeFromParent=function(){this.dfs((function(e){e._removed(),e._scene=void 0}))},e.prototype._initDefaultComponents=function(){for(var e in this.defaultComponents){var t=this._components[e];t||(t=new((0,n.getComponent)(e)));var r=this.defaultComponents[e];t._init(this,r),this._components[e]=t}this._componentsDirty=!0},e.prototype._added=function(){if(!this._isAdded){this._backendId&&this.scene._addElById(this._backendId,this),this._sort();for(var e=0,t=this._sortedComps;e<t.length;e++){t[e]._added(this._parent)}this._isAdded=!0}},e.prototype._removed=function(){if(this._isAdded){for(var e in this._components)this._components[e]._removed(this._parent);this._backendId&&this.scene._removeElById(this._backendId),this._isAdded=!1}},e.prototype.getChildAtIndex=function(e){return this._children[e]},e.prototype.getChildByFilter=function(e){for(var t=0,r=this._children;t<r.length;t++){var n=r[t];if(e(n))return n}},e.prototype.getChildrenByFilter=function(e){return this._children.filter((function(t){return e(t)}))},e.prototype.getChildByClass=function(e){return this.getChildByFilter((function(t){return t._type===e.TYPE}))},e.prototype.getChildByName=function(e){return this.getChildByFilter((function(t){return t.name===e}))},e.prototype.getChildrenByName=function(e){return this.getChildrenByFilter((function(t){return t.name===e}))},e.prototype.dfs=function(e,t,r,n){void 0===n&&(n=function(){return!1});var o=this._children,i=t,a=!1;if(r||(a=n(this,i=e(this,t))),!a&&o)for(var s=0;s<o.length;s+=1){o[s].dfs(e,i,!1,n)}},e.prototype.addComponent=function(e,t){var r=e.TYPE;this._components[r]&&i.default.error("Component '"+r+"' is already in element "+this._elId+"!");var n=new e;return n._init2(this,t),this._components[r]=n,this._parent&&this._scene&&(n._added(this._parent),this._componentsDirty=!0),n},e.prototype.getComponent=function(e){return e.substring?this._components[e]:this._components[e.TYPE]},e.prototype.removeComponent=function(e){this._removeAttribute(e.TYPE)},e.prototype.setAttribute=function(e,t){this._setAttribute(e,t)},e.prototype._beforeTick=function(){this._sort();for(var e=0,t=this._sortedComps;e<t.length;e++){t[e]._beforeTick()}this._event.flushAll()},e.prototype._sort=function(){this._componentsDirty&&(this._sortedComps=Object.values(this._components).sort((function(e,t){return e.priority-t.priority})),this._componentsDirty=!1)},e.prototype._tick=function(e){for(var t=0,r=this._sortedComps;t<r.length;t++){r[t]._tick(e)}},e.prototype._release=function(){this._sort();for(var e=0,t=this._sortedComps;e<t.length;e++){var r=t[e];this._components[r.constructor.TYPE]&&r._release()}this._sortedComps=void 0,this._event=void 0,this._components=void 0,this._children=void 0,this._parent=void 0},e.prototype._associateValue=function(e){this._inited||(this._inXML=!!e,this._initDefaultComponents(),this.scene===this&&(this._initScene(),this._added()),this._inited=!0)},e.prototype.addChild=function(e){this._appendChild(e,!0)},e.prototype.removeChild=function(e){this._removeChild(e,void 0,!0)},e.prototype.setId=function(e){this._setId(e)},e.prototype.release=function(){var e=this;this.dfs((function(t){t!==e&&t._release()})),this._release()},e.prototype._appendChild=function(e,t){void 0===t&&(t=!1),e._addToParent(this),this._children.push(e)},e.prototype._removeChild=function(e,t,r){void 0===r&&(r=!1),void 0===t&&(t=this._children.indexOf(e)),t<0||(e._removeFromParent(),this._children.splice(t,1))},e.prototype._insertBefore=function(e,t,r){e._addToParent(this),void 0===r&&t&&(r=this._children.indexOf(t)),void 0!==r?this._children.splice(r,0,e):this._children.push(e)},e.prototype._replaceChild=function(e,t,r){e._addToParent(this),void 0===r&&t&&(r=this._children.indexOf(t)),void 0!==r?(this._children[r]._removeFromParent(),this._children.splice(r,1,e)):this._children.push(e)},e.prototype._spliceBefore=function(e,t,r){var n,o=this;r._children.forEach((function(e){return e._addToParent(o)}));var i=e;"number"!=typeof e&&(i=this._children.indexOf(e)),(n=this._children).splice.apply(n,a([i,t],r._children)).forEach((function(e){return e._removeFromParent()}))},e.prototype._spliceAppend=function(e){e._addToParent(this),this._children.push(e)},e.prototype._spliceRemove=function(e,t){var r=this._children.indexOf(e);this._children.splice(r,t).forEach((function(e){return e._removeFromParent()}))},e.prototype._setId=function(e){this.scene?(this._backendId&&this.scene._removeElById(e),this.scene._addElById(e,this),this._backendId=e):this._backendId=e},e.prototype._setStyleScope=function(e){},e.prototype._setStyle=function(e){},e.prototype._addClass=function(e,t){},e.prototype._removeClass=function(e,t){},e.prototype._clearClasses=function(){},e.prototype._setAttribute=function(e,t){if("name"!==e){var r=this.dataMapping[e];if(r){e=r[0];var o=r[1],a=this._components[e];if(a)return void a._updateOne(o,t);t=o+":"+t}var s=this._components[e];if(s){var c=n.default.SPLIT_DATA(t);s._update(c)}else{var u=(0,n.getComponent)(e);u&&(this._components[e]&&i.default.throw(new Error("Component '"+e+"' is already in element "+this._elId+"!")),(s=new u)._init(this,n.default.SPLIT_DATA(t)),this._components[e]=s,(this.scene===this||this._parent&&this._scene)&&(s._added(this._parent),this._componentsDirty=!0))}}else this._name=t},e.prototype._removeAttribute=function(e){var t=this._components[e];t&&(this._scene&&t._removed(this),t._release(),delete this._components[e],this._componentsDirty=!0)},e.prototype._setText=function(e){},e.TYPE="element",e._IDS={},e}();var l={};function f(e){return l[e]}function p(e,t){l[e]?i.default.warn("Element "+e+" is already existed !"):(t.TYPE=e,l[e]=t)}},"./src/core/EventManager.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r("./src/core/Observable.ts");const o=function(){function e(e,t){this._el=e,this._triggerElementEvent=t,this.isEventManager=!0,this._observables={},this._caches={}}return e.prototype.add=function(e,t,r){return this._observables[e]||(this._observables[e]=new n.default),this._observables[e].add(t,r),this},e.prototype.addOnce=function(e,t,r){return this._observables[e]||(this._observables[e]=new n.default),this._observables[e].addOnce(t,r),this},e.prototype.remove=function(e,t){return this._observables[e]?(this._observables[e].remove(t),this):this},e.prototype.has=function(e){return!!this._observables[e]},e.prototype.getCount=function(e){return this.has(e)?this._observables[e].count:0},e.prototype.clear=function(e){if(this._observables[e])return this._observables[e].clear(),this},e.prototype.trigger=function(e,t,r,o,i){return void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===i&&(i=!1),this._observables[e]||(this._observables[e]=new n.default),r?(this._triggerEvent(e,t,o,i),this):(this._caches[e]={value:t,toXML:o,bubbles:i},this)},e.prototype.flush=function(e){if(this._observables[e]){var t=this._caches[e];return t&&(delete this._caches[e],this._triggerEvent(e,t.value,t.toXML,t.bubbles)),this}},e.prototype._triggerEvent=function(e,t,r,n){var o,i=this._el;if(r&&i.inXML&&this._triggerElementEvent(e,{el:this._el,value:t},{bubbles:n}),n){if(this._el.scene)for(var a=this._el.scene.parent,s=i.inXML;i!==a;)null===(o=i.event._observables[e])||void 0===o||o.notify(t,this._el),!s&&r&&i.inXML&&(i.event._triggerElementEvent(e,{el:this._el,value:t},{bubbles:n}),s=!0),i=i.parent}else this._observables[e].notify(t,this._el)},e.prototype.flushAll=function(){for(var e in this._caches)this.flush(e);return this},e}()},"./src/core/Observable.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r("./src/core/logger.ts");const o=function(){function e(){this.isObservable=!0,this._count=0}return Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),e.prototype.add=function(e,t,r){if(void 0===r&&(r=!1),!e)return this;var n={handler:e,isOnce:r,priority:t||0,pre:void 0,next:void 0};if(this._count+=1,!this._head)return this._head=n,this;t=t||0;for(var o=this._head;o.next&&t<o.priority;)o=o.next;return n.pre=o.pre,n.next=o,o.pre=n,n.pre?n.pre.next=n:this._head=n,this},e.prototype.addOnce=function(e,t){return this.add(e,t,!0),this},e.prototype.clear=function(){return this._head=void 0,this._count=0,this},e.prototype.remove=function(e){var t=this._head;if(!e)return this;for(;t&&(null==t?void 0:t.handler)!==e;)t=t.next;return t?(this._count-=1,0===this._count?(this._head=void 0,this):t.pre?t.next?(t.pre.next=t.next,t.next.pre=t.pre,this):(t.pre.next=void 0,this):(this._head=t.next,t.next.pre=void 0,this)):this},e.prototype.notify=function(e,t){for(var r=this._head;r;){var o=!1;try{o=r.handler(e,t)}catch(e){n.default.throw(e)}var i=r.next;if(r.isOnce&&(r.pre?r.next?(r.pre.next=r.next,r.next.pre=r.pre):r.pre.next=void 0:(this._head=r.next,r.next&&(r.next.pre=void 0)),this._count-=1),!0===o)return this;r=i}return this},e}()},"./src/core/Scene.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{SceneDataMapping:()=>A,SceneDefaultComponents:()=>C,default:()=>O});var n,o=r("./src/ext.ts"),i=r("./src/systems/AssetsSystem.ts"),a=r("./src/systems/RenderSystem.ts"),s=r("./src/core/Element.ts"),c=r("./src/loader/downloader/fetch.ts"),u=r("./src/loader/downloader/cache.ts"),l=r("./src/assets/Material.ts"),f=r("./src/assets/RenderTexture.ts"),p=r("./src/assets/Effect.ts"),d=r("./src/assets/Geometry.ts"),h=r("./src/systems/AnimationSystem.ts"),_=r("./src/systems/PhysicsSystem.ts"),m=r("./src/systems/ARSystem.ts"),v=r("./src/elements/index.ts"),y=r("./src/core/logger.ts"),g=r("./src/systems/index.ts"),b=r("./src/assets/VideoTexture.ts"),w=r("./src/core/reporter.ts"),x=r("./src/assets/PostProcess.ts"),S=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),E=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},T=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},C={"assets-system":{},"node-system":{},"tick-system":{},"animation-system":{},"video-system":{},"render-system":{},"physics-system":{},"share-system":{},"gizmo-system":{}},A={};const O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=C,t.isScene=!0,t._nodes={},t._elements={},t._preTs=0,t._timestamp=0,t._ready=!1,t._paused=!1,t.__tmpObjs={},t._loop=function(e,r){if(void 0===r&&(r=!1),t._ready&&!t._paused){r&&(t._preTs=e-16);var n=e-t._preTs;t._preTs=e,t._timestamp+=n;var i=(0,o.getKanata)(t).renderEnv.getErrors();(null==i?void 0:i.length)&&y.default.error("Render errors\n"+i.join("\n"));try{t._beforeTick(),t._tick(n)}catch(e){y.default.debugError(e)}(0,o.getKanata)(t).update(n),t._rafId=t._raf(t._loop)}},t._pause=function(){t._ready&&(t._cancelRaf(t._rafId),t._paused=!0,t.event.trigger("pause",void 0,!0),(0,o.getKanata)(t).renderEnv.endFrame())},t._resume=function(){t._ready&&(t.event.trigger("resume",void 0,!0),t._paused=!1,t._raf(t._loop))},t}return S(t,e),Object.defineProperty(t.prototype,"ready",{get:function(){return this._ready},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scene",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rootShadow",{get:function(){return this._rootShadow},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"assets",{get:function(){return this.getComponent(i.default)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"render",{get:function(){return this.getComponent(a.default)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"animation",{get:function(){return this.getComponent(h.default)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"video",{get:function(){return this.getComponent(g.VideoSystem)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"physics",{get:function(){return this.getComponent(_.default)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ar",{get:function(){return this.getComponent(m.default)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gizmo",{get:function(){return this.getComponent(g.GizmoSystem)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"share",{get:function(){return this.getComponent(g.ShareSystem)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frameWidth",{get:function(){return this._frameWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frameHeight",{get:function(){return this._frameHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timestamp",{get:function(){return this._timestamp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderPass",{get:function(){return(0,o.getKanata)(this).RenderPass.SCREEN_RENDER_PASS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rootNode",{get:function(){return this._rootNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backendVersion",{get:function(){return(0,o.getKanata)(this).renderEnv.version},enumerable:!1,configurable:!0}),t.prototype.versionBefore=function(e,t){return 100*this.backendVersion[0]+this.backendVersion[1]<100*e+t},Object.defineProperty(t.prototype,"backendCommit",{get:function(){return(0,o.getKanata)(this).renderEnv.commitVersion},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backendUsePuppetSokol",{get:function(){return(0,o.getKanata)(this).renderEnv.usePuppetSokol},enumerable:!1,configurable:!0}),t.prototype._setCanvas=function(e,t){this._canvas=e,this._xrCtxId=t},t.prototype._initScene=function(){var e=this,t=this._canvas;delete this._canvas;var n=o.Kanata.CREATE_INSTANCE(t,{},"Game",!1,"",!0);n.renderEnv.useExtendedMemory=!0,(0,o.addKanata)(this,n),y.default.info("backend version",this.backendVersion.join(".")),y.default.info("backend commit version",this.backendCommit),w.default.init(this._xrCtxId,this.backendVersion,this.backendCommit),n.Downloader.REAL_DOWNLOADER={load:function(e){(0,c.fetch)(e.src,e.encoding).then((function(t){e.onLoad(t)})).catch((function(t){e.onError(t)}))}},this._width?this._resize(this._width,this._height):this._resize(t.width,t.height),this._rootNode=new n.Entity3D,this._rootNode.float32View.set([0,0,0,1],this._rootNode.localQuaternionOffset),this._rootNode.float32View.set([1,1,1],this._rootNode.localScaleOffset),this._rootNode.setLocalMatrixDirty(),this._rootNode.setAsRoot(),t.requestAnimationFrame?(this._raf=t.requestAnimationFrame.bind(t),this._cancelRaf=t.cancelAnimationFrame.bind(t)):(this._raf=r.g.requestAnimationFrame.bind(r.g),this._cancelRaf=r.g.cancelAnimationFrame.bind(r.g)),w.default.openEnd(this._xrCtxId,t.id),this._rafId=this._raf((function(t){return E(e,void 0,void 0,(function(){var e=this;return T(this,(function(r){switch(r.label){case 0:return void 0===o._wx.setStorage?[3,2]:[4,(0,u.initCache)()];case 1:r.sent(),r.label=2;case 2:o._wx.onAppShow(this._resume),o._wx.onAppHide(this._pause),this._preTs=t;try{this.assets._registerLoadersAndLoadBuiltinAssets(),this._rootShadow=this.createElement(v.XRShadow),this._rootShadow._parent=this,this._ready=!0,this._rootShadow.dfs((function(t){t._scene=e,t._added()})),this.dfs((function(t){t._scene=e,t._added()}))}catch(e){y.default.throw(e,w.EEReportScope.Init)}return y.default.info("scene ready"),this.event.trigger("ready",this,!0,!0),this._loop(t),[2]}}))}))}))},t.prototype._release=function(){var t,r;this._ready=!1,null===(t=this._cancelRaf)||void 0===t||t.call(this,this._rafId),null===(r=this._rootShadow)||void 0===r||r._release(),e.prototype._release.call(this);var n=(0,o.getKanata)(this),i=n.GET_MAIN_CANVAS();this._nodes=void 0,this._elements=void 0,this._raf=void 0,this._cancelRaf=void 0,this._rootNode=void 0,this._rootShadow=void 0,this.__tmpObjs=void 0,n.destroy(),o._wx.offAppShow(this._resume),o._wx.offAppHide(this._pause),o.Kanata.RELEASE_INSTANCE(i),i.width=1,i.height=1,(0,o.removeKanata)(this),w.default.end(this._xrCtxId),y.default.info("scene destroy"),"undefined"!=typeof NativeGlobal&&setTimeout((function(){var e,t,r,n;null===(e=NativeGlobal.gc)||void 0===e||e.call(NativeGlobal),null===(t=NativeGlobal.gc)||void 0===t||t.call(NativeGlobal),null===(r=NativeGlobal.gc)||void 0===r||r.call(NativeGlobal),null===(n=NativeGlobal.gc)||void 0===n||n.call(NativeGlobal)}),1e3)},t.prototype._processEvent=function(e,t){if("resize"===e){if(this._width===t.renderWidth&&this._height===t.renderHeight&&this._frameWidth===t.width&&this._frameHeight===t.height)return;return this._frameWidth=t.width,this._frameHeight=t.height,void this._resize(t.renderWidth,t.renderHeight)}this._ready&&this.event.trigger(e,t,!1,!1)},t.prototype._resize=function(e,t){this._width=e,this._height=t;var r=(0,o.getKanata)(this);if(r){var n=r.GET_MAIN_CANVAS();n.width=r.renderEnv.canvasWidth=e,n.height=r.renderEnv.canvasHeight=t}w.default.info(w.EEReportScope.Default,this.width+"|"+this.height+"|"+this.frameWidth+"|"+this.frameHeight)},t.prototype.createElement=function(e,t){var r=new e(e.TYPE,(function(){}));if(r._associateValue(null),t)for(var n in t)r._setAttribute(n,t[n]);return r},t.prototype._addNodeById=function(e,t){this._nodes[e]=t},t.prototype._removeNodeById=function(e){delete this._nodes[e]},t.prototype._getNodeById=function(e){return this._nodes[e]},t.prototype._addElById=function(e,t){this._elements[e]=t},t.prototype._removeElById=function(e){delete this._elements[e]},t.prototype.getElementById=function(e){return this._elements[e]},t.prototype.getNodeById=function(e){return this._nodes[e]},t.prototype._requestTmpObj=function(e){return this.__tmpObjs[e]||(this.__tmpObjs[e]={}),this.__tmpObjs[e]},t.prototype.createImage=function(e){void 0===e&&(e=!0);var t=new((0,o.getKanata)(this).Image);return t.autoRelease=e,t},t.prototype.createTexture=function(e){return new((0,o.getKanata)(this).Texture)(e)},t.prototype.createEffect=function(e){return new p.default(this,e)},t.prototype.createUniformBlockDesc=function(e){return new((0,o.getKanata)(this).UniformDescriptor)(e)},t.prototype.createUniformBlock=function(e){return new((0,o.getKanata)(this).UniformBlock)(e)},t.prototype.createMaterial=function(e,t){var r=new l.default(this);return r.initByEffect(e,t),r},t.prototype.createVertexLayout=function(e){return new((0,o.getKanata)(this).VertexLayout)(e)},t.prototype.createGeometry=function(e,t,r,n){return new d.default(this,e,t,r,n)},t.prototype.createRenderTexture=function(e){return new f.default(this,e)},t.prototype.createVideoTexture=function(e){return E(this,void 0,Promise,(function(){var t=this;return T(this,(function(r){return[2,new Promise((function(r,n){var o=new b.default(t,e,(function(t,o){if(o&&y.default.error(o),!e.placeHolder)return o?n(o):void r(t)}));e.placeHolder&&r(o)}))]}))}))},t.prototype.createPostProcess=function(e){return new x.default(this,e)},t}(s.default)},"./src/core/logger.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r("./src/core/reporter.ts"),o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},i=void 0!==wxNativeConsole;const a={log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,o(["[xr-frame]"],e))},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i&&(null==wxNativeConsole||wxNativeConsole.log.apply(wxNativeConsole,o(["[xr-frame]"],e))),console.log.apply(console,o(["[xr-frame]"],e))},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i&&(null==wxNativeConsole||wxNativeConsole.warn.apply(wxNativeConsole,o(["[xr-frame]"],e))),console.warn.apply(console,o(["[xr-frame]"],e))},error:function(e,t){void 0===t&&(t=n.EEReportScope.Default);for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];"string"==typeof e&&(e=new Error(e)),i&&(null==wxNativeConsole||wxNativeConsole.error.apply(wxNativeConsole,o(["[xr-frame]",e],r))),console.error.apply(console,o(["[xr-frame]",e],r)),n.default.error(t,e)},throw:function(e,t){void 0===t&&(t=n.EEReportScope.Default);for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];throw this.error.apply(this,o([e],r)),e},debugError:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i&&(null==wxNativeConsole||wxNativeConsole.error.apply(wxNativeConsole,o(["[xr-frame]"],e))),console.error.apply(console,o(["[xr-frame]"],e))},assert:function(e,t,r){void 0===r&&(r=n.EEReportScope.Default),e||this.error(t)}}},"./src/core/reporter.ts":(e,t,r)=>{"use strict";var n;r.r(t),r.d(t,{EEReportScope:()=>n,default:()=>f}),function(e){e[e.Default=1]="Default",e[e.Init=2]="Init",e[e.Render=3]="Render",e[e.Asset=4]="Asset",e[e.Physic=5]="Physic",e[e.AR=6]="AR"}(n||(n={}));var o=void 0!==__libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",i=void 0!==__libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";"string"==typeof o&&(o=o.replace(" ","")),"string"==typeof i&&(i=i.replace(" ","-"));var a=o+","+i,s={},c={};function u(e){return e.replace(/,/g,"，")}function l(e,t){if(e){var r=c[e]=c[e]||{};if((r[t]=(r[t]||0)+1)>1)return}Reporter.reportKeyValue({key:"XR_FRAME",value:t+",1,"+a})}const f={openStart:function(e,t,r){s[e]=r,Reporter.reportFrameworkIDKey(17,1),this.info(n.Init,"Create context: ctxId '"+e+"' and canvasId "+t)},openEnd:function(e,t){var r=(Date.now()-s[e])/1e3;delete s[e],Reporter.reportFrameworkIDKey(16,Math.floor(1e3*r)),this.info(n.Init,"Scene Init done, "+r+"(s): ctxId '"+e+"' and canvasId "+t)},sceneId:"",backendVersion:0,backendCommit:"BeforeInit",init:function(e,t,r){this.sceneId=e,this.backendVersion=t[0]<<16+t[1],this.backendCommit=r},end:function(e){!function(e){var t=c[e]||{};for(var r in t){var n=t[r];t[r]>1&&Reporter.reportKeyValue({key:"XR_FRAME",value:r+","+n+","+a})}delete c[e]}(this.sceneId),this.sceneId=""},info:function(e,t){void 0===e&&(e=n.Default);var r=this.backendVersion+","+u(this.backendCommit)+","+e+",3,"+u(t)+",";l(this.sceneId,r)},error:function(e,t){void 0===e&&(e=n.Default);var r=this.backendVersion+","+u(this.backendCommit)+","+e+",1,"+u(t.message)+","+u(t.stack);l(this.sceneId,r)}}},"./src/core/utils.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{StreamReader:()=>s,assert:()=>o,decode:()=>i,wxPromiseWrapper:()=>a});var n=function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};function o(e,t){if(!e)throw t}function i(e,t){return function(e,t){for(var r=new Uint8Array(e),n="",o=0;o<r.length;o++)n+=String.fromCharCode(r[o]);return t&&(n=decodeURIComponent(encodeURIComponent(n))),n}(e,"utf-8"===t)}function a(e,t){var r=new Promise((function(r,o){e(n(n({},t),{success:function(e){r(e)},fail:function(e){o(e)}}))}));return t.success&&(r=r.then(t.success)),t.fail&&(r=r.catch(t.fail)),r}var s=function(){function e(t,r){void 0===r&&(r=0),this.head=0,this.buffer=t,this._size=t.byteLength,this.floatView=new Float32Array(t,r,Math.floor(this._size/e.TypeSize[e.Type.Float])),this.uint32View=new Uint32Array(t,r,Math.floor(this._size/e.TypeSize[e.Type.UInt32])),this.uint16View=new Uint16Array(t,r,Math.floor(this._size/e.TypeSize[e.Type.UInt16]))}return Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.testSufficient=function(e,t){var r=(t-this.head%t)%t;return this.head+r+e>this._size?-1:r},e.prototype.testSufficientByType=function(t){return this.testSufficient(e.TypeSize[t],e.TypeAlignment[t])},e.prototype.read=function(t){var r=this.testSufficientByType(t);if(r<0)throw"[StreamReader]read buffer out of bound.";this.head+=r;var n=this[e.Type[t].toLowerCase()+"View"][this.head/e.TypeAlignment[t]];return this.head+=e.TypeSize[t],n},e.prototype.write=function(t,r){var n=this.testSufficientByType(t);if(n<0)throw"[StreamReader]write buffer out of bound.";this.head+=n,this[e.Type[t].toLowerCase()+"View"][this.head/e.TypeAlignment[t]]=r,this.head+=e.TypeSize[t]},e.prototype.reserve=function(t){var r=this.testSufficientByType(t);if(r<0)throw"[StreamReader]write buffer out of bound.";this.head+=r;var n=this[e.Type[t].toLowerCase()+"View"],o=this.head/e.TypeAlignment[t];return this.head+=e.TypeSize[t],{write:function(e){n[o]=e}}},e.prototype.readChunk=function(e){if(this.head+e>this._size)throw"[StreamReader]read chunk out of bound.";var t=this.buffer.slice(this.head,this.head+e);return this.head+=e,t},e.prototype.align=function(e){var t=this.testSufficient(0,e);if(t<0)throw"[StreamReader]align buffer out of bound.";this.head+=t},e.prototype.end=function(){return this.head===this._size},e.prototype.pos=function(){return this.head},e}();!function(e){var t,r,n;!function(e){e[e.Float=0]="Float",e[e.UInt32=1]="UInt32",e[e.UInt16=2]="UInt16"}(n=e.Type||(e.Type={})),e.TypeAlignment=((t={})[n.Float]=4,t[n.UInt32]=4,t[n.UInt16]=2,t),e.TypeSize=((r={})[n.Float]=4,r[n.UInt32]=4,r[n.UInt16]=2,r)}(s||(s={}))},"./src/elements/index.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ARTrackerDataMapping:()=>v.ARTrackerDataMapping,ARTrackerDefaultComponents:()=>v.ARTrackerDefaultComponents,AssetLoadDataMapping:()=>d.AssetLoadDataMapping,AssetMaterialDataMapping:()=>f.AssetMaterialDataMapping,AssetMaterialDefaultComponents:()=>f.AssetMaterialDefaultComponents,AssetPostProcessDataMapping:()=>g.AssetPostProcessDataMapping,AssetPostProcessDefaultComponents:()=>g.AssetPostProcessDefaultComponents,AssetRenderTextureDataMapping:()=>p.AssetRenderTextureDataMapping,AssetRenderTextureDefaultComponents:()=>p.AssetRenderTextureDefaultComponents,AssetsDefaultComponents:()=>h.AssetsDefaultComponents,CameraDataMapping:()=>a.CameraDataMapping,CameraDefaultComponents:()=>a.CameraDefaultComponents,EnvDataMapping:()=>_.EnvDataMapping,EnvDefaultComponents:()=>_.EnvDefaultComponents,GLTFDataMapping:()=>l.GLTFDataMapping,GLTFDefaultComponents:()=>l.GLTFDefaultComponents,LightDataMapping:()=>u.LightDataMapping,LightDefaultComponents:()=>u.LightDefaultComponents,MeshDataMapping:()=>s.MeshDataMapping,MeshDefaultComponents:()=>s.MeshDefaultComponents,NodeDataMapping:()=>i.NodeDataMapping,NodeDefaultComponents:()=>i.NodeDefaultComponents,ParticleDataMapping:()=>y.ParticleDataMapping,ParticleDefaultComponents:()=>y.ParticleDefaultComponents,Scene:()=>o.default,SceneDataMapping:()=>o.SceneDataMapping,SceneDefaultComponents:()=>o.SceneDefaultComponents,ShadowDataMapping:()=>m.ShadowDataMapping,ShadowDefaultComponents:()=>m.ShadowDefaultComponents,TextDataMapping:()=>c.TextDataMapping,TextDefaultComponents:()=>c.TextDefaultComponents,XRARTracker:()=>v.default,XRAssetLoad:()=>d.default,XRAssetPostProcess:()=>g.default,XRAssetRenderTexture:()=>p.default,XRAssets:()=>h.default,XRCamera:()=>a.default,XREnv:()=>_.default,XRGLTF:()=>l.default,XRLight:()=>u.default,XRMaterial:()=>f.default,XRMesh:()=>s.default,XRNode:()=>i.default,XRParticle:()=>y.default,XRShadow:()=>m.default,XRText:()=>c.default});var n=r("./src/core/Element.ts"),o=r("./src/core/Scene.ts"),i=r("./src/elements/xr-node.ts"),a=r("./src/elements/xr-camera.ts"),s=r("./src/elements/xr-mesh.ts"),c=r("./src/elements/xr-text.ts"),u=r("./src/elements/xr-light.ts"),l=r("./src/elements/xr-gltf.ts"),f=r("./src/elements/xr-asset-material.ts"),p=r("./src/elements/xr-asset-render-texture.ts"),d=r("./src/elements/xr-asset-load.ts"),h=r("./src/elements/xr-assets.ts"),_=r("./src/elements/xr-env.ts"),m=r("./src/elements/xr-shadow.ts"),v=r("./src/elements/xr-ar-tracker.ts"),y=r("./src/elements/xr-particle.ts"),g=r("./src/elements/xr-asset-post-process.ts");(0,n.registerElement)("element",n.default),(0,n.registerElement)("scene",o.default),(0,n.registerElement)("shadow",m.default),(0,n.registerElement)("assets",h.default),(0,n.registerElement)("asset-load",d.default),(0,n.registerElement)("asset-material",f.default),(0,n.registerElement)("asset-render-texture",p.default),(0,n.registerElement)("node",i.default),(0,n.registerElement)("camera",a.default),(0,n.registerElement)("mesh",s.default),(0,n.registerElement)("text",c.default),(0,n.registerElement)("particle",y.default),(0,n.registerElement)("light",u.default),(0,n.registerElement)("gltf",l.default),(0,n.registerElement)("env",_.default),(0,n.registerElement)("ar-tracker",v.default),(0,n.registerElement)("asset-post-process",g.default)},"./src/elements/xr-ar-tracker.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ARTrackerDataMapping:()=>c,ARTrackerDefaultComponents:()=>s,default:()=>u});var n,o=r("./src/core/Element.ts"),i=r("./src/elements/xr-node.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=Object.assign({"ar-tracker":{}},i.NodeDefaultComponents),c=Object.assign({mode:["ar-tracker","mode"],"hit-id":["ar-tracker","hitId"],image:["ar-tracker","image"],src:["ar-tracker","src"],"auto-sync":["ar-tracker","autoSync"]},i.NodeDataMapping);const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=s,t.dataMapping=c,t}return a(t,e),t}(o.default)},"./src/elements/xr-asset-load.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AssetLoadDataMapping:()=>a,default:()=>s});var n,o=r("./src/core/Element.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=Object.assign({type:["asset-load","type"],"asset-id":["asset-load","assetId"],src:["asset-load","src"],defer:["asset-load","defer"],options:["asset-load","options"]},o.BasicDataMapping);const s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dataMapping=a,t.neverTick=!0,t}return i(t,e),t}(o.default)},"./src/elements/xr-asset-material.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AssetMaterialDataMapping:()=>s,AssetMaterialDefaultComponents:()=>a,default:()=>c});var n,o=r("./src/core/Element.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=Object.assign({},o.BasicDefaultComponents),s=Object.assign({"asset-id":["asset-material","assetId"],effect:["asset-material","effect"],marcos:["asset-material","marcos"],uniforms:["asset-material","uniforms"],states:["asset-material","states"],"render-queue":["asset-material","renderQueue"]},o.BasicDataMapping);const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=a,t.dataMapping=s,t}return i(t,e),t}(o.default)},"./src/elements/xr-asset-post-process.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AssetPostProcessDataMapping:()=>s,AssetPostProcessDefaultComponents:()=>a,default:()=>c});var n,o=r("./src/core/Element.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=Object.assign({},o.BasicDefaultComponents),s=Object.assign({"asset-id":["asset-post-process","assetId"],type:["asset-post-process","type"],"is-hdr":["asset-post-process","isHDR"],data:["asset-post-process","data"]},o.BasicDataMapping);const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=a,t.dataMapping=s,t}return i(t,e),t}(o.default)},"./src/elements/xr-asset-render-texture.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AssetRenderTextureDataMapping:()=>s,AssetRenderTextureDefaultComponents:()=>a,default:()=>c});var n,o=r("./src/core/Element.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=Object.assign({},o.BasicDefaultComponents),s=Object.assign({"asset-id":["asset-render-texture","assetId"],width:["asset-render-texture","width"],height:["asset-render-texture","height"],"is-hdr":["asset-render-texture","isHDR"]},o.BasicDataMapping);const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=a,t.dataMapping=s,t}return i(t,e),t}(o.default)},"./src/elements/xr-assets.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AssetsDefaultComponents:()=>a,default:()=>s});var n,o=r("./src/core/Element.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=Object.assign({assets:{}},o.BasicDefaultComponents);const s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=a,t.neverTick=!0,t}return i(t,e),t}(o.default)},"./src/elements/xr-camera.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{CameraDataMapping:()=>c,CameraDefaultComponents:()=>s,default:()=>u});var n,o=r("./src/core/Element.ts"),i=r("./src/elements/xr-node.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=Object.assign({camera:{}},i.NodeDefaultComponents),c=Object.assign({target:["camera","target"],"render-target":["camera","renderTarget"],"is-perspective":["camera","isPerspective"],"cull-mask":["camera","cullMask"],depth:["camera","depth"],fov:["camera","fov"],near:["camera","near"],far:["camera","far"],"orth-size":["camera","orthSize"],background:["camera","background"],"is-ar-camera":["camera","isARCamera"],"is-clear-depth":["camera","isClearDepth"],"is-clear-stencil":["camera","isClearStencil"],"is-clear-color":["camera","isClearColor"],"clear-depth":["camera","clearDepth"],"clear-stencil":["camera","clearStencil"],"clear-color":["camera","clearColor"],"post-process":["camera","postProcess"],"allow-features":["camera","allowFeatures"]},i.NodeDataMapping);const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=s,t.dataMapping=c,t}return a(t,e),t}(o.default)},"./src/elements/xr-env.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{EnvDataMapping:()=>s,EnvDefaultComponents:()=>a,default:()=>c});var n,o=r("./src/core/Element.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=Object.assign({env:{}},o.BasicDefaultComponents),s=Object.assign({"env-data":["env","envData"],"sky-map":["env","skyMap"],"is-sky2d":["env","isSky2D"],rotation:["env","rotation"],"diffuse-exp":["env","diffuseExp"],"specular-exp":["env","specularExp"]},o.BasicDataMapping);const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=a,t.dataMapping=s,t.neverTick=!0,t}return i(t,e),t}(o.default)},"./src/elements/xr-gltf.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{GLTFDataMapping:()=>c,GLTFDefaultComponents:()=>s,default:()=>u});var n,o=r("./src/elements/xr-node.ts"),i=r("./src/elements/xr-shadow.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=Object.assign({gltf:{}},o.NodeDefaultComponents),c=Object.assign({model:["gltf","model"],"cast-shadow":["gltf","castShadow"],"receive-shadow":["gltf","receiveShadow"],"never-cull":["gltf","neverCull"],states:["gltf","states"]},o.NodeDataMapping);const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=s,t.dataMapping=c,t}return a(t,e),t}(i.default)},"./src/elements/xr-light.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{LightDataMapping:()=>c,LightDefaultComponents:()=>s,default:()=>u});var n,o=r("./src/core/Element.ts"),i=r("./src/elements/xr-node.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=Object.assign({light:{}},i.NodeDefaultComponents),c=Object.assign({type:["light","type"],"cast-shadow":["light","castShadow"],"shadow-distance":["light","shadowDistance"],"shadow-strength":["light","shadowStrength"],"shadow-bias":["light","shadowBias"],color:["light","color"],intensity:["light","intensity"],range:["light","range"],"inner-cone-angle":["light","innerConeAngle"],"outer-cone-angle":["light","outerConeAngle"]},i.NodeDataMapping);const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=s,t.dataMapping=c,t}return a(t,e),t}(o.default)},"./src/elements/xr-mesh.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{MeshDataMapping:()=>c,MeshDefaultComponents:()=>s,default:()=>u});var n,o=r("./src/core/Element.ts"),i=r("./src/elements/xr-node.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=Object.assign({mesh:{}},i.NodeDefaultComponents),c=Object.assign({"never-cull":["mesh","neverCull"],"cast-shadow":["mesh","castShadow"],"receive-shadow":["mesh","receiveShadow"],geometry:["mesh","geometry"],material:["mesh","material"],uniforms:["mesh","uniforms"],states:["mesh","states"]},i.NodeDataMapping);const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=s,t.dataMapping=c,t}return a(t,e),t}(o.default)},"./src/elements/xr-node.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{NodeDataMapping:()=>s,NodeDefaultComponents:()=>a,default:()=>c});var n,o=r("./src/core/Element.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=Object.assign({transform:{}},o.BasicDefaultComponents),s=Object.assign({"node-id":["transform","nodeId"],visible:["transform","visible"],layer:["transform","layer"],position:["transform","position"],rotation:["transform","rotation"],scale:["transform","scale"]},o.BasicDataMapping);const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=a,t.dataMapping=s,t.isXRNode=!0,t}return i(t,e),t.IS=function(e){return!!e.isXRNode},t}(o.default)},"./src/elements/xr-particle.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ParticleDataMapping:()=>c,ParticleDefaultComponents:()=>s,default:()=>u});var n,o=r("./src/core/Element.ts"),i=r("./src/elements/xr-node.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=Object.assign({particle:{}},i.NodeDefaultComponents),c=Object.assign({"never-cull":["particle","neverCull"],uniforms:["particle","uniforms"],states:["particle","states"],atlas:["particle","atlas"],"atlas-frames":["particle","atlasFrames"],"atlas-loop":["particle","atlasLoop"],"atlas-speed":["particle","atlasSpeed"],"atlas-random":["particle","atlasRandom"],angle:["particle","angle"],"angular-speed":["particle","angularSpeed"],"burst-count":["particle","burstCount"],"burst-time":["particle","burstTime"],"burst-cycle":["particle","burstCycle"],"burst-interval":["particle","burstInterval"],capacity:["particle","capacity"],delay:["particle","delay"],"emit-rate":["particle","emitRate"],"emitter-type":["particle","emitterType"],"emitter-props":["particle","emitterProps"],"emitter-position":["particle","emitterPosition"],"end-color":["particle","endColor"],gravity:["particle","gravity"],"life-time":["particle","lifeTime"],"render-mode":["particle","renderMode"],size:["particle","size"],"stop-duration":["particle","stopDuration"],speed:["particle","speed"],"start-color":["particle","startColor"],"start-color2":["particle","startColor2"],texture:["particle","texture"],"scale-x":["particle","scaleX"],"scale-y":["particle","scaleY"],"prewarm-cycles":["particle","prewarmCycles"],"speed-dampen":["particle","speedDampen"],mesh:["particle","mesh"],"size-change":["particle","sizeChange"],"color-change":["particle","colorChange"],"speed-change":["particle","speedChange"]},i.NodeDataMapping);const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=s,t.dataMapping=c,t}return a(t,e),t}(o.default)},"./src/elements/xr-shadow.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ShadowDataMapping:()=>u,ShadowDefaultComponents:()=>c,default:()=>l});var n,o=r("./src/core/Element.ts"),i=r("./src/core/logger.ts"),a=r("./src/elements/xr-node.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=Object.assign({},a.NodeDefaultComponents),u=Object.assign({},a.NodeDataMapping);const l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=c,t.dataMapping=u,t._isXRShadow=!0,t}return s(t,e),t.prototype._appendChild=function(t,r){return void 0===r&&(r=!1),r?e.prototype._appendChild.call(this,t):this._showError()},t.prototype._removeChild=function(t,r,n){return void 0===n&&(n=!1),n?e.prototype._removeChild.call(this,t):this._showError()},t.prototype._insertBefore=function(e,t,r){this._showError()},t.prototype._replaceChild=function(e,t,r){this._showError()},t.prototype._spliceBefore=function(e,t,r){this._showError()},t.prototype._spliceAppend=function(e){this._showError()},t.prototype._spliceRemove=function(e,t){this._showError()},t.prototype._showError=function(){i.default.throw(new Error("xr-shadow element does not support children in wxml!"))},t.prototype._release=function(){this.dfs((function(e){return e._release()}),void 0,!0,(function(e){return!!e._isXRShadow})),e.prototype._release.call(this)},t}(o.default)},"./src/elements/xr-text.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{TextDataMapping:()=>c,TextDefaultComponents:()=>s,default:()=>u});var n,o=r("./src/core/Element.ts"),i=r("./src/elements/xr-node.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=Object.assign({text:{}},i.NodeDefaultComponents),c=Object.assign({"never-cull":["text","neverCull"],material:["text","material"],uniforms:["text","uniforms"],value:["text","value"]},i.NodeDataMapping);const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultComponents=s,t.dataMapping=c,t}return a(t,e),t}(o.default)},"./src/ext.ts":(e,t,r)=>{"use strict";var n;r.r(t),r.d(t,{Kanata:()=>o,Phys3D:()=>s,__getKanataSuperHackDontUseIt:()=>p,_wx:()=>a,addKanata:()=>u,exparser:()=>n||(n=r.t(i,2)),getKanata:()=>f,removeKanata:()=>l});var o=r("../kanata/lib/kanata"),i=r("./exparser/src/index.js"),a={},s=null,c={};function u(e,t){c[e._elId]=t}function l(e){delete c[e._elId]}function f(e){return c[e._elId]}function p(){return Object.values(c)[0]}},"./src/framework/exparser/XRContext.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r("./src/core/Element.ts"),o=r("./src/core/logger.ts"),i=r("./src/framework/exparser/XRElement.ts");const a=function(){function e(e,t,r,o){this._canvas=e,this._allContext=t,this._id=r,this._startTs=o,this._styleSheetIdInc=1,this._renderCallbacks=null,this._rootNode=new i.default(n.default.TYPE),this._deferEvents=new Map}return e.prototype.processEvent=function(e,t){this._scene?this._scene._processEvent(e,t):this._deferEvents.set(e,t)},e.prototype.destroy=function(){this._allContext.delete(this._id),this._scene=void 0,this._rootNode=void 0,this._canvas=void 0,this._allContext=void 0},e.prototype.getWindowWidth=function(){return 1},e.prototype.getWindowHeight=function(){return 1},e.prototype.getDevicePixelRatio=function(){return 1},e.prototype.appendStyleSheet=function(e,t){var r=this._styleSheetIdInc;return this._styleSheetIdInc+=1,r},e.prototype.replaceStyleSheet=function(e,t,r){},e.prototype.clearStyleSheets=function(e){},e.prototype.render=function(e){o.default.log("render")},e.prototype.bindRootNode=function(e){this._rootNode=e},e.prototype.getRootNode=function(){return this._rootNode},e.prototype.createElement=function(e,t){var r=this;if("text"!==e&&"image"!==e||o.default.throw(new Error("Text and Image element was not supported in xr-frame !")),"fragment"===e||"slot"===t)return new i.default(n.default.TYPE);if("wx-xr-"!==t.slice(0,6))return o.default.warn("Only support element with prefix 'xr-' !"),new i.default(n.default.TYPE);var a=t.slice(6),s=(0,n.getElement)(a);if((0,n.getElement)(a)){var c=new i.default(s.TYPE);return"scene"===a&&(this._scene&&o.default.throw(new Error("Only support one xr-scene in one xr component !")),this._scene=c.__xrElement,this._scene._setCanvas(this._canvas,this._id),this._deferEvents.forEach((function(e,t){return r._scene._processEvent(t,e)})),this._deferEvents.clear()),c}o.default.error(new Error("Element "+a+" was not registered !"))},e.prototype.getNodeUnderPoint=function(e,t){return this._rootNode},e}()},"./src/framework/exparser/XRElement.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r("./src/core/Element.ts"),o=r("./src/ext.ts"),i=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};const a=function(){function e(e){var t=this;this._type=e,this.__wxElement=void 0,this._children=[],this._attributes={},this._triggerEvent=function(e,r,n){o.exparser.triggerEvent(t,e,r,n)},this.__xrElement=new((0,n.getElement)(e))(e,this._triggerEvent)}return e.prototype.release=function(){this.__xrElement._release(),this.__xrElement=void 0,this.__wxElement=void 0},e.prototype.associateComponent=function(e){this.__wxElement=e,this.__xrElement._associateValue(e)},e.prototype.cloneNode=function(){var t=new e(this._type);if("scene"===this._type)t.__xrElement=this.__xrElement;else for(var r in this._attributes)t.setAttribute(r,this._attributes[r]);return t},e.prototype.equal=function(e){return this.__xrElement===e.__xrElement},e.prototype.getParentNode=function(){return this._parent},e.prototype.getChildNode=function(e){return this._children[e]},e.prototype.appendChild=function(e){e._parent&&e._parent.removeChild(e._parent._children.indexOf(e)),this._children.push(e),this.__xrElement._appendChild(e.__xrElement)},e.prototype.removeChild=function(e){this._children.splice(e,1),this.__xrElement._removeChild(void 0,e)},e.prototype.insertChild=function(e,t){e._parent&&e._parent.removeChild(e._parent._children.indexOf(e)),this._children.splice(t,0,e),this.__xrElement._insertBefore(e.__xrElement,void 0,t)},e.prototype.replaceChild=function(e,t){e._parent&&e._parent.removeChild(e._parent._children.indexOf(e)),this.__xrElement._replaceChild(e.__xrElement,void 0,t)},e.prototype.splice=function(e,t,r){var n;(n=this._children).splice.apply(n,i([e,t],r._children)),this.__xrElement._spliceBefore(e,t,r.__xrElement)},e.prototype.findChildPosition=function(e){return this._children.indexOf(e)},e.prototype.length=function(){return this._children.length},e.prototype.setId=function(e){this.__xrElement._setId(e)},e.prototype.setStyleScope=function(e){this.__xrElement._setStyleScope(e)},e.prototype.setStyle=function(e){this.__xrElement._setStyle(e)},e.prototype.setClass=function(e){this.__xrElement._addClass(e)},e.prototype.removeClass=function(e,t){this.__xrElement._removeClass(e,t)},e.prototype.clearClasses=function(){this.__xrElement._clearClasses()},e.prototype.setAttribute=function(e,t){this._attributes[e]=t,this.__xrElement._setAttribute(e,t)},e.prototype.removeAttribute=function(e){delete this._attributes[e],this.__xrElement._removeAttribute(e)},e.prototype.setText=function(e){this.__xrElement._setText(e)},e}()},"./src/gizmo/capsule.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{getCapsuleGizmo:()=>i});var n=r("./src/gizmo/lines.ts"),o=r("./src/gizmo/primitives/halfCircle.ts");function i(e){var t=e.assets.getAsset("gizmo","capsule");return t||function(e){var t=new n.default(e,2);return t.loop=!0,t.addPoints(o.getVertices()),t.addPoints(o.getVertices()),e.assets.addAsset("gizmo","capsule",t),t}(e)}},"./src/gizmo/cube.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{getCubeGizmo:()=>s});var n=r("./src/gizmo/lines.ts"),o=r("./src/gizmo/primitives/halfCube.ts"),i=r("./src/math/matrix4.ts"),a=r("./src/math/quaternion.ts");function s(e){var t=e.assets.getAsset("gizmo","cube");return t||function(e){var t=new n.default(e,2);t.loop=!1,t.addPoints(o.getVertices()),t.addPoints(o.getVertices());var r=t.getTransformMatrixAt(1);return i.default.fromQuaternion(a.default.createFromNumber(1,0,0,0),r),e.assets.addAsset("gizmo","cube",t),t}(e)}},"./src/gizmo/lines.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r("./src/ext.ts"),o=r("./src/assets/Geometry.ts"),i=r("./src/core/logger.ts"),a=r("./src/math/matrix4.ts"),s=r("./src/core/utils.ts");const c=function(){function e(e,t){this.subLines=[],this.geometry=null,this.bakedVertices=null,this.segments=[],this._loop=!1,this._version=0,this._lineCount=0,this._transformMatrices=[],this.verticesCount=0,this._transformCount=0,this._currentLine=0,this.scene=e,this._lineCount=t,this._transformView=new Float32Array(16*t);for(var r=0;r<t;r++)this._transformMatrices.push(new a.default(this._transformView,16*r)),this._transformMatrices[r].set(a.default.IDENTITY)}return e.prototype.checkFinalWithWarning=function(){return!this.bakedVertices||(i.default.warn("[Gizmo] cannot set lines properties after baking."),!1)},Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(e){this.checkFinalWithWarning&&(this._loop=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformCount",{get:function(){return this._transformCount},enumerable:!1,configurable:!0}),e.prototype.baked=function(){return!!this.bakedVertices},e.prototype.tryIncCurrentLine=function(){return this._currentLine+1>this._lineCount?(i.default.warn("[Gizmo] line count exceeded."),!1):(this._currentLine+=1,!0)},e.prototype.addPoints=function(e){this.tryIncCurrentLine()&&this.subLines.push(e)},e.prototype.addSubLine=function(e){this.tryIncCurrentLine()&&this.subLines.push(e)},e.prototype.breakLine=function(){this.subLines.push(null)},e.prototype.bake=function(){this.bakedVertices},e.prototype.getBakedVertices=function(){return this.bakedVertices||this.bake(),this.bakedVertices},e.prototype.getGeometry=function(){if(this.geometry)return this.geometry;var e={attributes:[{name:"a_position",format:n.Kanata.EVertexFormat.FLOAT3,offset:0,usage:n.Kanata.EVertexLayoutUsage.POSITION},{name:"a_gizmoTransformIndex",format:n.Kanata.EVertexFormat.SHORT2,offset:12,usage:n.Kanata.EVertexLayoutUsage.CUSTOM}],stride:16},t=new((0,n.getKanata)(this.scene).VertexLayout)(e),r=this.calcVerticesCount(),i=new ArrayBuffer(16*r),a=new s.StreamReader(i);this.segments=[0];for(var c=0,u=0,l=0;l<this.subLines.length;l++){var f=this.subLines[l],p=void 0;if(null!==f){p=f.buffer?f:new Float32Array(f.getBakedVertices());for(var d=new s.StreamReader(p.buffer,p.byteOffset),h=0;h<p.length/3;h++)a.write(s.StreamReader.Type.Float,d.read(s.StreamReader.Type.Float)),a.write(s.StreamReader.Type.Float,d.read(s.StreamReader.Type.Float)),a.write(s.StreamReader.Type.Float,d.read(s.StreamReader.Type.Float)),a.write(s.StreamReader.Type.UInt16,u),a.write(s.StreamReader.Type.UInt16,0);u+=1,c+=p.length/3}else this.segments.push(16*c),c+=p.length/3}this._transformCount=u;var _=this._loop?r+1:r,m=new Uint16Array(_);for(l=0;l<r;l++)m[l]=l;this._loop&&(m[r]=0),this.segments.push(16*_),this.geometry=new o.default(this.scene,t,new Float32Array(i),m,n.Kanata.EIndexType.UINT16);for(l=0;l<this.segments.length-1;l++)this.geometry.addSubMesh((this.segments[l+1]-this.segments[l])/16,this.segments[l]);return this.geometry},e.prototype.calcVerticesCount=function(){if(this.verticesCount>0)return this.verticesCount;for(var e=0,t=0;t<this.subLines.length;t++){var r=this.subLines[t];if(null===r);else if(r.buffer)e+=r.length/3;else{e+=r.getBakedVertices().byteLength/12}}return this.verticesCount=e,e},e.prototype.getTransformUniformBuffer=function(){return this._transformView},e.prototype.getTransformMatrixAt=function(e){return this._transformMatrices[e]},e}()},"./src/gizmo/primitives/halfCircle.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{getVertices:()=>o});var n=null;function o(){if(!n){for(var e=[],t=0,r=0;r<20;r++)e.push(1*Math.cos(t),1*Math.sin(t),0),t+=Math.PI/19;(n=new Float32Array(60)).set(e)}return n}},"./src/gizmo/primitives/halfCube.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{getVertices:()=>o});var n=null;function o(){if(!n){for(var e=[-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1],t=0;t<e.length;t++)e[t]*=.5;n=new Float32Array(e)}return n}},"./src/glyph/query.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{CharCodeState:()=>n,getCharCodeState:()=>i,queryGlyph:()=>s,queryGlyphs:()=>c});var n,o=r("./src/ext.ts");!function(e){e[e.Normal=0]="Normal",e[e.Emoji=1]="Emoji",e[e.C0=2]="C0"}(n||(n={}));var i=function(e){var t=e.charCodeAt(0);return t<=31?n.C0:55296<=t&&t<=56319?n.Emoji:n.Normal},a={fontFamily:"",bold:"",italic:"",size:0},s=function(e,t,r,n,i,s){if(""===t||0===i)return null;a.fontFamily=s,a.size=i;var c=t.codePointAt(0);if(!c)return null;var u=(0,o.getKanata)(e).getGlyphInfo(a,c);if(!u)return null;var l=function(e,t,r){var n=t.code,o=t.tex,i=t.uv_x,a=t.uv_y,s=t.uv_w,c=t.uv_h,u=t.advance,l=t.bearing_x,f=t.bearing_y,p=t.width,d=t.height,h=[i,a+c,i,a,i+s,a,i+s,a+c],_={character:e,offsetX:0,offsetY:0,bearingX:0,bearingY:0,advance:u/r,width:0,height:0,texture:0,uvs:h};return 0===n?(_.bearingX=l/r,_.bearingY=f/r,_.width=p/r,_.height=d/r,_.texture=o,_.uvs=h):1!==n&&(o?(_.bearingX=l/r,_.bearingY=f/r,_.width=p/r,_.height=d/r,_.texture=o,_.uvs=h):_.advance=0),_}(t,u,i);return l},c=function(e,t,r,o,a,c){for(var u=[],l=0;l<t.length;l++){var f=t[l],p=i(f);if(p===n.Emoji)f+=t[l+1],l++;else if(p===n.C0)continue;var d=s(e,f,r,o,a,c);d&&u.push(d)}return u}},"./src/loader/AssetLoader.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,getAssetLoader:()=>c,getAssetLoaderTypes:()=>s,registerAssetLoader:()=>u});var n=r("./src/core/DataValue.ts"),o=r("./src/core/logger.ts");const i=function(){function e(e,t){this._scene=e,this.schema={},(0,n.isDataValueHandlerExisted)(t)||(0,n.registerDataValue)(t,{create:function(e,r,n){return n.assets.getAssetWithState(t,e,r)}})}return Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!1,configurable:!0}),e.prototype._parseOptions=function(e){for(var t in this.schema){var r=this.schema[t];r&&(e[t]=(0,n.parseDataValue)(r.type,e[t],r.defaultValue,this._scene))}},e.prototype.load=function(e,t){o.default.throw(new Error("Not implemented !"))},e.prototype.cancel=function(e){e.canceled=!0},e.prototype.release=function(e,t){},e.prototype.getBuiltin=function(){return[]},e}();var a={};function s(){return Object.keys(a)}function c(e){return a[e]}function u(e,t){a[e]?o.default.warn("AssetLoader "+e+" is already existed !"):a[e]=t}},"./src/loader/AtlasLoader.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var n,o=r("./src/assets/Atlas.ts"),i=r("./src/loader/downloader/fetch.ts"),a=r("./src/loader/downloader/url.ts"),s=r("./src/loader/AssetLoader.ts"),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},l=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={},t}return c(t,e),t.prototype.load=function(e,t){return u(this,void 0,void 0,(function(){var r,n,a,s,c,u,f;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),[4,(0,i.fetch)(e.src,"json")];case 1:if(!(r=l.sent().data))throw new Error("Load resource error: "+e.assetId);return t.onLoading(.1),(n=e.src.split("/")).pop(),a=n.join("/"),s=this._getUrl(r.meta.image,a),[4,this._loadImg(s)];case 2:return c=l.sent(),u=new o.default(this.scene,{image:c,frames:r.frames,meta:r.meta}),t.onLoaded(u),[3,4];case 3:return f=l.sent(),t.onError(f),[3,4];case 4:return[2]}}))}))},t.prototype._loadImg=function(e,t){var r=this.scene.createImage();return new Promise((function(n,o){r.onload=function(){n(r)},r.onerror=function(e){o(e)},r.type=t,r.src=e}))},t.prototype._getUrl=function(e,t){return(0,a.isHTTPURL)(e)||(0,a.isCloudURL)(e)||(0,a.isDataURI)(e)?e:t+"/"+e},t.prototype.getBuiltin=function(){return[{assetId:"numbers",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/atlas/numbers/index.json",options:{}}]},t}(s.default)},"./src/loader/CubeTextureLoader.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n,o=r("./src/ext.ts"),i=r("./src/loader/AssetLoader.ts"),a=r("./src/loader/TextureLoader.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={faces:{type:"array"},anisoLevel:{type:"number",defaultValue:1},wrapU:{type:"number",defaultValue:2},wrapV:{type:"number",defaultValue:2},wrapW:{type:"number",defaultValue:2},magFilter:{type:"number"},minFilter:{type:"number"},generateMipmaps:{type:"boolean",defaultValue:!1}},t}return s(t,e),t.prototype.load=function(e,t){var r=this,n=e.options;if((null==n?void 0:n.faces)&&6===n.faces.length){var i=n.faces.map((function(t){var n=e.src+t,o=r.scene.createImage();return new Promise((function(e,t){o.onload=function(){e(o)},o.onerror=function(e){t(e)},o.src=n}))}));Promise.all(i).then((function(e){var i,s,c=(0,a.isPOT)(e[0])?o.Kanata.EFilterMode.LINEAR_MIPMAP_LINEAR:o.Kanata.EFilterMode.NEAREST,u=r.scene.createTexture({type:o.Kanata.ETextureType.Cube,slices:6,source:e,width:e[0].width,height:e[0].height,magFilter:null!==(i=n.magFilter)&&void 0!==i?i:c,minFilter:null!==(s=n.minFilter)&&void 0!==s?s:c,wrapU:n.wrapU,wrapV:n.wrapV,wrapW:n.wrapW,anisoLevel:n.anisoLevel,generateMipmaps:n.generateMipmaps});t.onLoaded(u)})).catch((function(e){t.onError(e)}))}else t.onError(new Error("CubeTexture require 6 faces in options !"))},t.prototype.release=function(e,t){t.destroy()},t}(i.default)},"./src/loader/EnvDataLoader.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_});var n,o=r("./src/assets/EnvData.ts"),i=r("./src/loader/downloader/fetch.ts"),a=r("./src/loader/downloader/url.ts"),s=r("./src/ext.ts"),c=r("./src/loader/AssetLoader.ts"),u=r("./src/core/utils.ts"),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},p=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},d=new Uint32Array([1920497783,1986946349]),h=[Math.sqrt(1/(4*Math.PI)),Math.sqrt(3/(4*Math.PI)),Math.sqrt(3/(4*Math.PI)),Math.sqrt(3/(4*Math.PI)),Math.sqrt(15/(4*Math.PI)),Math.sqrt(15/(4*Math.PI)),Math.sqrt(5/(16*Math.PI)),Math.sqrt(15/(4*Math.PI)),Math.sqrt(15/(16*Math.PI))];const _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={},t}return l(t,e),t.prototype.load=function(e,t){return f(this,void 0,void 0,(function(){var r,n,a,c,l,f,_,m,v,y,g,b,w,x,S,E,T,C,A,O,M,R,P,I,N,D=this;return p(this,(function(p){switch(p.label){case 0:e.options,r=e.src,(n=r.split("/")).pop(),a=n.join("/"),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,(0,i.fetch)(e.src,"binary")];case 2:return(f=p.sent().data).byteLength%4!=0?c=JSON.parse((0,u.decode)(f,"utf-8")):(_=new u.StreamReader(f),m=_.read(u.StreamReader.Type.UInt32),v=_.read(u.StreamReader.Type.UInt32),m===d[0]&&v===d[1]?(y=_.read(u.StreamReader.Type.UInt32),l=_.read(u.StreamReader.Type.UInt32)+16,c=JSON.parse((0,u.decode)(new Uint8Array(f,16,y),"utf-8"))):c=JSON.parse((0,u.decode)(f,"utf-8"))),[3,4];case 3:return g=p.sent(),[2,t.onError(g)];case 4:if(b=c.skybox,w=c.diffuse,x=c.specular,S={},!b)return[3,8];T=void 0,"2D"===b.type?void 0===l?(E=this._getUrl(b.map,a),T=[this._loadImg(E)]):(R=c.skybox.map,E=new Uint8Array(f,l+R.offset,R.length),T=[this._loadImg(E,R.type)]):T=b.map.map((function(e){return D._loadImg(D._getUrl(e,a))})),p.label=5;case 5:return p.trys.push([5,7,,8]),[4,Promise.all(T)];case 6:return C=p.sent(),e.canceled?[2]:(S.skybox={half:b.half,map:this.scene.createTexture({type:"2D"===b.type?s.Kanata.ETextureType.D2:s.Kanata.ETextureType.Cube,source:C,width:C[0].width,height:C[0].height,magFilter:s.Kanata.EFilterMode.LINEAR,minFilter:s.Kanata.EFilterMode.LINEAR,wrapU:s.Kanata.EWrapMode.CLAMP_TO_EDGE,wrapV:s.Kanata.EWrapMode.CLAMP_TO_EDGE,anisoLevel:1})},[3,8]);case 7:return A=p.sent(),t.onError(A),[2];case 8:if(w&&(w.coefficients.forEach((function(e,t){var r=h[t];e[0]*=r,e[1]*=r,e[2]*=r})),S.diffuse={coefficients:new Float32Array(w.coefficients.flat())}),!x)return[3,13];p.label=9;case 9:return p.trys.push([9,12,,13]),S.specular={type:x.type,rgbd:x.rgbd,mipmaps:x.mipmaps,map:S.skybox.map},S.specular.mipmapCount=x.mipmapCount?x.mipmapCount:8,O=void 0,M=void 0,void 0===l?O=this._getUrl(x.map,a):(R=c.specular.map,O=new Uint8Array(f,l+R.offset,R.length),M=R.type),E===O?[3,11]:[4,this._loadImg(O,M)];case 10:if(P=p.sent(),e.canceled)return[2];S.specular.map=this.scene.createTexture({type:s.Kanata.ETextureType.D2,source:[P],width:P.width,height:P.height,magFilter:s.Kanata.EFilterMode.LINEAR,minFilter:s.Kanata.EFilterMode.LINEAR,wrapU:s.Kanata.EWrapMode.CLAMP_TO_EDGE,wrapV:s.Kanata.EWrapMode.CLAMP_TO_EDGE,anisoLevel:1}),p.label=11;case 11:return[3,13];case 12:return I=p.sent(),[2,t.onError(I)];case 13:return N=new o.default(S),t.onLoaded(N),[2]}}))}))},t.prototype._loadImg=function(e,t){var r=this.scene.createImage();return new Promise((function(n,o){r.onload=function(){n(r)},r.onerror=function(e){o(e)},r.type=t,r.src=e}))},t.prototype._getUrl=function(e,t){return(0,a.isHTTPURL)(e)||(0,a.isCloudURL)(e)||(0,a.isDataURI)(e)?e:t+"/"+e},t.prototype.getBuiltin=function(){return[{assetId:"xr-frame-team-workspace-day",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/env-data/xr-frame-team-workspace-day.bin",options:{}},{assetId:"xr-frame-team-workspace-night",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/env-data/xr-frame-team-workspace-night.bin",options:{}},{assetId:"xr-frame-team-workspace-day2",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/env-data/xr-frame-team-workspace-day2.bin",options:{}},{assetId:"gz-haixinsha",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/env-data/gz-haixinsha.bin",options:{}},{assetId:"luguhu-side",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/env-data/luguhu-side.bin",options:{}},{assetId:"luguhu-caohai",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/env-data/luguhu-caohai.bin",options:{}}]},t.prototype.release=function(e,t){t.destroy()},t}(c.default)},"./src/loader/GlTFLoader.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{GLBChunkType:()=>o,default:()=>y});var n,o,i=r("./src/assets/GLTFModel.ts"),a=r("./src/loader/AssetLoader.ts"),s=r("./src/loader/glTF/GLTFRootNode.ts"),c=r("./src/loader/downloader/fetch.ts"),u=r("./src/core/utils.ts"),l=r("./src/loader/glTF/extensions/index.ts"),f=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),p=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},d=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e[e.JSON=1313821514]="JSON",e[e.BIN=5130562]="BIN"}(o||(o={}));var h=.2,_=.3,m=.9,v=1;const y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={ignoreTextureError:{type:"boolean",defaultValue:!1}},t}return f(t,e),t.prototype.load=function(e,r){return p(this,void 0,Promise,(function(){var n,o,i;return d(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,(0,c.fetch)(e.src,"binary")];case 1:return n=a.sent().data,r.onLoading(h),[4,t.createGLTFModel(this.scene,n,e.src,r.onLoading)];case 2:return o=a.sent(),r.onLoaded(o),[3,4];case 3:return i=a.sent(),r.onError(i),[3,4];case 4:return[2]}}))}))},t.prototype.cancel=function(t){e.prototype.cancel.call(this,t)},t.prototype.release=function(e,t){},t.createGLTFModel=function(e,t,r,n){return void 0===r&&(r=""),p(this,void 0,void 0,(function(){var o,a,c,u,f,p,h;return d(this,(function(d){switch(d.label){case 0:return o=this.extractChunks(t),a=o[0],c=o[1],u={raw:a,scene:e,uri:r.split("/").slice(0,-1).join("/"),extensionProfiles:l.allExtensionProfiles,defaultBinary:c},(f=new s.default(u)).build(),null==n||n(_),[4,f.preload((function(e){null==n||n(_+(m-_)*e)}))];case 1:return p=d.sent(),h=new i.default(e,p),f.releaseRawBuffer(),null==n||n(v),[2,h]}}))}))},t.extractChunks=function(e){var t=new u.StreamReader(e);if(1179937895!==t.read(u.StreamReader.Type.UInt32)){var r=(0,u.decode)(e,"utf-8");return[JSON.parse(r),null]}var n=t.read(u.StreamReader.Type.UInt32),i=t.read(u.StreamReader.Type.UInt32);(0,u.assert)(2===n,"[GLB]wrong version: "+n+"."),(0,u.assert)(i===t.size,"[GLB] total length in glb is marked "+i+", while actual binary size is "+t.size+".");var a=t.read(u.StreamReader.Type.UInt32),s=t.read(u.StreamReader.Type.UInt32);(0,u.assert)(s===o.JSON,"[GLB]the first chunk should be of type 0x"+o.JSON.toString(16)+" instead of type 0x"+s.toString(16)+"."),t.align(4);var c=t.readChunk(a);t.align(4);var l=null;t.end()||(a=t.read(u.StreamReader.Type.UInt32),s=t.read(u.StreamReader.Type.UInt32),(0,u.assert)(s===o.BIN,"[GLB]the second chunk should be of type 0x"+o.BIN.toString(16)+" instead of type 0x"+s.toString(16)+"."),t.align(4),l=t.readChunk(a),t.align(4));r=(0,u.decode)(c,"utf-8");return[JSON.parse(r),l]},t}(a.default)},"./src/loader/ImageLoader.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n,o=r("./src/loader/AssetLoader.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={},t}return i(t,e),t.prototype.load=function(e,t){var r=this.scene.createImage();r.onload=function(){t.onLoaded(r)},r.onerror=function(e){t.onError(e)},r.src=e.src},t.prototype.release=function(e,t){},t}(o.default)},"./src/loader/KeyframeLoader.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n,o=r("./src/animation/KeyframeAnimation.ts"),i=r("./src/loader/downloader/fetch.ts"),a=r("./src/loader/AssetLoader.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},u=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={},t}return s(t,e),t.prototype.load=function(e,t){return c(this,void 0,void 0,(function(){var r,n,a;return u(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,(0,i.fetch)(e.src,"json")];case 1:return r=s.sent().data,[3,3];case 2:return n=s.sent(),[2,t.onError(n)];case 3:return a=new o.default(this.scene,r),t.onLoaded(a),[2]}}))}))},t}(a.default)},"./src/loader/RawLoader.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n,o=r("./src/loader/downloader/fetch.ts"),i=r("./src/loader/AssetLoader.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},c=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={},t}return a(t,e),t.prototype.load=function(e,t){return s(this,void 0,void 0,(function(){var r,n,i,a;return c(this,(function(s){switch(s.label){case 0:r=e.options,n=e.src,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(0,o.fetch)(n,r.encoding||"binary")];case 2:return i=s.sent().data,t.onLoaded(i),[3,4];case 3:return a=s.sent(),t.onError(a),[3,4];case 4:return[2]}}))}))},t}(i.default)},"./src/loader/TextureLoader.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,isPOT:()=>s});var n,o=r("./src/ext.ts"),i=r("./src/loader/AssetLoader.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function s(e){return Math.log2(e.width)%1==0&&Math.log2(e.height)%1==0}const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={anisoLevel:{type:"number",defaultValue:1},wrapU:{type:"number",defaultValue:2},wrapV:{type:"number",defaultValue:2},magFilter:{type:"number"},minFilter:{type:"number"},generateMipmaps:{type:"boolean",defaultValue:!1}},t}return a(t,e),t.prototype.load=function(e,t){var r=this,n=e.options,i=this.scene.createImage();i.onload=function(){var e,a,c=s(i)?o.Kanata.EFilterMode.LINEAR_MIPMAP_LINEAR:o.Kanata.EFilterMode.NEAREST,u=r.scene.createTexture({source:[i],width:i.width,height:i.height,magFilter:null!==(e=n.magFilter)&&void 0!==e?e:c,minFilter:null!==(a=n.minFilter)&&void 0!==a?a:c,wrapU:n.wrapU,wrapV:n.wrapV,anisoLevel:n.anisoLevel,generateMipmaps:n.generateMipmaps});t.onLoaded(u)},i.onerror=function(e){t.onError(e)},i.src=e.src},t.prototype.getBuiltin=function(){return[{assetId:"brdf-lut",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/brdflut.png",options:{}},{assetId:"uv-debug",src:"https://mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com/xr-frame/uv-debug.png",options:{}}]},t.prototype.release=function(e,t){t.destroy()},t}(i.default)},"./src/loader/VideoTextureLoader.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n,o=r("./src/loader/AssetLoader.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},c=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};const l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema={autoPlay:{type:"boolean",defaultValue:!1},placeHolder:{type:"string"},loop:{type:"boolean",defaultValue:!1},abortAudio:{type:"boolean",defaultValue:!0},anisoLevel:{type:"number",defaultValue:1}},t}return i(t,e),t.prototype.load=function(e,t){return s(this,void 0,void 0,(function(){var r,n,o,i,s,l,f=this;return c(this,(function(c){switch(c.label){case 0:return r=e.options,n=r.placeHolder,o=u(r,["placeHolder"]),n?[4,new Promise((function(e){var t=f.scene.createImage();t.onload=function(){return e(t)},t.onerror=function(){return e(void 0)},t.src=n}))]:[3,2];case 1:i=c.sent(),c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.scene.createVideoTexture(a({src:e.src,placeHolder:i},o))];case 3:return s=c.sent(),t.onLoaded(s),[3,5];case 4:return l=c.sent(),t.onError(l),[3,5];case 5:return[2]}}))}))},t.prototype.release=function(e,t){t.release()},t}(o.default)},"./src/loader/downloader/cache.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{CacheRecord:()=>u,cacheInfoToHeader:()=>_,chooseCacheRecord:()=>f,clearCache:()=>d,getCacheControlHeader:()=>m,headerToCacheInfo:()=>h,initCache:()=>p});var n=r("./src/core/logger.ts"),o=r("./src/core/utils.ts"),i=r("./src/ext.ts"),a=r("./src/loader/downloader/url.ts"),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},c=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=function(){function e(e){this.cacheMap={},this.getStorage=e.getStorage,this.setStorage=e.setStorage,this.cacheStorageKey=e.cacheStorageKey}return e.prototype.validateCacheMap=function(e){if("object"!=typeof e)return!1;for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t],o=e[n];o.localPath?o.expires&&Date.now()>o.expires&&delete e[n]:delete e[n]}return!0},e.prototype.initCache=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,o.wxPromiseWrapper)(this.getStorage(),{key:this.cacheStorageKey})];case 1:return e=t.sent().data,this.validateCacheMap(e)&&(this.cacheMap=e),[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.saveCacheMap=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2,(0,o.wxPromiseWrapper)(this.setStorage(),{key:this.cacheStorageKey,data:this.cacheMap}).catch((function(e){n.default.warn("[Cache]saveCacheMap faild: ",e)}))]}))}))},e.prototype.updateCacheMap=function(e,t){t?this.cacheMap[e]=t:delete this.cacheMap[e],this.saveCacheMap()},e.prototype.clearCache=function(){this.cacheMap={},this.saveCacheMap()},e}(),l=new u({getStorage:function(){return i._wx.getStorage},setStorage:function(){return i._wx.setStorage},cacheStorageKey:"wxfTempDirCache"});function f(e){return(0,a.isBuiltinURL)(e),l}function p(){return l.initCache()}function d(){l.clearCache()}function h(e,t){var r={localPath:null!=t?t:""};return e["Last-Modified"]&&(r.lastModified=new Date(e["Last-Modified"]).getTime()),e.ETag&&(r.eTag=e.ETag),e.Expires&&(r.expires=new Date(e.Expires).getTime()),r}function _(e){var t={};return e.lastModified&&(t["If-Modified-Since"]=new Date(e.lastModified).toUTCString()),e.eTag&&(t["If-None-Match"]=e.eTag),t}function m(){return{"Cache-Control":"max-age=604800"}}},"./src/loader/downloader/fetch.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{fetch:()=>s});var n=r("./src/loader/downloader/native.ts"),o=r("./src/loader/downloader/url.ts"),i=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},a=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function s(e,t){return i(this,void 0,Promise,(function(){var r,i,s,c,u,l;return a(this,(function(a){switch(a.label){case 0:return"binary"!==(r=null!=t?t:"binary")&&"utf-8"!==r&&"json"!==r&&(r="json"),(0,o.isDataURI)(e)?[2,{data:(0,n.dataURIDecoder)(e,r)}]:[3,1];case 1:return(0,o.isHTTPURL)(e)?[4,(0,n.downloadAndReadFile)(e,r)]:[3,3];case 2:return i=a.sent(),c=i[0],u=i[1],[2,{data:c,filePath:u}];case 3:return(0,o.isCloudURL)(e)?[4,(0,n.downloadAndReadFileCloud)(e,r)]:[3,5];case 4:return s=a.sent(),c=s[0],u=s[1],[2,{data:c,filePath:u}];case 5:return l={},[4,(0,n.readFile)(e,r)];case 6:return[2,(l.data=a.sent(),l.filePath=e,l)]}}))}))}},"./src/loader/downloader/native.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{dataURIDecoder:()=>h,downloadAndReadFile:()=>f,downloadAndReadFileCloud:()=>d,readFile:()=>u});var n=r("./src/core/utils.ts"),o=r("./src/ext.ts"),i=r("./src/loader/downloader/cache.ts"),a=r("./src/loader/downloader/url.ts"),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},c=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function u(e,t){return s(this,void 0,Promise,(function(){var r,i,s,u,l,f;return c(this,(function(c){switch(c.label){case 0:return"binary"===t&&(0,a.isLocalFileURL)(e)?[4,(0,n.wxPromiseWrapper)(o._wx.getFileSystemManager().open,{filePath:e})]:[3,8];case 1:return r=c.sent().fd,[4,(0,n.wxPromiseWrapper)(o._wx.getFileSystemManager().fstat,{fd:r})];case 2:if(!((i=c.sent().stats.size)>0))return[3,6];s=new ArrayBuffer(i),u=0,c.label=3;case 3:return i>0?(l=Math.min(i,10485760),[4,(0,n.wxPromiseWrapper)(o._wx.getFileSystemManager().read,{fd:r,arrayBuffer:s,offset:u,length:l})]):[3,5];case 4:return c.sent(),u+=l,i-=l,[3,3];case 5:return o._wx.getFileSystemManager().close({fd:r}),[2,s];case 6:throw"read file error: file size is 0.";case 7:return[3,10];case 8:return[4,(0,n.wxPromiseWrapper)(o._wx.getFileSystemManager().readFile,{filePath:e,encoding:"binary"===t?void 0:"utf-8"})];case 9:return f=c.sent().data,"json"===t?[2,JSON.parse(f)]:[2,f];case 10:return[2]}}))}))}function l(e){return s(this,void 0,Promise,(function(){var t,r;return c(this,(function(a){switch(a.label){case 0:if(t=(0,i.chooseCacheRecord)(e),!(r=t.cacheMap[e]))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,n.wxPromiseWrapper)(o._wx.getFileSystemManager().access,{path:r.localPath})];case 2:return a.sent(),[2,!0];case 3:return a.sent(),t.updateCacheMap(e),[2,!1];case 4:return[2,!1]}}))}))}function f(e,t){return s(this,void 0,Promise,(function(){var r,s,f,p,d,h,_,m,v;return c(this,(function(c){switch(c.label){case 0:return r=(0,i.chooseCacheRecord)(e),[4,l(e)];case 1:return s=c.sent(),f="",s?[3,3]:[4,(0,n.wxPromiseWrapper)(o._wx.downloadFile,{url:e,enableHttp2:!0,header:(0,i.getCacheControlHeader)(),__skipDomainCheck__:(0,a.isBuiltinURL)(e)})];case 2:return p=c.sent(),_=p.tempFilePath,m=p.header,v=(0,i.headerToCacheInfo)(m,_),r.updateCacheMap(e,v),f=_,[3,7];case 3:d=r.cacheMap[e],c.label=4;case 4:return c.trys.push([4,6,,7]),[4,(0,n.wxPromiseWrapper)(o._wx.downloadFile,{url:e,enableHttp2:!0,header:(0,i.cacheInfoToHeader)(d),__skipDomainCheck__:(0,a.isBuiltinURL)(e)})];case 5:return h=c.sent(),_=h.tempFilePath,m=h.header,304===h.statusCode?f=d.localPath:(v=(0,i.headerToCacheInfo)(m,_),r.updateCacheMap(e,v),f=_),[3,7];case 6:return"downloadFile:fail file data is empty"===c.sent().errMsg&&(f=d.localPath),[3,7];case 7:return[4,u(f,t)];case 8:return[2,[c.sent(),f]]}}))}))}var p="";function d(e,t){return s(this,void 0,Promise,(function(){var r,s,f,d,h;return c(this,(function(c){switch(c.label){case 0:return r=(0,i.chooseCacheRecord)(e),[4,l(e)];case 1:if(s=c.sent(),f="",s)return[3,3];if("",(d=(0,a.extractEnvFromCloud)(e))&&d!==p){p=d;try{o._wx.cloud.init({env:d})}catch(e){throw"初始化微信云环境"+d+"失败: "+e}}else if(!d)throw"获取微信云环境ID失败: "+e;return[4,(0,n.wxPromiseWrapper)(o._wx.cloud.downloadFile,{fileID:e})];case 2:return h=c.sent().tempFilePath,r.updateCacheMap(e,h),f=h,[3,4];case 3:f=r.cacheMap[e].localPath,c.label=4;case 4:return[4,u(f,t)];case 5:return[2,[c.sent(),f]]}}))}))}function h(e,t){var r=e.split(","),i=(r[0],r[1]);if(i){var a=void 0;try{a=(0,o.__getKanataSuperHackDontUseIt)().decodeBase64(i)}catch(e){a=o._wx.base64ToArrayBuffer(i)}if("binary"===t)return a;var s=(0,n.decode)(a,"utf-8");return"utf-8"===t?s:JSON.parse(s)}return"binary"===t?new ArrayBuffer(0):"utf-8"===t?"":{}}},"./src/loader/downloader/url.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{extractEnvFromCloud:()=>h,isAbsoluteURL:()=>m,isBuiltinURL:()=>g,isCloudURL:()=>f,isDataURI:()=>p,isHTTPURL:()=>l,isLocalFileURL:()=>c,isPackageFileURL:()=>y,isUserChooseFile:()=>v,isValidRemoteURL:()=>_,replaceFileProtocol:()=>u});var n=/^file\:\/\/\//,o=/^wxfile\:\/\//,i=/^http(s)?\:\/\//,a=/^cloud\:\/\//,s=/^data\:/;function c(e){return n.test(e)||o.test(e)||false}function u(e,t){return e.replace(/^file:\/\/\//,t)}function l(e){return i.test(e)}function f(e){return a.test(e)}function p(e){return s.test(e)}var d=/^cloud:\/\/([a-z0-9-]+)\./;function h(e){var t=d.exec(e);return t&&t.length>1?t[1]:""}function _(e){return l(e)||f(e)}function m(e){return c(e)||l(e)||f(e)}function v(e){return/^wxfile:\/\/tmp\_/.test(e)}function y(e){return!m(e)}function g(e){return/^https:\/\/mmbizwxaminiprogram-1258344707.cos.ap-guangzhou.myqcloud.com\/xr-frame\//.test(e)}},"./src/loader/glTF/GLTFBaseNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{GLTFArrayNode:()=>c,GLTFBaseNode:()=>s});var n,o=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},a=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};var s=function(){function e(e,t){var r;this.isValid=!1,this.and=this.assert,this.raw=e,this.parent=t,this.scene=null===(r=this.parent)||void 0===r?void 0:r.scene,this.customName=this.raw.name;var n=this.findRoot(!0),o=n.root,i=n.path;if(o.nodesCollector&&(o.nodesCollector[i]||(o.nodesCollector[i]=[]),o.nodesCollector[i].push(this)),t){this._preload=this.preload;var a=this._preload;if(this.raw.extensions)for(var s=o.extensionProfiles,c=function(e){if(u.raw.extensions[e]){var t=s[e];if(t.preloads[i]){var r=u.raw.extensions[e],n=t.preloads[i],c=o.extensionGlobals[e];return a=function(e){return n.call(this,r,c,e)},"break"}}},u=this,l=0,f=Object.keys(s);l<f.length;l++){if("break"===c(f[l]))break}this.preload=function(e){var t=this;return this._prerequisites=e,a.call(this,e).finally((function(){t._prerequisites=null}))}}}return e.prototype.validate=function(){},e.prototype.assert=function(e,t){if(e)return this;throw this.isValid=!1,"GLTF validation failed at ["+this.nodeName+"Node]"+(this.customName?" ["+this.customName+"]":"")+(t?": "+t:"")},e.prototype.findRoot=function(e){if(void 0===e&&(e=!1),e){for(var t=(r=this).nodeName;r.parent;)t=(r=r.parent).nodeName+"-"+t;return{root:r,path:t}}for(var r=this;r.parent;)r=r.parent;return r},e.prototype.getExtensionRaw=function(e){var t;return null===(t=this.raw.extension)||void 0===t?void 0:t[e]},e.prototype.extensionSlot=function(e,t){for(var r,n=this.findRoot(),o=n.extensionProfiles,i=0,a=Object.keys(o);i<a.length;i++){var s=a[i],c=o[s];if((null===(r=this.raw.extensions)||void 0===r?void 0:r[s])&&c.slotCodeMap.has(e)){var u=c.slotCodeMap.get(e),l=n.extensionGlobals[s];return u.call(this,this.raw.extensions[s],l,this._prerequisites,t)}if(c.forceSlotCodeMap.has(e)){u=c.forceSlotCodeMap.get(e),l=n.extensionGlobals[s];return u.call(this,l,this._prerequisites,t)}}},e.prototype.releaseLoadedResource=function(){this.resource=null},e}(),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.children=[],t.resources=[],t}return o(t,e),t.prototype.validate=function(){for(var e=0,t=this.children;e<t.length;e++){t[e].validate()}},t.prototype.preload=function(e){return i(this,void 0,Promise,(function(){var t,r,n,o,i,s;return a(this,(function(a){switch(a.label){case 0:for(t=[],r=0,n=this.children;r<n.length;r++)s=n[r],t.push(s.preload(e));return[4,Promise.all(t)];case 1:for(a.sent(),o=0,i=this.children;o<i.length;o++)s=i[o],this.resources.push(s.getLoadedResource());return[2,this.resources]}}))}))},t.prototype.build=function(){for(var e=0,t=this.raw;e<t.length;e++){var r=t[e],n=this.ChildCtor(r);n.build(),this.children.push(n)}},t.prototype.releaseLoadedResource=function(){for(var e=0,t=this.children;e<t.length;e++){t[e].releaseLoadedResource()}this.resources=[]},t}(s)},"./src/loader/glTF/GLTFRootNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var n,o=r("./src/core/logger.ts"),i=r("./src/loader/glTF/animations/GLTFAnimationsNode.ts"),a=r("./src/loader/glTF/buffers/GLTFAccessorsNode.ts"),s=r("./src/loader/glTF/buffers/GLTFBuffersNode.ts"),c=r("./src/loader/glTF/buffers/GLTFBufferViewsNode.ts"),u=r("./src/loader/glTF/geometry/GLTFMeshesNode.ts"),l=r("./src/loader/glTF/GLTFBaseNode.ts"),f=r("./src/loader/glTF/materials/GLTFMaterialsNode.ts"),p=r("./src/loader/glTF/scenes/GLTFNodesNode.ts"),d=r("./src/loader/glTF/scenes/GLTFScenesNode.ts"),h=r("./src/loader/glTF/skins/GLTFSkinsNode.ts"),_=r("./src/loader/glTF/textures/GLTFImagesNode.ts"),m=r("./src/loader/glTF/textures/GLTFSamplersNode.ts"),v=r("./src/loader/glTF/textures/GLTFTexturesNode.ts"),y=r("./src/loader/glTF/utils/GLTFTopology.ts"),g=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),b=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},w=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},x=.4,S=.4,E=.2;const T=function(e){function t(t){var r,n,o,i=e.call(this,t.raw)||this;return i.extensionProfiles={},i.extensionGlobals={},i.resource=null,i.scene=t.scene,i.uri=null!==(r=t.uri)&&void 0!==r?r:"",i.defaultBinary=null!==(n=t.defaultBinary)&&void 0!==n?n:null,i.nodesCollector={},i.nodesCollector[i.nodeName]=[i],i.manageExtensions(null!==(o=t.extensionProfiles)&&void 0!==o?o:{}),i}return g(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Root"},enumerable:!1,configurable:!0}),t.prototype.build=function(){var e,t,r,n,o,l,y,g,b,w,x,S;this.buffersNode=new s.default(null!==(e=this.raw.buffers)&&void 0!==e?e:[],this),this.bufferViewsNode=new c.default(null!==(t=this.raw.bufferViews)&&void 0!==t?t:[],this),this.accessorsNode=new a.default(null!==(r=this.raw.accessors)&&void 0!==r?r:[],this),this.imagesNode=new _.default(null!==(n=this.raw.images)&&void 0!==n?n:[],this),this.samplersNode=new m.default(null!==(o=this.raw.samplers)&&void 0!==o?o:[],this),this.texturesNode=new v.default(null!==(l=this.raw.textures)&&void 0!==l?l:[],this),this.materialsNode=new f.default(null!==(y=this.raw.materials)&&void 0!==y?y:[],this),this.meshesNode=new u.default(null!==(g=this.raw.meshes)&&void 0!==g?g:[],this),this.nodesNode=new p.default(null!==(b=this.raw.nodes)&&void 0!==b?b:[],this),this.scenesNode=new d.default(null!==(w=this.raw.scenes)&&void 0!==w?w:[],this),this.skinsNode=new h.default(null!==(x=this.raw.skins)&&void 0!==x?x:[],this),this.animationsNode=new i.default(null!==(S=this.raw.animations)&&void 0!==S?S:[],this),this.buffersNode.build(),this.bufferViewsNode.build(),this.accessorsNode.build(),this.imagesNode.build(),this.samplersNode.build(),this.texturesNode.build(),this.materialsNode.build(),this.meshesNode.build(),this.nodesNode.build(),this.scenesNode.build(),this.skinsNode.build(),this.animationsNode.build()},t.prototype.preload=function(e){var t;return b(this,void 0,Promise,(function(){var r,n,o,i,a,s,c,u,l,f,p,d,h,_,m,v,g,b;return w(this,(function(w){switch(w.label){case 0:return r=[],n=(0,y.genTopoNodeClassByCollector)(r),o=0,i=n(this.buffersNode),a=n(this.bufferViewsNode),s=n(this.accessorsNode),i.preload(),a.preload([i]),s.preload([a]).then((function(){o+=x,null==e||e(o)})),c=n(this.imagesNode),u=n(this.samplersNode),l=n(this.texturesNode),c.preload([a]),u.preload(),l.preload([c,u]).then((function(){o+=S,null==e||e(o)})),(f=n(this.materialsNode)).preload([l]),p=n(this.meshesNode),d=new Map,p.preload([f,s],[d]).then((function(){o+=E,null==e||e(o)})),(h=n(this.skinsNode)).preload([s]),(_=n(this.nodesNode)).preload([p,h]),n(this.scenesNode).preload([_]),n(this.animationsNode).preload([s,_]),[4,Promise.all(r.map((function(e){return e.promise})))];case 1:for(w.sent(),null==e||e(1),this.resource={samplers:this.samplersNode.getLoadedResource(),textures:this.texturesNode.getLoadedResource(),materials:this.materialsNode.getLoadedResource(),meshes:this.meshesNode.getLoadedResource(),nodes:this.nodesNode.getLoadedResource(),scenes:this.scenesNode.getLoadedResource(),scene:this.scenesNode.getLoadedResource()[null!==(t=this.raw.scene)&&void 0!==t?t:0],skins:this.skinsNode.getLoadedResource(),animations:this.animationsNode.getLoadedResource()},m=0,v=Object.keys(this.extensionProfiles);m<v.length;m++)g=v[m],"function"==typeof(b=this.extensionProfiles[g]).postBuild&&b.postBuild(this,this.extensionGlobals[g]);return[2,this.resource]}}))}))},t.prototype.getLoadedResource=function(){return this.resource},t.prototype.getNodesByPath=function(e){var t;return null!==(t=this.nodesCollector[e])&&void 0!==t?t:[]},t.prototype.getRootExtensionRaw=function(e){var t;return null===(t=this.raw.extensions)||void 0===t?void 0:t[e]},t.prototype.manageExtensions=function(e){var t;if(this.extensionProfiles={},this.raw.extensionsRequired)for(var r=0,n=this.raw.extensionsRequired;r<n.length;r++){if(!e[u=n[r]])throw'[GLTF]required extension "'+u+'" not supported.'}if(this.raw.extensionsUsed)for(var i=0,a=this.raw.extensionsUsed;i<a.length;i++){e[u=a[i]]?this.extensionProfiles[u]=e[u]:o.default.warn('[GLTF]used extension "'+u+'" not supported.')}for(var s=0,c=Object.keys(this.extensionProfiles);s<c.length;s++){var u=c[s];this.extensionGlobals[u]={},this.extensionProfiles[u].rootInit&&(null===(t=this.raw.extensions)||void 0===t?void 0:t[u])&&this.extensionProfiles[u].rootInit(this.raw.extensions[u],this.extensionGlobals[u])}},t.prototype.releaseRawBuffer=function(){this.buffersNode.releaseLoadedResource(),this.bufferViewsNode.releaseLoadedResource(),this.accessorsNode.releaseLoadedResource(),this.imagesNode.releaseLoadedResource(),this.defaultBinary=null;for(var e=0,t=Object.values(this.nodesCollector);e<t.length;e++)for(var r=0,n=t[e];r<n.length;r++){n[r].raw={}}this.raw={}},t}(l.GLTFBaseNode)},"./src/loader/glTF/animations/GLTFAnimationNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n,o=r("./src/animation/NativeAnimation.ts"),i=r("./src/core/utils.ts"),a=r("./src/ext.ts"),s=r("./src/loader/glTF/GLTFBaseNode.ts"),c=r("./src/loader/glTF/animations/channels/GLTFChannelsNode.ts"),u=r("./src/loader/glTF/animations/samplers/GLTFSamplersNode.ts"),l=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},p=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return l(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Animation"},enumerable:!1,configurable:!0}),t.prototype.build=function(){this.samplersNode=new u.default(this.raw.samplers,this),this.channelsNode=new c.default(this.raw.channels,this),this.samplersNode.build(),this.channelsNode.build()},t.prototype.preload=function(e){return f(this,void 0,Promise,(function(){var t,r,n,s,c,u,l,f,d,h,_,m,v,y,g;return p(this,(function(p){switch(p.label){case 0:return t=e[0],r=e[1],[4,this.samplersNode.preload([t])];case 1:return n=p.sent(),[4,this.channelsNode.preload([r,n])];case 2:for(s=p.sent(),c=16,y=0;y<s.length;y++)c+=s[y].headerBytesNeeded+s[y].bodyBytesNeeded;for(this.assert(c%4==0),u=new ArrayBuffer(c),l=new i.StreamReader(u),f=l.reserve(i.StreamReader.Type.UInt32),l.write(i.StreamReader.Type.Float,o.DefaultNativeAnimationFPS),d=l.reserve(i.StreamReader.Type.UInt32),h=l.reserve(i.StreamReader.Type.UInt32),_=0,m=0,y=0;y<s.length;y++)s[y].serializeHeaderOnBuffer(l,m),_+=s[y].vectorGroups,m+=s[y].morphNodeCount+1;for(f.write(l.pos()),h.write(_),v=0,y=0;y<s.length;y++)v=Math.max(v,s[y].serializeBodyOnBuffer(l));return d.write(v),(g=new((0,a.getKanata)(this.scene).AnimationClipModel)).setAnimationClip(u),this.resource={clip:g,channels:s,frameCount:v,name:this.raw.name},[2,this.resource]}}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(s.GLTFBaseNode)},"./src/loader/glTF/animations/GLTFAnimationsNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/animations/GLTFAnimationNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.ChildCtor=function(e){return new i.default(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Animations"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(o.GLTFArrayNode)},"./src/loader/glTF/animations/channels/GLTFChannelNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{EnumPuppetAnimationSampleGroupType:()=>i,default:()=>v});var n,o,i,a=r("./src/animation/NativeAnimation.ts"),s=r("./src/core/utils.ts"),c=r("./src/loader/glTF/GLTFBaseNode.ts"),u=r("./src/loader/glTF/animations/samplers/GLTFSamplerNode.ts"),l=r("./src/loader/glTF/animations/channels/GLTFTargetNode.ts"),f=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),p=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},d=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e[e.tx=1]="tx",e[e.ty=2]="ty",e[e.tz=3]="tz",e[e.sx=4]="sx",e[e.sy=5]="sy",e[e.sz=6]="sz",e[e.qx=7]="qx",e[e.qy=8]="qy",e[e.qz=9]="qz",e[e.qw=10]="qw",e[e.ex=11]="ex",e[e.ey=12]="ey",e[e.ez=13]="ez"}(i||(i={}));var h=i,_=((o={})[l.GLTFEnumAnimationTargetPath.TRANSLATION]=[h.tx,h.ty,h.tz],o[l.GLTFEnumAnimationTargetPath.ROTATION]=[h.qx,h.qy,h.qz,h.qw],o[l.GLTFEnumAnimationTargetPath.SCALE]=[h.sx,h.sy,h.sz],o[l.GLTFEnumAnimationTargetPath.WEIGHTS]=[h.tx,h.ty,h.tz,h.qx,h.qy,h.qz,h.sx,h.sy,h.sz],o),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return f(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Channel"},enumerable:!1,configurable:!0}),t.prototype.build=function(){this.targetNode=new l.default(this.raw.target,this)},t.prototype.preload=function(e){return p(this,void 0,Promise,(function(){var t,r,n,o,i,a,s,c,u;return d(this,(function(f){switch(f.label){case 0:return t=e[0],r=e[1],[4,this.targetNode.preload([t])];case 1:return n=f.sent(),o=r[this.raw.sampler],i=_[n.path],a=i.length,s=0,n.path===l.GLTFEnumAnimationTargetPath.WEIGHTS&&(c=o.output.count*o.output.elementLength/o.sampleCount,a=c,s=Math.ceil(c/9)),u=16*o.sampleCount*a,this.resource={target:n,sampler:o,vectorGroups:a,headerBytesNeeded:12*a,bodyBytesNeeded:u,serializeHeaderOnBuffer:this.serializeHeaderOnBuffer,serializeBodyOnBuffer:this.serializeBodyOnBuffer,morphNodeCount:s},[2,this.resource]}}))}))},t.prototype.getLoadedResource=function(){return this.resource},t.prototype.serializeHeaderOnBuffer=function(e,t){var r=_[this.target.path];if(this.target.path!==l.GLTFEnumAnimationTargetPath.WEIGHTS)for(var n=0;n<r.length;n++){var o=r[n],i=this.sampler.sampleCount;e.write(s.StreamReader.Type.UInt32,t),e.write(s.StreamReader.Type.UInt32,o),e.write(s.StreamReader.Type.UInt32,i)}else{var a=0;for(n=0;n<this.vectorGroups;n++){o=r[a],i=this.sampler.sampleCount;e.write(s.StreamReader.Type.UInt32,t),e.write(s.StreamReader.Type.UInt32,o),e.write(s.StreamReader.Type.UInt32,i),(a+=1)>=9&&(a=0,t+=1)}}},t.prototype.serializeBodyOnBuffer=function(e){for(var t=this,r=(_[this.target.path],0),n=function(n){var i=o.sampler.sampleCount,c=o.sampler.input,f=o.sampler.output,p=o.sampler.interpolation===u.EnumGLTFSamplerInterpolation.CUBICSPLINE,d=function(e){return Math.round(c.getCompAt(e,0)*a.DefaultNativeAnimationFPS)},h=function(e){return p?f.getCompAt(3*e+1,n):f.getCompAt(e,n)};o.target.path===l.GLTFEnumAnimationTargetPath.WEIGHTS&&(h=function(e){return p?f.view[(3*e+1)*t.vectorGroups+n]:f.view[e*t.vectorGroups+n]});for(var _=d(0),m=h(0),v=1/0,y=0;y<i;y++){var g=_,b=m;_=y+1<i?d(y+1):1/0,m=y+1<i?h(y+1):1/0;var w=1/0,x=1/0;o.sampler.interpolation===u.EnumGLTFSamplerInterpolation.LINEAR?o.target.path===l.GLTFEnumAnimationTargetPath.ROTATION?w=x=NaN:(w=(m-b)/(_-g),x=v):p&&(o.target.path!==l.GLTFEnumAnimationTargetPath.WEIGHTS?(w=f.getCompAt(3*y+0,n),x=f.getCompAt(3*y+2,n)):(w=f.view[(3*y+0)*o.vectorGroups+n],x=f.view[(3*y+2)*o.vectorGroups+n])),e.write(s.StreamReader.Type.UInt32,g),e.write(s.StreamReader.Type.Float,b),e.write(s.StreamReader.Type.Float,x),e.write(s.StreamReader.Type.Float,w),r=Math.max(r,g),v=w}},o=this,i=0;i<this.vectorGroups;i++)n(i);return r},t}(c.GLTFBaseNode);const v=m},"./src/loader/glTF/animations/channels/GLTFChannelsNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/animations/channels/GLTFChannelNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.ChildCtor=function(e){return new i.default(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Channels"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(o.GLTFArrayNode)},"./src/loader/glTF/animations/channels/GLTFTargetNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{GLTFEnumAnimationTargetPath:()=>o,default:()=>u});var n,o,i=r("./src/loader/glTF/GLTFBaseNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},c=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e[e.TRANSLATION=0]="TRANSLATION",e[e.ROTATION=1]="ROTATION",e[e.SCALE=2]="SCALE",e[e.WEIGHTS=3]="WEIGHTS"}(o||(o={}));const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return a(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Target"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){return s(this,void 0,Promise,(function(){var t,r;return c(this,(function(n){return t=e[0],r="number"==typeof this.raw.node?t[this.raw.node]:null,this.resource={node:r,path:o[this.raw.path.toUpperCase()]},[2,this.resource]}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(i.GLTFBaseNode)},"./src/loader/glTF/animations/samplers/GLTFSamplerNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{EnumGLTFSamplerInterpolation:()=>o,default:()=>u});var n,o,i=r("./src/loader/glTF/GLTFBaseNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},c=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e[e.STEP=0]="STEP",e[e.LINEAR=1]="LINEAR",e[e.CUBICSPLINE=2]="CUBICSPLINE"}(o||(o={}));const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return a(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Sampler"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){var t;return s(this,void 0,Promise,(function(){var r,n,i,a,s;return c(this,(function(c){return r=e[0],n=r[this.raw.input],i=r[this.raw.output],a=Math.min(n.count,i.count),(s=o[null!==(t=this.raw.interpolation)&&void 0!==t?t:"LINEAR"])===o.CUBICSPLINE&&this.assert(i.count>=3*a,"invalid output accessor: not enough elements for cubic spline animation."),this.resource={input:n,output:i,interpolation:s,sampleCount:a},[2,this.resource]}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(i.GLTFBaseNode)},"./src/loader/glTF/animations/samplers/GLTFSamplersNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/animations/samplers/GLTFSamplerNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.ChildCtor=function(e){return new i.default(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Samplers"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(o.GLTFArrayNode)},"./src/loader/glTF/buffers/GLTFAccessorNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{EnumGLTFAccessorComponentType:()=>i,GLTFAccessorComponentTypeToViewClass:()=>l,GLTFAccessorTypeToNumberOfElements:()=>f,default:()=>d});var n,o,i,a=r("./src/loader/glTF/GLTFBaseNode.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},u=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT"}(i||(i={}));var l=((o={})[i.BYTE]=Int8Array,o[i.UNSIGNED_BYTE]=Uint8Array,o[i.SHORT]=Int16Array,o[i.UNSIGNED_SHORT]=Uint16Array,o[i.UNSIGNED_INT]=Uint32Array,o[i.FLOAT]=Float32Array,o),f={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return s(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Accessor"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){var t;return c(this,void 0,Promise,(function(){var r,n,o,i,a,s,c,p;return u(this,(function(u){return this.assert(!this.raw.sparse,"sparse accessor not supported.").and(!this.raw.normalized,"normalized attributes not supported."),r=e[0],n=r[this.raw.bufferView],o=l[this.raw.componentType],i=new o(n.data,(null!==(t=this.raw.byteOffset)&&void 0!==t?t:0)+n.byteOffset),a=i.BYTES_PER_ELEMENT,s=f[this.raw.type],c="number"==typeof n.byteStride?n.byteStride/a:s,p=c===s,this.resource={bufferView:n,bufferViewIndex:this.raw.bufferView,view:i,bytesPerComponent:a,elementLength:s,count:this.raw.count,stride:c,byteStride:c*a,componentType:this.raw.componentType,max:this.raw.max,min:this.raw.min,compact:p,getCompAt:function(e,t){return this.view[e*this.stride+t]}},[2,this.resource]}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(a.GLTFBaseNode);const d=p},"./src/loader/glTF/buffers/GLTFAccessorsNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/buffers/GLTFAccessorNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.ChildCtor=function(e){return new i.default(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Accessors"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(o.GLTFArrayNode)},"./src/loader/glTF/buffers/GLTFBufferNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n,o=r("./src/loader/downloader/fetch.ts"),i=r("./src/loader/glTF/GLTFBaseNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},c=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return a(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Buffer"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(){var e;return s(this,void 0,Promise,(function(){var t,r,n,i;return c(this,(function(a){switch(a.label){case 0:return this.raw.uri?(t=null!==(e=this.findRoot().uri)&&void 0!==e?e:"","/"!==this.raw.uri[0]&&t&&(t+="/"),r=this.raw.uri,this.raw.uri.startsWith("data:")||this.raw.uri.startsWith("http")||(r=t+this.raw.uri),[4,(0,o.fetch)(r,"binary")]):[3,2];case 1:return n=a.sent().data,this.resource=n,[2,this.resource];case 2:return i=this.findRoot().defaultBinary,this.assert(null!==i,"using default binary in a non-glb file."),this.resource=i,[2,this.resource]}}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(i.GLTFBaseNode)},"./src/loader/glTF/buffers/GLTFBufferViewNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{EnumGLTFBufferViewTarget:()=>o,default:()=>u});var n,o,i=r("./src/loader/glTF/GLTFBaseNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},c=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"}(o||(o={}));const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return a(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"BufferView"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){var t;return s(this,void 0,Promise,(function(){var r,n,o;return c(this,(function(i){return r=e[0],n=r[this.raw.buffer],o=null!==(t=this.raw.byteOffset)&&void 0!==t?t:0,this.resource={data:n,byteOffset:o,byteStride:this.raw.byteStride,byteLength:this.raw.byteLength,target:this.raw.target,getSlicedData:function(){return this._sliced||(this._sliced=this.data.slice(this.byteOffset,this.byteOffset+this.byteLength)),this._sliced},getUint8View:function(){return new Uint8Array(this.data,this.byteOffset,this.byteLength)},_sliced:null},[2,this.resource]}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(i.GLTFBaseNode)},"./src/loader/glTF/buffers/GLTFBufferViewsNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/buffers/GLTFBufferViewNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.ChildCtor=function(e){return new i.default(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"BufferViews"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(o.GLTFArrayNode)},"./src/loader/glTF/buffers/GLTFBuffersNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/buffers/GLTFBufferNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.ChildCtor=function(e){return new i.default(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Buffers"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(o.GLTFArrayNode)},"./src/loader/glTF/extensions/GLTFExtensions.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{GLTFExtensionProfileBuilder:()=>n});var n=function(){function e(e){this.preloads={},this.slotCodeMap=new Map,this.forceSlotCodeMap=new Map,this.name=e}return e.prototype.registerRootInit=function(e){this.rootInit=e},e.prototype.registerSubstitutePreload=function(e,t){if("Root"===e)throw"[GLTF]Extensions cannot replace root's method.";this.preloads[e]=t},e.prototype.registerPostBuild=function(e){this.postBuild=e},e.prototype.registerRunInSlot=function(e,t){this.slotCodeMap.set(e,t)},e.prototype.registerForceRunInSlot=function(e,t){this.forceSlotCodeMap.set(e,t)},e}()},"./src/loader/glTF/extensions/KHR_materials_clearcoat/GLTFExtClearcoat.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var n,o=r("./src/loader/glTF/materials/texture/GLTFNormalTextureInfoNode.ts"),i=r("./src/loader/glTF/materials/texture/GLTFTextureInfoNode.ts"),a=r("./src/loader/glTF/extensions/GLTFExtensions.ts"),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},c=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u="KHR_materials_clearcoat",l=new a.GLTFExtensionProfileBuilder(u);l.registerRunInSlot("BeforeCreateMaterial",(function(e,t,r,n){var a,u,l,f,p,d,h;return s(this,void 0,void 0,(function(){var t,s,_,m,v;return c(this,(function(c){switch(c.label){case 0:return e.clearcoatTexture&&(this.clearcoatTextureNode=new i.default(e.clearcoatTexture,this)),e.clearcoatRoughnessTexture&&(this.clearcoatRoughnessTextureNode=new i.default(e.clearcoatRoughnessTexture,this)),e.clearcoatNormalTexture&&(this.clearcoatNormalTextureNode=new o.default(e.clearcoatNormalTexture,this)),t=r[0],v={clearcoatFactor:null!==(a=e.clearcoatFactor)&&void 0!==a?a:0},[4,null===(u=this.clearcoatTextureNode)||void 0===u?void 0:u.preload()];case 1:return v.clearcoatTexture=c.sent(),v.clearcoatRoughnessFactor=null!==(l=e.clearcoatRoughnessFactor)&&void 0!==l?l:0,[4,null===(f=this.clearcoatRoughnessTextureNode)||void 0===f?void 0:f.preload()];case 2:return v.clearcoatRoughnessTexture=c.sent(),[4,null===(p=this.clearcoatNormalTextureNode)||void 0===p?void 0:p.preload()];case 3:return v.clearcoatNormalTexture=c.sent(),s=v,_=n.uniform,m=n.macros,Object.assign(_,{u_clearcoatFactor:[s.clearcoatFactor],u_clearcoatMap:s.clearcoatTexture?t[s.clearcoatTexture.index]:void 0,u_clearcoatRoughnessFactor:[s.clearcoatRoughnessFactor],u_clearcoatRoughnessMap:s.clearcoatRoughnessTexture?t[s.clearcoatRoughnessTexture.index]:void 0,u_clearcoatNormalScale:[null!==(h=null===(d=s.clearcoatNormalTexture)||void 0===d?void 0:d.scale)&&void 0!==h?h:1],u_clearcoatNormalMap:s.clearcoatNormalTexture?t[s.clearcoatNormalTexture.index]:void 0}),Object.assign(m,{WX_USE_CLEARCOAT:!0}),[2]}}))}))}));const f=((n={})[u]=l,n)},"./src/loader/glTF/extensions/KHR_materials_ior/GLTFExtIoR.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n,o=r("./src/loader/glTF/extensions/GLTFExtensions.ts"),i=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},a=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s="KHR_materials_ior",c=new o.GLTFExtensionProfileBuilder(s);c.registerRunInSlot("BeforeCreateMaterial",(function(e,t,r,n){var o;return i(this,void 0,void 0,(function(){return a(this,(function(t){return n.uniform.u_ior=[null!==(o=e.ior)&&void 0!==o?o:1.5],[2]}))}))}));const u=((n={})[s]=c,n)},"./src/loader/glTF/extensions/KHR_materials_pbrSpecularGlossiness/GLTFExtSpecularGlossinessMat.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n,o=r("./src/loader/glTF/extensions/GLTFExtensions.ts"),i=r("./src/assets/Material.ts"),a=r("./src/loader/glTF/utils/MaterialUtils.ts"),s=r("./src/loader/glTF/materials/texture/GLTFTextureInfoNode.ts"),c=function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},u=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},l=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},f="KHR_materials_pbrSpecularGlossiness",p=new o.GLTFExtensionProfileBuilder(f);p.registerSubstitutePreload("Root-Materials-Material",(function(e,t,r){var n,o,f,p,d;return u(this,void 0,void 0,(function(){var t,u,h,_,m,v,y,g,b;return l(this,(function(l){switch(l.label){case 0:return e.diffuseTexture&&(this.diffuseTextureNode=new s.default(e.diffuseTexture,this)),e.specularGlossinessTexture&&(this.specularGlossinessTextureNode=new s.default(e.specularGlossinessTexture,this)),t=r[0],b={},[4,this.preloadWithoutPBR(r)];case 1:return b.ownProperties=l.sent(),b.diffuseFactor=null!==(n=e.diffuseFactor)&&void 0!==n?n:[1,1,1,1],b.specularFactor=null!==(o=e.specularFactor)&&void 0!==o?o:[1,1,1],b.glossinessFactor=null!==(f=e.glossinessFactor)&&void 0!==f?f:1,[4,null===(p=this.diffuseTextureNode)||void 0===p?void 0:p.preload()];case 2:return b.diffuseTexture=l.sent(),[4,null===(d=this.specularGlossinessTextureNode)||void 0===d?void 0:d.preload()];case 3:return b.specularGlossinessTexture=l.sent(),u=b,h=this.scene.assets.getAsset("effect","standard"),_=c(c({},u.ownProperties.uniform),{u_baseColorFactor:u.diffuseFactor,u_baseColorMap:u.diffuseTexture?t[u.diffuseTexture.index]:void 0,u_specularFactor:u.specularFactor,u_glossinessFactor:[u.glossinessFactor],u_specularGlossinessMap:u.specularGlossinessTexture?t[u.specularGlossinessTexture.index]:void 0}),m=c({},u.ownProperties.renderStates),v=c(c(c(c({},u.ownProperties.macros),(0,a.genTextureMacros)("baseColorMap",u.diffuseTexture)),(0,a.genTextureMacros)("specularGlossinessMap",u.specularGlossinessTexture)),{WX_USE_SPECULARGLOSSINESS:!0}),y={uniform:_,renderStates:m,macros:v},[4,this.extensionSlot("BeforeCreateMaterial",y)];case 4:return l.sent(),(g=new i.default(this.scene)).initByEffect(h,_),(0,a.setRenderStates)(g,m),g.setMacros(v),this.resource=g,[2,this.resource]}}))}))}));const d=((n={})[f]=p,n)},"./src/loader/glTF/extensions/KHR_materials_specular/GLTFExtSpecular.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n,o=r("./src/loader/glTF/materials/texture/GLTFTextureInfoNode.ts"),i=r("./src/loader/glTF/extensions/GLTFExtensions.ts"),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},s=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c="KHR_materials_specular",u=new i.GLTFExtensionProfileBuilder(c);u.registerRunInSlot("BeforeCreateMaterial",(function(e,t,r,n){var i,c,u,l;return a(this,void 0,void 0,(function(){var t,a,f,p;return s(this,(function(s){switch(s.label){case 0:return e.specularTexture&&(this.specularTextureNode=new o.default(e.specularTexture,this)),e.specularColorTexture&&(this.specularColorTextureNode=new o.default(e.specularColorTexture,this)),t=r[0],p={specularFactor:null!==(i=e.specularFactor)&&void 0!==i?i:1},[4,null===(c=this.specularTextureNode)||void 0===c?void 0:c.preload()];case 1:return p.specularTexture=s.sent(),p.specularColorFactor=null!==(u=e.specularColorFactor)&&void 0!==u?u:[1,1,1],[4,null===(l=this.specularColorTextureNode)||void 0===l?void 0:l.preload()];case 2:return p.specularColorTexture=s.sent(),a=p,(f=n.uniform).u_specularFactor=[a.specularFactor],f.u_specularTexture=a.specularTexture?t[a.specularTexture.index]:void 0,f.u_specularColorFactor=a.specularColorFactor,f.u_specularColorTexture=a.specularColorTexture?t[a.specularColorTexture.index]:void 0,[2]}}))}))}));const l=((n={})[c]=u,n)},"./src/loader/glTF/extensions/KHR_materials_transmission/GLTFExtTransmission.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n,o=r("./src/loader/glTF/materials/texture/GLTFTextureInfoNode.ts"),i=r("./src/loader/glTF/extensions/GLTFExtensions.ts"),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},s=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c="KHR_materials_transmission",u=new i.GLTFExtensionProfileBuilder(c);u.registerRunInSlot("BeforeCreateMaterial",(function(e,t,r,n){var i,c;return a(this,void 0,void 0,(function(){var t,a,u,l,f;return s(this,(function(s){switch(s.label){case 0:return e.transmissionTexture&&(this.transmissionTextureNode=new o.default(e.transmissionTexture,this)),t=r[0],f={transmissionFactor:null!==(i=e.transmissionFactor)&&void 0!==i?i:0},[4,null===(c=this.transmissionTextureNode)||void 0===c?void 0:c.preload()];case 1:return f.transmissionTexture=s.sent(),a=f,u=n.uniform,l=n.macros,u.u_transmissionFactor=[a.transmissionFactor],u.u_transmissionTexture=a.transmissionTexture?t[a.transmissionTexture.index]:void 0,l.WX_USE_TRANSMISSION=!0,[2]}}))}))}));const l=((n={})[c]=u,n)},"./src/loader/glTF/extensions/KHR_materials_unlit/GLTFExtUnlitMat.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n,o=r("./src/loader/glTF/materials/GLTFMaterialNode.ts"),i=r("./src/loader/glTF/extensions/GLTFExtensions.ts"),a=r("./src/assets/Material.ts"),s=r("./src/loader/glTF/utils/MaterialUtils.ts"),c=r("./src/ext.ts"),u=function(){return u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u.apply(this,arguments)},l=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},f=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},p="KHR_materials_unlit",d=new i.GLTFExtensionProfileBuilder(p);d.registerSubstitutePreload("Root-Materials-Material",(function(e,t,r){var n,i,p,d;return l(this,void 0,void 0,(function(){var e,t,l,h,_,m,v,y;return f(this,(function(f){switch(f.label){case 0:return y={},[4,null===(n=this.pbrMetallicRoughness)||void 0===n?void 0:n.preload(r)];case 1:return y.pbrMetallicRoughness=f.sent(),y.alphaMode=null!==(i=o.EnumGLTFMaterialAlphaMode[this.raw.alphaMode])&&void 0!==i?i:o.EnumGLTFMaterialAlphaMode.OPAQUE,y.alphaCutoff=null!==(p=this.raw.alphaCutoff)&&void 0!==p?p:.5,y.doubleSided=!!this.raw.doubleSided,e=y,t=this.scene.assets.getAsset("effect","simple"),l=e.pbrMetallicRoughness,h=l.uniform,_=l.macros,h.alphaCutoff=[e.alphaCutoff],m=u({cullFace:e.doubleSided?c.Kanata.ECullMode.NONE:c.Kanata.ECullMode.FRONT,blendOn:e.alphaMode===o.EnumGLTFMaterialAlphaMode.BLEND,renderQueue:e.alphaMode===o.EnumGLTFMaterialAlphaMode.BLEND?2500:1e3},null===(d=e.pbrMetallicRoughness)||void 0===d?void 0:d.renderStates),(v=new a.default(this.scene)).initByEffect(t,h),(0,s.setRenderStates)(v,m),v.setMacros(_),e.alphaMode===o.EnumGLTFMaterialAlphaMode.MASK&&v.setMacro("WX_USE_ALPHA_CUTOFF",!0),this.resource=v,[2,this.resource]}}))}))}));const h=((n={})[p]=d,n)},"./src/loader/glTF/extensions/SEIN_processed/SEIN_processed.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n,o=r("./src/loader/glTF/extensions/GLTFExtensions.ts"),i=r("./src/loader/glTF/extensions/WX_processed_model/WX_processed_model.ts"),a="SEIN_processed",s=new o.GLTFExtensionProfileBuilder(a);s.registerRootInit(i.init),s.registerForceRunInSlot("trustMaxAndMin",i.trustMaxAndMin),s.registerForceRunInSlot("simpleAttribNodeDontCheckTangent",i.simpleAttribNodeDontCheckTangent),s.registerRunInSlot("needNormal",i.needNormal);const c=((n={})[a]=s,n)},"./src/loader/glTF/extensions/WX_processed_model/WX_processed_model.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,init:()=>u,needNormal:()=>p,simpleAttribNodeDontCheckTangent:()=>f,trustMaxAndMin:()=>l});var n,o=r("./src/loader/glTF/extensions/GLTFExtensions.ts"),i=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},a=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s="WX_processed_model",c=new o.GLTFExtensionProfileBuilder(s);function u(e,t){var r,n;t.trustMaxAndMin=null===(r=e.trustMaxAndMin)||void 0===r||r,t.simpleAttribNodeDontCheckTangent=null===(n=e.simpleAttribNodeDontCheckTangent)||void 0===n||n}function l(e,t,r){return i(this,void 0,void 0,(function(){return a(this,(function(t){return e.trustMaxAndMin&&(r.trust=!0),[2]}))}))}function f(e,t,r){return i(this,void 0,void 0,(function(){return a(this,(function(t){return e.simpleAttribNodeDontCheckTangent&&(r.check=!1),[2]}))}))}function p(e,t,r,n){return i(this,void 0,void 0,(function(){return a(this,(function(t){return e.dontNeedNormal&&(n.needNormal=!1),[2]}))}))}c.registerRootInit(u),c.registerForceRunInSlot("trustMaxAndMin",l),c.registerForceRunInSlot("simpleAttribNodeDontCheckTangent",f),c.registerRunInSlot("needNormal",p);const d=((n={})[s]=c,n)},"./src/loader/glTF/extensions/index.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{allExtensionProfiles:()=>p});var n=r("./src/loader/glTF/extensions/KHR_materials_clearcoat/GLTFExtClearcoat.ts"),o=r("./src/loader/glTF/extensions/KHR_materials_ior/GLTFExtIoR.ts"),i=r("./src/loader/glTF/extensions/KHR_materials_pbrSpecularGlossiness/GLTFExtSpecularGlossinessMat.ts"),a=r("./src/loader/glTF/extensions/KHR_materials_specular/GLTFExtSpecular.ts"),s=r("./src/loader/glTF/extensions/KHR_materials_transmission/GLTFExtTransmission.ts"),c=r("./src/loader/glTF/extensions/KHR_materials_unlit/GLTFExtUnlitMat.ts"),u=r("./src/loader/glTF/extensions/WX_processed_model/WX_processed_model.ts"),l=r("./src/loader/glTF/extensions/SEIN_processed/SEIN_processed.ts"),f=function(){return f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},f.apply(this,arguments)},p=f(f(f(f(f(f(f(f({},l.default),u.default),o.default),c.default),a.default),i.default),s.default),n.default)},"./src/loader/glTF/geometry/GLTFMeshNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/geometry/primitives/GLTFPrimitivesNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},c=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return a(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Mesh"},enumerable:!1,configurable:!0}),t.prototype.build=function(){this.primitivesNode=new i.default(this.raw.primitives,this),this.primitivesNode.build()},t.prototype.preload=function(e){var t;return s(this,void 0,Promise,(function(){var r,n,o,i;return c(this,(function(a){switch(a.label){case 0:for(r=null!==(t=this.raw.weights)&&void 0!==t?t:[],n=new Array(16).fill(0),o=0;o<r.length;o++)n[o]=r[o];return[4,this.primitivesNode.preload(e)];case 1:return i=a.sent(),this.resource={subMeshes:i,weights:n,name:this.raw.name},[2,this.resource]}}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(o.GLTFBaseNode)},"./src/loader/glTF/geometry/GLTFMeshesNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/geometry/GLTFMeshNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.ChildCtor=function(e){return new i.default(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Meshes"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(o.GLTFArrayNode)},"./src/loader/glTF/geometry/primitives/GLTFPrimitiveNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{EnumGLTFPrimitiveMode:()=>o,default:()=>w});var n,o,i=r("./src/ext.ts"),a=r("./src/assets/Geometry.ts"),s=r("./src/loader/glTF/GLTFBaseNode.ts"),c=r("./src/loader/glTF/geometry/primitives/attributes/GLTFAttributesNode.ts"),u=r("./src/loader/glTF/utils/MaterialUtils.ts"),l=r("./src/loader/glTF/buffers/GLTFAccessorNode.ts"),f=r("./src/loader/glTF/utils/buffer.ts"),p=r("./src/math/vector3.ts"),d=r("./src/core/logger.ts"),h=r("./src/loader/glTF/geometry/primitives/targets/GLTFTargetsNode.ts"),_=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),m=function(){return m=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},m.apply(this,arguments)},v=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},y=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},g=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};!function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(o||(o={}));var b=null;const w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return _(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Primitive"},enumerable:!1,configurable:!0}),t.prototype.build=function(){var e;this.targetsNode=new h.default(null!==(e=this.raw.targets)&&void 0!==e?e:[],this),this.attributesNode=new c.default(this.raw.attributes,this),this.attributesNode.build()},t.prototype.preload=function(e){var t;return v(this,void 0,Promise,(function(){var r,n,s,f,p,h,_,v,w,x,S,E,T,C,A,O,M,R;return y(this,(function(y){switch(y.label){case 0:return this.assert(!this.raw.targets||this.raw.targets.length<=8,"too many morph targets.").and(this.raw.mode!==o.LINE_LOOP&&this.raw.mode!==o.TRIANGLE_FAN,"primitive mode not supported."),b||function(e){var t;(t={})[o.POINTS]=e.EPrimitiveType.POINTS,t[o.LINES]=e.EPrimitiveType.LINES,t[o.LINE_LOOP]=e.EPrimitiveType.ZERO,t[o.LINE_STRIP]=e.EPrimitiveType.LINE_STRIP,t[o.TRIANGLES]=e.EPrimitiveType.TRIANGLES,t[o.TRIANGLE_STRIP]=e.EPrimitiveType.TRIANGLE_STRIP,t[o.TRIANGLE_FAN]=e.EPrimitiveType.ZERO,b=t}((0,i.getKanata)(this.scene)),r=e[0],n=e[1],[4,this.targetsNode.preload()];case 1:return s=y.sent(),[4,this.attributesNode.preload(g([s],e))];case 2:if(f=y.sent(),p=f.buffer.byteLength/f.layout.stride,h=this.findAttribIndex(f,i.Kanata.EVertexLayoutUsage.POSITION),_=b[null!==(t=this.raw.mode)&&void 0!==t?t:o.TRIANGLES],v="number"==typeof this.raw.material?r[this.raw.material].clone():(0,u.getEmptyMaterial)(this).clone(),x=i.Kanata.EIndexType.UINT16,void 0!==this.raw.indices)S=n[this.raw.indices],p=S.count,S.componentType===l.EnumGLTFAccessorComponentType.UNSIGNED_BYTE?(w=new Uint16Array(S.count)).set(S.view.subarray(0,S.count)):(w=S.view,S.componentType===l.EnumGLTFAccessorComponentType.UNSIGNED_INT&&(x=i.Kanata.EIndexType.UINT32),w=w.subarray(0,S.count));else for(w=new Uint16Array(p),E=0;E<p;E++)w[E]=E;return T=f.buffer,C=f.macros,A={needNormal:!0},this.extensionSlot("needNormal",A),O=f.lackNormal&&A.needNormal,_===i.Kanata.EPrimitiveType.TRIANGLES?((O||f.lackTangent)&&((T=new Float32Array(f.buffer.length)).set(f.buffer),C=m({},f.macros)),O&&(this.genNormalAttribData(T,w,f,h),(0,c.genMacrosByAttrib)("NORMAL",C)),f.lackTangent&&-1!==(M=this.retrieveNormalMapUVIndex(f,v))&&(this.genTangentAttribData(T,w,f,h,M),(0,c.genMacrosByAttrib)("TANGENT",C))):d.default.warn('[GLTF]cannot generate normal or tangent data for primitive type other than "TRIANGLES".\nCurrent primitive type: "'+i.Kanata.EPrimitiveType[_]+'".'),(0,u.setMacros)(v,C),v.setRenderState("primitiveType",_),(R=new a.default(this.scene,f.layout,T,w,x)).addSubMesh(p,0),R.setBoundBox(f.boundingBox.max.add(f.boundingBox.min).scale(.5),f.boundingBox.max.sub(f.boundingBox.min),!0),this.resource={geometry:R,material:v},[2,this.resource]}}))}))},t.prototype.getLoadedResource=function(){return this.resource},t.prototype.findAttribIndex=function(e,t){for(var r=0;r<e.layoutDesc.attributes.length;r++){if(e.layoutDesc.attributes[r].usage==t)return r}return-1},t.prototype.genNormalAttribData=function(e,t,r,n){var o;this.assert("number"==typeof r.normalSlot,"No normal slot specified.");var i=r.layoutDesc.attributes[r.normalSlot],a=r.layoutDesc.attributes[n],s=new f.FloatBuffer(e.buffer,i.offset+e.byteOffset,r.layoutDesc.stride);s.clearZero();var c=new f.FloatBuffer(e.buffer,a.offset+e.byteOffset,r.layoutDesc.stride);this.assert(t.length%3==0,"[GLTF]index buffer length not dividable by 3.");for(var u=new Array(s.length),l=0;l<t.length/3;l++)for(var p=[t[3*l+0],t[3*l+1],t[3*l+2]],d=[c.readVec3(p[0]),c.readVec3(p[1]),c.readVec3(p[2])],h=d[0].sub(d[1]),_=d[0].sub(d[2]),m=h.cross(_).toArray(),v=0;v<3;v++){for(var y=0;y<3;y++)s.setFloat(p[v],y,s.readFloat(p[v],y)+m[y]);u[p[v]]=null!==(o=u[p[v]])&&void 0!==o?o:1}for(l=0;l<s.length;l++)u[l]?s.normalizeVec3(l):s.setFloat3(l,0,0,0)},t.prototype.retrieveNormalMapUVIndex=function(e,t){return null==t.getTexture("u_normalMap")?-1:this.findAttribIndex(e,i.Kanata.EVertexLayoutUsage.UV0)},t.prototype.genTangentAttribData=function(e,t,r,n,o){var i;this.assert("number"==typeof r.tangentSlot,"No tangent slot specified.");var a=r.layoutDesc.attributes[r.tangentSlot],s=r.layoutDesc.attributes[r.normalSlot],c=r.layoutDesc.attributes[n],u=r.layoutDesc.attributes[o],l=new f.FloatBuffer(e.buffer,a.offset+e.byteOffset,r.layoutDesc.stride),d=new f.FloatBuffer(e.buffer,s.offset+e.byteOffset,r.layoutDesc.stride);l.clearZero();var h=new f.FloatBuffer(e.buffer,c.offset+e.byteOffset,r.layoutDesc.stride),_=new f.FloatBuffer(e.buffer,u.offset+e.byteOffset,r.layoutDesc.stride);this.assert(t.length%3==0,"[GLTF]index buffer length not dividable by 3.");for(var m=new Array(l.length),v=0;v<t.length/3;v++){var y=[t[3*v+0],t[3*v+1],t[3*v+2]],g=[h.readVec3(y[0]),h.readVec3(y[1]),h.readVec3(y[2])],b=[_.readVec2(y[0]),_.readVec2(y[1]),_.readVec2(y[2])],w=g[0].sub(g[1]),x=g[0].sub(g[2]),S=b[0].sub(b[1]),E=b[0].sub(b[2]),T=S.x*E.y-S.y*E.x,C=p.default.createFromNumber(0,0,0);if(Math.abs(T)>0){var A=[E.y,-S.y];C=w.scale(A[0]).add(x.scale(A[1]))}for(var O=0;O<3;O++){for(var M=0;M<3;M++)l.setFloat(y[O],M,l.readFloat(y[O],M)+C.get(M));m[y[O]]=null!==(i=m[y[O]])&&void 0!==i?i:1}}for(v=0;v<l.length;v++)if(m[v]){C=l.readVec3(v);var R=d.readVec3(v),P=R.cross(C).cross(R).normalize();l.setVec3(v,P),l.setFloat(v,3,1)}else l.setFloat3(v,0,0,0)},t}(s.GLTFBaseNode)},"./src/loader/glTF/geometry/primitives/GLTFPrimitivesNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/geometry/primitives/GLTFPrimitiveNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.ChildCtor=function(e){return new i.default(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Primitives"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(o.GLTFArrayNode)},"./src/loader/glTF/geometry/primitives/attributes/GLTFAttributesNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{convertAttributeName:()=>d,default:()=>v,genMacrosByAttrib:()=>_,getComponentCountFromAttributeName:()=>h});var n,o=r("./src/ext.ts"),i=r("./src/loader/glTF/buffers/GLTFAccessorNode.ts"),a=r("./src/loader/glTF/GLTFBaseNode.ts"),s=r("./src/loader/glTF/utils/types.ts"),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(){return u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u.apply(this,arguments)},l=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},f=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function p(e){return"POSITION"===e?o.Kanata.EVertexLayoutUsage.POSITION:"NORMAL"===e?o.Kanata.EVertexLayoutUsage.NORMAL:"TANGENT"===e?o.Kanata.EVertexLayoutUsage.TANGENT:e.startsWith("TEXCOORD_")?"0"===e.charAt(9)?o.Kanata.EVertexLayoutUsage.UV0:"1"===e.charAt(9)?o.Kanata.EVertexLayoutUsage.UV1:"2"===e.charAt(9)?o.Kanata.EVertexLayoutUsage.UV2:"3"===e.charAt(9)?o.Kanata.EVertexLayoutUsage.UV3:o.Kanata.EVertexLayoutUsage.UV0:e.startsWith("COLOR_")?o.Kanata.EVertexLayoutUsage.COLOR:e.startsWith("JOINTS_")?o.Kanata.EVertexLayoutUsage.BONEINDEX:e.startsWith("WEIGHTS_")?o.Kanata.EVertexLayoutUsage.BONEWEIGHT:e.startsWith("MORPH_")?o.Kanata.EVertexLayoutUsage.CUSTOM:void 0}function d(e){if("POSITION"===e)return"a_position";if("NORMAL"===e)return"a_normal";if("TANGENT"===e)return"a_tangent";if(e.startsWith("TEXCOORD_")){if("0"===e.charAt(9))return"a_texCoord";if("1"===e.charAt(9))return"a_texCoord_1";if("2"===e.charAt(9))return"a_texCoord_2";if("3"===e.charAt(9))return"a_texCoord_3"}if(e.startsWith("COLOR_"))return"a_color";if(e.startsWith("JOINTS_"))return"a_boneIndices";if(e.startsWith("WEIGHTS_"))return"a_weights";if(e.startsWith("MORPH_")){var t=d(e.split("_").slice(2).join("_")).substring(2);return"a_morph_"+Number.parseInt(e.split("_")[1])+"_"+t}return e}function h(e){return"POSITION"===e||"NORMAL"===e?3:"TANGENT"===e?4:e.startsWith("TEXCOORD_")?2:e.startsWith("COLOR_")?3:e.startsWith("JOINTS_")||e.startsWith("WEIGHTS_")?4:e.startsWith("MORPH_")?h(e.split("_").slice(2).join("_")):1}function _(e,t){var r;if("POSITION"===e)t.WX_USE_POSITION=!0;else if("NORMAL"===e)t.WX_USE_NORMAL=!0;else if("TANGENT"===e)t.WX_USE_TANGENT=!0;else if(e.startsWith("COLOR_"))t["WX_USE_COLOR_"+e.charAt(6)]=!0;else if(e.startsWith("MORPH_")){var n=e.split("_"),o=n.slice(2).join("_"),i=Number.parseInt(n[1]),a="WX_MORPH_MASK_"+i+"_"+o;t["WX_USE_MORPH_"+o]=!0,t[a]=1,i+1>(null!==(r=t.WX_MORPH_TARGET_COUNT)&&void 0!==r?r:0)&&(t.WX_MORPH_TARGET_COUNT=i+1),t[a]|=1<<i}}function m(e,t){switch(e){case i.EnumGLTFAccessorComponentType.FLOAT:return o.Kanata.EVertexFormat.FLOAT+t-1;case i.EnumGLTFAccessorComponentType.UNSIGNED_SHORT:case i.EnumGLTFAccessorComponentType.SHORT:if(2===t)return o.Kanata.EVertexFormat.SHORT2;if(4===t)return o.Kanata.EVertexFormat.SHORT4;case i.EnumGLTFAccessorComponentType.BYTE:if(4===t)return o.Kanata.EVertexFormat.BYTE4;case i.EnumGLTFAccessorComponentType.UNSIGNED_BYTE:if(4===t)return o.Kanata.EVertexFormat.UBYTE4;default:return null}}const v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return c(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Attributes"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){return l(this,void 0,Promise,(function(){var t,r,n,o,i,a,s,c,l;return f(this,(function(f){for(t=e[0],e[1],r=e[2],n=e[3],o=u(u({},this.raw),t.attributes),i=[],a=0,s=Object.entries(o).sort((function(e,t){return e[0].localeCompare(t[0])}));a<s.length;a++)c=s[a],i.push(c[0]),i.push(c[1].toString());return l=i.join("$"),n.has(l)||(this.isSimpleAttribNode(o,r)?n.set(l,this.genSimpleVertexBuffer(o,r)):n.set(l,this.genVertexBuffer(o,r))),this.resource=n.get(l),[2,this.resource]}))}))},t.prototype.getLoadedResource=function(){return this.resource},t.prototype.isSimpleAttribNode=function(e,t){var r=Object.entries(e);if(0===r.length)return!0;for(var n=t[r[0][1]].bufferView.data,o=t[r[0][1]].byteStride,i=!1,a=!1,s=0,c=r;s<c.length;s++){var u=c[s],l=u[0],f=t[u[1]];if(n!==f.bufferView.data||o!==f.byteStride)return!1;if(h(l)!==f.elementLength)return!1;if(!m(f.componentType,f.elementLength))return!1;"NORMAL"===l&&(i=!0),"TANGENT"===l&&(a=!0)}var p={check:!0};return this.extensionSlot("simpleAttribNodeDontCheckTangent",p),!(!i&&p.check||!a&&p.check)},t.prototype.genSimpleVertexBuffer=function(e,t){for(var r,n,i,a={attributes:[],stride:0},c=1/0,u=0,l={},f=s.GLTF.BoundingBox.createZero(),h=0,v=Object.entries(e);h<v.length;h++){var y=v[h],g=y[0],b=t[y[1]];if(a.stride=b.byteStride,a.attributes.push({name:d(g),format:m(b.componentType,b.elementLength),offset:b.view.byteOffset,usage:p(g)}),_(g,l),"POSITION"===g){var w={trust:!1};if(this.extensionSlot("trustMaxAndMin",w),w.trust&&(null===(r=b.min)||void 0===r?void 0:r.length)>2&&(null===(n=b.max)||void 0===n?void 0:n.length)>2)f.max.setFromArray(b.max),f.min.setFromArray(b.min);else if(3===b.elementLength){f=s.GLTF.BoundingBox.createInfinite();for(var x=0;x<b.count;x++)f.min.x=Math.min(f.min.x,b.getCompAt(x,0)),f.max.x=Math.max(f.max.x,b.getCompAt(x,0)),f.min.y=Math.min(f.min.y,b.getCompAt(x,1)),f.max.y=Math.max(f.max.y,b.getCompAt(x,1)),f.min.z=Math.min(f.min.z,b.getCompAt(x,2)),f.max.z=Math.max(f.max.z,b.getCompAt(x,2))}}i=b.bufferView.data,c=Math.min(c,b.bufferView.byteOffset),u=Math.max(u,b.bufferView.byteOffset+b.bufferView.byteLength)}a.attributes.forEach((function(e){e.offset-=c}));var S=new((0,o.getKanata)(this.scene).VertexLayout)(a);return{buffer:new Float32Array(i,c,Math.ceil((u-c)/4)),layoutDesc:a,layout:S,macros:l,boundingBox:f,lackNormal:!1,lackTangent:!1,normalSlot:0,tangentSlot:0}},t.prototype.genVertexBuffer=function(e,t){for(var r={attributes:[],stride:0},n={},i=!1,a=!1,c=0,u=0,l=4294967296,f=0,m=0,v=Object.entries(e);m<v.length;m++){var y=v[m],g=y[0],b=y[1];this.assert(!g.startsWith("TEXCOORD_")||g.charCodeAt(9)<52,"unsupported UV slot.").and(!g.startsWith("JOINTS_")||g.charCodeAt(7)<49,"unsupported joint slot.").and(!g.startsWith("WEIGHTS_")||g.charCodeAt(8)<49,"unsupported weight slot."),"NORMAL"===g&&(i=!0,c=r.attributes.length),"TANGENT"===g&&(a=!0,u=r.attributes.length),(I=t[b]).count<l&&(l=I.count);var w=h(g);r.attributes.push({name:d(g),format:o.Kanata.EVertexFormat.FLOAT+w-1,offset:f,usage:p(g)}),f+=4*w,_(g,n)}var x=!i,S=!i||!a;x&&(c=r.attributes.length,f+=this.extendLayoutByAttribName(r,"NORMAL",f,n)),S&&(a||(u=r.attributes.length,f+=this.extendLayoutByAttribName(r,"TANGENT",f,n))),r.stride=f;for(var E=new((0,o.getKanata)(this.scene).VertexLayout)(r),T=s.GLTF.BoundingBox.createInfinite(),C=new ArrayBuffer(f*l),A=new Float32Array(C),O=0,M=0,R=Object.entries(e);M<R.length;M++)for(var P=R[M],I=(g=P[0],t[b=P[1]]),N=r.attributes[O++],D=N.format+1,L=I.elementLength,F=I.view,k=0;k<l;k++){for(var B=(N.offset+k*f)/4,j=0;j<D;j++)A[B+j]=j<L?F[k*I.stride+j]:3===j?1:0;"POSITION"===g&&(T.min.x=Math.min(T.min.x,A[B+0]),T.max.x=Math.max(T.max.x,A[B+0]),T.min.y=Math.min(T.min.y,A[B+1]),T.max.y=Math.max(T.max.y,A[B+1]),T.min.z=Math.min(T.min.z,A[B+2]),T.max.z=Math.max(T.max.z,A[B+2]))}return{buffer:new Float32Array(C),layoutDesc:r,layout:E,macros:n,boundingBox:T,lackNormal:x,lackTangent:S,normalSlot:c,tangentSlot:u}},t.prototype.extendLayoutByAttribName=function(e,t,r,n){var i=h(t);return e.attributes.push({name:d(t),format:o.Kanata.EVertexFormat.FLOAT+i-1,offset:r,usage:p(t)}),4*i},t}(a.GLTFBaseNode)},"./src/loader/glTF/geometry/primitives/targets/GLTFTargetsNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u,validMorphAttribs:()=>c});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},s=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=["POSITION","NORMAL","TANGENT"];const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return i(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Targets"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(){return a(this,void 0,Promise,(function(){var e,t,r,n,o,i;return s(this,(function(a){for(e={},t=0;t<this.raw.length;t++)for(r=this.raw[t],n=0,o=Object.keys(r);n<o.length;n++)i=o[n],this.assert(-1!==c.indexOf(i),"unsupported morph attrib: "+i+"."),e["MORPH_"+t+"_"+i]=r[i];return this.resource={attributes:e},[2,this.resource]}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(o.GLTFBaseNode)},"./src/loader/glTF/materials/GLTFMaterialNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{EnumGLTFMaterialAlphaMode:()=>o,default:()=>v});var n,o,i=r("./src/loader/glTF/GLTFBaseNode.ts"),a=r("./src/loader/glTF/materials/texture/GLTFTextureInfoNode.ts"),s=r("./src/loader/glTF/materials/pbr/GLTFPBRMetallicRoughnessNode.ts"),c=r("./src/loader/glTF/materials/texture/GLTFNormalTextureInfoNode.ts"),u=r("./src/loader/glTF/materials/texture/GLTFOcclusionTextureInfoNode.ts"),l=r("./src/assets/Material.ts"),f=r("./src/loader/glTF/utils/MaterialUtils.ts"),p=r("./src/ext.ts"),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),h=function(){return h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},h.apply(this,arguments)},_=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},m=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e[e.OPAQUE=0]="OPAQUE",e[e.MASK=1]="MASK",e[e.BLEND=2]="BLEND"}(o||(o={}));const v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return d(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Material"},enumerable:!1,configurable:!0}),t.prototype.build=function(){void 0!==this.raw.pbrMetallicRoughness&&(this.pbrMetallicRoughness=new s.default(this.raw.pbrMetallicRoughness,this),this.pbrMetallicRoughness.build()),void 0!==this.raw.normalTexture&&(this.normalTexture=new c.default(this.raw.normalTexture,this),this.normalTexture.build()),void 0!==this.raw.occlusionTexture&&(this.occlusionTexture=new u.default(this.raw.occlusionTexture,this),this.occlusionTexture.build()),void 0!==this.raw.emissiveTexture&&(this.emissiveTexture=new a.default(this.raw.emissiveTexture,this),this.emissiveTexture.build())},t.prototype.preloadWithoutPBR=function(e){var t,r,n,i,a,s,c,u;return _(this,void 0,Promise,(function(){var l,d,_,v,y,g;return m(this,(function(m){switch(m.label){case 0:return l=e[0],g={},[4,null===(t=this.normalTexture)||void 0===t?void 0:t.preload()];case 1:return g.normalTexture=m.sent(),[4,null===(r=this.occlusionTexture)||void 0===r?void 0:r.preload()];case 2:return g.occlusionTexture=m.sent(),[4,null===(n=this.emissiveTexture)||void 0===n?void 0:n.preload()];case 3:return g.emissiveTexture=m.sent(),g.emissiveFactor=null!==(i=this.raw.emissiveFactor)&&void 0!==i?i:[0,0,0],g.alphaMode=null!==(a=o[this.raw.alphaMode])&&void 0!==a?a:o.OPAQUE,g.alphaCutoff=null!==(s=this.raw.alphaCutoff)&&void 0!==s?s:.5,g.doubleSided=!!this.raw.doubleSided,_={u_normalMap:(d=g).normalTexture?l[d.normalTexture.index]:void 0,u_normalScale:[null===(c=d.normalTexture)||void 0===c?void 0:c.scale],u_occlusionMap:d.occlusionTexture?l[d.occlusionTexture.index]:void 0,u_occlusionStrength:[null===(u=d.occlusionTexture)||void 0===u?void 0:u.strength],u_emissiveMap:d.emissiveTexture?l[d.emissiveTexture.index]:void 0,u_emissiveFactor:d.emissiveFactor,u_alphaCutoff:[d.alphaCutoff]},v={cullFace:d.doubleSided?p.Kanata.ECullMode.NONE:p.Kanata.ECullMode.FRONT,blendOn:d.alphaMode===o.BLEND,renderQueue:d.alphaMode===o.BLEND?2500:1e3},d.alphaMode===o.BLEND&&(v.blendSrcRGB=p.Kanata.EBlendFactor.SRC_ALPHA,v.blendSrcAlpha=p.Kanata.EBlendFactor.SRC_ALPHA,v.blendDstRGB=p.Kanata.EBlendFactor.ONE_MINUS_SRC_ALPHA,v.blendDstAlpha=p.Kanata.EBlendFactor.ONE_MINUS_SRC_ALPHA,v.depthWrite=!1),y=h(h(h({WX_USE_GLTF:!0},(0,f.genTextureMacros)("normalMap",d.normalTexture)),(0,f.genTextureMacros)("occlusionMap",d.occlusionTexture)),(0,f.genTextureMacros)("emissiveMap",d.emissiveTexture)),d.alphaMode===o.MASK&&(y.WX_USE_ALPHA_CUTOFF=!0),d.doubleSided||(y.WX_USE_CULLON=!0),[2,{uniform:_,renderStates:v,macros:y}]}}))}))},t.prototype.preload=function(e){var t,r,n,o,i;return _(this,void 0,Promise,(function(){var a,s,c,u,p,d,_,v;return m(this,(function(m){switch(m.label){case 0:return v={},[4,null===(t=this.pbrMetallicRoughness)||void 0===t?void 0:t.preload(e)];case 1:return v.pbrMetallicRoughness=m.sent(),[4,this.preloadWithoutPBR(e)];case 2:return v.ownProperties=m.sent(),a=v,s=this.scene.assets.getAsset("effect","standard"),c=h(h({},a.ownProperties.uniform),null===(r=a.pbrMetallicRoughness)||void 0===r?void 0:r.uniform),u=h(h({},a.ownProperties.renderStates),null===(n=a.pbrMetallicRoughness)||void 0===n?void 0:n.renderStates),p=h(h({},null===(o=a.ownProperties)||void 0===o?void 0:o.macros),null===(i=a.pbrMetallicRoughness)||void 0===i?void 0:i.macros),d={uniform:c,renderStates:u,macros:p},[4,this.extensionSlot("BeforeCreateMaterial",d)];case 3:return m.sent(),(_=new l.default(this.scene)).initByEffect(s,c),(0,f.setRenderStates)(_,u),_.setMacros(p),this.resource=_,[2,this.resource]}}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(i.GLTFBaseNode)},"./src/loader/glTF/materials/GLTFMaterialsNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/materials/GLTFMaterialNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.ChildCtor=function(e){return new i.default(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Materials"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(o.GLTFArrayNode)},"./src/loader/glTF/materials/pbr/GLTFPBRMetallicRoughnessNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/utils/MaterialUtils.ts"),a=r("./src/loader/glTF/materials/texture/GLTFTextureInfoNode.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},u=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},l=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return s(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"PBRMetallicRoughness"},enumerable:!1,configurable:!0}),t.prototype.build=function(){void 0!==this.raw.baseColorTexture&&(this.baseColorTextureNode=new a.default(this.raw.baseColorTexture,this),this.baseColorTextureNode.build()),void 0!==this.raw.metallicRoughnessTexture&&(this.metallicRoughnessTexture=new a.default(this.raw.metallicRoughnessTexture,this),this.metallicRoughnessTexture.build())},t.prototype.preload=function(e){var t,r,n,o,a;return u(this,void 0,Promise,(function(){var s,u,f,p,d,h;return l(this,(function(l){switch(l.label){case 0:return s=e[0],h={baseColorFactor:null!==(t=this.raw.baseColorFactor)&&void 0!==t?t:[1,1,1,1]},[4,null===(r=this.baseColorTextureNode)||void 0===r?void 0:r.preload()];case 1:return h.baseColorTexture=l.sent(),h.metallicFactor=null!==(n=this.raw.metallicFactor)&&void 0!==n?n:1,h.roughnessFactor=null!==(o=this.raw.roughnessFactor)&&void 0!==o?o:1,[4,null===(a=this.metallicRoughnessTexture)||void 0===a?void 0:a.preload()];case 2:return h.metallicRoughnessTexture=l.sent(),f={u_baseColorFactor:(u=h).baseColorFactor,u_baseColorMap:u.baseColorTexture?s[u.baseColorTexture.index]:void 0,u_metallicRoughnessValues:[u.metallicFactor,u.roughnessFactor],u_metallicRoughnessMap:u.metallicRoughnessTexture?s[u.metallicRoughnessTexture.index]:void 0},p={},d=c(c({WX_MANUAL_LINEAR_BASECOLORFACTOR:!0},(0,i.genTextureMacros)("baseColorMap",u.baseColorTexture)),(0,i.genTextureMacros)("metallicRoughnessMap",u.metallicRoughnessTexture)),this.resource={uniform:f,renderStates:p,macros:d},[2,this.resource]}}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(o.GLTFBaseNode)},"./src/loader/glTF/materials/texture/GLTFNormalTextureInfoNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},s=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return i(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"NormalTextureInfo"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(){var e,t;return a(this,void 0,Promise,(function(){return s(this,(function(r){return this.resource={index:this.raw.index,texCoord:null!==(e=this.raw.texCoord)&&void 0!==e?e:0,scale:null!==(t=this.raw.scale)&&void 0!==t?t:1},[2,this.resource]}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(o.GLTFBaseNode)},"./src/loader/glTF/materials/texture/GLTFOcclusionTextureInfoNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},s=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return i(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"OcclusionTextureInfo"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(){var e,t;return a(this,void 0,Promise,(function(){return s(this,(function(r){return this.resource={index:this.raw.index,texCoord:null!==(e=this.raw.texCoord)&&void 0!==e?e:0,strength:null!==(t=this.raw.strength)&&void 0!==t?t:1},[2,this.resource]}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(o.GLTFBaseNode)},"./src/loader/glTF/materials/texture/GLTFTextureInfoNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},s=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return i(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"TextureInfo"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(){var e;return a(this,void 0,Promise,(function(){return s(this,(function(t){return this.resource={index:this.raw.index,texCoord:null!==(e=this.raw.texCoord)&&void 0!==e?e:0},[2,this.resource]}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(o.GLTFBaseNode)},"./src/loader/glTF/scenes/GLTFNodeNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var n,o=r("./src/math/matrix4.ts"),i=r("./src/math/quaternion.ts"),a=r("./src/math/vector3.ts"),s=r("./src/loader/glTF/GLTFBaseNode.ts"),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},l=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return c(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Node"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){var t,r;return u(this,void 0,Promise,(function(){var n,s,c,u,f,p,d,h;return l(this,(function(l){return this.assert(void 0===this.raw.weights,"node weights not supported."),n=e[0],s=e[1],c={visible:!0,nodeId:"",position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]},this.raw.matrix?(u=new o.default(new Float32Array(this.raw.matrix)),f=new a.default,p=new o.default,d=new a.default,u.decomposeTransRotMatScale(f,p,d),h=i.default.createFromMatrix4(p),c.position=[f.x,f.y,f.z],c.quat=h,c.scale=[d.x,d.y,d.z]):(this.raw.translation&&(c.position=this.raw.translation),this.raw.rotation&&(c.quat=i.default.createFromArray(this.raw.rotation)),this.raw.scale&&(c.scale=this.raw.scale)),this.resource={children:null!==(t=this.raw.children)&&void 0!==t?t:[],transform:c,mesh:n[this.raw.mesh],skin:s[this.raw.skin],name:null!==(r=this.raw.name)&&void 0!==r?r:"UnnamedGLTFNode"},[2,this.resource]}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(s.GLTFBaseNode)},"./src/loader/glTF/scenes/GLTFNodesNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/scenes/GLTFNodeNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},c=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.ChildCtor=function(e){return new i.default(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Nodes"},enumerable:!1,configurable:!0}),t.prototype.preload=function(e){return s(this,void 0,Promise,(function(){var t,r,n,o,i;return c(this,(function(a){switch(a.label){case 0:return[4,Promise.all(this.children.map((function(t){return t.preload(e)})))];case 1:for(t=a.sent(),r=[],n=0;n<t.length;n++)r.push({data:t[n],children:[],parent:null,index:n,extension:this.children[n].raw.extension});for(n=0;n<t.length;n++)for(o=0;o<t[n].children.length;o++)i=t[n].children[o],r[n].children.push(r[i]),r[i].parent=r[n];return this.res=r,[2,this.res]}}))}))},t.prototype.getLoadedResource=function(){return this.res},t}(o.GLTFArrayNode)},"./src/loader/glTF/scenes/GLTFSceneNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},s=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return i(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Scene"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){var t;return a(this,void 0,Promise,(function(){var r,n,o,i;return s(this,(function(a){for(r=e[0],n=null!==(t=this.raw.nodes)&&void 0!==t?t:[],o=[],i=0;i<n.length;i++)o.push(r[n[i]]);return this.resource=o,[2,this.resource]}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(o.GLTFBaseNode)},"./src/loader/glTF/scenes/GLTFScenesNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/scenes/GLTFSceneNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.ChildCtor=function(e){return new i.default(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Scenes"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(o.GLTFArrayNode)},"./src/loader/glTF/skins/GLTFSkinNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n,o=r("./src/ext.ts"),i=r("./src/loader/glTF/buffers/GLTFAccessorNode.ts"),a=r("./src/loader/glTF/GLTFBaseNode.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},u=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return s(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Skin"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){return c(this,void 0,Promise,(function(){var t,r,n,a,s,c,l;return u(this,(function(u){if(t=e[0],r=this.raw.joints,(n=new((0,o.getKanata)(this.scene).SkeletonBoneInverseModel)).boneNum=r.length,void 0!==this.raw.inverseBindMatrices)a=t[this.raw.inverseBindMatrices],this.assert(a.compact,"invalid inverse matrices accessor: not a compact accessor."),s=a.view.subarray(0,a.count*a.elementLength),a.componentType!==i.EnumGLTFAccessorComponentType.FLOAT&&(s=new Float32Array(a.count)).set(a.view),n.setBoneInverseMatrix(s);else{for(c=new Float32Array(16*r.length),l=0;l<r.length;l++)c[16*l]=c[16*l+5]=c[16*l+10]=c[16*l+15]=1;n.setBoneInverseMatrix(c)}return this.resource={inverseBindMatrices:n,skeleton:this.raw.skeleton,joints:r},[2,this.resource]}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(a.GLTFBaseNode)},"./src/loader/glTF/skins/GLTFSkinsNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/skins/GLTFSkinNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.ChildCtor=function(e){return new i.default(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Skins"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(o.GLTFArrayNode)},"./src/loader/glTF/textures/GLTFImageNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/ext.ts"),i=r("./src/loader/glTF/GLTFBaseNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return a(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Image"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){var t,r=this;if("number"==typeof this.raw.bufferView){var n,i,a=e[0][this.raw.bufferView],s=this.raw.mimeType,c=new Promise((function(e,t){n=e,i=t}));return(f=this.scene.createImage()).type=s,f.onload=function(){n(r.resource)},f.onerror=function(e){i(e)},f.src=a.getUint8View(),this.resource={kanataImage:f,type:s},c}var u,l,f;c=new Promise((function(e,t){u=e,l=t}));(f=new((0,o.getKanata)(this.scene).Image)).onload=function(){u(r.resource)},f.onerror=function(e){l(e)};var p=null!==(t=this.findRoot().uri)&&void 0!==t?t:"";return"/"!==this.raw.uri[0]&&p&&(p+="/"),this.raw.uri.startsWith("data:")||this.raw.uri.startsWith("http")?f.src=this.raw.uri:f.src=p+this.raw.uri,this.resource={kanataImage:f},c},t.prototype.getLoadedResource=function(){return this.resource},t}(i.GLTFBaseNode)},"./src/loader/glTF/textures/GLTFImagesNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/textures/GLTFImageNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.ChildCtor=function(e){return new i.default(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Images"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(o.GLTFArrayNode)},"./src/loader/glTF/textures/GLTFSamplerNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{EnumGLTFSamplerFilter:()=>o,EnumGLTFSamplerWrap:()=>i,NeedMipmap:()=>l,default:()=>f});var n,o,i,a=r("./src/loader/glTF/GLTFBaseNode.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},u=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function l(e){return e===o.NEAREST_MIPMAP_NEAREST||e===o.LINEAR_MIPMAP_NEAREST||e===o.NEAREST_MIPMAP_LINEAR||e===o.LINEAR_MIPMAP_LINEAR}!function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(o||(o={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.REPEAT=10497]="REPEAT"}(i||(i={}));const f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return s(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Sampler"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(){var e,t,r,n;return c(this,void 0,Promise,(function(){return u(this,(function(a){return this.resource={magFilter:null!==(e=this.raw.magFilter)&&void 0!==e?e:o.NEAREST,minFilter:null!==(t=this.raw.minFilter)&&void 0!==t?t:o.NEAREST,wrapS:null!==(r=this.raw.wrapS)&&void 0!==r?r:i.REPEAT,wrapT:null!==(n=this.raw.wrapT)&&void 0!==n?n:i.REPEAT},[2,this.resource]}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(a.GLTFBaseNode)},"./src/loader/glTF/textures/GLTFSamplersNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/textures/GLTFSamplerNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.ChildCtor=function(e){return new i.default(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Samplers"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(o.GLTFArrayNode)},"./src/loader/glTF/textures/GLTFTextureNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/textures/GLTFSamplerNode.ts"),a=r("./src/ext.ts"),s=r("./src/core/logger.ts"),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(){return u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u.apply(this,arguments)},l=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},f=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},p=null,d=null;const h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resource=null,t}return c(t,e),Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Texture"},enumerable:!1,configurable:!0}),t.prototype.build=function(){},t.prototype.preload=function(e){return l(this,void 0,Promise,(function(){var t,r,n,o,c,l,h;return f(this,(function(f){return this.assert("number"==typeof this.raw.source,"no texture source specified."),p||function(e){var t,r;(t={})[i.EnumGLTFSamplerFilter.LINEAR]=e.EFilterMode.LINEAR,t[i.EnumGLTFSamplerFilter.LINEAR_MIPMAP_LINEAR]=e.EFilterMode.LINEAR_MIPMAP_LINEAR,t[i.EnumGLTFSamplerFilter.LINEAR_MIPMAP_NEAREST]=e.EFilterMode.LINEAR_MIPMAP_NEAREST,t[i.EnumGLTFSamplerFilter.NEAREST]=e.EFilterMode.NEAREST,t[i.EnumGLTFSamplerFilter.NEAREST_MIPMAP_LINEAR]=e.EFilterMode.NEAREST_MIPMAP_LINEAR,t[i.EnumGLTFSamplerFilter.NEAREST_MIPMAP_NEAREST]=e.EFilterMode.NEAREST_MIPMAP_NEAREST,p=t,(r={})[i.EnumGLTFSamplerWrap.CLAMP_TO_EDGE]=e.EWrapMode.CLAMP_TO_EDGE,r[i.EnumGLTFSamplerWrap.MIRRORED_REPEAT]=e.EWrapMode.MIRRORED_REPEAT,r[i.EnumGLTFSamplerWrap.REPEAT]=e.EWrapMode.REPEAT,d=r}((0,a.getKanata)(this.scene)),t=e[0],r=e[1],n=t[this.raw.source],o=r[this.raw.sampler],c={wrapU:a.Kanata.EWrapMode.REPEAT,wrapV:a.Kanata.EWrapMode.REPEAT},o&&(c={magFilter:p[o.magFilter],minFilter:p[o.minFilter],wrapU:d[o.wrapS],wrapV:d[o.wrapT]},((0,i.NeedMipmap)(o.minFilter)||(0,i.NeedMipmap)(o.magFilter))&&(c.generateMipmaps=!0)),l={},n.kanataImage&&(l={source:[n.kanataImage],width:n.kanataImage.width,height:n.kanataImage.height}),Math.log2(l.width)%1==0&&Math.log2(l.height)%1==0||c.wrapU===a.Kanata.EWrapMode.CLAMP_TO_EDGE&&c.wrapU===a.Kanata.EWrapMode.CLAMP_TO_EDGE||s.default.warn("[GLTF]A non-pot(power-of-two) texture uses WrapMode other than CLAMP_TO_EDGE, auto correction is applied to avoid misrendering. If you are intentionally using this texture with other WrapMode, we strongly suggest you use xr-frame-cli for auto texture resizing. Github location for xr-frame-cli: https://github.com/wechat-miniprogram/xr-frame-cli."),h=new((0,a.getKanata)(this.scene).Texture)(u(u({},l),c)),this.resource=h,[2,h]}))}))},t.prototype.getLoadedResource=function(){return this.resource},t}(o.GLTFBaseNode)},"./src/loader/glTF/textures/GLTFTexturesNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/loader/glTF/GLTFBaseNode.ts"),i=r("./src/loader/glTF/textures/GLTFTextureNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.ChildCtor=function(e){return new i.default(e,this)},Object.defineProperty(t.prototype,"nodeName",{get:function(){return"Textures"},enumerable:!1,configurable:!0}),t.prototype.getLoadedResource=function(){return this.resources},t}(o.GLTFArrayNode)},"./src/loader/glTF/utils/GLTFTopology.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,genTopoNodeClassByCollector:()=>o});var n=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};function o(e){return function(t){return new i(t,e)}}var i=function(){function e(e,t){var r=this;this.gltfNode=e,this.promise=new Promise((function(e,t){r.resolve=e,r.reject=t})),t&&t.push(this)}return e.prototype.preload=function(e,t){var r=this;return void 0===e&&(e=[]),void 0===t&&(t=[]),Promise.all(e.map((function(e){return e.promise}))).then((function(){return r.gltfNode.preload(n(n([],e.map((function(e){return e.gltfNode.getLoadedResource()}))),t)).then((function(){r.resolve()}))})).catch((function(e){r.reject(e)})),this.promise},e}();const a=i},"./src/loader/glTF/utils/MaterialUtils.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{genTextureMacros:()=>i,getEmptyMaterial:()=>a,setMacros:()=>c,setRenderStates:()=>s});var n=r("./src/assets/Material.ts"),o=r("./src/ext.ts");function i(e,t){if(!t)return{};var r=e.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase(),n={};return 1===t.texCoord&&(n["WX_"+r+"_USE_UV1"]=!0),2===t.texCoord&&(n["WX_"+r+"_USE_UV2"]=!0),3===t.texCoord&&(n["WX_"+r+"_USE_UV3"]=!0),n}function a(e){var t=e.scene._requestTmpObj("gltf-empty-material");if(!t.mat){var r=new n.default(e.scene);r.initByEffect(e.scene.assets.getAsset("effect","standard")),r.setRenderState("cullFace",o.Kanata.ECullMode.FRONT),r.setMacro("WX_USE_GLTF",!0),r.renderQueue=1e3,t.mat=r}return t.mat}function s(e,t){for(var r=0,n=Object.entries(t);r<n.length;r++){var o=n[r],i=o[0],a=o[1];e.setRenderState(i,a)}}function c(e,t){for(var r=0,n=Object.entries(t);r<n.length;r++){var o=n[r],i=o[0],a=o[1];e.setMacro(i,a)}}},"./src/loader/glTF/utils/buffer.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{FloatBuffer:()=>i});var n=r("./src/math/vector3.ts"),o=r("./src/math/vector2.ts"),i=function(){function e(e,t,r){this.view=new Float32Array(e),this.stride=r/4,this.offset=t/4}return Object.defineProperty(e.prototype,"length",{get:function(){return this.view.length/this.stride},enumerable:!1,configurable:!0}),e.prototype.clearZero=function(e){void 0===e&&(e=1);for(var t=this.view.length/this.stride,r=0;r<t;r++)for(var n=0;n<e;n++)this.setFloat(r,n,0)},e.prototype.setFloat=function(e,t,r){this.view[e*this.stride+this.offset+t]=r},e.prototype.readFloat=function(e,t){return this.view[e*this.stride+this.offset+t]},e.prototype.readVec3=function(e){return new n.default(this.view,e*this.stride+this.offset)},e.prototype.setVec3=function(e,t){this.setFloat(e,0,t.x),this.setFloat(e,1,t.y),this.setFloat(e,2,t.z)},e.prototype.setFloat3=function(e,t,r,n){this.setFloat(e,0,t),this.setFloat(e,1,r),this.setFloat(e,2,n)},e.prototype.normalizeVec3=function(e){var t=[this.readFloat(e,0),this.readFloat(e,1),this.readFloat(e,2)],r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);r>0&&(this.setFloat(e,0,t[0]/r),this.setFloat(e,1,t[1]/r),this.setFloat(e,2,t[2]/r))},e.prototype.readVec2=function(e){return new o.default(this.view,e*this.stride+this.offset)},e}()},"./src/loader/glTF/utils/types.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{GLTF:()=>n});var n,o=r("./src/math/vector3.ts");!function(e){var t=function(){};function r(e){this.min.x=Math.min(this.min.x,e.x),this.min.y=Math.min(this.min.y,e.y),this.min.z=Math.min(this.min.z,e.z)}function n(e){this.max.x=Math.max(this.max.x,e.x),this.max.y=Math.max(this.max.y,e.y),this.max.z=Math.max(this.max.z,e.z)}e.BoundingBox=t,function(e){e.createZero=function(){return{min:o.default.ZERO.clone(),max:o.default.ZERO.clone(),adoptMin:r,adoptMax:n}},e.createInfinite=function(){return{min:o.default.createFromNumber(1/0,1/0,1/0),max:o.default.createFromNumber(-1/0,-1/0,-1/0),adoptMin:r,adoptMax:n}}}(t=e.BoundingBox||(e.BoundingBox={}))}(n||(n={}))},"./src/loader/index.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AssetLoader:()=>n.default,AtlasLoader:()=>o.default,CubeTextureLoader:()=>i.default,EnvDataLoader:()=>a.default,GlTFLoader:()=>s.default,IAtlasLoaderOptions:()=>o.IAtlasLoaderOptions,ICubeTextureLoaderOptions:()=>i.ICubeTextureLoaderOptions,IEnvDataLoaderOptions:()=>a.IEnvDataLoaderOptions,IGLTFLoaderOptions:()=>s.IGLTFLoaderOptions,IImageLoaderOptions:()=>c.IImageLoaderOptions,IKeyframeLoaderOptions:()=>u.IKeyframeLoaderOptions,ILoaderOptionsSchema:()=>n.ILoaderOptionsSchema,IRawLoaderOptions:()=>l.IRawLoaderOptions,ITextureLoaderOptions:()=>f.ITextureLoaderOptions,IVideoTextureLoaderOptions:()=>p.IVideoTextureLoaderOptions,ImageLoader:()=>c.default,KeyframeLoader:()=>u.default,RawLoader:()=>l.default,TextureLoader:()=>f.default,VideoTextureLoader:()=>p.default,registerAssetLoader:()=>n.registerAssetLoader});var n=r("./src/loader/AssetLoader.ts"),o=r("./src/loader/AtlasLoader.ts"),i=r("./src/loader/CubeTextureLoader.ts"),a=r("./src/loader/EnvDataLoader.ts"),s=r("./src/loader/GlTFLoader.ts"),c=r("./src/loader/ImageLoader.ts"),u=r("./src/loader/KeyframeLoader.ts"),l=r("./src/loader/RawLoader.ts"),f=r("./src/loader/TextureLoader.ts"),p=r("./src/loader/VideoTextureLoader.ts");(0,n.registerAssetLoader)("image",c.default),(0,n.registerAssetLoader)("texture",f.default),(0,n.registerAssetLoader)("cube-texture",i.default),(0,n.registerAssetLoader)("video-texture",p.default),(0,n.registerAssetLoader)("env-data",a.default),(0,n.registerAssetLoader)("gltf",s.default),(0,n.registerAssetLoader)("keyframe",u.default),(0,n.registerAssetLoader)("raw",l.default),(0,n.registerAssetLoader)("atlas",o.default)},"./src/loader/types.ts":(e,t,r)=>{"use strict";function n(e){var t;return null===(t=e)||void 0===t?void 0:t.__isAsset}var o;r.r(t),r.d(t,{EAssetState:()=>o,isAsset:()=>n}),function(e){e[e.Undefined=0]="Undefined",e[e.Defer=1]="Defer",e[e.Loading=2]="Loading",e[e.Existed=3]="Existed"}(o||(o={}))},"./src/math/OBB.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r("./src/math/vector3.ts"),o=n.default.createFromNumber(0,1,0);const i=function(){function e(){this._center=n.default.createFromNumber(0,0,0),this._AxisX=n.default.createFromNumber(1,0,0),this._AxisY=n.default.createFromNumber(0,1,0),this._AxisZ=n.default.createFromNumber(0,0,1),this._width=0,this._height=0,this._depth=0}return e.prototype.setValues=function(e,t,r,n,o,i,a){this._center.setValue(e,t,r),this.setForward(n),this._width=o,this._height=i,this._depth=a},Object.defineProperty(e.prototype,"center",{get:function(){return this._center},set:function(e){this._center=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this._depth},set:function(e){this._depth=e},enumerable:!1,configurable:!0}),e.prototype.setForward=function(e){e.normalize(this._AxisZ),this._updateAxis()},Object.defineProperty(e.prototype,"AxisX",{get:function(){return this._AxisX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AxisY",{get:function(){return this._AxisY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AxisZ",{get:function(){return this._AxisZ},enumerable:!1,configurable:!0}),e.prototype._updateAxis=function(){o.cross(this._AxisZ,this._AxisX),this._AxisX.cross(this._AxisZ,this._AxisY)},e}()},"./src/math/Spherical.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r("./src/math/vector3.ts");const o=function(){function e(e,t,r){this.isSpherical=!0,this.center=new n.default,this.radius=e||0,this.phi=t||0,this.theta=r||0}return e.prototype.set=function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},e.prototype.clone=function(){return(new e).copy(this)},e.prototype.copy=function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},e.prototype.makeSafe=function(){var t=e.EPS;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},e.prototype.setFromVector3=function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},e.prototype.setFromCartesianCoords=function(e,t,r){var n,o,i;return this.radius=Math.sqrt(e*e+t*t+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos((n=t/this.radius,i=1,n<(o=-1)?o:n>i?i:n))),this},e.prototype.toVector3=function(e){e=e||new n.default;var t=this,r=t.radius,o=t.phi,i=t.theta,a=t.center;return e.x=r*Math.sin(o)*Math.sin(i)+a.x,e.y=r*Math.cos(o)+a.y,e.z=r*Math.sin(o)*Math.cos(i)+a.z,e},e.EPS=1e-6,e}()},"./src/math/boundBall.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r("./src/math/vector3.ts"),o=r("./src/math/utils.ts"),i=new n.default(new Float32Array(3),0),a=new Float32Array(3),s={center:0,radius:3};const c=function(){function e(e,t){this._center=void 0,this._raw=e||new Float32Array(4),this._offset=t||0}return Object.defineProperty(e.prototype,"center",{get:function(){return this._center||(this._center=n.default.createFromTypedArray(this._raw,this._offset)),this._center},set:function(e){o.v3Helper.copy(e._raw,e._offset,this._raw,this._offset)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this._raw[this._offset+s.radius]},set:function(e){this._raw[this._offset+s.radius]=e},enumerable:!1,configurable:!0}),e.createFromCenterAndRadius=function(t,r){var n=new e;return n.center=t,n.radius=r,n},e.prototype.setValue=function(e,t){return o.v3Helper.copy(e._raw,e._offset,this._raw,this._offset),this._raw[this._offset+s.radius]=t,this},e.prototype.initByPoints=function(e){var t=i._raw;t.fill(0);for(var r=a,n=0,s=e;n<s.length;n++){var c=s[n];o.v3Helper.add(t,0,c._raw,c._offset,t,0)}o.v3Helper.scale(t,0,1/e.length,t,0);for(var u=0,l=0,f=e;l<f.length;l++){c=f[l];o.v3Helper.sub(t,0,c._raw,c._offset,r,0);var p=o.v3Helper.length(r,0);p>u&&(u=p)}return this.setValue(i,u)},e.prototype.initByPointRadius=function(e,t){o.v3Helper.copy(e._raw,e._offset,this._raw,this._offset),this.radius=t},e.OFFSETS=Object.freeze(s),e}()},"./src/math/boundBox.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r("./src/math/vector3.ts"),o=r("./src/math/utils.ts"),i=new n.default,a=new n.default,s={center:0,size:3};const c=function(){function e(e,t){this._center=void 0,this._size=void 0,this._raw=e||new Float32Array(6),this._offset=t||0}return Object.defineProperty(e.prototype,"center",{get:function(){return this._center||(this._center=n.default.createFromTypedArray(this._raw,this._offset)),this._center},set:function(e){o.v3Helper.copy(e._raw,e._offset,this._raw,this._offset)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size||(this._size=n.default.createFromTypedArray(this._raw,this._offset+s.size)),this._size},set:function(e){o.v3Helper.copy(e._raw,e._offset,this._raw,this._offset+s.size)},enumerable:!1,configurable:!0}),e.createFromCenterAndSize=function(t,r){var n=new e;return n.center=t,n.size=r,n},e.prototype.setValue=function(e,t){return o.v3Helper.copy(e._raw,e._offset,this._raw,this._offset),o.v3Helper.copy(t._raw,t._offset,this._raw,this._offset+s.size),this},e.prototype.initByPoints=function(e,t){t=t||e.length,this.startInitByPoints();for(var r=0;r<t;r++)this.addPoint(e[r]);this.endInitByPoints()},e.prototype.startInitByPoints=function(){this._temp_xMax=-Number.MAX_VALUE,this._temp_xMin=Number.MAX_VALUE,this._temp_yMax=-Number.MAX_VALUE,this._temp_yMin=Number.MAX_VALUE,this._temp_zMax=-Number.MAX_VALUE,this._temp_zMin=Number.MAX_VALUE},e.prototype.addPoint=function(e){this._temp_xMax=Math.max(this._temp_xMax,e.x),this._temp_xMin=Math.min(this._temp_xMin,e.x),this._temp_yMax=Math.max(this._temp_yMax,e.y),this._temp_yMin=Math.min(this._temp_yMin,e.y),this._temp_zMax=Math.max(this._temp_zMax,e.z),this._temp_zMin=Math.min(this._temp_zMin,e.z)},e.prototype.endInitByPoints=function(){i.setValue((this._temp_xMax+this._temp_xMin)/2,(this._temp_yMax+this._temp_yMin)/2,(this._temp_zMax+this._temp_zMin)/2),a.setValue(this._temp_xMax-this._temp_xMin,this._temp_yMax-this._temp_yMin,this._temp_zMax-this._temp_zMin),this.setValue(i,a)},e.OFFSETS=Object.freeze(s),e}()},"./src/math/color.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{BlendType:()=>n,GetColorFromHex:()=>s,default:()=>u});var n,o=r("./src/math/utils.ts"),i=r("./src/math/vector3.ts");!function(e){e[e.Alpha=0]="Alpha",e[e.RGB=1]="RGB",e[e.RGBA=2]="RGBA",e[e.None=3]="None"}(n||(n={}));var a={},s=function(e){if(a[e])return a[e];var t=e.replace(/\#/,""),r=["F","F",t[4]||"F",t[5]||"F",t[2]||"F",t[3]||"F",t[0]||"F",t[1]||"F"];return a[e]=parseInt(r.join(""),16),a[e]},c=new i.default;const u=function(){function e(e,t,r,n){e=e||0,t=t||0,r=r||0,n="number"==typeof n?n:255,this._value32=(n<<24>>>0)+(r<<16)+(t<<8)+e}return Object.defineProperty(e.prototype,"r",{get:function(){return 255&this._value32},set:function(e){e=(0,o.mathClamp)(e,0,255),this._value32=(4294967040&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g",{get:function(){return(65280&this._value32)>>>8},set:function(e){e=(0,o.mathClamp)(e,0,255)<<8,this._value32=(4294902015&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return(16711680&this._value32)>>>16},set:function(e){e=(0,o.mathClamp)(e,0,255)<<16,this._value32=(4278255615&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"a",{get:function(){return(4278190080&this._value32)>>>24},set:function(e){e=(0,o.mathClamp)(e,0,255)<<24,this._value32=(16777215&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){return new e(255,255,255,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"BLACK",{get:function(){return new e(0,0,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TRANSPARENT",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.blendColorHex=function(e,t,r){var o,i,a,s;switch(void 0===r&&(r=n.None),r){case n.Alpha:o=(((4278190080&e)>>>24)*((4278190080&t)>>>24)/255<<24>>>0)+(16777215&e);break;case n.RGB:o=(4278190080&e)+((i=.5)*((16711680&e)>>>16)+(a=.5)*((16711680&t)>>>16)<<16)+(i*((65280&e)>>>8)+a*((65280&t)>>>8)<<8)+(i*(255&e)+a*(255&t));break;case n.RGBA:o=(256*(s=1-(1-(i=((4278190080&e)>>>24)/256))*(1-(a=((4278190080&t)>>>24)/256)))<<24>>>0)+((i*((16711680&e)>>>16)+(1-i)*a*((16711680&t)>>>16))/s<<16)+((i*((65280&e)>>>8)+(1-i)*a*((65280&t)>>>8))/s<<8)+(i*(255&e)+(1-i)*a*(255&t))/s;break;case n.None:default:o=e}return o},e.multiplyColorHex=function(e,t,r){var o;switch(void 0===r&&(r=n.None),r){case n.Alpha:o=(((4278190080&e)>>>24)*((4278190080&t)>>>24)/255<<24>>>0)+(16777215&e);break;case n.RGB:o=(4278190080&e)+(((16711680&e)>>>16)*((16711680&t)>>>16)/255<<16)+(((65280&e)>>>8)*((65280&t)>>>8)/255<<8)+(255&e)*(255&t)/255;break;case n.RGBA:o=(((4278190080&e)>>>24)*((4278190080&t)>>>24)/255<<24>>>0)+(((16711680&e)>>>16)*((16711680&t)>>>16)/255<<16)+(((65280&e)>>>8)*((65280&t)>>>8)/255<<8)+(255&e)*(255&t)/255;break;case n.None:default:o=e}return o},e.getValue32FromRGBA=function(e,t,r,n){return(n<<24>>>0)+(r<<16)+(t<<8)+e},e.getValue32FromHSVA=function(){},e.percentRoundFn=function(e){return Math.round(100*e)/100},e.diffc=function(e,t,r){return(e-t)/6/r+.5},e.rgb2hsv=function(t,r,n,o){var a=0,s=0,c=0,u=0,l=0,f=t/255,p=r/255,d=n/255,h=Math.max(f,p,d),_=h-Math.min(f,p,d);return 0===_?a=s=0:(s=_/h,c=e.diffc(h,f,_),u=e.diffc(h,p,_),l=e.diffc(h,d,_),f===h?a=l-u:p===h?a=1/3+c-l:d===h&&(a=2/3+u-c),a<0?a+=1:a>1&&(a-=1)),o?(o.setValue(Math.round(360*a),e.percentRoundFn(100*s),e.percentRoundFn(100*h)),o):i.default.createFromNumber(Math.round(360*a),e.percentRoundFn(100*s),e.percentRoundFn(100*h))},e.hsvV2rgb=function(e,t,r,n){var o,a,s,c,u,l,f,p;switch(l=r*(1-t),f=r*(1-(u=6*e-(c=Math.floor(6*e)))*t),p=r*(1-(1-u)*t),c%6){case 0:o=r,a=p,s=l;break;case 1:o=f,a=r,s=l;break;case 2:o=l,a=r,s=p;break;case 3:o=l,a=f,s=r;break;case 4:o=p,a=l,s=r;break;case 5:o=r,a=l,s=f}return n?(n.setValue(Math.round(255*o),Math.round(255*a),Math.round(255*s)),n):i.default.createFromNumber(Math.round(255*o),Math.round(255*a),Math.round(255*s))},e.randomMix=function(t,r,n){if(void 0===n&&(n=Math.random()),t===r)return t;var o=255&t,i=(65280&t)>>>8,a=(16711680&t)>>>16,s=(4278190080&t)>>>24,u=255&r,l=(65280&r)>>>8,f=(16711680&r)>>>16,p=(4278190080&r)>>>24,d=e.rgb2hsv(o,i,a,c),h=d.x,_=d.y,m=d.z,v=e.rgb2hsv(u,l,f,c),y=v.x,g=v.y,b=v.z,w=Math.abs(h-y)*n+Math.min(h,y),x=Math.abs(_-g)*n+Math.min(_,g),S=Math.abs(m-b)*n+Math.min(m,b),E=Math.abs(s-p)*n+Math.min(s,p),T=e.hsvV2rgb(w/360,x/100,S/100,c);return this.getValue32FromRGBA(T.x,T.y,T.z,E)},e.fromHex=function(t){var r=new e(0,0,0,0);return r._value32=t,r},e.fromHexString=function(t){var r=new e(0,0,0,0);return r._value32=s(t),r},e.fromFloatArray=function(t){return new e(Math.ceil(255*(t[0]||0)),Math.ceil(255*(t[1]||0)),Math.ceil(255*(t[2]||0)),t.length>=4?Math.ceil(255*(t[3]||0)):255)},e.prototype.clone=function(){var t=new e(0,0,0,0);return t._value32=this._value32,t},e.prototype.equals=function(e){return e._value32===this._value32},e.prototype.set=function(e){this._value32=e._value32},e.prototype.setRGBA=function(e,t,r,n){this._value32=(n<<24>>>0)+(r<<16)+(t<<8)+e},e.prototype.setValue32=function(e){this._value32=e},e.prototype.toNormalizedArray=function(){return[this.r/255,this.g/255,this.b/255,this.a/255]},e.prototype.toRGBAString=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a/255+")"},e.prototype.mix=function(t,r){return r?(r.r=this.r*t.r/255,r.g=this.g*t.g/255,r.b=this.b*t.b/255,r.a=this.a*t.a/255,r):new e(this.r*t.r/255,this.g*t.g/255,this.b*t.b/255,this.a*t.a/255)},e.BlendType=n,e}()},"./src/math/matrix3.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r("./src/math/vector2.ts"),o=r("./src/math/utils.ts"),i=r("./src/core/logger.ts"),a=new Float32Array(9);a.set([1,0,0,0,1,0,0,0,1],0);const s=function(){function e(e,t){this._raw=e||new Float32Array(9),this._offset=t||0}return Object.defineProperty(e.prototype,"raw",{get:function(){return this.__raw||(this.__raw=new Float32Array(this._raw.buffer,4*this._offset,9)),this.__raw},enumerable:!1,configurable:!0}),Object.defineProperty(e,"IDENTITY",{get:function(){var t=new e;return t._raw.set(a),t},enumerable:!1,configurable:!0}),e.createFromArray=function(t){return 9!==t.length&&i.default.throw(new Error("create Matrix Error:array length is wrong")),new e(new Float32Array(t))},e.createFromTypedArray=function(t,r){return void 0===r&&(r=0),t.length-r<9&&i.default.throw(new Error("create Matrix Error:array length is wrong")),new e(t,r)},e.prototype.toArray=function(){for(var e=new Array(9),t=0;t<9;t++)e[t]=this._raw[this._offset+t];return e},e.prototype.translate=function(t,r,n){return n=n||new e,o.m3Helper.translate(this._raw,this._offset,t,r,n._raw,n._offset),n},e.prototype.scale=function(t,r,n){return n=n||new e,o.m3Helper.scale(this._raw,this._offset,t,r,n._raw,n._offset),n},e.prototype.rotate=function(t,r){return r=r||new e,o.m3Helper.rotate(this._raw,this._offset,t,r._raw,r._offset),r},e.prototype.inverse=function(t){return t=t||new e,o.m3Helper.inverse(this._raw,this._offset,t._raw,t._offset),t},e.prototype.multiply=function(t,r){return r=r||new e,o.m3Helper.multiply(this._raw,this._offset,t._raw,t._offset,r._raw,r._offset),r},e.prototype.transformPoint=function(e,t){return t=t||new n.default,o.m3Helper.transformPoint(this._raw,this._offset,e._raw,e._offset,c._raw,c._offset),t.set(c),t},e.prototype.setArray=function(e,t){if(t)for(var r=0;r<4;r+=1)this._raw[this._offset+r]=e[t+r];else this._raw.set(e,this._offset);return this},e}();var c=new n.default},"./src/math/matrix4.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r("./src/math/utils.ts"),o=r("./src/math/vector3.ts"),i=r("./src/math/vector4.ts"),a=r("./src/core/logger.ts"),s=new Float32Array(16);s.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0);var c=function(){function e(e,t){this._raw=e||new Float32Array(16),this._offset=t||0}return Object.defineProperty(e,"IDENTITY",{get:function(){var t=new e;return t._raw.set(s),t},enumerable:!1,configurable:!0}),e.lookAt=function(t,r,o,i){return i=i||new e,n.m4Helper.lookAt(t._raw,t._offset,r._raw,r._offset,o._raw,o._offset,i._raw,i._offset),i},e.perspective=function(t,r,o,i,a){return a=a||new e,n.m4Helper.perspective(t,r,o,i,a._raw,a._offset),a},e.orthographic=function(t,r,o,i,a,s,c){return c=c||new e,n.m4Helper.orthographic(t,r,o,i,a,s,c._raw,c._offset),c},e.fromQuaternion=function(t,r){return r=r||new e,n.quatHelper.toMatrix4(t._raw,t._offset,r._raw,r._offset),r},e.createFromArray=function(t){return 16!==t.length&&a.default.throw(new Error("create Matrix Error:array length is wrong")),new e(new Float32Array(t))},e.createFromTypedArray=function(t,r){return void 0===r&&(r=0),t.length-r<16&&a.default.throw(new Error("create Matrix Error:array length is wrong")),new e(t,r)},e.createRotationX=function(t,r){return r=r||new e,n.m4Helper.xRotation(t,r._raw,r._offset),r},e.createRotationY=function(t,r){return r=r||new e,n.m4Helper.yRotation(t,r._raw,r._offset),r},e.createRotationZ=function(t,r){return r=r||new e,n.m4Helper.zRotation(t,r._raw,r._offset),r},e.createRotationAxis=function(t,r,o){return o=o||new e,n.m4Helper.axisRotation(t._raw,t._offset,r,o._raw,o._offset),o},e.composeTRS=function(t,r,o,i){return i=i||new e,n.m4Helper.composeTRS(t._raw,t._offset,r._raw,r._offset,o._raw,o._offset,i._raw,i._offset),i},e.composeTQS=function(t,r,n,o){return o=e.fromQuaternion(r,o),e.composeTRS(t,o,n,o),o},e.composeFromRST3=function(t,r){return r=r||new e,n.m4Helper.composeRST3toRST4(t._raw,t._offset,r._raw,r._offset),r},e.prototype.toArray=function(){for(var e=new Array(16),t=0;t<16;t++)e[t]=this._raw[this._offset+t];return e},e.prototype.translate=function(t,r,o,i){return i=i||new e,n.m4Helper.translate(this._raw,this._offset,t,r,o,i._raw,i._offset),i},e.prototype.scale=function(t,r,o,i){return i=i||new e,n.m4Helper.scale(this._raw,this._offset,t,r,o,i._raw,i._offset),i},e.prototype.xRotate=function(t,r){return r=r||new e,n.m4Helper.xRotate(this._raw,this._offset,t,r._raw,r._offset),r},e.prototype.yRotate=function(t,r){return r=r||new e,n.m4Helper.yRotate(this._raw,this._offset,t,r._raw,r._offset),r},e.prototype.zRotate=function(t,r){return r=r||new e,n.m4Helper.zRotate(this._raw,this._offset,t,r._raw,r._offset),r},e.prototype.axisRotate=function(t,r,o){return o=o||new e,n.m4Helper.axisRotate(this._raw,this._offset,t._raw,t._offset,r,o._raw,o._offset),o},e.prototype.rotateByQuaternion=function(t,r){r=r||new e;var n=l;return e.fromQuaternion(t,n),this.multiply(n,r),r},e.prototype.inverse=function(t){return t=t||new e,n.m4Helper.inverse(this._raw,this._offset,t._raw,t._offset),t},e.prototype.transpose=function(t){return t=t||new e,n.m4Helper.transpose(this._raw,this._offset,t._raw,t._offset),t},e.prototype.multiply=function(t,r){return r=r||new e,n.m4Helper.multiply(this._raw,this._offset,t._raw,t._offset,r._raw,r._offset),r},e.prototype.transformVector=function(e,t){return t=t||new i.default,n.m4Helper.transformVector(this._raw,this._offset,e._raw,e._offset,p._raw,p._offset),t.set(p),t},e.prototype.transformDirection=function(e,t){return t=t||new o.default,n.m4Helper.transformDirection(this._raw,this._offset,e._raw,e._offset,f._raw,f._offset),t.set(f),t},e.prototype.transformPoint=function(e,t){return t=t||new o.default,n.m4Helper.transformPoint(this._raw,this._offset,e._raw,e._offset,f._raw,f._offset),t.set(f),t},e.prototype.set=function(e){return n.m4Helper.copy(e._raw,e._offset,this._raw,this._offset),this},e.prototype.clone=function(){var t=new e;return n.m4Helper.copy(this._raw,this._offset,t._raw,t._offset),t},e.prototype.decomposeTransRotMatScale=function(e,t,r){return n.m4Helper.decomposeTransRotMatScale(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset,r._raw,r._offset)},e.prototype.setValue=function(e,t,r){return this._raw[this._offset+4*t+r]=e,this},e.prototype.getValue=function(e,t){return this._raw[this._offset+4*e+t]},e.prototype.setColumn=function(e,t){var r=this._offset+4*t;return this._raw[r]=e.x,this._raw[r+1]=e.y,this._raw[r+2]=e.z,this._raw[r+3]=e.w,this},e.prototype.getColumn=function(e,t){t=t||new i.default;var r=this._offset+4*e;return t.setValue(this._raw[r],this._raw[r+1],this._raw[r+2],this._raw[r+3]),t},e.prototype.setRow=function(e,t){var r=this._offset+t;return this._raw[r]=e.x,this._raw[r+4]=e.y,this._raw[r+8]=e.z,this._raw[r+12]=e.w,this},e.prototype.getRow=function(e,t){t=t||new i.default;var r=this._offset+e;return t.setValue(this._raw[r],this._raw[r+4],this._raw[r+8],this._raw[r+12]),t},e.prototype.setArray=function(e,t){if(t)for(var r=0;r<4;r+=1)this._raw[this._offset+r]=e[t+r];else this._raw.set(e,this._offset);return this},e.prototype.print=function(){for(var e="",t=0;t<4;t++){for(var r=0;r<4;r++)e+=this.getValue(r,t).toPrecision(3)+"\t";e+="\n"}a.default.log(e)},e}();const u=c;var l=new c,f=new o.default,p=new i.default},"./src/math/physicsPool.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{PhysicsQuaternionPool:()=>s,PhysicsVec3Pool:()=>a});var n,o=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(){function e(e,t){this.Phys3D=e,this.size=50,this.pools=[],this.h_i=0,this.h_j=0,t&&(this.size=t),this.pools.push(this.createPool()),this.h_i=this.h_j=0}return e.prototype.createPool=function(){for(var e=[],t=0;t<this.size;t++)e.push(this.create());return e},e.prototype.get=function(){return this.h_i>=this.pools[this.h_j].length&&(this.h_i=0,this.h_j++),this.h_j>=this.pools.length&&this.pools.push(this.createPool()),this.pools[this.h_j][this.h_i++]},e.prototype.from=function(e){var t=this.get();return this.assign(t,e),t},e.prototype.clear=function(){this.h_i=this.h_j=0},e}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.create=function(){if(!this.Phys3D)throw"vector3 create error: no physics engine found.";return new this.Phys3D.RawVec3f},t.prototype.assign=function(e,t){e.x=t.x,e.y=t.y,e.z=t.z},t}(i),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.create=function(){if(!this.Phys3D)throw"quaternion create error: no physics engine found.";return new this.Phys3D.RawQuaternion},t.prototype.assign=function(e,t){e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w},t}(i)},"./src/math/quaternion.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var n,o=r("./src/math/matrix4.ts"),i=r("./src/math/vector3.ts"),a=r("./src/math/utils.ts"),s=r("./src/core/logger.ts"),c=r("./src/math/physicsPool.ts"),u=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(){function e(e,t){this._isDirty=!1,this._raw=e||new Float32Array(4),this._offset=t||0,this._isDirty=!1}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._isDirty=!0,this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._isDirty=!0,this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){this._isDirty=!0,this._raw[this._offset+2]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"w",{get:function(){return this._raw[this._offset+3]},set:function(e){this._isDirty=!0,this._raw[this._offset+3]=e},enumerable:!1,configurable:!0}),e.fromEulerAngles=function(t,r){return r=r||new e,a.quatHelper.fromEulerAngles(t._raw,t._offset,m._raw,m._offset),r.set(m),r},e.createFromMatrix4=function(t,r){return r=r||new e,a.quatHelper.fromMatrix4(t._raw,t._offset,m._raw,m._offset),r.set(m),r},e.createFromAxisAngle=function(t,r,n){return n=n||new e,o.default.createRotationAxis(t,r,h),e.createFromMatrix4(h,n),n},e.lookRotation=function(t,r,n){return n=n||new e,o.default.lookAt(i.default.ZERO,t,r,h),e.createFromMatrix4(h,n),n},e.createFromNumber=function(t,r,n,o){var i=new Float32Array(4);return i[0]=t,i[1]=r,i[2]=n,i[3]=o,new e(i)},e.createFromArray=function(t){return 4!==t.length&&s.default.throw(new Error("create Quaternion error:array length is wrong")),new e(new Float32Array(t))},e.createFromTypedArray=function(t,r){return void 0===r&&(r=0),t.length-r<4&&s.default.throw(new Error("create Quaternion error:array length is wrong")),new e(t,r)},e.createFromUnitVectors=function(t,r){return(new e).setFromUnitVectors(t,r)},e.prototype.set=function(e){return this._isDirty=!0,a.v4Helper.copy(e._raw,e._offset,this._raw,this._offset),this},e.prototype.setValue=function(e,t,r,n){this._isDirty=!0;var o=this._raw;return o[this._offset+0]=e,o[this._offset+1]=t,o[this._offset+2]=r,o[this._offset+3]=n,this},e.prototype.slerp=function(t,r,n){return n=n||new e,a.quatHelper.slerp(this._raw,this._offset,t._raw,t._offset,r,m._raw,m._offset),n.set(m),n},e.prototype.invert=function(t){return t=t||new e,a.quatHelper.invert(this._raw,this._offset,m._raw,m._offset),t.set(m),t},e.prototype.add=function(t,r){return r=r||new e,a.v4Helper.add(this._raw,this._offset,t._raw,t._offset,m._raw,m._offset),r.set(m),r},e.prototype.sub=function(t,r){return r=r||new e,a.v4Helper.sub(this._raw,this._offset,t._raw,t._offset,m._raw,m._offset),r.set(m),r},e.prototype.multiply=function(t,r){return r=r||new e,a.quatHelper.multiply(this._raw,this._offset,t._raw,t._offset,m._raw,m._offset),r.set(m),r},e.prototype.premultiply=function(e){return this.multiply(e,this)},e.prototype.dot=function(e){return(0,a.round)(this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w,5)},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},e.prototype.normalize=function(){this._isDirty=!0;var e=this.length();return 0===e?(this._raw[this._offset]=0,this._raw[this._offset+1]=0,this._raw[this._offset+2]=0,this._raw[this._offset+3]=1):(e=1/e,this._raw[this._offset]=this._raw[this._offset]*e,this._raw[this._offset+1]=this._raw[this._offset+1]*e,this._raw[this._offset+2]=this._raw[this._offset+2]*e,this._raw[this._offset+3]=this._raw[this._offset+3]*e),this},e.prototype.setFromUnitVectors=function(e,t){var r=e.dot(t)+1;return r<1e-6?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._raw[this._offset]=-e.y,this._raw[this._offset+1]=e.x,this._raw[this._offset+2]=0,this._raw[this._offset+3]=r):(this._raw[this._offset]=0,this._raw[this._offset+1]=-e.z,this._raw[this._offset+2]=e.y,this._raw[this._offset+3]=r)):(this._raw[this._offset]=e.y*t.z-e.z*t.y,this._raw[this._offset+1]=e.z*t.x-e.x*t.z,this._raw[this._offset+2]=e.x*t.y-e.y*t.x,this._raw[this._offset+3]=r),this.normalize()},e.prototype.setFromYawRollPitch=function(e,t,r){a.quatHelper.fromYawRollPitch(e,r,t,this._raw,this._offset),this._isDirty=!0},e.prototype.setFromEulerAngles=function(e){this.setFromYawRollPitch(e.x,e.y,e.z)},e.prototype.angleTo=function(e){var t=Math.max(-1,Math.min(1,this.dot(e)));return 2*Math.acos(Math.abs(t))},e.prototype.rotateTowards=function(e,t){var r=this.angleTo(e);if(0===r)return this;var n=Math.min(1,t/r);return this.slerp(e,n)},e.prototype.clone=function(){var t=new e;return a.v4Helper.copy(this._raw,this._offset,t._raw,t._offset),t},e.prototype.isDefault=function(){return a.v4Helper.equal(this._raw,this._offset,_._raw,_._offset)},e.prototype.toEulerAngles=function(e){return e=e||new i.default,a.quatHelper.toEulerAngles(this._raw,this._offset,v._raw,v._offset),e.set(v),e},e.prototype.equal=function(e){return a.v4Helper.equal(this._raw,this._offset,e._raw,e._offset)},e.fromPhysics=function(t){return e.createFromNumber(t.x,t.y,t.z,t.w)},e.prototype.fromPhysics=function(e){return this._isDirty=!0,this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},e.clearPhysicsPool=function(){this.physicsPool&&this.physicsPool.clear()},e.prototype.toPhysics=function(){return e.Phys3D?(e.physicsPool||(e.physicsPool=new c.PhysicsQuaternionPool(e.Phys3D)),e.physicsPool.from(this)):(s.default.error("quaternion convert error: no physics engine found."),null)},e.prototype.setArray=function(e,t){if(this._isDirty=!0,t)for(var r=0;r<4;r+=1)this._raw[this._offset+r]=e[t+r];else this._raw.set(e,this._offset);return this},e}();const f=l;var p="try to set value to read only quaternion",d=function(e){function t(t,r){return e.call(this,t,r)||this}return u(t,e),Object.defineProperty(t.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){s.default.error(p)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){s.default.error(p)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){s.default.error(p)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this._raw[this._offset+3]},set:function(e){s.default.error(p)},enumerable:!1,configurable:!0}),t.prototype.set=function(){return s.default.error(p),this},t.prototype.setValue=function(){return s.default.error(p),this},t}(l);l.DEFAULT=new d(new Float32Array([0,0,0,1]));var h=new o.default,_=l.DEFAULT.clone(),m=new l,v=new i.default},"./src/math/utils.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{arcTanAngle:()=>o,isPowOf2:()=>i,lerp:()=>M,m3Helper:()=>h,m4Helper:()=>_,mathClamp:()=>s,mathHelper:()=>u,nearEqual:()=>a,quatHelper:()=>d,randomBetween:()=>R,round:()=>c,seedrandom:()=>O,v2Helper:()=>l,v3Helper:()=>f,v4Helper:()=>p});var n=r("./src/core/logger.ts");function o(e,t){return 0===e?1===t?Math.PI/2:-Math.PI/2:e>0?Math.atan(t/e):e<0?t>0?Math.atan(t/e)+Math.PI:Math.atan(t/e)-Math.PI:0}function i(e){return!(e&e-1)}function a(e,t){return Math.abs(e-t)<1e-6}function s(e,t,r){return(e=e>t?e:t)<r?e:r}function c(e,t){var r=e.toString().includes("e")?+e:+e+"e"+t;return Math.round(r)/Math.pow(10,t)}var u={arcTanAngle:o,isPowOf2:i,nearEqual:a,mathClamp:s},l={equal:function(e,t,r,n){return a(e[t],r[n])&&a(e[t+1],r[n+1])},add:function(e,t,r,n,o,i){o[i]=e[t]+r[n],o[i+1]=e[t+1]+r[n+1]},sub:function(e,t,r,n,o,i){o[i]=e[t]-r[n],o[i+1]=e[t+1]-r[n+1]},length:function(e,t){var r=e[t],n=e[t+1];return Math.sqrt(r*r+n*n)},normalize:function(e,t,r,n){var o=l.length(e,t);0===o?(r[n]=0,r[n+1]=0):(r[n]=e[t]/o,r[n+1]=e[t+1]/o)},scale:function(e,t,r,n,o){n[o]=e[t]*r,n[o+1]=e[t+1]*r},lerp:function(e,t,r,n,o,i,a){var s=1-o;i[a]=e[t]*s+r[n]*o,i[a+1]=e[t+1]*s+r[n+1]*o},dot:function(e,t,r,n){return e[t]*r[n]+e[t+1]*r[n+1]},isZero:function(e,t){return a(e[t],0)&&a(e[t+1],0)},getAngle:function(e,t){var r=180*Math.atan2(e[t+1],e[t])/Math.PI;return(360+Math.round(r))%360},distance:function(e,t,r,n){var o=e[t]-r[n],i=e[t+1]-r[n+1];return Math.sqrt(o*o+i*i)},copy:function(e,t,r,n){r[n+0]=e[t+0],r[n+1]=e[t+1]}},f={equal:function(e,t,r,n){return a(e[t],r[n])&&a(e[t+1],r[n+1])&&a(e[t+2],r[n+2])},add:function(e,t,r,n,o,i){o[i]=e[t]+r[n],o[i+1]=e[t+1]+r[n+1],o[i+2]=e[t+2]+r[n+2]},sub:function(e,t,r,n,o,i){o[i]=e[t]-r[n],o[i+1]=e[t+1]-r[n+1],o[i+2]=e[t+2]-r[n+2]},length:function(e,t){var r=e[t],n=e[t+1],o=e[t+2];return Math.sqrt(r*r+n*n+o*o)},normalize:function(e,t,r,n){var o=f.length(e,t);0===o?(r[n]=0,r[n+1]=0,r[n+2]=0):(r[n]=e[t]/o,r[n+1]=e[t+1]/o,r[n+2]=e[t+2]/o)},scale:function(e,t,r,n,o){n[o]=e[t]*r,n[o+1]=e[t+1]*r,n[o+2]=e[t+2]*r},lerp:function(e,t,r,n,o,i,a){var s=1-o;i[a]=e[t]*s+r[n]*o,i[a+1]=e[t+1]*s+r[n+1]*o,i[a+2]=e[t+2]*s+r[n+2]*o},dot:function(e,t,r,n){return e[t]*r[n]+e[t+1]*r[n+1]+e[t+2]*r[n+2]},isZero:function(e,t){return a(e[t],0)&&a(e[t+1],0)&&a(e[t+2],0)},cross:function(e,t,r,n,o,i){o[i]=e[t+1]*r[n+2]-r[n+1]*e[t+2],o[i+1]=e[t+2]*r[n]-r[n+2]*e[t],o[i+2]=e[t]*r[n+1]-r[n]*e[t+1]},distance:function(e,t,r,n){var o=e[t]-r[n],i=e[t+1]-r[n+1],a=e[t+2]-r[n+2];return Math.sqrt(o*o+i*i+a*a)},angleTo:function(e,t,r,n,i,a){var s=m;f.sub(r,n,e,t,s,0),f.normalize(s,0,s,0),i[a]=Math.asin(s[1]),i[a+1]=o(-s[2],-s[0]),i[a+2]=0},copy:function(e,t,r,n){r[n+0]=e[t+0],r[n+1]=e[t+1],r[n+2]=e[t+2]}},p={equal:function(e,t,r,n){return a(e[t],r[n])&&a(e[t+1],r[n+1])&&a(e[t+2],r[n+2])&&a(e[t+3],r[n+3])},add:function(e,t,r,n,o,i){o[i]=e[t]+r[n],o[i+1]=e[t+1]+r[n+1],o[i+2]=e[t+2]+r[n+2],o[i+3]=e[t+3]+r[n+3]},sub:function(e,t,r,n,o,i){o[i]=e[t]-r[n],o[i+1]=e[t+1]-r[n+1],o[i+2]=e[t+2]-r[n+2],o[i+3]=e[t+3]-r[n+3]},scale:function(e,t,r,n,o){n[o]=e[t]*r,n[o+1]=e[t+1]*r,n[o+2]=e[t+2]*r,n[o+3]=e[t+3]*r},lerp:function(e,t,r,n,o,i,a){var s=1-o;i[a]=e[t]*s+r[n]*o,i[a+1]=e[t+1]*s+r[n+1]*o,i[a+2]=e[t+2]*s+r[n+2]*o,i[a+3]=e[t+3]*s+r[n+3]*o},dot:function(e,t,r,n){return e[t]*r[n]+e[t+1]*r[n+1]+e[t+2]*r[n+2]+e[t+3]*r[n+3]},isZero:function(e,t){return a(e[t],0)&&a(e[t+1],0)&&a(e[t+2],0)&&a(e[t+3],0)},copy:function(e,t,r,n){4===e.length?r.set(e,n):(r[n+0]=e[t+0],r[n+1]=e[t+1],r[n+2]=e[t+2],r[n+3]=e[t+3])}},d={multiply:function(e,t,r,n,o,i){var a=e[t+0],s=e[t+1],c=e[t+2],u=e[t+3],l=r[n+0],f=r[n+1],p=r[n+2],d=r[n+3],h=s*p-c*f,_=c*l-a*p,m=a*f-s*l,v=a*l+s*f+c*p;o[i]=a*d+l*u+h,o[i+1]=s*d+f*u+_,o[i+2]=c*d+p*u+m,o[i+3]=u*d-v},invert:function(e,t,r,n){var o=e[t+0],i=e[t+1],a=e[t+2],s=e[t+3],c=o*o+i*i+a*a+s*s,u=c?1/c:0;r[n]=-o*u,r[n+1]=-i*u,r[n+2]=-a*u,r[n+3]=s*u},toMatrix4:function(e,t,r,n){var o=e[t],i=e[t+1],a=e[t+2],s=e[t+3],c=o+o,u=i+i,l=a+a,f=o*c,p=i*c,d=i*u,h=a*c,_=a*u,m=a*l,v=s*c,y=s*u,g=s*l;r.set(b,n),r[n]=1-d-m,r[n+1]=p+g,r[n+2]=h-y,r[n+4]=p-g,r[n+5]=1-f-m,r[n+6]=_+v,r[n+8]=h+y,r[n+9]=_-v,r[n+10]=1-f-d},fromMatrix4:function(e,t,r,n){var o,i,a=e,s=t,c=g,u=a[s+0]+a[s+5]+a[s+10];u>0?(o=Math.sqrt(u+1),c[3]=.5*o,o=.5/o,c[0]=(a[s+6]-a[s+9])*o,c[1]=(a[s+8]-a[s+2])*o,c[2]=(a[s+1]-a[s+4])*o):a[s+0]>=a[s+5]&&a[s+0]>=a[s+10]?(i=.5/(o=Math.sqrt(1+a[s+0]-a[s+5]-a[s+10])),c[0]=.5*o,c[1]=(a[s+1]+a[s+4])*i,c[2]=(a[s+2]+a[s+8])*i,c[3]=(a[s+6]-a[s+9])*i):a[s+5]>a[s+10]?(i=.5/(o=Math.sqrt(1+a[s+5]-a[s+0]-a[s+10])),c[0]=(a[s+4]+a[s+1])*i,c[1]=.5*o,c[2]=(a[s+9]+a[s+6])*i,c[3]=(a[s+8]-a[s+2])*i):(i=.5/(o=Math.sqrt(1+a[s+10]-a[s+0]-a[s+5])),c[0]=(a[s+8]+a[s+2])*i,c[1]=(a[s+9]+a[s+6])*i,c[2]=.5*o,c[3]=(a[s+1]-a[s+4])*i),r.set(c,n)},fromEulerAngles:function(e,t,r,n){d.fromYawRollPitch(e[t+1],e[t],e[t+2],r,n)},fromYawRollPitch:function(e,t,r,n,o){var i=.5*r,a=.5*t,s=.5*e,c=Math.sin(i),u=Math.cos(i),l=Math.sin(a),f=Math.cos(a),p=Math.sin(s),d=Math.cos(s);n[o]=d*l*u+p*f*c,n[o+1]=p*f*u-d*l*c,n[o+2]=d*f*c-p*l*u,n[o+3]=d*f*u+p*l*c},toEulerAngles:function(e,t,r,n){d.toYawRawPitch(e,t,r,n)},toYawRawPitch:function(e,t,r,n){d.transformDirection(e,t,S,0,m,0),d.transformDirection(e,t,E,0,v,0);var i=v;f.angleTo(T,0,m,0,y,0);var a=y;a[0]===Math.PI/2?(a[1]=o(i[2],i[0]),a[2]=0):a[0]===-Math.PI/2?(a[1]=o(-i[2],-i[0]),a[2]=0):(_.yRotation(-a[1],C,0),_.xRotation(-a[0],A,0),_.transformPoint(C,0,v,0,v,0),_.transformPoint(A,0,v,0,v,0),a[2]=o(i[1],-i[0])),a[1]<=-Math.PI&&(a[1]=Math.PI),a[2]<=-Math.PI&&(a[2]=Math.PI),a[1]>=Math.PI&&a[2]>=Math.PI&&(a[1]=0,a[2]=0,a[0]=Math.PI-a[0]),r.set(a,n)},slerp:function(e,t,r,n,o,i,a){var s,c,u,l,f,p=e[t+0],d=e[t+1],h=e[t+2],_=e[t+3],m=r[n+0],v=r[n+1],y=r[n+2],g=r[n+3];return(c=p*m+d*v+h*y+_*g)<0&&(c=-c,m=-m,v=-v,y=-y,g=-g),1-c>1e-6?(s=Math.acos(c),u=Math.sin(s),l=Math.sin((1-o)*s)/u,f=Math.sin(o*s)/u):(l=1-o,f=o),i[a]=l*p+f*m,i[a+1]=l*d+f*v,i[a+2]=l*h+f*y,i[a+3]=l*_+f*g,i},transformDirection:function(e,t,r,n,o,i){var a=r[n],s=r[n+1],c=r[n+2],u=e[t],l=e[t+1],f=e[t+2],p=e[t+3],d=p*a+l*c-f*s,h=p*s+f*a-u*c,_=p*c+u*s-l*a,m=-u*a-l*s-f*c;o[i]=d*p+m*-u+h*-f-_*-l,o[i+1]=h*p+m*-l+_*-u-d*-f,o[i+2]=_*p+m*-f+d*-l-h*-u}},h={translate:function(e,t,r,n,o,i){var a=e[t+0],s=e[t+1],c=e[t+2],u=e[t+3+0],l=e[t+3+1],f=e[t+3+2],p=e[t+6+0],d=e[t+6+1],h=e[t+6+2];9===e.length?o.set(e,i):o===e&&i===t||(o[i]=a,o[i+1]=s,o[i+2]=c,o[i+3]=u,o[i+4]=l,o[i+5]=f),o[i+6]=a*r+u*n+p,o[i+7]=s*r+l*n+d,o[i+8]=c*r+f*n+h},scale:function(e,t,r,n,o,i){o[i+0]=r*e[t+0],o[i+1]=r*e[t+1],o[i+3]=n*e[t+3],o[i+4]=n*e[t+4],o===e&&i===t||(o[i+6]=e[t+6],o[i+7]=e[t+7],o[i+8]=e[t+8])},rotate:function(e,t,r,n,o){var i=e[t+0],a=e[t+1],s=e[t+2],c=e[t+3],u=e[t+4],l=e[t+5],f=Math.cos(r),p=Math.sin(r);n[o+0]=f*i-p*c,n[o+1]=f*a-p*u,n[o+2]=f*s-p*l,n[o+3]=f*c+p*i,n[o+4]=f*u+p*a,n[o+5]=f*l+p*s,n===e&&o===t||(n[o+6]=e[t+6],n[o+7]=e[t+7],n[o+8]=e[t+8])},inverse:function(e,t,r,n){var o=e[t+0+0],i=e[t+0+1],a=e[t+0+2],s=e[t+3+0],c=e[t+3+1],u=e[t+3+2],l=e[t+6+0],f=e[t+6+1],p=e[t+6+2],d=c*p-u*f,h=i*p-a*f,_=i*u-a*c,m=1/(o*d-s*h+l*_);r[n+0]=m*d,r[n+1]=-m*h,r[n+2]=m*_,r[n+3]=-m*(s*p-u*l),r[n+4]=m*(o*p-a*l),r[n+5]=-m*(o*u-a*s),r[n+6]=m*(s*f-c*l),r[n+7]=-m*(o*f-i*l),r[n+8]=m*(o*c-i*s)},multiply:function(e,t,r,n,o,i){var a=e[t+0+0],s=e[t+0+1],c=e[t+0+2],u=e[t+3+0],l=e[t+3+1],f=e[t+3+2],p=e[t+6+0],d=e[t+6+1],h=e[t+6+2],_=r[n+0+0],m=r[n+0+1],v=r[n+0+2],y=r[n+3+0],g=r[n+3+1],b=r[n+3+2],w=r[n+6+0],x=r[n+6+1],S=r[n+6+2];o[i+0]=_*a+m*u+v*p,o[i+1]=_*s+m*l+v*d,o[i+2]=_*c+m*f+v*h,o[i+3]=y*a+g*u+b*p,o[i+4]=y*s+g*l+b*d,o[i+5]=y*c+g*f+b*h,o[i+6]=w*a+x*u+S*p,o[i+7]=w*s+x*l+S*d,o[i+8]=w*c+x*f+S*h},transformPoint:function(e,t,r,n,o,i){var a=r[n+0],s=r[n+1],c=a*e[t+0+2]+s*e[t+3+2]+e[t+6+2];o[i+0]=(a*e[t+0+0]+s*e[t+3+0]+e[t+6+0])/c,o[i+1]=(a*e[t+0+1]+s*e[t+3+1]+e[t+6+1])/c},decomposeScale:function(e,t,r,n){var o=e[t+0],i=e[t+1],a=e[t+3],s=e[t+4];r[n]=Math.sqrt(o*o+i*i),r[n+1]=Math.sqrt(a*a+s*s)},copy:function(e,t,r,n){if(9===e.length)r.set(e,n);else for(var o=0;o<9;o++)r[n+o]=e[t+o]}},_={lookAt:function(e,t,r,n,o,i,a,s){var c=m,u=v,l=y;f.sub(e,t,r,n,c,0),f.normalize(c,0,c,0),f.cross(o,i,c,0,u,0),f.normalize(u,0,u,0),f.cross(c,0,u,0,l,0),f.normalize(l,0,l,0),a.set(b,s),a[s]=u[0],a[s+1]=u[1],a[s+2]=u[2],a[s+4]=l[0],a[s+5]=l[1],a[s+6]=l[2],a[s+8]=c[0],a[s+9]=c[1],a[s+10]=c[2],a[s+12]=e[t],a[s+13]=e[t+1],a[s+14]=e[t+2]},perspective:function(e,t,r,n,o,i){var a=Math.tan(.5*Math.PI-.5*e),s=1/(r-n);o.set(w,i),o[i]=a/t,o[i+5]=a,o[i+10]=(r+n)*s,o[i+14]=r*n*s*2},orthographic:function(e,t,r,n,o,i,a,s){a.set(x,s),a[s]=2/(t-e),a[s+5]=2/(n-r),a[s+10]=2/(o-i),a[s+12]=(e+t)/(e-t),a[s+13]=(r+n)/(r-n),a[s+14]=(o+i)/(o-i)},xRotation:function(e,t,r){var n=Math.cos(e),o=Math.sin(e);t.set(b,r),t[r+5]=n,t[r+6]=o,t[r+9]=-o,t[r+10]=n},yRotation:function(e,t,r){var n=Math.cos(e),o=Math.sin(e);t.set(b,r),t[r]=n,t[r+2]=-o,t[r+8]=o,t[r+10]=n},zRotation:function(e,t,r){var n=Math.cos(e),o=Math.sin(e);t.set(b,r),t[r]=n,t[r+1]=o,t[r+4]=-o,t[r+5]=n},axisRotation:function(e,t,r,n,o){var i=e[t],a=e[t+1],s=e[t+2],c=Math.sqrt(i*i+a*a+s*s),u=(i/=c)*i,l=(a/=c)*a,f=(s/=c)*s,p=Math.cos(r),d=Math.sin(r),h=1-p;return n.set(b,o),n[o]=u+(1-u)*p,n[o+1]=i*a*h+s*d,n[o+2]=i*s*h-a*d,n[o+4]=i*a*h-s*d,n[o+5]=l+(1-l)*p,n[o+6]=a*s*h+i*d,n[o+8]=i*s*h+a*d,n[o+9]=a*s*h-i*d,n[o+10]=f+(1-f)*p,n},composeTRS:function(e,t,r,n,o,i,a,s){r.length-n>=16?a.set(r.subarray(n,n+16),s):(a[s+3]=0,a[s+7]=0,a[s+11]=0,a[s+15]=0);var c=o[i],u=o[i+1],l=o[i+2];a[s+0]=r[n+0]*c,a[s+1]=r[n+1]*c,a[s+2]=r[n+2]*c,a[s+4]=r[n+4]*u,a[s+5]=r[n+5]*u,a[s+6]=r[n+6]*u,a[s+8]=r[n+8]*l,a[s+9]=r[n+9]*l,a[s+10]=r[n+10]*l,a[s+12]=e[t],a[s+13]=e[t+1],a[s+14]=e[t+2]},composeTQS:function(e,t,r,n,o,i,a,s){d.toMatrix4(r,n,C,0),_.composeTRS(e,t,C,0,o,i,a,s)},translate:function(e,t,r,n,o,i,a){var s=e[t+0],c=e[t+1],u=e[t+2],l=e[t+3],f=e[t+4+0],p=e[t+4+1],d=e[t+4+2],h=e[t+4+3],_=e[t+8+0],m=e[t+8+1],v=e[t+8+2],y=e[t+8+3],g=e[t+12+0],b=e[t+12+1],w=e[t+12+2],x=e[t+12+3];16===e.length?i.set(e,a):i===e&&a===t||(i[a]=s,i[a+1]=c,i[a+2]=u,i[a+3]=l,i[a+4]=f,i[a+5]=p,i[a+6]=d,i[a+7]=h,i[a+8]=_,i[a+9]=m,i[a+10]=v,i[a+11]=y),i[a+12]=s*r+f*n+_*o+g,i[a+13]=c*r+p*n+m*o+b,i[a+14]=u*r+d*n+v*o+w,i[a+15]=l*r+h*n+y*o+x},scale:function(e,t,r,n,o,i,a){i[a+0]=r*e[t+0+0],i[a+1]=r*e[t+0+1],i[a+2]=r*e[t+0+2],i[a+3]=r*e[t+0+3],i[a+4]=n*e[t+4+0],i[a+5]=n*e[t+4+1],i[a+6]=n*e[t+4+2],i[a+7]=n*e[t+4+3],i[a+8]=o*e[t+8+0],i[a+9]=o*e[t+8+1],i[a+10]=o*e[t+8+2],i[a+11]=o*e[t+8+3],i===e&&a===t||(i[a+12]=e[t+12],i[a+13]=e[t+13],i[a+14]=e[t+14],i[a+15]=e[t+15])},xRotate:function(e,t,r,n,o){16===e.length?n.set(e,o):n===e&&o===t||(n[o+0]=e[t+0],n[o+1]=e[t+1],n[o+2]=e[t+2],n[o+3]=e[t+3],n[o+12]=e[t+12],n[o+13]=e[t+13],n[o+14]=e[t+14],n[o+15]=e[t+15]);var i=e[t+4],a=e[t+5],s=e[t+6],c=e[t+7],u=e[t+8],l=e[t+9],f=e[t+10],p=e[t+11],d=Math.cos(r),h=Math.sin(r);n[o+4]=d*i+h*u,n[o+5]=d*a+h*l,n[o+6]=d*s+h*f,n[o+7]=d*c+h*p,n[o+8]=d*u-h*i,n[o+9]=d*l-h*a,n[o+10]=d*f-h*s,n[o+11]=d*p-h*c},yRotate:function(e,t,r,n,o){16===e.length?n.set(e,o):n===e&&o===t||(n[o+4]=e[t+4],n[o+5]=e[t+5],n[o+6]=e[t+6],n[o+7]=e[t+7],n[o+12]=e[t+12],n[o+13]=e[t+13],n[o+14]=e[t+14],n[o+15]=e[t+15]);var i=e[t+0+0],a=e[t+0+1],s=e[t+0+2],c=e[t+0+3],u=e[t+8+0],l=e[t+8+1],f=e[t+8+2],p=e[t+8+3],d=Math.cos(r),h=Math.sin(r);n[o+0]=d*i-h*u,n[o+1]=d*a-h*l,n[o+2]=d*s-h*f,n[o+3]=d*c-h*p,n[o+8]=d*u+h*i,n[o+9]=d*l+h*a,n[o+10]=d*f+h*s,n[o+11]=d*p+h*c},zRotate:function(e,t,r,n,o){16===e.length?n.set(e,o):n===e&&o===t||(n[o+8]=e[t+8],n[o+9]=e[t+9],n[o+10]=e[t+10],n[o+11]=e[t+11],n[o+12]=e[t+12],n[o+13]=e[t+13],n[o+14]=e[t+14],n[o+15]=e[t+15]);var i=e[t+0+0],a=e[t+0+1],s=e[t+0+2],c=e[t+0+3],u=e[t+4+0],l=e[t+4+1],f=e[t+4+2],p=e[t+4+3],d=Math.cos(r),h=Math.sin(r);n[o+0]=d*i+h*u,n[o+1]=d*a+h*l,n[o+2]=d*s+h*f,n[o+3]=d*c+h*p,n[o+4]=d*u-h*i,n[o+5]=d*l-h*a,n[o+6]=d*f-h*s,n[o+7]=d*p-h*c},axisRotate:function(e,t,r,n,o,i,a){var s=r[n],c=r[n+1],u=r[n+2],l=Math.sqrt(s*s+c*c+u*u),f=(s/=l)*s,p=(c/=l)*c,d=(u/=l)*u,h=Math.cos(o),_=Math.sin(o),m=1-h,v=f+(1-f)*h,y=s*c*m+u*_,g=s*u*m-c*_,b=s*c*m-u*_,w=p+(1-p)*h,x=c*u*m+s*_,S=s*u*m+c*_,E=c*u*m-s*_,T=d+(1-d)*h,C=e[t+0],A=e[t+1],O=e[t+2],M=e[t+3],R=e[t+4],P=e[t+5],I=e[t+6],N=e[t+7],D=e[t+8],L=e[t+9],F=e[t+10],k=e[t+11];i[a+0]=v*C+y*R+g*D,i[a+1]=v*A+y*P+g*L,i[a+2]=v*O+y*I+g*F,i[a+3]=v*M+y*N+g*k,i[a+4]=b*C+w*R+x*D,i[a+5]=b*A+w*P+x*L,i[a+6]=b*O+w*I+x*F,i[a+7]=b*M+w*N+x*k,i[a+8]=S*C+E*R+T*D,i[a+9]=S*A+E*P+T*L,i[a+10]=S*O+E*I+T*F,i[a+11]=S*M+E*N+T*k,i===e&&a===t||(i[a+12]=e[t+12],i[a+13]=e[t+13],i[a+14]=e[t+14],i[a+15]=e[t+15])},multiply:function(e,t,r,n,o,i){var a=r[n+0+0],s=r[n+0+1],c=r[n+0+2],u=r[n+0+3],l=r[n+4+0],f=r[n+4+1],p=r[n+4+2],d=r[n+4+3],h=r[n+8+0],_=r[n+8+1],m=r[n+8+2],v=r[n+8+3],y=r[n+12+0],g=r[n+12+1],b=r[n+12+2],w=r[n+12+3],x=e[t+0+0],S=e[t+0+1],E=e[t+0+2],T=e[t+0+3],C=e[t+4+0],A=e[t+4+1],O=e[t+4+2],M=e[t+4+3],R=e[t+8+0],P=e[t+8+1],I=e[t+8+2],N=e[t+8+3],D=e[t+12+0],L=e[t+12+1],F=e[t+12+2],k=e[t+12+3];o[i+0]=a*x+s*C+c*R+u*D,o[i+1]=a*S+s*A+c*P+u*L,o[i+2]=a*E+s*O+c*I+u*F,o[i+3]=a*T+s*M+c*N+u*k,o[i+4]=l*x+f*C+p*R+d*D,o[i+5]=l*S+f*A+p*P+d*L,o[i+6]=l*E+f*O+p*I+d*F,o[i+7]=l*T+f*M+p*N+d*k,o[i+8]=h*x+_*C+m*R+v*D,o[i+9]=h*S+_*A+m*P+v*L,o[i+10]=h*E+_*O+m*I+v*F,o[i+11]=h*T+_*M+m*N+v*k,o[i+12]=y*x+g*C+b*R+w*D,o[i+13]=y*S+g*A+b*P+w*L,o[i+14]=y*E+g*O+b*I+w*F,o[i+15]=y*T+g*M+b*N+w*k},transformVector:function(e,t,r,n,o,i){for(var a=0,s=0,c=0;c<4;++c){s=t+c,o[a=i+c]=0;for(var u=0;u<4;++u)o[a]+=r[n+u]*e[s+4*u]}},transformDirection:function(e,t,r,n,o,i){var a=r[n+0],s=r[n+1],c=r[n+2];o[i+0]=a*e[t+0+0]+s*e[t+4+0]+c*e[t+8+0],o[i+1]=a*e[t+0+1]+s*e[t+4+1]+c*e[t+8+1],o[i+2]=a*e[t+0+2]+s*e[t+4+2]+c*e[t+8+2]},transformPoint:function(e,t,r,n,o,i){var a=r[n+0],s=r[n+1],c=r[n+2],u=a*e[t+0+3]+s*e[t+4+3]+c*e[t+8+3]+e[t+12+3];o[i+0]=(a*e[t+0+0]+s*e[t+4+0]+c*e[t+8+0]+e[t+12+0])/u,o[i+1]=(a*e[t+0+1]+s*e[t+4+1]+c*e[t+8+1]+e[t+12+1])/u,o[i+2]=(a*e[t+0+2]+s*e[t+4+2]+c*e[t+8+2]+e[t+12+2])/u},decomposeTransRotMatScale:function(e,t,r,n,o,i,a,s){r[n+0]=e[t+12],r[n+1]=e[t+13],r[n+2]=e[t+14];var c=e[t+0],u=e[t+1],l=e[t+2],p=e[t+4],d=e[t+5],h=e[t+6],_=e[t+8],g=e[t+9],w=e[t+10],x=a[s+0]=Math.sqrt(c*c+u*u+l*l),S=a[s+1]=Math.sqrt(p*p+d*d+h*h),E=a[s+2]=Math.sqrt(_*_+g*g+w*w);if(o.set(b,i),0===x||0===S||0===E)return!1;var T=m;T[0]=_/E,T[1]=g/E,T[2]=w/E;var C=v;C[0]=c/x,C[1]=u/x,C[2]=l/x;var A=y;f.cross(T,0,C,0,A,0);var O=C;return f.cross(A,0,T,0,O,0),o.set(O,i),o.set(A,i+4),o.set(T,i+8),o[i+0]*c+o[i+1]*u+o[i+2]*l<0&&(a[s+0]=-x),o[i+4]*p+o[i+5]*d+o[i+6]*h<0&&(a[s+1]=-S),o[i+8]*_+o[i+9]*g+o[i+10]*w<0&&(a[s+2]=-E),!0},inverse:function(e,t,r,n){var o=e[t+0+0],i=e[t+0+1],a=e[t+0+2],s=e[t+0+3],c=e[t+4+0],u=e[t+4+1],l=e[t+4+2],f=e[t+4+3],p=e[t+8+0],d=e[t+8+1],h=e[t+8+2],_=e[t+8+3],m=e[t+12+0],v=e[t+12+1],y=e[t+12+2],g=e[t+12+3],b=h*g,w=y*_,x=l*g,S=y*f,E=l*_,T=h*f,C=a*g,A=y*s,O=a*_,M=h*s,R=a*f,P=l*s,I=p*v,N=m*d,D=c*v,L=m*u,F=c*d,k=p*u,B=o*v,j=m*i,U=o*d,G=p*i,V=o*u,W=c*i,z=b*u+S*d+E*v-(w*u+x*d+T*v),H=w*i+C*d+M*v-(b*i+A*d+O*v),X=x*i+A*u+R*v-(S*i+C*u+P*v),K=T*i+O*u+P*d-(E*i+M*u+R*d),$=1/(o*z+c*H+p*X+m*K);r[n+0]=$*z,r[n+1]=$*H,r[n+2]=$*X,r[n+3]=$*K,r[n+4]=$*(w*c+x*p+T*m-(b*c+S*p+E*m)),r[n+5]=$*(b*o+A*p+O*m-(w*o+C*p+M*m)),r[n+6]=$*(S*o+C*c+P*m-(x*o+A*c+R*m)),r[n+7]=$*(E*o+M*c+R*p-(T*o+O*c+P*p)),r[n+8]=$*(I*f+L*_+F*g-(N*f+D*_+k*g)),r[n+9]=$*(N*s+B*_+G*g-(I*s+j*_+U*g)),r[n+10]=$*(D*s+j*f+V*g-(L*s+B*f+W*g)),r[n+11]=$*(k*s+U*f+W*_-(F*s+G*f+V*_)),r[n+12]=$*(D*h+k*y+N*l-(F*y+I*l+L*h)),r[n+13]=$*(U*y+I*a+j*h-(B*h+G*y+N*a)),r[n+14]=$*(B*l+W*y+L*a-(V*y+D*a+j*l)),r[n+15]=$*(V*h+F*a+G*l-(U*l+W*h+k*a))},transpose:function(e,t,r,n){r[n+0]=e[t+0],r[n+1]=e[t+4],r[n+2]=e[t+8],r[n+3]=e[t+12],r[n+4]=e[t+1],r[n+5]=e[t+5],r[n+6]=e[t+9],r[n+7]=e[t+13],r[n+8]=e[t+2],r[n+9]=e[t+6],r[n+10]=e[t+10],r[n+11]=e[t+14],r[n+12]=e[t+3],r[n+13]=e[t+7],r[n+14]=e[t+11],r[n+15]=e[t+15]},composeRST3toRST4:function(e,t,r,n){r.set(b,n),r[n+0]=e[t+0],r[n+1]=e[t+1],r[n+4]=e[t+3],r[n+5]=e[t+4],r[n+10]=1,r[n+12]=e[t+6],r[n+13]=e[t+7],r[n+15]=e[t+8]},copy:function(e,t,r,n){if(16===e.length)r.set(e,n);else for(var o=0;o<16;o++)r[n+o]=e[t+o]}},m=new Float32Array(3),v=new Float32Array(3),y=new Float32Array(3),g=new Float32Array(4),b=new Float32Array(16);b.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0);var w=new Float32Array(16).fill(0);w[11]=-1;var x=new Float32Array(16).fill(0);x[15]=1;var S=new Float32Array([0,0,-1]),E=new Float32Array([0,1,0]),T=new Float32Array([0,0,0]),C=new Float32Array(16),A=new Float32Array(16);function O(e){void 0===e&&(e=Math.random()),("string"==typeof e||Number.isNaN(e))&&(n.default.warn("seed is string or NaN",e),e=Math.random()),0===e&&(e=.1);var t=1e4*Math.sin(e);return t-Math.floor(t)}function M(e,t,r){return t*r+e*(1-r)}function R(e,t,r){return void 0===r&&(r=Math.random()),e===t?e:r*Math.abs(e-t)+Math.min(e,t)}},"./src/math/vector2.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n,o=r("./src/math/utils.ts"),i=r("./src/core/logger.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(){function e(e,t){this._raw=e||new Float32Array(2),this._offset=t||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),e.createFromNumber=function(t,r){var n=new Float32Array(2);return n[0]=t,n[1]=r,new e(n)},e.createFromArray=function(t){return 2!==t.length&&i.default.throw(new Error("create Vector error:array length is wrong")),new e(new Float32Array(t))},e.createFromTypedArray=function(t,r){return void 0===r&&(r=0),t.length-r<2&&i.default.throw(new Error("create Vector error:array length is wrong")),new e(t,r)},e.prototype.toArray=function(){return[this._raw[this._offset],this._raw[this._offset+1]]},e.prototype.equal=function(e){return o.v2Helper.equal(this._raw,this._offset,e._raw,e._offset)},e.prototype.set=function(e){if(2===e._raw.length)this._raw.set(e._raw,this._offset);else for(var t=0;t<2;t++)this._raw[this._offset+t]=e._raw[e._offset+t];return this},e.prototype.setValue=function(e,t){return this._raw[this._offset]=e,this._raw[this._offset+1]=t,this},e.prototype.add=function(t,r){return r=r||new e,o.v2Helper.add(this._raw,this._offset,t._raw,t._offset,f._raw,f._offset),r.set(f),r},e.prototype.sub=function(t,r){return r=r||new e,o.v2Helper.sub(this._raw,this._offset,t._raw,t._offset,f._raw,f._offset),r.set(f),r},e.prototype.normalize=function(t){return t=t||new e,o.v2Helper.normalize(this._raw,this._offset,f._raw,f._offset),t.set(f),t},e.prototype.scale=function(t,r){return r=r||new e,o.v2Helper.scale(this._raw,this._offset,t,f._raw,f._offset),r.set(f),r},e.prototype.lerp=function(t,r,n){return n=n||new e,o.v2Helper.lerp(this._raw,this._offset,t._raw,t._offset,r,f._raw,f._offset),n.set(f),n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.dot=function(e){return o.v2Helper.dot(this._raw,this._offset,e._raw,e._offset)},e.prototype.length=function(){return o.v2Helper.length(this._raw,this._offset)},e.prototype.clone=function(){return e.createFromNumber(this._raw[this._offset+0],this._raw[this._offset+1])},e.prototype.isZero=function(){return o.v2Helper.isZero(this._raw,this._offset)},e.prototype.getAngle=function(){return o.v2Helper.getAngle(this._raw,this._offset)},e.prototype.setArray=function(e,t){if(t)for(var r=0;r<4;r+=1)this._raw[this._offset+r]=e[t+r];else this._raw.set(e,this._offset);return this},e}();const c=s;var u="try to set value to read only vector",l=function(e){function t(t,r){return e.call(this,t,r)||this}return a(t,e),Object.defineProperty(t.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){i.default.error(u)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){i.default.error(u)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){i.default.error(u)},enumerable:!1,configurable:!0}),t.prototype.set=function(){return i.default.error(u),this},t.prototype.setValue=function(){return i.default.error(u),this},t}(s);s.ZERO=new l(new Float32Array([0,0])),s.ONE=new l(new Float32Array([1,1]));var f=new s},"./src/math/vector3.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{Vector3_READONLY:()=>f,default:()=>u});var n,o=r("./src/math/utils.ts"),i=r("./src/math/physicsPool.ts"),a=r("./src/core/logger.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(){function e(e,t){this._isDirty=!1,this._raw=e||new Float32Array(3),this._offset=t||0,this._isDirty=!1}return e.prototype.get=function(e){return this._raw[this._offset+e]},Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._isDirty=!0,this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._isDirty=!0,this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){this._isDirty=!0,this._raw[this._offset+2]=e},enumerable:!1,configurable:!0}),e.createFromNumber=function(e,t,r){var n=new Float32Array(3);return n[0]=e,n[1]=t,n[2]=r,new this(n)},e.createFromArray=function(e){return 3!==e.length&&a.default.throw(new Error("create Vector error:array length is wrong")),new this(new Float32Array(e))},e.createFromTypedArray=function(e,t){return void 0===t&&(t=0),e.length-t<3&&a.default.throw(new Error("create Vector error:array length is wrong")),new this(e,t)},e.transformQuat=function(t,r,n){return n=n||new e,o.quatHelper.transformDirection(r._raw,r._offset,t._raw,t._offset,p._raw,p._offset),n.set(p),n},e.transformCoordinate=function(e,t,r){return r=t.transformPoint(e,r)},e.prototype.toArray=function(){var e=this._raw;return[e[this._offset],e[this._offset+1],e[this._offset+2]]},e.prototype.equal=function(e){return o.v3Helper.equal(this._raw,this._offset,e._raw,e._offset)},e.prototype.set=function(e){return this._isDirty=!0,o.v3Helper.copy(e._raw,e._offset,this._raw,this._offset),this},e.prototype.setValue=function(e,t,r){this._isDirty=!0;var n=this._raw;return n[this._offset]=e,n[this._offset+1]=t,n[this._offset+2]=r,this},e.prototype.setFromArray=function(e){this._isDirty=!0;var t=this._raw;return t[this._offset]=e[0],t[this._offset+1]=e[1],t[this._offset+2]=e[2],this},e.prototype.add=function(t,r){return r=r||new e,o.v3Helper.add(this._raw,this._offset,t._raw,t._offset,p._raw,p._offset),r.set(p),r},e.prototype.sub=function(t,r){return r=r||new e,o.v3Helper.sub(this._raw,this._offset,t._raw,t._offset,p._raw,p._offset),r.set(p),r},e.prototype.cross=function(t,r){return r=r||new e,o.v3Helper.cross(this._raw,this._offset,t._raw,t._offset,p._raw,p._offset),r.set(p),r},e.prototype.normalize=function(t){return t=t||new e,o.v3Helper.normalize(this._raw,this._offset,p._raw,p._offset),t.set(p),t},e.prototype.scale=function(t,r){return r=r||new e,o.v3Helper.scale(this._raw,this._offset,t,p._raw,p._offset),r.set(p),r},e.prototype.scaleXYZ=function(t,r,n,o){o=o||new e;var i=this._raw;return o.setValue(i[this._offset]*t,i[this._offset+1]*r,i[this._offset+2]*n),o},e.prototype.lerp=function(t,r,n){return n=n||new e,o.v3Helper.lerp(this._raw,this._offset,t._raw,t._offset,r,p._raw,p._offset),n.set(p),n},e.prototype.negate=function(){return this._isDirty=!0,this.x=-this.x,this.y=-this.y,this.z=-this.z,this},e.prototype.dot=function(e){return o.v3Helper.dot(this._raw,this._offset,e._raw,e._offset)},e.prototype.length=function(){return o.v3Helper.length(this._raw,this._offset)},e.prototype.clone=function(){var t=new e;return o.v3Helper.copy(this._raw,this._offset,t._raw,t._offset),t},e.prototype.isZero=function(){return o.v3Helper.isZero(this._raw,this._offset)},e.prototype.distanceTo=function(e){return o.v3Helper.distance(this._raw,this._offset,e._raw,e._offset)},e.prototype.angleTo=function(t,r){return r=r||new e,o.v3Helper.angleTo(this._raw,this._offset,t._raw,t._offset,p._raw,p._offset),r.set(p),r},e.prototype.setFromMatrixColumn=function(e,t){return this.fromArray(e._raw,0+4*t)},e.prototype.fromArray=function(e,t){void 0===t&&(t=0);var r=this._raw;return r[this._offset]=e[t],r[this._offset+1]=e[t+1],r[this._offset+2]=e[t+2],this},e.prototype.setFromMatrixScale=function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length(),o=this._raw;return o[this._offset]=t,o[this._offset+1]=r,o[this._offset+2]=n,this},e.prototype.setFromMatrixPosition=function(e){var t=e._raw,r=this._raw;return r[this._offset]=t[e._offset+12],r[this._offset+1]=t[e._offset+13],r[this._offset+2]=t[e._offset+14],this},e.prototype.applyMatrix4=function(t){return e.transformCoordinate(this,t,this)},e.prototype.applyMatrix4Raw=function(e){var t=this.x,r=this.y,n=this.z,o=e,i=1/(o[3]*t+o[7]*r+o[11]*n+o[15]);return this.x=(o[0]*t+o[4]*r+o[8]*n+o[12])*i,this.y=(o[1]*t+o[5]*r+o[9]*n+o[13])*i,this.z=(o[2]*t+o[6]*r+o[10]*n+o[14])*i,this},e.prototype.applyQuaternion=function(e){this._isDirty=!0;var t=this.x,r=this.y,n=this.z,o=e.x,i=e.y,a=e.z,s=e.w,c=s*t+i*n-a*r,u=s*r+a*t-o*n,l=s*n+o*r-i*t,f=-o*t-i*r-a*n;return this.x=c*s+f*-o+u*-a-l*-i,this.y=u*s+f*-i+l*-o-c*-a,this.z=l*s+f*-a+c*-i-u*-o,this},e.prototype.transformDirection=function(e){var t=this._raw,r=t[this._offset],n=t[this._offset+1],o=t[this._offset+2],i=e._raw;return t[this._offset]=i[0]*r+i[4]*n+i[8]*o,t[this._offset+1]=i[1]*r+i[5]*n+i[9]*o,t[this._offset+2]=i[2]*r+i[6]*n+i[10]*o,this.normalize()},e.prototype.transformDirectionRaw=function(e){var t=this._raw,r=t[this._offset],n=t[this._offset+1],o=t[this._offset+2],i=e;return t[this._offset]=i[0]*r+i[4]*n+i[8]*o,t[this._offset+1]=i[1]*r+i[5]*n+i[9]*o,t[this._offset+2]=i[2]*r+i[6]*n+i[10]*o,this.normalize()},e.fromPhysics=function(e){return this.createFromNumber(e.x,e.y,e.z)},e.prototype.fromPhysics=function(e){return this._isDirty=!0,this.x=e.x,this.y=e.y,this.z=e.z,this},e.clearPhysicsPool=function(){this.physicsPool&&this.physicsPool.clear()},e.prototype.toPhysics=function(){return e.Phys3D?(e.physicsPool||(e.physicsPool=new i.PhysicsVec3Pool(e.Phys3D)),e.physicsPool.from(this)):(a.default.error("vector3 convert error: no physics engine found."),null)},e.prototype.setArray=function(e,t){if(this._isDirty=!0,t)for(var r=0;r<4;r+=1)this._raw[this._offset+r]=e[t+r];else this._raw.set(e,this._offset);return this},e.prototype.print=function(){a.default.log(this.x.toPrecision(3)+"\t"+this.y.toPrecision(3)+"\t"+this.z.toPrecision(3))},e}();const u=c;var l="try to set value to read only vector",f=function(e){function t(t,r){return e.call(this,t,r)||this}return s(t,e),Object.defineProperty(t.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){a.default.error(l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){a.default.error(l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){a.default.error(l)},enumerable:!1,configurable:!0}),t.prototype.set=function(){return a.default.error(l),this},t.prototype.setValue=function(){return a.default.error(l),this},t}(c);c.ZERO=new f(new Float32Array([0,0,0])),c.ONE=new f(new Float32Array([1,1,1])),c.Up=new f(new Float32Array([0,1,0])),c.ForwardLH=new f(new Float32Array([0,0,1]));var p=new c},"./src/math/vector4.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n,o=r("./src/math/utils.ts"),i=r("./src/core/logger.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(){function e(e,t){this._raw=e||new Float32Array(4),this._offset=t||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){this._raw[this._offset+2]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"w",{get:function(){return this._raw[this._offset+3]},set:function(e){this._raw[this._offset+3]=e},enumerable:!1,configurable:!0}),e.createFromNumber=function(t,r,n,o){var i=new Float32Array(4);return i[0]=t,i[1]=r,i[2]=n,i[3]=o,new e(i)},e.createFromArray=function(t){return 4!==t.length&&i.default.throw(new Error("create Vector error:array length is wrong")),new e(new Float32Array(t))},e.createFromTypedArray=function(t,r){return void 0===r&&(r=0),t.length-r<4&&i.default.throw(new Error("create Vector error:array length is wrong")),new e(t)},e.prototype.toArray=function(){var e=this._raw;return[e[this._offset+0],e[this._offset+1],e[this._offset+2],e[this._offset+3]]},e.prototype.equal=function(e){return o.v4Helper.equal(this._raw,this._offset,e._raw,e._offset)},e.prototype.set=function(e){return o.v4Helper.copy(e._raw,e._offset,this._raw,this._offset),this},e.prototype.setValue=function(e,t,r,n){var o=this._raw;return o[this._offset+0]=e,o[this._offset+1]=t,o[this._offset+2]=r,o[this._offset+3]=n,this},e.prototype.add=function(t,r){return r=r||new e,o.v4Helper.add(this._raw,this._offset,t._raw,t._offset,f._raw,f._offset),r.set(f),r},e.prototype.sub=function(t,r){return r=r||new e,o.v4Helper.sub(this._raw,this._offset,t._raw,t._offset,f._raw,f._offset),r.set(f),r},e.prototype.scale=function(t,r){return r=r||new e,o.v4Helper.scale(this._raw,this._offset,t,f._raw,f._offset),r.set(f),r},e.prototype.lerp=function(t,r,n){return n=n||new e,o.v4Helper.lerp(this._raw,this._offset,t._raw,t._offset,r,f._raw,f._offset),n.set(f),n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},e.prototype.dot=function(e){return o.v4Helper.dot(this._raw,this._offset,e._raw,e._offset)},e.prototype.isZero=function(){return o.v4Helper.isZero(this._raw,this._offset)},e.prototype.clone=function(){var t=new e;return o.v4Helper.copy(this._raw,this._offset,t._raw,t._offset),t},e.prototype.setArray=function(e,t){if(t)for(var r=0;r<4;r+=1)this._raw[this._offset+r]=e[t+r];else this._raw.set(e,this._offset);return this},e}();const c=s;var u="try to set value to read only vector",l=function(e){function t(t,r){return e.call(this,t,r)||this}return a(t,e),Object.defineProperty(t.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){i.default.error(u)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){i.default.error(u)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){i.default.error(u)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this._raw[this._offset+3]},set:function(e){i.default.error(u)},enumerable:!1,configurable:!0}),t.prototype.set=function(){return i.default.error(u),this},t.prototype.setValue=function(){return i.default.error(u),this},t}(s);s.ZERO=new l(new Float32Array([0,0,0,0])),s.ONE=new l(new Float32Array([1,1,1,1]));var f=new s},"./src/physics/RaycastHit.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r("./src/components/physics/Shape.ts"),o=r("./src/ext.ts"),i=r("./src/math/vector3.ts"),a=r("./src/physics/utils.ts"),s=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},c=(0,a.genProxy)("_nativeComp");const u=function(){function e(e,t){this.scene=e,this._nativeComp=t||new((0,o.getKanata)(e).Phys3D.RaycastHit)}return Object.defineProperty(e.prototype,"nativeRaycastHit",{get:function(){return this._nativeComp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rigidbody",{get:function(){return this.collider?this.collider.attachedRigidbody:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"collider",{get:function(){return n.shapeMap.get(this._nativeComp.collider)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normal",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"point",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),s([c()],e.prototype,"distance",null),s([c(i.default)],e.prototype,"normal",null),s([c(i.default)],e.prototype,"point",null),e}()},"./src/physics/raycast.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{raycast:()=>n});function n(e,t,r){var n,o;o=r.hit?r.hit.nativeRaycastHit:new e.RaycastHit;var i=r.layerMask||4294967295,a=null!==(n=r.distance)&&void 0!==n?n:Number.MAX_VALUE;return t.Raycast(r.origin.toPhysics(),r.unitDir.toPhysics(),a,o,i)}},"./src/physics/utils.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{deserializeBytes:()=>i,genProxy:()=>o,getArrayBufferCollisionMatrix:()=>s,tranStringToMatrix:()=>a});var n=r("./src/core/logger.ts");function o(e){return function(t){return void 0===t&&(t={}),function(r,n,o){var i="__"+n;o.get=function(){return t.fromPhysics?this[i]&&this[i].fromPhysics?this[i].fromPhysics(this[e][n]):void 0===this[i]?(Object.defineProperty(this,i,{value:t.fromPhysics(this[e][n]),enumerable:!1,writable:!0}),this[i]):t.fromPhysics(this[e][n]):this[e][n]},o.set=function(t){this[e][n]=t.toPhysics?t.toPhysics():t},o.enumerable=!0}}}function i(e){for(var t=parseInt(e,16).toString(2).padStart(32,"0"),r=[],n=0;n<t.length;n+=8){var o=t.slice(n,n+8).split("").reverse().map((function(e){return parseInt(e,10)}));r=r.concat(o)}return r}function a(e){if(void 0===e&&(e=""),256!==e.length)return n.default.log("tranStringToMatrix: invalid string!"),[];for(var t=[],r=0;r<e.length;r+=8){var o=e.slice(r,r+8);t.push(i(o))}return t}function s(e){for(var t=a(e),r=new ArrayBuffer(128),n=new Uint32Array(r),o=0;o<t.length;o++)n[o]=parseInt(t[o].join(""),2);return n}},"./src/render-graph/RGNode.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ERGNodeType:()=>n,default:()=>i});var n,o=r("./src/core/logger.ts");!function(e){e.Camera="Camera",e.Clear="Clear",e.Cull="Cull",e.Render="Render",e.Script="Script"}(n||(n={}));const i=function(){function e(e,t,r,o){this._parent=e,this._id=t,this._name=r,this._options=o,this.type=n.Script,this._inputs={},this._outputs={},this._isActive=!1,this.onInit(this.options)}return Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._parent.scene},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._output},enumerable:!1,configurable:!0}),e.prototype.onInit=function(e){},e.prototype.getInput=function(e){return this._inputs[e]&&this._inputs[e].output},e.prototype._addInput=function(e,t){this._inputs[e]&&o.default.throw(new Error("Input '"+e+"' is already in node '"+this._name+"("+this._id+"))' !")),this.inputTypes[e]||o.default.throw(new Error("Input '"+e+"' is not defined in node '"+this._name+"("+this._id+"))' !")),this.inputTypes[e]!==t.outputType&&o.default.throw(new Error("Input '"+e+"(type: "+t.outputType+"))' dose not match requirement type '"+this.inputTypes[e]+"' of node '"+this._name+"("+this._id+")' !")),this._inputs[e]=t,t._outputs[this.id]=e},e.prototype._removeInput=function(e){if(e._output){var t=e._output[this.id];delete e._outputs[this.id],delete this._inputs[t]}},e.prototype._execute=function(e){this._isActive||(this.onActive(e,this._options),this._isActive=!0),this.onExecute(e,this._options)},e.prototype._disable=function(e){this._isActive&&(this.onDisable(e,this._options),this._isActive=!1)},e.prototype.reset=function(){this._inputs={},this._outputs={}},e.prototype.onActive=function(e,t){},e.prototype.onExecute=function(e,t){},e.prototype.onDisable=function(e,t){},e}()},"./src/render-graph/RenderGraph.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r("./src/render-graph/buildinRGNodes/index.ts"),o=r("./src/core/logger.ts");const i=function(){function e(e,t){var r=this;this._name=e,this._options=t,this._isActive=!1,this._isDirty=!1,this._unusedIds=[],this._digraph=[],this._sorted=[],this._handleCamerasChange=function(e){r.onCamerasChange(e.cameras,e.changedCameras)}}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.scene.render},enumerable:!1,configurable:!0}),e.prototype.createNode=function(e,t,r){var n,o=0;return this._unusedIds.length>0?(n=new t(this,o=this._unusedIds.pop(),e,r),this._digraph[o]={node:n,ins:0,dist:[]}):(n=new t(this,o=this._digraph.length,e,r),this._digraph.push({node:n,ins:0,dist:[]})),this._isDirty=!0,n},e.prototype.destroyNode=function(e){var t=this,r=e.id,n=this._digraph[r];n&&(n.ins=0,n.dist.forEach((function(e){return t.disconnect(n.node,t._digraph[e].node)})),this._digraph[r]=void 0,this._unusedIds.push(r),this._isDirty=!0)},e.prototype.connect=function(e,t,r){var n=this._digraph[e.id],i=this._digraph[t.id];n&&i||o.default.throw(new Error("From or Out is not in this graph!")),r&&t._addInput(r,e),i.ins+=1,n.dist.push(t.id),this._isDirty=!0},e.prototype.disconnect=function(e,t){var r=this._digraph[e.id],n=this._digraph[t.id];r&&n||o.default.throw(new Error("From or Out is not in this graph!"));var i=r.dist.indexOf(t.id);i<0||(t._removeInput(e),r.dist.splice(i,1),n.ins-=1,this._isDirty=!0)},e.prototype._active=function(e){this._isActive||(this._scene=e,e.render.camerasChangeEvent.add(this._handleCamerasChange),this.onActive(e.render,this._options),this._isActive=!0)},e.prototype._disable=function(){this._isActive&&(this._scene.render.camerasChangeEvent.remove(this._handleCamerasChange),this.onDisable(this._scene.render,this._options),this._clear(),this._isActive=!1)},e.prototype._execute=function(){this._isDirty&&this._compile();var e=this.scene.render;this.onExecuteBegin(e,this._options),this._sorted.forEach((function(t){return t._execute(e)})),this.onExecuteDone(e,this._options)},e.prototype._clear=function(e){var t=this;this._unusedIds.length=0,this._digraph=this._digraph.map((function(r){if(!r)return r;var n=r.node;if(e&&e(n))return n.reset(),r.dist.length=0,r.ins=0,r;t._unusedIds.push(n.id),n._disable(t._scene.render)})),this._isDirty=!0,this._sorted.length=0},e.prototype.onActive=function(e,t){},e.prototype.onCamerasChange=function(e,t){},e.prototype.onExecuteBegin=function(e,t){},e.prototype.onExecuteDone=function(e,t){},e.prototype.onDisable=function(e,t){},e.prototype._compile=function(e){var t=this,r=this._digraph.map((function(e){return e?e.ins:-1}));for(this._sorted=[];;){for(var n=!1,i=function(e){var o=a._digraph[e],i=r[e];return!o||i<0?"continue":0===i?(o.dist.forEach((function(e,n){t._digraph[e]||(o.dist.splice(n,1),delete o.node._outputs[e]),r[e]-=1})),r[e]=-1,a._sorted.push(o.node),n=!0,"break"):void 0},a=this,s=0;s<this._digraph.length;s+=1){if("break"===i(s))break}if(!n)break}for(s=0;s<this._digraph.length;s+=1)if(-1!==r[s]){var c=this._digraph[s].node;o.default.throw(new Error("RenderGraph "+this.name+" has Cycle! Node "+c.name+"("+c.id+"))"))}this._isDirty=!1,e&&e(this._sorted)},e.prototype.showDebugInfo=function(e){var t="Compiled: "+!this._isDirty+"\n";return this._sorted&&(t+=this._sorted.map((function(e){return e.name+"("+e.id+")"})).join(" -> ")),t+="\n",this._sorted.filter((function(e){return e instanceof n.RGSubGraphNode})).forEach((function(e){t+="\n"+e.name+"：\n "+e.showDebugInfo()})),e&&e(this._digraph,this._sorted),t},e}()},"./src/render-graph/buildinRGNodes/ar.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{RGARBackgroundNode:()=>s});var n,o=r("./src/ext.ts"),i=r("./src/render-graph/RGNode.ts"),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.ERGNodeType.Script,t.inputTypes={camera:"Camera"},t.outputType="MeshList",t}return a(t,e),t.prototype.onActive=function(){var e=this.scene.ar,t=new((0,o.getKanata)(this.scene).ScalableList)(1),r=this._mesh=null==e?void 0:e._useCameraMesh(this.getInput("camera"));r&&(t.begin(),t.add(r.id),t.end()),this._output=t},t.prototype.onExecute=function(e,t){var r=this.getInput("camera");r.bgStatesClear?this._mesh.material.clearRenderStates(r.bgStates):this._mesh.material.setRenderStates(r.bgStates)},t.prototype.onDisable=function(e,t){var r;null===(r=e.scene.ar)||void 0===r||r._removeCameraMesh(this.getInput("camera"))},t}(i.default)},"./src/render-graph/buildinRGNodes/core.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{RGCameraNode:()=>c,RGClearNode:()=>p,RGCullNode:()=>u,RGGenRenderTargetNode:()=>l,RGGenViewNode:()=>f,RGLightNode:()=>h,RGRenderNode:()=>d});var n,o=r("./src/ext.ts"),i=r("./src/render-graph/RGNode.ts"),a=r("./src/assets/RenderTexture.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.ERGNodeType.Camera,t.inputTypes={camera:"Camera"},t.outputType="Camera",t}return s(t,e),t.prototype.onInit=function(e){this._output=e.camera},t}(i.default),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.ERGNodeType.Cull,t.inputTypes={camera:"Camera"},t.outputType="MeshList",t}return s(t,e),t.prototype.onActive=function(){this._output=new((0,o.getKanata)(this.scene).ScalableList)(this.options.initSize||2048)},t.prototype.onExecute=function(e,t){this.getInput("camera").cull(this._output,t.lightMode)},t.prototype.onDisable=function(){this._output=void 0},t}(i.default),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.ERGNodeType.Script,t.inputTypes={},t.outputType="RenderTarget",t}return s(t,e),t.prototype.onActive=function(e,t){this._output=t.createRenderTarget()},t.prototype.onDisable=function(){this._output=void 0},t}(i.default),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.ERGNodeType.Script,t.inputTypes={},t.outputType="Camera",t}return s(t,e),t.prototype.onActive=function(e,t){this._output=t.viewObject},t.prototype.onDisable=function(){this._output=void 0},t}(i.default),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.ERGNodeType.Clear,t.inputTypes={camera:"Camera",renderTarget:"RenderTarget"},t.outputType="None",t}return s(t,e),t.prototype.onExecute=function(e,t){var r=this.getInput("renderTarget"),n=this.getInput("camera").view;if(r&&n){var i=(0,o.getKanata)(this.scene).renderEnv;i.setRenderPass(r.renderPass),i.clearView(n)}},t}(i.default),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.ERGNodeType.Render,t.outputType="RenderTarget",t}return s(t,e),t.prototype.onInit=function(e){this.inputTypes=Object.assign({camera:"Camera",renderTarget:"RenderTarget",meshList:"MeshList",lightList:"LightList"},e.inputTypes||this._inputTypes||{})},t.prototype.onActive=function(e,t){this._uniformBlocks=t.createUniformBlocks()},t.prototype.onExecute=function(e,t){var r;if(e.enableInstance(),t.uniformsMap){var n=function(e){var n=t.uniformsMap[e],o=n.inputKey,s=(n.name,n.index,i.getInput(o));if(!s)return"continue";s instanceof a.default&&(s=s.texture),null===(r=i._uniformBlocks)||void 0===r||r.forEach((function(t){return t.setUniform(e,s)}))},i=this;for(var s in t.uniformsMap)n(s)}for(var c=0;c<this._uniformBlocks.length;c+=1){var u=this._uniformBlocks[c];u&&(0,o.getKanata)(this.scene).renderEnv.setEnvUniform(c,u)}var l=this.getInput("renderTarget");this._output=l,l&&((0,o.getKanata)(this.scene).renderEnv.setRenderPass(l.renderPass),this.onRender(e,t))},t.prototype.onRender=function(e,t){var r,n=this.getInput("camera"),i=(0,o.getKanata)(this.scene).renderEnv,a=e.lights._getMainLight(n);(null==a?void 0:a.castShadow)&&(null===(r=this._uniformBlocks)||void 0===r||r.forEach((function(e){a._copyLightMatrices(e),e.hasKey("u_shadowBias")&&e.setUniform("u_shadowBias",[a.shadowBias])}))),i.changeVirtualMacros({WX_RECEIVE_SHADOW:!!(null==a?void 0:a.castShadow)}),n.draw(this.getInput("meshList"),t.lightMode)},t.prototype.onDisable=function(){this._output=void 0,this._uniformBlocks=void 0},t}(i.default),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.onRender=function(e,t){var r=this.getInput("camera"),n=e.lights._getMainLight(r);r.drawLight(n,this.getInput("meshList"),t.lightMode)},t}(d)},"./src/render-graph/buildinRGNodes/index.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{IBlitData:()=>u.IBlitData,IBloomData:()=>u.IBloomData,IBlurData:()=>u.IBlurData,IFastBlurData:()=>u.IFastBlurData,IToneData:()=>u.IToneData,IVignetteData:()=>u.IVignetteData,RGARBackgroundNode:()=>s.RGARBackgroundNode,RGBlitPostProcessNode:()=>u.RGBlitPostProcessNode,RGBloomPostProcessNode:()=>u.RGBloomPostProcessNode,RGBlurPostProcessNode:()=>u.RGBlurPostProcessNode,RGCameraNode:()=>n.RGCameraNode,RGClearNode:()=>n.RGClearNode,RGCullNode:()=>n.RGCullNode,RGFXAAPostProcessNode:()=>u.RGFXAAPostProcessNode,RGFastBlurPostProcessNode:()=>u.RGFastBlurPostProcessNode,RGGenRenderTargetNode:()=>n.RGGenRenderTargetNode,RGGenViewNode:()=>n.RGGenViewNode,RGLightNode:()=>n.RGLightNode,RGLightsNode:()=>i.RGLightsNode,RGPostProcessNode:()=>c.RGPostProcessNode,RGRenderNode:()=>n.RGRenderNode,RGSkyBoxNode:()=>a.RGSkyBoxNode,RGSubGraphNode:()=>o.RGSubGraphNode,RGTonePostProcessNode:()=>u.RGTonePostProcessNode,RGVignettePostProcessNode:()=>u.RGVignettePostProcessNode,_moduleKeeper:()=>u._moduleKeeper,getRGPostProcessNode:()=>c.getRGPostProcessNode,ppEffectMap:()=>c.ppEffectMap,registerRGPostProcessNode:()=>c.registerRGPostProcessNode});var n=r("./src/render-graph/buildinRGNodes/core.ts"),o=r("./src/render-graph/buildinRGNodes/subGraph.ts"),i=r("./src/render-graph/buildinRGNodes/lights.ts"),a=r("./src/render-graph/buildinRGNodes/skybox.ts"),s=r("./src/render-graph/buildinRGNodes/ar.ts"),c=r("./src/render-graph/buildinRGNodes/postProcess.ts"),u=r("./src/render-graph/buildinRGNodes/postprocessing/index.ts")},"./src/render-graph/buildinRGNodes/lights.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{RGLightsNode:()=>a});var n,o=r("./src/render-graph/RGNode.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.ERGNodeType.Cull,t.inputTypes={camera:"Camera"},t.outputType="None",t}return i(t,e),t.prototype.onExecute=function(e,t){var r=this.getInput("camera"),n=t.globalUniforms,o=e.lights._getMainLightInfo(r);n.setUniform("u_ambientLightColorIns",o.ambientColorIns),n.setUniform("u_mainLightDir",o.mainDir),n.setUniform("u_mainLightColorIns",o.mainColorIns),e.changeMacros({WX_USE_AMBIENT_LIGHT:o.hasAmbient,WX_USE_MAIN_DIR_LIGHT:o.hasMainDir});var i=e.lights._getAddLightsInfo(r);i.count?(n.setUniform("u_addLightsPos",i.pos),n.setUniform("u_addLightsDir",i.dir),n.setUniform("u_addLightsColorIns",i.colorIns),n.setUniform("u_addLightsInfo",i.info),e.changeMacros({WX_USE_ADD_LIGHTS:!0,WX_ADD_LIGHTS_COUNT:i.count})):e.changeMacros({WX_USE_ADD_LIGHTS:!1})},t}(o.default)},"./src/render-graph/buildinRGNodes/postProcess.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{RGPostProcessNode:()=>p,getRGPostProcessNode:()=>l,ppEffectMap:()=>c,registerRGPostProcessNode:()=>f});var n,o=r("./src/ext.ts"),i=r("./src/render-graph/RGNode.ts"),a=r("./src/core/logger.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c={fxaa:"post-process-fxaa",blit:"post-process-blit",bloom:"post-process-bloom",blur:"post-process-blur",fastblur:"post-process-fast-blur",tone:"post-process-tone",vignette:"post-process-vignette",blend:"post-process-blend"},u={};function l(e){return u[e]}function f(e,t,r){u[e]?a.default.warn("RGPostProcessNode "+e+" is already existed !"):u[e]={clz:t,schema:r}}var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.ERGNodeType.Script,t.outputType="RenderTarget",t}return s(t,e),t.prototype.onCreatedData=function(e,t,r,n){},t.prototype.onFillData=function(e,t,r,n){for(var o=this.getInput("sourceTex"),i=0;i<t.length;i++)t[i].setTexture("u_sourceTex",o.texture),t[i].setFloat("u_width",o.width),t[i].setFloat("u_height",o.height)},t.prototype.changeViewport=function(e,t){this._views[e]=this._getView((0,o.getKanata)(this.scene),t)},t.prototype.getEffectByName=function(e){return this.scene.assets.getAsset("effect",e)},t.prototype.onActive=function(e,t){var r=this,n=(0,o.getKanata)(this.scene),i=this.scene._requestTmpObj("post-process-static");i._LIST||(i._LIST=new n.ScalableList(1),i._VB=new n.VertexBuffer(new Float32Array([-1,1,0,1,1,1,1,1,-1,-1,0,0,1,-1,1,0]),new n.VertexLayout({attributes:[{name:"a_position",format:o.Kanata.EVertexFormat.FLOAT2,offset:0,usage:o.Kanata.EVertexLayoutUsage.POSITION},{name:"a_uv",format:o.Kanata.EVertexFormat.FLOAT2,offset:8,usage:o.Kanata.EVertexLayoutUsage.UV0}],stride:16})),i._NODE=new n.Entity3D,i._IB=new n.IndexBuffer(new Uint16Array([0,1,2,2,1,3])),i._CULL=new n.CullingComponent(i._NODE),i._CULL.setActive(!1),i._UB=new n.UniformBlock(new n.UniformDescriptor({uniforms:[{name:"u_hack_avoid_empty",type:o.Kanata.EUniformType.FLOAT}]})),i._CAM=new n.CameraComponent(i._NODE),i._VIEW=this._getView(n,{x:0,y:0,w:1,h:1}),i._CAM.view=i._VIEW),this._passes=this.onGetPasses(e,t),this._passes&&(this._meshes=[],this._materials=[],this._views=[],this._passes.forEach((function(e,a){var s,c,u,l=e.effect,f=e.viewport;if(l){var p=r.scene.createMaterial(l),d=new n.MeshRendererComponent(new n.Entity3D,{meshCount:1,uniformBlock:i._UB,renderType:o.Kanata.EMeshRenderType.Static3D,culling:i._CULL});d.setVertexBuffer(0,i._VB),d.setIndexBuffer(0,i._IB),d.setNumIndices(0,6),d.setMaterial(0,p.kanataMaterial),t.final&&a===r._passes.length-1&&p.setMacro("WX_PP_TO_SRGB",!0),null===(s=r._meshes)||void 0===s||s.push(d),null===(c=r._materials)||void 0===c||c.push(p),null===(u=r._views)||void 0===u||u.push(f?r._getView(n,f):i._VIEW)}})),this._output=this._passes[this._passes.length-1].renderTarget,this.onCreatedData(e,this._materials,this._passes,t))},t.prototype._getView=function(e,t){return new e.View({passAction:{colorAction:o.Kanata.ELoadAction.DONTCARE,depthAction:o.Kanata.ELoadAction.DONTCARE,stencilAction:o.Kanata.ELoadAction.DONTCARE},viewport:t,scissor:{x:0,y:0,w:1,h:1}})},t.prototype.onExecute=function(e,t){var r,n=this;if(this._materials){var i=this.scene._requestTmpObj("post-process-static"),a=(0,o.getKanata)(this.scene),s=this._passes,c=i._LIST;this.onFillData(e,this._materials,this._passes,t),c.usedSize=1,null===(r=this._meshes)||void 0===r||r.forEach((function(e,t){var r=s[t];r?(c.dataView[0]=e.id,a.renderEnv.setRenderPass(r.renderTarget.renderPass),i._CAM.view=n._views[t],i._CAM.draw(c,r.lightMode)):c.dataView[0]=0}))}},t.prototype.onDisable=function(){this._passes=void 0,this._meshes=void 0,this._materials=void 0},t}(i.default)},"./src/render-graph/buildinRGNodes/postprocessing/blit.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{RGBlitPostProcessNode:()=>a});var n,o=r("./src/render-graph/buildinRGNodes/postProcess.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputTypes={sourceTex:"RenderTarget"},t}return i(t,e),t.prototype.onGetPasses=function(e,t){return[{effect:this.getEffectByName(o.ppEffectMap.blit),renderTarget:t.data.dstTex,lightMode:"PostProcess"}]},t}(o.RGPostProcessNode);(0,o.registerRGPostProcessNode)("blit",a,{})},"./src/render-graph/buildinRGNodes/postprocessing/bloom.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{RGBloomPostProcessNode:()=>a});var n,o=r("./src/render-graph/buildinRGNodes/postProcess.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputTypes={sourceTex:"RenderTarget"},t}return i(t,e),t.prototype.onGetPasses=function(e,r){var n=this.getEffectByName(o.ppEffectMap.bloom),i=this.getEffectByName(o.ppEffectMap.fastblur),a=(this.getEffectByName(o.ppEffectMap.blit),this.getEffectByName(o.ppEffectMap.blend)),s=[],c=this.scene._requestTmpObj("pp-rts");if(!c.bloom){c.bloom=[];for(var u=0;u<3;u++)c.bloom.push(this.scene.createRenderTexture({width:2===u?e.scene.width:e.scene.width/t.sampleRate,height:2===u?e.scene.height:e.scene.height/t.sampleRate,isHDR:r.hdr}))}s.push({effect:n,renderTarget:c.bloom[0],lightMode:"Prefilter"});for(u=0;u<t.iterations;u++)s.push({effect:i,renderTarget:c.bloom[1],lightMode:"Horizontal"}),s.push({effect:i,renderTarget:c.bloom[0],lightMode:"Vertical"});return s.push({effect:a,renderTarget:c.bloom[2],lightMode:"Default"}),s},t.prototype.onFillData=function(t,r,n,o){e.prototype.onFillData.call(this,t,r,n,o);var i=this.getInput("sourceTex");if(i){var a=this.scene._requestTmpObj("pp-rts");r[0].setTexture("u_sourceTex",i.texture);for(var s=1;s<r.length-1;s++)s%2==0?r[s].setTexture("u_sourceTex",a.bloom[1].texture):r[s].setTexture("u_sourceTex",a.bloom[0].texture);r[r.length-1].setTexture("u_bottomTex",i.texture),r[r.length-1].setTexture("u_upperTex",a.bloom[1].texture);for(s=0;s<r.length-1;s++)r[s].setFloat("u_radius",o.data.radius),r[s].setFloat("u_threshold",o.data.threshold),r[s].setFloat("u_softThreshold",o.data.softThreshold),r[s].setFloat("u_intensity",o.data.intensity)}},t.sampleRate=4,t.iterations=4,t}(o.RGPostProcessNode);(0,o.registerRGPostProcessNode)("bloom",a,{threshold:{type:"number",defaultValue:.5},softThreshold:{type:"number",defaultValue:0},radius:{type:"number",defaultValue:20},intensity:{type:"number",defaultValue:2}})},"./src/render-graph/buildinRGNodes/postprocessing/blur.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/render-graph/buildinRGNodes/postProcess.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputTypes={sourceTex:"RenderTarget"},t}return i(t,e),t.prototype.onGetPasses=function(e,r){var n=this.getEffectByName(o.ppEffectMap.blur),i=this.getEffectByName(o.ppEffectMap.blit),a=[],s=this.scene._requestTmpObj("pp-rts");if(!s.blur){s.blur=[];for(var c=0;c<3;c++)s.blur.push(this.scene.createRenderTexture({width:2===c?e.scene.width:e.scene.width/t.sampleRate,height:2===c?e.scene.height:e.scene.height/t.sampleRate,isHDR:r.hdr}))}return a.push({effect:i,renderTarget:s.blur[2],lightMode:"PostProcess"}),a.push({effect:n,renderTarget:s.blur[0],lightMode:"Horizontal"}),a.push({effect:n,renderTarget:s.blur[1],lightMode:"Vertical"}),a.push({effect:i,renderTarget:s.blur[2],lightMode:"PostProcess"}),a},t.prototype.onFillData=function(r,n,o,i){var a;e.prototype.onFillData.call(this,r,n,o,i);var s=this.getInput("sourceTex");if(s){for(var c=this.scene._requestTmpObj("pp-rts"),u=1;u<n.length-1;u++)n[u].setFloat("u_radius",i.data.radius),n[u].setMacro("WX_SAMPLE_COUNT",2*Math.ceil(i.data.radius/t.sampleRate)+1);n[3].setMacro("WX_USE_UNIFORM_ALPHA",!0),n[3].setRenderState("blendOn",!0),n[3].setFloat("u_alpha",Math.min(i.data.radius/t.sampleRate*.5,1)),n[0].setTexture("u_sourceTex",s.texture),n[1].setTexture("u_sourceTex",s.texture),n[2].setTexture("u_sourceTex",c.blur[0].texture),n[3].setTexture("u_sourceTex",c.blur[1].texture),0===(null===(a=i.data)||void 0===a?void 0:a.radius)&&(n[1].setMacro("WX_SAMPLE_COUNT",1),n[2].setMacro("WX_SAMPLE_COUNT",1))}},t.sampleRate=4,t}(o.RGPostProcessNode);const s=a;(0,o.registerRGPostProcessNode)("blur",a,{radius:{type:"number",defaultValue:5}})},"./src/render-graph/buildinRGNodes/postprocessing/fastblur.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n,o=r("./src/render-graph/buildinRGNodes/postProcess.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputTypes={sourceTex:"RenderTarget"},t}return i(t,e),t.prototype.onGetPasses=function(e,r){var n=this.getEffectByName(o.ppEffectMap.fastblur),i=[],a=this.scene._requestTmpObj("pp-rts");if(!a.fastblur){a.fastblur=[];for(var s=0;s<3;s++)a.fastblur.push(this.scene.createRenderTexture({width:2===s?e.scene.width:e.scene.width/t.sampleRate,height:2===s?e.scene.height:e.scene.height/t.sampleRate,isHDR:r.hdr}))}for(s=0;s<t.iterations-1;s++)i.push({effect:n,renderTarget:a.fastblur[0],lightMode:"Horizontal"}),i.push({effect:n,renderTarget:a.fastblur[1],lightMode:"Vertical"});return i.push({effect:n,renderTarget:a.fastblur[0],lightMode:"Horizontal"}),i.push({effect:n,renderTarget:a.fastblur[2],lightMode:"Vertical"}),i},t.prototype.onFillData=function(r,n,o,i){var a;e.prototype.onFillData.call(this,r,n,o,i);var s=this.getInput("sourceTex");if(s){for(var c=this.scene._requestTmpObj("pp-rts"),u=0;u<n.length;u++)u%2==0?n[u].setTexture("u_sourceTex",c.fastblur[1].texture):n[u].setTexture("u_sourceTex",c.fastblur[0].texture),n[u].setFloat("u_radius",i.data.radius*(1+.1*(Math.floor(.5*u)-.5*t.iterations)));n[0].setTexture("u_sourceTex",s.texture),0===(null===(a=i.data)||void 0===a?void 0:a.radius)&&n[n.length-1].setTexture("u_sourceTex",s.texture)}},t.sampleRate=2,t.iterations=6,t}(o.RGPostProcessNode);const s=a;(0,o.registerRGPostProcessNode)("fastblur",a,{radius:{type:"number",defaultValue:5}})},"./src/render-graph/buildinRGNodes/postprocessing/fxaa.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{RGFXAAPostProcessNode:()=>a});var n,o=r("./src/render-graph/buildinRGNodes/postProcess.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputTypes={sourceTex:"RenderTarget"},t}return i(t,e),t.prototype.onGetPasses=function(e,t){var r=this.scene._requestTmpObj("pp-rts");return r.fxaa||(r.fxaa=this.scene.createRenderTexture({width:e.scene.width,height:e.scene.height,isHDR:t.hdr})),[{effect:this.getEffectByName(o.ppEffectMap.fxaa),renderTarget:r.fxaa,lightMode:"PostProcess"}]},t}(o.RGPostProcessNode);(0,o.registerRGPostProcessNode)("fxaa",a,{})},"./src/render-graph/buildinRGNodes/postprocessing/index.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{IBlitData:()=>n.IBlitData,IBloomData:()=>a.IBloomData,IBlurData:()=>o.IBlurData,IFastBlurData:()=>i.IFastBlurData,IToneData:()=>c.IToneData,IVignetteData:()=>u.IVignetteData,RGBlitPostProcessNode:()=>n.RGBlitPostProcessNode,RGBloomPostProcessNode:()=>a.RGBloomPostProcessNode,RGBlurPostProcessNode:()=>o.default,RGFXAAPostProcessNode:()=>s.RGFXAAPostProcessNode,RGFastBlurPostProcessNode:()=>i.default,RGTonePostProcessNode:()=>c.RGTonePostProcessNode,RGVignettePostProcessNode:()=>u.RGVignettePostProcessNode,_moduleKeeper:()=>l});var n=r("./src/render-graph/buildinRGNodes/postprocessing/blit.ts"),o=r("./src/render-graph/buildinRGNodes/postprocessing/blur.ts"),i=r("./src/render-graph/buildinRGNodes/postprocessing/fastblur.ts"),a=r("./src/render-graph/buildinRGNodes/postprocessing/bloom.ts"),s=r("./src/render-graph/buildinRGNodes/postprocessing/fxaa.ts"),c=r("./src/render-graph/buildinRGNodes/postprocessing/tone.ts"),u=r("./src/render-graph/buildinRGNodes/postprocessing/vignette.ts");function l(){}},"./src/render-graph/buildinRGNodes/postprocessing/tone.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{RGTonePostProcessNode:()=>a});var n,o=r("./src/render-graph/buildinRGNodes/postProcess.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputTypes={sourceTex:"RenderTarget"},t}return i(t,e),t.prototype.onGetPasses=function(e,t){var r=this.scene._requestTmpObj("pp-rts");return r.tone||(r.tone=this.scene.createRenderTexture({width:e.scene.width,height:e.scene.height,isHDR:t.hdr})),[{effect:this.getEffectByName(o.ppEffectMap.tone),renderTarget:r.tone,lightMode:"PostProcess"}]},t}(o.RGPostProcessNode);(0,o.registerRGPostProcessNode)("tone",a,{exposure:{type:"number",defaultValue:1}})},"./src/render-graph/buildinRGNodes/postprocessing/vignette.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{RGVignettePostProcessNode:()=>a});var n,o=r("./src/render-graph/buildinRGNodes/postProcess.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputTypes={sourceTex:"RenderTarget"},t}return i(t,e),t.prototype.onGetPasses=function(e,t){var r=this.scene._requestTmpObj("pp-rts");return r.vignette||(r.vignette=this.scene.createRenderTexture({width:e.scene.width,height:e.scene.height,isHDR:t.hdr})),[{effect:this.getEffectByName(o.ppEffectMap.vignette),renderTarget:r.vignette,lightMode:"PostProcess"}]},t.prototype.onFillData=function(t,r,n,o){e.prototype.onFillData.call(this,t,r,n,o);var i=o.data,a=r[0].uniforms;a.setUniform("u_center",i.center),a.setUniform("u_color",i.color),a.setUniform("u_intensity",[i.intensity]),a.setUniform("u_smoothness",[i.smoothness]),a.setUniform("u_roundness",[i.roundness]),a.setUniform("u_rounded",[i.rounded?1:0])},t}(o.RGPostProcessNode);(0,o.registerRGPostProcessNode)("vignette",a,{color:{type:"number-array",defaultValue:[0,0,0,1]},center:{type:"number",defaultValue:[.5,.5]},intensity:{type:"number",defaultValue:1},smoothness:{type:"number",defaultValue:1},roundness:{type:"number",defaultValue:1},rounded:{type:"number",defaultValue:0}})},"./src/render-graph/buildinRGNodes/skybox.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{RGSkyBoxNode:()=>u});var n,o=r("./src/ext.ts"),i=r("./src/render-graph/RGNode.ts"),a=r("./src/math/vector4.ts"),s=r("./src/builtinAssets/geometries/sphere.ts"),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._defaultMat=null,t._skyboxEffect=null,t._2dst=(new a.default).setValue(1,1,0,0),t.type=i.ERGNodeType.Script,t.inputTypes={camera:"Camera"},t.outputType="MeshList",t}return c(t,e),t.prototype.onActive=function(){var e=(0,o.getKanata)(this.scene);if(this._vlCube||(this._vlCube=new e.VertexLayout({attributes:[{name:"a_position",format:o.Kanata.EVertexFormat.FLOAT3,usage:o.Kanata.EVertexLayoutUsage.POSITION,offset:0}],stride:12})),this._vbCube||(this._vbCube=new e.VertexBuffer(new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1,-1,-1,1,1,-1,1,-1,1,1,1,1,1]),this._vlCube)),this._ibCube||(this._ibCube=new e.IndexBuffer(new Uint16Array([4,6,7,7,4,5,5,7,3,3,5,1,1,5,4,4,1,0,0,2,4,4,6,2,2,3,0,0,1,3,3,7,2,2,6,7]))),this._vlSphere||(this._vlSphere=new e.VertexLayout({attributes:[{name:"a_position",format:2,offset:0,usage:1},{name:"a_normal",format:2,offset:12,usage:2},{name:"a_texCoord",format:1,offset:24,usage:4},{name:"a_lightMapCoord",format:1,offset:32,usage:5},{name:"a_tangent",format:3,offset:40,usage:3}],stride:56})),!this._vbSphere||!this._ibSphere){var t=[],r=[];(0,s.buildSphere)(t,r,1,64,32);var n=new Float32Array(t),i=new Uint16Array(r);this._vbSphere=new e.VertexBuffer(n,this._vlSphere),this._ibSphere=new e.IndexBuffer(i),this._numberIndicesSphere=r.length}if(!this._mr){var a=this._ub=new e.UniformBlock(new e.UniformDescriptor({uniforms:[{name:"u_hack_avoid_empty",type:o.Kanata.EUniformType.FLOAT}]})),c=new e.CullingComponent(new e.Entity3D);c.setActive(!1);var u=this._mr=new e.MeshRendererComponent(new e.Entity3D,{meshCount:1,uniformBlock:a,renderType:o.Kanata.EMeshRenderType.Static3D,culling:c});u.setVertexBuffer(0,this._vbCube),u.setIndexBuffer(0,this._ibCube),u.setNumIndices(0,36)}if(!this._list){var l=this._list=new e.ScalableList(1);l.begin(),l.add(this._mr.id),l.end()}this._output=this._list},t.prototype.onExecute=function(e){var t;if(null===(t=e.env)||void 0===t?void 0:t.skyMap){var r=e.env,n=r.skyMap,i=r.rotation,a=r.useHalfSkyMap,s=r.isSky2D,c=r.isSkyRT,u=n.type===o.Kanata.ETextureType.Cube;if(this._skyboxEffect||(this._skyboxEffect=this.scene.assets.getAsset("effect","skybox")),this._defaultMat||(this._defaultMat=this.scene.createMaterial(this._skyboxEffect,{u_texture:this.scene.assets.getAsset("cube-texture","white")}),this._mr.setMaterial(0,this._defaultMat.kanataMaterial)),s){var l=this.scene.assets.getAsset("geometry","ar-camera-plane");this._mr.setVertexBuffer(0,l.vertexBuffer),this._mr.setIndexBuffer(0,l.indexBuffer),this._mr.setNumIndices(0,l.subMeshes[0].length);var f=this.scene.width/this.scene.height,p=n.width/n.height,d=p/f;p>f?this._2dst.setValue(d,-1,(d-1)/2,0):this._2dst.setValue(1,-1/d,0,(1/d-1)/2),this._defaultMat.setVector("u_st",this._2dst)}else u?(this._mr.setVertexBuffer(0,this._vbCube),this._mr.setIndexBuffer(0,this._ibCube),this._mr.setNumIndices(0,36)):(this._mr.setVertexBuffer(0,this._vbSphere),this._mr.setIndexBuffer(0,this._ibSphere),this._mr.setNumIndices(0,this._numberIndicesSphere));this._defaultMat.setTexture("u_texture",n),this._defaultMat.setFloat("u_rotation",i),this._defaultMat.setMacros({WX_USE_SKY_2D:!u&&s,WX_USE_SKY_RT:c,WX_USE_SKY_CUBE:u,WX_SAMPLER_SKY_HALF:a});var h=this.getInput("camera");h.bgStatesClear?this._defaultMat.clearRenderStates(h.bgStates):this._defaultMat.setRenderStates(h.bgStates)}},t}(i.default)},"./src/render-graph/buildinRGNodes/subGraph.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{RGSubGraphNode:()=>a});var n,o=r("./src/render-graph/RGNode.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.ERGNodeType.Camera,t._onCompileDone=function(e){var r=e.length;if(!r)return t._firstNode=void 0,void(t._lastNode=void 0);t._firstNode=e[0],t._lastNode=e[r-1],t.inputTypes=t._firstNode.inputTypes,t.outputType=t._firstNode.outputType},t}return i(t,e),t.prototype.onActive=function(e,t){this._subRG?this._subRG._active(this.scene):(this._subRG=new t.RGClass("subRG-"+this.name,t.options||{}),this._subRG._active(this.scene),this._subRG._compile(this._onCompileDone))},t.prototype.onExecute=function(e,t){this._firstNode&&this._lastNode&&(this._firstNode._inputs=this._inputs,this._output=this._lastNode._output),this._subRG._execute()},t.prototype.onDisable=function(e,t){this._subRG._disable()},t.prototype.showDebugInfo=function(){return this._subRG.showDebugInfo()},t}(o.default)},"./src/render-graph/internal/ForwardBaseRG.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n,o=r("./src/ext.ts"),i=r("./src/render-graph/RenderGraph.ts"),a=r("./src/render-graph/buildinRGNodes/index.ts"),s=r("./src/render-graph/internal/ForwardBaseSubGraph.ts"),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._shadowFallbackRegistered=!1,t._subGraphs={},t._mainLights={},t}return c(t,e),t.prototype.onActive=function(e){this._rebuildRG(e.cameras,e.changedCameras)},t.prototype.onCamerasChange=function(e,t){this._rebuildRG(e,t)},t.prototype._rebuildRG=function(e,t){var r,n=this,o={};this._clear((function(e){var r=n._subGraphs[e.id];return r&&t.indexOf(r)<0?(o[r.id]=e,!0):(delete n._subGraphs[e.id],!1)})),e.forEach((function(e){var t=o[e.id];t||(t=n.createNode("subGraph-"+e.el._elId,a.RGSubGraphNode,{RGClass:s.default,options:{camera:e}}),n._subGraphs[t.id]=e),r&&n.connect(r,t),r=t}))},t.prototype.onExecuteBegin=function(e){for(var t in this._subGraphs){var r=this._subGraphs[t],n=e.lights._getMainLight(r),i=this._mainLights[r.el._elId];n===i&&(null==n?void 0:n.castShadow)===(null==i?void 0:i.castShadow)||(e._modifyCameraImportantProps(r),this._mainLights[r.el._elId]=n)}if(!this._shadowFallbackRegistered){var a=this.scene.assets.getAsset("effect","shadow-caster");a&&((0,o.getKanata)(this.scene).renderEnv.registerFallbackEffect("ShadowCaster",a.kanataEffect),this._shadowFallbackRegistered=!0)}},t.prototype.onExecuteDone=function(e){},t.prototype.onDisable=function(e){this._shadowFallbackRegistered&&(0,o.getKanata)(this.scene).renderEnv.registerFallbackEffect("ShadowCaster",void 0)},t}(i.default)},"./src/render-graph/internal/ForwardBaseSubGraph.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n,o=r("./src/ext.ts"),i=r("./src/render-graph/RenderGraph.ts"),a=r("./src/math/vector3.ts"),s=r("./src/render-graph/buildinRGNodes/index.ts"),c=r("./src/render-graph/buildinRGNodes/skybox.ts"),u=r("./src/render-graph/buildinRGNodes/postProcess.ts"),l=r("./src/render-graph/buildinRGNodes/postprocessing/index.ts"),f=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});(0,l._moduleKeeper)();new a.default;var p=new Float32Array(1),d=new Float32Array(3);new Float32Array(4);const h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.onActive=function(e,t){var r=this.scene.assets,n=(0,o.getKanata)(this.scene);this._globalUniforms=this._globalUniforms||{fbUniforms:new n.UniformBlock(r.getAsset("uniform-desc","global-forward-base")),uiUniforms:new n.UniformBlock(r.getAsset("uniform-desc","global-forward-base")),scUniforms:new n.UniformBlock(r.getAsset("uniform-desc","global-shadow-caster"))},this._rebuildRG(t)},t.prototype._rebuildRG=function(e){this._clear();var t=e.camera;this._buildNodesForCamera(t,e)},t.prototype._buildNodesForCamera=function(e,t){var r,n,o=this;n=e.postProcess.length?this.createNode("render-target",s.RGGenRenderTargetNode,{createRenderTarget:function(){return o._createPostProcessRT(e)}}):this.createNode("render-target",s.RGGenRenderTargetNode,{createRenderTarget:function(){return o._createRT(e)}});var i=this.createNode("camera-"+e.el.id,s.RGCameraNode,{camera:e}),a=this.createNode("fb-cull",s.RGCullNode,{lightMode:"ForwardBase"}),l=this.createNode("fb-lights",s.RGLightsNode,{globalUniforms:this._globalUniforms.fbUniforms}),f=this.createNode("fb-clear",s.RGClearNode,{}),p=this.createNode("fb-render",s.RGRenderNode,{lightMode:"ForwardBase",createUniformBlocks:function(){return[o._globalUniforms.fbUniforms]},inputTypes:{shadowMap:"RenderTarget"},uniformsMap:{u_shadowMap:{inputKey:"shadowMap",name:"color"}}});if("skybox"===e.background){var d=this.createNode("skybox",c.RGSkyBoxNode,{}),h=this.createNode("skybox-render",s.RGRenderNode,{lightMode:"Skybox",createUniformBlocks:function(){return[o._globalUniforms.fbUniforms]}});this.connect(i,d,"camera"),this.connect(i,h,"camera"),this.connect(d,h,"meshList"),this.connect(n,h,"renderTarget"),this.connect(h,p)}else if("ar"===e.background){var _=this.createNode("ar",s.RGARBackgroundNode,{}),m=this.createNode("ar-render",s.RGRenderNode,{lightMode:"Skybox",createUniformBlocks:function(){return[o._globalUniforms.fbUniforms]}});this.connect(i,_,"camera"),this.connect(i,m,"camera"),this.connect(_,m,"meshList"),this.connect(n,m,"renderTarget"),this.connect(m,p)}var v,y=this.context.lights._getMainLight(e);if(null==y?void 0:y.castShadow){var g=this.createNode("sc-render-target",s.RGGenRenderTargetNode,{createRenderTarget:function(){return o._createRT(e,"ShadowCaster")}}),b=this.createNode("shadow-caster",s.RGLightNode,{lightMode:"ShadowCaster",createUniformBlocks:function(){return[o._globalUniforms.scUniforms]}});this.connect(i,b,"camera"),this.connect(g,b,"renderTarget"),this.connect(a,b,"meshList"),this.connect(b,p,"shadowMap")}if(this.connect(i,a,"camera"),this.connect(i,p,"camera"),this.connect(n,f,"renderTarget"),this.connect(i,f,"camera"),this.connect(n,p,"renderTarget"),this.connect(f,p),this.connect(i,l,"camera"),this.connect(l,p),this.connect(a,p,"meshList"),null===(r=e.postProcess)||void 0===r?void 0:r.length){var w=n,x=e.hdr;e.postProcess.forEach((function(e,t){var r,n=null===(r=(0,u.getRGPostProcessNode)(e.type))||void 0===r?void 0:r.clz;if(n){var i=o.createNode("post-process-"+e.type,n,{hdr:x,data:e.data});o.connect(w,i,"sourceTex"),0===t&&o.connect(p,i),w=i}})),v=this.createNode("final-blit",s.RGBlitPostProcessNode,{final:!0,data:{dstTex:this._createRT(e)}}),this.connect(w,v,"sourceTex")}},t.prototype._createRT=function(e,t){void 0===t&&(t="ForwardBase");var r=null;return r=e.renderTarget?e.renderTarget:{renderPass:(0,o.getKanata)(this.scene).RenderPass.SCREEN_RENDER_PASS,width:0,height:0},"ShadowCaster"===t&&(r=e.el.scene.createRenderTexture({width:2048,height:2048})),r},t.prototype.onExecuteBegin=function(e,t){var r,n,o=e.env,i=this._globalUniforms.fbUniforms,a={WX_PP_ACTIVE:!!(null===(r=this._options.camera.postProcess)||void 0===r?void 0:r.length)};p[0]=this.scene.timestamp/1e3,i.setUniform("u_gameTime",p),o&&(a.WX_USE_IBL_DIFFUSE=o.hasDiffuse,o.hasDiffuse&&(i.setUniform("u_diffuseSH",o.diffuseSH),p[0]=o.diffuseExp,i.setUniform("u_diffuseExp",p)),a.WX_USE_IBL_SPECULAR=o.hasSpecular,o.hasSpecular&&(a.WX_USE_SPECULAR_RGBD=o.specularRGBD,a.WX_USE_SPECULAR_MIPMAPS=o.specularMipmaps,i.setUniform("u_specularEnvMapMipCount",o.specularMipmapCount),i.setUniform("u_specularEnvMap",o.specularMap),p[0]=o.specularExp,i.setUniform("u_specularExp",p)),p[0]=o.rotation,i.setUniform("u_envRotation",p)),d[0]=e.shadowColor[0],d[1]=e.shadowColor[1],d[2]=e.shadowColor[2],i.setUniform("u_shadowColor",d),null===(n=this._globalUniforms.uiUniforms)||void 0===n||n.copy(i),e.changeMacros(a)},t.prototype._createPostProcessRT=function(e){var t=e.renderTarget||this.scene,r=t.width,n=t.height;return this.scene.createRenderTexture({width:r,height:n,isHDR:e.hdr})},t}(i.default)},"./src/systems/ARSystem.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ARSystemSchema:()=>d,default:()=>y});var n,o=r("./src/ext.ts"),i=r("./src/components/index.ts"),a=r("./src/core/Component.ts"),s=r("./src/elements/index.ts"),c=r("./src/math/matrix4.ts"),u=r("./src/math/vector3.ts"),l=r("./src/core/logger.ts"),f=r("./src/core/reporter.ts"),p=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),d={modes:{type:"array",defaultValue:["Plane"]},camera:{type:"string",defaultValue:"Back"}},h=new c.default,_=new u.default,m=new u.default,v=new u.default;const y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=d,t.priority=110,t._supported=!0,t._ready=!1,t._supportModes=[],t._camerasMeshes={},t._trackers={},t._arVersion=1,t._rawARData={timestamp:0,width:0,height:0,yBuffer:void 0,uvBuffer:void 0,intrinsics:void 0,viewMatrix:void 0},t._forceCameraViewMat={},t._trackerIds=[],t._poss={},t._posCount=0,t}return p(t,e),Object.defineProperty(t.prototype,"supported",{get:function(){return this._supported},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arModes",{get:function(){return this._supportModes.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arVersion",{get:function(){return this._arVersion},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){return this._ready},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"posCount",{get:function(){return this._posCount},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(e,t){var r=this;if(this._supported){var n=t.modes;(null==n?void 0:n.length)||l.default.throw(new Error("ar-system must be given `modes`!"),f.EEReportScope.AR),n.length>1&&l.default.warn("ar-system only supports one mode now, use "+n[0],f.EEReportScope.AR),this._supportModes=n.slice(0,1);for(var i=0,a=this._supportModes;i<a.length;i++){var s=a[i];"Marker"!==s&&"OSD"!==s&&"Plane"!==s&&"Face"!==s&&"Body"!==s&&"Hand"!==s&&l.default.throw(new Error("ar-system does not support mode "+s+"!"),f.EEReportScope.AR)}var c=this._supportModes[0],u=o._wx.isVKSupport("v2")?2:1;this._tryStart(c,u,t.camera,(function(e){if(e){r._supported=!1;var n=new Error("AR system start error("+c+","+u+","+t.camera+"): "+e);l.default.error(n,f.EEReportScope.AR),r.el.event.trigger("ar-error",n)}}))}else l.default.error(new Error("ar-system is only supported in wx-mini-program!"),f.EEReportScope.AR)},t.prototype._tryStart=function(e,t,r,n){var i=this;this._session=o._wx.createVKSession({cameraPosition:"Front"===r?1:0,track:"OSD"===e?{OSD:!0}:"Marker"===e?{marker:!0}:"Face"===e?{face:{mode:1}}:"Body"===e?{body:{mode:1}}:"Hand"===e?{hand:{mode:1}}:{plane:{mode:1===t?1:3}},version:"v"+t}),this._session.start((function(e){i._arVersion=t,e&&n(e)}))},t.prototype.onTick=function(e,t){var r,n;if(this._session)if(this._cameraTexes||0===this._session.state||2===this._session.state){if(this._cameraTexes){if(!this._updateCameraMeshes())return;if("Plane"===this._supportModes[0]){var a=this._trackers[1];if(!a)return;var s=null===(n=null===(r=this._session.hitTest(.5,.5))||void 0===r?void 0:r[0])||void 0===n?void 0:n.transform;s&&(this._hitTestRes=s.slice(),a._switch(!0),h.setArray(s),this._setMatrix(a.el.getComponent(i.Transform),h))}}}else{var c=this.scene,u=this._session.getVKFrame(c.width,c.height);if(!u)return;var l=u.getCameraRawTextureData(),f=u.camera;this._cameraTexes={y:c.createTexture({width:l.width,height:l.height,source:[l.yAddress],pixelFormat:o.Kanata.ETextureFormat.R8}),uv:c.createTexture({width:l.width/2,height:l.height/2,source:[l.uvAddress],pixelFormat:o.Kanata.ETextureFormat.RGBA4})},this._syncTrackers(),this._rawARData.timestamp=u.timestamp,this._rawARData.width=l.width,this._rawARData.height=l.height,this._rawARData.yBuffer=l.yAddress,this._rawARData.uvBuffer=l.uvAddress,this._rawARData.viewMatrix=f.viewMatrix,this._rawARData.intrinsics=f.intrinsics,this._ready=!0,this.el.event.trigger("ar-ready")}},t.prototype.onRemove=function(e,t){this._session.stop()},t.prototype.onRelease=function(e){this._session.destroy()},t.prototype.placeHere=function(e,t){if(void 0===t&&(t=!0),!this._ready)return!1;if("Plane"!==this._supportModes[0])return l.default.warn("method placeHera only supports mode 'Plane', ignore..."),!1;var r="string"==typeof e?this.scene._getNodeById(e):e.getComponent(i.Transform);return r?!!this._hitTestRes&&(h.setArray(this._hitTestRes),this._setMatrix(r,h),t&&(r.visible=!0),!0):(l.default.warn("Node "+e+" is not existed, ignore..."),!1)},t.prototype.resetPlane=function(){this._session.hitTest(.5,.5,!0)},t.prototype.getARRawData=function(){return this._rawARData},t.prototype.forceSetViewMatrix=function(e,t){t?(h.set(t),this._changeViewMatrix(e,h),this._forceCameraViewMat[e.id]=!0):delete this._forceCameraViewMat[e.id]},t.prototype._support=function(e){return this._supportModes.indexOf(e)>=0},t.prototype._useCameraMesh=function(e){if(this._camerasMeshes[e.id])return this._camerasMeshes[e.id].mesh;var t=this.scene,r=t.assets,n=t.rootShadow,o=this.scene.createElement(s.XRNode),a=o.addComponent(i.Mesh,{geometry:r.getAsset("geometry","ar-camera-plane"),material:this.scene.createMaterial(r.getAsset("effect","ar-camera-yuv"))});return n.addChild(o),o.getComponent(i.Transform).visible=!1,this._camerasMeshes[e.id]={camera:e,mesh:a,inited:!1},a},t.prototype._removeCameraMesh=function(e){var t=this._camerasMeshes[e.id];t&&this.scene.rootShadow.removeChild(t.mesh.el),delete this._camerasMeshes[e.id],delete this._forceCameraViewMat[e.id]},t.prototype._setTrackCamera=function(e,t){var r,n;(!t&&e!==this._trackCamera||t&&e===this._trackCamera)&&(null===(r=this._trackCamera)||void 0===r||r.changeViewMatrix(!1),null===(n=this._trackCamera)||void 0===n||n.changeProjectMatrix(!1),this._trackCamera&&delete this._forceCameraViewMat[this._trackCamera.id],this._trackCamera=void 0),t||(this._trackCamera=e)},t.prototype._addTacker=function(e){var t="OSD"===e.mode?this._session.addOSDMarker(e.filePath):"Marker"===e.mode?this._session.addMarker(e.filePath):this._requestTrackerId();return"number"!=typeof t&&l.default.throw(new Error("Add tracker with src '"+e.filePath+"' failed, return "+t+" !"),f.EEReportScope.AR),this._trackers[t]&&l.default.throw(new Error("Tracker with id "+t+" has already been existed!"),f.EEReportScope.AR),t>=0&&(this._trackers[t]=e),t},t.prototype._requestTrackerId=function(){var e,t=this._trackerIds.length;return e=t?this._trackerIds[t-1]+1:1,this._trackerIds.push(e),e},t.prototype._removeTracker=function(e){if(this._trackers[e.trackId]){if("Plane"===e.mode||"Face"===e.mode){var t=this._trackerIds.indexOf(e.trackId);this._trackerIds.splice(t,1)}else"OSD"===e.mode?this._session.removeOSDMarker(e.trackId):this._session.removeMarker(e.trackId);delete this._trackers[e.trackId]}},t.prototype._syncTrackers=function(){var e=this,t=this._session,r=this._supportModes[0];t.on("updateAnchors",(function(t){"Plane"!==r&&e._trackCamera&&("OSD"===r||"Marker"===r?t.forEach((function(t){var r=e._trackers[t.markerId];if(r){var n=t.size,o=t.origin,a=t.transform,s=r.el.getComponent(i.Transform);if(s)if(r._switch(!0),"OSD"===r.mode){var c=e._convertScreenPointsToTRS(s,o,n);s.scale.setValue(c,c,c)}else"Marker"===r.mode&&(h.setArray(a),e._setMatrix(s,h))}})):e._processPosTracker(t))})),t.on("removeAnchors",(function(t){"Plane"!==r&&e._trackCamera&&("OSD"===r||"Marker"===r?t.forEach((function(t){var r;null===(r=e._trackers[t.markerId])||void 0===r||r._switch(!1)})):e._processPosTracker(t))}))},t.prototype._processPosTracker=function(e){var t=this,r=e.map((function(e){return e.detectId}));for(var n in this._poss){var o=parseInt(n,10);if(r.indexOf(o)<0){var a=this._trackers[this._poss[o]];a&&(a._switch(!1),delete this._poss[o]),this._posCount-=1}}e.forEach((function(e){var r=void 0!==t._poss[e.detectId],n=t._getPosTracker(e);if(n){var o=n.el.getComponent(i.Transform);if(o){r||(t._poss[e.detectId]=n.trackId,n._switch(!0),t._posCount+=1);var a=t._convertScreenPointsToTRS(o,e.origin,e.size,e.angle);n._setRawData(e,a)}}}))},t.prototype._getPosTracker=function(e){var t=this._poss[e.detectId];if(void 0===t){var r=Object.values(this._poss);if(!(t=this._trackerIds.filter((function(e){return r.indexOf(e)<0}))[0]))return;this._poss[e.detectId]=t}return this._trackers[t]},t.prototype._convertScreenPointsToTRS=function(e,t,r,n){var o=r.width,i=r.height,a=2*t.x-1,s=1-2*t.y;this._convertScreenPoint(a,s,m),this._convertScreenPoint(a+2*o,s-2*i,v);var c=e.position.set(m);c.add(v,c).scale(.5,c);var u=Math.min(Math.abs(v.x-m.x),Math.abs(m.y-v.y));return n&&e.quaternion.setFromYawRollPitch(-n.yaw,n.roll,n.pitch),u},t.prototype._convertScreenPoint=function(e,t,r){_.setValue(e,t,.1),this._trackCamera.convertClipPositionToWorld(_,r)},t.prototype._updateCameraMeshes=function(){var e,t,r=this._cameraTexes,n=r.y,o=r.uv;for(var i in this._camerasMeshes){var a=this._camerasMeshes[i],s=a.mesh,c=a.camera,u=a.inited,l=s.material;u||(l.setTexture("u_yTexture",n),l.setTexture("u_uvTexture",o),this._camerasMeshes[i].inited=!0);var f=c.renderTarget||this.scene,p=this._session.getVKFrame(f.width,f.height);if(p){var d=p.getDisplayTransform();h.setArray([d[0],d[1],d[2],0,d[3],d[4],d[5],0,d[6],d[7],d[8],0,0,0,0,1]),l.setMatrix("u_displayMatrix",h),e||(e=p.getCameraRawTextureData(),n.update({buffer:e.yAddress}),o.update({buffer:e.uvAddress}),this._rawARData.width=e.width,this._rawARData.height=e.height,this._rawARData.yBuffer=e.yAddress,this._rawARData.uvBuffer=e.uvAddress),c===this._trackCamera&&(t=p)}}var _=this._trackCamera;if(_){if(!t){f=_.renderTarget||this.scene;t=this._session.getVKFrame(f.width,f.height)}if(!(null==t?void 0:t.camera))return!1;var m=(c=t.camera).viewMatrix,v=c.getProjectionMatrix(_.near,_.far);this._rawARData.timestamp=t.timestamp,this._rawARData.viewMatrix=m,this._rawARData.intrinsics=c.intrinsics;var y=this._supportModes[0];if("Plane"!==y&&"Marker"!==y)return!0;this._forceCameraViewMat[_.id]||(h.setArray(m),this._changeViewMatrix(_,h)),_.changeProjectMatrix(!0,v)}return!0},t.prototype._changeViewMatrix=function(e,t){t.inverse(t);var r=e.el.getComponent(i.Transform);this._setMatrix(r,t,!0)},t.prototype._setMatrix=function(e,t,r){void 0===r&&(r=!1),r&&(t._raw[8]*=-1,t._raw[9]*=-1,t._raw[10]*=-1),null==e||e.setLocalMatrix(t)},t._ALREADY_USED=!1,t}(a.default)},"./src/systems/AnimationSystem.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n,o=r("./src/core/Component.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=100,t._animators=new Set,t}return i(t,e),t.prototype.onTick=function(e,t){this._animators.forEach((function(t){t._tickAnimation(e)}))},t.prototype._addAnimator=function(e){this._animators.add(e)},t.prototype._removeAnimator=function(e){this._animators.delete(e)},t}(o.default)},"./src/systems/AssetsSystem.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var n,o=r("./src/assets/factories.ts"),i=r("./src/components/Assets.ts"),a=r("./src/assets/Material.ts"),s=r("./src/core/Component.ts"),c=r("./src/loader/AssetLoader.ts"),u=r("./src/loader/types.ts"),l=r("./src/core/logger.ts"),f=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=10,t._loaders={},t._store={},t}return f(t,e),t.prototype.addAsset=function(e,t,r){this._store[e]=this._store[e]||{},this._store[e][t]?l.default.error(new Error("Asset "+e+" "+t+" is already existed !")):this._store[e][t]={value:r,state:u.EAssetState.Existed,__isAsset:!0}},t.prototype.loadAsset=function(e,t){var r,n=e.type,o=e.assetId,a=e.defer,s=null==t?void 0:t.getComponent(i.default),c=null===(r=this._store[n])||void 0===r?void 0:r[o];if(c)return c.state!==u.EAssetState.Defer||a?void l.default.error(new Error("Asset "+n+" "+o+" has already been loaded !")):(c.__group=s,c.__params.weight=e.weight,null==s||s._addAsset(c.__params),this._loadAsset(c));if(this._getLoader(n)){if(c=this._store[n][o]={__isAsset:!0,__params:e,__group:s,state:a?u.EAssetState.Defer:u.EAssetState.Loading},null==s||s._addAsset(e),!a)return this._loadAsset(c)}else l.default.error(new Error("Loader for type "+n+" is not existed!"))},t.prototype._loadAsset=function(e){var t=this,r=e.__params;r.options=r.options||{};var n=this._getLoader(r.type);return e.state=u.EAssetState.Loading,n._parseOptions(r.options),e.promise=new Promise((function(o,i){r.startTs=Date.now(),r.progress=0,n.load(r,{onLoading:function(r){return t._handleLoadOne(e,r,void 0,void 0,o,i)},onLoaded:function(r){return t._handleLoadOne(e,1,r,void 0,o,i)},onError:function(r){return t._handleLoadOne(e,1,void 0,r,o,i)}})})),e.promise},t.prototype.releaseAsset=function(e,t){var r,n=null===(r=this._store[e])||void 0===r?void 0:r[t];if(n){var o=this._getLoader(e),i=n.state===u.EAssetState.Loading;o&&n.__params&&(i?o.cancel(n.__params):o.release(n.__params,n.value)),n.state=u.EAssetState.Undefined,n.__group&&n.__group._removeAsset(n.__params),delete this._store[e][t]}},t.prototype.getAsset=function(e,t,r){var n=this.getAssetWithState(e,t,r);if(n.state===u.EAssetState.Existed)return n.value},t.prototype.getAssetWithState=function(e,t,r){var n=this._store[e];if(!n)return this._tryBuiltin(e,t,r);var o=n[t];return o||(o=this._tryBuiltin(e,t,r)),(null==o?void 0:o.state)===u.EAssetState.Defer&&this._loadAsset(o),o.state!==u.EAssetState.Undefined?o:n[r]||o},t.prototype.cancelAsset=function(e,t){var r=this._getLoader(e),n=this._store[e][t];n.state===u.EAssetState.Loading&&r.cancel(n.__params)},t.prototype._registerLoadersAndLoadBuiltinAssets=function(){for(var e=0,t=(0,c.getAssetLoaderTypes)();e<t.length;e++){var r=t[e],n=this._getLoader(r);if(n){var o=n.getBuiltin();if(o.length)for(var i=0,s=o;i<s.length;i++){var u=s[i],l=u.assetId,f=u.src,p=u.options;this.loadAsset({assetId:l,src:f,options:p,type:r,defer:!0})}}}var d=new a.default(this.scene);d.initByEffect(this.getAsset("effect","standard")),this.addAsset("material","default",d)},t.prototype._checkAssetIsDefer=function(e,t){var r,n=null===(r=this._store[e])||void 0===r?void 0:r[t];return n&&n.state===u.EAssetState.Defer},t.prototype.onRelease=function(e){this._cancelAll()},t.prototype._cancelAll=function(){for(var e in this._store){var t=this._getLoader(e),r=this._store[e];for(var n in r){var o=r[n];o.state===u.EAssetState.Loading&&t.cancel(o.__params)}}},t.prototype._handleLoadOne=function(e,t,r,n,o,i){var a=e.__params,s=e.__group,c=a.type,l=a.assetId,f=a.canceled,p=this._store[c][l];if(p.state===u.EAssetState.Loading)return f?(p.state=u.EAssetState.Undefined,delete this._store[c][l],i(new Error("Assets load canceled!"))):(a.duration=(Date.now()-a.startTs)/1e3,n?(p.state=u.EAssetState.Undefined,delete this._store[c][l],null==s||s._onProgressOne(a,1),null==s||s._onLoadOne(a,n),i(n)):1===t&&r?(p.state=u.EAssetState.Existed,e.value=r,null==s||s._onProgressOne(a,1),null==s||s._onLoadOne(a),o(e)):void(null==s||s._onProgressOne(a,t)))},t.prototype._tryBuiltin=function(e,t,r){var n=(0,o.getAssetFactory)(e,t);return n||r&&(n=(0,o.getAssetFactory)(e,r),t=r),n?(this._store[e]=this._store[e]||{},this._store[e][t]={value:n(this.scene),state:u.EAssetState.Existed,__isAsset:!0}):{state:u.EAssetState.Undefined,__isAsset:!0}},t.prototype._getLoader=function(e){if(!this._loaders[e]){var t=(0,c.getAssetLoader)(e);t&&(this._store[e]=this._store[e]||{},this._loaders[e]=new t(this.scene,e))}return this._loaders[e]},t}(s.default)},"./src/systems/GizmoSystem.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n,o=r("./src/core/Component.ts"),i=r("./src/elements/xr-shadow.ts"),a=r("./src/components/Transform.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=100,t.gizmos=new Map,t}return s(t,e),t.prototype.onTick=function(e,t){this.gizmos.forEach((function(e,t){e.getComponent(a.default).position.set(t.el.getComponent(a.default).worldPosition),e.getComponent(a.default).quaternion.set(t.el.getComponent(a.default).worldQuaternion),e.getComponent(a.default).scale.set(t.el.getComponent(a.default).worldScale)}))},t.prototype.addGizmo=function(e){if(this.gizmos.has(e))return this.gizmos.get(e);var t=this.scene.createElement(i.default);return this.scene.rootShadow.addChild(t),this.gizmos.set(e,t),t},t.prototype.removeGizmo=function(e){this.gizmos.has(e)&&(this.scene.rootShadow.removeChild(this.gizmos.get(e)),this.gizmos.delete(e))},t}(o.default)},"./src/systems/LightManager.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r("./src/components/Light.ts"),o=r("./src/components/Transform.ts");const i=function(){function e(){this._mainInfo={hasAmbient:!1,hasMainDir:!1,ambientColorIns:new Float32Array(4),mainDir:new Float32Array(3),mainColorIns:new Float32Array(4)},this._addInfo={count:0,info:new Float32Array(16),dir:new Float32Array(12),pos:new Float32Array(12),colorIns:new Float32Array(16)},this._lights=[],this._isDirty=!1}return e.prototype._addLight=function(e){this._lights.indexOf(e)<0&&(this._lights.push(e),this._isDirty=!0)},e.prototype._removeLight=function(e){var t=this._lights.indexOf(e);t>=0&&(this._lights.splice(t,1),this._isDirty=!0)},e.prototype._modifyLight=function(e){this._isDirty=!0},e.prototype._getMainLight=function(e){return this._mainDir},e.prototype._getMainLightInfo=function(e){var t;if(!this._isDirty)return this._mainInfo;var r=this._mainInfo;r.hasAmbient=!1,r.hasMainDir=!1,this._mainDir=void 0;for(var i=0,a=0,s=this._lights;a<s.length;a++){var c=s[a];c.el.getComponent(o.default).visible&&(this._cullLight(e,c)&&(c.type!==n.ELightType.Ambient||r.hasAmbient?c.type!==n.ELightType.Directional||r.hasMainDir||(this._mainDir=c,r.mainDir.set(c.el.getComponent(o.default).worldForward.toArray()),null===(t=c.lightCamera)||void 0===t||t.setLightDir(r.mainDir[0],r.mainDir[1],r.mainDir[2]),r.mainColorIns.set(c.color),r.mainColorIns[3]=c.intensity,r.hasMainDir=!0,i+=1):(r.ambientColorIns.set(c.color),r.ambientColorIns[3]=c.intensity,r.hasAmbient=!0,i+=1)))}return this._lights.length===i&&(this._isDirty=!1),this._mainInfo},e.prototype._getAddLightsInfo=function(e){if(this._isDirty){for(var t=this._addInfo,r=0,i=0,a=this._lights;i<a.length;i++){var s=a[i];if(r>=4)break;if(s.type!==n.ELightType.Ambient&&s!==this._mainDir&&this._cullLight(e,s)){var c=s.el.getComponent(o.default),u=c.worldPosition,l=c.worldForward,f=4*r;t.info[f]=s._getType(),t.info[f+1]=s.range,t.info[f+2]=Math.cos(s.innerConeAngle),t.info[f+3]=Math.cos(s.outerConeAngle),t.colorIns.set(s.color,f),t.colorIns[f+3]=s.intensity,f=3*r,t.dir.set(l.toArray(),f),t.pos.set(u.toArray(),f),r+=1}}t.count=r,this._isDirty=!1}return this._addInfo},e.prototype._cullLight=function(e,t){var r=t.el.getComponent(o.default);return!!r.visible&&(e.cullMask&r._finalMask)===r._finalMask},e}()},"./src/systems/NodeSystem.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n,o=r("./src/core/Component.ts"),i=r("./src/components/index.ts"),a=r("./src/components/physics/types.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=350,t}return s(t,e),t.prototype.onTick=function(e,t){this._calcVisible(this.scene),this._calcVisible(this.scene.rootShadow)},t.prototype._calcVisible=function(e){e&&e.dfs((function(e,t){var r=e.getComponent(i.Transform);if(!r)return t;var n=!!t.visible&&r.visible,o=e.getComponent(i.Mesh)||e.getComponent(i.Particle);o&&(o._visible=n);for(var s=0,c=a.allShapes;s<c.length;s++){var u=c[s],l=e.getComponent(u);l&&(n&&!l.disabledInData?l.enable():l.disable())}var f=!!t.dirty||r._checkDirty();return f&&r._setDirty(),{visible:n,dirty:f}}),{visible:!0,dirty:!1},!0)},t}(o.default)},"./src/systems/PhysicsSystem.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var n,o=r("./src/components/index.ts"),i=r("./src/core/Component.ts"),a=r("./src/ext.ts"),s=r("./src/math/vector3.ts"),c=r("./src/math/quaternion.ts"),u=r("./src/physics/raycast.ts"),l=r("./src/physics/RaycastHit.ts"),f=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const p=function(e){function t(){var t=e.call(this)||this;return t.shapes=new Set,t.rigidbodies=new Set,t._touching=null,t._lastX=0,t._lastY=0,t._lastCamera=null,t}return f(t,e),t.prototype.addShape=function(e){this.shapes.add(e)},t.prototype.removeShape=function(e){this.shapes.delete(e)},t.prototype.syncTransformFromShapes=function(){this.shapes.forEach((function(e){var t=e.el.getComponent(o.Transform),r=t.worldPosition,n=t.worldQuaternion;e._nativeStaticRigidbody.position=r.toPhysics(),e._nativeStaticRigidbody.rotation=n.toPhysics();for(var i=0,a=e._nativeColliders;i<a.length;i++){a[i].scale=t.worldScale.toPhysics()}}))},t.prototype.syncTransformToRigidbodies=function(){},t.prototype.onAdd=function(){var e,t;s.default.Phys3D=(0,a.getKanata)(this.scene).Phys3D,c.default.Phys3D=(0,a.getKanata)(this.scene).Phys3D,this.nativeSystem=new((0,a.getKanata)(this.scene).Phys3D.PhysSystem),this.nativeSystem.createScene(),this.scene.event.add("touchstart",this._handleTouchStart.bind(this)),this.scene.event.add("touchmove",this._handleTouchMove.bind(this)),this.scene.event.add("touchend",this._handleTouchEnd.bind(this)),null===(t=(e=(0,a.getKanata)(this.scene)).setGlobalPhysicSystem)||void 0===t||t.call(e,this.nativeSystem)},t.prototype.onTick=function(e,t){(0,a.getKanata)(this.scene).renderEnv.isGoodPhysAndScalableList?this.nativeSystem.SyncFromTransforms():this.syncTransformFromShapes()},t.prototype.bindRigidbodyWithEntity=function(e,t){var r,n;e.AttachToEntity(t.poll,t.id),null===(n=(r=(0,a.getKanata)(this.scene)).bindRigidBodyToNode)||void 0===n||n.call(r,e,t.id)},t.prototype.raycast=function(e){return(0,u.raycast)((0,a.getKanata)(this.scene).Phys3D,this.nativeSystem,e)},t.prototype.touchToRay=function(e,t,r){var n;n=s.default.createFromNumber(e/this.scene.frameWidth*2-1,2*(1-t/this.scene.frameHeight)-1,0);var i=s.default.createFromNumber(0,0,0);r.convertClipPositionToWorld(n,i);var a=r.el.getComponent(o.Transform).worldPosition,c=i.sub(a).normalize();return{dir:[c.x,c.y,c.z],origin:[a.x,a.y,a.z]}},t.prototype._handleTouchStart=function(e){var t=e.touches;if(1===t.length)for(var r=this.scene.render.cameras,n=s.default.createFromNumber(0,0,1),o=s.default.createFromNumber(0,0,0),i=new l.default(this.scene),a={origin:o,unitDir:n,hit:i},c=0;c<t.length;c++)for(var u=t[c],f=this.extractFromTouch(u),p=f[0],d=f[1],h=f[2],_=0,m=r;_<m.length;_++){var v=m[_],y=this.touchToRay(p,d,v),g=y.dir,b=y.origin;if(n.x=g[0],n.y=g[1],n.z=g[2],o.x=b[0],o.y=b[1],o.z=b[2],this.raycast(a)){var w=i.collider._parentShape?i.collider._parentShape:i.collider,x=w.el,S={camera:v,target:x,shape:w,x:p/this.scene.frameWidth*this.scene.width,y:d/this.scene.frameHeight*this.scene.height,dir:g,origin:b,force:h};this._touching=w,this._lastX=S.x,this._lastY=S.y,this._lastCamera=v,x.event.trigger("touch-shape",S,!0,!0,!0)}}},t.prototype._handleTouchMove=function(e){if(this._touching&&1===e.changedTouches.length){if(!this._touching.el)return void this._handleTouchEnd(e);var t=e.changedTouches[0],r=this.extractFromTouch(t),n=r[0],o=r[1],i=r[2],a=this.touchToRay(n,o,this._lastCamera),s=a.dir,c=a.origin,u={camera:this._lastCamera,target:this._touching.el,shape:this._touching,x:n/this.scene.frameWidth*this.scene.width,y:o/this.scene.frameHeight*this.scene.height,deltaX:n/this.scene.frameWidth*this.scene.width-this._lastX,deltaY:o/this.scene.frameHeight*this.scene.height-this._lastY,dir:s,origin:c,force:i};this._lastX+=u.deltaX,this._lastY+=u.deltaY,this._touching.el.event.trigger("drag-shape",u,!0,!0,!0)}},t.prototype._handleTouchEnd=function(e){var t;if(this._touching&&1===e.changedTouches.length){var r=e.changedTouches[0],n=this.extractFromTouch(r),o=n[0],i=n[1],a=n[2],s=this.touchToRay(o,i,this._lastCamera),c=s.dir,u=s.origin,l={camera:this._lastCamera,target:this._touching.el,shape:this._touching,x:o/this.scene.frameWidth*this.scene.width,y:i/this.scene.frameHeight*this.scene.height,dir:c,origin:u,force:a};null===(t=this._touching.el)||void 0===t||t.event.trigger("untouch-shape",l,!0,!0,!0),this._touching=null,this._lastCamera=null}},t.prototype.extractFromTouch=function(e){var t,r,n,o,i;return[null!==(r=null!==(t=e.pageX)&&void 0!==t?t:e.x)&&void 0!==r?r:0,null!==(o=null!==(n=e.pageY)&&void 0!==n?n:e.y)&&void 0!==o?o:0,null!==(i=e.force)&&void 0!==i?i:0]},t}(i.default)},"./src/systems/RenderSystem.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{RenderSystemSchema:()=>l,default:()=>f});var n,o=r("./src/core/Component.ts"),i=r("./src/ext.ts"),a=r("./src/render-graph/internal/ForwardBaseRG.ts"),s=r("./src/systems/LightManager.ts"),c=r("./src/core/Observable.ts"),u=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l={shadowColor:{type:"color",defaultValue:[110/255,122/255,161/255]}};const f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=400,t.schema=l,t._lights=new s.default,t._sortedCameras=[],t._dirtyCameras=[],t._features={},t._camerasChangeEvent=new c.default,t}return u(t,e),Object.defineProperty(t.prototype,"lights",{get:function(){return this._lights},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"env",{get:function(){return this._env},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"camerasChangeEvent",{get:function(){return this._camerasChangeEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cameras",{get:function(){return this._sortedCameras},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"changedCameras",{get:function(){return this._dirtyCameras},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderGraph",{get:function(){return this._renderGraph},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{get:function(){return this._currentData.shadowColor},enumerable:!1,configurable:!0}),t.prototype.changeMacros=function(e){(0,i.getKanata)(this.scene).renderEnv.changeMacros(e)},t.prototype.getMacro=function(e){return(0,i.getKanata)(this.scene).renderEnv.getMacro(e)},t.prototype.changeFeatures=function(e){for(var t in e)this._features[t]!==e[t]&&(this._dirtyFeatures=this._dirtyFeatures||{},this._dirtyFeatures[t]=e[t])},t.prototype.getFeature=function(e){return this._features[e]},t.prototype.onAdd=function(e,t){(0,i.getKanata)(this.scene).renderEnv.setInternalInstanceInfo(i.Kanata.EMeshRenderType.Static3D,[{uniformKey:"u_world",attributeName:"a_world",type:i.Kanata.EUniformType.MAT4},{uniformKey:"u_lightMapScaleOffset",attributeName:"a_lightMapScaleOffset",type:i.Kanata.EUniformType.FLOAT4}],["u_lightCountFA","u_lightIndicesFA"])},t.prototype.onTick=function(){var e,t=(0,i.getKanata)(this.scene);if((0,i.getKanata)(this.scene).refreshNodesWorldTransform(),this._renderGraph||this.useRenderGraph(new a.default("internal-forward-base",{})),this._dirtyFeatures){for(var r=0,n=this._sortedCameras;r<n.length;r++){var o=n[r];this._dirtyCameras.indexOf(o)<0||this._checkCameraFeaturesDirty(o)&&this._dirtyCameras.push(o)}Object.assign(this._features,this._dirtyFeatures)}if(this._dirtyCameras.length){for(var s=0,c=this._dirtyCameras;s<c.length;s++){o=c[s];this._fillCameraFeatures(o)}this._sortCameras(),this._camerasChangeEvent.notify(this)}this._dirtyCameras.length=0,this._dirtyFeatures=void 0,t.renderEnv.beginFrame(),null===(e=this._renderGraph)||void 0===e||e._execute(),t.renderEnv.endFrame()},t.prototype._checkCameraFeaturesDirty=function(e){for(var t=0,r=e.allowFeatures;t<r.length;t++){var n=r[t];if(void 0!==this._dirtyFeatures[n])return!0}return!1},t.prototype._fillCameraFeatures=function(e){for(var t={},r=0,n=e.allowFeatures;r<n.length;r++){var o=n[r],i=this._features[o];void 0!==i&&(t[o]=i)}e._setFeatures(t)},t.prototype.onRelease=function(e){this._dirtyFeatures=void 0,this._dirtyCameras=void 0,this._sortedCameras=void 0},t.prototype.useRenderGraph=function(e){this._renderGraph&&e._disable(),this._renderGraph=e,e._active(this.scene)},t.prototype.enableInstance=function(){(0,i.getKanata)(this.scene).renderEnv.useInstance=!0},t.prototype.disableInstance=function(){(0,i.getKanata)(this.scene).renderEnv.useInstance=!1},t.prototype._addCamera=function(e){this._sortedCameras.indexOf(e)<0&&(this._sortedCameras.push(e),this._dirtyCameras.push(e))},t.prototype._removeCamera=function(e){this._sortedCameras.indexOf(e)>=0&&(this._sortedCameras.splice(this._sortedCameras.indexOf(e),1),this._dirtyCameras.push(e))},t.prototype._modifyCameraImportantProps=function(e){this._sortedCameras.indexOf(e)>=0&&this._dirtyCameras.push(e)},t.prototype._sortCameras=function(){this._sortedCameras.sort((function(e,t){return e.depth-t.depth}))},t.prototype._setEnv=function(e){this._env=e},t}(o.default)},"./src/systems/ShareSystem.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n,o=r("./src/core/Component.ts"),i=r("./src/core/logger.ts"),a=r("./src/ext.ts"),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=1/0,t}return s(t,e),Object.defineProperty(t.prototype,"supported",{get:function(){var e;if(void 0===this._supported){var t=this.captureToDataURL({quality:.1});this._supported=!!(null===(e=t.split(",",2)[1])||void 0===e?void 0:e.length)}return this._supported},enumerable:!1,configurable:!0}),t.prototype.captureToDataURL=function(e){var t,r;void 0===e&&(e={});var n="png"===e.fileType?"image/png":"image/jpeg",o=e.quality||.8;return(null===(r=null===(t=(0,a.getKanata)(this.scene))||void 0===t?void 0:t.GET_MAIN_CANVAS())||void 0===r?void 0:r.toDataURL(n,o))||""},t.prototype.captureToArrayBuffer=function(e){void 0===e&&(e={});var t=this.captureToDataURL(e).split(",",2),r=(t[0],t[1]);try{(0,a.getKanata)(this.scene).decodeBase64(r)}catch(e){return a._wx.base64ToArrayBuffer(r)}},t.prototype.captureToLocalPath=function(e,t){var r;void 0===e&&(e={});var n,o=this.captureToDataURL(e).split(",",2),i=o[0],s=o[1];try{n=(0,a.getKanata)(this.scene).decodeBase64(s)}catch(e){n=a._wx.base64ToArrayBuffer(s)}var c=/png/.test(i),u=a._wx.env.USER_DATA_PATH+"/xr-frame-share."+(c?"png":"jpg");a._wx.getFileSystemManager().writeFileSync(u,n,"binary");var l=t(u);"function"==typeof(null===(r=l)||void 0===r?void 0:r.then)?l.then((function(){a._wx.getFileSystemManager().unlink({filePath:u})})):a._wx.getFileSystemManager().unlink({filePath:u})},t.prototype.captureToFriends=function(e){void 0===e&&(e={}),this.captureToLocalPath(e,(function(e){return new Promise((function(t){a._wx.showShareImageMenu({path:e,menus:["shareAppMessage","shareTimeline"],success:function(){t()},fail:function(){i.default.warn("Share to friend failed!"),t()}})}))}))},t}(o.default)},"./src/systems/TickSystem.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n,o=r("./src/core/Component.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=300,t}return i(t,e),t.prototype.onTick=function(e,t){this.scene.dfs((function(e){e._beforeTick()}),void 0,!0),this.scene.rootShadow.dfs((function(e){e._beforeTick()})),this.scene.dfs((function(t){t._tick(e)}),void 0,!0),this.scene.rootShadow.dfs((function(t){t._tick(e)})),this.scene.event.trigger("tick",e,!0)},t}(o.default)},"./src/systems/VideoSystem.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n,o=r("./src/core/Component.ts"),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});const a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=110,t._videos=new Set,t}return i(t,e),t.prototype.onTick=function(e,t){this._videos.forEach((function(t){t._tick(e)}))},t.prototype._addVideo=function(e){this._videos.add(e)},t.prototype._removeVideo=function(e){this._videos.delete(e)},t}(o.default)},"./src/systems/index.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ARSystem:()=>u.default,ARSystemSchema:()=>u.ARSystemSchema,AnimationSystem:()=>s.default,AssetsSystem:()=>o.default,GizmoSystem:()=>d.default,IARRawData:()=>u.IARRawData,IARSystemData:()=>u.IARSystemData,IAnimationSystemData:()=>s.IAnimationSystemData,IAssetsSystemData:()=>o.IAssetsSystemData,IGizmoSystemData:()=>d.IGizmoSystemData,INodeSystemData:()=>l.INodeSystemData,IPhysicsSystemData:()=>c.IPhysicsSystemData,IRenderSystemData:()=>a.IRenderSystemData,IShapeDragEvent:()=>c.IShapeDragEvent,IShapeTouchEvent:()=>c.IShapeTouchEvent,IShareCaptureOptions:()=>p.IShareCaptureOptions,IShareSystemData:()=>p.IShareSystemData,ITickSystemData:()=>i.ITickSystemData,IVideoSystemData:()=>f.IVideoSystemData,NodeSystem:()=>l.default,PhysicsSystem:()=>c.default,RenderSystem:()=>a.default,RenderSystemSchema:()=>a.RenderSystemSchema,ShareSystem:()=>p.default,TickSystem:()=>i.default,VideoSystem:()=>f.default});var n=r("./src/core/Component.ts"),o=r("./src/systems/AssetsSystem.ts"),i=r("./src/systems/TickSystem.ts"),a=r("./src/systems/RenderSystem.ts"),s=r("./src/systems/AnimationSystem.ts"),c=r("./src/systems/PhysicsSystem.ts"),u=r("./src/systems/ARSystem.ts"),l=r("./src/systems/NodeSystem.ts"),f=r("./src/systems/VideoSystem.ts"),p=r("./src/systems/ShareSystem.ts"),d=r("./src/systems/GizmoSystem.ts");(0,n.registerComponent)("assets-system",o.default),(0,n.registerComponent)("node-system",l.default),(0,n.registerComponent)("tick-system",i.default),(0,n.registerComponent)("render-system",a.default),(0,n.registerComponent)("animation-system",s.default),(0,n.registerComponent)("video-system",f.default),(0,n.registerComponent)("physics-system",c.default),(0,n.registerComponent)("ar-system",u.default),(0,n.registerComponent)("share-system",p.default),(0,n.registerComponent)("gizmo-system",d.default)},"./src/xrFrameSystem.ts":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ARSystem:()=>u.ARSystem,ARSystemSchema:()=>u.ARSystemSchema,ARTrackSchema:()=>s.ARTrackSchema,ARTracker:()=>s.ARTracker,ARTrackerDataMapping:()=>c.ARTrackerDataMapping,ARTrackerDefaultComponents:()=>c.ARTrackerDefaultComponents,Animation:()=>y.default,AnimationSystem:()=>u.AnimationSystem,Animator:()=>s.Animator,AnimatorSchema:()=>s.AnimatorSchema,AssetLoad:()=>s.AssetLoad,AssetLoadDataMapping:()=>c.AssetLoadDataMapping,AssetLoadSchema:()=>s.AssetLoadSchema,AssetLoader:()=>l.AssetLoader,AssetMaterial:()=>s.AssetMaterial,AssetMaterialDataMapping:()=>c.AssetMaterialDataMapping,AssetMaterialDefaultComponents:()=>c.AssetMaterialDefaultComponents,AssetMaterialSchema:()=>s.AssetMaterialSchema,AssetPostProcess:()=>s.AssetPostProcess,AssetPostProcessDataMapping:()=>c.AssetPostProcessDataMapping,AssetPostProcessDefaultComponents:()=>c.AssetPostProcessDefaultComponents,AssetRenderTexture:()=>s.AssetRenderTexture,AssetRenderTextureDataMapping:()=>c.AssetRenderTextureDataMapping,AssetRenderTextureDefaultComponents:()=>c.AssetRenderTextureDefaultComponents,AssetRenderTextureSchema:()=>s.AssetRenderTextureSchema,Assets:()=>s.Assets,AssetsDefaultComponents:()=>c.AssetsDefaultComponents,AssetsSchema:()=>s.AssetsSchema,AssetsSystem:()=>u.AssetsSystem,Atlas:()=>b.default,AtlasLoader:()=>l.AtlasLoader,BasicDataMapping:()=>o.BasicDataMapping,BasicDefaultComponents:()=>o.BasicDefaultComponents,BoundBall:()=>I.default,BoundBox:()=>N.default,Camera:()=>s.Camera,CameraDataMapping:()=>c.CameraDataMapping,CameraDefaultComponents:()=>c.CameraDefaultComponents,CameraOrbitControl:()=>s.CameraOrbitControl,CameraOrbitControlSchema:()=>s.CameraOrbitControlSchema,CameraSchema:()=>s.CameraSchema,CapsuleShape:()=>s.CapsuleShape,CapsuleShapeSchema:()=>s.CapsuleShapeSchema,Color:()=>R.default,Component:()=>n.default,CubeShape:()=>s.CubeShape,CubeShapeSchema:()=>s.CubeShapeSchema,CubeTextureLoader:()=>l.CubeTextureLoader,EARTrackerState:()=>s.EARTrackerState,EAnimationBlendType:()=>L.EAnimationBlendType,EBlendEquation:()=>L.EBlendEquation,EBlendFactor:()=>L.EBlendFactor,ECapsuleShapeDirection:()=>s.ECapsuleShapeDirection,EColorMask:()=>L.EColorMask,ECompareFunc:()=>L.ECompareFunc,ECullMode:()=>L.ECullMode,EDataModelType:()=>L.EDataModelType,EEventType:()=>L.EEventType,EFaceWinding:()=>L.EFaceWinding,EFilterMode:()=>L.EFilterMode,EIndexType:()=>L.EIndexType,ELoadAction:()=>L.ELoadAction,EMeshRenderType:()=>L.EMeshRenderType,EPixelType:()=>L.EPixelType,EPrimitiveType:()=>L.EPrimitiveType,EShadowFitMode:()=>L.EShadowFitMode,EShadowMode:()=>L.EShadowMode,EShapeType:()=>s.EShapeType,EStencilOp:()=>L.EStencilOp,ETextureFormat:()=>L.ETextureFormat,ETextureType:()=>L.ETextureType,EUniformType:()=>L.EUniformType,EUseDefaultAddedAction:()=>L.EUseDefaultAddedAction,EUseDefaultRemovedAction:()=>L.EUseDefaultRemovedAction,EUseDefaultRetainedAction:()=>L.EUseDefaultRetainedAction,EVertexBatchOperator:()=>L.EVertexBatchOperator,EVertexFormat:()=>L.EVertexFormat,EVertexLayoutUsage:()=>L.EVertexLayoutUsage,EVertexStep:()=>L.EVertexStep,EWrapMode:()=>L.EWrapMode,Effect:()=>f.default,Element:()=>o.default,Env:()=>s.Env,EnvData:()=>v.default,EnvDataLoader:()=>l.EnvDataLoader,EnvDataMapping:()=>c.EnvDataMapping,EnvDefaultComponents:()=>c.EnvDefaultComponents,EnvSchema:()=>s.EnvSchema,EventManager:()=>a.default,GLTF:()=>s.GLTF,GLTFDataMapping:()=>c.GLTFDataMapping,GLTFDefaultComponents:()=>c.GLTFDefaultComponents,GLTFModel:()=>m.default,GLTFSchema:()=>s.GLTFSchema,Geometry:()=>p.default,GizmoSystem:()=>u.GizmoSystem,GlTFLoader:()=>l.GlTFLoader,IARRawData:()=>u.IARRawData,IARSystemData:()=>u.IARSystemData,IARTrackerData:()=>s.IARTrackerData,IARTrackerRawData:()=>s.IARTrackerRawData,IAnimationPlayOptions:()=>s.IAnimationPlayOptions,IAnimationSystemData:()=>u.IAnimationSystemData,IAnimatorAutoPlay:()=>s.IAnimatorAutoPlay,IAnimatorData:()=>s.IAnimatorData,IAssetMaterialData:()=>s.IAssetMaterialData,IAssetPostProcessData:()=>s.IAssetPostProcessData,IAssetRenderTextureData:()=>s.IAssetRenderTextureData,IAssetsData:()=>s.IAssetsData,IAssetsSystemData:()=>u.IAssetsSystemData,IAtlasCreationOptions:()=>b.IAtlasCreationOptions,IAtlasLoaderOptions:()=>l.IAtlasLoaderOptions,IAtlasOptions:()=>b.IAtlasOptions,IAttachment:()=>L.IAttachment,ICameraData:()=>s.ICameraData,ICameraOrbitControlData:()=>s.ICameraOrbitControlData,ICapsuleShapeData:()=>s.ICapsuleShapeData,IComponentSchema:()=>n.IComponentSchema,ICubeShapeData:()=>s.ICubeShapeData,ICubeTextureLoaderOptions:()=>l.ICubeTextureLoaderOptions,IDataValueHandler:()=>i.IDataValueHandler,IDownloader:()=>L.IDownloader,IEffectAsset:()=>f.IEffectAsset,IEngineSettings:()=>L.IEngineSettings,IEntityComponents:()=>o.IEntityComponents,IEnvData:()=>s.IEnvData,IEnvDataLoaderOptions:()=>l.IEnvDataLoaderOptions,IEnvDataOptions:()=>v.IEnvDataOptions,IEventBridge:()=>L.IEventBridge,IFeatures:()=>L.IFeatures,IFontSetting:()=>L.IFontSetting,IGLTFData:()=>s.IGLTFData,IGLTFLoaderOptions:()=>l.IGLTFLoaderOptions,IGLTFModelOptions:()=>m.IGLTFModelOptions,IGizmoSystemData:()=>u.IGizmoSystemData,IGlyphInfo:()=>L.IGlyphInfo,IHandle:()=>L.IHandle,IImage:()=>L.IImage,IImageLoaderOptions:()=>l.IImageLoaderOptions,IKeyframeAnimationData:()=>g.IKeyframeAnimationData,IKeyframeAnimationInfo:()=>g.IKeyframeAnimationInfo,IKeyframeAnimationOptions:()=>g.IKeyframeAnimationOptions,IKeyframeLoaderOptions:()=>l.IKeyframeLoaderOptions,ILightData:()=>s.ILightData,ILoaderOptionsSchema:()=>l.ILoaderOptionsSchema,ILongIntNativeMap:()=>L.ILongIntNativeMap,IMeshData:()=>s.IMeshData,IMeshShapeData:()=>s.IMeshShapeData,INativeMap:()=>L.INativeMap,INodeSystemData:()=>u.INodeSystemData,IParticleData:()=>s.IParticleData,IPhysicsSystemData:()=>u.IPhysicsSystemData,IPostProcessOptions:()=>w.IPostProcessOptions,IRawLoaderOptions:()=>l.IRawLoaderOptions,IRealDownloader:()=>L.IRealDownloader,IRect:()=>L.IRect,IRenderPassDescriptor:()=>L.IRenderPassDescriptor,IRenderStates:()=>f.IRenderStates,IRenderSystemData:()=>u.IRenderSystemData,IRenderTarget:()=>_.IRenderTarget,IRenderTextureOptions:()=>_.IRenderTextureOptions,IShapeData:()=>s.IShapeData,IShapeDragEvent:()=>u.IShapeDragEvent,IShapeGizmosData:()=>s.IShapeGizmosData,IShapeTouchEvent:()=>u.IShapeTouchEvent,IShareCaptureOptions:()=>u.IShareCaptureOptions,IShareSystemData:()=>u.IShareSystemData,ISphereShapeData:()=>s.ISphereShapeData,ISubMesh:()=>p.ISubMesh,ITextData:()=>s.ITextData,ITextureLoaderOptions:()=>l.ITextureLoaderOptions,ITextureOptions:()=>L.ITextureOptions,ITextureWrapper:()=>i.ITextureWrapper,ITickSystemData:()=>u.ITickSystemData,ITransformData:()=>s.ITransformData,IUniformDescriptorOptions:()=>L.IUniformDescriptorOptions,IVertexDataDescriptorOptions:()=>L.IVertexDataDescriptorOptions,IVertexLayoutOptions:()=>L.IVertexLayoutOptions,IVideoSystemData:()=>u.IVideoSystemData,IVideoTextureLoaderOptions:()=>l.IVideoTextureLoaderOptions,IVideoTextureOptions:()=>h.IVideoTextureOptions,IView:()=>L.IView,IViewAction:()=>L.IViewAction,ImageLoader:()=>l.ImageLoader,KeyframeAnimation:()=>g.default,KeyframeLoader:()=>l.KeyframeLoader,Light:()=>s.Light,LightDataMapping:()=>c.LightDataMapping,LightDefaultComponents:()=>c.LightDefaultComponents,LightSchema:()=>s.LightSchema,Material:()=>d.default,Matrix3:()=>O.default,Matrix4:()=>M.default,Mesh:()=>s.Mesh,MeshDataMapping:()=>c.MeshDataMapping,MeshDefaultComponents:()=>c.MeshDefaultComponents,MeshSchema:()=>s.MeshSchema,MeshShape:()=>s.MeshShape,MeshShapeSchema:()=>s.MeshShapeSchema,NodeDataMapping:()=>c.NodeDataMapping,NodeDefaultComponents:()=>c.NodeDefaultComponents,NodeSystem:()=>u.NodeSystem,OBB:()=>P.default,Particle:()=>s.Particle,ParticleDataMapping:()=>c.ParticleDataMapping,ParticleDefaultComponents:()=>c.ParticleDefaultComponents,ParticleSchema:()=>s.ParticleSchema,PhysicsSystem:()=>u.PhysicsSystem,PostProcess:()=>w.default,Quaternion:()=>A.default,RawLoader:()=>l.RawLoader,RenderSystem:()=>u.RenderSystem,RenderSystemSchema:()=>u.RenderSystemSchema,RenderTexture:()=>_.default,Scene:()=>c.Scene,SceneDataMapping:()=>c.SceneDataMapping,SceneDefaultComponents:()=>c.SceneDefaultComponents,ShadowDataMapping:()=>c.ShadowDataMapping,ShadowDefaultComponents:()=>c.ShadowDefaultComponents,Shape:()=>s.Shape,ShapeGizmos:()=>s.ShapeGizmos,ShareSystem:()=>u.ShareSystem,SphereShape:()=>s.SphereShape,SphereShapeSchema:()=>s.SphereShapeSchema,Spherical:()=>D.default,TCameraBackground:()=>s.TCameraBackground,TDirection:()=>y.TDirection,TEventCallback:()=>a.TEventCallback,TTrackMode:()=>s.TTrackMode,Text:()=>s.Text,TextDataMapping:()=>c.TextDataMapping,TextDefaultComponents:()=>c.TextDefaultComponents,TextSchema:()=>s.TextSchema,TextureLoader:()=>l.TextureLoader,TickSystem:()=>u.TickSystem,Transform:()=>s.Transform,TransformSchema:()=>s.TransformSchema,Vector2:()=>E.default,Vector3:()=>T.default,Vector4:()=>C.default,VideoSystem:()=>u.VideoSystem,VideoTexture:()=>h.default,VideoTextureLoader:()=>l.VideoTextureLoader,XRARTracker:()=>c.XRARTracker,XRAssetLoad:()=>c.XRAssetLoad,XRAssetPostProcess:()=>c.XRAssetPostProcess,XRAssetRenderTexture:()=>c.XRAssetRenderTexture,XRAssets:()=>c.XRAssets,XRCamera:()=>c.XRCamera,XREnv:()=>c.XREnv,XRGLTF:()=>c.XRGLTF,XRLight:()=>c.XRLight,XRMaterial:()=>c.XRMaterial,XRMesh:()=>c.XRMesh,XRNode:()=>c.XRNode,XRParticle:()=>c.XRParticle,XRShadow:()=>c.XRShadow,XRText:()=>c.XRText,isTextureWrapper:()=>i.isTextureWrapper,noneParamsEaseFuncs:()=>S.noneParamsEaseFuncs,registerAssetLoader:()=>l.registerAssetLoader,registerComponent:()=>n.registerComponent,registerDataValue:()=>i.registerDataValue,registerEffect:()=>x.registerEffect,registerElement:()=>o.registerElement,registerGeometry:()=>x.registerGeometry,registerMaterial:()=>x.registerMaterial,registerTexture:()=>x.registerTexture,registerUniformDesc:()=>x.registerUniformDesc,registerVertexDataDesc:()=>x.registerVertexDataDesc,registerVertexLayout:()=>x.registerVertexLayout,useParamsEaseFuncs:()=>S.useParamsEaseFuncs});var n=r("./src/core/Component.ts"),o=r("./src/core/Element.ts"),i=r("./src/core/DataValue.ts"),a=r("./src/core/EventManager.ts"),s=r("./src/components/index.ts"),c=r("./src/elements/index.ts"),u=r("./src/systems/index.ts"),l=r("./src/loader/index.ts"),f=r("./src/assets/Effect.ts"),p=r("./src/assets/Geometry.ts"),d=r("./src/assets/Material.ts"),h=r("./src/assets/VideoTexture.ts"),_=r("./src/assets/RenderTexture.ts"),m=r("./src/assets/GLTFModel.ts"),v=r("./src/assets/EnvData.ts"),y=r("./src/animation/Animation.ts"),g=r("./src/animation/KeyframeAnimation.ts"),b=r("./src/assets/Atlas.ts"),w=r("./src/assets/PostProcess.ts"),x=r("./src/assets/factories.ts"),S=r("./src/assets/easeFunctions.ts"),E=r("./src/math/vector2.ts"),T=r("./src/math/vector3.ts"),C=r("./src/math/vector4.ts"),A=r("./src/math/quaternion.ts"),O=r("./src/math/matrix3.ts"),M=r("./src/math/matrix4.ts"),R=r("./src/math/color.ts"),P=r("./src/math/OBB.ts"),I=r("./src/math/boundBall.ts"),N=r("./src/math/boundBox.ts"),D=r("./src/math/Spherical.ts"),L=r("../kanata/lib/kanata")},"../../node_modules/.pnpm/vm-browserify@1.1.2/node_modules/vm-browserify/index.js":(e,t)=>{var r=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1},n=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},o=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},i=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),a=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function s(){}s.prototype={};var c=t.Script=function(e){if(!(this instanceof c))return new c(e);this.code=e};c.prototype.runInContext=function(e){if(!(e instanceof s))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var c=t.contentWindow,u=c.eval,l=c.execScript;!u&&l&&(l.call(c,"null"),u=c.eval),o(n(e),(function(t){c[t]=e[t]})),o(a,(function(t){e[t]&&(c[t]=e[t])}));var f=n(c),p=u.call(c,this.code);return o(n(c),(function(t){(t in e||-1===r(f,t))&&(e[t]=c[t])})),o(a,(function(t){t in e||i(e,t,c[t])})),document.body.removeChild(t),p},c.prototype.runInThisContext=function(){return eval(this.code)},c.prototype.runInNewContext=function(e){var t=c.createContext(e),r=this.runInContext(t);return e&&o(n(t),(function(r){e[r]=t[r]})),r},o(n(c.prototype),(function(e){t[e]=c[e]=function(t){var r=c(t);return r[e].apply(r,[].slice.call(arguments,1))}})),t.isContext=function(e){return e instanceof s},t.createScript=function(e){return t.Script(e)},t.createContext=c.createContext=function(e){var t=new s;return"object"==typeof e&&o(n(e),(function(r){t[r]=e[r]})),t}},"./exparser/src/asm-ll-parser.js":(e,t,r)=>{var n=null,o=function(){},i=o.stats={all:0,copyIn:0,parse:0,constructOut:0},a=function(e){return n.llparser_create_descriptor(e,1)},s=function(e,t){var r=n.llparser_create_descriptor(e,0),o=!1;"^"===t[0]&&(o=!0);for(var i=o?1:0;i<t.length;i++){var a=t.charCodeAt(i);if("-"===t[i+1]){var s=t.charCodeAt(i+2);a<=s?(n.llparser_descriptor_add_range(r,a,s),i+=2):n.llparser_descriptor_add_char(r,a)}else n.llparser_descriptor_add_char(r,a)}return o&&n.llparser_descriptor_revert(r),r};o.create=function(e,t,i){n||(n=r("./exparser/src/exparser_llparser.js"));var c=new o;i=i||16384;var u=c._llp=n.llparser_create(i,128,128),l={},f={},p="";for(p in l.ALL=n.llparser_create_descriptor(u,0),n.llparser_descriptor_set_all(l.ALL),l.NULL=n.llparser_create_descriptor(u,0),n.llparser_descriptor_set_nil(l.NULL),e)l[p]=a(u);for(p in e)for(var d=e[p],h=l[p],_=0;_<d.length;_++){for(var m=d[_].id,v=d[_].states,y=[],g=0;g<v.length;g++){var b=v[g];l[b]||(l[b]=s(u,b)),y.push(l[b])}var w=0;"_raw"===m?w=1:"_jump"===m?w=65536:"_blank"===m&&(w=65537);var x=n.llparser_add_rule(u,w,h,y.length,y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7]);0===w&&(f[x]=t[m])}return n.llparser_prepare(u),c._inputPtr=n.llparser_get_input_buffer(u),c._resultPtr=n.llparser_get_result(u),c._stateIdMap=l,c._ruleCbMap=f,c._charCountLimit=i,c};o.prototype.parse=function(e,t){var r=Date.now();!function(e,t,r,n){for(var o=n>e.length?e.length:n,i=0;i<o;i++)t[r+i]=e.charCodeAt(i);t[r+o]=0}(t,new Uint16Array(n.memory.buffer),this._inputPtr>>1,this._charCountLimit),i.copyIn=i.copyIn+Date.now()-r,r=Date.now();var o=n.llparser_parse(this._llp,this._stateIdMap[e]);if(i.parse=i.parse+Date.now()-r,r=Date.now(),o)throw new Error("Parsing failed at character position "+(o-1)+' near "'+t.slice(o-20,o)+'"');var a=function(e,t,r,n,o){for(var i=[],a={i:0,r:0,n:!1,cc:-1,c:[]},s=a,c=o.pos,u=!1,l=!1,f=!1;;){var p=t[c],d=t[c+1];if(d<0?(l=!0,d=-d-1):l=!1,p>=0){f=!0;var h=r.slice(p,d);s.c.push(h),u=l}else{if(-1===p&&0===d)break;f=!1;var _=-p,m=d,v={i:s.c.length-(u?1:0),r:_,n:l,cc:m,c:[]};if(u){var y=s.c.length-1,g=s.c[y];v.c.push(g),s.c[y]=v}else s.c.push(v);i.push(s),s=v,u=!1}if(!f||!u)for(;s.c.length===s.cc;){u=s.n;var b=i.pop();if(b.c[s.i]=n[s.r].call(e,s.c),s=b,u)break}c+=2}return a.c[0]}(this,new Int32Array(n.memory.buffer),t,this._ruleCbMap,{pos:this._resultPtr>>2});return i.constructOut=i.constructOut+Date.now()-r,a},o.prototype.destroy=function(){n.llparser_destroy(this._llp)},e.exports=o},"./exparser/src/backend.js":(e,t,r)=>{var n=r("./exparser/src/global-options.js"),o=r("./exparser/src/func-arr.js"),i=!1,a=[],s=[],c=function(e){var t=a;a=[];var r=s;s=[],i=!0;for(var u=r.length,l=0;l<r.length;l++){r[l].render((function(){if(0===--u){i=!1,a.length&&(n.hasDOMBackend&&"function"==typeof requestAnimationFrame?requestAnimationFrame(c):setTimeout(c,16));for(var e=0;e<t.length;e++)"function"==typeof t[e]&&o.safeCallback("render",t[e],null,[])}}))}},u=function(e,t){a.push(t||null),s.indexOf(e)<0&&s.push(e),i||1!==a.length||(n.hasDOMBackend&&"function"==typeof requestAnimationFrame?requestAnimationFrame(c):setTimeout(c,16))};t.triggerRender=function(e,t){"function"==typeof e?"custom"===n.documentBackend&&n.customContext&&u(n.customContext,e):e.__backendContext&&u(e.__backendContext,t)}},"./exparser/src/behavior.js":(e,t,r)=>{var n=r("./exparser/src/func-arr.js"),o=r("./exparser/src/global-options.js"),i=r("./exparser/src/data-path.js"),a=["created","ready","cacheAttached","attached","moved","detached","route","saved","restored","error","listenerChanged","performanceData"],s=[String,Number,Boolean,Object,Array,null],c=function(){},u=i.parseMultiPaths,l=function(){};l.matchTypeWithValue=function(e,t){if(e===String){if("string"!=typeof t)return!1}else if(e===Number){if(!Number.isFinite(t))return!1}else if(e===Boolean){if("boolean"!=typeof t)return!1}else if(e===Object){if(null===t||t.constructor!==Object)return!1}else if(e===Array){if(null===t||t.constructor!==Array)return!1}else if(void 0===t)return!1;return!0};var f=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=e[r];return t},p=function(e){var t={};for(var r in e)t[r]=e[r];return t},d=function(e,t){for(var r in t)hasOwnProperty.call(e,r)?"object"!=typeof e[r]||"object"!=typeof t[r]||null===t[r]||t[r]instanceof Array?e[r]=t[r]:(e[r]instanceof Array?e[r]=f(e[r]):e[r]=p(e[r]),d(e[r],t[r])):e[r]=t[r]};l.create=function(e){var t=new l;return t.is=e.is||"",t.using=e.using||{},t.generics=e.generics||{},t.placeholder=e.placeholder||{},t.template=e.template,t.externalClasses=e.externalClasses||[],t.data="object"==typeof e.data?{}:null,t.properties=Object.create(null),t.methods=Object.create(null),t.listeners=Object.create(null),t.relations=Object.create(null),t.ancestors=[],t.initiator=e.initiator,t.lifetimes=Object.create(null),t.pageLifetimes=Object.create(null),t.observers=[],t.options={publicProperties:!!(e.options&&void 0!==e.options.publicProperties?e.options.publicProperties:o.publicProperties)},t.definitionFilter=e.definitionFilter,t._unprepared=e,(e.options&&void 0!==e.options.lazyRegistration?e.options.lazyRegistration:o.lazyRegistration)||l.prepare(t),e.is&&(l._list[e.is]=t),t},l.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var r=e.ancestors,o="",i=0;for(i=0;i<(t.behaviors||[]).length;i++){var f=t.behaviors[i],p=f;for(o in"string"==typeof p&&(p=l._list[f],n.hasGlobalWarningListeners()&&(p instanceof l||n.triggerWarning('behavior "'+f+'" is not found (when preparing "'+e.is+'").'))),p._unprepared&&l.prepare(p),"object"==typeof p.data&&(null===e.data?e.data=p.data:d(e.data,p.data)),p.generics){var h=p.generics[o];"object"!=typeof h&&(h={}),e.generics[o]={default:h.default}}for(o in p.properties)n.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&void 0!==e.properties[o]&&n.triggerWarning('property "'+o+'" from different behaviors is overriding (when preparing "'+e.is+'").'),e.properties[o]=p.properties[o];for(o in p.relations)e.relations[o]=p.relations[o];for(o in p.methods)n.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&e.methods[o]&&n.triggerWarning('method "'+o+'" from different behaviors is overriding (when preparing "'+e.is+'").'),e.methods[o]=p.methods[o];for(var _=0;_<p.ancestors.length;_++)r.indexOf(p.ancestors[_])<0&&r.push(p.ancestors[_])}for(o in"object"==typeof t.data&&(null===e.data?e.data=t.data:d(e.data,t.data)),t.properties){n.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&void 0!==e.properties[o]&&n.triggerWarning('property "'+o+'" from different behaviors is overriding (when preparing "'+e.is+'").');var m=t.properties[o];s.indexOf(m)>=0?m={type:m}:s.indexOf(m.type)<0&&m.optionalTypes&&m.optionalTypes.length>0&&(m.type=m.optionalTypes[0]),n.hasGlobalWarningListeners()&&s.indexOf(m.type)<0&&n.triggerWarning('the type of property "'+o+'" is illegal (when preparing "'+e.is+'").'),void 0===m.value&&(m.type===String?m.value="":m.type===Number?m.value=0:m.type===Boolean?m.value=!1:m.type===Array?m.value=[]:m.value=null),e.properties[o]={type:m.type,optionalTypes:m.optionalTypes,value:m.value,filter:m.filter,observer:m.observer,public:!!(void 0===m.public?e.options.publicProperties:m.public),availability:m.availability,observeAssignments:!!m.observeAssignments,reflectIdPrefix:!!m.reflectIdPrefix}}if(t.lifetimes&&"object"==typeof t.lifetimes)for(o in t.lifetimes)e.lifetimes[o]=t.lifetimes[o];for(i=0;i<a.length;i++)void 0===e.lifetimes[a[i]]&&(e.lifetimes[a[i]]=t[a[i]]);for(o in t.listeners)e.listeners[o]=t.listeners[o];var v=t.observers;if(v instanceof Array)for(i=0;i<v.length;i++){var y=v[i];e.observers.push({paths:u(y.fields||"**"),observer:y.observer})}else for(o in v)e.observers.push({paths:u(o),observer:v[o]});if(t.pageLifetimes&&"object"==typeof t.pageLifetimes)for(o in t.pageLifetimes)e.pageLifetimes[o]=t.pageLifetimes[o];for(o in t.relations){var g=t.relations[o];e.relations[o]={target:g.target||o,type:g.type,linked:g.linked||c,linkChanged:g.linkChanged||c,unlinked:g.unlinked||c,linkFailed:g.linkFailed||c}}for(o in t.methods)"function"==typeof t.methods[o]&&(n.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&e.methods[o]&&n.triggerWarning('method "'+o+'" from different behaviors is overriding (when preparing "'+e.is+'").'),e.methods[o]=t.methods[o]);r.push(e)}},l._list=Object.create(null),l.prototype.hasBehavior=function(e){this._unprepared&&l.prepare(this);for(var t=0;t<this.ancestors.length;t++)if(e instanceof l){if(this.ancestors[t]===e)return!0}else if(this.ancestors[t]===l._list[e])return!0;return!1},l.prototype._getAllListeners=function(){for(var e={},t=this.ancestors,r=0;r<t.length;r++){var n=this.ancestors[r];for(var o in n.listeners)Object.prototype.hasOwnProperty.call(e,o)?e[o].push(n.listeners[o]):e[o]=[n.listeners[o]]}return e},l.prototype._addObserversToDataProxy=function(e){for(var t=this.ancestors,r=0;r<t.length;r++)for(var n=this.ancestors[r].observers,o=0;o<n.length;o++){var i=n[o];e.addObserver(i.observer,i.paths,this)}},l.prototype._getAllLifeTimeFuncs=function(){var e={},t=this.ancestors;a.forEach((function(t){e[t]=n.create("Lifetime Method")}));for(var r=0;r<t.length;r++){var o=t[r];for(var i in o.lifetimes)o.lifetimes[i]&&(e[i]||(e[i]=n.create("Lifetime Method")),e[i].add(o.lifetimes[i]))}return e},l.prototype._getAllPageLifeTimeFuncs=function(){for(var e={},t=this.ancestors,r=0;r<t.length;r++){var o=t[r];for(var i in o.pageLifetimes)o.pageLifetimes[i]&&(e[i]||(e[i]=n.create("Page Lifetime Method")),e[i].add(o.pageLifetimes[i]))}return e},l.callDefinitionFilter=function(e){var t=e.definitionFilter,r=[];return e.behaviors instanceof Array&&e.behaviors.forEach((function(t){(t="string"==typeof t?l._list[t]:t)&&t.definitionFilter&&(r.push(t.definitionFilter),t.definitionFilter.call(null,e))})),"function"==typeof t?function(e){t(e,r)}:null},e.exports=l},"./exparser/src/class-list.js":(e,t,r)=>{var n=r("./exparser/src/global-options.js"),o=r("./exparser/src/observer.js"),i=function(){},a=/(~|\^+)?-?[_0-9a-z][-_0-9a-z]*/gi,s=null;i._setElementSystem=function(e){s=e,i._setElementSystem=null};var c=Object.prototype.hasOwnProperty;i.create=function(e,t){var r=new i;for(var n in r._prefix="",r._addOriginalClass=!1,r._alias=t,r._resolvedAlias={},t)r._resolvedAlias[n]="";return r._rawNames=[],r._elem=e,r._owner=null,r._prevGenNames="",r};var u=function(e){var t="",r=e._rawNames,n=e._prefix,o=e._owner?e._owner._resolvedAlias:null,i=e._addOriginalClass;n&&(n+="--");for(var a=0;a<r.length;a++){var s=r[a];if(a&&(t+=" "),o&&c.call(o,s))t+=o[s];else if("~"===s[0])t+=s.slice(1);else if("^"===s[0]){s=s.slice(1);for(var u=e._owner||null;"^"===s[0];)s=s.slice(1),u=u?u._owner:null;var l=u?u._prefix:"";l&&(l+="--"),t+=l+s}else i&&(t+=s+" "),t+=n+s}return t},l=function(e){var t=e._elem.__domElement;if(t){var r=u(e);if("dom"===n.documentBackend)r?t.setAttribute("class",r):t.removeAttribute("class");else if("custom"===n.documentBackend){if(e._prevGenNames===r)return;e._prevGenNames=r,t.setClass(r)}}},f=function(e){var t=e.classList;t instanceof i&&(t._alias&&p(t),l(t));for(var r=e.childNodes,n=0;n<r.length;n++)r[n]instanceof s&&f(r[n])},p=function(e){var t=e._owner;if(!t)return!1;var r=!1;for(var n in e._alias){var o=e._alias[n],i=[];if(o)for(var a=0;a<o.length;a++){var u=o[a];if(c.call(t._alias,u)){var l=t._resolvedAlias[u];i.push(l)}else{var p=e._prefix&&u?e._prefix+"--"+u:u;i.push(p)}}var d=i.join(" ");e._resolvedAlias[n]!==d&&(r=!0,e._resolvedAlias[n]=d)}r&&e._elem.shadowRoot instanceof s&&f(e._elem.shadowRoot)};i.prototype.toggle=function(e,t){var r=this._rawNames.indexOf(e);void 0===t&&(t=r<0);var n=!1;if(t?r<0&&(this._rawNames.push(e),l(this),n=!0):r>=0&&(this._rawNames.splice(r,1),l(this),n=!0),n){var i=this._elem;(i.__propObservers&&!i.__propObservers.empty||i.__subtreeObserversCount)&&o._callObservers(i,"__propObservers",{type:"properties",target:i,propertyName:"class"})}},i.prototype.contains=function(e){for(var t=this._rawNames,r=0;r<t.length;r++){var n=t[r];if("~"===n[0]){if(n.slice(1)===e)return!0}else if("^"===n[0]){for(var o=1;"^"===n[o];)o++;if(n.slice(o)===e)return!0}else if(n===e)return!0}return!1},i.prototype._setOwnerOptions=function(e,t,r){var n=this._prefix;this._prefix=t,n===(t||"")&&this._owner===e||(this._addOriginalClass=r,this._owner=e,this._alias&&p(this),l(this))},i.prototype._setAlias=function(e,t){var r=this._owner,n=String(t).match(a);this._alias[e]=n;var o=[];if(n)for(var i=0;i<n.length;i++){var s=n[i];r&&c.call(r._alias,s)?o.push(r._resolvedAlias[s]):o.push(this._prefix?this._prefix+"--"+s:s)}this._resolvedAlias[e]=o.join(" "),f(this._elem.shadowRoot)},i.prototype.setClassNames=function(e){e=null==e?"":String(e),this._rawNames=e.match(a)||[],l(this)},i.prototype.getClassNames=function(){return u(this)},i.prototype.getPrefix=function(){return this._prefix},i.prototype.getAddOriginalClass=function(){return this._addOriginalClass},i.prototype.getRawNames=function(){return this._rawNames},e.exports=i},"./exparser/src/component.js":(e,t,r)=>{var n=r("./exparser/src/func-arr.js"),o=r("./exparser/src/data-utils.js"),i=r("./exparser/src/data-group.js"),a=r("./exparser/src/events.js"),s=r("./exparser/src/behavior.js"),c=r("./exparser/src/element.js"),u=r("./exparser/src/native-node.js"),l=r("./exparser/src/observer.js"),f=r("./exparser/src/class-list.js"),p=r("./exparser/src/fake-dom-element.js"),d=r("./exparser/src/global-options.js"),h=r("./exparser/src/global-state.js"),_=r("./exparser/src/data-path.js"),m=a.addListenerToElement,v=_.parseSinglePath,y=o.deepCopy,g=function(){};g.prototype=Object.create(c.prototype,{constructor:{value:g,writable:!0,configurable:!0},data:{get:function(){return this.__dataProxy._data},set:function(e){var t=this.__dataProxy;for(var r in e)t.scheduleReplace([r],e[r]);t.doUpdates()},configurable:!0},$:{get:function(){return c._updateIdMap(this),this.__idCache},set:function(){}}});var b=function(){};b.prototype=Object.create(Object.prototype),a._setComponent(g);var w=null;g._setDefaultTemplateEngine=function(e){w=e,g._setDefaultTemplateEngine=null};i.setPropUpdater((function(e,t,r,o){var i=e[0],a=this.__propData[i];r=function(e,t,r,o,i){if(r)for(var a=0;a<r.length;a++)if(s.matchTypeWithValue(r[a],e))return e;return t===String?null==e?(n.hasGlobalWarningListeners()&&n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <String> but get null value. Use empty string instead.'),""):(n.hasGlobalWarningListeners()&&"object"==typeof e&&n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <String> but got object-typed value. Force converted.'),String(e)):t===Number?isFinite(e)?Number(e):(n.hasGlobalWarningListeners()&&("number"==typeof e?n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <Number> but got NaN or Infinity. Used 0 instead.'):n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <Number> but got non-number value. Used 0 instead.')),0):t===Boolean?!!e:t===Array?e instanceof Array?e:(n.hasGlobalWarningListeners()&&n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <Array> but got non-array value. Used empty array instead.'),[]):t===Object?"object"==typeof e?e:(n.hasGlobalWarningListeners()&&n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <Object> but got non-object value. Used null instead.'),null):void 0===e?null:e}(r,t.type,t.optionalTypes,this,i);var c=!t.availability||function(e,t,r,o){var i=[e.ownerShadowRoot?e.ownerShadowRoot.__wxHost.__componentOptions.domain:void 0,o?void 0:r];return!!n.safeCallback("Availablity Controller",t,e.__methodCaller,i,e)}(this,t.availability,r,o);if(!c)return n.hasGlobalWarningListeners()&&n.triggerWarning('the new value for property "'+i+'" in component "'+(this.is||"")+'" is currently not available. The value is not changed.'),a;if(t.filter){var u=n.safeCallback("Property Filter",t.filter,this.__methodCaller,o?[]:[r,a,e],this);void 0!==u&&(r=u)}return this.__domElement&&this.__componentOptions.reflectToAttributes&&this.__propPublic[i]&&function(e,t,r,n){if("dom"===d.documentBackend){if(n&&e.ownerShadowRoot){var o=e.ownerShadowRoot.__wxHost.__idPrefix;o&&(r=o+"--"+r)}var i=t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),a=typeof r;"boolean"===a?r?e.__domElement.setAttribute(i,""):e.__domElement.removeAttribute(i):"object"===a?e.__domElement.setAttribute(i,JSON.stringify(r)):e.__domElement.setAttribute(i,r)}}(this,i,r,t.reflectIdPrefix),r})),i.setPropObserver((function(e,t,r,o,i,a){if(o.observeAssignments||e!==t){var s=r[0];this.__propertyChangeListeners&&this.__propertyChangeListeners[s]&&!a&&n.safeCallback("Property Observer",this.__propertyChangeListeners[s],this.__methodCaller,[e],this),o.observer&&n.safeCallback("Property Observer",o.observer,this.__methodCaller,i?[]:[e,t,r],this),o.public&&(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&l._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:s})}}));var x=function(e,t,r){t.__relationLinks||(t.__relationLinks={});for(var n=t.__relationLinks[r]=[],o=0;o<e.length;o++)n.push(null)},S=function(e,t,r,o,i){for(var a=g.prototype.hasBehavior,u="parent"===o,l="shadowHost"===o,f=0;f<e.length;f++){var p=e[f],d=null;if(d="object"!=typeof p.target?s._list[p.target]:p.target){var h=t[f],_=null;if(!i)for(var m=l?r.ownerShadowRoot&&r.ownerShadowRoot.__wxHost:r.parentNode;m;m=l?m.ownerShadowRoot&&m.ownerShadowRoot.__wxHost:m.parentNode)if(c.isSelectable(m)){if(a.call(m,d)){var v=null;v=u?m.__relationMap.child:l?m.__relationMap.shadowContent:m.__relationMap.descendant;for(var y=0;y<v.length;y++){var b=v[y],w=null;if((w="object"!=typeof b.target?s._list[b.target]:b.target)&&a.call(r,w)){_={parent:m,relation:b};break}}}if(u||_)break}t[f]=_,!h||_&&h.parent===_.parent||(n.safeCallback("Relation Unlinked Callback",h.relation.unlinked,h.parent.__methodCaller,[r.__methodCaller],h.parent),n.safeCallback("Relation Unlinked Callback",p.unlinked,r.__methodCaller,[h.parent.__methodCaller],r)),!_||h&&h.parent===_.parent||(n.safeCallback("Relation Linked Callback",_.relation.linked,_.parent.__methodCaller,[r.__methodCaller],_.parent),n.safeCallback("Relation Linked Callback",p.linked,r.__methodCaller,[_.parent.__methodCaller],r)),h&&_&&h.parent===_.parent&&(n.safeCallback("Relation Link Changed Callback",_.relation.linkChanged,_.parent.__methodCaller,[r.__methodCaller],_.parent),n.safeCallback("Relation Link Changed Callback",p.linkChanged,r.__methodCaller,[_.parent.__methodCaller],r)),i||_||n.safeCallback("Relation Link Failed Callback",p.linkFailed,r.__methodCaller,[],r)}}},E=function(e,t,r){if(e instanceof c){var n=0,o=null;if(e instanceof g){for(e.__pageLifeTimeFuncs[t]&&e.__pageLifeTimeFuncs[t].call(e.__methodCaller,r||[]),o=e.childNodes,n=0;n<o.length;n++)E(o[n],t,r);e=e.shadowRoot}for(o=e.childNodes,n=0;n<o.length;n++)E(o[n],t,r)}};g._list={},g.register=function(e){var t=e.options||{},r=s.create(e),n=void 0!==t.classPrefix?t.classPrefix:d.classPrefix;null==n&&(n=r.is||"");var o=new b;return o._unprepared=r,o.is=e.is||"",o.behavior=r,o.protoFunc=null,o.props=null,o.template=null,o.innerEvents=null,o.generics=r.generics,o.placeholder=r.placeholder,o.initiator=r.initiator||null,o.options={availability:t.availability||d.availability,domain:t.domain||d.domain,writeOnly:!!(void 0!==t.writeOnly?t.writeOnly:d.writeOnly),allowInWriteOnly:!!(void 0!==t.allowInWriteOnly?t.allowInWriteOnly:d.allowInWriteOnly),classPrefix:n,styleScope:t.styleScope||d.styleScope,addGlobalClass:!!(void 0!==t.addGlobalClass?t.addGlobalClass:d.addGlobalClass),templateEngine:t.templateEngine||d.templateEngine||w,renderingMode:t.renderingMode||d.renderingMode,multipleSlots:!!(void 0!==t.multipleSlots?t.multipleSlots:d.multipleSlots),reflectToAttributes:!!(void 0!==t.reflectToAttributes?t.reflectToAttributes:d.reflectToAttributes),writeFieldsToNode:!!(void 0!==t.writeFieldsToNode?t.writeFieldsToNode:d.writeFieldsToNode),writeIdToDOM:!!(void 0!==t.writeIdToDOM?t.writeIdToDOM:d.writeIdToDOM),idPrefixGenerator:t.idPrefixGenerator||d.idPrefixGenerator,separateInnerData:!!(void 0!==t.separateInnerData?t.separateInnerData:d.separateInnerData),innerDataExclude:t.innerDataExclude||d.innerDataExclude,listenerChangeLifeTimes:!!(void 0!==t.listenerChangeLifeTimes?t.listenerChangeLifeTimes:d.listenerChangeLifeTimes),randomizeTagName:!!(void 0!==t.randomizeTagName?t.randomizeTagName:d.randomizeTagName),virtualHost:!!(void 0!==t.virtualHost?t.virtualHost:d.virtualHost)},r._unprepared||g.prepare(o),void 0!==e.is&&(g._list[r.is]=o),o},g.isPrepared=function(e){return!e._unprepared},g.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var r=e.options,o={};t._unprepared&&s.prepare(t),r.writeOnly&&(o.data={value:null});var a=e.props={};Object.keys(t.properties).forEach((function(e){var n=t.properties[e];a[e]={type:n.type,optionalTypes:n.optionalTypes,value:n.value,filter:"function"==typeof n.filter?n.filter:null==n.filter?null:t.methods[n.filter],observer:"function"==typeof n.observer?n.observer:null==n.observer?null:t.methods[n.observer],public:n.public,availability:n.availability,observeAssignments:n.observeAssignments,reflectIdPrefix:n.reflectIdPrefix},r.writeFieldsToNode&&(o[e]={enumerable:!0,get:function(){return this.__propData[e]},set:function(t){var r=this.__dataProxy;r.scheduleReplace([e],t),r.doUpdates()}})}));var c=function(){};e.protoFunc=c;var u=c.prototype=Object.create(g.prototype,o);if(u.is=e.is,u.__componentOptions=r,u.__using=t.using,e.dataGroupObserverTree=i._createObserverTree(a),t._addObserversToDataProxy(e.dataGroupObserverTree),u.__behavior=t,r.writeFieldsToNode)for(var l in t.methods)u[l]=t.methods[l];u.__lifeTimeFuncs=t._getAllLifeTimeFuncs(),u.__pageLifeTimeFuncs=t._getAllPageLifeTimeFuncs();var f=t.relations,p=u.__relationMap={};for(var d in f){var h=f[d],_=h.type;p[_]?p[_].push(h):p[_]=[h]}var m=[];p.parent&&m.push((function(e){S(this.__relationMap.parent,this.__relationLinks.parent,this,"parent","detached"===e)})),p.ancestor&&m.push((function(e){S(this.__relationMap.ancestor,this.__relationLinks.ancestor,this,"ancestor","detached"===e)})),p.shadowHost&&m.push((function(e){S(this.__relationMap.shadowHost,this.__relationLinks.shadowHost,this,"shadowHost","detached"===e)})),e.relationHandler=function(e){for(var t=0;t<m.length;t++)m[t].call(this,e)};var v={},y={},b=t.data,w="";for(w in b)y[w]=b[w];for(w in a){var x=a[w];n.hasGlobalWarningListeners()&&void 0!==y[w]&&n.triggerWarning('data field "'+w+'" is overwritten by property with the same name (when preparing "'+t.is+'").'),y[w]=x.value,v[w]=x.public}var E=y,T=r.separateInnerData,C=r.innerDataExclude;if(C){for(var A in E={},y)C.test(A)||(E[A]=y[A]);T||(y=E)}var O=r.templateEngine;e.template=O.create(t,y,E,r),u.__propPublic=v;var M=t._getAllListeners(),R=e.innerEvents=[];for(var P in M){for(var I=M[P],N=P.indexOf("."),D=P.slice(N+1),L=N<1?"":P.slice(0,N),F=[],k=0;k<I.length;k++){var B=I[k];"function"!=typeof B&&(B=null==B?null:t.methods[B]),F.push(B)}R.push({id:L,name:D,funcs:F})}}};var T=1,C=Object.prototype.hasOwnProperty,A=function(e,t){return function(r){return e.call(t.__methodCaller,r,t)}},O=g._advancedCreate=function(e,t,r,o,a,s,u){var l=t;l._unprepared&&g.prepare(l);var _=l.options,v=!_.availability||function(e,t,r){var o=[t?t.__wxHost.__componentOptions.domain:void 0];return!!n.safeCallback("Availablity Controller",r,e,o)}(l,r,_.availability);v||(n.hasGlobalWarningListeners()&&n.triggerWarning('the component "'+(l.is||"")+'" is currently not available. The default component is used instead.'),l=g._list[""]);var b=new(0,l.protoFunc);_.idPrefixGenerator&&(b.__idPrefix=String(_.idPrefixGenerator.call(b))),b.__placeholder=function(e,t){var r={};for(var n in t)r[n]=t[n];for(var n in e)r[n]=e[n];return r}(s,l.placeholder);var w=l.generics;b.__generics=w?function(e,t,r){var o={};for(var i in e){var a=e[i],s=t[i];"object"!=typeof s&&C.call(g._list,s)&&(s=g._list[s]),"object"!=typeof s&&null!=a.default&&(s=g._list[a.default]),n.hasGlobalWarningListeners()&&(s||n.triggerWarning('generic "'+i+'" is not instantiated. The default component is used instead.')),s&&(o[i]=s)}if(n.hasGlobalWarningListeners())for(var c in t)void 0===e[c]&&n.triggerWarning('generic "'+c+'" is not defined. It will be ignored.');return o}(w,a||{}):{};var S=null,E=d.documentBackend;if(_.virtualHost){S=null;"dom"!==E&&"custom"!==E||(S=void 0);var O=null;"custom"===E&&(O=void 0===o?d.customContext:o),c.initialize(b,S,r,O),b.__virtual=!0}else if("dom"===E)S=h.backendExtractedDefault?new p(e):document.createElement(e),c.initialize(b,S,r,null);else if("custom"===E){(O=void 0===o?d.customContext:o)&&(S=O.createElement("empty",e)),c.initialize(b,S,r,O)}else c.initialize(b,null,r,null);var M=0,R=b.__externalClassAlias={};if(l.behavior.externalClasses){var P=l.behavior.externalClasses;for(M=0;M<P.length;M++)R[P[M]]=null}if(b.classList=f.create(b,R),r){var I=r.__wxHost;S&&"custom"===E&&I.__componentOptions.styleScope&&S.setStyleScope(I.__componentOptions.styleScope),b.classList._setOwnerOptions(I.classList,I.__componentOptions.classPrefix,I.__componentOptions.addGlobalClass),d.writeExtraInfoToAttr&&S&&S.setAttribute("exparser:info-class-prefix",I.__componentOptions.classPrefix&&I.__componentOptions.classPrefix+"--")}"dom"===E&&d.writeExtraInfoToAttr&&S&&(b.__componentInstanceId=T++,S.setAttribute("exparser:info-component-id",b.__componentInstanceId));var N=b.__templateInstance=l.template.createInstance(b,u);b.__propData=N.data;var D=_.separateInnerData;b.__innerData=D?y(b.__propData):null;var L=_.innerDataExclude;if(D&&L){var F={};for(var k in b.__innerData)L.test(k)||(F[k]=b.__innerData[k]);b.__innerData=F}b.__dataProxy=i._advancedCreate(b,b.__propData,b.__innerData,L,l.dataGroupObserverTree,(function(e,t,r,n){b.__templateInstance.updateValues(b,D?b.__innerData:b.__propData,e,t,r,n)})),N.beforeMergeValues&&b.__dataProxy.setBeforeMergeCb((function(e,t,r){b.__templateInstance.beforeMergeValues(e,t,r)})),N.beforeUpdateValues&&b.__dataProxy.setBeforeUpdateCb((function(e){b.__templateInstance.beforeUpdateValues(b,D?b.__innerData:b.__propData,e)})),_.writeOnly&&b.__dataProxy.setHidingValue(!0),b.__idCacheDirty=!1,b.__idCache=N.idMap,null===N.slots[""]&&(N.slots[""]=S),l.options.multipleSlots?b.__slots=N.slots:(b.__singleSlot=N.slots[""]||null,b.__singleSlot&&(b.__singleSlot.__wxSlotChildren=b.childNodes)),N.shadowRoot instanceof c?(b.shadowRoot=N.shadowRoot,c._attachShadowRoot(N.shadowRoot)):S instanceof p?(b.shadowRoot=S,S.__wxHost=b,b.__domElement.asShadowRoot=N.shadowRoot,b.__wxSlotChildren=[S],S.__wxSlotParent=b):(b.shadowRoot=S,S.__wxHost=b,""!==d.documentBackend&&b.__domElement.appendChild(N.shadowRoot),b.__wxSlotChildren=[S],S.__wxSlotParent=b);for(var B=N.listeners,j=0;j<B.length;j++){var U=B[j];m(U.target,U.name,A(U.func,b))}var G=l.innerEvents;for(M=0;M<G.length;M++){var V=G[M],W=V.id?"this"===V.id?b:b.__idCache[V.id]:b.shadowRoot;if(W)for(var z=V.name,H=V.funcs,X=0;X<H.length;X++)m(W,z,A(H[X],b))}var K=b.__relationMap;return K.parent&&(x(K.parent,b,"parent"),b.__relationHandler=l.relationHandler),K.ancestor&&(x(K.ancestor,b,"ancestor"),b.__relationHandler=l.relationHandler),K.shadowHost&&(x(K.shadowHost,b,"shadowHost"),b.__relationHandler=l.relationHandler),b.__propertyChangeListeners=null,"custom"===E&&S&&S.associateComponent(b),l.initiator&&n.safeCallback("Component Initiator",l.initiator,b.__methodCaller,[],b),b.__lifeTimeFuncs.created.call(b.__methodCaller,[],b),b};g.createWithGenericsAndContext=function(e,t,r,o,i){if("object"==typeof e)return O(e.is,e,null,o,r,null,i);if(e){if(!t&&!C.call(g._list,e)){if(u.shouldBeNativeNode(e))return u._advancedCreate(e,null,o);n.hasGlobalWarningListeners()&&"virtual"!==e&&n.triggerWarning('component "'+e+'" is not found. The default component is used instead.')}return O(e.toLowerCase(),t||C.call(g._list,e)&&g._list[e]||g._list[""],null,o,r,null,i)}return O("virtual",g._list[""],null,o,r,null,i)},g.createWithGenerics=function(e,t,r,n){return g.createWithGenericsAndContext(e,t,r,void 0,n)},g.createWithContext=function(e,t,r,n){return g.createWithGenericsAndContext(e,t,null,r,n)},g.create=function(e,t,r){return g.createWithGenerics(e,t,null,r)},g.listProperties=function(e){var t=[];for(var r in e.__propPublic)void 0!==e.__propPublic[r]&&t.push(r);return t},g.listPublicProperties=function(e){var t=[];for(var r in e.__propPublic)!0===e.__propPublic[r]&&t.push(r);return t},g.hasProperty=function(e,t){return void 0!==e.__propPublic[t]},g.hasPublicProperty=function(e,t){return!0===e.__propPublic[t]},g.getMethodsFromDef=function(e){return e.behavior._unprepared&&s.prepare(e.behavior),e.behavior.methods},g.getMethod=function(e,t){return e.__behavior.methods[t]},g.getComponentOptions=function(e){return e.__componentOptions},g.prototype.triggerLifeTime=function(e,t){this.__lifeTimeFuncs[e].call(this.__methodCaller,t||[])},g.prototype.triggerPageLifeTime=function(e,t){E(this,e,t)},g.prototype.hasBehavior=function(e){return"object"!=typeof e&&Object.prototype.hasOwnProperty.call(this.__using,e)&&(e=this.__using[e]),!!this.__behavior&&this.__behavior.hasBehavior(e)},g.prototype.getRootBehavior=function(){return this.__behavior},g.prototype.getPlaceholder=function(e){return this.__placeholder[e]},g.prototype.getRelationNodes=function(e){var t=this.__behavior.relations[e];if(!t)return null;if("parent"===t.type||"ancestor"===t.type||"shadowHost"===t.type){for(var r=this.__relationMap[t.type],n=0;n<r.length&&r[n]!==t;n++);return this.__relationLinks[t.type][n]?[this.__relationLinks[t.type][n].parent]:[]}return function(e,t){var r=[],n=t.type,o="child"===n,i="shadowContent"===n,a=function(n){for(var s=n.childNodes,u=0;u<s.length;u++){var l=s[u];if(l instanceof c)if(c.isSelectable(l)){if(l.__relationLinks){var f=null;if(f=o?l.__relationLinks.parent:i?l.__relationLinks.shadowHost:l.__relationLinks.ancestor)for(var p=0;p<f.length;p++){var d=f[p];if(d&&d.parent===e&&d.relation===t){r.push(l);break}}}i&&l instanceof g&&a(l.shadowRoot),o||a(l)}else a(l)}};return a(i?e.shadowRoot:e),r}(this,t)},g.prototype.hasExternalClass=function(e){return C.call(this.__externalClassAlias,e)},g.prototype.setExternalClass=function(e,t){this.classList._setAlias(e,t)},g.prototype.setPropertyChangeListener=function(e,t){this.__propertyChangeListeners||(this.__propertyChangeListeners={}),this.__propertyChangeListeners[e]=t},g.prototype.replaceDataOnPath=function(e,t){this.__dataProxy.scheduleReplace(e,t)},g.prototype.isInnerDataExcluded=function(e){var t=this.__componentOptions.innerDataExclude;return!!t&&t.test(e)},g.getInnerData=function(e){return e.__innerData},g.getDataProxy=function(e){return e.__dataProxy},g.replaceWholeData=function(e,t,r){e.__propData=t,e.__dataProxy.replaceWholeData(t,r)},g.prototype.applyDataUpdates=function(){this.__dataProxy.doUpdates()},g.prototype.setData=function(e){var t=this.__dataProxy;for(var r in e)t.scheduleReplace(v(r),e[r]);t.doUpdates()},e.exports=g},"./exparser/src/data-group.js":(e,t,r)=>{var n=r("./exparser/src/func-arr.js"),o=r("./exparser/src/data-utils.js"),i=null,a=null,s=Object.prototype.hasOwnProperty,c=o.deepCopy,u=function(e,t,r,n,o,i){this._data=t,this._innerData=r,this._innerDataExclude=n,this._comp=e,this._updateCb=i,this._beforeMergeCb=null,this._beforeUpdateCb=null,this._hidingValue=!1,this._changes=[],this._doingUpdates=null,this._propFields=o._propFields,this._observers=o._observers,this._observerTree=o._observerTree,this._relatedObserverTreeObj=o,this._observerStatus=[]};u._advancedCreate=function(e,t,r,n,o,i){return new u(e,t,r,n,o,i)};var l=function(e){this._propFields=e,this._observerIdInc=0,this._observers=[],this._observerTree={}};u._createObserverTree=function(e){return new l(e)},u.create=function(e,t,r){var n=new l({});return new u({__methodCaller:e},t,null,null,n,r)},u.setPropUpdater=function(e){i=e},u.setPropObserver=function(e){a=e},u.prototype.replaceWholeData=function(e,t){this._data=e},u.prototype.setHidingValue=function(e){this._hidingValue=!!e},u.prototype.setBeforeMergeCb=function(e){this._beforeMergeCb=e},u.prototype.setBeforeUpdateCb=function(e){this._beforeUpdateCb=e};var f=function(e,t,r,o){for(var i=e,a=0;a<t.length;a++){var s=t[a];if("**"===s)return n.hasGlobalWarningListeners()&&a!==t.length-1&&n.triggerWarning('"**" can only be used at the end of a path descriptor (in "'+o.is+'").'),i["**"]||(i["**"]=[]),void i["**"].push(r);i[s]||(i[s]={}),i=i[s]}i["~"]||(i["~"]=[]),i["~"].push(r)},p=function(e,t,r,n){for(var o=0;o<t.length;o++)f(e,t[o],r,n)},d=function(e,t,r){for(var n=e,o=0,i="";o<t.length&&"**"!==(i=t[o]);o++){if(!n)return;n=n[i]}var a="**"===i?n["**"]:n["~"];if(a)for(o=0;o<a.length;o++)if(a[o]===r){a.splice(o,1);break}},h=function(e,t,r){for(var n=0;n<t.length;n++)d(e,t[n],r)};l.prototype.addObserver=function(e,t,r){var n=this._observerIdInc++;return this._observers[n]={pathObj:t,func:e},p(this._observerTree,t,n,r),n},l.prototype.removeObserver=function(e){var t=this._observers[e];h(this._observerTree,t.pathObj,e),this._observers[e]=null},l.prototype.moveObserver=function(e,t){var r=this._observers[e];h(this._observerTree,r.pathObj,e),r.pathObj=t,p(this._observerTree,t,e)},u.prototype.getObserverTree=function(){return this._relatedObserverTreeObj};var _=function(e,t,r){for(var o=[],i=r.pathObj,a=0;a<i.length;a++){for(var s=i[a],c=t,u=0;u<s.length;u++){var l=s[u];if("**"===l)break;if("object"!=typeof c){c=void 0;break}c=c[l]}o[a]=c}n.safeCallback("Data Observer",r.func,e.__methodCaller,o,e)},m=function(e,t){var r=null,n=0;for(var o in e)if("~"!==o)if("**"!==o)m(e[o],t);else for(r=e["**"],n=0;n<r.length;n++)t[r[n]]=!0;else for(r=e["~"],n=0;n<r.length;n++)t[r[n]]=!0},v=function(e,t,r){for(var n=e,o=0;o<r.length;o++){if(n["**"])for(var i=n["**"],a=0;a<i.length;a++){t[i[a]]=!0}var c=r[o];if("number"==typeof c){if(!s.call(n,c)){n=null;break}}else if(!/^[_a-zA-Z]/.test(c)||!s.call(n,c)){n=null;break}n=n[c]}n&&m(n,t)},y=function(e,t,r,n,o){for(var i=0;i<e.length;i++){var a=e[i],s=t[i];s&&(s&&(t[i]=!1,_(r,o?void 0:n,a)))}};u.prototype.scheduleReplace=function(e,t,r){this._changes.push([e,t,r])},u.prototype.setChanges=function(e){this._changes=e},u.prototype.getChanges=function(){return this._changes},u.prototype.doUpdates=function(e,t){var r=this._propFields,n=this._comp,o=this._hidingValue,u=this._innerDataExclude,l=!!this._doingUpdates,f=this._relatedObserverTreeObj._observerIdInc,p=null,d=null,h=null;f?(l||(this._doingUpdates={changedPaths:[],changedValues:[],combinedChanges:[],changesTotal:0}),p=this._doingUpdates.changedPaths,d=this._doingUpdates.changedValues,h=this._doingUpdates.combinedChanges):(p=[],d=[],h=[]);var _=this._changes;this._changes=[];var m=[];this._beforeMergeCb&&this._beforeMergeCb(_,m,e);for(var g=0;g<_.length;g++){var b=_[g],w=b[0],x=b[1],S=x,E=void 0,T=w[0],C=!!u&&u.test(T),A=r[T];if(A&&1===w.length)E=this._data[T],x=i.call(this._comp,w,A,x,this._hidingValue),C||(this._innerData?(S=c(x),m[g]||(this._innerData[T]=S)):S=x,b[1]=S),C&&!this._innerData||(this._data[T]=x);else{var O=this._data,M=T,R=null,P=1;if(!C||this._innerData){for(;P<w.length;P++)"number"==typeof(R=w[P])&&isFinite(R)?s.call(O,M)&&O[M]instanceof Array||(O[M]=[]):(!s.call(O,M)||null===O[M]||"object"!=typeof O[M]||O[M]instanceof Array)&&(O[M]={}),O=O[M],M=R;O[M]=x}if(this._innerData&&(O=this._innerData,M=T,!C)){for(P=1;P<w.length;P++)"number"==typeof(R=w[P])&&isFinite(R)?s.call(O,M)&&O[M]instanceof Array||(O[M]=[]):(!s.call(O,M)||null===O[M]||"object"!=typeof O[M]||O[M]instanceof Array)&&(O[M]={}),O=O[M],M=R;S=c(x),m[g]||(O[M]=S),b[1]=S}}v(this._observerTree,this._observerStatus,w),C||(p.push(w),d.push([S,E,x]),h.push(b)),f&&(this._doingUpdates.changesTotal+=1)}if(!l){if(this._beforeUpdateCb&&this._beforeUpdateCb(e),f){var I=0;do{I=this._doingUpdates.changesTotal,y(this._observers,this._observerStatus,n,this._data,o)}while(I!==this._doingUpdates.changesTotal);this._doingUpdates=null}this._updateCb(p,d,h,e);for(var N=0;N<d.length;N++){var D=d[N];if(D){var L=p[N],F=r[L[0]];F&&a.call(n,D[2],D[1],L,F,o,t)}}}},e.exports=u},"./exparser/src/data-path.js":(e,t,r)=>{var n=r("./exparser/src/func-arr.js"),o=function(e){for(var t=e.str;e.cur<t.length;){var r=t[e.cur];if(" "!==r&&"\n"!==r&&"\r"!==r&&"\t"!==r&&"\f"!==r)break;e.cur+=1}return e.cur<t.length},i=function(e){for(var t=e.str,r="";e.cur<t.length;){var n=t[e.cur];if(!(n>="0"&&n<="9"))break;r+=n,e.cur+=1}if(!r)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (illegal index)"));return parseInt(r,10)},a=function(e){for(var t=e.str,r="";e.cur<t.length;){var n=t[e.cur];if("\\"===n)if(e.cur+1===t.length);else r+=t[e.cur+1],e.cur+=1;else if(/^[_a-zA-Z]$/.test(n))r+=n;else{if(!(n>="0"&&n<="9"))break;if(""===r)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (field name cannot start with digits)"));r+=n}e.cur+=1}return r},s=function(e){for(var t=e.str,r="";e.cur<t.length;){var n=t[e.cur];if("\\"===n)if(e.cur+1===t.length)r+="\\",e.cur+=1;else{var o=t[e.cur+1];"."===o||"["===o||"]"===o||"\\"===o?(r+=o,e.cur+=2):(r+="\\",e.cur+=1)}else{if("."===n||"["===n)break;r+=n,e.cur+=1}}return r},c=function(e){var t=e.str;if(o(e),"*"===t[e.cur]&&"*"===t[e.cur+1])return e.cur+=2,["**"];var r=a(e);if(!r)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (first field name illegal)"));for(var n=[r];e.cur<t.length&&o(e);){var s=t[e.cur];if("."===s){if(e.cur+=1,o(e),"*"===t[e.cur]&&"*"===t[e.cur+1]){n.push("**"),e.cur+=2;break}var c=a(e);if(!c)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (field name illegal)"));n.push(c)}else{if("["!==s)break;e.cur+=1,o(e);var u=i(e);if(o(e),"]"!==t[e.cur])throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (illegal index)"));e.cur+=1,n.push(u)}}return n};t.parseSinglePath=function(e){var t=function(e){for(var t=e.str,r=[];e.cur<t.length;){var n=t[e.cur];if("."===n){e.cur+=1;var o=s(e);o&&r.push(o)}else if("["===n){e.cur+=1;var a=i(e);if("]"!==t[e.cur]&&e.cur<t.length)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (illegal index)"));e.cur+=1,r.push(a)}else{var c=s(e);c&&r.push(c)}}return r}({str:e,cur:0});return t},t.parseMultiPaths=function(e){try{var t={str:e,cur:0},r=function(e){var t=[];for(t.push(c(e)),o(e);","===e.str[e.cur];)e.cur+=1,t.push(c(e)),o(e);return t}(t);if(t.cur!==e.length)throw new Error('data path descriptor "'.concat(e,'" is illegal at char ').concat(t.cur));return r}catch(e){return n.triggerWarning(e.message),[]}}},"./exparser/src/data-utils.js":(e,t)=>{var r=Object.prototype.hasOwnProperty,n=function(e,t){var o=typeof e;if("object"===o&&null!==e){var i=t?t.get(e):void 0;if(void 0!==i)return i;if(e instanceof Array){i=[],t&&t.set(e,i);for(var a=0;a<e.length;a++)i[a]=n(e[a],t)}else for(var s in i={},t&&t.set(e,i),e)r.call(e,s)&&(i[s]=n(e[s],t));return i}if("symbol"!==o)return e};t.deepCopy=function(e,t){var r=t&&"undefined"!=typeof WeakMap?new WeakMap:null;return n(e,r)}},"./exparser/src/element-iterator.js":(e,t,r)=>{var n=r("./exparser/src/element.js"),o=r("./exparser/src/text-node.js"),i=function(){};i.create=function(e,t,r){var a=new i;if(!(e instanceof n||e instanceof o))throw new Error("ElementIterator can only be used for exparser.Element or exparser.TextNode");a._elem=e,a._elemTypeLimit=r||n;var s=t.split("-");if("shadow"===s[0])a._composed=!1;else{if("composed"!==s[0])throw new Error("Unrecognized iterator type: "+t);a._composed=!0}if("ancestors"===s[1])a._relation="ancestors",a._order=0;else{if("descendants"!==s[1])throw new Error("Unrecognized iterator type: "+t);if(a._relation="descendants","root"!==s[2])throw new Error("Unrecognized iterator type: "+t);if("first"===s[3])a._order=-1;else{if("last"!==s[3])throw new Error("Unrecognized iterator type: "+t);a._order=1}}return a};var a=function(e,t,r,n,o){if(n<0&&e instanceof t&&!1===o(e))return!1;var i=r&&e.__wxSlotChildren||e.childNodes;if(i)for(var s=0;s<i.length;s++)if(!1===a(i[s],t,r,n,o))return!1;return!(n>0&&e instanceof t&&!1===o(e))};i.prototype.forEach=function(e){return"ancestors"===this._relation?function(e,t,r,n){for(;e;e=r&&(e.__wxSlotParent||e.__wxHost)||e.parentNode)if(e instanceof t&&!1===n(e))return!1;return!0}(this._elem,this._elemTypeLimit,this._composed,e):a(this._elem,this._elemTypeLimit,this._composed,this._order,e)},e.exports=i},"./exparser/src/element.js":(e,t,r)=>{var n=r("./exparser/src/func-arr.js"),o=r("./exparser/src/events.js"),i=r("./exparser/src/observer.js"),a=r("./exparser/src/class-list.js"),s=r("./exparser/src/text-node.js"),c=r("./exparser/src/fake-dom-element.js"),u=r("./exparser/src/global-options.js"),l=r("./exparser/src/global-state.js"),f=function(e){p(this,e||null)};f.prototype=Object.create(Object.prototype,{constructor:{value:f,writable:!0,configurable:!0},id:{get:function(){return this.__id},set:function(e){var t=String(e);if(this.__id!==t){if(this.__id=t,this.ownerShadowRoot){var r=this.ownerShadowRoot.__wxHost;if(r.__idCacheDirty=!0,this.__domElement&&r.__componentOptions.writeIdToDOM){var n=t;r.__idPrefix&&(n=r.__idPrefix+"--"+t),"dom"===u.documentBackend?this.__domElement.id=n:"custom"===u.documentBackend&&this.__domElement.setId(n)}}u.writeExtraInfoToAttr&&this.__domElement&&"dom"===u.documentBackend&&this.__domElement.setAttribute("exparser:info-attr-id",t),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"id"})}},configurable:!0},slot:{get:function(){return this.__slot},set:function(e){e=String(e),this.__slot!==e&&(this.__inheritSlots?n.hasGlobalWarningListeners()&&n.triggerWarning('slots-inherited nodes do not support "slot" attribute (in component "'+this.is+'").'):(this.__slot=e,b(this),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"slot"})))},configurable:!0},attributes:{get:function(){var e=[];if(!this.__attributes)return e;for(var t in this.__attributes)e.push({name:t,value:this.__attributes[t]});return e},set:function(){},configurable:!0},class:{get:function(){return this.classList.getClassNames()},set:function(e){this.classList&&this.classList.setClassNames(e),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"class"})},configurable:!0},style:{get:function(){return this.__domElement?this.__domElement.style:null},set:function(e){return A.call(this,e)},configurable:!0}}),o._setElementSystem(f),a._setElementSystem(f);var p=f.initialize=function(e,t,r,n){e.__id="",e.__slot="",e.__virtual=!1,e.__inheritSlots=!1,e.__attributes=null,e.__marks=null,e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=r,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendContext=n,e.__backendExtracted=l.backendExtractedDefault,e.__domElement=t,e.__autoDestroy=!0,e.$$=t,t&&(t.__wxElement=e)};f._clone=function(e,t,r,n){if(e.__id=t.__id,e.__slot=t.__slot,e.__virtual=t.__virtual,e.__inheritSlots=t.__inheritSlots,e.__marks=t.__marks?{}:null,t.__marks)for(var o in t.__marks)e.__marks[o]=t.__marks[o];for(var i in e.__attributes=Object.create(null),t.__attributes)e.__attributes[i]=t.__attributes[i];e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=n,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendContext=t.__backendContext,e.__backendExtracted=l.backendExtractedDefault,e.__domElement=r,e.$$=r,r&&(r.__wxElement=e)},f.prototype.setAutoDestroy=function(e){this.__autoDestroy=!!e},f.prototype.destroy=function(){"custom"===u.documentBackend&&this.__domElement&&(this.__domElement.release(),this.__domElement=null)};var d=function(e){if(!e.parentNode||e.parentNode.__attached){var t=function(e){if(e instanceof f){e.__attached=!0,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.attached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("attached"),e.__attachedObservers&&!e.__attachedObservers.empty&&i._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"attached"}),e.shadowRoot instanceof f&&t(e.shadowRoot);for(var r=e.childNodes,n=0;n<r.length;n++)t(r[n])}};t(e)}},h=function(e){if(e.__attached){var t=function(e){if(e instanceof f){for(var r=e.childNodes,n=0;n<r.length;n++)t(r[n]);e.shadowRoot instanceof f&&t(e.shadowRoot),e.__attached=!1,e.__autoDestroy&&e.destroy(),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.detached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("detached"),e.__attachedObservers&&!e.__attachedObservers.empty&&i._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"detached"})}else e.__autoDestroy&&e.destroy()};t(e)}},_=function(e,t,r){if(e.__childObservers&&!e.__childObservers.empty||e.__subtreeObserversCount){var n=null,o=[r];n="add"===t?{type:"childList",target:e,addedNodes:o}:"remove"===t?{type:"childList",target:e,removedNodes:o}:{type:"childList",target:e,addedNodes:o,removedNodes:o},i._callObservers(e,"__childObservers",n)}},m=function(e,t){if(e instanceof f&&(!t.__wxHost.__idCacheDirty||!t.__slotCacheDirty)){var r=function(e){e.__id&&(t.__wxHost.__idCacheDirty=!0),void 0!==e.__slotName&&(t.__slotCacheDirty=!0);for(var n=e.childNodes,o=0;o<n.length;o++){var i=n[o];i instanceof f&&r(i)}};r(e)}};f._updateIdMap=function(e){var t=e.shadowRoot;if(e.__idCacheDirty){e.__idCacheDirty=!1;var r=e.__idCache=Object.create(null),n=function(e){e.__id&&(r[e.__id]||(r[e.__id]=e));for(var t=e.childNodes,o=0;o<t.length;o++)t[o]instanceof f&&n(t[o])};n(t)}};var v=function(e){if(e.__hostAssociated&&e.__slotCacheDirty){e.__slotCacheDirty=!1;var t=e.__wxHost,r=null,o=Object.create(null);r=void 0!==t.__singleSlot?{"":t.__singleSlot}:t.__slots;var i=function(e){void 0!==e.__slotName&&(o[e.__slotName]?n.hasGlobalWarningListeners()&&n.triggerWarning('More than one slot named "'+e.__slotName+'" are found inside a single component instance (in component "'+t.is+'"). The first one was accepted.'):o[e.__slotName]=e);for(var r=e.childNodes,a=0;a<r.length;a++)r[a]instanceof f&&i(r[a])};i(e),void 0!==t.__singleSlot?t.__singleSlot!==o[""]&&(o[""]&&(o[""].__wxSlotChildren=t.childNodes),y(t,o,r,!0),t.__singleSlot&&(t.__singleSlot.__wxSlotChildren=[]),t.__singleSlot=o[""]||null):(y(t,o,r,!1),t.__slots=o)}},y=function(e,t,r,n){var o=e.childNodes,i=0;if(n){var a=t[""];if(a)for(;i<o.length;i++)w(a,o[i],null,!1,!1,!1,-1);else if(a=r[""])for(;i<o.length;i++)w(a,null,o[i],!0,!1,!1,i)}else{var s=function(e){for(var n=0;n<e.length;n++){var o=e[n],i=o.__slot||"",a=t[i],c=r[i];a!==c&&(a?w(a,o,null,!1,!0,!0):w(c,null,o,!0,!0,!0)),o.__inheritSlots&&s(o.childNodes)}};s(o)}},g=function(e,t,r,n){for(var o=function(e,t,n){var i=e.childNodes,a=0;for(t&&(a=i.indexOf(t)+(n?0:1));a<i.length;a++){var s=i[a];if(s.__slot===r)return s;if(s.__inheritSlots){var c=o(s,null,!1);if(c)return c}}return null};t!==e;t=t.parentNode){var i=o(t.parentNode,t,n);if(i)return i;n=!1}return null},b=function(e){for(var t=e.parentNode;t&&t.__inheritSlots;)t=t.parentNode;if(t&&void 0===t.__singleSlot){var r=e.__slot||"",n=t.__slots[r];if(n){var o=g(t,e,r,!1);w(n,e,o,!1,!0,!0)}else(n=e.__wxSlotParent)&&w(n,null,e,!0,!0,!0)}},w=function(e,t,r,n,o,i,a){if(n&&(r.__wxSlotParent=null),o&&(a=e.__wxSlotChildren.indexOf(r)),t){var s=t.__wxSlotParent;if(t.__wxSlotParent=e,s&&i){var c=s.__wxSlotChildren.indexOf(t);s.__wxSlotChildren.splice(c,1),s===e&&c<a&&a--}}var l=!1;(t&&t.__backendExtracted||r&&r.__backendExtracted)&&(l=!0),"dom"===u.documentBackend?l||function(e,t,r,n,o){var i=e;if(i instanceof f){for(;i.__virtual;){var a=i.__wxSlotParent;if(!a){i=null;break}if(t&&!r){var s=a.__wxSlotChildren.indexOf(i);r=a.__wxSlotChildren[s+1]}i=a}i instanceof f&&(i=i.__domElement)}if(i){var c=n,u=null,l=null;if(t)if(t.__virtual){var p=document.createDocumentFragment(),d=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];r.__virtual?d(r):p.appendChild(r.__domElement)}};d(t),u=p}else u=t.__domElement;if(r)if(r.__virtual){var h=e,_=0;if(n){var m=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];r.__virtual?m(r):i.removeChild(r.__domElement)}};m(r),c=!1,_=o+1}else h=r.__wxSlotParent,_=r===t?o:h.__wxSlotChildren.indexOf(r);if(t){var v=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];if(!r.__virtual)return r;var n=v(r,0);if(n)return n}};r=null;for(var y=h;!(r=v(y,_))&&y.__virtual;y=y.__wxSlotParent)_=y.__wxSlotParent.__wxSlotChildren.indexOf(y)+1;r&&(l=r.__domElement)}}else l=r.__domElement;c?u?i.replaceChild(u,l):i.removeChild(l):u&&(l?i.insertBefore(u,l):i.appendChild(u))}else if(t&&t.__wxSlotParent){var g=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++)g(e.__wxSlotChildren[t]);else{var r=e.__domElement;r&&r.parentNode&&r.parentNode.removeChild(r)}};g(t)}}(e,t,r,n,a):"custom"===u.documentBackend&&e.__backendContext&&function(e,t,r,n,o){var i=e;if(i instanceof f){for(;i.__virtual;){var a=i.__wxSlotParent;if(!a){i=null;break}if(t&&!r){var s=a.__wxSlotChildren.indexOf(i);r=a.__wxSlotChildren[s+1]}i=a}i instanceof f&&(i=i.__domElement)}if(i)if(!t||r||t.__virtual){var c=e.__backendContext.createElement("fragment",""),u=0,l=-1;if(t){var p=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];p(r)}else c.appendChild(e.__domElement)};p(t)}if(r){var d=e,h=0,_=null;if(n){var m=function(e){if(e.__virtual){for(var t=0,r=0;r<e.__wxSlotChildren.length;r++)t+=m(e.__wxSlotChildren[r]);return t}return _||(_=e),1};u=m(r),h=o+1}else d=r.__wxSlotParent,h=r===t?o:d.__wxSlotChildren.indexOf(r);if(t&&!_)for(var v=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];if(!r.__virtual)return r;var n=v(r,0);if(n)return n}return null},y=d;!(_=v(y,h))&&y.__virtual;y=y.__wxSlotParent)h=y.__wxSlotParent.__wxSlotChildren.indexOf(y)+1;_&&(l=i.findChildPosition(_.__domElement))}i.splice(l,u,c),c.release()}else i.appendChild(t.__domElement);else if(t&&t.__wxSlotParent){var g=t.__backendContext.createElement("fragment",""),b=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++)b(e.__wxSlotChildren[t]);else{var r=e.__domElement;g.appendChild(r)}};b(t),g.release()}}(e,t,r,n,a),u.writeExtraInfoToAttr&&"dom"===u.documentBackend&&(n&&r instanceof f&&r.__domElement&&r.__domElement.removeAttribute("exparser:info-in-slot-of"),t instanceof f&&t.__domElement&&(void 0!==e.__slotName&&e.ownerShadowRoot?t.__domElement.setAttribute("exparser:info-in-slot-of",e.ownerShadowRoot.__wxHost.__componentInstanceId):t.__domElement.removeAttribute("exparser:info-in-slot-of"))),o&&(-1===a&&(a=e.__wxSlotChildren.length),t?e.__wxSlotChildren.splice(a,n?1:0,t):e.__wxSlotChildren.splice(a,n?1:0))},x=function(e,t){for(var r=e.childNodes,n=0;n<r.length;n++){var o=r[n];t(e,o),o.__inheritSlots&&x(o,t)}},S=f.insertChildToElement=function(e,t,r,n){if(void 0!==e.__slotName)return!1;var o=r>=0?e.childNodes[r]:null;n&&t===o&&(n=!1);var a=null,s=e,c=e;if(t){a=t.parentNode,t.parentNode=e;var u=e.__subtreeObserversCount;if(a){var l=a.childNodes.indexOf(t);a.childNodes.splice(l,1),a===e&&l<r&&r--,u-=a.__subtreeObserversCount}u&&i._updateSubtreeCaches(t,u)}for(var p=e;p&&p.__inheritSlots;)p=p.parentNode;for(var y=!p||!p.__slots,b=!y||e.__inheritSlots,S=a;S&&S.__inheritSlots;)S=S.parentNode;var E=!S||!S.__slots,T=!E||a&&a.__inheritSlots;if(y)void 0!==e.__singleSlot&&(s=c=e.__singleSlot),s?w(s,t,o,n,b,T,r):t&&t.__wxSlotParent&&w(t.__wxSlotParent,null,t,!0,T,!1),t&&!E&&t.__inheritSlots&&x(t,(function(e,t){w(e,t,null,!1,!0,!0,-1)}));else{var C="";if(t&&(C=t.__slot||"",s=p.__slots[C]||null),o&&(c=p.__slots[o.__slot||""]||null),o&&c&&n&&w(c,null,o,n,!0,!1),t)if(s){var A=o?g(p,o,C,!n):g(p,e,C,!1);w(s,t,A,!1,!0,T)}else t.__wxSlotParent&&w(t.__wxSlotParent,null,t,!0,T,!1);o&&n&&o.__inheritSlots&&x(o,(function(e,t){w(e,t,null,!1,!0,!0,-1)})),t&&t.__inheritSlots&&x(t,(function(t,r){var i=r.__slot||"",a=p.__slots[i]||null;if(a){var s=o?g(p,o,i,!n):g(p,e,i,!1);w(a,r,s,!1,!0,!0)}else r.__wxSlotParent&&w(r.__wxSlotParent,null,r,!0,!0,!1)}))}return n&&(e.__subtreeObserversCount&&i._updateSubtreeCaches(o,-e.__subtreeObserversCount),o.parentNode=null),-1===r&&(r=e.childNodes.length),t?e.childNodes.splice(r,n?1:0,t):e.childNodes.splice(r,n?1:0),e.ownerShadowRoot&&(n&&m(o,e.ownerShadowRoot),t&&m(t,e.ownerShadowRoot),v(e.ownerShadowRoot)),n&&(h(o),_(e,"remove",o)),t&&(a?function(e){if(!e.__attached)return d(e);var t=function(e){if(e instanceof f){for(var r=e.childNodes,n=0;n<r.length;n++)t(r[n]);e.shadowRoot instanceof f&&t(e.shadowRoot),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.moved.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("moved")}};t(e)}(t):d(t),a===e?_(e,"move",t):(a&&_(a,"remove",t),_(e,"add",t))),!0},E=function(e,t,r,n){if(t&&e.ownerShadowRoot!==t.ownerShadowRoot)throw new Error("Cannot move the node from one shadow tree to another shadow tree.");var o=n?r:t,i=-1;return r&&(i=e.childNodes.indexOf(r))<0?null:S(e,t,i,n)?o:null};f._attachShadowRoot=function(e){var t=e.__wxHost;t.__wxSlotChildren=[e],w(t,e,null,!1,!1,0),e.__hostAssociated=!0,v(e)},f.appendChild=function(e,t){return E(e,t,null,!1)},f.insertBefore=function(e,t,r){return E(e,t,r,!1)},f.removeChild=function(e,t){return E(e,null,t,!0)},f.replaceChild=function(e,t,r){return E(e,t,r,!0)},f.prototype.appendChild=function(e){return E(this,e,null,!1)},f.prototype.insertBefore=function(e,t){return E(this,e,t,!1)},f.prototype.removeChild=function(e){return E(this,null,e,!0)},f.prototype.replaceChild=function(e,t){return E(this,e,t,!0)};var T=function(e){var t=!0,r=!0;if(e instanceof f?(e.__backendExtracted=!0,e.$$=e.__domElement=null,r=!1):e instanceof s&&(e.__backendExtracted=!0,e.$$=e.__domElement=null,t=!1,r=!1),t&&e.__wxSlotChildren)for(var n=0;n<e.__wxSlotChildren.length;n++){var o=e.__wxSlotChildren[n];T(o)}else if(r&&e.childNodes)for(var i=0;i<e.childNodes.length;i++)T(e.childNodes[i])};f.extractBackend=function(e){if(e.__backendExtracted)return null;var t=e.__domElement;return T(e),t};var C=function(e,t,r){var n=e instanceof f&&e.__virtual,o=t?t.childNodes[r]:void 0,i=!0,a=!0,u=null;if(e instanceof f)e.__backendExtracted=!1,n||(u=function(e,t){if(!t){var r=c.toElement(e.__domElement);return e.$$=e.__domElement=r,r}if(e.__domElement.tagName.toUpperCase()===t.tagName)e.$$=e.__domElement=t;else{var n=c.toElement(e.__domElement);e.$$=e.__domElement=n,t.parentNode.replaceChild(n,t)}return null}(e,o)),a=!1;else if(e instanceof s)e.__backendExtracted=!1,u=function(e,t){if(!t){var r=document.createTextNode(e.textContent);return e.$$=e.__domElement=r,r}if(void 0!==t.textContent)t.textContent=e.textContent,e.$$=e.__domElement=t;else{var n=document.createTextNode(e.textContent);e.$$=e.__domElement=n,t.parentNode.replaceChild(n,t)}return null}(e,o),i=!1,a=!1;else{var l=document.createDocumentFragment();if(l.__wxSlotChildren=e.__wxSlotChildren,o&&o.childNodes)for(;o.childNodes.length;)l.appendChild(o.childNodes[0]);u=function(e,t){if(!t)return e;for(;e.childNodes&&t.childNodes&&t.childNodes.length;)e.appendChild(t.childNodes[0]);return t.parentNode.replaceChild(e,t),null}(e,o),e=l}u?(t.appendChild(u),o=u):o=t?t.childNodes[r]:void 0;var p=0;if(i&&e.__wxSlotChildren)for(var d=0;d<e.__wxSlotChildren.length;d++){var h=e.__wxSlotChildren[d];if(n)r=C(h,t,r);else if(h.asShadowRoot){for(var _=0;_<h.asShadowRoot.childNodes.length;_++)p=C(h.asShadowRoot.childNodes[_],o,p);e.shadowRoot=o,o.__wxHost=e,e.__wxSlotChildren[0]=o,o.__wxSlotParent=e,e.__singleSlot===h&&(e.__singleSlot=o)}else p=C(h,o,p)}else if(a&&e.childNodes)for(var m=0;m<e.childNodes.length;m++)p=C(e.childNodes[m],o,p);if(n)return r;for(;o.childNodes.length>p;)o.removeChild(o.childNodes[p]);return r+1};f.injectBackend=function(e,t){if(e.__backendExtracted){var r=document.createDocumentFragment();r.appendChild(t),C(e,r,0)}},f.prototype.triggerEvent=function(e,t,r){o.triggerEvent(this,e,t,r)},f.prototype.dispatchEvent=function(e){o.dispatchEvent(this,e)},f.prototype.addListener=function(e,t,r){o.addListenerToElement(this,e,t,r)},f.prototype.removeListener=function(e,t,r){o.removeListenerFromElement(this,e,t,r)},f.setMethodCaller=function(e,t){e.__methodCaller=t},f.getMethodCaller=function(e){return e.__methodCaller},f.prototype.getAttribute=function(e){if(!this.__attributes)return null;var t=this.__attributes[e];return void 0===t?null:t},f.prototype.setAttribute=function(e,t){this.__attributes||(this.__attributes=Object.create(null)),t=String(t),this.__attributes[e]!==t&&(this.__attributes[e]=t,this.__domElement&&this.__domElement.setAttribute&&this.__domElement.setAttribute(e,t))},f.prototype.setStyle=function(e){this.__domElement&&"custom"===u.documentBackend&&this.__domElement.setStyle(e)},f.prototype.removeAttribute=function(e){this.__attributes&&(delete this.__attributes[e],this.__domElement&&this.__domElement.removeAttribute&&this.__domElement.removeAttribute(e))},f.prototype.getBoundingClientRect=function(){return this.__domElement?this.__domElement.getBoundingClientRect():{left:0,top:0,width:0,height:0}},f.prototype.setMark=function(e,t){this.__marks||(this.__marks={}),this.__marks[e]=t},f.prototype.collectMarks=function(){for(var e={},t=this;t;t=t.parentNode)if(t.__marks)for(var r in t.__marks)hasOwnProperty.call(e,r)||(e[r]=t.__marks[r]);return e};var A=f.prototype.setNodeStyle=function(e,t){if(this.__styleSegments[t||0]!==e){this.__styleSegments[t||0]=e;var r=this.__styleSegments.join(";");if(this.__domElement&&this.ownerShadowRoot&&this.ownerShadowRoot.__childrenPropsFilter){var n=this.ownerShadowRoot.__childrenPropsFilter.style;if("function"==typeof n)return void("dom"===u.documentBackend?this.__domElement.setAttribute("style",n.call(this,r)):"custom"===u.documentBackend&&this.__domElement.setStyle(n.call(this,r)))}this.__domElement&&("dom"===u.documentBackend?this.__domElement.setAttribute("style",r):"custom"===u.documentBackend&&this.__domElement.setStyle(r)),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"style"})}};f.replaceDocumentElement=function(e,t,r){e.__attached||("dom"===u.documentBackend?t.parentNode.replaceChild(e.__domElement,t):"custom"===u.documentBackend&&t.replaceChild(e.__domElement,r),d(e))},f.pretendAttached=function(e){e.__attached||d(e)},f.pretendDetached=function(e){e.__attached&&h(e)},f.isAttached=function(e){return e.__attached},f.setSlotName=function(e,t){if(t=null==t?"":String(t),void 0===e.__slotName){if(0!==e.childNodes.length||0!==e.__wxSlotChildren.length)return;e.__wxSlotChildren=[]}e.__slotName=t,e.ownerShadowRoot&&(e.ownerShadowRoot.__slotCacheDirty=!0,v(e.ownerShadowRoot))},f.setInheritSlots=function(e){e.__singleSlot||e.__slots||e.__wxSlotChildren.length||(e.__wxSlotChildren=[],e.__inheritSlots=!0)},f.getInheritSlots=function(e){return e.__inheritSlots};var O=function(e,t){var r=e.match(/^(#[_a-zA-Z][-_a-zA-Z0-9:]*|)((?:\.-?[_a-zA-Z][-_a-zA-Z0-9]*)+|)$/);if(!r)return null;var n=r[1].slice(1),o=r[2].split(".");return o.shift(),n||o.length?{id:n,classes:o,relation:t||""}:null},M=f.parseSelector=function(e){for(var t=String(e||"").split(","),r=[],n=!1,o=0;o<t.length;o++){for(var i=t[o].split(/( |\t|>+)/g),a=[],s="",c=0;c<i.length;c++){var u=i[c];if(u&&" "!==u&&"\t"!==u)if(">"!==u[0]){var l=O(u,s);if(s="",!l)break;a.push(l)}else{if(""!==s)break;s=u,">>>"===u&&(n=!0)}}c===i.length&&(a.length&&r.push(a))}return r.length?{crossShadow:n,union:r}:null},R=function(e,t,r,n,o){if(t===e)return!1;var i=r[n],a=!0;i.id&&i.id!==t.__id&&(a=!1);for(var s=i.classes,c=0;a&&c<s.length;c++)t.classList.contains(s[c])||(a=!1);if(!a&&">"===o)return!1;var u=t;if(a&&0===n){if(null===e)return!0;for(u=u.parentNode;u;u=u.parentNode)if(u===e)return!0;if(">>>"!==o)return!1;u=t,a=!1}var l=a?i.relation:o;do{u.parentNode?u=u.parentNode:">>>"===l?u=u.__wxHost:">>>"===o?(a=!1,u=u.__wxHost):u=null,u===e&&(u=null)}while(u&&!f.isSelectable(u));if(!u)return!1;if(a){if(R(e,u,r,n-1,l))return!0;if(">>>"!==o)return!1}return R(e,u,r,n,o)},P=function(e,t,r){if(!f.isSelectable(r))return!1;for(var n=e.union,o=0;o<n.length;o++){var i=n[o];if(R(t,r,i,i.length-1,">"))return!0}return!1},I=function(e,t,r,n,o){if(P(t,r,n)&&(e.push(n),o))return!0;if(n.shadowRoot&&t.crossShadow&&((n.ownerShadowRoot?n.ownerShadowRoot.__wxHost.__componentOptions.domain:u.domain)===n.__componentOptions.domain&&I(e,t,r,n.shadowRoot,o)&&o))return!0;for(var i=n.childNodes,a=0;a<i.length;a++)if(i[a]instanceof f&&I(e,t,r,i[a],o)&&o)return!0;return!1};f.prototype.querySelector=function(e){var t="object"==typeof e?e:M(e);if(!t)return null;var r=[];return I(r,t,this,this,!0),r[0]||null},f.prototype.querySelectorAll=function(e){var t="object"==typeof e?e:M(e),r=[];return t?(I(r,t,this,this,!1),r):[]},f.matchSelector=function(e,t){var r="object"==typeof e?e:M(e);return!!r&&P(r,null,t)},f.prototype.matchSelector=function(e,t){var r="object"==typeof e?e:M(e);return!!r&&P(r,this,t)},f.isSelectable=function(e){return!!e.classList},f.prototype.getBackendContext=function(){return this.__backendContext?this.__backendContext:u.customContext},f.prototype.getBackendContext=function(){return this.__backendContext?this.__backendContext:u.customContext},e.exports=f},"./exparser/src/events.js":(e,t,r)=>{var n=r("./exparser/src/func-arr.js"),o=(Object.prototype.hasOwnProperty,function(){});o.prototype=Object.create(Object.prototype,{constructor:{value:o,writable:!0,configurable:!0}});var i=null;o._setElementSystem=function(e){i=e,o._setElementSystem=null};var a=null;o._setComponent=function(e){a=e,o._setComponent=null};var s=Date.now();o.setInitTimeStamp=function(e){return s=void 0===e?Date.now():e},o.getInitTimeStamp=function(e){return s},o.create=function(e,t,r){var n=(r=r||{}).originalEvent,i=r.extraFields||{},a=Date.now()-s,c=new o;for(var u in c.currentTarget=null,c.type=e,c.timeStamp=a,c.mark=null,c.detail=t,c.bubbles=!!r.bubbles,c.composed=!!r.composed,c.__originalEvent=n,c.__hasCapture=!!r.capturePhase,c.__stopped=!1,c.__dispatched=!1,i)c[u]=i[u];return c},o.prototype.preventDefault=function(){this.__originalEvent&&!this.__originalEvent.__stopPreventDefault&&this.__originalEvent.preventDefault()},o.prototype.stopPropagation=function(){this.__stopped=!0},o.prototype.isStopped=function(){return!!this.__stopped};o.prototype.markMutated=function(){this.__mutatedMarked=!0},o.prototype.mutatedMarked=function(){return!!this.__mutatedMarked};var c=function(e,t,r,n){for(var o=e,a=e instanceof i?e.collectMarks():{},s=[],c=[],u=e;u;){if(o!==u&&(s.push(e),e=u,c.push(a),a=e instanceof i?e.collectMarks():{}),o=u.parentNode,!1===n(u,e,a))return;if(u.__wxHost){if(r)break;e=s.pop()||u.__wxHost,a=c.pop()||(e instanceof i?e.collectMarks():{}),o=u=u.__wxHost}else{var l=!0;u instanceof i&&(l=!1),u=l||r?u.parentNode:u.__wxSlotParent}}};o.dispatchEvent=function(e,t){if(!t.__dispatched){t.__dispatched=!0,e.__wxElement&&e.__wxHost!==e.__wxElement&&(e=e.__wxElement).shadowRoot instanceof i&&(e=e.shadowRoot),t.target=e instanceof i?e.__methodCaller:e;var r=function(e,r,n){if(!(r&&r.length&&t.mutatedMarked())){var o=t.currentTarget=n instanceof i?n.__methodCaller:n,s=e.call(o,[t],n instanceof a?n:void 0);r&&r.length&&t.markMutated(),!1===s&&(t.__originalEvent&&!t.__originalEvent.__stopPreventDefault&&t.__originalEvent.preventDefault(),t.__stopped=!0)}},n=t.type,o=!t.composed;if(t.__hasCapture){var s=[];c(e,0,o,(function(e,t,r){return e.__wxCaptureEvents&&e.__wxCaptureEvents[n]&&s.push([e,t,r]),!0}));for(var u=s.length-1;u>=0;u--){var l=s[u],f=l[0],p=l[1];t.target=p instanceof i?p.__methodCaller:p,t.mark=l[2];var d=f.__wxCaptureMutated&&f.__wxCaptureMutated[n];if(r(f.__wxCaptureEvents[n],d,f),t.__stopped)break}}if(t.target=e instanceof i?e.__methodCaller:e,!t.__stopped){var h=!t.bubbles;c(e,0,o,(function(e,o,a){t.target=o instanceof i?o.__methodCaller:o,t.mark=a;var s=e.__wxMutated&&e.__wxMutated[n];return e.__wxEvents&&e.__wxEvents[n]&&r(e.__wxEvents[n],s,e),!h&&!t.__stopped}))}}},o.triggerEvent=function(e,t,r,n){var i=o.create(t,r,n);o.dispatchEvent(e,i)},o.addListenerToElement=function(e,t,r,o){var i=o&&o.mutated;if(i){var s=r;r=function(e){if(!e.mutatedMarked()){var t=Array.prototype.slice.call(arguments);return s.apply(this,t)}}}var c=void 0;return o&&(o.useCapture||o.capture)?(e.__wxCaptureEvents||(e.__wxCaptureEvents=Object.create(null)),e.__wxCaptureEvents[t]||(e.__wxCaptureEvents[t]=n.create("Event Listener")),c=e.__wxCaptureEvents[t].add(r),i&&(e.__wxCaptureMutated||(e.__wxCaptureMutated=Object.create(null)),e.__wxCaptureMutated[t]||(e.__wxCaptureMutated[t]=[]),e.__wxCaptureMutated[t].push(c))):(e.__wxEvents||(e.__wxEvents=Object.create(null)),e.__wxEvents[t]||(e.__wxEvents[t]=n.create("Event Listener")),c=e.__wxEvents[t].add(r),i&&(e.__wxMutated||(e.__wxMutated=Object.create(null)),e.__wxMutated[t]||(e.__wxMutated[t]=[]),e.__wxMutated[t].push(c))),e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!0,t,r,o]),c},o.removeListenerFromElement=function(e,t,r,n){var o,i=null;n&&(n.useCapture||n.capture)?(e.__wxCaptureEvents&&e.__wxCaptureEvents[t]&&(i=e.__wxCaptureEvents[t].remove(r)),e.__wxCaptureMutated&&e.__wxCaptureMutated[t]&&-1!==(o=e.__wxCaptureMutated[t].indexOf(r))&&e.__wxCaptureMutated[t].splice(o,1)):(e.__wxEvents&&e.__wxEvents[t]&&(i=e.__wxEvents[t].remove(r)),e.__wxMutated&&e.__wxMutated[t]&&-1!==(o=e.__wxMutated[t].indexOf(r))&&e.__wxMutated[t].splice(o,1));i&&e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!1,t,i,n])},e.exports=o},"./exparser/src/exparser_llparser.js":e=>{e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r){return v.llparser_create(e,t,r)}function o(e){v.llparser_destroy(e)}function i(e,t){return v.llparser_create_descriptor(e,t)}function a(e){v.llparser_descriptor_set_all(e)}function s(e){v.llparser_descriptor_set_nil(e)}function c(e,t){v.llparser_descriptor_add_char(e,t)}function u(e,t,r){v.llparser_descriptor_add_range(e,t,r)}function l(e){v.llparser_descriptor_revert(e)}function f(e,t,r,n,o,i,a,s,c,u,l,f){return v.llparser_add_rule(e,t,r,n,o,i,a,s,c,u,l,f)}function p(e){v.llparser_prepare(e)}function d(e,t){return v.llparser_parse(e,t)}function h(e){return v.llparser_get_input_buffer(e)}function _(e){return v.llparser_get_result(e)}function m(){v.wasm_main()}r.r(t),r.d(t,"llparser_create",(function(){return n})),r.d(t,"llparser_destroy",(function(){return o})),r.d(t,"llparser_create_descriptor",(function(){return i})),r.d(t,"llparser_descriptor_set_all",(function(){return a})),r.d(t,"llparser_descriptor_set_nil",(function(){return s})),r.d(t,"llparser_descriptor_add_char",(function(){return c})),r.d(t,"llparser_descriptor_add_range",(function(){return u})),r.d(t,"llparser_descriptor_revert",(function(){return l})),r.d(t,"llparser_add_rule",(function(){return f})),r.d(t,"llparser_prepare",(function(){return p})),r.d(t,"llparser_parse",(function(){return d})),r.d(t,"llparser_get_input_buffer",(function(){return h})),r.d(t,"llparser_get_result",(function(){return _})),r.d(t,"wasm_main",(function(){return m})),r.d(t,"memory",(function(){return y}));var v=r(1),y=v.memory;v.__wbindgen_start()},function(e,t,r){"use strict";r.r(t),r.d(t,"memory",(function(){return i})),r.d(t,"rust_calloc",(function(){return a})),r.d(t,"rust_free",(function(){return s})),r.d(t,"llparser_create",(function(){return c})),r.d(t,"llparser_destroy",(function(){return u})),r.d(t,"llparser_create_descriptor",(function(){return l})),r.d(t,"llparser_descriptor_set_all",(function(){return f})),r.d(t,"llparser_descriptor_set_nil",(function(){return p})),r.d(t,"llparser_descriptor_add_char",(function(){return d})),r.d(t,"llparser_descriptor_add_range",(function(){return h})),r.d(t,"llparser_descriptor_revert",(function(){return _})),r.d(t,"llparser_add_rule",(function(){return m})),r.d(t,"llparser_prepare",(function(){return v})),r.d(t,"llparser_parse",(function(){return y})),r.d(t,"llparser_get_input_buffer",(function(){return g})),r.d(t,"llparser_get_result",(function(){return b})),r.d(t,"wasm_main",(function(){return w})),r.d(t,"__wbindgen_start",(function(){return x}));var n=new ArrayBuffer(1114112),o=function(e,t,r){var n=new e.Int8Array(r),o=(new e.Int16Array(r),new e.Int32Array(r)),i=new e.Uint8Array(r),a=new e.Uint16Array(r),s=new e.Uint32Array(r),c=(new e.Float32Array(r),new e.Float64Array(r),e.Math.imul),u=(e.Math.fround,e.Math.abs,e.Math.clz32),l=(e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,e.NaN,e.Infinity,1048576);function f(e){var t=0,r=0,n=0,i=0,a=0,s=0,c=0;r=(t=e+-8|0)+(e=-8&(i=o[e+-4>>2]))|0;e:{t:{r:{n:{o:if(!(1&i)){if(!(3&i))break n;if(e=(i=o[t>>2])+e|0,(0|(t=t-i|0))==o[262246]){if(3!=(3&o[r+4>>2]))break o;return o[262244]=e,o[r+4>>2]=-2&o[r+4>>2],o[t+4>>2]=1|e,void(o[e+t>>2]=e)}i>>>0>=256?m(t):(0|(n=o[t+8>>2]))==(0|(a=o[t+12>>2]))?(s=1048576,c=o[262144]&b(i>>>3),o[s>>2]=c):(o[n+12>>2]=a,o[a+8>>2]=n)}if(2&(i=o[r+4>>2]))o[r+4>>2]=-2&i,o[t+4>>2]=1|e,o[e+t>>2]=e;else{o:{if(o[262247]!=(0|r)){if((0|r)!=o[262246])break o;return o[262246]=t,e=o[262244]+e|0,o[262244]=e,o[t+4>>2]=1|e,void(o[e+t>>2]=e)}if(o[262247]=t,e=o[262245]+e|0,o[262245]=e,o[t+4>>2]=1|e,(0|t)==o[262246]&&(o[262244]=0,o[262246]=0),(r=o[262254])>>>0>=e>>>0)break n;if(!(e=o[262247]))break n;i:if(!((i=o[262245])>>>0<41))for(t=1049e3;;){if((n=o[t>>2])+o[t+4>>2]>>>0>e>>>0&&n>>>0<=e>>>0)break i;if(!(t=o[t+8>>2]))break}if(n=4095,e=o[262252]){for(t=0;t=t+1|0,e=o[e+8>>2];);n=t>>>0>4095?t:4095}if(o[262256]=n,i>>>0<=r>>>0)break n;return void(o[262254]=-1)}if(e=(n=-8&i)+e|0,n>>>0>=256?m(r):(0|(n=o[r+12>>2]))==(0|(r=o[r+8>>2]))?(s=1048576,c=o[262144]&b(i>>>3),o[s>>2]=c):(o[r+12>>2]=n,o[n+8>>2]=r),o[t+4>>2]=1|e,o[e+t>>2]=e,o[262246]==(0|t)){o[262244]=e;break n}}if(e>>>0<256)break r;if(_(t,e),e=o[262256]+-1|0,o[262256]=e,!e){if(e=o[262252])break t;e=4095;break e}}return}return e=1048584+((r=e>>>3)<<3)|0,i=o[262144],r=1<<(31&r),n=o[e+8>>2],i&r||(o[262144]=r|i,n=e),r=n,o[e+8>>2]=t,o[r+12>>2]=t,o[t+12>>2]=e,void(o[t+8>>2]=r)}for(t=0;t=t+1|0,e=o[e+8>>2];);e=t>>>0>4095?t:4095}o[262256]=e}function p(e,t,r,n,i,a,s,u,f,p,d,h){var _;return l=_=l+-64|0,o[_+60>>2]=e,o[_+56>>2]=t,o[_+52>>2]=r,o[_+48>>2]=n,o[_+44>>2]=i,o[_+40>>2]=a,o[_+36>>2]=s,o[_+32>>2]=u,o[_+28>>2]=f,o[_+24>>2]=p,o[_+20>>2]=d,o[_+16>>2]=h,t=o[o[_+60>>2]+28>>2],r=o[_+60>>2],e=o[r>>2],o[r>>2]=e+1,o[_+12>>2]=t+c(e,44),o[o[_+12>>2]>>2]=o[_+52>>2],o[o[_+12>>2]+4>>2]=o[_+48>>2],o[_+48>>2]>0&&(o[o[_+12>>2]+8>>2]=o[_+44>>2]),o[_+48>>2]>1&&(o[o[_+12>>2]+12>>2]=o[_+40>>2]),o[_+48>>2]>2&&(o[o[_+12>>2]+16>>2]=o[_+36>>2]),o[_+48>>2]>3&&(o[o[_+12>>2]+20>>2]=o[_+32>>2]),o[_+48>>2]>4&&(o[o[_+12>>2]+24>>2]=o[_+28>>2]),o[_+48>>2]>5&&(o[o[_+12>>2]+28>>2]=o[_+24>>2]),o[_+48>>2]>6&&(o[o[_+12>>2]+32>>2]=o[_+20>>2]),o[_+48>>2]>7&&(o[o[_+12>>2]+36>>2]=o[_+16>>2]),o[o[_+12>>2]+40>>2]=o[_+56>>2],o[_+48>>2]>0&&function(e,t,r){var n;o[28+(n=l-32|0)>>2]=e,o[n+24>>2]=t,o[n+20>>2]=r,o[n+16>>2]=(o[n+20>>2]-o[o[n+28>>2]+24>>2]|0)/140,1==o[o[n+20>>2]+4>>2]&&(t=o[o[n+28>>2]+40>>2],r=o[n+28>>2],e=o[r+8>>2],o[r+8>>2]=e+1,o[n+12>>2]=t+(e<<3),o[o[n+12>>2]>>2]=o[n+24>>2],o[o[n+12>>2]+4>>2]=o[o[n+20>>2]+136>>2],o[o[n+20>>2]+136>>2]=o[n+12>>2])}(o[_+60>>2],o[_+12>>2],o[_+52>>2]),l=_- -64|0,o[_+12>>2]}function d(e,t,r,n,a){var c;if(l=c=l-48|0,o[c+44>>2]=e,o[c+40>>2]=t,o[c+36>>2]=r,o[c+32>>2]=n,o[c+28>>2]=a,o[o[c+40>>2]>>2]!=o[c+36>>2])for(o[o[c+40>>2]>>2]=o[c+36>>2],o[c+24>>2]=o[o[c+40>>2]+136>>2],o[c+20>>2]=1&(0!=o[c+28>>2]^-1^-1);o[c+24>>2];){for(o[c+20>>2]||(o[c+28>>2]=o[c+24>>2]),o[c+16>>2]=o[o[o[c+24>>2]>>2]+8>>2],1==o[o[c+16>>2]+4>>2]&&d(o[c+44>>2],o[c+16>>2],o[c+36>>2],o[c+32>>2],o[c+28>>2]),o[c+12>>2]=0;!(o[c+12>>2]>=128);)i[o[c+12>>2]+(o[c+16>>2]+8|0)|0]&&(s[o[c+28>>2]>>2]>=s[o[c+32>>2]+(o[c+12>>2]<<2)>>2]&&o[o[c+32>>2]+(o[c+12>>2]<<2)>>2]||(o[o[c+32>>2]+(o[c+12>>2]<<2)>>2]=o[o[c+28>>2]>>2])),o[c+12>>2]=o[c+12>>2]+1;o[c+24>>2]=o[o[c+24>>2]+4>>2]}l=c+48|0}function h(e,t,r,n){var a;for(o[44+(a=l-48|0)>>2]=e,o[a+40>>2]=t,o[a+36>>2]=r,o[a+32>>2]=n,o[a+28>>2]=o[o[a+40>>2]+136>>2];o[a+28>>2];){if(o[a+24>>2]=o[o[o[a+28>>2]>>2]+8>>2],o[a+24>>2]==o[a+40>>2])for(o[a+20>>2]=o[o[o[a+28>>2]>>2]+12>>2],o[a+16>>2]=0;!(o[a+16>>2]>=128);){e:{if(1!=o[o[a+20>>2]+4>>2]){if(!i[o[a+16>>2]+(o[a+20>>2]+8|0)|0])break e}else if(o[a+12>>2]=o[o[a+44>>2]+32>>2]+((o[a+20>>2]-o[o[a+44>>2]+24>>2]|0)/140<<9),!o[o[a+12>>2]+(o[a+16>>2]<<2)>>2])break e;s[o[a+28>>2]>>2]>=s[o[a+32>>2]+(o[a+16>>2]<<2)>>2]&&o[o[a+32>>2]+(o[a+16>>2]<<2)>>2]||(o[o[a+32>>2]+(o[a+16>>2]<<2)>>2]=o[o[a+28>>2]>>2])}o[a+16>>2]=o[a+16>>2]+1}o[a+28>>2]=o[o[a+28>>2]+4>>2]}}function _(e,t){var r=0,n=0,i=0,a=0;o[e+16>>2]=0,o[e+20>>2]=0,i=e,r=0,(n=t>>>8)&&(r=31,t>>>0>16777215||(r=62+((t>>>(6-(n=u(n))&31)&1)-(n<<1)|0)|0)),o[i+28>>2]=r,i=1048848+(r<<2)|0;e:{t:{r:{n:{if((a=o[262145])&(n=1<<(31&r))){if(n=o[i>>2],(-8&o[n+4>>2])!=(0|t))break n;r=n;break r}o[262145]=n|a,o[i>>2]=e,o[e+24>>2]=i;break e}for(i=t<<(31==(0|r)?0:25-(r>>>1)&31);;){if(!(r=o[(a=16+((i>>>29&4)+n|0)|0)>>2]))break t;if(i<<=1,n=r,(-8&o[r+4>>2])==(0|t))break}}return t=o[r+8>>2],o[t+12>>2]=e,o[r+8>>2]=e,o[e+24>>2]=0,o[e+12>>2]=r,void(o[e+8>>2]=t)}o[a>>2]=e,o[e+24>>2]=n}o[e+12>>2]=e,o[e+8>>2]=e}function m(e){var t,r=0,n=0,i=0,a=0,s=0,c=0;t=o[e+24>>2];e:{t:{if((0|e)==(0|(r=o[e+12>>2]))){if(i=o[(r=e+20|0)>>2],n=o[(i?20:16)+e>>2])break t;r=0;break e}n=o[e+8>>2],o[n+12>>2]=r,o[r+8>>2]=n;break e}for(i=i?r:e+16|0;a=i,(n=o[(i=(r=n)+20|0)>>2])||(i=r+16|0,n=o[r+16>>2]),n;);o[a>>2]=0}e:if(t){n=1048848+(o[e+28>>2]<<2)|0;t:{if((0|e)==o[n>>2]){if(o[n>>2]=r,r)break t;return s=1048580,c=o[262145]&b(o[e+28>>2]),void(o[s>>2]=c)}if(o[(o[t+16>>2]==(0|e)?16:20)+t>>2]=r,!r)break e}o[r+24>>2]=t,(n=o[e+16>>2])&&(o[r+16>>2]=n,o[n+24>>2]=r),(e=o[e+20>>2])&&(o[r+20>>2]=e,o[e+24>>2]=r)}}function v(e,t){return 0|function(e){var t;return!(t=function(e){var t=0,r=0,n=0,i=0,a=0,c=0,l=0,f=0,p=0,d=0,h=0;e:{t:{r:{if(e>>>0>=245){if(e>>>0>=4294901709)break t;if(i=-8&(e=e+11|0),!(f=o[262145]))break r;r=0-i|0,l=0,(e>>>=8)&&(l=31,i>>>0>16777215||(l=62+((i>>>(6-(e=u(e))&31)&1)-(e<<1)|0)|0));n:{o:{if(e=o[1048848+(l<<2)>>2]){for(a=i<<(31==(0|l)?0:25-(l>>>1)&31);;){if(!((c=-8&o[e+4>>2])>>>0<i>>>0||(c=c-i|0)>>>0>=r>>>0||(n=e,r=c))){r=0;break o}if(c=o[e+20>>2],e=o[16+((a>>>29&4)+e|0)>>2],t=c&&(0|c)!=(0|e)?c:t,a<<=1,!e)break}if(t){e=t;break o}if(n)break n}if(n=0,!(e=(0-(e=2<<(31&l))|e)&f))break r;if(!(e=o[1048848+(g(e&0-e)<<2)>>2]))break r}for(;n=(c=(a=(t=-8&o[e+4>>2])-i|0)>>>0<r>>>0&t>>>0>=i>>>0)?e:n,r=c?a:r,e=(t=o[e+16>>2])||o[e+20>>2];);if(!n)break r}if(r>>>0>=(e=o[262244])-i>>>0&&e>>>0>=i>>>0)break r;m(n);n:if(r>>>0>=16){if(o[n+4>>2]=3|i,o[4+(t=n+i|0)>>2]=1|r,o[t+r>>2]=r,r>>>0>=256){_(t,r);break n}e=1048584+((r>>>=3)<<3)|0,a=o[262144],r=1<<(31&r),l=o[e+8>>2],a&r||(o[262144]=r|a,l=e),r=l,o[e+8>>2]=t,o[r+12>>2]=t,o[t+12>>2]=e,o[t+8>>2]=r}else e=r+i|0,o[n+4>>2]=3|e,o[4+(e=e+n|0)>>2]=1|o[e+4>>2];return n+8|0}n:{o:{if(!(3&(e=(t=o[262144])>>>(n=31&(r=(i=e>>>0<11?16:e+11&-8)>>>3))))){if(i>>>0<=s[262244])break r;if(e)break o;if(!(e=o[262145]))break r;for(t=o[1048848+(g(e&0-e)<<2)>>2],r=(-8&o[t+4>>2])-i|0,a=t;;){if(!(e=o[t+16>>2])&&!(e=o[t+20>>2]))break n;r=(t=(n=(-8&o[e+4>>2])-i|0)>>>0<r>>>0)?n:r,a=t?e:a,t=e}}r=(e=o[1048592+(c=(n=r+(1&(-1^e))|0)<<3)>>2])+8|0,(0|(a=o[e+8>>2]))==(0|(c=c+1048584|0))?(d=1048576,h=b(n)&t,o[d>>2]=h):(o[a+12>>2]=c,o[c+8>>2]=a),t=n<<3,o[e+4>>2]=3|t,o[4+(e=e+t|0)>>2]=1|o[e+4>>2];break t}return n=g(0-(e=(r=e<<n)&(0-(e=2<<n)|e))&e),e=o[1048592+(a=n<<3)>>2],(0|(r=o[e+8>>2]))==(0|(a=a+1048584|0))?(d=1048576,h=b(n)&t,o[d>>2]=h):(o[r+12>>2]=a,o[a+8>>2]=r),a=e+8|0,o[e+4>>2]=3|i,r=(t=n<<3)-i|0,o[4+(c=e+i|0)>>2]=1|r,o[e+t>>2]=r,(e=o[262244])&&(e=1048584+((n=e>>>3)<<3)|0,t=o[262246],i=o[262144],n=1<<(31&n),l=o[e+8>>2],i&n||(o[262144]=n|i,l=e),n=l,o[e+8>>2]=t,o[n+12>>2]=t,o[t+12>>2]=e,o[t+8>>2]=n),o[262246]=c,o[262244]=r,a}return m(a),r>>>0>=16?(o[a+4>>2]=3|i,o[4+(c=i+a|0)>>2]=1|r,o[r+c>>2]=r,(e=o[262244])&&(e=1048584+((n=e>>>3)<<3)|0,t=o[262246],i=o[262144],n=1<<(31&n),l=o[e+8>>2],i&n||(o[262144]=n|i,l=e),n=l,o[e+8>>2]=t,o[n+12>>2]=t,o[t+12>>2]=e,o[t+8>>2]=n),o[262246]=c,o[262244]=r):(e=r+i|0,o[a+4>>2]=3|e,o[4+(e=e+a|0)>>2]=1|o[e+4>>2]),a+8|0}r:{n:{o:{i:{if((t=o[262244])>>>0<i>>>0){if((e=o[262245])>>>0>i>>>0)break e;if(r=0,-1==(0|(t=w((e=i+65583|0)>>>16))))break t;if(!(n=t<<16))break t;if(e=(a=-65536&e)+o[262248]|0,o[262248]=e,t=o[262249],o[262249]=t>>>0>e>>>0?t:e,!(r=o[262247]))break i;for(e=1049e3;;){if((0|n)==((t=o[e>>2])+(c=o[e+4>>2])|0))break o;if(!(e=o[e+8>>2]))break}break n}return e=o[262246],(n=t-i|0)>>>0<=15?(o[262246]=0,o[262244]=0,o[e+4>>2]=3|t,i=4+(t=e+t|0)|0,r=1|o[t+4>>2]):(o[262244]=n,r=e+i|0,o[262246]=r,o[r+4>>2]=1|n,o[e+t>>2]=n,r=3|i,i=e+4|0),o[i>>2]=r,e+8|0}for((e=o[262255])>>>0<=n>>>0&&e||(o[262255]=n),e=0,o[262256]=4095,o[262251]=a,o[262250]=n,o[262253]=0;t=e+1048584|0,o[e+1048592>>2]=t,o[e+1048596>>2]=t,256!=(0|(e=e+8|0)););o[262247]=n,e=a+-40|0,o[262245]=e,o[n+4>>2]=1|e,o[4+(e+n|0)>>2]=40,o[262254]=2097152;break r}if(!(o[e+12>>2]|n>>>0<=r>>>0|t>>>0>r>>>0)){o[e+4>>2]=a+c,t=(e=o[262247])+15&-8,o[262247]=t+-8,r=8+((n=a+o[262245]|0)+(e-t|0)|0)|0,o[262245]=r,o[t+-4>>2]=1|r,o[4+(e+n|0)>>2]=40,o[262254]=2097152;break r}}e=o[262255],o[262255]=e>>>0<n>>>0?e:n,t=n+a|0,e=1049e3;n:{for(;;){if((0|t)!=o[e>>2]){if(e=o[e+8>>2])continue;break n}break}if(!o[e+12>>2]){o[e>>2]=n,o[e+4>>2]=a+o[e+4>>2],o[n+4>>2]=3|i,a=n+i|0,i=(t-n|0)-i|0;o:{i:{if((0|t)!=o[262247]){if(o[262246]==(0|t))break i;if(1==(3&(e=o[t+4>>2]))&&((r=-8&e)>>>0>=256?m(t):(0|(c=o[t+12>>2]))==(0|(l=o[t+8>>2]))?(d=1048576,h=o[262144]&b(e>>>3),o[d>>2]=h):(o[l+12>>2]=c,o[c+8>>2]=l),i=r+i|0,t=t+r|0),o[t+4>>2]=-2&o[t+4>>2],o[a+4>>2]=1|i,o[i+a>>2]=i,i>>>0>=256){_(a,i);break o}e=1048584+((t=i>>>3)<<3)|0,r=o[262144],t=1<<(31&t),l=o[e+8>>2],r&t||(o[262144]=t|r,l=e),r=l,o[e+8>>2]=a,o[r+12>>2]=a,o[a+12>>2]=e,o[a+8>>2]=r;break o}o[262247]=a,e=o[262245]+i|0,o[262245]=e,o[a+4>>2]=1|e;break o}o[262246]=a,e=o[262244]+i|0,o[262244]=e,o[a+4>>2]=1|e,o[e+a>>2]=e}return n+8|0}}for(e=1049e3;!((t=o[e>>2])>>>0<=r>>>0&&(c=t+o[e+4>>2]|0)>>>0>r>>>0);)e=o[e+8>>2];for(o[262247]=n,e=a+-40|0,o[262245]=e,o[n+4>>2]=1|e,o[4+(e+n|0)>>2]=40,o[262254]=2097152,o[(t=(e=(c+-32&-8)-8|0)>>>0<r+16>>>0?r:e)+4>>2]=27,e=o[262250],l=o[262251],p=o[262253],o[(f=t+16|0)>>2]=o[262252],o[f+4>>2]=p,o[t+8>>2]=e,o[t+12>>2]=l,o[262251]=a,o[262250]=n,o[262252]=t+8,o[262253]=0,e=t+28|0;o[e>>2]=7,c>>>0>(e=e+4|0)>>>0;);(0|t)!=(0|r)&&(o[t+4>>2]=-2&o[t+4>>2],e=t-r|0,o[r+4>>2]=1|e,o[t>>2]=e,e>>>0>=256?_(r,e):(e=1048584+((t=e>>>3)<<3)|0,n=o[262144],t=1<<(31&t),l=o[e+8>>2],n&t||(o[262144]=t|n,l=e),t=l,o[e+8>>2]=r,o[t+12>>2]=r,o[r+12>>2]=e,o[r+8>>2]=t))}if(r=0,!((e=o[262245])>>>0<=i>>>0))break e}return r}return t=e-i|0,o[262245]=t,n=(e=o[262247])+i|0,o[262247]=n,o[n+4>>2]=1|t,o[e+4>>2]=3|i,e+8|0}(e))|!(3&i[t+-4|0])||function(e,t){if(t)for(;n[0|e]=0,e=e+1|0,t=t+-1|0;);}(t,e),t}(c(e|=0,t|=0))}function y(){}function g(e){return e?31-u(e+-1^e)|0:32}function b(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function w(t){t|=0;var u=0|r.byteLength/65536,l=u+t|0;if(u<l&&l<65536){var f=new ArrayBuffer(c(l,65536)),p=new e.Int8Array(f);p.set(n),n=p,n=new e.Int8Array(f),new e.Int16Array(f),o=new e.Int32Array(f),i=new e.Uint8Array(f),a=new e.Uint16Array(f),s=new e.Uint32Array(f),new e.Float32Array(f),new e.Float64Array(f),r=f}return u}return{memory:Object.create(Object.prototype,{grow:{value:w},buffer:{get:function(){return r}}}),rust_calloc:v,rust_free:function(e){f(e|=0)},llparser_create:function(e,t,r){return 0|function(e,t,r){var n,i,a;return l=n=l-32|0,o[n+28>>2]=e,o[n+24>>2]=t,o[n+20>>2]=r,e=n,t=o[n+28>>2]?o[n+28>>2]:256,o[e+28>>2]=t,e=n,t=o[n+24>>2]?o[n+24>>2]:256,o[e+24>>2]=t,e=n,t=o[n+20>>2]?o[n+20>>2]:256,o[e+20>>2]=t,i=n,a=v(((((((c(o[n+24>>2],140)+52|0)+c(o[n+20>>2],44)|0)+(o[n+24>>2]<<9)|0)+(o[n+24>>2]<<9)|0)+c(o[n+20>>2],o[n+24>>2]<<3)|0)+(o[n+28>>2]<<1)|0)+(o[n+28>>2]<<3)|0,1),o[i+16>>2]=a,o[o[n+16>>2]+12>>2]=o[n+28>>2],o[o[n+16>>2]+16>>2]=o[n+24>>2],o[o[n+16>>2]+20>>2]=o[n+20>>2],o[o[n+16>>2]+4>>2]=0,o[o[n+16>>2]>>2]=0,o[o[n+16>>2]+8>>2]=0,o[n+12>>2]=o[n+16>>2]+52,o[o[n+16>>2]+24>>2]=o[n+12>>2],o[n+12>>2]=o[n+12>>2]+c(o[n+24>>2],140),o[o[n+16>>2]+28>>2]=o[n+12>>2],o[n+12>>2]=o[n+12>>2]+c(o[n+20>>2],44),o[o[n+16>>2]+32>>2]=o[n+12>>2],o[n+12>>2]=o[n+12>>2]+(o[n+24>>2]<<9),o[o[n+16>>2]+36>>2]=o[n+12>>2],o[n+12>>2]=o[n+12>>2]+(o[n+24>>2]<<9),o[o[n+16>>2]+40>>2]=o[n+12>>2],o[n+12>>2]=o[n+12>>2]+c(o[n+20>>2],o[n+24>>2]<<3),o[o[n+16>>2]+44>>2]=o[n+12>>2],o[n+12>>2]=o[n+12>>2]+(o[n+28>>2]<<1),o[o[n+16>>2]+48>>2]=o[n+12>>2],l=n+32|0,o[n+16>>2]}(e|=0,t|=0,r|=0)},llparser_destroy:function(e){!function(e){var t;l=t=l-16|0,o[t+12>>2]=e,f(o[t+12>>2]),l=t+16|0}(e|=0)},llparser_create_descriptor:function(e,t){return 0|function(e,t){var r,n;return o[12+(r=l-16|0)>>2]=e,o[r+8>>2]=t,t=o[o[r+12>>2]+24>>2],n=o[r+12>>2],e=o[n+4>>2],o[n+4>>2]=e+1,o[r+4>>2]=t+c(e,140),o[o[r+4>>2]+4>>2]=o[r+8>>2]?1:0,o[r+4>>2]}(e|=0,t|=0)},llparser_descriptor_set_all:function(e){var t;e|=0,o[12+(t=l-16|0)>>2]=e,o[o[t+12>>2]+4>>2]=-1,n[o[t+12>>2]+135|0]=1},llparser_descriptor_set_nil:function(e){var t;e|=0,o[12+(t=l-16|0)>>2]=e,o[o[t+12>>2]+4>>2]=-2,n[o[t+12>>2]+8|0]=1},llparser_descriptor_add_char:function(e,t){!function(e,t){var r;o[12+(r=l-16|0)>>2]=e,o[r+8>>2]=t,n[o[r+8>>2]+(o[r+12>>2]+8|0)|0]=1}(e|=0,t|=0)},llparser_descriptor_add_range:function(e,t,r){!function(e,t,r){var i;for(o[12+(i=l-16|0)>>2]=e,o[i+8>>2]=t,o[i+4>>2]=r,o[i>>2]=o[i+8>>2];!(o[i>>2]>o[i+4>>2]);)n[o[i>>2]+(o[i+12>>2]+8|0)|0]=1,o[i>>2]=o[i>>2]+1}(e|=0,t|=0,r|=0)},llparser_descriptor_revert:function(e){!function(e){var t;for(o[12+(t=l-16|0)>>2]=e,o[t+8>>2]=1;!(o[t+8>>2]>=127);)n[o[t+8>>2]+(o[t+12>>2]+8|0)|0]=1&(0!=i[o[t+8>>2]+(o[t+12>>2]+8|0)|0]^-1),o[t+8>>2]=o[t+8>>2]+1}(e|=0)},llparser_add_rule:function(e,t,r,n,o,i,a,s,c,u,l,f){return 0|p(e|=0,t|=0,r|=0,n|=0,o|=0,i|=0,a|=0,s|=0,c|=0,u|=0,l|=0,f|=0)},llparser_prepare:function(e){!function(e){var t;for(l=t=l-32|0,o[t+28>>2]=e,o[t+24>>2]=0;!(o[t+24>>2]>=o[o[t+28>>2]+4>>2]);)o[t+20>>2]=o[o[t+28>>2]+24>>2]+c(o[t+24>>2],140),1==o[o[t+20>>2]+4>>2]&&d(o[t+28>>2],o[t+20>>2],o[t+20>>2],o[o[t+28>>2]+32>>2]+(o[t+24>>2]<<9)|0,0),o[t+24>>2]=o[t+24>>2]+1;for(o[t+16>>2]=0;!(o[t+16>>2]>=o[o[t+28>>2]+4>>2]);)o[t+12>>2]=o[o[t+28>>2]+24>>2]+c(o[t+16>>2],140),1==o[o[t+12>>2]+4>>2]&&(o[o[t+12>>2]>>2]=0,h(o[t+28>>2],o[t+12>>2],o[t+12>>2],o[o[t+28>>2]+36>>2]+(o[t+16>>2]<<9)|0)),o[t+16>>2]=o[t+16>>2]+1;l=t+32|0}(e|=0)},llparser_parse:function(e,t){return 0|function(e,t){var r,n,c;return l=r=l-32|0,o[r+24>>2]=e,o[r+20>>2]=t,o[r+16>>2]=0,o[r+12>>2]=0,n=r,c=function e(t,r,n,c,u,f,p){var d,h=0,_=0;l=d=l-96|0,o[d+88>>2]=t,o[d+84>>2]=r,o[d+80>>2]=n,o[d+76>>2]=c,o[d+72>>2]=u,o[d+68>>2]=f,o[d+64>>2]=p,o[d+60>>2]=a[o[d+80>>2]+(o[o[d+76>>2]>>2]<<1)>>1],s[d+60>>2]>=128&&(o[d+60>>2]=1);e:if(o[o[d+72>>2]>>2]>(o[d+64>>2]-4|0))o[d+92>>2]=-1;else if(1==o[o[d+84>>2]+4>>2])if(o[d+56>>2]=o[o[d+76>>2]>>2],o[d+52>>2]=o[o[d+72>>2]>>2],o[d+48>>2]=0,o[d+44>>2]=0,o[d+40>>2]=o[o[d+88>>2]+32>>2]+((o[d+84>>2]-o[o[d+88>>2]+24>>2]|0)/140<<9),o[d+36>>2]=0,!o[o[d+40>>2]+(o[d+60>>2]<<2)>>2]|s[d+60>>2]<=0|s[d+60>>2]>=127?!o[d+60>>2]|!o[o[d+40>>2]+508>>2]?o[o[d+40>>2]>>2]&&(o[d+36>>2]=o[o[d+40>>2]>>2]):o[d+36>>2]=o[o[d+40>>2]+508>>2]:o[d+36>>2]=o[o[d+40>>2]+(o[d+60>>2]<<2)>>2],o[d+36>>2]){for(o[d+68>>2]||o[o[d+36>>2]+40>>2]||(o[d+48>>2]=o[o[d+72>>2]>>2],t=o[d+72>>2],o[t>>2]=o[t>>2]+2),o[d+32>>2]=0;o[d+32>>2]<o[o[d+36>>2]+4>>2];){if(o[d+28>>2]=o[d+68>>2],o[d+68>>2]||!o[o[d+36>>2]+40>>2]|o[o[d+36>>2]+40>>2]==(o[d+32>>2]+65536|0)||(o[d+28>>2]=1),h=d,_=e(o[d+88>>2],o[(o[d+36>>2]+8|0)+(o[d+32>>2]<<2)>>2],o[d+80>>2],o[d+76>>2],o[d+72>>2],o[d+28>>2],o[d+64>>2]),o[h+24>>2]=_,o[d+24>>2]<0){o[d+92>>2]=-1;break e}o[d+68>>2]|o[o[d+36>>2]+40>>2]!=(o[d+32>>2]+65536|0)||(o[d+44>>2]=o[d+24>>2]),o[d+32>>2]=o[d+32>>2]+1}for(o[d+68>>2]||(o[o[d+36>>2]+40>>2]?1==o[o[d+36>>2]+40>>2]&&(r=o[d+56>>2],n=o[o[d+88>>2]+48>>2],c=o[d+72>>2],t=o[c>>2],o[c>>2]=t+1,o[n+(t<<2)>>2]=r,o[d+44>>2]=o[o[d+72>>2]>>2],r=o[o[d+76>>2]>>2],n=o[o[d+88>>2]+48>>2],c=o[d+72>>2],t=o[c>>2],o[c>>2]=t+1,o[n+(t<<2)>>2]=r):(o[o[o[d+88>>2]+48>>2]+(o[d+48>>2]<<2)>>2]=0-o[d+36>>2],o[o[o[d+88>>2]+48>>2]+(o[d+48>>2]+1<<2)>>2]=o[o[d+36>>2]+4>>2],o[d+44>>2]=o[d+48>>2]+1));;){if(o[o[d+72>>2]>>2]>(o[d+64>>2]-4|0)){o[d+92>>2]=-1;break e}if(o[d+20>>2]=o[o[d+88>>2]+36>>2]+((o[d+84>>2]-o[o[d+88>>2]+24>>2]|0)/140<<9),o[d+16>>2]=0,o[d+60>>2]=a[o[d+80>>2]+(o[o[d+76>>2]>>2]<<1)>>1],s[d+60>>2]>=128&&(o[d+60>>2]=1),!o[o[d+20>>2]+(o[d+60>>2]<<2)>>2]|s[d+60>>2]<=0|s[d+60>>2]>=127?!o[d+60>>2]|!o[o[d+20>>2]+508>>2]||(o[d+16>>2]=o[o[d+20>>2]+508>>2]):o[d+16>>2]=o[o[d+20>>2]+(o[d+60>>2]<<2)>>2],!o[d+16>>2])break;for(o[d+68>>2]||(o[o[d+16>>2]+40>>2]?65536!=o[o[d+16>>2]+40>>2]&&(o[o[d+72>>2]>>2]=o[d+52>>2]):(o[o[o[d+88>>2]+48>>2]+(o[d+44>>2]<<2)>>2]=(0-o[o[o[d+88>>2]+48>>2]+(o[d+44>>2]<<2)>>2]|0)-1,o[d+48>>2]=o[o[d+72>>2]>>2],t=o[d+72>>2],o[t>>2]=o[t>>2]+2)),o[d+12>>2]=1;o[d+12>>2]<o[o[d+16>>2]+4>>2];){if(o[d+8>>2]=o[d+68>>2],o[d+68>>2]||!o[o[d+16>>2]+40>>2]|o[o[d+16>>2]+40>>2]==(o[d+12>>2]+65536|0)||(o[d+8>>2]=1),h=d,_=e(o[d+88>>2],o[(o[d+16>>2]+8|0)+(o[d+12>>2]<<2)>>2],o[d+80>>2],o[d+76>>2],o[d+72>>2],o[d+8>>2],o[d+64>>2]),o[h+4>>2]=_,o[d+4>>2]<0){o[d+92>>2]=-1;break e}o[d+68>>2]|o[o[d+16>>2]+40>>2]!=(o[d+12>>2]+65536|0)||(o[d+44>>2]=o[d+4>>2]),o[d+12>>2]=o[d+12>>2]+1}o[d+68>>2]||(o[o[d+16>>2]+40>>2]?1==o[o[d+16>>2]+40>>2]&&(r=o[d+56>>2],n=o[o[d+88>>2]+48>>2],c=o[d+72>>2],t=o[c>>2],o[c>>2]=t+1,o[n+(t<<2)>>2]=r,o[d+44>>2]=o[o[d+72>>2]>>2],r=o[o[d+76>>2]>>2],n=o[o[d+88>>2]+48>>2],c=o[d+72>>2],t=o[c>>2],o[c>>2]=t+1,o[n+(t<<2)>>2]=r):(o[o[o[d+88>>2]+48>>2]+(o[d+48>>2]<<2)>>2]=0-o[d+16>>2],o[o[o[d+88>>2]+48>>2]+(o[d+48>>2]+1<<2)>>2]=o[o[d+16>>2]+4>>2],o[d+44>>2]=o[d+48>>2]+1))}o[d+92>>2]=o[d+44>>2]}else o[d+92>>2]=-1;else{if(o[d+60>>2]&&(-1==o[o[d+84>>2]+4>>2]&&(t=o[d+76>>2],o[t>>2]=o[t>>2]+1),!o[o[d+84>>2]+4>>2])){if(!i[o[d+60>>2]+(o[d+84>>2]+8|0)|0]){o[d+92>>2]=-1;break e}t=o[d+76>>2],o[t>>2]=o[t>>2]+1}o[d+68>>2]||(r=o[o[d+76>>2]>>2],n=o[o[d+84>>2]+4>>2],c=o[o[d+88>>2]+48>>2],u=o[d+72>>2],t=o[u>>2],o[u>>2]=t+1,o[c+(t<<2)>>2]=r-(-2==(0|n)?0:1),r=o[o[d+76>>2]>>2],n=o[o[d+88>>2]+48>>2],c=o[d+72>>2],t=o[c>>2],o[c>>2]=t+1,o[n+(t<<2)>>2]=r),o[d+92>>2]=o[o[d+72>>2]>>2]-1}return l=d+96|0,o[d+92>>2]}(o[r+24>>2],o[r+20>>2],o[o[r+24>>2]+44>>2],r+12|0,r+16|0,0,o[o[r+24>>2]+12>>2]<<1),o[n+8>>2]=c,e=o[o[r+24>>2]+48>>2],t=o[r+16>>2],o[r+16>>2]=t+1,o[e+(t<<2)>>2]=-1,e=o[o[r+24>>2]+48>>2],t=o[r+16>>2],o[r+16>>2]=t+1,o[e+(t<<2)>>2]=0,a[o[o[r+24>>2]+44>>2]+(o[r+12>>2]<<1)>>1]|o[r+8>>2]<0?o[r+28>>2]=o[r+12>>2]+1:o[r+28>>2]=0,l=r+32|0,o[r+28>>2]}(e|=0,t|=0)},llparser_get_input_buffer:function(e){var t;return e|=0,o[12+(t=l-16|0)>>2]=e,o[o[t+12>>2]+44>>2]},llparser_get_result:function(e){var t;return e|=0,o[12+(t=l-16|0)>>2]=e,o[o[t+12>>2]+48>>2]},wasm_main:y,__wbindgen_start:y}}({Math:Math,Int8Array:Int8Array,Uint8Array:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},0,n),i=o.memory,a=o.rust_calloc,s=o.rust_free,c=o.llparser_create,u=o.llparser_destroy,l=o.llparser_create_descriptor,f=o.llparser_descriptor_set_all,p=o.llparser_descriptor_set_nil,d=o.llparser_descriptor_add_char,h=o.llparser_descriptor_add_range,_=o.llparser_descriptor_revert,m=o.llparser_add_rule,v=o.llparser_prepare,y=o.llparser_parse,g=o.llparser_get_input_buffer,b=o.llparser_get_result,w=o.wasm_main,x=o.__wbindgen_start}])},"./exparser/src/fake-dom-element.js":e=>{var t=function(e){this.tagName=e,this.id="",this.attrs={}};t.toElement=function(e){var t=document.createElement(e.tagName);for(var r in e.id&&(t.id=e.id),e.attrs)t.setAttribute(r,e.attrs[r]);return t},t.fromElement=function(e){var r=new t(e.tagName);r.id=e.id;for(var n=e.attributes,o=0;o<n.length;o++)r.attrs[n[o].name]=n[o].value;return r},t.prototype.cloneNode=function(){var e=new t;for(var r in e.id=this.id,this.attrs)e.attrs[r]=this.attrs[r];return e},t.prototype.removeAttribute=function(e,t){delete this.attrs[e]},t.prototype.setAttribute=function(e,t){this.attrs[e]=t},t.prototype.getAttribute=function(e){return this.attrs[e]},e.exports=t},"./exparser/src/free-tmpl/consts.js":(e,t)=>{t.TAG_TYPES={TAG_START:1,TAG_END:-1,TEXT:3,COMMENT:8},t.RUNTIME_NAMES={MEMBER:"m",CALL:"f",METHODS:"e",CALLER:"c",TOP_SCOPE:"t",SUB_SCOPE:"s"};var r=t.STRING_UNESCAPE_MAP={n:"\n",r:"\r",b:"\b",f:"\f",t:"\t",v:"\v",'"':'"',"'":"'","\\":"\\","\r":"\r","\n":"\n"},n=t.STRING_ESCAPE_MAP={},o="";for(var i in r)n[r[i]]=i,o+=r[i];t.STRING_ESCAPE_REGEXP=new RegExp("["+o+"]","g")},"./exparser/src/free-tmpl/directive.js":(e,t,r)=>{e.exports={if:r("./exparser/src/free-tmpl/directives/if.js"),elif:r("./exparser/src/free-tmpl/directives/if.js"),else:r("./exparser/src/free-tmpl/directives/if.js"),for:r("./exparser/src/free-tmpl/directives/for.js"),key:r("./exparser/src/free-tmpl/directives/key.js"),"for-index":r("./exparser/src/free-tmpl/directives/for-index.js"),"for-item":r("./exparser/src/free-tmpl/directives/for-item.js"),alias:r("./exparser/src/free-tmpl/directives/alias.js")}},"./exparser/src/free-tmpl/directives/alias.js":(e,t,r)=>{var n=r("./exparser/src/free-tmpl/scope.js"),o=r("./exparser/src/free-tmpl/consts.js").RUNTIME_NAMES,i=r("./exparser/src/free-tmpl/exp-parser.js"),a=o.TOP_SCOPE+","+o.SUB_SCOPE+","+o.CALLER;e.exports={requireBlock:!0,precompile:function(e,t,r){var n=t.match(/^\{\{\s*([$_a-zA-Z][$_a-zA-Z0-9]*)\s*=(.+)\}\}$/);if(!n)throw new Error("Illegal expression is found in wx:alias.");var o=n[1],s=i.parse(n[2]),c=i.lvalueStringify(s,r),u=i.searchBindingPaths([s],r);return{s:[o],d:"function("+a+"){return "+i.stringify(s,r)+"}",l:c,b:u}},register:function(e,t,r){},create:function(e,t,r,o,i,a,s,c,u,l){var f=t.s[0],p=n.create(f,a,s,t.d,t.l,t.b),d={},h="";for(h in s)d[h]=s[h];d[f]=p;var _={};for(h in i)_[h]=i[h];_[f]=t.d(o,i,null);var m=u.createVirtualNode("wx:alias");return r.id&&(m.id=r.id),l(r.c,u,m,o,_,a,d,c),m}}},"./exparser/src/free-tmpl/directives/for-index.js":e=>{e.exports={attachedToBlock:"for",precompile:function(e,t,r,n){var o=t.match(/^\s*([$_a-zA-Z][$_a-zA-Z0-9]*)\s*$/);if(!o)throw new Error("Illegal variable name is found in wx:for-index.");return{s:[o[1]],d:'"'+o[1]+'"'}},register:function(e,t,r){r._wxForIndex=t.d},create:function(){}}},"./exparser/src/free-tmpl/directives/for-item.js":e=>{e.exports={attachedToBlock:"for",precompile:function(e,t,r){var n=t.match(/^\s*([$_a-zA-Z][$_a-zA-Z0-9]*)\s*$/);if(!n)throw new Error("Illegal variable name is found in wx:for-item.");return{s:[n[1]],d:'"'+n[1]+'"'}},register:function(e,t,r){r._wxForItem=t.d},create:function(){}}},"./exparser/src/free-tmpl/directives/for.js":(e,t,r)=>{r("./exparser/src/virtual-node.js");var n=r("./exparser/src/free-tmpl/scope.js"),o=r("./exparser/src/free-tmpl/consts.js").RUNTIME_NAMES,i=r("./exparser/src/free-tmpl/exp-parser.js"),a=o.TOP_SCOPE+","+o.SUB_SCOPE+","+o.CALLER;e.exports={requireBlock:!0,addDefaultAttrs:[{n:"wx:for-index",v:"index"},{n:"wx:for-item",v:"item"}],precompile:function(e,t,r){var n=t.match(/^\{\{(.+)\}\}$/);if(!n)throw new Error("Illegal expression is found in wx:for.");var o=i.parse(n[1]),s=i.lvalueStringify(o,r),c=i.searchBindingPaths([o],r);return{s:[],d:"function("+a+"){return "+i.stringify(o,r)+"}",l:s,b:c}},register:function(e,t,r){},create:function(e,t,r,o,i,a,s,c,u,l){var f=r._wxForIndex||"index",p=r._wxForItem||"item",d=r._wxKey,h=u.createVirtualNode("wx:for:list");r.id&&(h.id=r.id),n.create("",a,s,(function(e,r,n){var o=t.d(e,r,null);return g(o,e,r,n),o}),t.l,t.b);var _=function(e,t,o,i,d){var _=u.createVirtualNode("wx:for:item"),m=n.proxyTopScope(a),v=n.proxySubScopes(s);_.__wxTopScope=m,_.__wxSubScopes=v,_.__wxForToRemove=!1,_.__wxForKeyStr="";var y=n.create(f,m,v,null,null,[]),g=n.create(p,m,v,null,[o],[]);return v[f]=y,v[p]=g,t[f]=o,t[p]=i,l(r.c,u,_,e,t,m,v,c),void 0===d?h.appendChild(_):h.insertBefore(_,d),_},m=function(e,t,r,i,a,s){var c=e.__wxSubScopes[p];n.updateLvaluePath(c,[i]),a&&(s?h.insertBefore(e,s):h.appendChild(e));var u=e.__wxSubScopes[f];r[f]=i,n.updateBinding(u,[],o,r,t)},v=function(e,t,r,o,i,a){o[p]=i,n.updateBinding(e.__wxSubScopes[p],t,r,o,a)},y=function(e){for(var t in n.removeBindingsForScope(e.__wxTopScope),h.__wxSubScopes)n.removeBindingsForScope(e.__wxSubScopes[t]);h.removeChild(e)},g=function(e,t,r,n){var o="",i=e;"object"==typeof e&&null!==e||(i=[]);var a={};for(o in r)a[o]=r[o];var s=0;if(d){var c=[],u=e instanceof Array,l=[];if(!u){var f=i;for(o in i=[],f)i.push(f[o]),l.push(o)}for(s=0;s<i.length;s++)c.push(String(i[s][d]));if(0===i.length)for(;h.childNodes.length;)y(h.childNodes[0]);else{var p=Object.create(null),g=Object.create(null),b=h.childNodes,w=null,x="";for(s=0;s<b.length;s++)p[x=(w=b[s]).__wxForKeyStr]>=0?(y(w),s--):(p[x]=s,g[x]=w,w.__wxForToRemove=!0);var S=-1,E=0,T=1,C=[];for((E=p[i[0][d]])>=0||(E=-1),b[E]&&(b[E].__wxForToRemove=!1),s=1;s<i.length;s++)(T=p[i[s][d]])>=0&&(S<E&&(E<T||S>T)&&(C.push(b[E]),S=E),b[E=T]&&(b[E].__wxForToRemove=!1));for(S<E&&C.push(b[E]),s=0;s<b.length;s++)(w=b[s]).__wxForToRemove&&(y(w),s--);var A=C.shift(),O=0;for(s=0;s<i.length;s++){var M=i[s],R=g[M[d]];if(g[M[d]]=null,R){var P=!0;if(R===A){for(;b[O]!==A;)O++;O++,A=C.shift(),P=!1}m(w=R,n,a,u?s:l[s],P,b[O]),P&&b[O]===w&&O++,v(w,[],t,a,i[s],n)}else w=_(t,a,u?s:l[s],i[s],b[O]),O++,w.__wxForKeyStr=String(M[d])}}}else{for(;h.childNodes.length;)y(h.childNodes[0]);if(e instanceof Array)for(s=0;s<i.length;s++)_(t,a,s,i[s]);else for(o in i)_(t,a,o,i[o])}};return g(t.d(o,i,null),o,i,null),h}}},"./exparser/src/free-tmpl/directives/if.js":(e,t,r)=>{var n=r("./exparser/src/free-tmpl/scope.js"),o=r("./exparser/src/free-tmpl/consts.js").RUNTIME_NAMES,i=r("./exparser/src/free-tmpl/exp-parser.js"),a=o.TOP_SCOPE+","+o.SUB_SCOPE+","+o.CALLER;e.exports={requireBlock:!0,precompile:function(e,t,r){if("else"===e)return{s:[],d:"true"};var n=t.match(/^\{\{(.+)\}\}$/);if(!n)throw new Error("Illegal expression is found in wx:"+e+".");var o=i.parse(n[1]),s=i.searchBindingPaths([o],r);return{s:[],d:"function("+a+"){return "+i.stringify(o,r)+"}",b:s}},register:function(e,t,r){},create:function(e,t,r,o,i,a,s,c,u,l,f){var p=u.createVirtualNode("wx:"+e);p.__wxIfCondValue=!0,p.__wxIfNextNode=null,p.__wxIfHasTrueCond=!0;var d=null;"if"!==e&&("wx:if"!==(d=f.childNodes[f.childNodes.length-1]).is&&"wx:elif"!==d.is?d=null:d.__wxIfNextNode=p),r.id&&(p.id=r.id);var h=p.__wxIfUpdateNode=function(){var e=p.__wxIfCondValue;if(d&&d.__wxIfHasTrueCond&&(e=!1),e&&!p.childNodes.length){var t=n.proxyTopScope(a),f=n.proxySubScopes(s);p.__wxTopScope=t,p.__wxSubScopes=f,l(r.c,u,p,o,i,t,f,c)}else if(!e&&p.childNodes.length){for(var h in n.removeBindingsForScope(p.__wxTopScope),p.__wxSubScopes)n.removeBindingsForScope(p.__wxSubScopes[h]);for(;p.childNodes.length;)p.removeChild(p.childNodes[0])}p.__wxIfNextNode&&p.__wxIfNextNode.__wxIfUpdateNode()},_=function(e){p.__wxIfCondValue=!!e,p.__wxIfHasTrueCond=p.__wxIfCondValue||d&&d.__wxIfHasTrueCond,h()};return"else"===e?_(!0):(n.addBindings(a,s,t.b,p,{e:t.d,o:function(e,t,r){_(r)}}),_(t.d(o,i,null))),p}}},"./exparser/src/free-tmpl/directives/key.js":e=>{e.exports={attachedToBlock:!0,precompile:function(e,t,r){var n=t.match(/^\s*([$_a-zA-Z][$_a-zA-Z0-9]*)\s*$/);if(!n)throw new Error("Illegal variable name is found in wx:for-key.");return{s:[],d:'"'+n[1]+'"'}},register:function(e,t,r){r._wxKey=t.d},create:function(){}}},"./exparser/src/free-tmpl/exp-parser.js":(e,t,r)=>{var n=r("./exparser/src/asm-ll-parser.js"),o=r("./exparser/src/free-tmpl/consts.js").RUNTIME_NAMES,i=r("./exparser/src/free-tmpl/consts.js").STRING_UNESCAPE_MAP,a=r("./exparser/src/free-tmpl/consts.js").STRING_ESCAPE_MAP,s=r("./exparser/src/free-tmpl/consts.js").STRING_ESCAPE_REGEXP,c=null,u=" \n\r\t\f",l=["true","false","null","undefined"];t.parse=function(e){return c||(c=n.create({VARIABLE:[{id:"_concat",states:["a-zA-Z_$","VARIABLE_AFTER"]}],VARIABLE_AFTER:[{id:"_concat",states:["a-zA-Z_$0-9","VARIABLE_AFTER"]},{id:"_null",states:["NULL"]}],STRING:[{id:"str^",states:["'","STRING_INNER_1","'"]},{id:"str^",states:['"',"STRING_INNER_2",'"']}],STRING_INNER_1:[{id:"_concat",states:["STRING_INNER_1","STRING_INNER_1_CHAR"]},{id:"_jump",states:["STRING_INNER_1_CHAR"]},{id:"_jump",states:["NULL"]}],STRING_INNER_1_CHAR:[{id:"_jump",states:["^'\\"]},{id:"str\\",states:["\\","nrbftv'\"\\\r\n"]}],STRING_INNER_2:[{id:"_concat",states:["STRING_INNER_2","STRING_INNER_2_CHAR"]},{id:"_jump",states:["STRING_INNER_2_CHAR"]},{id:"_jump",states:["NULL"]}],STRING_INNER_2_CHAR:[{id:"_jump",states:['^"\\']},{id:"str\\",states:["\\","nrbftv'\"\\\r\n"]}],NUMBER:[{id:"_concat",states:["NUMBER_BEFORE_E","NUMBER_E"]}],NUMBER_E:[{id:"_concat",states:["e","NUMBER_AFTER_E"]},{id:"_null",states:["NULL"]}],NUMBER_AFTER_E:[{id:"_concat",states:["-","NUMBER_AFTER_E-INT"]},{id:"_jump",states:["NUMBER_AFTER_E-INT"]}],"NUMBER_AFTER_E-INT":[{id:"_concat",states:["NUMBER_AFTER_E-INT","0-9"]},{id:"_jump",states:["0-9"]}],NUMBER_BEFORE_E:[{id:"_concat",states:[".","NUMBER_AFTER_DOT"]},{id:"_concat",states:["0","NUMBER_AFTER_ZERO"]},{id:"_concat",states:["1-9","NUMBER_AFTER_NON_ZERO"]}],NUMBER_AFTER_ZERO:[{id:"_concat",states:["x","NUMBER_BASE_16"]},{id:"_jump",states:["NUMBER_AFTER_NON_ZERO"]},{id:"_null",states:["NULL"],overwrite:!0}],NUMBER_BASE_16:[{id:"_concat",states:["0-9a-fA-F","NUMBER_BASE_16-AFTER"]}],"NUMBER_BASE_16-AFTER":[{id:"_concat",states:["0-9a-fA-F","NUMBER_BASE_16-AFTER"]},{id:"_null",states:["NULL"],overwrite:!0}],NUMBER_AFTER_NON_ZERO:[{id:"_concat",states:[".","NUMBER_AFTER_DOT"]},{id:"_concat",states:["0-9","NUMBER_AFTER_NON_ZERO"]},{id:"_null",states:["NULL"],overwrite:!0}],NUMBER_AFTER_DOT:[{id:"_concat",states:["NUMBER_AFTER_DOT","0-9"]},{id:"_jump",states:["0-9"]}],VALUE:[{id:"_blank",states:[u,"VALUE"],overwrite:!0},{id:"_jump",states:["VALUE_NOSPACE"]}],VALUE_NOSPACE:[{id:"_jump",states:["VALUE_NOSPACE",u]},{id:"var",states:["VARIABLE"]},{id:"str",states:["STRING"]},{id:"num",states:["NUMBER"]},{id:"()",states:["(","COMMA",")"]},{id:"al",states:["[","ARRAY_ITEMS","]"]},{id:"ol",states:["{","OBJECT_ITEMS","}"]}],ARRAY_ITEMS:[{id:"_blank",states:[u,"ARRAY_ITEMS"],overwrite:!0},{id:"_jump",states:["ARRAY_ITEMS_NOSPACE"]}],ARRAY_ITEMS_NOSPACE:[{id:"_join",states:["ARRAY_ITEMS_NOSPACE",",","ARRAY_ITEM"]},{id:"_jump",states:["ARRAY_ITEM"]},{id:"_empty",states:["NULL"],overwrite:!0}],ARRAY_ITEM:[{id:"_blank",states:[u,"ARRAY_ITEM"],overwrite:!0},{id:"_jump",states:["ARRAY_ITEM_NOSPACE"]}],ARRAY_ITEM_NOSPACE:[{id:"ai",states:["CONDITIONAL"]},{id:"aie",states:["NULL"],overwrite:!0}],OBJECT_ITEMS:[{id:"_join",states:["OBJECT_ITEMS",",","OBJECT_ITEM_AFTER_COMMA"]},{id:"_jump",states:["OBJECT_ITEM"]},{id:"_empty",states:["NULL"],overwrite:!0}],OBJECT_ITEM_AFTER_COMMA:[{id:"_blank",states:[u,"OBJECT_ITEM_AFTER_COMMA"],overwrite:!0},{id:"_jump",states:["OBJECT_ITEM"]},{id:"_empty",states:["NULL"],overwrite:!0}],OBJECT_ITEM:[{id:"_blank",states:[u,"OBJECT_ITEM"],overwrite:!0},{id:"_jump",states:["OBJECT_ITEM_NOSPACE"]}],OBJECT_ITEM_NOSPACE:[{id:"_jump",states:["OBJECT_ITEM_NOSPACE",u]},{id:"onv",states:["VARIABLE","OBJECT_ITEM_AFTER"]},{id:"ons",states:["STRING","OBJECT_ITEM_AFTER"]},{id:"onn",states:["NUMBER","OBJECT_ITEM_AFTER"]}],OBJECT_ITEM_AFTER:[{id:"_blank",states:[u,"OBJECT_ITEM_AFTER"],overwrite:!0},{id:"ov",states:[":","CONDITIONAL"]},{id:"_null",states:["NULL"]}],MEMBER:[{id:"_jump",states:["MEMBER",u]},{id:"_op2",states:["MEMBER",".","VARIABLE_WITH_BLACK"]},{id:"[]",states:["MEMBER","[","CONDITIONAL","]"]},{id:"f()",states:["MEMBER","(","FUNCARGS",")"]},{id:"_jump",states:["VALUE"]}],VARIABLE_WITH_BLACK:[{id:"_blank",states:[u,"VARIABLE_WITH_BLACK"],overwrite:!0},{id:"_jump",states:["VARIABLE"]}],FUNCARGS:[{id:"_blank",states:[u,"FUNCARGS"],overwrite:!0},{id:"_join",states:["FUNCARGS",",","CONDITIONAL"]},{id:"fa",states:["CONDITIONAL"]},{id:"_empty",states:["NULL"],overwrite:!0}],LOGICAL:[{id:"_blank",states:[u,"LOGICAL"],overwrite:!0},{id:"_jump",states:["LOGICAL_NOSPACE"]}],LOGICAL_NOSPACE:[{id:"!",states:["!","LOGICAL"]},{id:"!",states:["+","LOGICAL"]},{id:"!",states:["-","LOGICAL"]},{id:"_jump",states:["MEMBER"]}],MULTIPLY:[{id:"_op2",states:["MULTIPLY","*","LOGICAL"]},{id:"_op2",states:["MULTIPLY","/","LOGICAL"]},{id:"_op2",states:["MULTIPLY","%","LOGICAL"]},{id:"_jump",states:["LOGICAL"]}],ADDITION:[{id:"_op2",states:["ADDITION","+","MULTIPLY"]},{id:"_op2",states:["ADDITION","-","MULTIPLY"]},{id:"_jump",states:["MULTIPLY"]}],COMPARISON:[{id:"<>",states:["COMPARISON","<","COMPARISON_AFTER"]},{id:"<>",states:["COMPARISON",">","COMPARISON_AFTER"]},{id:"_jump",states:["ADDITION"]}],COMPARISON_AFTER:[{id:"a=",states:["=","ADDITION"]},{id:"_jump",states:["ADDITION"]}],EQUALITY:[{id:"=!",states:["EQUALITY","=","=","EQUALITY_AFTER"]},{id:"=!",states:["EQUALITY","!","=","EQUALITY_AFTER"]},{id:"_jump",states:["COMPARISON"]}],EQUALITY_AFTER:[{id:"a=",states:["=","COMPARISON"]},{id:"_jump",states:["COMPARISON"]}],LOGICAL_AND:[{id:"&&||",states:["LOGICAL_AND","&","&","EQUALITY"]},{id:"_jump",states:["EQUALITY"]}],LOGICAL_OR:[{id:"&&||",states:["LOGICAL_OR","|","|","LOGICAL_AND"]},{id:"_jump",states:["LOGICAL_AND"]}],CONDITIONAL:[{id:"?",states:["LOGICAL_OR","CONDITIONAL_AFTER"]}],CONDITIONAL_AFTER:[{id:"?:",states:["?","LOGICAL_OR",":","CONDITIONAL"]},{id:"_null",states:["NULL"]}],COMMA:[{id:",",states:["COMMA",",","CONDITIONAL"]},{id:"_jump",states:["CONDITIONAL"]}]},{_null:function(e){},_empty:function(e){return[]},_jump:function(e){return e[0]},_concat:function(e){return(e[0]||"")+(e[1]||"")},_blank:function(e){return e[1]},"str^":function(e){return e[1]},"str\\":function(e){if(!i[e[1]])throw new Error('String escaping "\\'+e[1]+'" is currently not supported.');return i[e[1]]},var:function(e){return{p:"var",v:e[0]}},str:function(e){return{p:"str",v:e[0]}},num:function(e){return{p:"num",v:Number(e[0])}},"()":function(e){return{p:"()",v:e[1]}},al:function(e){return e[1].forEach((function(t,r){null===t&&(r!==e[1].length-1?e[1][r]={p:"var",v:"undefined"}:e[1].pop())})),{p:"arr",v:e[1]}},ai:function(e){return[e[0]]},aie:function(e){return[null]},_join:function(e){return e[0].concat(e[2])},ol:function(e){for(var t={},r=e[1],n=0;n<r.length;n++)t[r[n].n]=r[n].v;return{p:"obj",v:t}},onv:function(e){return[{n:e[0],v:e[1]||{p:"var",v:e[0]}}]},ons:function(e){return[{n:e[0],v:e[1]||{p:"str",v:e[0]}}]},onn:function(e){return[{n:e[0],v:e[1]||{p:"num",v:Number(e[0])}}]},ov:function(e){return e[1]},"!":function(e){return{p:e[0]+"n",v:e[1]}},_op1:function(e){return{p:e[0],v:e[1]}},_op2:function(e){return{p:e[1],v:[e[0],e[2]]}},"f()":function(e){return{p:"f()",v:[e[0],e[2]]}},fa:function(e){return[e[0]]},"[]":function(e){return{p:"[]",v:[e[0],e[2]]}},"<>":function(e){return"a="===e[2].p?{p:e[1]+"=",v:[e[0],e[2].v]}:{p:e[1],v:[e[0],e[2]]}},"a=":function(e){return{p:"a=",v:e[1]}},"=!":function(e){return"a="===e[3].p?{p:e[1]+"==",v:[e[0],e[3].v]}:{p:e[1]+"=",v:[e[0],e[3]]}},"&&||":function(e){return{p:e[1]+e[2],v:[e[0],e[3]]}},"?":function(e){return e[1]?{p:"?:",v:[e[0],e[1][0],e[1][1]]}:e[0]},"?:":function(e){return[e[1],e[3]]},",":function(e){return{p:",",v:[e[0],e[2]]}}})),c.parse("COMMA",e)};var f=t.stringify=function(e,t){var r=function(e){var n=[];switch(e.p){case"var":return l.indexOf(e.v)>=0?e.v:t.indexOf(e.v)>=0?o.SUB_SCOPE+"."+e.v:o.TOP_SCOPE+"."+e.v;case"str":return'"'+e.v.replace(s,(function(e){return"\\"+a[e]}))+'"';case"num":return e.v;case"arr":return e.v.forEach((function(e){n.push(r(e))})),"["+n.join(",")+"]";case"obj":for(var i in e.v){var c='"'+i.replace(s,(function(e){return"\\"+a[e]}))+'"';n.push(c+":"+r(e.v[i]))}return"{"+n.join(",")+"}";case"()":return"("+r(e.v)+")";case".":return o.MEMBER+"("+r(e.v[0])+',"'+e.v[1]+'")';case"[]":return o.MEMBER+"("+r(e.v[0])+","+r(e.v[1])+")";case"f()":if("var"!==e.v[0].p)throw new Error("The function name could only be a variable identifier.");return e.v[1].forEach((function(e){n.push(r(e))})),o.CALL+"("+o.CALLER+","+o.METHODS+',"'+e.v[0].v+'",['+n.join(",")+"])";case"!n":case"+n":case"-n":return"("+e.p[0]+r(e.v)+")";case"+":case"-":case"*":case"/":case"%":case">":case"<":case">=":case"<=":case"==":case"!=":case"===":case"!==":case"&&":case"||":case",":return r(e.v[0])+e.p+r(e.v[1]);case"?:":return r(e.v[0])+"?"+r(e.v[1])+":"+r(e.v[2]);default:throw new Error("The AST is illegal.")}};return"("+r(e)+")"};t.lvalueStringify=function(e,t){for(var r=[],n=e;n;){if("var"===n.p)return l.indexOf(n.v)>=0?null:t.indexOf(n.v)>=0?'["'+n.v+'",'+r.join(",")+"]":"[null,"+r.join(",")+"]";if("."!==n.p)if("[]"!==n.p){if("()"!==n.p)return null;n=n.v}else r.unshift(f(n.v[1],t)),n=n.v[0];else r.unshift('"'+n.v[1]+'"'),n=n.v[0]}return null},t.searchBindingPaths=function(e,t){var r=[],n="",o=function(e,i,a){if(a>1)throw new Error("Dynamical binding paths are not supported.");switch(e.p){case"var":if(i){if(l.indexOf(e.v)>=0)return;return t.indexOf(e.v)>=0?['"'+e.v+'"']:['null,"'+e.v+'"']}if(a>=1)throw new Error("Dynamical binding paths are not supported.");if(l.indexOf(e.v)>=0)return;return void(t.indexOf(e.v)>=0?r.push('["'+e.v+'"]'):r.push('[null,"'+e.v+'"]'));case"str":case"num":case"arr":case"obj":return;case"()":return o(e.v,i,a);case".":if(i){if(!(n=o(e.v[0],!0,a)))return;return n.push('"'+e.v[1]+'"'),n}if(!(n=o(e.v[0],!0,a+1)))return;return n.push('"'+e.v[1]+'"'),void r.push("["+n.join(",")+"]");case"[]":if(i){if(!(n=o(e.v[0],!0,a)))return;return o(e.v[1],!0,a),n.push(f(e.v[1])),n}if(!(n=o(e.v[0],!0,a+1)))return;return o(e.v[1],!0,a+1),n.push(f(e.v[1])),void r.push("["+n.join(",")+"]");case"f()":return o(e.v[0],!1,a),void e.v[1].forEach((function(e){o(e,!1,a)}));case"!n":case"+n":case"-n":return void o(e.v,!1,a);case"+":case"-":case"*":case"/":case"%":case">":case"<":case">=":case"<=":case"==":case"!=":case"===":case"!==":case"&&":case"||":case",":return o(e.v[0],!1,a),void o(e.v[1],!1,a);case"?:":return o(e.v[0],!1,a),o(e.v[1],!1,a),void o(e.v[2],!1,a);default:throw new Error("The AST is illegal.")}};return e.forEach((function(e){o(e,!1,0)})),"["+r.join(",")+"]"}},"./exparser/src/free-tmpl/html-parser.js":(e,t,r)=>{var n=r("./exparser/src/asm-ll-parser.js"),o=r("./exparser/src/free-tmpl/consts.js").TAG_TYPES,i=r("./exparser/src/global-options.js"),a={amp:"&",gt:">",lt:"<",nbsp:" ",quot:'"',apos:"'"},s=" \n\r\t\f",c=/^[ \n\r\t\f]+|[ \n\r\t\f]+$/g,u={};["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].forEach((function(e){u[e]=!0}));var l=i.hasDOMBackend?document.createElement("div"):null,f=function(e){return e.replace(/&(([a-zA-Z]+)|(#x{0,1}[\da-zA-Z]+));/gi,(function(e,t){return a[t]?a[t]:/^#[0-9]{1,4}$/.test(t)?String.fromCharCode(t.slice(1)):/^#x[0-9a-f]{1,4}$/i.test(t)?String.fromCharCode("0"+t.slice(1)):i.hasDOMBackend?function(e){return l?(l.innerHTML=e,l.innerText||l.textContent):e}(e):e}))},p=null,d=null,h=function(e){return n.create({HTML:[{id:"tag",states:["HTML","TAG"]},{id:"text",states:["HTML","TEXT"]},{id:"tag1",states:["TAG"]},{id:"text1",states:["TEXT"]},{id:"_null",states:["NULL"],overwrite:!0}],TEXT:[{id:"_raw",states:["TEXT","^<"]},{id:"_jump",states:["^<"]},{id:"_jump",states:["NULL"]}],TAG:[{id:"_blank",states:["<","TAG_START"]}],TAG_END:[{id:"_blankConcat",states:["/","TAG_END_NAME",">"]},{id:"_jump",states:[">"]}],TAG_START:[{id:"comment",states:["!","-","-","COMMENT_CONTENT"]},{id:"endTag",states:["/","TAG_END_NAME",">"]},{id:"startTag",states:["TAG_START_NAME","ATTRS","TAG_END"]},{id:"_blank",states:[s,"TAG_START"]}],TAG_START_NAME:[{id:"_raw",states:["TAG_START_NAME","^>/"+s]},{id:"_jump",states:["^>/"+s]}],TAG_END_NAME:[{id:"_raw",states:["TAG_END_NAME","^>"]},{id:"_jump",states:["^>"]},{id:"_jump",states:["NULL"]}],ATTRS:[{id:"_blank",states:[s,"ATTRS"]},{id:"_jump",states:["ATTRS",s]},{id:"attrs",states:["ATTR","ATTRS"]},{id:"_null",states:["NULL"],overwrite:!0}],ATTR:[{id:"attr",states:["ATTR_NAME","ATTR_NAME_AFTER"]}],ATTR_NAME:[{id:"_raw",states:["ATTR_NAME","^=>/"+s]},{id:"_jump",states:["^=>/"+s]}],ATTR_NAME_AFTER:[{id:"_blank",states:[s,"ATTR_NAME_AFTER"]},{id:"_blank",states:["=","ATTR_VALUE"]},{id:"_empty",states:["NULL"]}],ATTR_VALUE:[{id:"_blank",states:[s,"ATTR_VALUE"]},{id:"_blank",states:['"',"ATTR_VALUE_INNER_1",'"']},{id:"_blank",states:["'","ATTR_VALUE_INNER_2","'"]},{id:"_jump",states:["ATTR_VALUE_INNER_3"]},{id:"_empty",states:["NULL"]}],ATTR_VALUE_INNER_1:[{id:"_raw",states:["ATTR_VALUE_INNER_1",'^"']},{id:"_jump",states:['^"']},{id:"_jump",states:["NULL"]}],ATTR_VALUE_INNER_2:[{id:"_raw",states:["ATTR_VALUE_INNER_2","^'"]},{id:"_jump",states:["^'"]},{id:"_jump",states:["NULL"]}],ATTR_VALUE_INNER_3:[{id:"_raw",states:["ATTR_VALUE_INNER_3","^>"+s]},{id:"_jump",states:["^>"+s]},{id:"_jump",states:["NULL"]}],COMMENT_CONTENT:[{id:"_concat",states:["ALL","COMMENT_CONTENT"]},{id:"_concat",states:["-","COMMENT_CONTENT_DASH_1"]}],COMMENT_CONTENT_DASH_1:[{id:"_concat",states:["ALL","COMMENT_CONTENT"]},{id:"_concat",states:["-","COMMENT_CONTENT_DASH_2"]}],COMMENT_CONTENT_DASH_2:[{id:"_concat",states:["ALL","COMMENT_CONTENT"]},{id:"_concat",states:["-","COMMENT_CONTENT_DASH_2"]},{id:"_jump",states:[">"]}]},{_null:function(){},_empty:function(){return""},_jump:function(e){return e[0]},_raw:function(e){return e[0]+e[1]},_concat:function(e){return e[0]+e[1]},_blankConcat:function(e){return e[0]+e[2]},_blank:function(e){return e[1]},attr:function(e){return[{n:e[0],v:f(e[1])}]},attrs:function(e){return e[1]?e[0].concat(e[1]):e[0]},startTag:function(e){var t=e[0].toLowerCase();return{t:o.TAG_START,n:"wx-"+t,a:e[1]||[],selfClose:"/>"===e[2]||u[t]}},endTag:function(e){return{t:o.TAG_END,n:"wx-"+e[1].toLowerCase()}},comment:function(e){return{t:o.COMMENT,c:e[3].slice(0,-3)}},tag1:function(e){return[e[0]]},text1:function(e){return[{t:o.TEXT,c:e[0]}]},tag:function(e){return e[0].push(e[1]),e[0]},text:function(e){var t=e[0];return t[t.length-1].t===o.TEXT?t[t.length-1].c+=e[1]:t.push({t:o.TEXT,c:e[1]}),t}},e)};t.TAG_TYPES=o,t.decodeEntities=f,t.parse=function(e,t){var r=null;e.length<=65536?(p||(p=h(65536)),r=p):(d||(d=h(1048576)),r=d);var n=function(e,t){for(var r={c:[]},n=r,i=[],a=null,s=0;s<e.length;s++){var u=e[s];if(u.t===o.TAG_START)a={t:o.TAG_START,n:u.n,a:u.a,c:[]},n.c.push(a),u.selfClose||(i.push(n),n=a);else if(u.t===o.TAG_END){var l=i.length-1,p=!0;for(a=n;u.n!==a.n;)if(!(a=i[l--])){p=!1;break}if(p)for(;i.length>l;)n=i.pop()}else u.t===o.TEXT&&(u.c=f(t?u.c:u.c.replace(c,"")),u.c&&n.c.push(u))}return r}(r.parse("HTML",e)||[],t);return n.c}},"./exparser/src/free-tmpl/index.js":(e,t,r)=>{var n=r("./exparser/src/global-options.js"),o=r("./exparser/src/func-arr.js"),i=r("./exparser/src/element.js"),a=r("./exparser/src/native-node.js"),s=r("./exparser/src/text-node.js"),c=r("./exparser/src/shadow-root.js"),u=r("./exparser/src/component.js"),l=r("./exparser/src/free-tmpl/scope.js"),f=r("./exparser/src/free-tmpl/directive.js"),p=function(){};p.prototype=Object.create(Object.prototype,{constructor:{value:p,writable:!0,configurable:!0}});var d=function(){};d.prototype=Object.create(Object.prototype,{constructor:{value:d,writable:!0,configurable:!0}});var h,_=null;_=r("./exparser/src/free-tmpl/precompiler.js"),h=r("./exparser/src/free-tmpl/html-parser.js"),p.precompileAndGetCreator=function(e){var t="__exparserFreeTmpl",n=new(r("../../node_modules/.pnpm/vm-browserify@1.1.2/node_modules/vm-browserify/index.js").Script)("global."+t+"="+_.compile(e),{displayErrors:!0});n.runInThisContext(n);var o=r.g[t];return r.g[t]=null,o},p.precompiler=_,p.htmlParser=h;var m=function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},v=Object.prototype.hasOwnProperty,y=function(e,t){if(null!==e&&"object"==typeof e&&v.call(e,t))return e[t]},g=function(e,t,r,n){if(v.call(t,r)){var i=t[r];if("function"==typeof i)return o.safeCallback("Template Method",i,e,n)}},b={t:1,n:'"slot"',v:!0,sn:"",a:[],c:[],p:null},w=function(e,t,r){e.classList.toggle(t,!!r)},x=function(e,t,r){e[t]=r},S=function(e,t,r){var n=e.__dataProxy;n.scheduleReplace([t],r),n.doUpdates()},E=function(e,t,r){e.class=r},T=function(e,t,r){"dom"===n.documentBackend?e.setAttribute("style",r):"custom"===n.documentBackend&&e.setStyle(r)},C=function(e,t,r){e.setAttribute("class",r)},A=function(e,t,r){e.textContent=r},O=function(e,t,r){e.dataset||(e.dataset={}),e.dataset[t]=r},M={$:function(e,t,r){!0===r?e.setAttribute(t,""):!1===r||null==r?e.removeAttribute(t):e.setAttribute(t,r)},":":x,c:w,s:function(e,t,r){var n=e.style;n&&(n[t]=r)},d:O},R=function(e,t,r){return[{t:1,n:"slot",v:!0,sn:"",a:[],c:[]}]};p.create=function(e,t,r,n){var i=void 0===e.template?R:e.template,a=i;if("function"!=typeof i)if(_&&void 0!==window&&"undefined"!=typeof document){var s="__exparserFreeTmpl",c=_.compile(i),u=document.createElement("script");u.type="text/javascript",u.innerHTML="window."+s+"="+c,document.head.appendChild(u),document.head.removeChild(u),a=window[s],window[s]=null}else if("undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node)a=p.precompileAndGetCreator(i);else if(_){var l=_.compile(i);a=new Function("return "+l)()}else o.hasGlobalWarningListeners()&&o.triggerWarning("Non-precompiled template is not usable in this environment. Empty template is used instead."),a=R;var f=Object.create(p.prototype);return f._initValuesJSON=JSON.stringify(r),f._dataJSON=t!==r?JSON.stringify(t):null,f._tagTreeRoot=P(a,r,e.methods,n),f._renderingMode=n.renderingMode,f};var P=function(e,t,r,o){var i="native"===o.renderingMode,s=i,c=!1,u=Object.create(null);i&&!n.hasDOMBackend&&(e=R);var l={},p=e(y,g,r),d=function(e){for(var r=0;r<e.length;r++){var o=e[r];if(3!==o.t){var u=o.n,p=!(i||"string"==typeof u&&u.startsWith("wx-xr-"));"slot"===u&&""===o.sn&&(c=!0),o.n=u;var h=o.st;h&&h.e&&(h.o=T,s&&(h.v=h.e(t,l,null)));var _=o.cl;_&&_.e&&(_.o=i?C:E,s&&(_.v=_.e(t,l,null)));var v=null;p||(o.p=v=i?document.createElement(o.n):a.create(o.n),h&&void 0!==h.v&&("dom"===n.documentBackend?v.setAttribute("style",h.v):"custom"===n.documentBackend&&v.__domElement.setStyle(h.v)),i&&_&&void 0!==_.v&&v.setAttribute("class",_.v));for(var y=o.a,g=0;g<y.length;g++){var b=y[g];if(b.d)i||f[b.n].register(b.n,b,o);else{i||("bind"===b.n.slice(0,4)?(b.evCatch=!1,b.ev=m(b.n.slice(4)),":"===b.ev[0]&&(b.ev=b.ev.slice(1))):"catch"===b.n.slice(0,5)&&(b.evCatch=!0,b.ev=m(b.n.slice(5)),":"===b.ev[0]&&(b.ev=b.ev.slice(1))));var O=b.o;if(p)O?b.o="&"===O?M[":"]:M[O]:(b.o=M[":"],b.n=m(b.n)),b.o===x&&(b.o=S),s&&b.e&&(b.v=b.e(t,l,null));else if(!b.ev){var R=M;b.o=O?"&"===O?R[":"]:R[O]:R.$,s?(b.e&&(b.v=b.e(t,l,null)),(b.o!==w||i)&&b.o(v,b.n,b.v)):b.e||b.o(v,b.n,b.v)}}}d(o.c),i&&(1!==o.c.length||void 0===o.c[0].sn||o.c[0].compressed||(o.sn=o.c[0].sn,o.compressed=!0,o.c.pop()))}else o.e&&(o.o=A,o.c=s?o.e(t,l,null):"")}};return d(p,u,!0),i&&(c||p.push(b),1!==p.length||""!==p[0].sn||p[0].compressed||p.pop()),p},I=function(e,t){return function(r){if(this[e](r),t)return!1}},N=function(e,t,r,o,a,s,c,p){for(var d=null,h=0,_=null,m=0;m<e.length;m++){var v=c,y=e[m];if(3===y.t)d=y.e?t.createTextNode(y.e(o,a,null)):t.createTextNode(y.c),y.e&&l.addBindings(s,v,y.b,d,y),i.appendChild(r,d);else{var g=y.cl,b=y.st,E=y.a,T=!1;for(h=0;h<E.length;h++)if((_=E[h]).d){var C=f[_.n].create(_.n,_,y,o,a,s,v,p,t,N,r);if(f[_.n].requireBlock){d=C,i.appendChild(r,d),T=!0;break}}if(T)continue;if(y.v)d=t.createVirtualNode(y.n);else if(y.p){for(d=t.cloneNativeNode(y.p),h=0;h<E.length;h++)(_=E[h]).d||(_.ev?p(d,_.ev,_.v,_.evCatch):_.o===x?d.__domElement&&(_.o(d.__domElement,_.n,_.e(o,a,null)),l.addBindings(s,v,_.b,d.__domElement,_)):(_.e&&_.o(d,_.n,_.e(o,a,null)),(_.e||_.o===w||_.o===O)&&l.addBindings(s,v,_.b,d,_)));b&&b.e&&("dom"===n.documentBackend?d.setAttribute("style",b.e(o,a,null)):"custom"===n.documentBackend&&d.__domElement.setStyle(b.e(o,a,null)),l.addBindings(s,v,b.b,d,b))}else{if(y.cpf){var A={},M=t.__wxHost;for(var R in y.cpf)!function(e){var t=y.cpf[e];A[e]=M.__behavior.methods[t]}(R);t.__childrenPropsFilter=A}for(d=t.createComponent(y.n,void 0,y.g,void 0),h=0;h<E.length;h++)if(!(_=E[h]).d){var P=_.v;_.o===S&&d instanceof u&&u.hasPublicProperty(d,_.n)?(_.e&&(P=_.e(o,a,null),l.addBindings(s,v,_.b,d,_)),_.e?S(d,_.n,P):d.__behavior.properties[_.n].type===Boolean?S(d,_.n,!0):S(d,_.n,P)):_.ev?p(d,_.ev,P,_.evCatch):_.o!==S&&(_.e&&(P=_.e(o,a,null),l.addBindings(s,v,_.b,d,_)),_.o(d,_.n,P))}b&&(b.e?("dom"===n.documentBackend?d.__domElement.setAttribute("style",b.e(o,a,null)):"custom"===n.documentBackend&&d.__domElement.setStyle(b.e(o,a,null)),l.addBindings(s,v,b.b,d.__domElement,b)):"dom"===n.documentBackend?d.__domElement.setAttribute("style",b.v):"custom"===n.documentBackend&&d.__domElement.setStyle(b.v))}y.id&&(d.id=y.id),g&&(g.e?d.class=g.e(o,a,null):d.class=g.v,g.o&&l.addBindings(s,v,g.b,d,g)),y.sl&&(d.slot=y.sl),void 0!==y.sn&&i.setSlotName(d,y.sn),i.appendChild(r,d),N(y.c,t,d,o,a,s,v,p)}}},D=function(e,t,r){for(var n=e.childNodes,o=0;o<n.length;o++){var i=n[o];i instanceof s||(i.__id&&(t[i.__id]=i),void 0!==i.__slotName&&(r[i.__slotName]=i),D(i,t,r))}},L=function(e,t,r,n,o,i){for(var a=null,s=0,c=null,u=0;u<e.length;u++){var f=e[u];if(void 0===f.n)a=document.createTextNode(f.c),f.e&&l.addBindings(o,i,f.b,a,f),t.appendChild(a);else{var p=f.cl,d=f.st,h=f.a;for(a=f.v?document.createElement("virtual"):document.importNode?document.importNode(f.p,!1):f.p.cloneNode(!1),s=0;s<h.length;s++)(c=h[s]).e&&l.addBindings(o,i,c.b,a,c);t.appendChild(a),f.id&&(r[f.id]=a),p&&p.e&&l.addBindings(o,i,p.b,a,p),d&&d.e&&l.addBindings(o,i,d.b,a,d),void 0!==f.sn&&(n[f.sn]=a),L(f.c,a,r,n,o,i)}}};p.prototype.createInstance=function(e){var t=Object.create(d.prototype),r=JSON.parse(this._initValuesJSON),o=null===this._dataJSON?r:JSON.parse(this._dataJSON),i=Object.create(null),a=Object.create(null),s=[],u=l.create("",null,null,null,null,[],(function(e,t){})),f=null;if("native"===this._renderingMode)"dom"===n.documentBackend&&(f=document.createDocumentFragment()),L(this._tagTreeRoot,f,i,a,u,{}),a[""]||(a[""]=null);else{if(f=c.create(e),e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(f.__childrenPropsFilter)for(var p in e.ownerShadowRoot.__childrenPropsFilter)f.__childrenPropsFilter[p]||(f.__childrenPropsFilter[p]=e.ownerShadowRoot.__childrenPropsFilter[p]);else f.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;N(this._tagTreeRoot,f,f,r,{},u,{},(function(e,t,r,n){f.__wxHost?e.addListener(t,I(r,n).bind(f.__wxHost)):s.push({target:e,name:t,func:I(r,n)})})),D(f,i,a)}return t.data=o,t.shadowRoot=f,t.idMap=i,t.slots=a,t.listeners=s,t._topScope=u,t},d.prototype.updateValues=function(e,t,r){for(var n=i.getMethodCaller(e),o=0;o<r.length;o++){var a=r[o];l.updateBinding(this._topScope,a,t,{},n)}},e.exports=p},"./exparser/src/free-tmpl/precompiler.js":(e,t,r)=>{var n=r("./exparser/src/asm-ll-parser.js"),o=r("./exparser/src/free-tmpl/html-parser.js"),i=r("./exparser/src/free-tmpl/exp-parser.js"),a=r("./exparser/src/free-tmpl/directive.js"),s=r("./exparser/src/free-tmpl/consts.js").STRING_ESCAPE_REGEXP,c=r("./exparser/src/free-tmpl/consts.js").STRING_ESCAPE_MAP,u=r("./exparser/src/free-tmpl/consts.js").RUNTIME_NAMES;t.LLParser=n,t.htmlParser=o,t.expParser=i;var l=u.TOP_SCOPE+","+u.SUB_SCOPE+","+u.CALLER,f=u.MEMBER+","+u.CALL+","+u.METHODS,p=function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},d=function(e){return'"'+e.replace(s,(function(e){return"\\"+c[e]}))+'"'},h=function(e){return"["+e.join(",")+"]"},_=function(e){var t=[];for(var r in e)void 0!==e[r]&&(/^[_a-z]+$/i.test(r)?t.push(r+":"+e[r]):t.push(d(r)+":"+e[r]));return"{"+t.join(",")+"}"},m=function(e,t){for(var r=e.split(/\{\{(.*?)\}\}/),n=[],o=[],a=null,s=0;s<r.length;s++){var c=r[s];if(s%2){var u=i.parse(c);a=i.lvalueStringify(u,t),n.push(i.stringify(u,t)),o.push(u)}else n.push(d(c))}if(1===n.length)return{c:n[0]};var f=i.searchBindingPaths(o,t);return'""'===n[n.length-1]&&n.pop(),2===n.length&&'""'===n[0]?{c:void 0,e:"function("+l+"){return "+n[1]+"}",l:a,b:f}:{c:void 0,e:"function("+l+"){return "+n.join("+")+"}",l:null,b:f}},v=function(e,t){var r=m(e.c,t);return r.t=3,r.l=void 0,r.c=r.c||'""',_(r)},y=function(e,t){for(var r=[],n=0;n<e.length;n++){var o=e[n];if(3!==o.t){var i=o.a,s=o.c,c={t:1,n:'"'+o.n+'"',g:void 0,v:void 0,id:void 0,cl:void 0,cpf:void 0,st:void 0,sl:void 0,sn:void 0,a:"",c:""};"slot"===o.n?(c.v=!0,c.sn='""',s=[]):"block"!==o.n&&"virtual"!==o.n||(c.v=!0);var u=0,l=null,f=[],g=null,b=!1,w=!1,x=!1,S=!1,E=Object.create(null),T=[],C=Object.create(null),A=Object.create(null);if(i){for(var O=0;O<i.length;O++){var M=i[O],R=M.n;if(!E[R])if(E[R]=!0,"id"===R)c.id=d(M.v);else if("class"===R||"class$"===R||"class:"===R)(g=m(M.v,t)).e&&(x=!0),c.cl=_({v:g.c,e:g.e,l:void 0,b:g.b});else if("style"===R||"style$"===R||"style:"===R)(g=m(M.v,t)).e&&(S=!0),c.st=_({v:g.c,e:g.e,l:void 0,b:g.b});else if("slot"===R)c.sl=d(M.v);else if("name"===R&&"slot"===o.n)c.sn=d(M.v);else if("generic:"===R.slice(0,8))c.g="",C[R.slice(8)]=d(M.v);else if("filter:"===R.slice(0,7))c.cpf="",A[R.slice(7)]=d(M.v);else if("wx:"===R.slice(0,3)){var P=R.slice(3);if(!Object.prototype.hasOwnProperty.call(a,P))throw new Error('Directive "'+P+'" is not found.');var I=a[P].precompile(P,M.v,t);u+=I.s.length,t=t.concat(I.s);var N=_({s:JSON.stringify(I.s),n:'"'+P+'"',d:I.d,l:I.l,b:I.b}),D=a[P].addDefaultAttrs;if(D&&i.push.apply(i,D),a[P].attachedToBlock)f.push(N);else if(a[P].requireBlock){if(null!==l)throw new Error("Uncompatible directives are used in a single element.");l=N}else T.push(N)}else{var L={n:'"'+M.n+'"',v:d(M.v),o:void 0,e:void 0,l:void 0,b:void 0};if("$"===R.slice(-1)?(L.o='"$"',L.n='"'+R.slice(0,-1)+'"'):":"===R.slice(-1)?(L.o='":"',L.n='"'+p(R.slice(0,-1))+'"'):"&"===R.slice(-1)?(L.o='"&"',L.n='"'+p(R.slice(0,-1))+'"'):"class."===R.slice(0,6)?(L.o='"c"',L.n='"'+R.slice(6)+'"',b=!0):"style."===R.slice(0,6)?(L.o='"s"',L.n='"'+R.slice(6)+'"',w=!0):"data-"===R.slice(0,5)&&(L.o='"d"',L.n='"'+p(R.slice(5))+'"'),"id"===L.n||"slot"===L.n)throw new Error('"id" and "slot" do not support dynamic binding symbol.');g=m(M.v,t),L.v=g.c,L.e=g.e,L.l=g.l,L.b=g.b,T.push(_(L))}}if(x&&b)throw new Error("Class bindings cannot be used with dynamic class property.");if(S&&w)throw new Error("Style bindings cannot be used with dynamic style property.");c.a=h(T),c.c=y(s,t),""===c.g&&(c.g=_(C)),""===c.cpf&&(c.cpf=_(A)),l?'"block"'===c.n&&"[]"===c.a?(c.a="["+f.concat(l).join(",")+"]",r.push(_(c))):r.push(_({t:1,n:'"block"',v:!0,a:"["+f.concat(l).join(",")+"]",c:"["+_(c)+"]"})):r.push(_(c)),t.splice(t.length-u,u)}}else r.push(v(o,t))}return h(r)};t.compile=function(e){var t=o.parse(e),r=y(t,[]);return"function("+f+"){return "+r+"}"}},"./exparser/src/free-tmpl/scope.js":e=>{var t={create:function(e,t,n,o,i,a,s){for(var c={inc:1,name:e,exp:o,lp:i,scopes:{},targets:{},children:null,lu:s,__scopeBinded:[]},u=0;u<a.length;u++){var l=a[u];null===l[0]?r(t,l,null,c):r(n[l[0]],l,null,c)}return c},proxyTopScope:function(e){var t={inc:1,linked:e,scopes:{},targets:{},children:null,__scopeBinded:[]};return r(e,[null],null,t),t},proxySubScopes:function(e){var t={};for(var n in e)t[n]={inc:1,linked:e[n],scopes:{},targets:{},children:null,__scopeBinded:[]},r(e[n],[null],null,t[n]);return t}},r=t.addBinding=function(e,t,r,n){for(var o=e,i=1;i<t.length;i++){var a=t[i];o.children||(o.children=Object.create(null));var s=o.children;s[a]||(s[a]={scopes:{},targets:{},children:null}),o=s[a]}var c=e.inc++;return r?o.targets[c]=[r,n]:(o.scopes[c]=n,n.__scopeBinded.push([o,c])),c};t.addBindings=function(e,t,n,o,i){for(var a=0;a<n.length;a++){var s=n[a];s[0]?r(t[s[0]],s,o,i):r(e,s,o,i)}},t.updateLvaluePath=function(e,t){e.lp=t},t.removeBindingsForScope=function(e){for(var t=e.__scopeBinded,r=0;r<t.length;r++){var n=t[r];delete n[0].scopes[n[1]]}};var n=function(e,t,r,n,i){if(e.linked)o(e,t,r,n,i);else{var a=n[e.name];n[e.name]=e.exp(r,n,i),o(e,t,r,n,i),n[e.name]=a}},o=t.updateBinding=function(e,t,r,o,i){for(var a=e,s=0,c=0;c<t.length;c++){for(s in a.scopes)n(a.scopes[s],t,r,o,i);var u=t[c];if(!a.children)return;var l=a.children;if(!l[u])return;a=l[u]}var f=function(e){for(s in e.targets){var t=e.targets[s],a=t[1];a.o(t[0],a.n,a.e(r,o,i))}for(s in e.scopes)n(e.scopes[s],[],r,o,i);for(s in e.children)f(e.children[s])};f(a)};e.exports=t},"./exparser/src/func-arr.js":(e,t,r)=>{var n=r("./exparser/src/global-options.js"),o=function(e){this.empty=!0,this._type=e,this._arr=[],this._index=0};o.create=function(e){return new o(e)},o.prototype.add=function(e){var t=this._index++;return this._arr.push({id:t,func:e}),this.empty=!1,t},o.prototype.remove=function(e){var t=this._arr,r=0;if("function"==typeof e)for(r=0;r<t.length;r++){var n=t[r].func;if(n===e)return t.splice(r,1),this.empty=!t.length,n}else for(r=0;r<t.length;r++)if(t[r].id===e){var o=t[r].func;return t.splice(r,1),this.empty=!t.length,o}return null},o.prototype.call=function(e,t,r){for(var n=this._arr,o=!1,a=0;a<n.length;a++){!1===i(this._type,n[a].func,e,t,r)&&(o=!0)}if(o)return!1};var i=o.safeCallback=function(e,t,r,o,i){try{return t.apply(r,o)}catch(c){var s="[Exparser] [Error] [Component] "+(e||"Error Listener")+" Error @ ";r&&r.is&&(s+=r.is),s+="#"+(t.name||"(anonymous)"),i&&i.triggerLifeTime("error",[c]),function(e,t){if(!t.type||!1!==a.call(null,[e,t])){if(n.throwGlobalError)throw e;console.error(e.message+"\n"+e.stack)}}(c,{message:s,type:e,element:r,method:t,args:o})}},a=o.create();o.addGlobalErrorListener=function(e){return a.add(e)},o.removeGlobalErrorListener=function(e){return a.remove(e)};var s=null;o.addGlobalWarningListener=function(e){return(s=o.create()).add(e)},o.removeGlobalWarningListener=function(e){if(s){var t=s.remove(e);return s.empty&&(s=null),t}return null},o.hasGlobalWarningListeners=function(){return!!s},o.triggerWarning=function(e){var t="[Exparser] [Warning] [Component] "+e;s.call(null,[t],null)},e.exports=o},"./exparser/src/global-options.js":e=>{e.exports={lazyRegistration:!0,publicProperties:!1,availability:null,domain:"",writeOnly:!1,allowInWriteOnly:!1,classPrefix:null,styleScope:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1,writeFieldsToNode:!0,writeIdToDOM:!1,idPrefixGenerator:null,separateInnerData:!0,innerDataExclude:null,listenerChangeLifeTimes:!1,randomizeTagName:!1,virtualHost:!1,throwGlobalError:!1,writeExtraInfoToAttr:!1,documentBackend:"none",hasDOMBackend:!1,customContext:null}},"./exparser/src/global-state.js":(e,t)=>{t.backendExtractedDefault=!1,t.enableBackendExtractedDefault=function(){t.backendExtractedDefault=!0},t.disableBackendExtractedDefault=function(){t.backendExtractedDefault=!1}},"./exparser/src/index.js":(e,t,r)=>{var n=r("./exparser/src/asm-ll-parser.js"),o=r("./exparser/src/func-arr.js"),i=r("./exparser/src/data-utils.js"),a=r("./exparser/src/events.js"),s=r("./exparser/src/data-path.js"),c=r("./exparser/src/behavior.js"),u=r("./exparser/src/element.js"),l=r("./exparser/src/component.js"),f=r("./exparser/src/text-node.js"),p=r("./exparser/src/native-node.js"),d=r("./exparser/src/virtual-node.js"),h=r("./exparser/src/shadow-root.js"),_=r("./exparser/src/data-group.js"),m=r("./exparser/src/observer.js"),v=r("./exparser/src/element-iterator.js"),y=r("./exparser/src/fake-dom-element.js"),g=r("./exparser/src/backend.js"),b=r("./exparser/src/global-options.js"),w=r("./exparser/src/global-state.js"),x=r("./exparser/src/free-tmpl/index.js");t.FreeTmpl=x,t.precompileTemplate=x.precompiler?x.precompiler.compile:null,t.precompiler=x.precompiler?x.precompiler:null,t.HtmlLLParser=x.htmlParser?x.htmlParser:null,t.LLParser=n,t.dataPath=s,t.dataUtils=i,t.Event=a,t.Element=u,t.TextNode=f,t.NativeNode=p,t.VirtualNode=d,t.ShadowRoot=h,t.Behavior=c,t.Component=l,t.Observer=m,t.DataGroup=_,t.ElementIterator=v,t.FakeDomElement=y,t.registerBehavior=c.create,t.registerElement=l.register,t.createElement=l.create,t.createTextNode=f.create,t.createVirtualNode=d.create,t.appendChild=u.appendChild,t.insertBefore=u.insertBefore,t.removeChild=u.removeChild,t.replaceChild=u.replaceChild,t.addListenerToElement=a.addListenerToElement,t.removeListenerFromElement=a.removeListenerFromElement,t.triggerEvent=a.triggerEvent,t.triggerRender=g.triggerRender,t.safeCallback=o.safeCallback,t.addGlobalErrorListener=o.addGlobalErrorListener,t.removeGlobalErrorListener=o.removeGlobalErrorListener,t.addGlobalWarningListener=o.addGlobalWarningListener,t.removeGlobalWarningListener=o.removeGlobalWarningListener,t.globalOptions=b,t.globalState=w,l._setDefaultTemplateEngine(x);var S=t.updateDefaultComponent=function(){delete l._list[""],l.register({is:"",options:{writeOnly:!0,allowInWriteOnly:!0,lazyRegistration:!1,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1}})};S(),t.initBackend=function(){S()};var E=function(e){var r="";if(e instanceof t.Element&&(e.id&&(r+=' id="'+e.id+'"'),e.slot&&(r+=' slot="'+e.slot+'"'),e.__slotName&&(r+=' name="'+e.__slotName+'"'),e.classList&&(r+=' class="'+e.class+'"'),"dom"===b.documentBackend&&e.$$&&e.$$.getAttribute("style")&&(r+=' style="'+e.$$.getAttribute("style")+'"')),e instanceof t.VirtualNode)return r;if(e instanceof t.Component)return l.listPublicProperties(e).forEach((function(t){r+=" "+t+"="+JSON.stringify(e[t])})),r;for(var n=e.attributes,o=0;o<n.length;o++)r+=" "+n[o].name+'="'+n[o].value+'"';return r},T=t.dumpElementToString=function(e,r,n){var o=null;"dom"===b.documentBackend&&(o=window);var i=0,a="";for(i=n=n||0;i;i--)a+="  ";var s="";if(e instanceof t.Element)s+=a+"<"+("dom"===b.documentBackend&&e.$$?e.$$.tagName.toLowerCase()+":":"")+e.is+E(e)+">",e instanceof t.VirtualNode?s+=" [Exp-Virtual]":e instanceof t.NativeNode?s+=" [Exp-Native]":s+=" [Exp-Component]",s+="\n"+T(r?e.__wxSlotChildren:e.childNodes,r,n+1);else if(e instanceof t.TextNode)s+=a+e.textContent+" [Exp-Text]\n";else if(o&&o.HTMLElement&&e instanceof o.HTMLElement)s+=a+"<"+e.tagName.toLowerCase()+E(e)+"> [DOM-Element]",s+="\n"+T(r&&e.__wxSlotChildren||e.childNodes,r,n+1);else if(o&&o.Text&&e instanceof o.Text)s+=a+e.textContent+" [DOM-Text]\n";else if(void 0!==e.length)for(i=0;i<e.length;i++)s+=T(e[i],r,n);else s=a+"[unknown node]\n";return s};t.dumpElement=function(e,t){console.log(T(e,t))}},"./exparser/src/native-node.js":(e,t,r)=>{var n=r("./exparser/src/element.js"),o=r("./exparser/src/class-list.js"),i=r("./exparser/src/fake-dom-element.js"),a=r("./exparser/src/global-options.js"),s=r("./exparser/src/global-state.js"),c=function(){};c.prototype=Object.create(n.prototype,{constructor:{value:c,writable:!0,configurable:!0}});var u=c._advancedCreate=function(e,t,r){var u=new c;u.is=e.toLowerCase();var l=null,f=null;if("dom"===a.documentBackend?l=s.backendExtractedDefault?new i(e):document.createElement(e):"custom"===a.documentBackend&&(f=void 0===r?a.customContext:r)&&(l=f.createElement("image"===e?e:"empty",e)),n.initialize(u,l,t,f),u.classList=o.create(u,null),l&&"custom"===a.documentBackend&&l.associateComponent(u),t){var p=t.__wxHost;l&&"custom"===a.documentBackend&&p.__componentOptions.styleScope&&l.setStyleScope(p.__componentOptions.styleScope),u.classList._setOwnerOptions(p.classList,p.__componentOptions.classPrefix,p.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&l&&l.setAttribute("exparser:info-class-prefix",p.__componentOptions.classPrefix&&p.__componentOptions.classPrefix+"--")}return u};c.create=function(e){return u(e,null)};var l=c._advancedClone=function(e,t){var r=new c;r.is=e.is;var u=null;if(e.__domElement&&("dom"===a.documentBackend?u=e.__domElement instanceof i?s.backendExtractedDefault?e.__domElement.cloneNode():i.toElement(e.__domElement):s.backendExtractedDefault?i.fromElement(e.__domElement):document.importNode?document.importNode(e.__domElement,!1):e.__domElement.cloneNode(!1):"custom"===a.documentBackend&&(u=e.__domElement.cloneNode())),n._clone(r,e,u,t),r.classList=o.create(r,null),u&&"custom"===a.documentBackend&&u.associateComponent(r),t){var l=t.__wxHost;r.classList._setOwnerOptions(l.classList,l.__componentOptions.classPrefix,l.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&u&&u.setAttribute("exparser:info-class-prefix",l.__componentOptions.classPrefix&&l.__componentOptions.classPrefix+"--")}return r};c.cloneNode=function(e){return l(e,null)},c.shouldBeNativeNode=function(e){return e.startsWith("xr-")||e.startsWith("wx-xr-")},e.exports=c},"./exparser/src/observer.js":(e,t,r)=>{var n=r("./exparser/src/func-arr.js"),o=function(){};o.prototype=Object.create(Object.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),o.create=function(e){var t=new o;return t._cb=e,t._noSubtreeCb=function(t){t.target===this&&e.call(this,t)},t._binded=[],t},o.prototype.observe=function(e,t){var r=0,o=(t=t||{}).subtree?this._cb:this._noSubtreeCb;t.properties&&(e.__propObservers||(e.__propObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__propObservers,id:e.__propObservers.add(o),subtree:t.subtree?e:null}),r++),t.childList&&(e.__childObservers||(e.__childObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__childObservers,id:e.__childObservers.add(o),subtree:t.subtree?e:null}),r++),t.characterData&&(e.__textObservers||(e.__textObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__textObservers,id:e.__textObservers.add(o),subtree:t.subtree?e:null}),r++),t.subtree&&i(e,r),t.attachStatus&&(e.__attachedObservers||(e.__attachedObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__attachedObservers,id:e.__attachedObservers.add(o),subtree:null}))},o.prototype.disconnect=function(){for(var e=this._binded,t=0;t<e.length;t++){var r=e[t];r.funcArr.remove(r.id),r.subtree&&i(r.subtree,-1)}this._binded=[]};var i=o._updateSubtreeCaches=function(e,t){e.__subtreeObserversCount+=t;var r=e.childNodes;if(r)for(var n=0;n<r.length;n++)i(r[n],t)};o._callObservers=function(e,t,r){do{e[t]&&e[t].call(e,[r]),e=e.parentNode}while(e&&e.__subtreeObserversCount)},o._callSingleObserver=function(e,t,r){e[t]&&e[t].call(e,[r])},e.exports=o},"./exparser/src/shadow-root.js":(e,t,r)=>{var n=r("./exparser/src/element.js"),o=r("./exparser/src/component.js"),i=r("./exparser/src/virtual-node.js"),a=r("./exparser/src/native-node.js"),s=r("./exparser/src/text-node.js"),c=r("./exparser/src/global-options.js"),u=Object.prototype.hasOwnProperty,l=function(e){i.initialize(this,"shadow",this,e.__backendContext),this.__hostAssociated=!1,this.__wxHost=e,this.__childrenPropsFilter=null,this.__slotCacheDirty=!1};l.prototype=Object.create(i.prototype),l.create=function(e){var t=new l(e);if(e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(t.__childrenPropsFilter)for(var r in e.ownerShadowRoot.__childrenPropsFilter)t.__childrenPropsFilter[r]||(t.__childrenPropsFilter[r]=e.ownerShadowRoot.__childrenPropsFilter[r]);else t.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;return t};l.prototype.createTextNode=function(e){return s._advancedCreate(e,this,this.__backendContext)},l.prototype.createNativeNode=function(e){return a._advancedCreate(e,this,this.__backendContext)},l.prototype.cloneNativeNode=function(e){return a._advancedClone(e,this)},l.prototype.createVirtualNode=function(e){return i._advancedCreate(e,this,this.__backendContext)},l.prototype.getCompDefByTagName=function(e){var t=this.__wxHost;return u.call(t.__using,e)?t.__using[e]:u.call(t.__generics,e)?t.__generics[e]:e},l.prototype.createComponent=function(e,t,r,n){if(a.shouldBeNativeNode(e))return this.createNativeNode(e);var i=null;i=void 0===t?e:t;var s=this.__wxHost;"object"!=typeof i&&"object"!=typeof(i=this.getCompDefByTagName(i))&&(i=o._list[i]||o._list[""]);var c=function(e,t){var r={};for(var n in e){var i=e[n];"object"!=typeof i&&u.call(t.__placeholder,i)&&(i=t.__placeholder[i],u.call(t.__using,i)?i=t.__using[i]:u.call(t.__generics,i)&&(i=t.__generics[i]||o._list[""]),r[n]=i)}return r}(r,s);return r&&(r=function(e,t){var r={};for(var n in e){var i=e[n];"object"!=typeof i&&(u.call(t.__using,i)?i=t.__using[i]:u.call(t.__generics,i)&&(i=t.__generics[i]||o._list[""]),r[n]=i)}return r}(r,s)),"object"==typeof e&&(e=i.is),s.__componentOptions.randomizeTagName&&(e=function(){for(var e=Date.now(),t="exparser-",r=0;r<8;r++){var n=(e+Math.floor(26*Math.random()))%26;e=Math.floor(e/26),t+="abcdefghijklmnopqrstuvwxyz"[n]}return t}()),s.__componentOptions.writeOnly&&!i.options.allowInWriteOnly&&(i=o._list[""]),o._advancedCreate(e,i,this,this.__backendContext,r,c,n)},l.prototype.tagNameUsed=function(e){var t=this.__wxHost;return!!u.call(t.__using,e)||(!!u.call(t.__placeholder,e)||(!!u.call(t.__generics,e)||!!u.call(t.__placeholder,e)))},l.prototype.getHostNode=function(){return this.__wxHost},l.prototype.getElementById=function(e){return n._updateIdMap(this.__wxHost),this.__wxHost.__idCache[e]},l.prototype.getBackendContext=function(){return this.__backendContext?this.__backendContext:c.customContext},e.exports=l},"./exparser/src/text-node.js":(e,t,r)=>{var n=r("./exparser/src/observer.js"),o=r("./exparser/src/global-options.js"),i=r("./exparser/src/global-state.js"),a=function(){};a.prototype=Object.create(Object.prototype,{constructor:{value:a,writable:!0,configurable:!0}});var s=a._advancedCreate=function(e,t,r){var n=new a;n.__slot="";var s=null;if(i.backendExtractedDefault||"dom"!==o.documentBackend)if("custom"===o.documentBackend){var c=void 0===r?o.customContext:r;n.__backendContext=c,c?((s=c.createElement("text","")).setText(e||""),s.textContent=e,s.__wxElement=n):n.__textContent=e}else n.__textContent=e;else(s=document.createTextNode(e||"")).__wxElement=n;return n.$$=n.__domElement=s,n.__backendExtracted=i.backendExtractedDefault,n.__subtreeObserversCount=0,n.__autoDestroy=!0,n.parentNode=null,n.ownerShadowRoot=t,n};a.create=function(e){return s(e,null)},a.prototype.setAutoDestroy=function(e){this.__autoDestroy=!!e},a.prototype.destroy=function(){"custom"===o.documentBackend&&this.__domElement&&(this.__domElement.release(),this.__domElement=null)},Object.defineProperty(a.prototype,"textContent",{get:function(){return this.__domElement?this.__domElement.textContent:this.__textContent},set:function(e){if(e=String(e),this.__domElement){if(this.__domElement.textContent===e)return;this.__domElement.textContent=e,"custom"===o.documentBackend&&this.__domElement.setText(e)}else{if(this.__textContent===e)return;this.__textContent=e}(this.__textObservers&&!this.__textObservers.empty||this.__subtreeObserversCount)&&n._callObservers(this,"__textObservers",{type:"characterData",target:this})}}),a.prototype.getBackendContext=function(){return this.__backendContext?this.__backendContext:o.customContext},e.exports=a},"./exparser/src/virtual-node.js":(e,t,r)=>{var n=r("./exparser/src/element.js"),o=r("./exparser/src/global-options.js"),i=function(e,t,r){a(this,e,t,r)};i.prototype=Object.create(n.prototype);var a=i.initialize=function(e,t,r,i){e.is=t||"";var a=null,s=null;("dom"===o.documentBackend||"custom"===o.documentBackend&&(s=void 0===i?o.customContext:i))&&(a=void 0),n.initialize(e,a,r,s),e.__virtual=!0};i._advancedCreate=function(e,t,r){return new i(e,t,r)},i.create=function(e){return new i(e,null)},i.prototype.getBackendContext=function(){return this.__backendContext?this.__backendContext:o.customContext},e.exports=i},"./src/builtinAssets/effects/shader/morph/attributes.template.glsl":e=>{e.exports="#ifdef WX_USE_MORPH_${name_uppercase}\n#ifdef WX_MORPH_MASK_${index}_${name_uppercase}\nattribute vec3 a_morph_${index}_${name_lowercase};\n#endif\n#endif\n"},"./src/builtinAssets/effects/shader/morph/defines.inc.glsl":e=>{e.exports="#ifndef WX_MORPH_TARGET_COUNT\n    #define WX_MORPH_TARGET_COUNT 0\n#endif\n\n#if WX_MORPH_TARGET_COUNT // > 0\nuniform vec4 u_morphWeights[8];\n#endif\n"},"./src/builtinAssets/effects/shader/morph/funcbody.template.glsl":e=>{e.exports="#ifdef WX_USE_MORPH_${name_uppercase}\n#ifdef WX_MORPH_MASK_${index}_${name_uppercase}\n    pos += a_morph_${index}_${name_lowercase} * u_morphWeights[${weight_index}].${weight_sub};\n#endif\n#endif\n"},"./src/builtinAssets/effects/shader/morph/funcdefine.template.glsl":e=>{e.exports="#ifdef WX_USE_MORPH_${name_uppercase}\n${func_type} ${func_name}(${func_type} pos) {\n    ${func_body}\n    return pos;\n}\n#else\n${func_type} ${func_name}(${func_type} pos) {\n    return pos;\n}\n#endif\n"},"./src/builtinAssets/effects/shader/postprocessing/blend/blend.frag.glsl":e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\nuniform sampler2D u_bottomTex;\nuniform sampler2D u_upperTex;\n\nvoid main() {\n  vec4 color0 = texture2D(u_bottomTex, v_uv);\n  vec4 color1 = texture2D(u_upperTex, v_uv);\n  color0.a = clamp(color0.a, .0, 1.);\n  color1.a = clamp(color1.a, .0, 1.);\n  gl_FragData[0] = vec4(\n    (color0.rgb * color0.a - color0.rgb * color0.a * color1.a + color1.rgb * color1.a) / max(color0.a + color1.a - color0.a * color1.a, 0.0001),\n    color0.a + color1.a - color0.a * color1.a\n  );\n}\n"},"./src/builtinAssets/effects/shader/postprocessing/blit/blit.frag.glsl":e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\n#ifdef WX_USE_UNIFORM_ALPHA\nuniform float u_alpha;\n#endif\n\nvoid main()\n{\n#ifdef WX_USE_UNIFORM_ALPHA\n  gl_FragData[0] = vec4(getOutputColor(texture2D(u_sourceTex, v_uv)).xyz, u_alpha);\n#else\n  gl_FragData[0] = getOutputColor(texture2D(u_sourceTex, v_uv));\n#endif\n}\n"},"./src/builtinAssets/effects/shader/postprocessing/bloom/threshold.frag.glsl":e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\nuniform float u_threshold;\nuniform float u_softThreshold;\nuniform float u_intensity;\n\nvoid main() {\n\tvec4 raw = texture2D(u_sourceTex, v_uv);\n  \tvec3 c = raw.rgb;\n  \tfloat brightness = max(c.r, max(c.g, c.b));\n\tfloat knee = u_threshold * u_softThreshold;\n\tfloat soft = brightness - u_threshold + knee;\n\tsoft = clamp(soft, .0, 2. * knee);\n\tsoft = soft * soft / (4. * knee + 0.00001);\n\tfloat contribution = max(soft, brightness - u_threshold);\n\tcontribution /= max(brightness, 0.00001);\n\tgl_FragData[0] = vec4(c * u_intensity, brightness / u_threshold * raw.a);\n}\n"},"./src/builtinAssets/effects/shader/postprocessing/blur/blur_horizontal.frag.glsl":e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\n#ifndef WX_SAMPLE_COUNT\n    #define WX_SAMPLE_COUNT 1\n#endif\n\n#define SAMPLE_COUNT_F float(WX_SAMPLE_COUNT)\n\nuniform float u_radius;\n// uniform float u_sampleCount;\n#ifdef WX_USE_UNIFORM_SD\nuniform float u_sd;\n#endif\n\nfloat step = .0;\nfloat sd = 1.;\nfloat q1 = 0.00001, q2 = 0.00001;\n\nvec4 sampleAt(float i) {\n    float offset = -u_radius + step * i;\n    float gauss = gaussian(offset, sd);\n    vec4 color = texture2D(u_sourceTex, offset_uv(offset, .0, v_uv));\n    color.rgb *= color.a;\n    color *= gauss;\n    q1 += gauss;\n    q2 += color.a;\n    return color;\n}\n\nvoid main() {\n#ifdef WX_USE_UNIFORM_SD\n    sd = u_sd;\n#else\n    sd = radiusToSD(u_radius);\n#endif\n    if (SAMPLE_COUNT_F < 1.1) {\n        gl_FragData[0] = vec4(texture2D(u_sourceTex, v_uv).xyz, 1.0);\n        return;\n    }\n\n    step = 2. * u_radius / (SAMPLE_COUNT_F - 1.);\n    vec4 sum = vec4(.0);\n\n    ${sample}\n\n    gl_FragData[0] = vec4(sum.rgb / q2, sum.a / q1);\n}"},"./src/builtinAssets/effects/shader/postprocessing/blur/blur_resolve.frag.glsl":e=>{e.exports="// @deprecated\n\n#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\nuniform float u_radius;\nuniform float u_sampleCount;\nuniform sampler2D u_horizontalBlur;\nuniform sampler2D u_verticalBlur;\n\n#ifdef WX_USE_UNIFORM_SD\nuniform float u_sd;\n#endif\n\nvoid main() {\n#ifdef WX_USE_UNIFORM_SD\n    float sd = u_sd;\n#else\n    float sd = radiusToSD(u_radius);\n#endif\n    if (u_sampleCount < 1.01) {\n        gl_FragData[0] = vec4(.5 * (texture2D(u_verticalBlur, v_uv).xyz + texture2D(u_horizontalBlur, v_uv).xyz), 1.0);\n        return;\n    }\n\n    float step = 2. * u_radius / u_sampleCount;\n    vec3 sum = vec3(.0);\n    float q = 0.00001;\n    for (float i = .0; i < 1000.; i += 1.) {\n        if (i >= u_sampleCount) break;\n        float offset = -u_radius + step * i;\n        vec3 c1 = texture2D(u_verticalBlur, offset_uv(offset, .0, v_uv)).xyz;\n        vec3 c2 = texture2D(u_horizontalBlur, offset_uv(.0, offset, v_uv)).xyz;\n        sum += (c1 + c2) * gaussian(offset, sd);\n        q += gaussian(offset, sd);\n    }\n    gl_FragData[0] = vec4(sum / q / 2.0, 1.0);\n}\n"},"./src/builtinAssets/effects/shader/postprocessing/blur/blur_vertical.frag.glsl":e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\n#ifndef WX_SAMPLE_COUNT\n    #define WX_SAMPLE_COUNT 1\n#endif\n\n#define SAMPLE_COUNT_F float(WX_SAMPLE_COUNT)\n\nuniform float u_radius;\n// uniform float u_sampleCount;\n#ifdef WX_USE_UNIFORM_SD\nuniform float u_sd;\n#endif\n\nfloat step = .0;\nfloat sd = 1.;\nfloat q1 = 0.00001, q2 = 0.00001;\n\nvec4 sampleAt(float i) {\n    float offset = -u_radius + step * i;\n    float gauss = gaussian(offset, sd);\n    vec4 color = texture2D(u_sourceTex, offset_uv(.0, offset, v_uv));\n    color.rgb *= color.a;\n    color *= gauss;\n    q1 += gauss;\n    q2 += color.a;\n    return color;\n}\n\nvoid main() {\n#ifdef WX_USE_UNIFORM_SD\n    sd = u_sd;\n#else\n    sd = radiusToSD(u_radius);\n#endif\n    if (SAMPLE_COUNT_F < 1.1) {\n        gl_FragData[0] = vec4(texture2D(u_sourceTex, v_uv).xyz, 1.0);\n        return;\n    }\n\n    step = 2. * u_radius / (SAMPLE_COUNT_F - 1.);\n    vec4 sum = vec4(.0);\n\n    ${sample}\n\n    gl_FragData[0] = vec4(sum.rgb / q2, sum.a / q1);\n}"},"./src/builtinAssets/effects/shader/postprocessing/blur/fast_blur_horizontal.frag.glsl":e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\nuniform float u_radius;\nfloat q;\n\nvec4 sampleAt(float offset, float weight) {\n    vec4 color = texture2D(u_sourceTex, offset_uv(-u_radius * offset, .0, v_uv));\n    color.rgb *= color.a;\n    color *= weight;\n    q += color.a;\n    return color;\n}\n\nvoid main() {\n    vec4 sum = vec4(.0);\n    q = 0.00001;\n    sum += sampleAt(+.6, .05);\n    sum += sampleAt(-.6, .05);\n    sum += sampleAt(+.2, .1);\n    sum += sampleAt(-.2, .1);\n    sum += sampleAt(+.1, .15);\n    sum += sampleAt(-.1, .15);\n    sum += sampleAt(.0, .4);\n    gl_FragData[0] = vec4(sum.rgb / max(sum.a, 0.0001), sum.a);\n}"},"./src/builtinAssets/effects/shader/postprocessing/blur/fast_blur_vertical.frag.glsl":e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\nuniform float u_radius;\nfloat q;\n\nvec4 sampleAt(float offset, float weight) {\n    vec4 color = texture2D(u_sourceTex, offset_uv(.0, -u_radius * offset, v_uv));\n    color.rgb *= color.a;\n    color *= weight;\n    q += color.a;\n    return color;\n}\n\nvoid main() {\n    vec4 sum = vec4(.0);\n    q = 0.00001;\n    sum += sampleAt(+.6, .05);\n    sum += sampleAt(-.6, .05);\n    sum += sampleAt(+.2, .1);\n    sum += sampleAt(-.2, .1);\n    sum += sampleAt(+.1, .15);\n    sum += sampleAt(-.1, .15);\n    sum += sampleAt(.0, .4);\n    gl_FragData[0] = vec4(sum.rgb / max(sum.a, 0.0001), sum.a);\n}"},"./src/builtinAssets/effects/shader/postprocessing/fxaa/fxaa.frag.glsl":e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\n#define FXAA_SPAN_MAX 16.0\n#define FXAA_REDUCE_MUL   (1.0/FXAA_SPAN_MAX)\n#define FXAA_REDUCE_MIN   (1.0/128.0)\n\nvec4 blend(vec4 a, vec4 b) {\n    if (a.w + b.w < 0.0001) {\n        return vec4(0, 0, 0, 0);\n    }\n    return vec4((a.xyz * a.w + b.xyz * b.w) / (a.w + b.w), (a.w + b.w) * .5);\n}\nvoid main() {\n\n    vec2 uv = v_uv;\n    vec2 step = 1. / vec2(u_width, u_height);\n\n\t/**\n\t * @modified by shanexyzhou 2020.08.30\n\t * 原本的fxaa不支持alpha通道参与亮度计算，如果背景是(0,0,0,0)的透明像素，就会当成黑色来计算，\n\t * 这样的话fxaa之后的图案周围会有黑圈。\n\t * 并且如果只采用原像素点的alpha通道作为新像素点的alpha通道，那在渲染结果被应用到另一张贴图中时，边缘的锯齿感还是很明显。\n\t * 所以魔改了一版（如果原图的alpha通道都是1的话，那结果还是和原来一样）。\n\t */\n    vec4 colorNW = texture2D(u_sourceTex, uv + vec2(-1, -1) * step);\n    vec4 colorNE = texture2D(u_sourceTex, uv + vec2( 1, -1) * step);\n    vec4 colorSW = texture2D(u_sourceTex, uv + vec2(-1,  1) * step);\n    vec4 colorSE = texture2D(u_sourceTex, uv + vec2( 1,  1) * step);\n    vec3 rgbNW = colorNW.xyz;\n    vec3 rgbNE = colorNE.xyz;\n    vec3 rgbSW = colorSW.xyz;\n    vec3 rgbSE = colorSE.xyz;\n    vec4 colorM = texture2D(u_sourceTex, uv);\n    vec3 rgbM = colorM.xyz;\n\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma) * colorNW.w;\n    float lumaNE = dot(rgbNE, luma) * colorNE.w;\n    float lumaSW = dot(rgbSW, luma) * colorSW.w;\n    float lumaSE = dot(rgbSE, luma) * colorSE.w;\n    float lumaM  = dot(rgbM,  luma) * colorM.w;\n\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max(\n        (lumaNW + lumaNE + lumaSW + lumaSE) * (0.25 * FXAA_REDUCE_MUL),\n        FXAA_REDUCE_MIN);\n    float rcpDirMin = 1.0/(min(abs(dir.x), abs(dir.y)) + dirReduce);\n    \n    dir = min(vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),\n          max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n          dir * rcpDirMin)) * step;\n\n    vec4 colorA = blend(\n        texture2D(u_sourceTex, uv + dir * (1.0/3.0 - 0.5)),\n        texture2D(u_sourceTex, uv + dir * (2.0/3.0 - 0.5))\n    );\n\n    vec4 colorB = colorA * .5 + blend(\n        texture2D(u_sourceTex, uv + dir * (0.0/3.0 - 0.5)),\n        texture2D(u_sourceTex, uv + dir * (3.0/3.0 - 0.5))\n    ) * .5;\n    \n    float lumaB = dot(colorB.xyz, luma) * colorB.w;\n\n    if ((lumaB < lumaMin) || (lumaB > lumaMax)) {\n        gl_FragData[0] = colorA;\n    } else {\n        gl_FragData[0] = colorB; \n    }\n}\n"},"./src/builtinAssets/effects/shader/postprocessing/screen.vert.glsl":e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\n\nattribute vec2 a_position;\nattribute highp vec2 a_uv;\nvarying highp vec2 v_uv;\n\nvoid main()\n{\n    // v_uv = a_position * .5 + .5;\n    v_uv = a_uv;\n    gl_Position = vec4(a_position, .0, 1.);\n}"},"./src/builtinAssets/effects/shader/postprocessing/tone/tone.frag.glsl":e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\nvec3 aces(vec3 color) {\n  return (color * (2.51 * color + 0.03)) / (color * (2.43 * color + 0.59) + 0.14);\n}\n\nvoid main()\n{\n  vec4 color = texture2D(u_sourceTex, v_uv);\n\n  gl_FragData[0] = vec4(aces(color.rgb), color.a);\n}\n"},"./src/builtinAssets/effects/shader/postprocessing/vignette/vignette.frag.glsl":e=>{e.exports="#version 100\nprecision mediump float;\nprecision highp int;\nuniform float u_width;\nuniform float u_height;\nuniform sampler2D u_sourceTex;\nvarying vec2 v_uv;\n\nfloat radiusToSD(float radius) { // unused\n    // return radius * .5; // 95%\n\treturn radius * .375; // 99%\n}\n\nvec2 offset_uv(float offsetX, float offsetY, vec2 fragCoord) {\n\treturn vec2(fragCoord.x + offsetX / u_width, fragCoord.y + offsetY / u_height);\n}\n\nfloat gaussian(float x, float sd) { // unused\n    return exp(-.5 * x * x / (sd * sd));\n}\n\nvec3 toSRGB(vec3 color) {\n    return pow(color, vec3(1.0 / 2.2));\n}\n\nvec4 getOutputColor(vec4 color) {\n#ifdef WX_PP_TO_SRGB\n    color.rgb = toSRGB(color.rgb);\n#endif\n    return color;\n}\n\n\nuniform vec4 u_color;\nuniform vec2 u_center;\nuniform float u_intensity;\nuniform float u_smoothness;\nuniform float u_roundness;\nuniform float u_rounded;\n\nvoid main() {\n  vec4 color = texture2D(u_sourceTex, v_uv);\n\n  vec2 d = abs(v_uv - u_center) * u_intensity;\n  d.x *= mix(1.0, u_width / u_height, u_rounded);\n  d = pow(clamp(d, vec2(0.), vec2(1.)), vec2(u_roundness));\n  float factor = pow(clamp(1.0 - dot(d, d), 0., 1.), u_smoothness);\n  color *= mix(u_color, vec4(1.), factor);\n\n  gl_FragData[0] = color;\n}\n"},"./src/builtinAssets/effects/shader/skinning/defines.inc.glsl":e=>{e.exports="#ifdef WX_SKINNED\nattribute highp vec4 a_boneIndices;\nattribute highp vec4 a_weights;\n  #ifdef WX_USE_BONE_MATRIX_TEXTURE\n    // #ifndef WX_BONE_SAMPLER_HELPER\n    // 请不要这样写，在部分安卓机上会出错，比如MTK、麒麟的设备很容易出现\n    // #define WX_BONE_SAMPLER_HELPER(row, col) \\\n    //   texture2D(u_boneMatrixTexture, vec2((col) / 4.0, (row) / float(WX_BONE_NUM)))\n    // #endif\n  uniform sampler2D u_boneMatrixTexture;\n  mat4 sampleFromBoneMatrixTexture(float index) {\n    float row = index + 0.5;\n    float col = 0.5;\n    return mat4(\n      texture2D(u_boneMatrixTexture, vec2((col + .0) / 4.0, (row) / float(WX_BONE_NUM))),\n      texture2D(u_boneMatrixTexture, vec2((col + 1.0) / 4.0, (row) / float(WX_BONE_NUM))),\n      texture2D(u_boneMatrixTexture, vec2((col + 2.0) / 4.0, (row) / float(WX_BONE_NUM))),\n      texture2D(u_boneMatrixTexture, vec2((col + 3.0) / 4.0, (row) / float(WX_BONE_NUM)))\n    );\n  }\n  #else\n  uniform mat4 u_boneOffsetMatrix[WX_BONE_NUM];\n  #endif // WX_USE_BONE_MATRIX_TEXTURE\n#endif // WX_SKINNED\n\n#ifdef WX_SKINNED\nmat4 getBoneMat() {\n  #ifdef WX_USE_BONE_MATRIX_TEXTURE\n  mat4 boneMatX = sampleFromBoneMatrixTexture(a_boneIndices.x);\n  mat4 boneMatY = sampleFromBoneMatrixTexture(a_boneIndices.y);\n  mat4 boneMatZ = sampleFromBoneMatrixTexture(a_boneIndices.z);\n  mat4 boneMatW = sampleFromBoneMatrixTexture(a_boneIndices.w);\n  #else\n  mat4 boneMatX = u_boneOffsetMatrix[int(a_boneIndices.x)];\n  mat4 boneMatY = u_boneOffsetMatrix[int(a_boneIndices.y)];\n  mat4 boneMatZ = u_boneOffsetMatrix[int(a_boneIndices.z)];\n  mat4 boneMatW = u_boneOffsetMatrix[int(a_boneIndices.w)];\n  #endif // WX_USE_BONE_MATRIX_TEXTURE\n  mat4 boneMat = a_weights.x * boneMatX + a_weights.y * boneMatY + a_weights.z * boneMatZ + a_weights.w * boneMatW;\n  return boneMat;\n}\n#endif // WX_SKINNED\n\nvec4 getSkinningWorldPosition(vec4 origin) {\n#ifdef WX_SKINNED\n    return getBoneMat() * origin;\n#else\n    return u_world * origin;\n#endif // WX_SKINNED\n}\n"},"../kanata/lib/kanata":e=>{"use strict";e.exports=Kanata}},t={},r,n;function o(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var i=Object.create(null);o.r(i);var a={};r=r||[null,n({}),n([]),n(n)];for(var s=2&t&&e;"object"==typeof s&&!~r.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,o.d(i,a),i},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{"use strict";o.r(i),o.d(i,{XRContext:()=>t.default,XRElement:()=>a.default,getExparser:()=>s,getOrCreateContext:()=>l,init:()=>p,removeContext:()=>f,xrFrameSystem:()=>e});o("./src/builtinAssets/index.ts"),o("./src/elements/index.ts"),o("./src/components/index.ts"),o("./src/systems/index.ts"),o("./src/loader/index.ts");var e=o("./src/xrFrameSystem.ts"),t=o("./src/framework/exparser/XRContext.ts"),r=o("./src/ext.ts"),n=o("./src/core/reporter.ts"),a=o("./src/framework/exparser/XRElement.ts");function s(){return r.exparser}r.exparser.globalOptions.publicProperties=!0,r.exparser.globalOptions.renderingMode="full",r.exparser.globalOptions.documentBackend="custom",r.exparser.globalOptions.domain="//",r.exparser.globalOptions.classPrefix="",r.exparser.globalOptions.hasDOMBackend=!1,r.exparser.globalOptions.writeIdToDOM=!0,r.exparser.globalOptions.listenerChangeLifeTimes=!0,r.exparser.initBackend();var c=new Map,u=new Map;function l(e,r,o){var i;if(c.get(e))return c.get(e);n.default.openStart(e,r.id,o);var a=new t.default(r,c,e,o);return c.set(e,a),null===(i=u.get(e))||void 0===i||i.forEach((function(e,t){return a.processEvent(t,e)})),u.delete(e),a}function f(e){}var p=function(t){var n=t.extraWx,o=t.onCanvasEvent,i=t.initDone;void 0!==n&&Object.keys(n).forEach((function(e){r._wx[e]=n[e]})),"function"==typeof o&&o((function(e,t,r){var n=c.get(e);n?n.processEvent(t,r):(!u.has(e)&&u.set(e,new Map),u.get(e).set(t,r))})),i({xrFrameSystem:e})}})(),xrFrame=i})(),(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};e.r(t),e.d(t,{SKYLINE_TABBAR_VIEW_ID:()=>C,addIntersectionObserver:()=>Oa,addMediaQueryObserver:()=>Da,applyInitialRenderingCache:()=>Mo,beginTapMark:()=>xr,callRestoredLifeTimes:()=>mo,callSavedLifeTimes:()=>_o,checkTapMark:()=>Er,customComponentMode:()=>es,dispatchViewRoute:()=>Fo,enableUpdateWxAppCode:()=>za,endTapMark:()=>wr,getComponentCount:()=>po,getDomTreeByPageId:()=>Ci,getEntryFile:()=>oo,getMergeDataFunc:()=>ts,getNodeById:()=>Yi,getNodeId:()=>Zi,getPageId:()=>ta,getPluginRoutePrefix:()=>Kn,getRestoreState:()=>ns,getRootCompName:()=>ea,getRootNode:()=>Ji,getRootNodeId:()=>Qi,getSubPackagePlugin:()=>no,getWorkletIdByName:()=>vi,isPageExist:()=>rs,isShowCustomTabBarByConfig:()=>I,isSubPackageIndependent:()=>Yn,matchSubPackageName:()=>qn,newPage:()=>Ti,newTabBar:()=>Ei,prepareInitRender:()=>is,prepareSubPackagesStyle:()=>Ii,removeIntersectionObserver:()=>Ma,removeMediaQueryObserver:()=>La,scheduleIntersectionUpdate:()=>Pa,setEventHandlerChangeListener:()=>an,setModelValueData:()=>Zo,setPageType:()=>te,spreadScopeDataToDOMNode:()=>Ja,startInitRender:()=>os,updateWxAppCode:()=>Xa,viewThreadHideTabBar:()=>L,viewThreadShowTabBar:()=>D,wrapTapMark:()=>Sr});var r="undefined"!=typeof exparser?exparser:{},n="webview";"undefined"!=typeof __useSclExparser__&&__useSclExparser__&&"undefined"!=typeof __sclEngine__&&(n="scl"),"undefined"!=typeof __skylineEngine__&&(n="skyline"),void 0!==xrFrame&&(n="xr-frame"),"scl"===n?r=__sclEngine__.exparser||r||{}:"skyline"===n?r=__skylineEngine__.getRuntime().getExparser()||r||{}:"xr-frame"===n&&(r=xrFrame.getExparser()||r||{});var o=()=>r,i=()=>__skylineEngine__.getRuntime(),a=()=>n,s=o(),c=/^[-+a-z]+:\/\//i,u=function(e,t){if(c.test(t))return t;var r=e.match(c),n="";r&&(n=r[0],e=e.slice(n.length)),0===t.indexOf("/")&&(e="");var o=e.split("/");o.pop();for(var i=t.split("/");i.length;){var a=i.shift();""!==a&&"."!==a&&(".."!==a?o.push(a):o.pop())}return n+o.join("/")},l=t=>{var r=(void 0===window?e.g:window).__wcc_version_info__;if(r)return r[t]},f=()=>Math.floor(4294967296*(1+Math.random())).toString(16).slice(1),p=e=>Object.keys(e).map((t=>e[t])),d=(e,t,r)=>{e instanceof s.Component&&(t>0&&r(e),t&&e.shadowRoot instanceof s.Element&&d(e.shadowRoot,t,r),t<0&&r(e));for(var n=e.childNodes,o=0;o<n.length;o++)n[o]instanceof s.Element&&d(n[o],t,r)},h=e=>{if(null==e)return e;var t=typeof e;if("string"===t||"number"===t||"boolean"===t)return e;if(Array.isArray(e)){for(var r=Array(e.length),n=0;n<e.length;++n)r[n]=h(e[n]),void 0===r[n]&&(r[n]=null);return r}if("object"===t){for(var o={},i=Object.keys(e),a=0;a<i.length;++a)o[i[a]]=h(e[i[a]]),void 0===o[i[a]]&&delete o[i[a]];return o}},_=e=>{var t={};return e.forEach((e=>{t[e]={ok:!1,callbacks:[]}})),{notify(e){t[e]&&(t[e].ok=!0,t[e].callbacks.forEach((e=>e())),t[e].callbacks=[])},on(e,r){t[e]&&(t[e].ok?r():t[e].callbacks.push(r))},isNotified:e=>t[e]&&t[e].ok}},m=o();var v=class{constructor(){this._idNodeMap={}}getAll(){return this._idNodeMap}getNodeById(e){return this._idNodeMap[e]}getNodeId(e){return e.__wxTmplId}allocNodeId(e,t){var r=t||f();return e.__wxTmplId=r,this._idNodeMap[e.__wxTmplId]=e,r}addNode(){}removeNode(e){if(e.__wxTmplId&&delete this._idNodeMap[e.__wxTmplId],e.childNodes)for(var t=0;t<e.childNodes.length;t++)this.removeNode(e.childNodes[t]);e.shadowRoot instanceof m.Element&&this.removeNode(e.shadowRoot)}},y=BabelRuntimeHelpers.asyncToGenerator,g=e.n(y),b={WX_EVENT:11,REQUEST_SAVE:12,COMPONENT_DEF:21,SAVE_STATE:22,RESTORE_STATE:23,FLOW_INITIAL_RENDERING_CACHE:24,FLOW_CLEAR_INITIAL_RENDERING_CACHE:25,FLOW_SET_SUBPACKAGE_LOADED:26,SET_DATA_CALLBACK:32,FLOW_SET_DATA:33,FLUSH_BLOCKED:43,FLOW_GROUP:41,FLOW_GROUP_END:42,FLOW_DEPTH:2,FLOW_INITIAL_CREATION:3,FLOW_UPDATE:6,FLOW_DATA_OBSERVER:8,FLOW_APPLY_PROPERTY:4,FLOW_MINIPULATE_CHILD:7,FLOW_CREATE_NODE:5,FLOW_REPEAT:9,FLOW_VIEW_INFO:63,REQUEST_TAB:51,COMPONENT_DEF_TAB:52,FLOW_CREATE_TAB:53,DESTROY_TAB:54,FLOW_DESTROY_PAGE:55,SHOW_TAB:56,HIDE_TAB:57,SCL_CONTEXT_READY:58,REQUEST_BROADCAST_VIEW_ID:61,RESPONSE_BROADCAST_VIEW_ID:62,BANNING_MAP:90,CALL_METHOD_FROM_WXS:50,RESPONSE_VIEW_INFO:64,MODEL_VALUE_CHANGE:65,FLOW_SET_NODE_ANIMATION_INFO:100,ANIMATION_TRANSITION_END:101,FLOW_CLEAR_NODE_ANIMATION_INFO:102,CLEAR_ANIMATION_COMPLETE:103,FLOW_SET_NODE_NEXT_ANIMATION_INFO:104,LOAD_COMPONENT_DEF:110,FLOW_WAIT_COMPONENT:112,FLOW_REPLACE_PLACEHOLDER:113,FLOW_PEND_PLACEHOLDER_REPLACEMENT:114,FLOW_COMPONENT_DEF_ADD:120,FLOW_INJECT_SUBPACKAGE:121,FLOW_INJECT_COMPONENT:122,FLOW_HOT_UPDATE:900,FLOW_HOT_UPDATE_CHILD:901,FLOW_HOT_UPDATE_RESET:902,UPDATE_COMPONENT_DEF:903,UPDATE_PERFORMANCE_STAT:800,ENABLE_UPDATE_PERFORMANCE_STAT:801,DISABLE_UPDATE_PERFORMANCE_STAT:802,ENABLE_GLOBAL_UPDATE_PERFORMANCE_STAT:803,REQUEST_WORKLET_METHOD:200,RESPONSE_WORKLET_METHOD:201,FLOW_SET_NODE_ANIMATED_STYLE:202,FLOW_CLEAR_NODE_ANIMATED_STYLE:203,APPLY_NODE_ANIMATED_STYLE_END:204,CLEAR_NODE_ANIMATED_STYLE_END:205,XR_FRAME_CANVAS_CREATED:300,XR_FRAME_CANVAS_READY:301,FLOW_SET_ROOT_PROPERTIES:302,XR_FRAME_COMP_OPTIONS:303,LOAD_APP_PKG:1e3,LOAD_APP_PKG_READY:1001},w={};Object.keys(b).forEach((e=>{w[b[e]]=e}));var x=e=>w[e]||`UNKNOWN_EVENT_${e}`,S=0,E=1,T=2,C=4294967297,A=4294967298,O="custom-tab-bar/index";class M{constructor(){this.__instances=void 0,this.__instances=new Map}add(e,t,r){this.__instances.set(e,{tm:r,renderType:t})}get(e){var t=this.__instances.get(e);return t||wxNativeConsole.warn(`[customTabBarManager] pageId: ${e} TabBar is not exists`),t}remove(e){this.__instances.delete(e)}has(e){return this.__instances.has(e)}getRenderType(e){var t;return(null===(t=this.__instances.get(e))||void 0===t?void 0:t.renderType)||"webview"}}M.MANAGER=void 0;var R=()=>(M.MANAGER||(M.MANAGER=new M),M.MANAGER),P=e=>{var t,r,n,o,i=(null===(t=__wxConfig)||void 0===t||null===(r=t.tabBar)||void 0===r?void 0:r.renderer)||"webview";if(Array.isArray(null===(n=__wxConfig)||void 0===n||null===(o=n.tabBar)||void 0===o?void 0:o.list))for(var a=__wxConfig.tabBar.list,s=0;s<a.length;s++){var c=a[s];if(c.pagePath===`${e}.html`){"string"==typeof c.renderer&&(i=c.renderer);break}}return wxNativeConsole.info(`[CustomTabBar] getCustomTabBarRenderer pagePath: ${e}, renderer: ${i}`),"cover-view"===i?"scl":i||"webview"},I=e=>{var t,r;if(Array.isArray(null===(t=__wxConfig)||void 0===t||null===(r=t.tabBar)||void 0===r?void 0:r.list))for(var n=__wxConfig.tabBar.list,o=0;o<n.length;o++){var i=n[o];if(i.pagePath===`${e}.html`)return!i.hide}return!1},N=()=>{var e,t;return!(null===(e=__wxConfig)||void 0===e||null===(t=e.tabBar)||void 0===t||!t.custom)},D=()=>{var e,t,r=a();"skyline"===r?null===(e=window.__TAB_BAR__)||void 0===e||null===(t=e.__domElement)||void 0===t||t.setStyle("pointer-events: none; display: flex;"):"scl"===r&&__sclEngine__.showTabBarContainer()},L=()=>{var e,t,r=a();"skyline"===r?null===(e=window.__TAB_BAR__)||void 0===e||null===(t=e.__domElement)||void 0===t||t.setStyle("pointer-events: none; display: none;"):"scl"===r?__sclEngine__.hideTabBarContainer():"webview"===r&&window.__TAB_BAR__&&window.__TAB_BAR__.parentNode.removeChild(window.__TAB_BAR__)},F=e=>{var t=R().get(e),r=null==t?void 0:t.renderType;"webview"!==r?Q(b.HIDE_TAB,{},"skyline"===r?C:"scl"===r?A:e):Q(b.DESTROY_TAB,[],e)},k={},B=-1,j=null,U=!1,G=()=>U,V=[],W=null,z=null,H=!1,X=()=>"undefined"!=typeof __webViewSDK__?__webViewSDK__:"undefined"!=typeof __sclSDK__?__sclSDK__:__skylineSDK__,K={[C]:"skyline",[A]:"scl"},$={},q={},Y=(new Set,(e,t)=>{var r="webview"===a()||"scl"===a()?e:"xr-frame"===a()?[...e]:e.map((e=>h(e))),n=r.shift();if(""===n)return B=t,void(j&&j(t));t=t||0,"webview"===a()&&(t=0),Z(t,n,r)}),Z=(e,t,r)=>{var n,o=null;if(k[e]&&(o=k[e][t]),!o&&k.$GLOBAL&&(o=k.$GLOBAL[t]),!(o||"skyline"!==a()||null!==(n=q[e])&&void 0!==n&&n.isReady))return q[e]||(q[e]={queue:[],isReady:!1}),void q[e].queue.push({ev:t,data:r});o?o(r,t,e):wxNativeConsole.error(`[VD] recvData no handler for event=${t}, pageId=${e}`)},J=()=>{z&&(z=clearTimeout(z)),V.length&&$[W].vdSyncBatch(V,W&&[W]),W=null,V=[],H=!1},Q=(e,t,r,n)=>(t=[e].concat(t),"webview"!==K[r]?$[r]?void $[r].vdSync(t,r&&[r]):void wxNativeConsole.warn(`pageId: ${r}, ev: ${e}. Ignore sendData cause Page is removed. `):("webview"===K[r]&&(r=0),!H||n?(J(),H=!0,void $[r].vdSync(t,r&&[r])):(W!==r&&J(),W=r,V.push(t),H=!0,void(z||(z=setTimeout((()=>{z=null,J()}),15)))))),ee=e=>{e.__registered||(e.__registered=!0,e.onVdSync(((e,t)=>{void 0===K[t]&&te(t,"webview"),Y(e,t)})),e.onVdSyncBatch(((e,t)=>{void 0===K[t]&&te(t,"webview");for(var r=0;r<e.length;r++)Y(e[r],t)})))};var te=(e,t)=>{var r;null!==(r=$[e])&&void 0!==r&&r.__registered&&K[e]===t||(K[e]=t,$[e]="webview"===t?X()._virtualDOMTunnel:X().createVDTunnel(e),ee($[e]))},re=e=>K[e],ne=(e,t,r)=>{if(""===e)return j=t,void(B>=0&&j(B));k[r=r||0]||(k[r]={}),k[r][e]=t},oe={},ie=(e,t)=>{oe[e]=t},ae=e=>{Object.keys(oe).forEach((t=>{ne(t,oe[t],e)})),q[e]&&(q[e].isReady=!0,q[e].queue.forEach((({ev:t,data:r})=>{Z(e,t,r)})),q[e].queue=[])},se=e=>(t,r={})=>{if(0===t.length)return 0;wxNativeConsole.info(`[Lazyload] loadJsFileTo${e}`);var n=Date.now(),o=__subContextEngine__.loadJsFiles(t,null,{reportKey:void 0,isPageInitialScript:r.isPageInitialScript}),i=Date.now();return wxNativeConsole.info(`[Lazyload] loadJsFileTo${e} done, cost: ${i-n}ms`),{cost:i-n,res:o}},ce=(se("AppService"),se("RenderContext")),ue=new Set,le=!1,fe=[],pe=se("SclContext"),de=(e,t,r=!1)=>{if(le)fe.push([e,t,r]);else{var n=e.filter((e=>ue.has(e))),o=r?e:e.filter((e=>!ue.has(e)));if(n.length>0&&wxNativeConsole.info("[VD] loadJsFileToWebview ignored loaded: "+n.join(",")),0===o.length)return wxNativeConsole.info("[VD] loadJsFileToWebview no files to load, return"),void t(0);o.forEach((e=>ue.add(e)));var i={paths:o},a=void 0;"android"===__wxConfig.platform?i.key=a:i.options={reportKey:a},le=!0;var s=Date.now();WeixinJSBridge.invoke("loadJsFiles",i,(()=>{var e=Date.now();if(t(e-s),le=!1,fe.length>0){var r=fe.shift();de(...r)}}))}},he=(e,t)=>{var r=Date.now();__appServiceSDK__.loadSubpackage({name:e,success(){var n=Date.now();t({cost:n-r,res:"ok",pkg:e}),wxNativeConsole.info(`[VD] loadSubPackage ${e} success, cost ${n-r}`)},fail(){var n=Date.now();t({cost:n-r,res:"fail",pkg:e}),wxNativeConsole.info(`[VD] loadSubPackage ${e} fail, cost ${n-r}`)},complete(t){wxNativeConsole.info("[VD] loadSubpackage "+e+": ",t)}})},_e=(e,t)=>{wxNativeConsole.info("[VD] injectSubPackages: "+e.join(", ")),WeixinJSBridge.invoke("injectSubPackages",{subPackages:e},t)},me=new Set,ve=(e,t)=>{var r=e.filter((e=>me.has(e))),n=e.filter((e=>!me.has(e)));if(r.length>0&&wxNativeConsole.info(`[loadComponentsInDevTool] ignored loaded: [${r.length} comps]`),0===n.length)return wxNativeConsole.info("[loadComponentsInDevTool] no comps to load, return"),t(0),0;n.forEach((e=>me.add(e)));var o=Date.now();return WeixinJSBridge.invoke("loadComponents",{comps:n},(()=>{var e=Date.now();t(e-o)})),Date.now()-o},ye=5e3,ge=()=>{},be=e=>{ge(e)},we=o(),xe={},Se=1,Ee=(e,t,r)=>{void 0===e.__resizers?(e.__resizers=[],(e=>{var t=Se++;xe[t]=e,we.Observer.create((e=>{"detached"===e.status&&delete xe[t]})).observe(e,{attachStatus:!0})})(e),e.__resizers[t]=r):e.__resizers[t]=r},Te=(e,t)=>{void 0!==e.__resizers&&(e.__resizers[t]=void 0)},Ce=o(),Ae=null,Oe=null,Me=e=>{e.$$.style.display="none"},Re=e=>{var t=e=>{e instanceof Ce.Component?Me(e):e instanceof Ce.VirtualNode?e.childNodes.forEach((e=>{t(e)})):e instanceof Ce.TextNode&&(e.textContent=""),e.__banned=!0};t(e)},Pe=(e,t)=>{Re(e),((e,t)=>{Oe||(Oe=Ce.registerElement({options:{renderingMode:"native"}}));var r=e.createComponent("wx-hint",Oe),n=document.createElement("div");n.innerText=t.hint,r.$$.appendChild(n),e.appendChild(r,e.childNodes[0])})(e,t)},Ie=BabelRuntimeHelpers.objectSpread2,Ne=e.n(Ie),De=o(),Le=Object.prototype.hasOwnProperty,Fe=De.dataUtils.deepCopy,ke=(e,t,r,n,o)=>{for(var i=o?Fe(e):e,a=0;a<t.length;a++){var s=t[a],c=s[0],u=s[1],l=s[2];if(void 0!==u){for(var f=i,p=c[0],d=1;d<c.length;d++)if(null!=(f=f[p])&&f.__wxspec__&&(f=f.__value__),p=c[d],null!=f&&!Le.call(f,p)){f=null;break}null!=f&&Le.call(f,p)&&(r?null!=l&&"object"==typeof u&&u instanceof Array==l instanceof Array?f[p]={__value__:l,__wxspec__:!0}:null!=f[p]&&f[p].__wxspec__||(f[p]={__value__:f[p],__wxspec__:!0}):f[p]=n?Fe(u,!1):u)}}return i},Be={restoring:null,idDataMap:null,compIdArr:null,compExtraDataMap:null,compIdArrIndex:0,onReady:()=>{}},je=(o(),0),Ue=0,Ge=0,Ve=(e,t,r,n)=>{var o=r-t,i=r-e,a=Math.ceil(Ge/(Ue||1)),s=[je,1,o,Ue,a,2,i,n].map(encodeURIComponent).join(",");je=0,Ue=0,Ge=0,void 0!==Reporter&&Reporter.reportKeyValue({key:"SetDataPerf",value:s,force:!0})},We=0,ze=0,He=0,Xe=0,Ke=0,$e=0,qe=()=>{var e=["libVersion","isFirstPage","isWebview","totalComps","loadedComps","lazyedComps","loadTime","lazyLoadTime"],t=new Set(e),r={},n=!1,o=(o,i)=>{n||(r[o]=i,t.has(o)&&t.delete(o),0===t.size&&((()=>{if(void 0!==Reporter){var t=e.map((e=>encodeURIComponent(r[e]))).join(",");Reporter.reportKeyValue({key:"LazyCodeLoading",value:t,immediately:!0})}})(),n=!0))};return o("libVersion",wx.version.version),o("isWebview",!0),o("lazyedComps",0),o("lazyLoadTime",0),{set:o}},Ye=e=>{var t={};return r=>(t[r]||(t[r]=e(r)),t[r])},Ze=/-[a-z]/g,Je=/([A-Z])/g,Qe=Ye((e=>e.indexOf("-")<=0?e:e.replace(Ze,(e=>e[1].toUpperCase())))),et=Ye((e=>e.replace(Je,"-$1").toLowerCase())),tt={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},rt={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},nt=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],ot={CSS:{},springs:{}};function it(e,t,r){return Math.min(Math.max(e,t),r)}function at(e,t){return e.indexOf(t)>-1}function st(e,t){return e.apply(null,t)}var ct={arr:function(e){return Array.isArray(e)},obj:function(e){return at(Object.prototype.toString.call(e),"Object")},pth:function(e){return ct.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||ct.svg(e)||e.$$},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return ct.hex(e)||ct.rgb(e)||ct.hsl(e)},key:function(e){return!tt.hasOwnProperty(e)&&!rt.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function ut(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function lt(e,t){var r=ut(e),n=it(ct.und(r[0])?1:r[0],.1,100),o=it(ct.und(r[1])?100:r[1],.1,100),i=it(ct.und(r[2])?10:r[2],.1,100),a=it(ct.und(r[3])?0:r[3],.1,100),s=Math.sqrt(o/n),c=i/(2*Math.sqrt(o*n)),u=c<1?s*Math.sqrt(1-c*c):0,l=c<1?(c*s-a)/u:-a+s;function f(e){var r=t?t*e/1e3:e;return r=c<1?Math.exp(-r*c*s)*(1*Math.cos(u*r)+l*Math.sin(u*r)):(1+l*r)*Math.exp(-r*s),0===e||1===e?e:1-r}return t?f:function(){var t=ot.springs[e];if(t)return t;for(var r=1/6,n=0,o=0;;)if(1===f(n+=r)){if(++o>=16)break}else o=0;var i=n*r*1e3;return ot.springs[e]=i,i}}function ft(e){return void 0===e&&(e=10),function(t){return Math.round(t*e)*(1/e)}}var pt,dt,ht=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function n(e){return 3*e}function o(e,o,i){return((t(o,i)*e+r(o,i))*e+n(o))*e}function i(e,o,i){return 3*t(o,i)*e*e+2*r(o,i)*e+n(o)}return function(t,r,n,a){if(0<=t&&t<=1&&0<=n&&n<=1){var s=new Float32Array(11);if(t!==r||n!==a)for(var c=0;c<11;++c)s[c]=o(c*e,t,n);return function(e){return t===r&&n===a||0===e||1===e?e:o(u(e),r,a)}}function u(r){for(var a=0,c=1;10!==c&&s[c]<=r;++c)a+=e;--c;var u=a+(r-s[c])/(s[c+1]-s[c])*e,l=i(u,t,n);return l>=.001?function(e,t,r,n){for(var a=0;a<4;++a){var s=i(t,r,n);if(0===s)return t;t-=(o(t,r,n)-e)/s}return t}(r,u,t,n):0===l?u:function(e,t,r,n,i){var a,s,c=0;do{(a=o(s=t+(r-t)/2,n,i)-e)>0?r=s:t=s}while(Math.abs(a)>1e-7&&++c<10);return s}(r,a,a+e,t,n)}}}(),_t=(pt={linear:function(){return function(e){return e}}},dt={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,r=4;e<((t=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var r=it(e,1,10),n=it(t,.1,2);return function(e){return 0===e||1===e?e:-r*Math.pow(2,10*(e-1))*Math.sin((e-1-n/(2*Math.PI)*Math.asin(1/r))*(2*Math.PI)/n)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,t){dt[e]=function(){return function(e){return Math.pow(e,t+2)}}})),Object.keys(dt).forEach((function(e){var t=dt[e];pt["easeIn"+e]=t,pt["easeOut"+e]=function(e,r){return function(n){return 1-t(e,r)(1-n)}},pt["easeInOut"+e]=function(e,r){return function(n){return n<.5?t(e,r)(2*n)/2:1-t(e,r)(-2*n+2)/2}}})),pt);function mt(e,t){if(ct.fnc(e))return e;var r=e.split("(")[0],n=_t[r],o=ut(e);switch(r){case"spring":return lt(e,t);case"cubicBezier":return st(ht,o);case"steps":return st(ft,o);default:return st(n,o)}}function vt(e){try{return document.querySelectorAll(e)}catch(e){return}}function yt(e,t){for(var r=e.length,n=arguments.length>=2?arguments[1]:void 0,o=[],i=0;i<r;i++)if(i in e){var a=e[i];t.call(n,a,i,e)&&o.push(a)}return o}function gt(e){return e.reduce((function(e,t){return e.concat(ct.arr(t)?gt(t):t)}),[])}function bt(e){return ct.arr(e)?e:(ct.str(e)&&(e=vt(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function wt(e,t){return e.some((function(e){return e===t}))}function xt(e){var t={};for(var r in e)t[r]=e[r];return t}function St(e,t){var r=xt(e);for(var n in e)r[n]=t.hasOwnProperty(n)?t[n]:e[n];return r}function Et(e,t){var r=xt(e);for(var n in t)r[n]=ct.und(e[n])?t[n]:e[n];return r}function Tt(e){return ct.rgb(e)?(r=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t=e))?"rgba("+r[1]+",1)":t:ct.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,r,n){return t+t+r+r+n+n})),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(r[1],16)+","+parseInt(r[2],16)+","+parseInt(r[3],16)+",1)"}(e):ct.hsl(e)?function(e){var t,r,n,o=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(o[1],10)/360,a=parseInt(o[2],10)/100,s=parseInt(o[3],10)/100,c=o[4]||1;function u(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}if(0==a)t=r=n=s;else{var l=s<.5?s*(1+a):s+a-s*a,f=2*s-l;t=u(f,l,i+1/3),r=u(f,l,i),n=u(f,l,i-1/3)}return"rgba("+255*t+","+255*r+","+255*n+","+c+")"}(e):void 0;var t,r}function Ct(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function At(e,t){return ct.fnc(e)?e(t.target,t.id,t.total):e}function Ot(e,t){return e.getAttribute(t)}function Mt(e,t,r){if(e=e.$$||e,wt([r,"deg","rad","turn"],Ct(t)))return t;var n=ot.CSS[t+r];if(!ct.und(n))return n;var o=document.createElement(e.tagName),i=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;i.appendChild(o),o.style.position="absolute",o.style.width=100+r;var a=100/o.offsetWidth;i.removeChild(o);var s=a*parseFloat(t);return ot.CSS[t+r]=s,s}function Rt(e,t,r){if(t in e.style){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=e.style[t]||getComputedStyle(e.$$||e).getPropertyValue(n)||"0";return r?Mt(e,o,r):o}}function Pt(e,t){return ct.dom(e)&&!ct.inp(e)&&(Ot(e,t)||ct.svg(e)&&e[t])?"attribute":ct.dom(e)&&wt(nt,t)?"transform":ct.dom(e)&&"transform"!==t&&Rt(e,t)?"css":null!=e[t]?"object":void 0}function It(e){if(ct.dom(e)){for(var t,r=e.style.transform||"",n=/(\w+)\(([^)]*)\)/g,o=new Map;t=n.exec(r);)o.set(t[1],t[2]);return o}}function Nt(e,t,r,n){var o=at(t,"scale")?1:0+function(e){return at(e,"translate")||"perspective"===e?"px":at(e,"rotate")||at(e,"skew")?"deg":void 0}(t),i=It(e).get(t)||o;return r&&(r.transforms.list.set(t,i),r.transforms.last=t),n?Mt(e,i,n):i}function Dt(e,t,r,n){switch(Pt(e,t)){case"transform":return Nt(e,t,n,r);case"css":return Rt(e,t,r);case"attribute":return Ot(e,t);default:return e[t]||0}}function Lt(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var n=Ct(e)||0,o=parseFloat(t),i=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return o+i+n;case"-":return o-i+n;case"*":return o*i+n}}function Ft(e,t){if(ct.col(e))return Tt(e);if(/\s/g.test(e))return e;var r=Ct(e),n=r?e.substr(0,e.length-r.length):e;return t?n+t:n}function kt(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Bt(e){for(var t,r=e.points,n=0,o=0;o<r.numberOfItems;o++){var i=r.getItem(o);o>0&&(n+=kt(t,i)),t=i}return n}function jt(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*Ot(e,"r")}(e);case"rect":return function(e){return 2*Ot(e,"width")+2*Ot(e,"height")}(e);case"line":return function(e){return kt({x:Ot(e,"x1"),y:Ot(e,"y1")},{x:Ot(e,"x2"),y:Ot(e,"y2")})}(e);case"polyline":return Bt(e);case"polygon":return function(e){var t=e.points;return Bt(e)+kt(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function Ut(e,t){var r=t||{},n=r.el||function(e){for(var t=e.parentNode;ct.svg(t)&&ct.svg(t.parentNode);)t=t.parentNode;return t}(e),o=n.getBoundingClientRect(),i=Ot(n,"viewBox"),a=o.width,s=o.height,c=r.viewBox||(i?i.split(" "):[0,0,a,s]);return{el:n,viewBox:c,x:c[0]/1,y:c[1]/1,w:a/c[2],h:s/c[3]}}function Gt(e,t){function r(r){void 0===r&&(r=0);var n=t+r>=1?t+r:0;return e.el.getPointAtLength(n)}var n=Ut(e.el,e.svg),o=r(),i=r(-1),a=r(1);switch(e.property){case"x":return(o.x-n.x)*n.w;case"y":return(o.y-n.y)*n.h;case"angle":return 180*Math.atan2(a.y-i.y,a.x-i.x)/Math.PI}}function Vt(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=Ft(ct.pth(e)?e.totalLength:e,t)+"";return{original:n,numbers:n.match(r)?n.match(r).map(Number):[0],strings:ct.str(e)||t?n.split(r):[]}}function Wt(e){return yt(e?gt(ct.arr(e)?e.map(bt):bt(e)):[],(function(e,t,r){return r.indexOf(e)===t}))}function zt(e){var t=Wt(e);return t.map((function(e,r){return{target:e,id:r,total:t.length,transforms:{list:It(e)}}}))}function Ht(e,t){var r=xt(t);if(/^spring/.test(r.easing)&&(r.duration=lt(r.easing)),ct.arr(e)){var n=e.length;2===n&&!ct.obj(e[0])?e={value:e}:ct.fnc(t.duration)||(r.duration=t.duration/n)}var o=ct.arr(e)?e:[e];return o.map((function(e,r){var n=ct.obj(e)&&!ct.pth(e)?e:{value:e};return ct.und(n.delay)&&(n.delay=r?0:t.delay),ct.und(n.endDelay)&&(n.endDelay=r===o.length-1?t.endDelay:0),n})).map((function(e){return Et(e,r)}))}function Xt(e,t){var r=[],n=t.keyframes;for(var o in n&&(t=Et(function(e){for(var t=yt(gt(e.map((function(e){return Object.keys(e)}))),(function(e){return ct.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),r={},n=function(n){var o=t[n];r[o]=e.map((function(e){var t={};for(var r in e)ct.key(r)?r==o&&(t.value=e[r]):t[r]=e[r];return t}))},o=0;o<t.length;o++)n(o);return r}(n),t)),t)ct.key(o)&&r.push({name:o,tweens:Ht(t[o],e)});return r}function Kt(e,t){var r;return e.tweens.map((function(n){var o=function(e,t){var r={};for(var n in e){var o=At(e[n],t);ct.arr(o)&&1===(o=o.map((function(e){return At(e,t)}))).length&&(o=o[0]),r[n]=o}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}(n,t),i=o.value,a=ct.arr(i)?i[1]:i,s=Ct(a),c=Dt(t.target,e.name,s,t),u=r?r.to.original:c,l=ct.arr(i)?i[0]:u,f=Ct(l)||Ct(c),p=s||f;return ct.und(a)&&(a=u),o.from=Vt(l,p),o.to=Vt(Lt(a,l),p),o.start=r?r.end:0,o.end=o.start+o.delay+o.duration+o.endDelay,o.easing=mt(o.easing,o.duration),o.isPath=ct.pth(i),o.isColor=ct.col(o.from.original),o.isColor&&(o.round=1),r=o,o}))}var $t={css:function(e,t,r){if(e.$$)return`${t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${wx.transformRpx(" "+r)};`;e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,n,o){if(n.list.set(t,r),t===n.last||o){var i="";if(n.list.forEach((function(e,t){i+=t+"("+e+") "})),e.$$)return`transform:${wx.transformRpx(" "+i)};`;e.style.transform=i}return""}};function qt(e,t){zt(e).forEach((function(e){for(var r in t){var n=At(t[r],e),o=e.target,i=Ct(n),a=Dt(o,r,i,e),s=Lt(Ft(n,i||Ct(a)),a),c=Pt(o,r);$t[c](o,r,s,e.transforms,!0)}}))}function Yt(e,t){return yt(gt(e.map((function(e){return t.map((function(t){return function(e,t){var r=Pt(e.target,t.name);if(r){var n=Kt(t,e),o=n[n.length-1];return{type:r,property:t.name,animatable:e,tweens:n,duration:o.end,delay:n[0].delay,endDelay:o.endDelay}}}(e,t)}))}))),(function(e){return!ct.und(e)}))}function Zt(e,t){var r=e.length,n=function(e){return e.timelineOffset?e.timelineOffset:0},o={};return o.duration=r?Math.max.apply(Math,e.map((function(e){return n(e)+e.duration}))):t.duration,o.delay=r?Math.min.apply(Math,e.map((function(e){return n(e)+e.delay}))):t.delay,o.endDelay=r?o.duration-Math.max.apply(Math,e.map((function(e){return n(e)+e.duration-e.endDelay}))):t.endDelay,o}var Jt=0;var Qt,er=[],tr=function(){function e(){Qt=requestAnimationFrame(t)}function t(t){var r=er.length;if(r){for(var n=0;n<r;){var o=er[n];if(o.paused){var i=er.indexOf(o);i>-1&&(er.splice(i,1),r=er.length)}else o.tick(t);n++}e()}else Qt=cancelAnimationFrame(Qt)}return e}();function rr(e){void 0===e&&(e={});var t,r=0,n=0,o=0,i=0,a=null;function s(e){var t=window.Promise&&new Promise((function(e){return a=e}));return e.finished=t,t}var c=function(e){var t=St(tt,e),r=St(rt,e),n=Xt(r,e),o=zt(e.targets),i=Yt(o,n),a=Zt(i,r),s=Jt;return Jt++,Et(t,{id:s,children:[],animatables:o,animations:i,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}(e);s(c);function u(){var e=c.direction;"alternate"!==e&&(c.direction="normal"!==e?"normal":"reverse"),c.reversed=!c.reversed,t.forEach((function(e){return e.reversed=c.reversed}))}function l(e){return c.reversed?c.duration-e:e}function f(){r=0,n=l(c.currentTime)*(1/rr.speed)}function p(e,t){t&&t.seek(e-t.timelineOffset)}function d(e){for(var t=0,r=c.animations,n=r.length,o=[];t<n;){var i=r[t],a=i.animatable,s=i.tweens,u=s.length-1,l=s[u];u&&(l=yt(s,(function(t){return e<t.end}))[0]||l);for(var f=it(e-l.start-l.delay,0,l.duration)/l.duration,p=isNaN(f)?1:l.easing(f),d=l.to.strings,h=l.round,_=[],m=l.to.numbers.length,v=void 0,y=0;y<m;y++){var g=void 0,b=l.to.numbers[y],w=l.from.numbers[y]||0;g=l.isPath?Gt(l.value,p*b):w+p*(b-w),h&&(l.isColor&&y>2||(g=Math.round(g*h)/h)),_.push(g)}var x=d.length;if(x){v=d[0];for(var S=0;S<x;S++){d[S];var T=d[S+1],C=_[S];isNaN(C)||(v+=T?C+T:C+" ")}}else v=_[0];var A=$t[i.type](a.target,i.property,v,a.transforms);o.push(A),i.currentValue=v,t++}1===c.animatables.length&&c.animatables[0].target.$$&&c.animatables[0].target.setNodeStyle(o.join(" "),E)}function h(e){c[e]&&!c.passThrough&&c[e](c)}function _(e){var f=c.duration,_=c.delay,m=f-c.endDelay,v=l(e);c.progress=it(v/f*100,0,100),c.reversePlayback=v<c.currentTime,t&&function(e){if(c.reversePlayback)for(var r=i;r--;)p(e,t[r]);else for(var n=0;n<i;n++)p(e,t[n])}(v),!c.began&&c.currentTime>0&&(c.began=!0,h("begin")),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,h("loopBegin")),v<=_&&0!==c.currentTime&&d(0),(v>=m&&c.currentTime!==f||!f)&&d(f),v>_&&v<m?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,h("changeBegin")),h("change"),d(v)):c.changeBegan&&(c.changeCompleted=!0,c.changeBegan=!1,h("changeComplete")),c.currentTime=it(v,0,f),c.began&&h("update"),e>=f&&(n=0,c.remaining&&!0!==c.remaining&&c.remaining--,c.remaining?(r=o,h("loopComplete"),c.loopBegan=!1,"alternate"===c.direction&&u()):(c.paused=!0,c.completed||(c.completed=!0,h("loopComplete"),h("complete"),!c.passThrough&&"Promise"in window&&(a(),s(c)))))}return c.reset=function(){var e=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed="reverse"===e,c.remaining=c.loop,t=c.children;for(var r=i=t.length;r--;)c.children[r].reset();(c.reversed&&!0!==c.loop||"alternate"===e&&1===c.loop)&&c.remaining++,d(c.reversed?c.duration:0)},c.set=function(e,t){return qt(e,t),c},c.tick=function(e){o=e,r||(r=o),_((o+(n-r))*rr.speed)},c.seek=function(e){_(l(e))},c.pause=function(){c.paused=!0,f()},c.play=function(){c.paused&&(c.completed&&c.reset(),c.paused=!1,er.push(c),f(),Qt||tr())},c.reverse=function(){u(),f()},c.restart=function(){c.reset(),c.play()},c.reset(),c.autoplay&&c.play(),c}function nr(e,t){for(var r=t.length;r--;)wt(e,t[r].animatable.target)&&t.splice(r,1)}rr.version="3.1.0",rr.speed=1,rr.running=er,rr.remove=function(e){for(var t=Wt(e),r=er.length;r--;){var n=er[r],o=n.animations,i=n.children;nr(t,o);for(var a=i.length;a--;){var s=i[a],c=s.animations;nr(t,c),c.length||s.children.length||i.splice(a,1)}o.length||i.length||n.pause()}},rr.get=Dt,rr.set=qt,rr.convertPx=Mt,rr.path=function(e,t){var r=ct.str(e)?vt(e)[0]:e,n=t||100;return function(e){return{property:e,el:r,svg:Ut(r),totalLength:jt(r)*(n/100)}}},rr.setDashoffset=function(e){var t=jt(e);return e.setAttribute("stroke-dasharray",t),t},rr.stagger=function(e,t){void 0===t&&(t={});var r=t.direction||"normal",n=t.easing?mt(t.easing):null,o=t.grid,i=t.axis,a=t.from||0,s="first"===a,c="center"===a,u="last"===a,l=ct.arr(e),f=l?parseFloat(e[0]):parseFloat(e),p=l?parseFloat(e[1]):0,d=Ct(l?e[1]:e)||0,h=t.start||0+(l?f:0),_=[],m=0;return function(e,t,v){if(s&&(a=0),c&&(a=(v-1)/2),u&&(a=v-1),!_.length){for(var y=0;y<v;y++){if(o){var g=c?(o[0]-1)/2:a%o[0],b=c?(o[1]-1)/2:Math.floor(a/o[0]),w=g-y%o[0],x=b-Math.floor(y/o[0]),S=Math.sqrt(w*w+x*x);"x"===i&&(S=-w),"y"===i&&(S=-x),_.push(S)}else _.push(Math.abs(a-y));m=Math.max.apply(Math,_)}n&&(_=_.map((function(e){return n(e/m)*m}))),"reverse"===r&&(_=_.map((function(e){return i?e<0?-1*e:-e:Math.abs(m-e)})))}return h+(l?(p-f)/m:f)*(Math.round(100*_[t])/100)+d}},rr.timeline=function(e){void 0===e&&(e={});var t=rr(e);return t.duration=0,t.add=function(r,n){var o=er.indexOf(t),i=t.children;function a(e){e.passThrough=!0}o>-1&&er.splice(o,1);for(var s=0;s<i.length;s++)a(i[s]);var c=Et(r,St(rt,e));c.targets=c.targets||e.targets;var u=t.duration;c.autoplay=!1,c.direction=t.direction,c.timelineOffset=ct.und(n)?u:Lt(n,u),a(t),t.seek(c.timelineOffset);var l=rr(c);a(l),i.push(l);var f=Zt(i,e);return t.delay=f.delay,t.endDelay=f.endDelay,t.duration=f.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},rr.easing=mt,rr.penner=_t,rr.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var or=rr,ir=["height","left","matrix","matrix3d","opacity","right","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","top","translate","translate3d","translateX","translateY","translateZ","width","backgroundColor","bottom","borderRadius"],ar=["easeInElastic","easeOutElastic","easeInOutElastic","easeSpringElastic"],sr=Object.assign,cr=Object.keys,ur=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","delay","duration","offset","easing"],lr=["linear","ease","ease-in","ease-out","ease-in-out","cubic-bezier","steps"],fr=(e,t)=>(e="undefined"!=typeof __webViewSDK__?__webViewSDK__.predefinedColor[e]||e:__skylineSDK__.predefinedColor[e]||e,t?[e,e]:e),pr=(e,t)=>{var r=e.length,n=0;return e.map(((e,o)=>{var i,a={};i="offset"in e?e.offset:1===r?1:o/(r-1);var s=n===i;return cr(e).forEach((t=>{ur.indexOf(t)>-1||("transform"!==t?a[t]=fr(e[t],s):sr(a,((e,t)=>{if("none"===(e=e.toLowerCase().trim()))return{};for(var r,n={},o=ur.map((e=>e.toLowerCase())),i={scale3d:"AAA",translate:"Aa",translate3d:"AAA",rotate3d:"AAAA",matrix3d:"AAAAAA",matrix:"AAAAAAAAAAAAAAAA"},a=["rotate3d","matrix","matrix3d"],s=/\s*(\w+)\(([^)]*)\)/g,c=0;r=s.exec(e);){if(r.index!==c)return{};c=r.index+r[0].length;var u=r[1],l=r[2].split(",");if(o.indexOf(u)>-1)n[u.replace(/(x|y|z)$/,(e=>e.toUpperCase()))]=fr(l.join(" "),t);else{if(!(cr(i).indexOf(u)>-1))return{};var f=i[u];if(l.length>f.length)return{};for(var p=f.length-1;p>=0;p--){var d=f[p];if("a"!==d||l[p]){if("A"===d&&!l[p])return{};-1===a.indexOf(u)&&(n[u.replace("3d","")+String.fromCharCode(88+p)]=fr(l[p].trim(),t))}}}}return n})(e[t],s)))})),s?a.duration=0:(a.duration=(i-n)*t,n=i),a}))},dr=e=>{for(var t=0;t<lr.length&&0!==e.indexOf(lr[t]);t++);if(t===lr.length)return"linear";switch(e){case"ease":return"cubicBezier(0.25, 0.1, 0.25, 1)";case"ease-in":return"cubicBezier(0.42, 0, 1, 1)";case"ease-out":return"cubicBezier(0, 0, 0.58, 1)";case"ease-in-out":return"cubicBezier(0.42, 0, 0.58, 1)";default:return e.replace(/^cubic-bezier/,"cubicBezier")}};class hr{constructor(e,t){this._nativeSupported="function"==typeof HTMLElement.prototype.animate;var r=e.keyframeOptions,n=this.direction=r.direction;if(this.timeline=t,this._nativeSupported){var o=((e,t)=>{var r=t.easing;return delete t.easing,e.map((e=>(e.easing=r,e)))})(e.keyframeSet,r);this._inst=e.element.$$.animate(o,sr(r,{fill:"both"})),this._inst.pause()}else this._inst=or({targets:e.element,keyframes:pr(e.keyframeSet,r.duration),autoplay:!1,loop:r.iterations===1/0||r.iterations,easing:dr(r.easing),direction:"normal",delay:"reverse"===n?r.endDelay:r.delay,endDelay:"reverse"===n?r.delay:r.endDelay});t._driven(this)}set currentTime(e){if(!isNaN(e)){var t=this._inst;this._nativeSupported?t.currentTime=e:"reverse"===this.direction?t.seek(t.duration-e):t.seek(e)}}cancel(){this._nativeSupported?this._inst.cancel():this._inst.reset(),this.timeline._destroy(),this._inst=null}}class _r{constructor(e,t){if(t.scrollSource){if(this._scrollNode=window.__DOMTree__.shadowRoot.querySelector(t.scrollSource),this._scrollNode||(this._scrollNode=e&&e.querySelector(t.scrollSource)),!this._scrollNode)throw new Error(`Cannot find scroll source by ${t.scrollSource} selector.`)}else this._scrollNode=window.__DOMTree__;this.orientation=t.orientation||"vertical",this.startScrollOffset=t.startScrollOffset,this.endScrollOffset=t.endScrollOffset,this.timeRange=t.timeRange,this.fill=t.fill||"both",this._scroll=this._scroll.bind(this)}_calcCurrentTime(e,t){var r=this.startScrollOffset,n=this.endScrollOffset,o=this.fill,i=this.timeRange,a=e.scrollTop,s=e.scrollHeight-t.$$.offsetHeight;return"horizontal"===this.orientation&&(a=e.scrollLeft,s=e.scrollWidth-t.$$.offsetWidth),a<r?"none"===o||"forwards"===o?NaN:0:a>=n?n<s&&("none"===o||"backwards"===o)?NaN:i:r>=n?NaN:(a-r)/(n-r)*i}_scroll(){var e=this._calcCurrentTime(this._scrollNode===window.__DOMTree__?window.__DOMTree__.$$:this._scrollNode.getScrollPosition(),this._scrollNode);this._animation.currentTime=e}_driven(e){this._animation=e,this._scrollNode===window.__DOMTree__?document.addEventListener("scroll",this._scroll,{capture:!0,passive:!0}):this._scrollNode.$$.addEventListener("scroll",this._scroll,{capture:!0,passive:!0}),this._scroll()}_destroy(){this._scrollNode===window.__DOMTree__?document.removeEventListener("scroll",this._scroll,{capture:!0,passive:!0}):this._scrollNode.$$.removeEventListener("scroll",this._scroll,{capture:!0,passive:!0})}}var mr=(e,t,r,n,o)=>{var i={element:t,keyframeSet:r.map((e=>{var t={};return Object.entries(e).forEach((([e,r])=>{t[e]=fa(r)})),t})),keyframeOptions:{delay:n.delay||0,direction:n.direction||"normal",duration:n.duration||0,easing:n.easing||"linear",endDelay:n.endDelay||0,iterations:1}},a=new _r(e,o);t.__scrollAnimations=t.__scrollAnimations||[],t.__scrollAnimations.push(new hr(i,a))},vr=(e,t)=>{for(var r=[],n=0;n<e.length;++n)r.push(Object.assign({},e[n]));r[0].offset=0,r[r.length-1].offset=1;for(var o=function(e){r[e].offset=function(e,t){if("number"==typeof t[e].offset)return t[e].offset;for(var r=e+1;r<t.length;++r)if(t[r].offset)return(t[r].offset-t[e-1].offset)/(r-e+1)+t[e-1].offset;return 0}(e,r),r[e].duration=0===e?0:(r[e].offset-r[e-1].offset)*t,ar.some((t=>r[e].ease&&r[e].ease.startsWith(t)))&&(r[e].type="animeJS")},i=0;i<r.length;++i)o(i);return r},yr=0,gr=[],br=(...e)=>{gr.push(e)};Foundation.onLoad((()=>{br=setTimeout,gr.forEach((e=>{setTimeout(...e)}))}));var wr=function(e){yr===e&&(yr=0)},xr=function(){return yr=Date.now()+Math.random()},Sr=function(e){var t,r=xr();try{t=e(r)}catch(e){throw br((()=>{wr(r)}),0),e}return br((()=>{wr(r)}),0),t},Er=function(){return!!yr},Tr=o(),Cr=Object.prototype.hasOwnProperty,Ar=!1,Or=null,Mr=()=>"function"==typeof Or?Or:null,Rr=(e,t)=>Or?Or(e,"nv_",t?2:void 0):e,Pr=(e,t=!1)=>Or?Or(e,void 0,t?2:void 0):e,Ir=(e,t,r)=>t?r?t+e+r:t||"":r||"",Nr=0,Dr=!1,Lr=()=>{Dr&&0===Nr&&(Dr=!1,wx.triggerPageReRender())},Fr=e=>e instanceof Tr.Component&&Tr.Component.getComponentOptions(e).domain,kr=null,Br=[],jr={},Ur=(e,t)=>{var r,n=e,o=Fr(n),s=(r=n)instanceof Tr.Component&&"//"===Tr.Component.getComponentOptions(r).domain,c=Wa.getByNode(n),u={selectAllComponents(r){if(t!==o)return[];var n=Ar?e.shadowRoot.querySelectorAll(r):e.querySelectorAll(r),i=[];return n.forEach((e=>{i.push(Rr(Ur(e,t),!0))})),i},selectComponent(r){if(t!==o)return null;var n=Ar?e.shadowRoot.querySelector(r):e.querySelector(r);return n?Rr(Ur(n,t),!0):null},removeClass(...e){if(!n||!e.length)return this;var t=n.__wxsClass?n.__wxsClass.split(/\s+/):[],r=[];return e.forEach((e=>{(e=e.replace(/^\s+|\s+$/g,""))&&n.classList.contains(e)&&(n.classList.toggle(e),Dr=!0,r.push(e))})),r.forEach((e=>{t.forEach(((r,n)=>r!==e||(t.splice(n,1),!1)))})),n.__wxsClass=t.join(" "),this},addClass(...e){if(!n||!e.length)return this;var t=n.__wxsClass||"",r=[];return e.forEach((e=>{(e=e.replace(/^\s+|\s+$/g,""))&&(n.classList.contains(e)||(n.classList.toggle(e),r.push(e),Dr=!0))})),n.__wxsClass=t+(t?" ":"")+r.join(" "),this},hasClass:e=>!!n&&n.classList.contains(e),setStyle(e){if(!n)return this;if(e===n.__wxsStyle)return this;var t=[];if("object"==typeof e)for(var r of(e=e?Pr(e):{},Object.keys(e)))t.push(`${r}:${e[r]}`);else t=[String(e)];n.__wxsStyle=t.join(";");var o=()=>{var e=window.wx.transformRpx(n.__wxsStyle,!0);n.setNodeStyle(e,T)};if(o(),Ee(n,T,o),Dr=!0,"skyline"===a()){var s=i();wxNativeConsole.info(`[Skyline] call startRender on id ${c.viewId}, reason: wxs setStyle`),s.getContext(c.viewId).startRender()}return this},getDataset:()=>n?Rr(n.dataset):null,getState:()=>n?(n.__wxsState=n.__wxsState||{},n.__wxsState):null,triggerEvent(t,r,o){return s||!e||(r=r?Pr(r):r,o=o?Pr(o):o,Nr++,n.triggerEvent(t,r,o),Nr--),this},callMethod(t,r={}){if(!t)return this;if(r=Pr(r),Ar){var n=e;if(!e||!e.__wxTmplId)console.error("Call method on a non-custom-component node is invalid. Call on the owner component or page instead. To avoid this error hint, try not to call method on `event.instance` , but on `ownerInstance` instead."),n=n.ownerShadowRoot?n.ownerShadowRoot.__wxHost:window.__DOMTree__;Q(b.CALL_METHOD_FROM_WXS,[window.__webviewId__,n&&n.__wxTmplId||0,t,r,Er()],c.viewId)}else wx.callMethodFromWxs([window.__webviewId__,e&&e.__wxTmplId||0,t,r,Er()]);return this},requestAnimationFrame(e){return"function"!=typeof e||"function"==typeof(t=e)&&(Br.push(t),kr||(kr=window.requestAnimationFrame((()=>{kr=null;var e=Br;Br=[],e.forEach((e=>{e(),Lr()}))})))),this;var t},getComputedStyle(e){Array.isArray(e)||(e=[]);var t={computedStyle:e.filter((e=>"string"==typeof e))};return Rr(da(n,t))},setTimeout(e,t,...r){if("function"==typeof e){var n=window.setTimeout((()=>{e(...r),delete jr[n]}),t);return jr[n]=!0,n}},clearTimeout(e){jr[e]&&(window.clearTimeout(e),delete jr[e])},getBoundingClientRect(){var e=n.$$&&n.$$.getBoundingClientRect();return e?Rr({x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left}):{}},animate(e,t,r){e=Pr(e);for(var o=vr(e,t),i=0;i<o.length;++i){var a=`${Math.random()}-${+new Date}`,s=window.__webviewId__,u="animeJS"===o[i].type;delete o[i].type;var l={nodeId:n.getNodeId(),webviewId:s,options:o[i],selector:`#${n.$$.id}`,reqId:a,type:u?"animeJS":void 0,fromWxs:!0};i===o.length-1?(l.hasCallback="function"==typeof r,"function"==typeof r&&(c.applyAnimationCbMap[a]=r),l.isLastAnimation=!0,pa(l)):(l.hasCallback=!1,l.isLastAnimation=!1,pa(l))}},clearAnimation(e,t){var r=`${Math.random()}-${+new Date}`,o=!1;"function"==typeof t?(e=Pr(e),c.clearAnimationCbMap[r]=t,o=!0):"function"==typeof e&&(c.clearAnimationCbMap[r]=e,o=!0);var i={nodeId:n.getNodeId(),webviewId:window.__webviewId__,options:e,selector:`#${n.$$.id}`,reqId:r,fromWxs:!0,hasCallback:o};ua(i)}};return Object.freeze(u),u},Gr=(e,t)=>{var r=e.ownerShadowRoot?e.ownerShadowRoot.__wxHost:window.__DOMTree__,n=t?r:e;return Ar=!!e.ownerShadowRoot,Ur(n,Fr(n))},Vr=null,Wr=[],zr=(e,t)=>{e.wxsObserver&&!Be.restoring&&(Wr.push({node:e,props:t}),Vr||(Vr=window.requestAnimationFrame((()=>{Vr=null;var e=Wr;Wr=[],e.forEach((e=>{((e,t)=>{for(var r in e.wxsObserver)if(Cr.call(t,r)&&e.wxsObserver[r]&&"function"==typeof e.wxsObserver[r].observer){var n=e.wxsObserver[r].value;Tr.safeCallback("WXS Observer",e.wxsObserver[r].observer,null,[Rr(t[r]),Rr(n),Rr(Gr(e,!0),!0),Rr(Gr(e),!0)],e.ownerShadowRoot?e.ownerShadowRoot.__wxHost:void 0),e.wxsObserver[r].value=t[r]}})(e.node,e.props)}))}))))},Hr=([e,t,r,n,o])=>{if(n||(n={}),t){var i=Wa.get(e);if(!i)return;var a=i.nodeId.getNodeById(t);if(!a)return;var s=Tr.Element.getMethodCaller(a);s&&"function"==typeof s[r]&&(o?Sr((()=>{s[r](n)})):s[r](n))}else{var c=__appServiceEngine__.getCurrentPagesByDomain("");if(!c.length)return;var u=c[c.length-1];u&&"function"==typeof u[r]&&(o?Sr((()=>{u[r](n)})):u[r](n))}};Foundation.onLoad((()=>{0}));var Xr=(e,t,r)=>{if(t.__wxsStyle||t.__wxsClass){var n={wxsStyle:t.__wxsStyle,wxsClass:t.__wxsClass,index:r,wxsState:Pr(t.__wxsState)};if(t.ownerShadowRoot){var o=Wa.getByNode(t).nodeId.getNodeId(t.ownerShadowRoot.__wxHost);e._custom=e._custom||{},(e=e._custom)[o]=e[o]||{},e=e[o]}e[t.is]=e[t.is]||[],e[t.is].push(n)}},Kr=(e,t,r)=>{if(e){var n=null;if(t.ownerShadowRoot&&e._custom){var o=Wa.getByNode(t).nodeId.getNodeId(t.ownerShadowRoot.__wxHost);if(!(e=e._custom)[o])return;e=e[o]}e[t.is]&&e[t.is].length&&e[t.is][0]&&e[t.is][0].index===r&&(n=e[t.is].shift()),n&&((e,t)=>{if(e.__wxsStyle=t.wxsStyle,e.__wxsClass=t.wxsClass,e.__wxsState=Rr(t.wxsState),t.wxsStyle){var r=()=>{var t=window.wx.transformRpx(e.__wxsStyle,!0);e.setNodeStyle(t,T)};r(),Ee(e,T,r)}t.wxsClass&&(e.class=Ir(" ",e.class,t.wxsClass))})(t,n)}};class $r{constructor(e,t){this.value=e,this.optimized=t||!1}toString(){return this.value}}function qr(e){var t;return null===e||null!=e&&null!==(t=e.tagName)&&void 0!==t&&t.startsWith("WX-")?e:qr(e.parentElement)}function Yr(e){var t;return null!=e&&null!==(t=e.__wxElement)&&void 0!==t&&t.parentNode?qr(e.parentElement):null}var Zr=(e,t)=>{var r,n=function(e){var t,r=e.parentNode?e.parentNode.children:null;if(!r)return 0;for(var n,o,i=1,a=0;a<r.length;++a){if(r[a]===e)return t?i:0;((n=e)===(o=r[a])||(n.nodeType===Node.ELEMENT_NODE&&o.nodeType===Node.ELEMENT_NODE?n.localName===o.localName:n.nodeType===o.nodeType||(n.nodeType===Node.CDATA_SECTION_NODE?Node.TEXT_NODE:n.nodeType)===(o.nodeType===Node.CDATA_SECTION_NODE?Node.TEXT_NODE:o.nodeType)))&&(t=!0,i+=1)}return-1}(e);if(-1===n)return null;switch(e.nodeType){case Node.ELEMENT_NODE:if(t&&e.getAttribute("id"))return new $r(`//*[@id="${e.getAttribute("id")}"]`,!0);r=e.localName.replace("wx-","");break;case Node.ATTRIBUTE_NODE:r=`@${e.nodeName}`;break;case Node.TEXT_NODE:case Node.CDATA_SECTION_NODE:r="text()";break;case Node.PROCESSING_INSTRUCTION_NODE:r="processing-instruction()";break;case Node.COMMENT_NODE:r="comment()";break;case Node.DOCUMENT_NODE:default:r=""}return n>0&&(r+=`[${n}]`),new $r(r,e.nodeType===Node.DOCUMENT_NODE)},Jr=["wx0cb2b558740023ad","wx4aedf8c9edf9fd72","wx34345ae5855f892d"],Qr=o(),en=Qr.Component.getComponentOptions,tn=(e,t)=>{var r="",n=(e,t,o)=>{o>t||e&&(e instanceof Qr.TextNode?r+=e.$$.textContent:Array.isArray(e.childNodes)&&e.childNodes.forEach((e=>n(e,t,o+1))))};return n(e,t,1),r},rn=(e,t,r)=>{if("undefined"==typeof __userActionTracer__)return t;if(!__userActionTracer__.shouldReportEvent(r))return t;var n=e;try{var o,i={text:__userActionTracer__.limitContent(tn(n,__userActionTracer__.getTextContentMaxLayer())),id:e.id,classname:__userActionTracer__.convertClassList(null==n||null===(o=n.classList)||void 0===o?void 0:o._rawNames),tag:n.$$.tagName,opentype:n.openType};return Ne()(Ne()({},t),{},{__extra:i})}catch(e){return t}},nn=(e,t,r)=>{var n=e;return r&&n instanceof Qr.VirtualNode&&(n.id||Object.getOwnPropertyNames(n.dataset).length||(n=r)),{id:t?"":n.id,offsetLeft:n.$$&&!t?n.$$.offsetLeft:0,offsetTop:n.$$&&!t?n.$$.offsetTop:0,dataset:t?{}:n.dataset}},on=e=>{if(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push({identifier:n.identifier,pageX:n.pageX,pageY:n.pageY,clientX:n.clientX,clientY:n.clientY,force:n.force||0})}return t}},an=(e,t)=>{e.__eventHandlerChangeListener__=t},sn=(e,t,r,n,o,i,a,s)=>{var c=i?"__wxEventCaptureHandleName":"__wxEventHandleName";t[c]||(t[c]=Object.create(null)),void 0===t[c][r]&&t.addListener(r,(function(n){var i=t[c][r],u=n.mutatedMarked();if((!s||!n.mutatedMarked())&&(s&&n.markMutated(),i)){n._hasListeners=!0;var l=t.ownerShadowRoot;if(l){var f=l.getHostNode(),p=Qr.Component.getComponentOptions(f).writeOnly;if(!p||n._allowWriteOnly)if(a)if("function"==typeof i&&Mr()){var d={type:n.type,timeStamp:n.timeStamp,target:nn(n.target,p,this),currentTarget:nn(this,p,null),mark:n.mark,detail:n.detail,touches:on(n.touches),changedTouches:on(n.changedTouches),mut:u};d.instance=Gr(t);var h=i(Rr(d,!0),Rr(Gr(t,!0),!0));if(Lr(),!1===h)return h}else console.warn('Component "'+f.is+'" does not have a wxs function to handle event "'+n.type+'".');else{var _=Er(n._userTap),m={type:n.type,timeStamp:n.timeStamp,target:rn(n.target,nn(n.target,p,this),n.type),currentTarget:rn(this,nn(this,p,null),n.type),mark:n.mark,detail:n.detail,touches:on(n.touches),changedTouches:on(n.changedTouches),mut:u,_requireActive:n._requireActive,_relatedInfo:n._relatedInfo,_userTap:_};if(_)try{var v=Qr.Component.getComponentOptions(f).domain.split("/",1)[0],y=__wxConfig.accountInfo.appId;if(Jr.includes(v)||Jr.includes(y)){var g=Date.now();m._xpath=((e,t)=>{for(var r=[],n=e;n;){var o=Zr(n,t);if(!o)break;if(r.push(o),o.optimized)break;if(!n.__wxElement)break;n=Yr(n)}return r.reverse(),(r.length&&r[0].optimized?"":"/")+r.join("/")})(t.$$),m._xpathCost=Date.now()-g}}catch(n){}Q(b.WX_EVENT,[e.nodeId.getNodeId(f),i,m],e.viewId,!!n._requireActive||void 0)}}return!o&&void 0}}),{capture:i}),a?t[c][r]=n:(t[c][r]=null==n?"":String(n),t.__eventHandlerChangeListener__&&(t.__eventHandlerChangeListener__(r,t[c][r],i),"function"==typeof t.__domElement.setListenerOption&&t.__domElement.setListenerOption(r,!o,i)))},cn=(e,t,r,n)=>{var o=Wa.getByNode(e);e.__component__&&!Be.restoring&&e.__isXrFrame__,e.dataset=e.dataset||{};var i=0,s=!1,c=[],u=e instanceof Qr.Component,l=u&&"//"===en(e).domain,f=Qr.Component.getDataProxy(e),p=function(){var p,h=t[d],_=null;if("slot"===e.is&&e instanceof Qr.VirtualNode&&"name"===d)return Qr.Element.setSlotName(e,h),"continue";if("id"===d)return e.id=null==h?"":h,"continue";if("slot"===d)return e.slot=null==h?"":h,"continue";if("class"===d){if(u)e.class=e.__wxsClass?Ir(" ",null==h?"":h,e.__wxsClass):null==h?"":h,u&&e.hasExternalClass("class")&&e.setExternalClass("class",h);else e.class=h;return"continue"}if("style"===d)if(u&&e.$$){var m=wx.transformRpx(h,!0);e.setNodeStyle(m,S),m!==h?Ee(e,S,(()=>{var t=wx.transformRpx(h,!0);e.setNodeStyle(t,S),e.__transformedPropValue=t})):Te(e,S),e.__banned&&Me(e)}else e.$$&&e.setNodeStyle(h,S);if(u&&Qr.Component.hasPublicProperty(e,d)){!l&&Be.restoring||(f.scheduleReplace([d],h,null!=r?r[d]:null),l?f.doUpdates(void 0,!0):(s=!0,e.isInnerDataExcluded(d)||i++));var v=n&&n["model:"+et(d)];if(v){var y=v.match(/^\{\{(.*?)\}\}$/);if(y){var g=y[1].match(/^\s*([_a-zA-Z$][_a-zA-Z0-9$]+)\s*$/);if(g){var b=g[1];e.__modelValueName=Object.assign(e.__modelValueName||{},{[d]:b}),c.push(d)}else console.warn("For developer:Two-way binding does not support complex data paths currently. This two-way binding is ignored.")}else console.warn(`For developer:"${v}" is not an assignable expression. This two-way binding is ignored.`)}return"continue"}if("style"===d)return"continue";if(d.startsWith("data-")){var w=Qe(d.slice(5).toLowerCase());if(e.dataset[w]=h,e.setAttribute(d,h),e.__componentOptions&&"//"===e.__componentOptions.domain){var x=Qr.Element.getMethodCaller(e),T=x.onPropertyUpdate;"function"==typeof T&&T.call(x,"dataset",w,h)}return"continue"}if("$gdc"===d)return"function"==typeof(p=h)&&(Or=p),"continue";if((_=d.match(/^\$wxs:(capture-)?(mut-)?(bind|catch):?(.+)$/))&&("function"==typeof h||!h))return sn(o,e,_[4],h,"catch"===_[3],_[1],!0,_[2]),G()&&e.setAttribute("exparser:info-attr-"+d.slice(4),h.name),"continue";if(_=d.match(/^(capture-)?(mut-)?(bind|catch):?(.+)$/))return sn(o,e,_[4],h,"catch"===_[3],_[1],!1,_[2]),G()&&e.setAttribute("exparser:info-attr-"+d,h),"continue";if("on"===d.slice(0,2))return sn(o,e,d.slice(2),h,!1,!1,!1),"continue";if("animation"===d){if(u&&e.$$&&null!==h&&"object"==typeof h&&h.actions&&h.actions.length>0){var C=0,A=h.actions,O=h.actions.length;function P(){if(C<O){var{transition:t,transitionProperty:r,transform:n,transformOrigin:o,style:i}=wx.animationToStyle(A[C]),a=e.__styleObj?Object.assign({},e.__styleObj,{transition:t,transform:n,transitionProperty:r,transformOrigin:o}):{transition:t,transform:n,transitionProperty:r,transformOrigin:o};for(var s of(a["-webkit-transition"]=a.transition,a["-webkit-transform"]=a.transform,a["-webkit-transition-property"]=a.transitionProperty,a["-webkit-transform-origin"]=a.transformOrigin,Object.keys(i||{})))a[s]=i[s];e.__styleObj=a,""!==a.transform&&(e.__transformNoneEnabled=!0);var c=Object.keys(a).filter((t=>!(t.toLowerCase().includes("transition")&&""===a[t]||""===t.trim()||void 0===a[t]||!t.toLowerCase().includes("transform")&&""===a[t]||!isNaN(parseInt(t,10)))&&(t.toLowerCase().includes("transform")&&""===a[t]&&e.__transformNoneEnabled&&(a[t]="none"),!0))).map((e=>`${e.replace(/([A-Z]{1})/g,(e=>`-${e.toLowerCase()}`))}:${a[e]}`)).join(";"),u=()=>{e.setNodeStyle(wx.transformRpx(c,!0),E)};u(),Ee(e,E,u),e.__banned&&Me(e)}}e.addListener("transitionend",(()=>{C+=1,P()})),P()}return"continue"}if(_=d.match(/^\$wxs:change:(.+)$/))return e.wxsObserver=e.wxsObserver||{},e.wxsObserver[_[1]]=e.wxsObserver[_[1]]||{},e.wxsObserver[_[1]].observer=h,"continue";if(_=d.match(/^mark:(.+)$/))return e.setMark(_[1],h),"continue";var M=et(d);if(u&&e.hasExternalClass(M))return e.setExternalClass(M,h),"continue";if("webview"!==a()&&e instanceof Qr.NativeNode){var R="skyline"===a()?Qe(d):et(d);if(void 0!==e.__extraAttributeFilters&&"function"==typeof e.__extraAttributeFilters[R])try{e.__extraAttributeFilters[R](e,R,h,(t=>{e.setAttribute(R,t)}))}catch(I){wxNativeConsole.error(`[Skyline] attribute filter error, on node <${e.is}>, attr [${R}], msg: ${I.message}`),e.setAttribute(R,h)}else e.setAttribute(R,h)}};for(var d of Object.keys(t||{}))p();s&&f.doUpdates(i,!0);for(var h=function(){var t=c[_];e.__wxPropertyListener__&&e.__wxPropertyListener__[t]||(e.setPropertyChangeListener(t,(r=>{var n=e.ownerShadowRoot.getHostNode(),i=o.nodeId.getNodeId(n);Q(b.MODEL_VALUE_CHANGE,{data:r,modelValueName:e.__modelValueName&&e.__modelValueName[t],nodeId:i},o.viewId)})),e.__wxPropertyListener__=e.__wxPropertyListener__||{},e.__wxPropertyListener__[t]=!0)},_=0;_<c.length;_++)h();if((e.wxsObserver&&Mr()&&zr(e,t),e.__component__&&!Be.restoring)&&o.operationFlow.iterator.nextStep()[0]!==b.FLOW_APPLY_PROPERTY)throw new Error("Framework inner error (expect FLOW_APPLY_PROPERTY but get another)")},un=Object.create(null),ln=!1,fn={},pn=function(e,t){ln&&(un[e]=t)},dn=function(){return ln},hn={},_n={};ie(b.XR_FRAME_COMP_OPTIONS,(e=>{var t=e[0];Object.keys(t).forEach((e=>{hn[e]=t[e]}));var r=e[1];Object.keys(r).forEach((e=>{_n[e]=r[e]}))}));var mn=o(),vn=mn.dataUtils.deepCopy,yn={tag:"shadow",children:[]},gn=(t,r)=>{var n,o=Date.now(),i=t?t(r,null,e.g):yn;return n=Date.now()-o,Ue+=1,Ge+=n,i.tag="shadow",i},bn=(e,t,r,n)=>{var o,i=hn[o=e]||hn[_n[o]]||{},s=null;return i.isXrComp&&"xr-frame"!==re(n.viewId)&&"xr-frame"!==a()?(wxNativeConsole.info(`[VirtualTreeCreate] <${t.tag}>[${e}] will be created as xr-frame`),(s=r.createComponent("wx-xr-frame",void 0,t.generics,n)).xrFrameTouchEventBubble=i.xrFrameTouchEventBubble,s.__isXrFrame__=!0):s=r.createComponent(t.tag,void 0,t.generics,n),s},wn=(e,t,r,n,o)=>{var i=null;if(n||(n=Wa.getByNode(t)),"shadow"===e.tag&&t)r=i=mn.ShadowRoot.create(t);else if("virtual"===e.tag||"shadow"===e.tag){var a="virtual";1===e.wxXCkey||3===e.wxXCkey?a="wx:if":2!==e.wxXCkey&&4!==e.wxXCkey||(a="wx:for"),i=r.createVirtualNode(a),mn.Element.setInheritSlots(i),i.__wxVkey__=e.wxVkey}else if("wx-slot"===e.tag)i=r.createVirtualNode("slot"),mn.Element.setSlotName(i,"");else{if(r.tagNameUsed(e.tag)){var s=r.getHostNode(),c=r.getCompDefByTagName(e.tag);"string"==typeof c.is&&(c=c.is);var u=s.getPlaceholder(e.tag);n.compManager.shouldUsePlaceholder(c)&&!!u?((i=r.createComponent(e.tag,u,e.generics,n)).__placeholder__=!0,n.compManager.arrangePlaceholderReplace(c,(()=>{var e=i.__vtObj,t=bn(c,e,r,n);xn(e,t,n,o);var a=[...i.childNodes];i.parentNode&&i.parentNode.insertBefore(t,i),a.forEach((e=>{t.appendChild(e)})),i.parentNode&&i.parentNode.removeChild(i)}))):i=bn(c,e,r,n)}else i=r.createComponent(e.tag,void 0,e.generics,n)}xn(e,i,n,o);var l=e.children;if(l)for(var f=0;f<l.length;f++){var p=l[f];if(null!=p)if("object"==typeof p){var d=wn(p,null,r,n,o);i.appendChild(d)}else{var h=r.createTextNode(p);i.appendChild(h)}}return i},xn=(e,t,r,n)=>{if((dn()||!0===t.__placeholder__)&&(t.__vtObj=e),3!==e.wxXCkey&&4!==e.wxXCkey||window.__customComponentMode__&&(t.__wxDynamicSync__=4===e.wxXCkey?"wx:for":"wx:if"),e.extraAttr)for(var o of Object.keys(e.extraAttr))t.setAttribute(o,e.extraAttr[o]);void 0!==e.wxScopeData&&(t.__wxScopeData__=e.wxScopeData);var i=t.__component__,a=t.__placeholder__,s=t.__isXrFrame__;if(i||a||s){if(Be.restoring){var c=Be.idDataMap[r.nodeId.getNodeId(t)];mn.Component.replaceWholeData(t,c,null)}else{var u=r.operationFlow.iterator.nextStep();if(u[0]!==b.FLOW_CREATE_NODE)throw new Error("Framework inner error (expect FLOW_CREATE_NODE but get another)");r.nodeId.allocNodeId(t,u[1])}G()&&!a&&t.setAttribute("exparser:info-custom-component",t.__componentInstanceId),(e=>{if(Ae){var t=Ce.Component.getComponentOptions(e).domain.split("/",1)[0],r=e.shadowRoot;Ae[t]&&Pe(r,Ae[t])}})(t),t.setAttribute("is",t.is)}var l=n?vn(e.attr):e.attr;if(cn(t,l,e.raw,e.rawAttr),t.__isXrFrame__){var f=da(t.$.canvas,{node:!0}),p=r.nodeId.getNodeId(t);Q(b.XR_FRAME_CANVAS_CREATED,[f,p],r.viewId)}},Sn=e=>{if(e.operationFlow.iterator.nextStep()[0]!==b.FLOW_MINIPULATE_CHILD)throw new Error("Expect FLOW_MINIPULATE_CHILD but get another")},En=Object.prototype.hasOwnProperty,Tn=e=>"number"==typeof e&&isNaN(e),Cn=(e,t)=>{for(var r=(e=>{for(var t={},r=0;r<e.length;++r){var n=e[r],o=n&&n.wxKey;o?En.call(t,o)?n.wxKey=void 0:t[o]=r:Tn(o)&&(n.wxKey=void 0)}return t})(e),[n,o]=(e=>{for(var t={},r=[],n=0;n<e.length;++n){var o=e[n],i=o&&o.wxKey;i?En.call(t,i)?(console.warn(`For developer:Do not set same key "${i}" in wx:key.`),o.wxKey=void 0,r.push(n)):t[i]=n:(Tn(i)&&(o.wxKey=void 0),r.push(n))}return[t,r]})(t),i=[],a=[],s=[],c=0,u=0,l=0;l<e.length;++l){var f=e[l].wxKey;if(f)if(En.call(n,f)){var p=n[f];i.push(t[p])}else a.push(l-u),++u,i.push(null);else if(c<o.length){var d=o[c];i.push(t[d]),++c}else a.push(l-u),++u,i.push(null)}for(var h=i,_=0,m=[],v=0;v<t.length;){for(var y=t[v],g=y&&y.wxKey,b=h[_],w=b&&b.wxKey;null===b;)w=(b=h[++_])&&b.wxKey;_>=h.length?(s.push({oldIndex:r[g],index:v,pos:-1}),++_,++v):w===g?(m.push(_),++_,++v):g?(w?n[w]===v+1?s.push({oldIndex:r[g],index:v,pos:_}):(b=h[++_])&&b.wxKey===g?(m.push(_),++_):(--_,s.push({oldIndex:r[g],index:v,pos:_})):s.push({oldIndex:r[g],index:v,pos:_}),++v):++_}for(var x=0,S=0;S<s.length;S++){var E=s[S].pos;if(-1===E)break;for(;x<m.length&&E>m[x];)x++;x>=m.length?s[S].pos=-1:s[S].pos=m[x]}return{children:i,removes:a,inserts:s}},An=(e,t,r)=>{if(e!==t&&(!e||r))if(null==t)r.parentNode.removeChild(r);else if("object"==typeof t)if("object"!=typeof e||null===e||e.tag!==t.tag||String(e.wxKey)!==String(t.wxKey)||"virtual"===e.tag&&e.wxVkey!==t.wxVkey){var n=Wa.getByNode(r),o=r.parentNode,i=wn(t,null,o.ownerShadowRoot,n,!1);o&&("wx:for"===o.__wxDynamicSync__||"wx:if"===r.__wxDynamicSync__?(n.nodeId.addNode(i),o.replaceChild(i,r),Sn(n),n.nodeId.removeNode(r)):o.replaceChild(i,r),r.__banned&&Re(i))}else{if(t.n&&t.n.length){for(var a=t.n,s=t.attr,c={},u=0;u<a.length;u++){var l=a[u];c[l]=s[l]}cn(r,c,t.raw,t.rawAttr)}void 0!==t.wxScopeData&&(r.__wxScopeData__=t.wxScopeData),void 0!==r.__vtObj&&(r.__vtObj=t),On(e,t,r)}else if("string"==typeof e)t!==e&&(r.textContent=t);else{var f=r.ownerShadowRoot.createTextNode(t);r.parentNode.replaceChild(f,r)}},On=(e,t,r)=>{var n=!!l("customComponents"),o=e.children,i=t.children,a="virtual"===e.tag&&(2===e.wxXCkey||4===e.wxXCkey||void 0===e.wxXCkey)||!n&&o.length!==i.length,s=null,c=null;if(a){var u=Cn(o,t.children);i=u.children,s=u.removes,c=u.inserts}for(var f=r.childNodes,p=0;p<o.length;p++){var d=o[p],h=i[p];!h&&a||An(d,h,f[p])}a&&((e,t,r,n)=>{for(var o=Wa.getByNode(r),i=r.childNodes,a=[],s=0;s<t.length;s++){var c=t[s];a.push({node:void 0!==c.oldIndex?i[c.oldIndex]:null,before:c.pos>=0?i[c.pos]:void 0,index:c.index})}for(var u=0;u<e.length;u++){var l=i[e[u]];r.removeChild(l),"wx:for"===i.__wxDynamicSync__&&(Sn(o),o.nodeId.removeNode(l))}for(var f=0;f<a.length;f++){var{before:p,index:d}=a[f],h=a[f].node;null===h&&(h=wn(n[d],null,r.ownerShadowRoot,o,!1)),"wx:for"===r.__wxDynamicSync__?(o.nodeId.addNode(h),r.insertBefore(h,p),Sn(o)):r.insertBefore(h,p)}r.__banned&&Re(r)})(s,c,r,t.children)},Mn=o(),Rn=null,Pn={},In=1,Nn=[],Dn=(e,t)=>{if(Pn[e]||null!==Rn){var r=Pn[e]||Rn,n=Nn[Nn.length-1],o=Nn[Nn.length-2],{isMergedUpdate:i,dataPaths:a,pendingStartTimestamp:s,updateStartTimestamp:c,updateEndTimestamp:u,pageId:l}=t(r);Q(b.UPDATE_PERFORMANCE_STAT,[e,{isMergedUpdate:i,dataPaths:a,updateProcessId:n,parentUpdateProcessId:o,pendingStartTimestamp:s,updateStartTimestamp:c,updateEndTimestamp:u}],l)}},Ln=null;ne(b.ENABLE_UPDATE_PERFORMANCE_STAT,(e=>{var[t,r]=e;Pn[t]=r})),ne(b.DISABLE_UPDATE_PERFORMANCE_STAT,(e=>{var[t]=e;delete Pn[t]})),ne(b.ENABLE_GLOBAL_UPDATE_PERFORMANCE_STAT,(e=>{var[t]=e;Rn=t}));var Fn=o(),kn=Fn.dataUtils.deepCopy,Bn=e=>{if("object"!=typeof e||!e)return void 0!==window&&(window.__usingDelayedGwx__=1|(window.__usingDelayedGwx__||0)),e;void 0!==window&&(window.__usingDelayedGwx__=2|(window.__usingDelayedGwx__||0));var t=e.slice();return t.shift()(...t)},jn=function(e,t,r){for(var n=e.childNodes,o=0;o<n.length;o++){var i=n[o];i instanceof Fn.TextNode||(i.__id&&(t[i.__id]=i),void 0!==i.__slotName&&(r[i.__slotName]=i),jn(i,t,r))}};class Un{createInstance(e,t){var r=new Gn,n=t;if(n=Wa.getByNode(e),r._template=this,r._generateFunc=this._generateFunc,r.data=kn(this._data),r.idMap=Object.create(null),r.slots=Object.create(null),Be.restoring){if(Be.compIdArrIndex>=Be.compIdArr.length)throw new Error("Component count unmatched while page recovering");n.nodeId.allocNodeId(e,Be.compIdArr[Be.compIdArrIndex++]);var o=Be.idDataMap[n.nodeId.getNodeId(e)];r._virtualTree=gn(this._generateFunc,o)}else r._virtualTree=this._virtualTree;return r.shadowRoot=wn(r._virtualTree,e,null,t,!0),jn(r.shadowRoot,r.idMap,r.slots),r.listeners=[],this._isSimpleComponent||(e.__component__=!0),r._delayedUpdateValues=null,r}updateGenerateFunc(e){this._generateFunc=Bn(e),this._virtualTree=gn(this._generateFunc,this._initValues),Wa.list().forEach((t=>{[t.root,t.tabRoot].forEach((t=>{t&&d(t,1,(t=>{t instanceof Fn.Component&&t.__templateInstance._template===this&&(t.__templateInstance._generateFunc=e)}))}))}))}}Un.create=function(e,t,r,n){var o=new Un;o._initValues=r,o._data=t;var i=e.template;return o._generateFunc=Bn(i.func),o._virtualTree=gn(o._generateFunc,o._initValues),o._isSimpleComponent="simple://"===n.domain.slice(0,9),pn(i.path,(e=>{i.func=e,o.updateGenerateFunc(e)})),o};class Gn{beforeMergeValues(e,t,r){}beforeUpdateValues(e,t,r){if(!("number"!=typeof r)){var n=Wa.getByNode(e),o=n.operationFlow.iterator.nextStepIf(b.FLOW_DATA_OBSERVER);if(o){var i=o[1];if(e&&i.length){Dn(n.nodeId.getNodeId(e),(e=>({isMergedUpdate:!0,dataPaths:e.withDataPaths?i.map((e=>e[0])):void 0,pageId:n.viewId})));var a=Fn.Component.getDataProxy(e);a.setChanges(i),a.doUpdates(void 0,!0)}}}}updateValues(e,t,r,n,o,i){if(!Be.restoring){if(this._delayedUpdateValues)this._delayedUpdateValues.push([kn(t),r,n,o,i]);else{this._delayedUpdateValues=[];try{this._updateValues(e,t,r,n,o,i);var a=this._delayedUpdateValues;this._delayedUpdateValues=null;for(var s=0;s<a.length;s++){var c=a[s];this._updateValues(e,c[0],c[1],c[2],c[3],c[4])}}catch(e){throw this._delayedUpdateValues=null,e}}0}}_updateValues(e,t,r,n,o,i){var a="number"!=typeof i,s=!l("propValueDeepCopy"),c=ke(t,o,!0,!1,s),u=gn(this._generateFunc,c);ke(t,o,!1,a,!1);var f=this._virtualTree;this._virtualTree=u,An(f,u,this.shadowRoot)}_resetShadowChildren(e,t,r){var n=()=>{if(r.operationFlow.iterator.nextStep()[0]!==b.FLOW_HOT_UPDATE_CHILD)throw new Error("Expect FLOW_HOT_UPDATE_CHILD but get another")};for(var o=this.shadowRoot,i=(this._virtualTree.children||[]).length,a=0;a<i;a++)o.removeChild(o.childNodes[0]);n();var s=gn(this._generateFunc,t);n(),this._virtualTree=s;for(var c=wn(s,null,e.shadowRoot,r,!0).childNodes,u=c.length,l=0;l<u;l++)o.insertBefore(c[0],o.childNodes[l])}}var Vn=o(),Wn=null,zn=()=>{Wn={};var e=null;__wxConfig&&__wxConfig.plugins?e=__wxConfig.plugins:void 0!==window&&window&&window.__wxConfigAppService__&&window.__wxConfigAppService__.plugins&&(e=window.__wxConfigAppService__.plugins);var t=!1;if(e)for(var r of Object.keys(e)){var n=e[r].provider,o=e[r].subpackage;if(void 0!==o){t=!0;var i=o||"";"__APP__"===i&&(i=""),"/"===i[0]&&(i=i.slice(1)),i&&"/"!==i.slice(-1)&&(i+="/"),Wn[n]=i}}if(!t){var a;if(__wxConfig&&__wxConfig.subPackages)a=__wxConfig.subPackages;else{if(void 0===window||!window||!window.__subPackages)return;a=window.__subPackages}a.length&&a.forEach((e=>{if(e){var t=e.root||"";if(t&&"/"!==t.slice(-1)&&(t+="/"),e.plugins)for(var r of Object.keys(e.plugins)){var n=e.plugins[r]&&e.plugins[r].provider;n&&(Wn[n]=t)}}}))}},Hn=e=>{var t=e.match(/(?:^|\/)__(wx|plugin)__\/(.*)$/);return t?"wx"===t[1]?"wx://"+t[2]:"plugin-private://"+t[2]:e},Xn=e=>(Wn||zn(),(Vn.Component._list[e]&&Vn.Component._list[e].is||e).replace(/^plugin-private:\/\/([0-9a-zA-Z]+)\//,((e,t)=>(Wn[t]||"")+"__plugin__/"+t+"/")).replace(/^wx:\/\//,"__wx__/")),Kn=e=>(Wn||zn(),(Wn[e]||"")+"__plugin__/"+e+"/"),$n=e=>{Wn||zn();var t,r,n,o,i,a=e.match(/^plugin:\/\/(.+?)\//);if(a)return $n(Wn[a[1]]||"");if(a=e.match(/^plugin-private:\/\/([0-9a-zA-Z]+)\//))return $n(Wn[a[1]]||"");t=null!==(r=null!==(n=null===(o=__wxConfig)||void 0===o?void 0:o.subPackages)&&void 0!==n?n:null===(i=window)||void 0===i?void 0:i.__subPackages)&&void 0!==r?r:[];for(var s=0;s<t.length;++s){var c=t[s].root||"";if(c&&"/"!==c.slice(-1)&&(c+="/"),e.slice(0,c.length)===c)return t[s]}return null},qn=e=>{var t=$n(e);if(!t)return"__APP__";var r=t.root||"";return"/"===r.slice(-1)?r:r+"/"},Yn=e=>{var t=$n(e);return!!t&&t.independent},Zn={main:"app-wxss.js",sub:"page-frame.js",lazyCommon:"common.app.js",lazyApp:"webview.app.js",plugin:"pageframe.js"},Jn=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"],Qn=e=>("__APP__"===e||("/"!==e[0]&&(e="/"+e),"/"!==e[e.length-1]&&(e+="/")),e),eo={},to=(e,t)=>{e=Qn(e),"string"!=typeof t.subpackage&&(t.subpackage=e),void 0===eo[e]?eo[e]=[t]:eo[e].push(t)},ro=_(["ready"]),no=(e,t)=>{ro.on("ready",(()=>{t(eo[e]||[])}))};__wxConfig.onReady((()=>{var e=new Set,t={};Object.keys(__wxConfig.plugins||{}).forEach((r=>{var n=__wxConfig.plugins[r];"string"==typeof n.subpackage?to(n.subpackage,n):(e.add(n.provider),t[n.provider]=n)})),(__wxConfig.subpackages||[]).forEach((r=>{Object.keys(r.plugins||{}).forEach((n=>{var o=r.plugins[n],i=o.provider;e.has(i)&&(e.delete(i),delete t[i],to(r.root,o))}))})),Array.from(e).forEach((e=>{to("__APP__",t[e])})),ro.notify("ready")}));var oo=(e,t)=>{t(`isLazyLoad: ${Jo()}`),t(`moduleName: ${e}`);var r="devtools"===__wxConfig.platform?[]:(eo[Qn(e)]||[]).map((e=>{var t=e.provider,r=`__plugin__/${t}`;return{plugin_id:t,prefix_path:Jn.includes(t)?null:r}}));t(`separatedPlugins: ${JSON.stringify(r)}`);var n="__APP__"===e,o=n?"":e;if(Jo()){var i=[];return r.forEach((e=>{var t=(o+e.prefix_path+"/").replace(/\/\/$/,"/");e.prefix_path||(t+=`__extended__/${e.plugin_id}/`),i.push(t+Zn.plugin)})),i.push(o+Zn.lazyCommon,o+Zn.lazyApp),t(`all files to inject: ${JSON.stringify(i)}`),i}var a=r.map((e=>{var t=(o+e.prefix_path+"/").replace(/\/\/$/,"/");return e.prefix_path||(t+=`__extended__/${e.plugin_id}/`),t+Zn.plugin}));return n?a.push(o+Zn.main):a.push(o+Zn.sub),t(`all files to inject: ${JSON.stringify(a)}`),a},io=(o(),Object.prototype.hasOwnProperty),ao=()=>"devtools"===__wxConfig.platform||"devtool"===__wxConfig.serviceRuntime,so=()=>"undefined"!=typeof __LAZY_CODE_LOADING_CHUNK_MAP__;class co{constructor(e,t){this.__viewId=e,this.__treeManager=t,this.__loadedSubPackage=new Set,this.__injectedSubPackage=new Set,this.__logPrefix=`[CompMgr] [${a()}] $[${this.__viewId}]`,this.__log=e=>{wxNativeConsole.info(`${this.__logPrefix} ${e}`)},this.__ensureComponentNotifier={},this.__placeholderReplacement=null,this.__pendingReplacement=new Map,this.__injectedComponents=new Set([]),this.__restoreInjectNotifier=null}getRestoredData(){return[Array.from(this.__loadedSubPackage),Array.from(this.__injectedSubPackage),Object.fromEntries(co.__classPrefixMap),Array.from(this.__injectedComponents),this.__treeManager.rootCompName]}getRestoreInjectNotifier(){return this.__restoreInjectNotifier||(this.__restoreInjectNotifier=_(["inject"])),this.__restoreInjectNotifier}restore(e){var[t,r,n,o,i]=e,a=()=>{ri(i),ti(i),this.getRestoreInjectNotifier().notify("inject")};this.setSubPackageLoaded(t),this.batchInjectSubPackages(r,(()=>{Jo()?this.batchInjectComponents(o,a):a()})),co.__usedClassPrefix=new Set(Object.values(n)),co.__classPrefixMap=new Map(Object.entries(n))}onRestoreInjectDone(e){this.getRestoreInjectNotifier().on("inject",e)}recurseUsingComponents(e){if(!Jo())return e;var t=__wxAppCode__,r="undefined"!=typeof __WXML_DEP__&&__WXML_DEP__||{},n=new Set,o=new Set,i=e=>{if(!n.has(e)){if(n.add(e),io.call(t,e+".json")){o.add(e);var a=$o(e,t),s=qo(e,t),c=Yo(e,t);for(var u of Object.keys(a))io.call(c,u)?io.call(a,c[u])&&i(a[c[u]]):i(a[u]);for(var l of Object.keys(s)){var f=s[l];"string"==typeof f.default&&i(f.default)}}(r["./"+e+".wxml"]||[]).forEach((e=>{var t=e.substr(2,e.length-7);i(t)}))}};e.forEach((e=>{i(e);var t=oi(Hn(e));p(t).forEach((e=>{o.add(e)}))}));var a=Array.from(o);return this.__log(`recurseUsingComponents(${JSON.stringify(e)}) => [${a.length} components]`),a}batchLoadSubPackages(e,t){this.__log("loadSubPackages begin: "+e.join(", "));var r=!0;setTimeout((()=>{r&&be({type:"subpackage",errMsg:"loadSubpackage: timeout",subpackage:e})}),ye);var n=0;Promise.all(e.map((e=>new Promise((t=>{he(e,t)}))))).then((o=>{r=!1;var i=[];o.forEach((e=>{var{res:t,pkg:r,cost:o}=e;"fail"===t?be({type:"subpackage",subpackage:[r],errMsg:"loadSubpackage: fail"}):i.push(r),n+=o})),this.__log(`loadSubPackages end: ${e.join(", ")}, cost: ${n}`),this.setSubPackageLoaded(i),this.__treeManager.operationFlow.sendInIndividualFlow([b.FLOW_SET_SUBPACKAGE_LOADED,i]),t(i)}))}setSubPackageLoaded(e){this.__log("setSubPackageLoaded: "+e.join(", ")),e.forEach((e=>{this.__loadedSubPackage.add(e)}))}batchInjectSubPackages(e,t){this.__log("injectSubPackages: "+e.join(", "));var r=e.filter((e=>!this.__injectedSubPackage.has(e))).map((e=>"__APP__"===e||"/"===e.slice(-1)?e:e+"/"));if(ao()){if("webview"===a())_e(r,(()=>{this.setSubPackageInjected(r),t()}));else if("skyline"===a()){var n=Array.prototype.concat(...r.map((e=>oo(e,(t=>{this.__log(`getEntryFile ${e}: ${t}`)})))));ce(n),this.setSubPackageInjected(r),Ii(this.__viewId,e),t()}}else{var o=[];if(r.forEach((e=>{o.push(...oo(e,(t=>{this.__log(`getEntryFile ${e}: ${t}`)})))})),"webview"===a())de(o,(()=>{this.setSubPackageInjected(r),t()}));else if("skyline"===a()||"xr-frame"===a())ce(o),this.setSubPackageInjected(r),Ii(this.__viewId,e),t();else{if("scl"!==a())throw new Error("unknown render backend: "+a());pe(o),Ii(this.__viewId,e),this.setSubPackageInjected(r),t()}}}batchInjectComponents(e,t,r=!1){if(!Jo())return t(0),-1;var n=e.map((e=>Xn(e))).filter((e=>!this.__injectedComponents.has(e))).filter((e=>!e.includes("://")));this.__log(`injectComponents: [${n.length} components]`);var o=[];if(so()){var i=new Set(n.map((e=>__LAZY_CODE_LOADING_CHUNK_MAP__[e]||e)));o=Array.from(i).map((e=>`${e}.webview.js`))}else o=n.map((e=>`${e}.webview.js`));if("webview"===a()){return(e=>{ao()?ve(n,e):new Promise((e=>{__wxAppCode__?e():de(["common.app.js"],e)})).then((()=>{de(o,e)}))})((e=>{n.forEach((e=>{this.__injectedComponents.add(e)})),t(e)})),-1}if("skyline"===a()||"xr-frame"===a()){var s=ce(o);return n.forEach((e=>{this.__injectedComponents.add(e)})),t(s),s}if("scl"===a()){var c=pe(o);return n.forEach((e=>{this.__injectedComponents.add(e)})),t(c),c}throw new Error("unknown render backend: "+a())}setSubPackageInjected(e){this.__log("setSubPackageInjected: "+e.join(", ")),e.forEach((e=>{this.__injectedSubPackage.add(e)}))}setInitialSubPackage(e){var t=[qn(e)];Yn(e)||t.includes("__APP__")||t.push("__APP__"),this.setSubPackageLoaded(t),this.setSubPackageInjected(t)}shouldUsePlaceholder(e){var t=Xn(e),r=qn(t),n=this.__loadedSubPackage.has(r);return Jo()&&(n=n&&this.__injectedComponents.has(t)),!n}doLazyLoadReport(e,t){var r=qe(),n=__wxConfig.isFirstPage;!1;var o=Object.keys(__wxAppCode__).filter((e=>e.endsWith(".json"))).length;r.set("isFirstPage",n),r.set("totalComps",o),r.set("loadedComps",e),r.set("loadTime",t)}injectComponentsRecursively(e,t,r=!1,n=!1){if(Jo()){var o=this.recurseUsingComponents(e);this.batchInjectComponents(o,(e=>{r&&this.doLazyLoadReport(o.length,e),t()}),n);0}else t()}ensureComponents(e,t,r){var n,o=e.map((e=>qn(e)));n=o,(o=Array.from(new Set(n))).some((e=>!Yn(e)))&&!o.includes("__APP__")&&o.unshift("__APP__"),o=o.filter((e=>!this.__loadedSubPackage.has(e))),this.batchLoadSubPackages(o,(n=>{this.__treeManager.operationFlow.sendInIndividualFlow([b.FLOW_INJECT_SUBPACKAGE,t,n]),Jo()&&this.__treeManager.operationFlow.sendInIndividualFlow([b.FLOW_INJECT_COMPONENT,t,e]),this.batchInjectSubPackages(n),this.injectComponentsRecursively(e),r()}))}pendPlaceholderReplacement(e){var t=this.getPlaceholderReplaceData();this.finishPlaceholderReplacement(),this.__pendingReplacement.set(e,t),this.__log(`set [${e}] as pending placeholder replacements (${t.replacers.length} replacers)`)}getAndClearPendingPlaceholderReplacement(e){var t=this.__pendingReplacement.get(e);return this.__pendingReplacement.delete(e),t}getEnsureComponentsNotifier(e){if(!this.__ensureComponentNotifier[e]){var t=["inject","def"];Jo()&&t.push("inject-common"),this.__ensureComponentNotifier[e]=_(t)}return this.__ensureComponentNotifier[e]}destructEnsureComponentsNotifier(e){this.__ensureComponentNotifier[e]&&delete this.__ensureComponentNotifier[e]}injectSubPackageOnReady(e,t){this.batchInjectSubPackages(t,(()=>{var t=Jo()?"inject-common":"inject";this.getEnsureComponentsNotifier(e).notify(t)}))}injectComponentsOnReady(e,t){Jo()&&this.getEnsureComponentsNotifier(e).on("inject-common",(()=>{this.injectComponentsRecursively(t,(()=>{this.getEnsureComponentsNotifier(e).notify("inject")}))}))}appendComponentDef(e,t){this.getEnsureComponentsNotifier(e).on("inject",(()=>{Ni(t,!1,this.__viewId),this.getEnsureComponentsNotifier(e).notify("def")}))}waitComponentEnsuring(e,t){this.getEnsureComponentsNotifier(e).on("def",(()=>{t((()=>{this.destructEnsureComponentsNotifier(e)}))}))}doPlaceholderReplace(){var e=f(),t=this.__treeManager,r=this.getPlaceholderReplaceData();this.finishPlaceholderReplacement();var n=Array.from(r.compNames);this.__treeManager.operationFlow.sendInIndividualFlow([b.FLOW_PEND_PLACEHOLDER_REPLACEMENT,e]),this.__log(`doPlaceholderReplace(${e}) for ${r.replacers.length} placeholder replacements`),this.ensureComponents(n,e,(()=>{ni(t,t.rootCompName,r,e)}))}arrangePlaceholderReplace(e,t){null===this.__placeholderReplacement&&(this.__placeholderReplacement={compNames:new Set,replacers:[]}),this.__placeholderReplacement.compNames.add(e),this.__placeholderReplacement.replacers.push(t)}getPlaceholderReplaceData(){return this.__placeholderReplacement}finishPlaceholderReplacement(){this.__placeholderReplacement=null}static getComponentClassPrefix(e){if(co.__classPrefixMap.has(e))return co.__classPrefixMap.get(e);var t=e.split(/[^a-z0-9]+/i),r="",n=0,o=0;do{n<t.length?n+=1:o+=1,r=t.slice(-n).join("-"),o>0&&(r+="-"+o),Number(r[0])>=0&&(r="x-"+r)}while(co.__usedClassPrefix.has(r));return co.__classPrefixMap.set(e,r),co.__usedClassPrefix.add(r),r}}co.__classPrefixMap=new Map,co.__usedClassPrefix=new Set;var uo={[b.FLOW_PEND_PLACEHOLDER_REPLACEMENT](e,t){var r=t[0];e.pendPlaceholderReplacement(r)},[b.FLOW_COMPONENT_DEF_ADD](e,t){var r=t[0],n=t[1];e.appendComponentDef(r,n)},[b.FLOW_INJECT_SUBPACKAGE](e,t){var r=t[0],n=t[1];e.injectSubPackageOnReady(r,n)},[b.FLOW_INJECT_COMPONENT](e,t){var r=t[0],n=t[1];e.injectComponentsOnReady(r,n)},[b.FLOW_SET_SUBPACKAGE_LOADED](e,t){var r=t[0];e.setSubPackageLoaded(r)},[b.FLOW_WAIT_COMPONENT](e,t){var r=t[0];e.__treeManager.operationFlow.block(),e.waitComponentEnsuring(r,(t=>{e.__treeManager.operationFlow.unblock(),t()}))}},lo=o(),fo=(e,t,r)=>{if(e instanceof lo.Component){e!==window.__DOMTree__&&(t.compCount++,e.hasBehavior("wx-base")?(r&&t.rootInternalCompCount++,e.hasBehavior("wx-native")&&t.nativeCompCount++):r&&t.rootCustomCompCount++);var n=e===window.__DOMTree__&&r;e.shadowRoot instanceof lo.Element&&fo(e.shadowRoot,t,n)}for(var o=e.childNodes,i=0,a=o.length;i<a;i++){var s=(o[i]instanceof lo.VirtualNode||e===window.__DOMTree__||e===window.__DOMTree__.shadowRoot)&&r;o[i]instanceof lo.Element&&fo(o[i],t,s)}},po=()=>{var e={compCount:0,customCompCount:0,nativeCompCount:0,rootCustomCompCount:0,rootInternalCompCount:0};try{fo(window.__DOMTree__,e,!0)}catch(e){}var{compCount:t,customCompCount:r,nativeCompCount:n,rootCustomCompCount:o,rootInternalCompCount:i}=e,a=o+i;return{compCount:t,customCompCount:r,nativeCompCount:n,rootCompCount:a,rootCustomCompCount:o,rootCustomCompRatio:a?Math.floor(100*o/a):0,rootInternalCompCount:i}},ho={id:null,prev:null,data:[]};ne(b.SAVE_STATE,(()=>{"function"==typeof wx.webViewReadyToTerminate&&wx.webViewReadyToTerminate({})})),ne(b.RESTORE_STATE,(([e,t,r,n],o,i)=>{if(e&&e.isSplitData){var{id:a,index:s,total:c,data:u}=e.splitInfo;if(1!==s&&(s!==ho.prev+1||a!==ho.id))return ho.id=null,ho.prev=null,void(ho.data=[]);if(s!==c)return ho.id=a,ho.prev=s,void ho.data.push(u);ho.data.push(u);var l=ho.data.join("");try{l=JSON.parse(l)}catch(e){console.error("Expected parse completed data with split data but got error"),Reporter.errorReport({key:"webviewScriptError",error:new Error("Expected parse completed data with split data but got error")}),l=null}if(ho.id=null,ho.prev=null,ho.data=[],!l)return;e=l[0],t=l[1],r=l[2],n=l[3]}Be.restoring=e||{},Be.idDataMap=t,Be.compIdArr=r,Be.compIdArrIndex=0;var f=Wa.get(i).compManager;f.restore(n),Be.onReady=f.onRestoreInjectDone.bind(f)}));var _o=e=>{(e=>{var t=document.body.scrollTop||document.documentElement.scrollTop;e.__page__={scrollTop:t}})(e),e.compExtraDataMap={};var t=0;window.__TAB_BAR__&&(d(window.__TAB_BAR__,1,(r=>{r.triggerLifeTime("saved",[e]),Xr(e.compExtraDataMap,r,t++)})),(e=>{if(e){var t=window.__TAB_BAR__;t&&(e.wxsTabRootState=Pr(t.__wxsState))}})(e.compExtraDataMap)),d(window.__DOMTree__,1,(r=>{r.triggerLifeTime("saved",[e]),Xr(e.compExtraDataMap,r,t++)})),(e=>{if(e){var t=Ar?Wa.get(0).nodeId.getNodeById(Wa.get(0).rootNodeId):window.__DOMTree__;t&&(e.wxsPageState=t.__wxsState)}})(e.compExtraDataMap)},mo=e=>{(e=>{var t=e.__page__;if(t){var r=parseInt(t.scrollTop,10);requestAnimationFrame((()=>{document.body.scrollTop=document.documentElement.scrollTop=r}))}})(e);var t=0;window.__TAB_BAR__&&(d(window.__TAB_BAR__,1,(r=>{r.triggerLifeTime("restored",[e]),Kr(e.compExtraDataMap,r,t++)})),(e=>{if(e){var t=window.__TAB_BAR__;t&&(t.__wxsState=Rr(e.wxsTabRootState))}})(e.compExtraDataMap)),d(window.__DOMTree__,1,(r=>{r.triggerLifeTime("restored",[e]),Kr(e.compExtraDataMap,r,t++)})),(e=>{if(e){var t=Ar?Wa.get(0).nodeId.getNodeById(Wa.get(0).rootNodeId):window.__DOMTree__;t&&(t.__wxsState=e.wxsPageState)}})(e.compExtraDataMap)},vo=()=>{__webViewSDK__.publish("recycleStatistics",po());var e={};_o(e),Q(b.REQUEST_SAVE,e,0,!0)},yo=(Date.now(),o()),go={},bo={},wo=function(e,t){return e+"/"+t},xo=function(e,t,r,n=!0){var o=t.match(/^plugin-private:\/\/(.*?)\//);if(!o)return!1;var i=o[1];if(n&&wo(i,"0")!==e)return!1;var a=r.match(/^plugin:\/\/(.*?)\//);if(!a)return!1;var s=a[1];return(!n||wo(s,"0")===e)&&(yo.Component._list[r]?(console.error('"'+r+'" has been used as another component or page. Please do not register multiple components or pages with the same alias.'),!1):(((e,t)=>{_n[e]=t})(r,t),yo.Component._list[r]=yo.Component._list[t],go[r]=t,bo[t]=r,!0))};window.publishDomainComponents=e=>(e=>{for(var t in e)xo("",e[t],t,!1)})(e);var So=o(),Eo=0;function To(e){e&&".html"!==e.slice(5)&&(e+=".html");var t="";return __wxConfigWindow__&&__wxConfigWindow__.initialRenderingCache&&(t=String(__wxConfigWindow__.initialRenderingCache)),t}function Co(e,t){var r=Date.now(),n={},o={},i=document.head.querySelectorAll("style")||[],a=[];So.ElementIterator.create(e,"composed-descendants-root-first",So.Component).forEach((e=>{e.hasBehavior("wx-base")||(n["./"+e.is+".wxss"]=!0)})),Object.keys(So.Component._list).forEach((e=>{o["./"+e+".wxss"]=!0}));for(var s=0;s<i.length;s++){var c=i[s],u=c.getAttribute("wxss:path");null!=u&&(!o[u]||n[u]?a.push("<style>"+c.innerHTML+"</style>"):c.innerHTML.length+15)}var l=a.join(""),f=l+e.$$.innerHTML;wx.saveInitialRenderingCache({content:f,appserviceData:t});Date.now();l.length}function Ao(){wx.saveInitialRenderingCache({content:""})}function Oo(e,t){return"dynamic"!==To(window.__route__)?(console.error('An initial rendering cache state is ignored, because initialRenderingCache mode is not "dynamic".'),!1):(e?Co(e,t):Ao(),!0)}function Mo({content:e}){return!!e&&(document.body.innerHTML=e,Eo=Date.now(),!0)}var Ro=o(),Po=o(),Io=o(),No={},Do=(e,t)=>{void 0===No[e]&&(No[e]=_(["ready"])),No[e].on("ready",t)},Lo=e=>{void 0===e&&"webview"===a()&&(e=0),void 0===No[e]&&(No[e]=_(["ready"]));var t=No[e].isNotified("ready");wxNativeConsole.info(`[mainPageFrameReady] dispatch __mainPageFrameReady__, current=${t}, pageId=${e}`),t||No[e].notify("ready")};void 0!==__wxAppCode__&&Object.keys(__wxAppCode__).length>0?Lo():window.__mainPageFrameReady__=Lo;var Fo=(e,t)=>{if(wx.traceBeginEvent("Framework","dispatchViewRoute"),"webview"!==a()&&!__wxConfig.isLazyLoad){var r=e.replace(/\.html$/,"").replace(/^\//,"");wx.traceBeginEvent("Framework","injectWxss"),ri(r),wx.traceEndEvent(),wx.traceBeginEvent("Framework","triggerGenerateFuncReady"),ti(r,t),wx.traceEndEvent()}wx.traceEndEvent()},ko=(Io.dataUtils.deepCopy,{lazyRegistration:!0,publicProperties:!0}),Bo={domain:"/",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",renderingMode:"full",templateEngine:Un,multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!0,idPrefixGenerator:null,separateInnerData:!1,innerDataExclude:null,randomizeTagName:!1,virtualHost:!1},jo="undefined"!=typeof WeakMap?new WeakMap:{},Uo={},Go={},Vo={},Wo={},zo={},Ho={},Xo=Object.prototype.hasOwnProperty,Ko="wx-",$o=(e,t)=>{var r={},n=(t[e+".json"]||{}).usingComponents||{};for(var o of Object.keys(n))r[Ko+o]=u(e,String(n[o]));return r},qo=(e,t)=>{var r={},n=(t[e+".json"]||{}).componentGenerics||{};for(var o of Object.keys(n)){var i=n[o];"object"==typeof i?r[Ko+o]={default:u(e,String(i.default||""))}:null!=i&&(r[Ko+o]={})}return r},Yo=(e,t)=>{var r=t[e+".json"]||{},n={},o=r.componentPlaceholder||{};return Object.keys(o).forEach((e=>{n[Ko+e]=Ko+String(o[e])})),n},Zo=(e,t,r,n)=>{var o=Wa.get(r).nodeId.getNodeById(n,r);o&&t&&Io.Element.getMethodCaller(o).setData({[t]:e})},Jo=()=>__wxConfig.isLazyLoad,Qo=e=>{var t="__plugin__/",r=e.indexOf(t);return-1===r?e:"plugin-private://"+e.slice(r+t.length)},ei=e=>{if(-1===e.indexOf("plugin://"))return e;var t=e.match(/\w+\//);if(!t)return e;t=t[0].slice(0,t[0].length-1);var r,n,o=(r=t,(n=__wxConfig.plugins||{})[r]?n[r].provider:null);if(!o)return e;var i=e.replace(t,o);return go[i]?go[i]:i},ti=(e,t)=>{var r=Qo(e);wxNativeConsole.info(`[triggerGenerateFuncReady] dispatch generateFuncReady from vd, comp=${r}`);var n=(void 0!==__wxAppCode__?__wxAppCode__:{})[r+".wxml"];Array.isArray(n)&&(n=n[0][n[1]]),window.__wxAppCodeReadyCallback__?window.__wxAppCodeReadyCallback__(n):window.document.dispatchEvent(new CustomEvent("generateFuncReady",{detail:{generateFunc:n,pageId:t}}))},ri=e=>{var t=a();if("webview"===t){var r=Qo(e);wxNativeConsole.info(`[injectWxss] inject page wxss from vd, comp=${r}`);var n=(void 0!==__wxAppCode__?__wxAppCode__:{})[r+".wxss"];void 0!==n&&"function"==typeof n||(wxNativeConsole.warn("codeMap does not contain valid wxss "+(r+".wxss")),n=()=>{}),window.__setCssStartTime__=Date.now(),n(),window.__setCssEndTime__=Date.now()}else wxNativeConsole.info(`[injectWxss] current renderer is ${t}, handle root wxss by priority`)},ni=(e,t,r,n)=>{var o;o=e.viewId,Object.keys(hn).length>0&&Q(b.XR_FRAME_COMP_OPTIONS,[hn,_n],o);var i=[[],[],t,go];ai(i,t,Object.create(null),"",e);var a=new Set(e.usedDef[0].map((e=>e.is))),s=new Set(e.usedDef[0].map((e=>e.is))),c=[],u=[];i[0].forEach((e=>{a.has(e.is)||(c.push(e),a.add(e.is))})),i[1].forEach((e=>{s.has(e.is)||(u.push(e),s.add(e.is))})),i[0]=c,i[1]=u,e.usedDef[0].push(...i[0]),e.usedDef[1].push(...i[1]),e.operationFlow.sendInIndividualFlow([b.FLOW_COMPONENT_DEF_ADD,n,i]),e.operationFlow.sendInIndividualFlow([b.FLOW_WAIT_COMPONENT,n]),e.operationFlow.start(Date.now()),e.operationFlow.push([b.FLOW_REPLACE_PLACEHOLDER,n]),r.replacers.forEach((e=>{e()})),e.operationFlow.end()},oi=e=>{var t=bo[e];if(!t)return{};var r=t.match(/^plugin:\/\/(wx[0-9a-f]{16})\/(.+)$/);if(!r)return{};var n=r[1],o=r[2],i=p(__wxConfig.plugins).find((e=>e.provider===n));if(!i)return{};if(!i.genericsImplementation)return{};var a=i.genericsImplementation[o]||{},s={},c=Wn[n]||"";return Object.keys(a).forEach((e=>{s[Ko+e]=u(c,String(a[e]))})),s},ii=(e,t,r)=>{if("wx://"!==t.slice(0,5)){var n=Go[t];if(!n)throw new Error('"'+t+'" is not a behavior registered by Behavior()');e[0].unshift(n),r[t]=!0;var o=zo[n.is];if(o)for(var i=0;i<o.length;i++){var a=o[i];r[a]||ii(e,a,r)}}},ai=(e,t,r,n,o,i=!1)=>{Xo.call(go,t)&&(t=go[t]);var a=Uo[t];if(!o.compManager.shouldUsePlaceholder(t)||!i)if(a){var s=Ho[t];"wx://"!==t.slice(0,5)&&e[1].unshift(a),r[t]=!0;var c=Vo[a.is],u=Wo[a.is];for(var l of Object.keys(c||{})){var f=c[l];r[f]||ai(e,f,r,t,o,!!s[l])}for(var p of Object.keys(u||{})){var d=u[p].default;d&&(r[d]||ai(e,d,r,t,o,!!s[p]))}var h=zo[a.is];if(h)for(var _=0;_<h.length;_++){var m=h[_];r[m]||ii(e,m,r)}}else console.error(`Component is not found in path "${t}"${n?` (using by "${n}")`:""}`)},si=e=>Io.Component.getComponentOptions(e).domain.split("/",1)[0],ci=e=>jo.get(e),ui=(e,t,r)=>{var n=Io.Component.getComponentOptions(t).domain,o=Io.Component.getMethod(t,"__export__"),i=n===e?Io.Element.getMethodCaller(t):null;if(o){var a=n===e?r:null,s=o.call(Io.Element.getMethodCaller(t),a);return void 0===s?i:s}return i},li=(e,t,r)=>{var n=ci(e),o=Io.Component.getComponentOptions(n).domain,i=n.shadowRoot;if(r)return i.querySelectorAll(t).map((t=>ui(o,t,e)));var a=i.querySelector(t);return a?ui(o,a,e):null},fi=(e,t,r)=>{e!==di&&Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})};function pi(){}var di=pi.prototype=Object.create(Object.prototype,{is:{get(){return ci(this).is},set(e){fi(this,"is",e)}},id:{get(){var e=ci(this);return Io.Component.getComponentOptions(e).writeOnly?"":e.id},set(e){fi(this,"id",e)}},getPageId:{get:()=>function(){return"pageId:"+ci(this).__treeManager__.viewId},set(e){fi(this,"getPageId",e)}},router:{get(){return ci(this).__pageRouter__},set(e){fi(this,"router",e)}},pageRouter:{get(){return(e=>{for(var t=ci(e),r=Io.Component.getComponentOptions(t).domain;;){var n=t.ownerShadowRoot;if(!n)break;if(!(n instanceof Io.ShadowRoot))return null;var o=n.getHostNode();if(!o)return null;if(Io.Component.getComponentOptions(o).domain!==r)return null;t=o}return t})(this).__pageRouter__},set(e){fi(this,"pageRouter",e)}},renderer:{get(){var e=ci(this).__treeManager__;return re(e.viewId)},set(e){fi(this,"renderer",e)}},dataset:{get(){var e=ci(this);return Io.Component.getComponentOptions(e).writeOnly?null:e.dataset},set(e){fi(this,"dataset",e)}},properties:{get(){return this.__data__},set(e){fi(this,"properties",e)}},data:{get(){return this.__data__},set(e){fi(this,"data",e)}},setData:{get:()=>__appServiceSDK__.useTracedApiEnd((function(e,t){var r=ci(this),n=r.__treeManager__;return __appServiceSDK__.traceBeginAPI("setData",{is:this.is,viewId:n.viewId}),"function"==typeof t&&n.operationFlow.registerSetDataCallback(t,this,r),r.setData(e)})),set(e){fi(this,"setData",e)}},groupSetData:{get:()=>function(e){var t=ci(this).__treeManager__;t.operationFlow.start(Date.now()),t.operationFlow.push([b.FLOW_GROUP]);var r=null;try{e.call(this)}catch(e){r=e}if(t.operationFlow.push([b.FLOW_GROUP_END]),t.operationFlow.end(),r)throw r},set(e){fi(this,"setData",e)}},replaceDataOnPath:{get(){return(e,t)=>ci(this).replaceDataOnPath(e,t)},set(e){fi(this,"replaceDataOnPath",e)}},mergeDataOnPath:{get(){return(e,t)=>ci(this).mergeDataOnPath(e,t)},set(e){fi(this,"mergeDataOnPath",e)}},applyDataUpdates:{get(){return()=>ci(this).applyDataUpdates()},set(e){fi(this,"applyDataUpdates",e)}},hasBehavior:{get(){return e=>ci(this).hasBehavior(e)},set(e){fi(this,"hasBehavior",e)}},triggerEvent:{get(){return(e,t,r)=>ci(this).triggerEvent(e,t,r)},set(e){fi(this,"triggerEvent",e)}},createSelectorQuery:{get(){return()=>__appServiceSDK__._createSelectorQuery({},si(ci(this))).in(this)},set(e){fi(this,"createSelectorQuery",e)}},createIntersectionObserver:{get(){return e=>__appServiceSDK__._createIntersectionObserver(this,e,si(ci(this)))},set(e){fi(this,"createIntersectionObserver",e)}},createMediaQueryObserver:{get(){return e=>__appServiceSDK__._createMediaQueryObserver(this,e,si(ci(this)))},set(e){fi(this,"createMediaQueryObserver",e)}},getOpenerEventChannel:{get(){return()=>this.__eventChannel},set(e){fi(this,"getOpenerEventChannel",e)}},applyAnimation:{get(){return(e,t,r,n,o)=>{var i=ci(this);!function(e,t,r,n,o,i,a,s){var c=`${Math.random()}-${+new Date}`;"function"==typeof a&&(t.applyAnimationCbMap[c]=a),t.operationFlow.push([b.FLOW_SET_NODE_ANIMATION_INFO,{hasCallback:"function"==typeof a,reqId:c,nodeId:t.nodeId.getNodeId(e),webviewId:r,selector:n,options:o,type:i?"animeJS":void 0,isLastAnimation:s}])}(i,i.__treeManager__,this.__wxWebviewId__,e,t,r,n,o)}},set(e){fi(this,"applyAnimation",e)}},clearAnimation:{get(){return(e,t,r)=>{var n=ci(this);!function(e,t,r,n,o,i){var a=`${Math.random()}-${+new Date}`;"function"==typeof i?t.clearAnimationCbMap[a]=i:"function"==typeof o&&(t.clearAnimationCbMap[a]=o),t.operationFlow.push([b.FLOW_CLEAR_NODE_ANIMATION_INFO,{hasCallback:"function"==typeof t.clearAnimationCbMap[a],reqId:a,nodeId:t.nodeId.getNodeId(e),webviewId:r,selector:n,options:o}])}(n,n.__treeManager__,this.__wxWebviewId__,e,t,r)}},set(e){fi(this,"clearAnimation",e)}},animate:{get(){return(e,t,r,n,o)=>{if("function"==typeof n)o=n;else if(void 0!==n){var i=ci(this),a=i.__treeManager__;return void a.operationFlow.push([b.FLOW_SET_NODE_ANIMATION_INFO,{type:"scrollTimeline",nodeId:a.nodeId.getNodeId(i),selector:e,options:t,duration:r,timeline:n}])}for(var s=vr(t,r),c=0;c<s.length;++c){var u="animeJS"===s[c].type;delete s[c].type,c===s.length-1?this.applyAnimation(e,s[c],u,o,!0):this.applyAnimation(e,s[c],u)}}},set(e){fi(this,"animate",e)}},applyAnimatedStyle:{get(){return(e,t,r,n)=>{var o=ci(this),i=o.__treeManager__,a=i.viewId,s=__appServiceSDK__.worklet.registerJsValue(t);Promise.resolve().then((()=>{!function(e,t,r,n,o,i,a){var s=`${Math.random()}-${+new Date}`,c="function"==typeof a;c&&(t.animatedStyleCbMap[s]=a),t.operationFlow.push([b.FLOW_SET_NODE_ANIMATED_STYLE,{hasCallback:c,reqId:s,nodeId:t.nodeId.getNodeId(e),pageId:r,selector:n,updaterId:o,userConfig:i}])}(o,i,a,e,s,r,n)}))}},set(e){fi(this,"applyAnimatedStyle",e)}},clearAnimatedStyle:{get(){return(e,t,r)=>{var n=ci(this),o=n.__treeManager__;!function(e,t,r,n,o,i){var a=`${Math.random()}-${+new Date}`,s="function"==typeof i;s&&(t.animatedStyleCbMap[a]=i),t.operationFlow.push([b.FLOW_CLEAR_NODE_ANIMATED_STYLE,{hasCallback:s,reqId:a,nodeId:t.nodeId.getNodeId(e),pageId:r,selector:n,styleIds:o}])}(n,o,o.viewId,e,t,r)}},set(e){fi(this,"clearAnimatedStyle",e)}},selectOwnerComponent:{get(){return e=>{var t=ci(this);return Io.Component.getComponentOptions(t).writeOnly?null:(e=>{var t=ci(e),r=Io.Component.getComponentOptions(t).domain,n=t.ownerShadowRoot;if(!(n instanceof Io.ShadowRoot))return null;var o=n.getHostNode();return o?ui(r,o,e):null})(this)}},set(e){fi(this,"selectOwnerComponent",e)}},selectComponent:{get(){return e=>{var t=ci(this);return Io.Component.getComponentOptions(t).writeOnly?null:li(this,e,!1)}},set(e){fi(this,"selectComponent",e)}},selectAllComponents:{get(){return e=>{var t=ci(this);return Io.Component.getComponentOptions(t).writeOnly?[]:li(this,e,!0)}},set(e){fi(this,"selectAllComponents",e)}},getRelationNodes:{get(){return e=>((e,t)=>{var r=ci(e).getRelationNodes(t);return null===r?null:r.map((e=>Io.Element.getMethodCaller(e)))})(this,e)},set(e){fi(this,"getRelationNodes",e)}},getTabBar:{get:()=>function(e){var t=ci(this).__treeManager__;return"function"==typeof e?t.tabRoot?(e(Io.Element.getMethodCaller(t.tabRoot)),Io.Element.getMethodCaller(t.tabRoot)):(Hi(t.viewId).then((()=>{!t.tabDestroyed&&t.tabRoot&&e(Io.Element.getMethodCaller(t.tabRoot))})),null):t.tabDestroyed||!t.tabRoot?null:Io.Element.getMethodCaller(t.tabRoot)},set(e){fi(this,"getTabBar",e)}},exitState:{get(){return this.__exitState__},set(e){fi(this,"exitState",e)}},setInitialRenderingCache:{get:()=>function(e){var t=ci(this).__treeManager__;null===e?Gi(t):Ui(t,e)},set(e){fi(this,"exitState",e)}},setUpdatePerformanceListener:{get:()=>function(e,t){var r=ci(this),n=r.__treeManager__,o=n.nodeId.getNodeId(r);"function"==typeof t?(r.__updatePerformanceListener__=t,n.operationFlow.push([b.ENABLE_UPDATE_PERFORMANCE_STAT,o,e])):(r.__updatePerformanceListener__=null,n.operationFlow.push([b.DISABLE_UPDATE_PERFORMANCE_STAT,o]))},set(e){fi(this,"exitState",e)}},getPassiveEvent:{get:()=>function(e){wx.getPassiveEvent(this.__wxWebviewId__,e)},set(e){fi(this,"exitState",e)}},setPassiveEvent:{get:()=>function(e){wx.setPassiveEvent(this.__wxWebviewId__,e)},set(e){fi(this,"exitState",e)}}}),hi={},_i=0,mi={},vi=(e,t,r)=>new Promise((n=>{var o=Wa.get(r).nodeId.getNodeId(e);mi[_i]=n,Q(b.REQUEST_WORKLET_METHOD,{methodName:t,nodeId:o,reqId:_i},r),_i++}));ie(b.RESPONSE_WORKLET_METHOD,(e=>{var t=e[0].reqId,r=mi[t];"function"==typeof r&&(delete mi[t],r(e[0].workletId))}));var yi=!0,gi=e=>{(e=>{var t=In++;Nn.push(t);try{e(t)}catch(e){throw Nn.pop(),e}Nn.pop()})((()=>{bi(e)}))},bi=e=>{je+=1;var t,r,n,o,i,a=Date.now(),s=e.operationFlow.iterator,c=s.expectStart(),u=s.nextStepType();if(u===b.FLOW_INITIAL_CREATION)wi(e,b.FLOW_INITIAL_CREATION),Ve(c,a,Date.now(),2);else if(u===b.FLOW_INITIAL_RENDERING_CACHE)wi(e,b.FLOW_INITIAL_RENDERING_CACHE);else if(u===b.FLOW_CREATE_TAB)wi(e,b.FLOW_CREATE_TAB),Ve(c,a,Date.now(),3);else if(u===b.FLOW_SET_ROOT_PROPERTIES){var l=s.nextStep();cn(e.root,l[1],l[2],l[3])}else if(u===b.FLOW_DESTROY_PAGE)s.nextStep(),Ai(e);else if(Xo.call(uo,s.nextStepType())){var f=uo[s.nextStepType()],p=s.nextStep().slice(1);f(e.compManager,p)}else{var d=Date.now(),h=s.nextStep();if(h[0]===b.FLOW_UPDATE){var _=h[1],m=e.nodeId.getNodeById(_),v=h[2];if(m){if(v.length){var y=Io.Component.getDataProxy(m);y.setChanges(v),y.doUpdates(void 0,!0),Dn(_,(t=>({isMergedUpdate:!1,dataPaths:t.withDataPaths?v.map((e=>e[0])):void 0,pendingStartTimestamp:c,updateStartTimestamp:a,updateEndTimestamp:Date.now(),pageId:e.viewId})))}}else wxNativeConsole.warn(`[flowUpdate] node ${h[1]} not found`),s.skipToEnd()}else if(h[0]===b.FLOW_GROUP){var g=s.nextStep();if(g[0]!==b.FLOW_GROUP_END)throw new Error(`Framework inner error (expect FLOW_GROUP_END but get ${x(g[0])})`)}else if(h[0]===b.FLOW_REPLACE_PLACEHOLDER){var w=h[1];e.compManager.getAndClearPendingPlaceholderReplacement(w).replacers.forEach((e=>{e()}))}else if(h[0]===b.FLOW_HOT_UPDATE){var S=e.nodeId.getNodeById(h[1]);S?S.__templateInstance._resetShadowChildren(S,S.data,e):s.skipToEnd()}else{if(h[0]!==b.FLOW_HOT_UPDATE_RESET)throw new Error(`Framework inner error (expect an update event but get ${x(h[0])})`);((e,t)=>{if(dn()){var r="";e===t.root?r="body":e===t.tabRoot&&(r="tab-bar");var n=e.__vtObj,o=e.ownerShadowRoot?e.ownerShadowRoot.createComponent(n.tag,void 0,n.generics,t):mn.createElement(r,mn.Component._list[e.is],t);if(t.operationFlow.iterator.nextStep()[0]!==b.FLOW_HOT_UPDATE_RESET)throw new Error("Expect FLOW_HOT_UPDATE_RESET but get another");var i=t.nodeId.getNodeId(e);if(t.nodeId.removeNode(e),t.nodeId.allocNodeId(o,i),e===t.root)mn.Element.pretendDetached(e),t.root=o,window.__DOMTree__=o,document.body=o.$$,mn.Element.pretendAttached(o);else if(e===t.tabRoot)t.tabRoot=o,window.__TAB_BAR__=o,e.parentNode.replaceChild(o,e);else{o.__vtObj=n;var a=n.attr;for(cn(o,a,n.raw,n.rawAttr);e.childNodes.length;)o.appendChild(e.childNodes[0]);e.parentNode.replaceChild(o,e)}}})(e.nodeId.getNodeById(h[1]),e)}((e,t,r,n)=>{Reporter.speedReport({key:e,timeMark:{startTime:t,endTime:r},force:"reRenderTime"!==e,data:n})})("reRenderTime",d,Date.now()),yi&&5===((e,t,r)=>(We+=je,He+=r-t,Xe+=Ue,Ke+=Ge,$e+=r-e,je=0,Ue=0,Ge=0,ze+=1))(c,a,Date.now())&&(yi=!1,t=1,r=Math.ceil(He/(ze||1)),n=Math.ceil(Ke/(Xe||1)),o=Math.ceil($e/(ze||1)),i=[We,ze,r,Xe,n,2,o,t].map(encodeURIComponent).join(","),void 0!==Reporter&&Reporter.reportKeyValue({key:"SetDataPerf",value:i,force:!0}))}s.expectEnd()},wi=(e,t)=>{wxNativeConsole.info(`[OperationFlow] executing init flow with type ${x(t)}`);var r,n=t===b.FLOW_CREATE_TAB,o=t===b.FLOW_INITIAL_RENDERING_CACHE,s=e.operationFlow.iterator,c=s.nextStep(),u=c[1],l=c[2],f=a(),p=null;if("skyline"===f)r=i().getContext(e.viewId);else if("scl"===f){r={mainRoot:__sclEngine__.getTabBarContainer()}}else"xr-frame"===f&&(r=xrFrame.getOrCreateContext(e.viewId));if(n){if(e.tabNodeId=l,wxNativeConsole.info(`[OperationFlow] creating tab bar comp <${u}> ok, pageId=${e.viewId}`),"skyline"===f){var h=i().getTabBarContext();e.tabRoot=p=window.__TAB_BAR__=Io.Component.createWithContext("tab-bar",Io.Component._list[u],h,e),"function"==typeof p.__domElement.setStyleScope&&p.__domElement.setStyleScope(Io.getStyleScopeId(Io.Component._list[u].options.classPrefix))}else"scl"===f?e.tabRoot=p=window.__TAB_BAR__=Io.createElement("tab-bar",Io.Component._list[u]):"xr-frame"===f?wxNativeConsole.info(`[OperationFlow] unexpected xr-frame tabb bar, pageId=${e.viewId}`):e.tabRoot=p=window.__TAB_BAR__=Io.createElement("tab-bar",Io.Component._list[u]);wxNativeConsole.info(`[OperationFlow] create tab bar comp ok, pageId=${e.viewId}`)}else if(o){if(!u)return void Oo(null);p=Io.createElement("initial-rendering-cache",Io.Component._list[u])}else{var _=c[3]||{};e.rootNodeId=l,wxNativeConsole.info(`[OperationFlow] creating root component on view thread, pageId=${e.viewId}`),wx.traceBeginEvent("Framework","createRootComponent"),"skyline"===f?(e.root=p=window.__DOMTree__=Io.Component.createWithGenericsAndContext("wx-page",Io.Component._list[u],_,r,e),"function"==typeof p.__domElement.setStyleScope&&p.__domElement.setStyleScope(Io.getStyleScopeId(Io.Component._list[u].options.classPrefix))):"xr-frame"===a()?e.root=p=window.__DOMTree__=Io.Component.createWithGenericsAndContext("wx-xr-element",Io.Component._list[u],_,r,e):e.root=p=window.__DOMTree__=Io.Component.createWithGenerics("body",Io.Component._list[u],_,e),wx.traceEndEvent(),wxNativeConsole.info(`[OperationFlow] create root component on view thread ok, pageId=${e.viewId}`)}if(e.nodeId.allocNodeId(p,l),p.setAttribute("is",u),Be.restoring&&!n){var m=Be.idDataMap[e.nodeId.getNodeId(p)];Io.Component.replaceWholeData(p,m,null),mo(Be.restoring),Be.restoring=null,Be.idDataMap=null}if((c=s.nextStep())[0]!==t)throw new Error(`Framework inner error (expect ${x(t)} end but get ${x(c[0])})`);if(e.nodeId.addNode(p),n)if("skyline"===f){wxNativeConsole.info("[OperationFlow] attaching tabBar to skyline");var v=i(),y=v.getTabBarContext();p.__domElement.setStyle("pointer-events: none;"),y.attach(p.__domElement),Io.Element.pretendAttached(p),v.insertToInspecteeRoots(p),e.__attached=!0,wxNativeConsole.info("[OperationFlow] attach tabBar to skyline done")}else if("scl"===f)wxNativeConsole.info("[OperationFlow] attaching tabBar to scl"),r.mainRoot.appendChild(p),wxNativeConsole.info("[OperationFlow] attaching tabBar to scl");else{var g=Io.createElement("wx-tab-bar-wrapper",Io.Component._list["wx://tab-bar-wrapper"]);g.appendChild(p),document.documentElement.insertBefore(g.$$,document.body),Io.Element.pretendAttached(g),e.tabDestroyed&&g.removeChild(p)}else if(o){var w=document.createElement("wx-initial-rendering-cache-wrapper");if(w.setAttribute("style","height: 0; overflow: hidden"),w.appendChild(p.$$),document.documentElement.insertBefore(w,document.body),(c=s.nextStep())[0]!==b.FLOW_INITIAL_RENDERING_CACHE)throw new Error("Framework inner error (expect initial rendering end but get another)");d(p,1,(e=>{e.triggerLifeTime("cacheAttached")})),Oo(p,c[1]),e.nodeId.removeNode(p),document.documentElement.removeChild(w)}else{if("skyline"===f){wxNativeConsole.info(`[WABaseLib.Critical] attach root element to skyline, pageId=${e.viewId}`);var S=i(),E=S.getContext(e.viewId);if(S.useCustomRoute(e.viewId)){wxNativeConsole.info(`[WABaseLib.Critical] useCustomRoute, pageId=${e.viewId}`);var T=E.createElement("empty","host");T.setStyle("overflow: hidden;"),T.appendChild(p.__domElement),p.__domElement.forceDetached(),E.attach(p.__domElement,T),S.attachCustomRoute(e.viewId,T)}else wxNativeConsole.info(`[WABaseLib.Critical] useNormalRoute, pageId=${e.viewId}`),E.attach(p.__domElement);S.insertToInspecteeRoots(p),e.__attached=!0}else"webview"===a()&&(document.body=p.$$);d(p,1,(e=>{e.triggerLifeTime("cacheAttached")})),"webview"===f&&function(e){Eo&&Date.now();var t=To(window.__route__);if("static"!==t){if("dynamic"!==t){var r=__wxConfig.envVersion;"develop"!==r&&"trial"!==r||Ao()}return!1}Co(e)}(p),Io.Element.pretendAttached(p)}wxNativeConsole.info(`[OperationFlow] init flow type ${x(t)} execution ok`)},xi={},Si=!1,Ei=(e={})=>{var t=a(),r="skyline"===t?C:A;if(te(r,t),"reLaunch"!==e.openType&&"autoReLaunch"!==e.openType||(Oi(r),Si=!1),!Si){Si=!0,wxNativeConsole.info(`[VD] newTabBar, tabBarViewId=${r}`),Li[r]=!0,Wa.create(r),ae(r);var n=Wa.get(r);if(n.operationFlow.unblock(),"skyline"===t){var o=i().getTabBarContext();__webviewEngine__.getStyleSheetManager(r).registerBackendContext(o)}if("scl"===t)n.compManager.injectComponentsRecursively([O],(()=>{Q(b.SCL_CONTEXT_READY,{},r)}))}},Ti=(e,t)=>{if(!Wa.get(e)){wxNativeConsole.info(`[VD] newPage, pageId=${e}`),te(e,a());var r=Wa.create(e).compManager;if(Li[e]=!1,Fi[e]=[],ki[e]=[],ae(e),Do(e,(()=>{if(wxNativeConsole.info(`[WebviewInjectFirstPage] onMainPageFrameReady, isLazyLoad=${Jo()}, pageId=${e}, isFirstPage=${__wxConfig.isFirstPage}`),Jo()&&__wxConfig.isFirstPage&&"webview"===a()){var t=__wxConfig.appLaunchInfo.path,r=t.replace(/\.html$/,"").replace(/^\//,"");r=ei(r),wxNativeConsole.info(`[WebviewInjectFirstPage] entryPath=${t}, pageId=${e}, rootCompPath=${r}`);var n=Wa.get(e).compManager;setTimeout((()=>{(e=>{var t="ios"===__wxConfig.platform,r=__wxConfig.isLazyLoad,n=__wxConfig.isFirstPage,o=__wxConfig.appLaunchInfo.path.replace(/\.html$/,"").replace(/^\//,""),i=qn(o),a="__APP__"===i,s=[101,111].includes(__wxConfig.appLaunchInfo.preloadType),c=t&&r&&n&&a&&s;if(wxNativeConsole.info(`[fixPluginInjectionMiss] isIOS=${t} isLazyLoad=${r} isFirstPage=${n} isMainPackage=${a} isPreload=${s}, isNeedFix=${c}`),c){var u=[];Object.values(__wxConfig.plugins||{}).filter((e=>e.subpackage.includes(i))).forEach((e=>{var t=e.provider,r=void 0!==window[`__pluginFrameStartTime_${t}__`];wxNativeConsole.info(`[fixPluginInjectionMiss] pluginId=${t} isPluginInjected=${r}`),r||u.push(`__plugin__/${t}/pageframe.js`)})),wxNativeConsole.info(`[fixPluginInjectionMiss] loadJsFiles to webview: [${u.join(",")}]`),de(u,(()=>{e()}))}else e()})((()=>{r=ei(r),n.setInitialSubPackage(r),n.injectComponentsRecursively([r],(()=>{xi[e].on("inject",(()=>{ri(r),ti(r)}))}),!0)}))}))}})),xi[e]=_(["inject"]),xi[e].on("inject",(()=>{"webview"===a()&&Wi(e)})),__wxConfig.onReady((()=>{Jo()&&N()?Do(e,(()=>{"skyline"===a()?r.injectComponentsRecursively([O],(()=>{i().onPageReady(e,(()=>{var r="autoReLaunch"===t.openType||"reLaunch"===t.openType;t.isTabPage&&(I(t.path)?(Wi(e,r),D()):L()),xi[e].notify("inject")}))})):r.injectComponentsRecursively([O],(()=>{xi[e].notify("inject")}))})):xi[e].notify("inject")})),"skyline"===a()){var n=(Wn||zn(),Wn);__webviewEngine__.addStyleSheetIndexGroup(""),Object.keys(n).forEach((e=>{var t=`${n[e]}__plugin__/${e}/`;__webviewEngine__.addStyleSheetIndexGroup(t)})),i().onPageReady(e,(r=>{var n,o,i,a,s,c;(__webviewEngine__.getStyleSheetManager(e).registerBackendContext(r),t.isTabPage)&&(I(t.path)?(Ei(t),null===(n=window)||void 0===n||null===(o=n.__TAB_BAR__)||void 0===o||null===(i=o.__domElement)||void 0===i||i.setStyle("display: flex; pointer-events: none;")):null===(a=window)||void 0===a||null===(s=a.__TAB_BAR__)||void 0===s||null===(c=s.__domElement)||void 0===c||c.setStyle("display: none; pointer-events: none;"))}))}}},Ci=e=>{var t=Wa.get(e);if(wxNativeConsole.info("[skyline] getDomTreeByPageId tm: ",typeof t),void 0!==t&&void 0!==t.root)return t.root},Ai=e=>{if("webview"!==a()){var t=e.viewId;if(wxNativeConsole.info(`[destroyPage] pageId=${t}`),Io.Element.pretendDetached(e.root),Wa.destroy(t),Mi(null),delete Li[t],delete Fi[t],delete ki[t],delete xi[t],(e=>{delete k[e]})(t),(e=>{delete K[e],delete $[e]})(t),"skyline"===a()){var r=i();r.markDestroyContext(t),r.removeFromInspecteeRoots(e.root),__webviewEngine__.removeStyleSheetManager(t),Foundation.emit("SKYLINE_DESTROY_PAGE",t)}else"xr-frame"===a()&&(xrFrame.getOrCreateContext(t).destroy(),delete window.__DOMTree__)}},Oi=e=>{if("webview"!==a()){wxNativeConsole.info(`[CustomTabBar] destroyTabBar pageId=${e}`);var t=Wa.get(e);t&&(null!=t&&t.tabRoot&&Io.Element.pretendDetached(t.tabRoot),Wa.destroy(e),delete Li[e],delete Fi[e],delete ki[e],delete xi[e],"skyline"===a()&&(__webviewEngine__.removeStyleSheetManager(e),i().removeFromInspecteeRoots(t.root)))}},Mi=e=>{var t;window.__DOMTree__=null!==e?null===(t=Wa.get(e))||void 0===t?void 0:t.root:null};"skyline"===a()&&wx.subscribe("onAppRouteDone",(e=>{Mi(e.webviewId)}));var Ri={String:String,Number:Number,Boolean:Boolean,Object:Object,Array:Array,null:null},Pi=(e,t)=>{for(var r in e.properties){var n=e.properties[r];n.type=Ri[n.type],n.optionalTypes&&(n.optionalTypes=n.optionalTypes.map((e=>Ri[e])))}var o="";t||(o=co.getComponentClassPrefix(e.is));var i=e.options,s=!(!i.writeIdToDOM&&!t);e.options=Bo,e.options.multipleSlots=i.multipleSlots||!1,e.options.writeOnly=i.writeOnly||!1,s||"xr-frame"===a()?e.options.idPrefixGenerator=null:e.options.idPrefixGenerator=f,e.options.domain=i.domain,e.options.randomizeTagName=!1,e.options.innerDataExclude=(e=>{if(!e)return null;var t=e.lastIndexOf("/"),r=e.slice(1,t),n=e.slice(t+1);return new RegExp(r,n)})(i.innerDataExcludeString),e.options.virtualHost=i.virtualHost;var c=!1;if(i.styleIsolation){var u=i.styleIsolation;"page-"===u.slice(0,5)&&(c=!0,u=u.slice(5)),"isolated"===u?(o=co.getComponentClassPrefix(e.is),e.options.addGlobalClass=!1):"strong-isolated"===u?(o=co.getComponentClassPrefix(e.is),e.options.addGlobalClass=!1,e.options.randomizeTagName=!0):"apply-shared"===u?(o=co.getComponentClassPrefix(e.is),e.options.addGlobalClass=!0):"shared"===u&&"/"===i.domain?(o="",e.options.addGlobalClass=!1):c=!1}else e.options.addGlobalClass=i.addGlobalClass||!1;e.options.classPrefix=o,i.hasObservers&&(e.observers={"**"(){}}),G()&&(e.observers=Ne()(Ne()({},e.observers||{}),{},{"**"(e){WeixinJSBridge.invoke("componentDataChanged",{nodeId:this.__wxTmplId,data:e})}})),window.__customComponentMode__=void 0!==__wxAppCode__&&__wxAppCode__[e.template];var l=window.__generateFunc__;return void 0!==__wxAppCode__&&__wxAppCode__[e.template]?l=__wxAppCode__[e.template]:wxNativeConsole.warn(`[componentRegistration] Generate function of ${e.is} not found in view thread`),e.template={path:e.is+".wxml",func:l},Io.registerElement(e),{disableAppWxss:c,classPrefix:o}},Ii=(e,t)=>{var r=__webviewEngine__.getStyleSheetManager(e,t);t.forEach((e=>{var t="__APP__"===e?"":e;r.setIndex(t+"app.fpiib"),no(e,(e=>{e.forEach((e=>{r.setIndex(`${t}__plugin__/${e.provider}/app.fpiib`)}))}))}))},Ni=(e,t,r)=>{var n="xr-frame"===a()?h(e):e,o=a();t||(window.__forceSaveStates__=vo,"function"==typeof wx.onWebViewWillManuallyTerminate&&wx.onWebViewWillManuallyTerminate(vo));var i,[s,c,u,l]=n,f=Wa.get(r);t||(f.rootCompName=u);for(var p=0;p<s.length;p++){var d=s[p];d.options.hasObservers&&(d.observers={"**"(){}}),d.options=ko,Io.registerBehavior(d)}"skyline"===o?((i=__webviewEngine__.getStyleSheetManager(r)).preventUpdate(),i.setStyleSheet("app",0,2)):"webview"===o&&(i=window.__styleSheetManager2__).preventUpdate();for(var _=function(){var e=c[m],r=Xn(e.is);r.startsWith("plugin-private://")&&!f.compManager.__injectedComponents.has(r)&&f.compManager.__injectedComponents.add(r);var n=e.is===u&&!t;"scl"===o&&t&&(n=!0);var{disableAppWxss:a,classPrefix:s}=Pi(e,n);a&&e.is===u&&!t&&("webview"===o?__webviewEngine__.disableStyleElement("app.wxss"):"skyline"===o&&i.disableStyleSheet("app"));var l=e.is+".wxss",p=void 0===__wxAppCode__?null:__wxAppCode__[l];if("skyline"===o){p&&!i.usePreCompiled&&p("",{allowIllegalSelector:!0});var d=0;"function"==typeof Io.getStyleScopeId&&(d=Io.getStyleScopeId(s));var h=e.is===u?1:0;i.setStyleSheet(r,d,h)}else"scl"===o?__sclEngine__.loadStyleBincode(`${r}.fpcssb`):"webview"===o&&(a&&e.is===u&&!t&&__webviewEngine__.disableStyleElement("app.wxss"),p&&((e.is!==u||t)&&p(s&&s+"--",{allowIllegalSelector:!0}),pn(l,(e=>{e?e(s&&s+"--",{allowIllegalSelector:!0}):window.__styleSheetManager__.setCss("./"+l,""),wx.triggerPageReRender()}))))},m=0;m<c.length;m++)_();for(var v in pn("app.wxss",(e=>{e?e("",{allowIllegalSelector:!0}):window.__styleSheetManager__.setCss("./app.wxss",""),wx.triggerPageReRender()})),"webview"!==o&&"skyline"!==o||(i.allowUpdate(),i.requestUpdate()),l)Xo.call(Io.Component._list,l[v])&&(Io.Component._list[v]=Io.Component._list[l[v]])},Di=!1;ie(b.LOAD_COMPONENT_DEF,((e,t,r)=>{wxNativeConsole.info(`[loadComponentDef] isFirstPage=${__wxConfig.isFirstPage}, isLazyLoad=${Jo()}`);var n=e[0];if(!Jo()&&Io.Component._list[n]&&"//"===Io.Component._list[n].options.domain&&ti(n,r),Jo()&&("webview"!==a()||!__wxConfig.isFirstPage)){var o=Wa.get(r).compManager;o.setInitialSubPackage(n);var i="webview"===a()?new Promise((e=>{"ios"===wx.getPlatform()&&__wxConfig.clientVersion<402658304&&"undefined"==typeof __pageFrameStartTime__&&!Di?(ne(b.LOAD_APP_PKG_READY,(()=>{de(["common.app.js","webview.app.js"],(()=>{Di=!0,e()}),!0)}),0),Q(b.LOAD_APP_PKG,{})):e()})):Promise.resolve();Do(r,(()=>{i.then((()=>{o.injectComponentsRecursively([n],(()=>{xi[r].on("inject",(()=>{ri(n),ti(n,r)}))}),!0)}))}))}}));var Li={},Fi={},ki={};ie(b.COMPONENT_DEF,((e,t,r)=>{Li[r]?Ni(e,!1,r):Fi[r].push(e),Wa.get(r).compManager.setInitialSubPackage(e[2])})),ie(b.COMPONENT_DEF_TAB,((e,t,r)=>{Li[r]?"webview"!==a()||"scl"===a()?Ni(e,!0,r):xi[r].on("inject",(()=>{Ni(e,!0,r)})):ki[r].push(e)}));ie(b.UPDATE_COMPONENT_DEF,((e,t,r)=>{var[n]=e,o=Wa.get(r);Io.Component._list[n.is]&&Pi(n,o.rootCompName===n.is)}));var Bi=(e,t)=>{ne(b.WX_EVENT,(r=>{var n=r[2],o=r[1],i=t.nodeId.getNodeById(r[0]);if(i){var a=Io.Element.getMethodCaller(i),s=n._userTap;if(n._requireActive&&!__appServiceEngine__.isFramesetMode()){if(!(e=>{var t=__appServiceEngine__.getCurrentPagesByDomain("");return t[t.length-1].__wxWebviewId__===e||e===C})(e))return;delete n._requireActive}if(n._relatedInfo&&(__appServiceEngine__.DisplayReporter.setEventRelatedInfo(n._relatedInfo),delete n._relatedInfo),"function"!=typeof a[o])console.warn('Component "'+i.is+'" does not have a method "'+o+'" to handle event "'+n.type+'".');else if(s)Sr((()=>{var e=__userActionTracer__.startTraceHandler(n);__appServiceSDK__.setWxInterfaceIsInvokeInTap(n.type),Io.safeCallback("Event Handler",a[o],a,[n],i),__appServiceSDK__.unsetWxInterfaceIsInvokeInTap(),__userActionTracer__.endTraceHandler(e)}));else{var c=__userActionTracer__.startTraceHandler(n);Io.safeCallback("Event Handler",a[o],a,[n],i),__userActionTracer__.endTraceHandler(c)}}}),e),ne(b.MODEL_VALUE_CHANGE,((e,t,r)=>{var{data:n,modelValueName:o,nodeId:i}=e[0];Zo(n,o,r,i)}),e)},ji=(e,t)=>{t.listenerInited||(t.listenerInited=!0,Bi(e,t),ne(b.REQUEST_SAVE,(([t])=>{((e,t)=>{var r=Wa.get(e);r&&(r.statesData=t,r.tabRoot&&d(r.tabRoot,1,(e=>{e.triggerLifeTime("saved")})),d(r.root,1,(e=>{e.triggerLifeTime("saved")})),Q(b.SAVE_STATE,[],e))})(e,t)}),e),ne(b.CALL_METHOD_FROM_WXS,(e=>{Hr(e)}),e),function(e,t){ne(b.ANIMATION_TRANSITION_END,(e=>{if(e&&e[0]&&e[0].reqId){var r=t.applyAnimationCbMap[e[0].reqId];"function"==typeof r&&(delete t.applyAnimationCbMap[e[0].reqId],Ro.safeCallback("Animation",r,null,[]));var n=JSON.parse(e[0].args);t.operationFlow.push([b.FLOW_SET_NODE_NEXT_ANIMATION_INFO,n])}}),e),ne(b.CLEAR_ANIMATION_COMPLETE,(e=>{if(e&&e[0]&&e[0].reqId){var r=t.clearAnimationCbMap[e[0].reqId];"function"==typeof r&&(delete t.clearAnimationCbMap[e[0].reqId],Ro.safeCallback("Clear Animation",r,null,[]))}}),e)}(e,t),function(e,t){ne(b.APPLY_NODE_ANIMATED_STYLE_END,(e=>{if(e&&e[0]&&e[0].reqId){var r=e[0].styleId,n=t.animatedStyleCbMap[e[0].reqId];"function"==typeof n&&(delete t.animatedStyleCbMap[e[0].reqId],Po.safeCallback("AnimaedStyle",n,null,[{styleId:r}]))}}),e),ne(b.CLEAR_NODE_ANIMATED_STYLE_END,(e=>{if(e&&e[0]&&e[0].reqId){var r=t.animatedStyleCbMap[e[0].reqId];"function"==typeof r&&(delete t.animatedStyleCbMap[e[0].reqId],Po.safeCallback("Clear AnimaedStyle",r,null,[]))}}),e)}(e,t),function(e,t){ne(b.RESPONSE_VIEW_INFO,(([e,r])=>{if(r){var n=t.viewInfoCbMap[r];n&&n(e)}}),e)}(e,t),((e,t)=>{ne(b.UPDATE_PERFORMANCE_STAT,(r=>{var[n,o]=r,i=t.nodeId.getNodeById(n);if(i&&i.__updatePerformanceListener__){var a=Mn.Element.getMethodCaller(i);Mn.safeCallback("Update Performance Listener",i.__updatePerformanceListener__,a,[o],i)}i&&"function"==typeof Ln&&Ln(o,i,e)}),e)})(e,t),ne(b.REQUEST_WORKLET_METHOD,((e,t,r)=>{var n,o,{methodName:i,nodeId:a,reqId:s}=e[0],c=e=>Q(b.RESPONSE_WORKLET_METHOD,{reqId:s,workletId:e},r),u=Wa.get(r).nodeId.getNodeById(a),l=null!==(n=null==hi||null===(o=hi[u.is])||void 0===o?void 0:o[i])&&void 0!==n?n:null;if("function"==typeof l){var f=Io.Element.getMethodCaller(u),p=l.call(f);if("function"==typeof p)return void c(__appServiceSDK__.worklet.registerJsValue(p))}c(null)}),e))},Ui=(e,t)=>{var r=Hn(e.rootCompName),n=f();e.operationFlow.start(),e.operationFlow.push([b.FLOW_INITIAL_RENDERING_CACHE,r,n]);var o=Io.createElement("initial-rendering-cache",Io.Component._list[r],e);return Io.Element.getMethodCaller(o).__wxExparserNodeId__=e.nodeId.allocNodeId(o,n),e.operationFlow.push([b.FLOW_INITIAL_RENDERING_CACHE]),e.nodeId.addNode(o),o.setData(t),e.operationFlow.push([b.FLOW_INITIAL_RENDERING_CACHE,t]),e.operationFlow.end(),e.nodeId.removeNode(o),o},Gi=e=>{e.operationFlow.start(),e.operationFlow.push([b.FLOW_INITIAL_RENDERING_CACHE,"",null]),e.operationFlow.end()},Vi={},Wi=(e,t=!1)=>{void 0!==__wxAppCode__[O+".wxml"]?Vi[e]||(Vi[e]=!0,wxNativeConsole.info(`[CustomTabBar] sendTabBarCreationRequest pageId=${e}`),Q(b.REQUEST_TAB,[t],e)):wxNativeConsole.info(`[CustomTabBar] no ${O} def, ignore requestTab`)};ie(b.DESTROY_TAB,((e,t,r)=>{wxNativeConsole.info(`[CustomTabBar] destroyTabBar pageId=${r}`),Wa.get(r).tabDestroyed=!0,L()})),ie(b.HIDE_TAB,((e,t,r)=>{wxNativeConsole.info(`[CustomTabBar] hideTabBar pageId=${r}`),L()})),ie(b.SHOW_TAB,((e,t,r)=>{wxNativeConsole.info(`[CustomTabBar] showTabBar pageId=${r}`),Wa.get(r).tabDestroyed=!1,D()}));var zi={},Hi=e=>new Promise((t=>{zi[e]=t})),Xi=(e,t)=>{var r=(()=>{var e,t,r=N();return $i(O)||(r=!1),"singlePage"===(null===(e=__wxConfig)||void 0===e||null===(t=e.appLaunchInfo)||void 0===t?void 0:t.mode)&&(r=!1),r})(),n=qi[e];if("string"==typeof n&&Yn(n))wxNativeConsole.info(`[CustomTabBar] "${n}" is in independent subPackage, ignore`);else{var o=P(n),i=re(e)||"webview";if("scl"!==o&&i!==o&&(o=i),wxNativeConsole.info(`[checkAndExecuteTabbarCreation] viewId=${e}, isGeneratorFunctionReady=${t}, needRenderCustomTabBar=${r}, renderer=${o}`),r&&("scl"!==o||t)){var a=Wa.get(e)||Wa.create(e);ji(e,a),a.tabRoot||a.tabDestroyed||(a.compManager.injectComponentsRecursively([O]),((e,t,r,n)=>{if(wxNativeConsole.info(`doDataThreadTabbarCreation viewId: ${e}, tabCompName: ${r}, renderer: ${n}`),"webview"!==n){var o,i,a=R();if("skyline"===n)o=C;else{if("scl"!==n)throw Error(`[CustomTabBar] renderer: ${n} not support`);o=A}var s=a.has(o);if(s)i=a.get(o).tm,a.add(e,n,i),t.tabCompName=i.tabCompName,t.tabNodeId=i.tabNodeId,t.tabRoot=i.tabRoot,t.tabUsedDef=i.tabUsedDef;else{te(o,n);var c=[[],[],r=Hn(r),{}];i=Wa.create(o),ai(c,r,Object.create(null),"",i),ji(o,i),Q(b.COMPONENT_DEF_TAB,c,o);var u=f();t.tabCompName=i.tabCompName=r,t.tabNodeId=i.tabNodeId=u,a.add(o,n,i),a.add(e,n,i),i.operationFlow.start(),i.operationFlow.push([b.FLOW_CREATE_TAB,r,u]);var l=Io.createElement("tab-bar",Io.Component._list[r],i);t.tabRoot=i.tabRoot=l,t.tabUsedDef=i.tabUsedDef=c,Io.Element.getMethodCaller(l).__wxExparserNodeId__=i.nodeId.allocNodeId(l,i.tabNodeId),i.operationFlow.push([b.FLOW_CREATE_TAB]),i.nodeId.addNode(l),Io.Element.pretendAttached(l)}t.nodeId.addNode(t.tabRoot),!s&&i.operationFlow.end(),"function"==typeof zi[e]&&zi[e]()}else{R().add(e,n,t);var p=[[],[],r=Hn(r),{}];ai(p,r,Object.create(null),"",t),Q(b.COMPONENT_DEF_TAB,p,e),t.tabCompName=r,t.tabNodeId=f(),t.operationFlow.start(),t.operationFlow.push([b.FLOW_CREATE_TAB,r,t.tabNodeId]);var d=Io.createElement("tab-bar",Io.Component._list[r],t);t.tabRoot=d,t.tabUsedDef=p,Io.Element.getMethodCaller(d).__wxExparserNodeId__=t.nodeId.allocNodeId(d,t.tabNodeId),t.operationFlow.push([b.FLOW_CREATE_TAB]),t.nodeId.addNode(d),Io.Element.pretendAttached(t.tabRoot),t.operationFlow.end()}})(e,a,O,o),t&&Q(b.FLUSH_BLOCKED,[],"skyline"===o?C:"scl"===o?A:e),a.rootCompName&&((e,t,r)=>{var n,o,i=!0,a=null===(n=__wxConfig)||void 0===n||null===(o=n.tabBar)||void 0===o?void 0:o.list;Array.isArray(a)&&a.map((e=>null==e?void 0:e.pagePath)).filter((e=>!!e)).indexOf(`${t}.html`)>=0&&(i=!1),wxNativeConsole.info(`[checkPageIncludingTabBar] rootCompName=${t}, viewId=${r}, needRemove=${i}`),i&&(e.tabDestroyed=!0,F(r))})(a,a.rootCompName,e))}}},Ki=[];__wxConfig.onReady((()=>{Ki.forEach((e=>{"skyline"!==re(e)&&Xi(e,!0)})),Ki=null})),ie(b.FLUSH_BLOCKED,((e,t,r)=>{wxNativeConsole.info(`[flushBlocked] pageId=${r}`),Wa.get(r).operationFlow.flushBlocked()}));var $i=e=>(e=Hn(e),Xo.call(go,e)&&(e=go[e]),Uo[e]),qi={};new WeakMap;var Yi=function(e,t){if("webview"===a()&&(t=0),null==t){for(var r=Wa.list(),n=0;n<r.length;++n)if(void 0!==r[n].nodeId.getNodeById(e))return r[n].nodeId.getNodeById(e);return null}var o=Wa.get(t);return o?o.nodeId.getNodeById(e):null},Zi=function(e,t){"webview"===a()&&(t=0);var r=void 0!==t?Wa.get(t):Wa.getByNode(e);return r?r.nodeId.getNodeId(e):""},Ji=function(e){"webview"===a()&&(e=0);var t=Wa.get(e);return t?t.root:""},Qi=function(e){"webview"===a()&&(e=0);var t=Wa.get(e);return t?t.rootNodeId:""},ea=function(e){"webview"===a()&&(e=0);var t=Wa.get(e);return t?t.rootCompName:""},ta=function(e){var t=Wa.getByNode(e);return t?t.viewId:0},ra=o(),na={},oa={},ia=0,aa=1,sa=2,ca=function(e){return Object.keys(e).filter((t=>{var r=t.toLocaleLowerCase();return!((r.includes("transform")||r.includes("transition"))&&""===e[t]||""===t.trim()||void 0===e[t]||""===e[t]||!isNaN(parseInt(t,10)))})).map((t=>`${t.replace(/([A-Z]{1})/g,(e=>`-${e.toLowerCase()}`))}:${e[t]}`)).join(";")},ua=(e,t)=>{var{nodeId:r,webviewId:n,options:o,selector:i,reqId:a,hasCallback:s,fromWxs:c}=e,u=Yi(r,n);if(u){var l=u.shadowRoot,f=t||l.querySelectorAll(i);if(t){var p=()=>{var e=Wa.getByNode(t);if(c){var r=e.clearAnimationCbMap[a];"function"==typeof r&&(delete e.clearAnimationCbMap[a],ra.safeCallback("Clear Animation",r,null,[]))}else Q(b.CLEAR_ANIMATION_COMPLETE,{reqId:a},e.viewId)};if((e=>{(e.__scrollAnimations||[]).forEach((e=>{e.cancel()})),e.__scrollAnimations=[]})(f),!o||"function"==typeof o||!f.__styleObj)return f.__animeOptions&&(f.__animeOptions.forEach((e=>"function"==typeof e.reset&&e.reset())),f.__animeOptions=[]),f.setNodeStyle("",E),Te(f,E),f.__styleObj=null,f.__animateStatus=ia,f.__animationPendingQueue=[],void p();var d=f.__styleObj.transform.split(" ");for(var h of Object.keys(o))if(o[h])if(f.__styleObj["backgroundColor"===h?"background-color":h])delete f.__styleObj["backgroundColor"===h?"background-color":h];else for(var _=0;_<d.length;++_)d[_].indexOf(h)>=0&&d.splice(_,1);f.__styleObj.transform=d.join(" "),f.__styleObj["-webkit-transform"]=d.join(" "),f.__styleObj.transition="unset",f.__styleObj.transitionProperty="unset",f.__styleObj["-webkit-transition"]="unset",f.__styleObj["-webkit-transition-property"]="unset";var m=e=>{f.setNodeStyle(wx.transformRpx(e,!0),E)};m(ca(f.__styleObj)),Ee(f,E,m),f.__animateStatus=ia,--oa[a],0===oa[a]&&s&&p()}else{oa[a]=f.length;for(var v=0;v<f.length;++v)ua(e,f[v])}}},la=(e,t)=>{var{nodeId:r,webviewId:n,selector:o}=e,i=Yi(r,n);if(i){var a=i.shadowRoot,s=t||a.querySelectorAll(o);if(t)s.__animationPendingQueue&&s.__animationPendingQueue.length>0&&(s.__animateStatus=sa,setTimeout((()=>{pa(s.__animationPendingQueue.shift(),s,!0)}),32));else for(var c=0;c<s.length;++c)la(JSON.parse(JSON.stringify(e)),s[c])}},fa=e=>("string"==typeof e?e=wx.transformRpx(e,!0):"object"==typeof e&&"string"==typeof e.value?e.value=wx.transformRpx(e.value,!0):Array.isArray(e)&&e.map((e=>{if("string"==typeof e.value)e.value=wx.transformRpx(e.value,!0);else if("string"==typeof e)return wx.transformRpx(e,!0);return e})),e),pa=(e,t,r)=>{wx.nextTick((()=>{var{nodeId:n,webviewId:o,options:i,selector:a,reqId:s,hasCallback:c,type:u,isLastAnimation:l,fromWxs:f}=e,p=Yi(n,o);if(p){var d=p.shadowRoot,h=t||d.querySelectorAll(a);if(t){if(h.__animateStatus===aa||h.__animateStatus===sa&&!r)return h.__animationPendingQueue||(h.__animationPendingQueue=[]),void h.__animationPendingQueue.push(JSON.parse(JSON.stringify(e)));h.__hasCallback=c,h.__reqId=s,h.__args=JSON.stringify(e);var _=["height","left","matrix","matrix3d","opacity","right","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","top","translate","translate3d","translateX","translateY","translateZ","width","backgroundColor","bottom"],m=["opacity","backgroundColor","width","height","left","top","bottom"],v=["rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skewX","skewY","translateX","translateY","translateZ"],y="animeJS"===u,g=(r,n=!0)=>{if(h.__animateStatus===aa){if(--na[h.__reqId],h.__animationPendingQueue&&h.__animationPendingQueue.length>0&&!h.__hasCallback?(h.__animateStatus=sa,pa(h.__animationPendingQueue.shift(),h,!0)):h.__animateStatus=ia,"function"==typeof r)h.__styleObj.transition="unset",h.__styleObj.transitionProperty="unset",h.__styleObj["-webkit-transition"]="unset",h.__styleObj["-webkit-transition-property"]="unset",r(ca(h.__styleObj));if(0===na[h.__reqId]&&h.__hasCallback&&n){var o=Wa.getByNode(t);if(f){var i=o.applyAnimationCbMap[h.__reqId];"function"==typeof i&&(delete o.applyAnimationCbMap[h.__reqId],ra.safeCallback("Animation",i,null,[])),la(e)}else Q(b.ANIMATION_TRANSITION_END,{reqId:h.__reqId,args:h.__args},o.viewId)}}},w=[];for(var x of Object.keys(i))_.indexOf(x)>=0&&(m.indexOf(x)>=0?w.push({type:"style",args:["backgroundColor"===x?"background-color":x,i[x]]}):v.indexOf(x)>=0?w.push({type:x,args:[i[x]]}):w.push({type:x,args:i[x]}));var S={transition:{delay:i.delay||0,duration:i.duration||0,timingFunction:i.ease||"linear"},transformOrigin:i.transformOrigin||"50% 50% 0"},T={option:S,animates:w},{transition:C,transitionProperty:A,transform:O,transformOrigin:M,style:R}=wx.animationToStyle(T),P=h.__styleObj?Object.assign({},h.__styleObj,{transition:C,transform:O,transitionProperty:A,transformOrigin:M}):{transition:C,transform:O,transitionProperty:A,transformOrigin:M};for(var I of(P["-webkit-transition"]=P.transition,P["-webkit-transform"]=P.transform,P["-webkit-transition-property"]=P.transitionProperty,P["-webkit-transform-origin"]=P.transformOrigin,Object.keys(R||{})))P[I]=R[I];if(h.__styleObj&&P.transform===h.__styleObj.transform){var N=!0;for(var D of Object.keys(P))m.indexOf(D)>=0&&h.__styleObj[D]!==P[D]&&(N=!1);if(N)return void setTimeout((()=>{h.__animationPendingQueue&&h.__animationPendingQueue.length>0&&pa(h.__animationPendingQueue.shift(),h,!0)}),S.duration)}if(0===S.transition.duration?(P.transition="unset",P.transitionProperty="unset",P["-webkit-transition"]="unset",P["-webkit-transition-property"]="unset"):h.__animateStatus=aa,h.__styleObj=P,y){i.targets=h,i.ease&&(i.easing=i.ease,delete i.ease),(e=>{Object.keys(e).forEach((t=>{ir.includes(t)&&(e[t]=fa(e[t]))}))})(i),h.__animateStatus=aa,h.__banned&&Me(h);var L=i.complete;i.complete=(...e)=>{g(void 0,l),"function"==typeof L&&L(...e)};var F=or(i);h.__animeOptions||(h.__animeOptions=[]),h.__animeOptions.push(F)}else{var k=ca(P),B=e=>{var t=()=>{h.setNodeStyle(wx.transformRpx(e,!0),E)};t(),Ee(h,E,t)};0===S.transition.duration?B(k):setTimeout((()=>{B(k)}),32),h.__banned&&Me(h),h.__animationListener||(h.addListener("transitionend",(()=>{g(B)})),h.__animationListener=!0),0===S.transition.duration&&(h.__animationPendingQueue&&h.__animationPendingQueue.length>0?(h.__animateStatus=sa,pa(h.__animationPendingQueue.shift(),h,!0)):h.__animateStatus=ia)}}else{na[s]=h.length;for(var j=0;j<h.length;++j)pa(JSON.parse(JSON.stringify(e)),h[j])}}}))},da=(e,t,r)=>{var n=e.$$,o={},i=null,s=new Set,c=e=>{s.add(e),e((()=>{s.delete(e),0===s.size&&"function"==typeof i&&i(o)}))};if(t.id&&(o.id=e.id||""),t.dataset&&(o.dataset=e.dataset||{}),t.mark&&(o.mark=e.collectMarks()||{}),(t.rect||t.size)&&c((e=>{((e,t)=>{"webview"===a()?t(e.getBoundingClientRect()):e.getBoundingClientRect((e=>{t(e)}))})(n,(r=>{t.rect&&(o.left=r.left,o.right=r.right,o.top=r.top,o.bottom=r.bottom),t.size&&(o.width=r.width,o.height=r.height),e()}))})),t.properties&&t.properties.forEach((t=>{var r=t.replace(/-([a-z])/g,((e,t)=>t.toUpperCase()));ra.Component.hasPublicProperty(e,r)&&(o[r]=e[r])})),t.scrollOffset)if("function"==typeof e.hasBehavior&&e.hasBehavior("wx-positioning-container")){var u=e.getScrollPosition();o.scrollLeft=u.scrollLeft,o.scrollTop=u.scrollTop,o.scrollWidth=u.scrollWidth,o.scrollHeight=u.scrollHeight}else o.scrollLeft=0,o.scrollTop=0,o.scrollWidth=0,o.scrollHeight=0;if(t.computedStyle&&t.computedStyle.length){var l="webview"!==a()?e.__backendContext:null;c((e=>{((e,t,r)=>{"webview"===a()?r(window.getComputedStyle(t)):"function"==typeof(null==e?void 0:e.getComputedStyle)?e.getComputedStyle(t,(e=>{r(e||{})})):r({})})(l,n,(r=>{for(var n=0,i=t.computedStyle.length;n<i;n++){var a=t.computedStyle[n];a&&void 0!==r[a]&&(o[a]=r[a])}e()}))}))}if(t.context&&(o.contextIs=e.is,o.contextId="function"==typeof e.getContextId&&e.getContextId(),o.contextCanvasId=e.canvasId||"","xr-frame"===a()&&(o.__context=n.__xrElement)),t.node&&(o.nodeIs=e.is,o.nodeId="function"==typeof e.getContextId&&e.getContextId(),o.nodeCanvasId=e.canvasId||"",o.nodeCanvasType=e.type||"",o.nodeNodeId=e.getNodeId()),0!==s.size){if("function"!=typeof r)throw new Error("Framework Error: getNetInfo called asynchronously without a callback");i=r}else{if("function"!=typeof r)return o;r(o)}},ha=(e,t)=>"webview"===a()?da(e,t):new Promise((r=>{da(e,t,(e=>{r(e)}))})),_a=function(){var e=g()((function*(e,t){var r=[],{pluginId:n,queue:o}=e;return o.forEach((e=>{var o=e.component,i=e.selector,s=e.single,c=e.fields,u=null;if(0===o)u=((e,t)=>{var r={},n=e=>"webview"===a()?document.documentElement[e]||document.body[e]:t.root.getBackendContext()[e];return e.id&&(r.id=""),e.dataset&&(r.dataset={}),e.mark&&(r.mark={}),e.rect&&(r.left=0,r.right=0,r.top=0,r.bottom=0),e.size&&(r.width=n("clientWidth"),r.height=n("clientHeight")),e.scrollOffset&&(r.scrollLeft=n("scrollLeft"),r.scrollTop=n("scrollTop"),r.scrollWidth=n("scrollWidth"),r.scrollHeight=n("scrollHeight")),r})(c,t);else{var l=t.nodeId.getNodeById(o),f=!1;if(l?(ra.Component.getComponentOptions(l).writeOnly&&(f=!0),l=l.shadowRoot):n||(l=window.__DOMTree__?window.__DOMTree__.shadowRoot:null),s){var p=l&&!f?l.querySelector(i):null;u=p?ha(p,c):null}else{var d=l&&!f?l.querySelectorAll(i):[];u=[];for(var h=0;h<d.length;h++)u.push(ha(d[h],c));u=Promise.all(u)}}r.push(u)})),Promise.all(r)}));return function(t,r){return e.apply(this,arguments)}}(),ma=o(),va={},ya={},ga={},ba=function(){var e=g()((function*(e){return yield new Promise((t=>{"webview"===a()?t(e.$$.getBoundingClientRect()):e.$$.getBoundingClientRect((e=>t(e)))}))}));return function(t){return e.apply(this,arguments)}}(),wa=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),xa=(e,t)=>{var r={left:e.left<t.left?t.left:e.left,top:e.top<t.top?t.top:e.top,right:e.right>t.right?t.right:e.right,bottom:e.bottom>t.bottom?t.bottom:e.bottom,width:0,height:0};return r.right>r.left?r.width=r.right-r.left:r.right=r.left=r.bottom=r.top=0,r.bottom>r.top?r.height=r.bottom-r.top:r.right=r.left=r.bottom=r.top=0,r},Sa=function(){var e=g()((function*(e){for(var t="webview"===a()?document.documentElement.clientWidth:__wxConfig.screenWidth||500,r="webview"===a()?document.documentElement.clientHeight:__wxConfig.screenHeight||1e3,n=null,o=0;o<e.length;o++){var{node:i,margins:s}=e[o],c=i?yield ba(i):{left:0,top:0,right:t,bottom:r,width:t,height:r},u={left:c.left-s.left,top:c.top-s.top,right:c.right+s.right,bottom:c.bottom+s.bottom};n=n?xa(n,u):u}return n}));return function(t){return e.apply(this,arguments)}}(),Ea=function(){var e=g()((function*(e){var{targetNode:t,relatives:r,thresholds:n,minWidthOrHeight:o,cb:i,currentRatio:a}=e,s=yield Sa(r),c=wa(yield ba(t));c.right-c.left<o&&(c.right=c.left+o,c.width=o),c.bottom-c.top<o&&(c.bottom=c.top+o,c.height=o);var u=xa(s,c),l=c.width*c.height,f=l?u.width*u.height/l:0;e.currentRatio=f;var p=void 0===a;f!==a&&n.forEach((e=>{if(p)return!1;(f<=e&&a>=e||f>=e&&a<=e)&&(p=!0)})),p&&i.call(t,{id:t.id,dataset:t.dataset,time:Date.now(),boundingClientRect:c,intersectionRatio:f,intersectionRect:wa(u),relativeRect:s})}));return function(t){return e.apply(this,arguments)}}(),Ta=function(){var e=g()((function*(){for(var e of Object.keys(va))va[e]&&(yield Ea(va[e]))}));return function(){return e.apply(this,arguments)}}(),Ca=e=>({left:(e=e||{}).left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}),Aa=(e,t,r,n,o,i)=>{var s=f();if(!e.length||!t.length)return s;var c=e.length;return ga[s]=c,e.forEach(((e,u)=>{var l=s+"#"+u,f={targetNode:e,relatives:t,thresholds:r,currentRatio:n,minWidthOrHeight:o,cb:i};if("webview"===a()){var p=ma.Observer.create((e=>{"attached"===e.status?(va[l]=f,requestAnimationFrame((()=>{Ea(f)}))):"detached"===e.status&&(delete va[l],p.disconnect(),delete ya[l],--c||delete ga[s])}));ya[l]=p,p.observe(e,{attachStatus:!0}),ma.Element.isAttached(e)&&(va[l]=f,requestAnimationFrame((()=>{Ea(f)})))}else if("skyline"===a()){var d=new __skylineEngine__.RuntimeCore.intersectionObserver(function(){var e=g()((function*(e){var{targetNode:t}=f,r=yield Sa(f.relatives);i({id:t.id,dataset:t.dataset,time:Date.now(),boundingClientRect:e[0].boundingClientRect,intersectionRatio:e[0].intersectionRatio,intersectionRect:wa(e[0].intersectionRect),relativeRect:r})}));return function(t){return e.apply(this,arguments)}}(),{rootMargin:f.relatives,thresholds:f.thresholds});ya[l]=d,d.observe(e.$$)}})),s},Oa=(e,t,r,n,o)=>{var i=null;if((n=n||{}).observeAll)i=e.querySelectorAll(t);else{var a=e.querySelector(t);i=a?[a]:[]}i.length||console.warn('For developer:Node "'+t+'" is not found. Intersection observer will not trigger.');var s=[];return r.forEach((t=>{var{selector:r,margins:n}=t,o=null==r?null:e.querySelector(r);o||null==r?s.push({node:o,margins:Ca(n)}):console.warn('For developer:Node "'+r+'" is not found. The relative node for intersection observer will be ignored.')})),s.length||console.warn("For developer:Intersection observer will be ignored because no relative nodes are found."),Aa(i,s,n.thresholds||[0],n.initialRatio||0,n.minWidthOrHeight||0,o)},Ma=e=>{var t=ga[e];delete ga[e];for(var r=0;r<t;r++){var n=e+"#"+r,o=ya[n];if(!o)break;delete va[n],o.disconnect(),delete ya[n]}},Ra=!1,Pa=()=>{Ra||(Ra=!0,requestAnimationFrame((()=>{Ra=!1,Ta()})))};void 0!==window&&"undefined"!=typeof document&&"function"==typeof document.addEventListener&&"webview"===a()&&(wx.onPageReRender((()=>{Pa()})),window.addEventListener("scroll",(()=>{Pa()}),{capture:!0,passive:!0}));var Ia=1,Na={},Da=(e,t)=>{var r=(e=>{if("object"!=typeof e)return"";var t="";return["minWidth","maxWidth","width","minHeight","maxHeight","height"].forEach((r=>{if(void 0!==e[r]){var n=Number(e[r]);n>=0||(n="");var o=r.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()));t&&(t+=" and "),t+=`(${o}: ${n}px)`}})),["orientation"].forEach((r=>{if(void 0!==e[r]){var n=/^[-_a-z0-9]+$/i.test(e[r])?e[r]:"",o=r.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()));t&&(t+=" and "),t+=`(${o}: ${n})`}})),t})(e),n=window.matchMedia(r),o=Ia++,i=e=>{t({matches:e.matches})};return Na[o]={observer:n,listener:i},n.addListener(i),t({matches:n.matches}),o},La=e=>{var{observer:t,listener:r}=Na[e];t.removeListener(r),delete Na[e]};function Fa(e){var{hasCallback:t,reqId:r,nodeId:n,pageId:o,selector:a,updaterId:s,userConfig:c}=e[0],u=Wa.get(o),l=u.nodeId.getNodeById(n);if(l){var f=i(),p=f.proxyCreateAnimatedStyle(o,s,c),{mapperId:d}=p,h=l.shadowRoot.querySelectorAll(a),_=0;h.forEach((e=>{e.__virtual?wxNativeConsole.warn("[WABaseLib.Critical] applyAnimatedStyle can not be used on virtual component"):(e.$$.addAnimatedStyle(p),_++)})),0===_&&(f.proxyStopMapper(o,d),wxNativeConsole.info(`[WABaseLib.Critical] applyAnimatedStyle can not find valid element, stopMapper(${d})`)),t&&Q(b.APPLY_NODE_ANIMATED_STYLE_END,{reqId:r,styleId:d},u.viewId)}}var ka=o();class Ba{constructor(e,t,r){this._treeManager=e,this._arr=t,this._depth=0,this._startCb=r}_consumeHead(){return this._arr.shift()}nextStepType(){return this._arr[0][0]}nextStep(){for(;this._arr[0][0]===b.FLOW_DEPTH;)this._startCb(this._treeManager);if(this._arr[0][0]===b.FLOW_REPEAT){var e=this._arr[0][2];return--this._arr[0][1]||this._consumeHead(),[e]}return this._consumeHead()}nextStepIf(e){for(;this._arr[0][0]===b.FLOW_DEPTH;)this._startCb(this._treeManager);return this._arr[0][0]===e?this._consumeHead():null}expectStart(){var e=this._consumeHead();if(this._depth++,e[0]!==b.FLOW_DEPTH||e[1]!==this._depth)throw new Error(`Framework inner error (expect START descriptor with depth ${this._depth} but get ${x(e[0])})`);return e[2]}expectEnd(){for(;this._arr[0][0]===b.FLOW_DEPTH&&this._arr[0][1]!==this._depth-1;)this._startCb(this._treeManager);var e=this._consumeHead();if(this._depth--,e[0]!==b.FLOW_DEPTH||e[1]!==this._depth)throw new Error(`Framework inner error (expect END descriptor with depth ${this._depth} but get ${x(e[0])})`)}skipToEnd(){for(;this._arr[0];)if(this._arr[0][0]!==b.FLOW_DEPTH)this._consumeHead();else{if(this._arr[0][1]===this._depth-1)break;this._startCb(this._treeManager)}}getQueueLength(){return this._arr.length}getDepth(){return this._depth}}class ja{constructor(e,t){var r=this;this._viewId=e,this._treeManager=t,this._depth=0,this._curWinSize=0,this._setDataCallbackInc=1,this._pendingSetDataCallbacks=[],this._setDataCallbackMap={},this._received=[],this._cache=[],this._blocked=[],this._isBlocked=!0,this._fetchingViewInfoCallbacks=[];var n=(e,t)=>{if(this._received.push([t].concat(e)),t===b.FLOW_DEPTH&&(this._depth=e[0],0===this._depth)){var r=this._received;this._received=[],this._isBlocked?this._blocked.push(r):(this.iterator=new Ba(this._treeManager,r,ja._startCb),ja._startCb(this._treeManager),this.onFinished())}},o=function(){if("FLOW_"!==i.slice(0,5))return"continue";if("FLOW_SET_DATA"===i)ne(b[i],(([e])=>{r._pendingSetDataCallbacks.push(e)}),e);else if("FLOW_VIEW_INFO"===i){var t=function(){var e=g()((function*([e,t,n]){var o=null;"selectorQuery"===e?o=yield _a(t,r._treeManager):"intersection"===e?o=((e,t,r)=>{if("addIntersectionObserver"===e.type){var n=null;if(e.nodeId){var o=t.nodeId.getNodeById(e.nodeId);if(!o)return;n=o.shadowRoot}else e.pluginId||(n=window.__DOMTree__.shadowRoot);if(!n)return;return{observerId:Oa(n,e.targetSelector,e.relativeInfo,e.options,(e=>{r({info:e})}))}}if("removeIntersectionObserver"===e.type){var i=e.observerId;return Ma(i),{reqEnd:!0}}})(t,r._treeManager,(e=>{Q(b.RESPONSE_VIEW_INFO,[e,n],r._viewId)})):"matchMedia"===e&&(o=((e,t)=>{if("addMediaQueryObserver"===e.type)return{observerId:Da(e.mediaQueryCond,(e=>{t({info:e})}))};if("removeMediaQueryObserver"===e.type){var r=e.observerId;return La(r),{reqEnd:!0}}})(t,(e=>{Q(b.RESPONSE_VIEW_INFO,[e,n],r._viewId)}))),o&&Q(b.RESPONSE_VIEW_INFO,[o,n],r._viewId)}));return function(t){return e.apply(this,arguments)}}();ne(b[i],(e=>{r._received.length||r._isBlocked?r._fetchingViewInfoCallbacks.push(t.bind(r,e)):t(e)}),e)}else ne(b[i],"FLOW_SET_NODE_ANIMATION_INFO"===i?e=>{"scrollTimeline"===e[0].type?"webview"===a()?(({nodeId:e,selector:t,options:r,duration:n,timeline:o},i)=>{for(var a=i.nodeId.getNodeById(e),s=(a=a?a.shadowRoot:window.__DOMTree__?window.__DOMTree__.shadowRoot:null)?a.querySelectorAll(t):[],c=0;c<s.length;c++)mr(a,s[c],r,{duration:n},o)})(e[0],r._treeManager):"skyline"===a()&&console.warn("component rendered with skyline does not support timeline animation, 'animate' call will be ignored."):pa(e[0])}:"FLOW_CLEAR_NODE_ANIMATION_INFO"===i?e=>{ua(e[0])}:"FLOW_SET_NODE_ANIMATED_STYLE"===i?e=>{r._received.length||r._isBlocked?r._fetchingViewInfoCallbacks.push(Fa.bind(null,e)):Fa(e)}:"FLOW_CLEAR_NODE_ANIMATED_STYLE"===i?e=>{!function(e){var{hasCallback:t,reqId:r,nodeId:n,pageId:o,selector:i,styleIds:a}=e[0],s=Wa.get(o),c=s.nodeId.getNodeById(n);c&&(c.shadowRoot.querySelectorAll(i).forEach((e=>{if(e.__virtual)wxNativeConsole.warn("[WABaseLib.Critical] clearAnimatedStyle can not be used on virtual component");else{var t=Array.isArray(a)?a:[a];"function"==typeof e.$$.clearAnimatedStyle&&e.$$.clearAnimatedStyle(t)}})),t&&Q(b.CLEAR_NODE_ANIMATED_STYLE_END,{reqId:r},s.viewId))}(e)}:"FLOW_SET_NODE_NEXT_ANIMATION_INFO"===i?e=>{la(e[0])}:n,e)};for(var i of Object.keys(b))o();ne(b.SET_DATA_CALLBACK,(([e])=>{this.triggerSetDataCallbacks(e)}),e)}flushBlocked(){for(;this._blocked.length&&!this._isBlocked;)try{var e=this._blocked.shift();this.iterator=new Ba(this._treeManager,e,ja._startCb),ja._startCb(this._treeManager),this.onFinished()}catch(e){console.error(e.message),Reporter.errorReport({key:"webviewScriptError",error:e})}}unblock(){this._isBlocked=!1,this.flushBlocked()}block(){this._isBlocked||(this._isBlocked=!0)}sendInIndividualFlow(e){this.start(Date.now()),this.push(e),this.end()}start(){this.flush(),this._depth++,Q(b.FLOW_DEPTH,[this._depth,Date.now()],this._viewId)}dedupe(){var e=this._cache;if(this._curWinSize){if(2===e.length){var t=e[1][2];if(e[0][0]!==t){var r=e.pop(),n=r.shift();Q(n,r,this._viewId)}else e.shift(),e[0][1]++}}else{var o=0;if(e.length>2&&e[0][0]===e[1][0]&&e[0][0]===e[2][0]&&e[0][0]!==b.FLOW_SET_DATA&&e[0][0]!==b.FLOW_VIEW_INFO&&(o=1),o){var i=e[0][0];e.splice(0,3),this.flush(),this._curWinSize=1,e.unshift([b.FLOW_REPEAT,3,i])}else if(e.length>3){var a=e.pop(),s=a.shift();Q(s,a,this._viewId)}}}push(e){this._cache.unshift(e),1!==e.length?this.flush():this.dedupe()}flush(){for(this._curWinSize=0;this._cache.length;){var e=this._cache.pop(),t=e.shift();Q(t,e,this._viewId)}}end(){this.flush(),this._depth--,Q(b.FLOW_DEPTH,this._depth,this._viewId),0===this._depth&&J()}checkDelayFetchingViewInfo(){if(this._fetchingViewInfoCallbacks.length){var e=this._fetchingViewInfoCallbacks;this._fetchingViewInfoCallbacks=[],e.forEach((e=>e()))}}registerSetDataCallback(e,t,r){var n=this._setDataCallbackInc++;this._setDataCallbackMap[n]=[e,t,r],this.push([b.FLOW_SET_DATA,n])}triggerSetDataCallbacks(e){for(var t=0;t<e.length;t++){var r=e[t];if(this._setDataCallbackMap[r]){var[n,o,i]=this._setDataCallbackMap[r];delete this._setDataCallbackMap[r],ka.safeCallback("SetData Callback",n,o,[],i)}else wxNativeConsole.error("setDataCallback error")}}onFinished(){if(wx.triggerPageReRender(),"skyline"===a()){var e=i();this._viewId===C?this._treeManager.__attached?e.getTabBarContext().startRender((()=>{wxNativeConsole.info("[Skyline.Critical] tabbar startRender callback, doing nothing.")})):wxNativeConsole.error("[OperationFlow] [Skyline.Critical] tabBar startRender ignored, because root element is not attached (may be due to some unexpected error). pageId="+this._viewId):!0!==this._treeManager.__attached?wxNativeConsole.error("[OperationFlow] [Skyline.Critical] startRender ignored, because root element is not attached (may be due to some unexpected error). pageId="+this._viewId):e.getContext(this._viewId).startRender((()=>{wxNativeConsole.info("[Skyline.Critical] page startRender callback, doing nothing. pageId="+this._viewId)}))}this._blocked.length||(Q(b.SET_DATA_CALLBACK,[this._pendingSetDataCallbacks],this._viewId,!0),this._pendingSetDataCallbacks=[],this.checkDelayFetchingViewInfo())}static setStartOperation(e){ja._startCb=e}}var Ua=ja,Ga=Object.create(null);class Va{constructor(e){this.viewId=e,this.listenerInited=!1,this.root=null,this.tabRoot=null,this.tabDestroyed=!1,this.usedDef=null,this.tabUsedDef=null,this.statesData=null,this.operationFlow=new Ua(e,this),this.nodeId=new v,this.compManager=new co(e,this),this.rootNodeId="",this.tabNodeId="",this.rootCompName="",this.tabCompName="",this.applyAnimationCbMap={},this.clearAnimationCbMap={},this.animatedStyleCbMap={},this.viewInfoCbMap={},this.initialRootData=null,this.lifetimeListener=null}static create(e){var t=new Va(e);return Ga[e]=t,t}static destroy(e){delete Ga[e]}static get(e){return Ga[e]}static listViewId(){var e=[];for(var t of Object.keys(Ga))e.push(Ga[t].viewId);return e}static list(){var e=[];for(var t of Object.keys(Ga))e.push(Ga[t]);return e}static getByNode(e){return"webview"===a()?Va.get(0):"scl"===a()?Va.get(A):Va.get(e.__backendContext.id)}}var Wa=Va,za=function(){ln=!0},Ha=[],Xa=function(e,t){var r=un[e];if(r)return fn[e]=t,__wxAppCode__[e]=t,r(t);Ha&&Ha.push({path:e,data:t})},Ka={},$a="contextReady";ne(b.XR_FRAME_CANVAS_READY,((e,t,r)=>{wxNativeConsole.info(`[xrFrameCreated] get canvasContext ${r}`),xrFrame.getOrCreateContext(r,e[0],e[1]).id=r,qa(r).notify($a)}),"$GLOBAL");var qa=e=>(void 0===Ka[e]&&(Ka[e]=_([$a])),Ka[e]),Ya=o(),Za=(e,t)=>{if(e instanceof Ya.Element){void 0!==e.__wxScopeData__&&(t=e.__wxScopeData__),void 0!==t&&e instanceof Ya.Component&&e.setAttribute("wx:scope-data",JSON.stringify(t));var r=!1;e instanceof Ya.Component&&!(e.shadowRoot instanceof Ya.Element)&&(r=!0);for(var n=r?e.childNodes:e.__wxSlotChildren,o=e instanceof Ya.VirtualNode?t:void 0,i=0;i<n.length;i++){var a=n[i];Za(a,o)}}},Ja=()=>{Za(window.__DOMTree__,void 0)},Qa=o();"undefined"!=typeof navigator&&/wechatdevtools/.test(navigator.userAgent)&&(U=!0),G()&&(Qa.globalOptions.writeExtraInfoToAttr=!0),Ua.setStartOperation(gi),wx.onWindowResize((({size:e})=>{var t={width:e.windowWidth,height:e.windowHeight};if(window.__rpxRecalculatingFuncs__&&(window.__rpxRecalculatingFuncs__.forEach((e=>{e(t)})),"webview"===a()))for(var r=document.getElementsByTagName("style"),n=0;n<r.length;n++)"string"==typeof r[n].getAttribute("wxss:path")&&(r[n].innerHTML=r[n].innerHTML+".wx-trigger-chrome-media-query-update { height: "+Math.random()+"px; }");for(var o of Object.keys(xe))xe[o].__resizers.forEach((e=>{e&&e(t)}))})),ne(b.BANNING_MAP,(([e])=>{(e=>{if(!Ae){Ae=e;var t=e=>{if(e instanceof Ce.Component){var r=Ce.Component.getComponentOptions(e).domain;if("//"!==r){var n=r.split("/",1)[0],o=e.shadowRoot;Ae[n]?Pe(o,Ae[n]):t(o)}}e instanceof Ce.Element&&e.childNodes.forEach((e=>{t(e)}))};t(window.__DOMTree__)}})(e)}));var es=!0,ts=e=>e,rs=e=>void 0!==Wa.get(e),ns=()=>Be,os=(e,t)=>{var r;"webview"===a()&&wx._checkDeviceWidth(!0),(e=>{Li[e]=!0,"webview"===a()&&Wi(e),Fi[e].forEach((t=>{Ni(t,!1,e)})),Fi[e]=[],ki[e].forEach((t=>{xi[e].on("inject",(()=>{Ni(t,!0,e)}))})),ki[e]=[]})(e),r=Ha,Ha=[],r.forEach((({path:e,data:t})=>Xa(e,t)));var n=Wa.get(e);(e=>{var t=__wxConfig.benchmarkLevel||24;"skyline"===a()&&t>=23&&(wxNativeConsole.info(`[startInitRender] [skyline] benchmarkLevel(${t}) >= 23, calling initReady before unblocking operation flow`),e())})(t),n.operationFlow.unblock()},is=(e,t)=>{"skyline"===a()?(i().onPageReady(e,t),wxNativeConsole.info("[WABaseLib.Critical] skyline context ok, pageId=",e)):"xr-frame"===a()?(wxNativeConsole.info("[prepareInitRender] waiting for xrFrameContext, xrFrameId=",e),((e,t)=>{var r=()=>{wxNativeConsole.info("[xrFrameContextReady] emit context ready "+e),t()},n=qa(e);n.isNotified($a)?r():n.on($a,r)})(e,t),wxNativeConsole.info("[prepareInitRender] xrFrameContext ok, xrFrameId=",e)):"webview"===a()&&t()};__virtualDOM__=t})(),(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};e.r(t),e.d(t,{addStyleSheetIndexGroup:()=>d,getAllPageIds:()=>N,getRandomPageId:()=>I,getStyleSheetManager:()=>_,getStyleSheetScope:()=>M,invalidateAllPreCompiled:()=>R,removeStyleSheetManager:()=>m,setGlobalStyle:()=>o});var r={delayedGwx:!1,genObject:!1,globalThis:globalThis,noCss:!0},n={};function o(e,t){n[e]=t}function i(e){if(e.startsWith("wxlibfile://")){var t=e.slice(12);return __subContextEngine__.loadLibFiles([t+".css.js"]),n[t]||""}var r=`./${e}.wxss`;return window.fakeStyleTags.filter((e=>e.path===r)).map((e=>e.styleSheet.cssText||"")).join("")}class a{static version(){return 3}constructor(e){this.styleSheets=void 0,this.styleSheetIndexes=void 0,this.isBackendContextReady=void 0,this.backendContext=void 0,this.supportAppendStyleSheets=!1,this.updateLock=void 0,this.pageId=void 0,this.styleSheets=new Map,this.styleSheetIndexes=new Map,this.isBackendContextReady=!1,this.updateLock=!1,this.pageId=e}get usePreCompiled(){return a.usePreCompiled}warn(...e){wxNativeConsole.warn(`[StyleSheetManager] [pageId=${this.pageId}]`,...e)}registerBackendContext(e){this.backendContext=e,this.isBackendContextReady=!0,this.supportAppendStyleSheets="function"==typeof e.appendStyleSheets,this.supportAppendStyleSheets||wxNativeConsole.warn("[SkylineStyle] backend do not support appendStyleSheets"),this.createIndexGroup(),this.requestUpdate()}static addIndexGroup(e){a.indexGroups.find((t=>t.prefix===e))||a.indexGroups.push({prefix:e})}static matchIndexGroup(e){for(var t=0;t<a.indexGroups.length;++t)if(e.startsWith(a.indexGroups[t].prefix))return a.indexGroups[t];return a.indexGroups[0]}createIndexGroup(){a.indexGroups.sort(((e,t)=>t.prefix.length-e.prefix.length)),a.indexGroups.forEach((e=>{void 0===e.id&&(e.id=this.backendContext.createStyleSheetIndexGroup())}))}setStyleSheet(e,t=0,r=0){a.usePreCompiled?this.setPreCompiled(e,t,r):this.setPlain(e,t,r)}setPlain(e,t=0,r=0){if(!this.styleSheets.has(e)){var n={injected:!1,preCompiled:!1,styleScope:t,path:e,content:i(e),enabled:!0,priority:r,index:this.styleSheets.size};this.styleSheets.set(e,n),this.requestUpdate()}}setPreCompiled(e,t=0,r=0){if(!this.styleSheets.has(e)&&a.usePreCompiled){var n={injected:!1,preCompiled:!0,styleScope:t,path:e,enabled:!0,priority:r,index:this.styleSheets.size};this.styleSheets.set(e,n),this.requestUpdate()}}getStyleSheet(e){return this.styleSheets.get(e)}disableStyleSheet(e){this.styleSheets.has(e)&&(this.styleSheets.get(e).enabled=!1,this.requestUpdate())}setIndex(e){this.styleSheetIndexes.has(e)||(this.styleSheetIndexes.set(e,{injected:!1,path:e}),this.requestUpdate())}preventUpdate(){this.updateLock=!0}allowUpdate(){this.updateLock=!1}requestUpdate(){if(this.isBackendContextReady&&!this.updateLock){this.styleSheetIndexes.forEach((e=>{if(!e.injected){var t=a.matchIndexGroup(e.path);this.backendContext.appendStyleSheetIndex(e.path,t.id),e.injected=!0}}));var e=Array.from(this.styleSheets.values()).sort(a.styleSheetComparator);e.some((e=>e.injected&&!e.enabled))&&(this.backendContext.clearStylesheets(),this.styleSheets.forEach((e=>{e.injected=!1})));var t=[],r=[];if(e.forEach((e=>{if(!e.injected&&e.enabled){e.injected=!0;var n=e.path,o=a.matchIndexGroup(n);e.preCompiled?t.push({groupId:o.id,path:n.slice(o.prefix.length),prefix:o.prefix,scopeId:e.styleScope}):r.push({content:e.content||"",scopeId:e.styleScope})}})),!t.some((e=>1===e.scopeId))){t.push({groupId:a.matchIndexGroup("").id,path:"__EMPTY__",prefix:"",scopeId:1})}0!==t.length&&a.usePreCompiled&&this.backendContext.appendCompiledStyleSheets(t),0!==r.length&&this.supportAppendStyleSheets&&this.backendContext.appendStyleSheets(r)}}invalidatePreCompiled(){this.isBackendContextReady?(this.backendContext.clearStylesheets(),this.styleSheets.forEach((e=>{e.preCompiled&&(e.injected=!1)})),this.requestUpdate(),this.backendContext.recalcStyle()):this.warn("requested invalidatePreCompiled but backend context is not ready, ignoring")}}a.usePreCompiled=!0,a.indexGroups=[],a.styleSheetComparator=(e,t)=>e.priority!==t.priority?-(e.priority-t.priority):e.index-t.index;var s=a,c="wxlibfile://WAStyleIndex.fpiib",u="wxlibfile://WASkylineStyle",l="wxlibfile://WASkylineStyleDark",f="wxlibfile://WASkylineStyleV2",p="wxlibfile://WASkylineStyleV2Dark",d=s.addIndexGroup,h=new Map,_=e=>(h.has(e)||h.set(e,new s(e)),h.get(e)),m=e=>h.delete(e),v=(e,t)=>{var r=_(e);r.setIndex(c),r.setStyleSheet(u,0,3),void 0!==__wxConfig.theme&&r.setStyleSheet(l,0,3),__virtualDOM__.prepareSubPackagesStyle(e,t)},y="clicfg_appbrand_skyline_text_style";__wxConfig.onReady((()=>{var e,t,r,n=null!==(e=null===(t=__wxConfig)||void 0===t||null===(r=t.expt)||void 0===r?void 0:r[y])&&void 0!==e?e:"0";wxNativeConsole.info(`[SkylineStyle] ${y}=${n}`),"1"===n&&(wxNativeConsole.info("[SkylineStyle] fallback to text style"),window.__vd_version_info__.noCss=!1,s.usePreCompiled=!1)}));var g=globalThis;function b(e,t=!1){g.Reporter.errorReport({key:"webviewScriptError",error:e,isUnhandledRejection:t})}var w=(()=>(g.__wxConfig.onReady((()=>{w!==g.__wxConfig&&void 0!==w&&Object.assign(w,g.__wxConfig)})),g.__wxConfig))(),x=(()=>g.__virtualDOM__)();function S(e){return function(...t){try{return e(...t)}catch(e){console.error((null==e?void 0:e.stack)||""),function(e){g.Reporter.errorReport({key:"exparserScriptError",error:e})}(e)}}}(void 0!==xrFrame?xrFrame.getExparser():__skylineEngine__.getRuntime().getExparser()).addGlobalErrorListener((e=>{b(e)}));var E;!function(e){e.auto="auto",e.manual="manual",e.static="static"}(E||(E={}));var T=e=>{var t,r,n,o,i,a,s,c,u=null!==(t=E[e])&&void 0!==t?t:E.static;return wxNativeConsole.info("[Webview Preload] type="+u),u===E.auto&&(r=()=>{wxNativeConsole.info("[Webview Preload] request preload at "+Date.now()),wx.preloadWebview({permissionBytes:[1,1,1],complete(e){wxNativeConsole.info("[Webview Preload] preload res: "+JSON.stringify(e))}})},o=[],i=0,a=0,s=0,c=e=>{if(++s,void 0!==n){var t=e-n;o.push(t),i+=t,a+=t*t}if(n=e,o.length>30){var u=o.shift();i-=u,a-=u*u}var l=i/o.length,f=Math.sqrt(Math.abs(a/o.length-l*l));30===o.length&&l<40&&f/l<.15?(wxNativeConsole.info("[Webview Preload] idle at loop "+s),r()):window.requestAnimationFrame(c)},window.requestAnimationFrame(c)),u!==E.static};function C(e){e!==wx.version.version&&g.Reporter.reportIDKey({key:"clientLibVersionNotMatch"})}class A{constructor(e){this.pageId=e,this.setDataQueue=[],this.funcReady=!1,this.dataReady=!1,this.firstRender=!1,this.initRenderingCache=!1,this.tracer=wx,this.isPageReload=!1,this.ignoreWebviewPreload=!1}setGenFuncReady(){this.funcReady=!0,this.dataReady&&this.setDataQueue.forEach((e=>{this.renderPage(e)}))}setDataReady(e){x.prepareInitRender(this.pageId,(()=>{this.dataReady=!0,this.funcReady?this.renderPage(e):this.setDataQueue.push(e)}))}setRenderingCache(e){this.initRenderingCache=e}renderPage(e){var t,r,n,o;null!==(t=e.options)&&void 0!==t&&t.firstRender&&(this.initRender(e),r=this.pageId,n="initRenderDone",wx.invokeAs({pageId:r})(n,o),this.firstRender&&(console.error("Expected updated data but get first rendering data"),b(new Error("Expected updated data but get first rendering data"))),this.firstRender=!0)}initRender(e){this.tracer.traceBeginEvent("Framework","initRender");try{var t;if(e.ext&&(C(e.ext.wechatLibVersion),Object.keys(e.ext).forEach((t=>{window[`__${t}__`]=e.ext[t]})),void 0!==e.ext.statesData&&(this.isPageReload=!0),this.ignoreWebviewPreload=T(e.ext.windowConfig.handleWebviewPreload),window.__wxConfigAppService__=e.ext.wxConfig,window.__wxConfigWindow__=e.ext.windowConfig,window.__route__=e.ext.route,window.__lastRoute__=e.ext.lastRoute,window.__query__=e.ext.query,window.__queryString__=Object.keys(e.ext.query||{}).map((t=>`${t}=${e.ext.query[t]}`)).join("&"),window.__lastQueryString__=Object.keys(e.ext.lastQuery||{}).map((t=>`${t}=${e.ext.lastQuery[t]}`)).join("&"),window.__debug__=e.ext.debug,window.__appId__=e.ext.appId,window.__navigationStyle__=e.ext.navigationStyle,window.__subPackages=e.ext.subPackages,window.__fontSizeSetting__=e.ext.fontSizeSetting,window.__wxConfigAppService__&&"string"==typeof window.__wxConfigAppService__.appContactInfo&&(window.__wxConfigAppService__.appContactInfo=JSON.parse(window.__wxConfigAppService__.appContactInfo))),this.beforeInitRender(e),null!==(t=e.ext)&&void 0!==t&&t.traceActionReportInfo){var r=e.ext.traceActionReportInfo;__userActionTracer__.setActionChainReportTypes({eventType:r.eventType,textContentMaxLength:r.textContentMaxLength,textContentMaxLayer:r.textContentMaxLayer})}}catch(e){throw this.tracer.traceEndEvent(),e}var n=!1,o=!1;this.tracer.traceBeginEvent("Framework","VD.startInitRender");try{this.doInitRender((()=>{o=!0,n||(this.tracer.traceEndEvent(),this.tracer.traceEndEvent()),this.afterInitRender(e)}))}finally{n=!0,o||(this.tracer.traceEndEvent(),this.tracer.traceEndEvent())}}}class O extends A{constructor(e){super(e),this.tracer=wx.createTracer(e)}beforeInitRender(e){var t,r,n=w;e.ext&&("v2"===(window.__wxConfigWindow__.style||n.style||"")&&(t=e.ext.webviewId,(r=_(t)).setStyleSheet(f,0,3),void 0!==__wxConfig.theme&&r.setStyleSheet(p,0,3)))}callInitReady(){wx.initReady({ignoreWebviewPreload:this.ignoreWebviewPreload},this.pageId)}doInitRender(e){x.startInitRender(this.pageId,this.callInitReady.bind(this)),e()}afterInitRender(){this.isPageReload||(this.tracer.traceBeginEvent("Framework","sendReadyEvent"),wx.publishPageEvent("__DOMReady",{},void 0,this.pageId),this.tracer.traceEndEvent()),this.tracer.traceBeginEvent("Framework","initReady",{isPageReload:this.isPageReload,ignoreWebviewPreload:this.ignoreWebviewPreload}),this.callInitReady(),this.tracer.traceEndEvent(),setTimeout((()=>{wxNativeConsole.info("[WebviewEngine] preload view thread main package code to render context, reason: 1000ms after initReady"),function(){var t=e.g.__mainPageFrameReady__;e.g.__mainPageFrameReady__=()=>{e.g.__mainPageFrameReady__=t},wx.traceBeginEvent("Framework","preloadViewEvaluateScript");var r=x.getEntryFile("__APP__",(e=>{wxNativeConsole.info(`[WebviewEngine] onPageReady getEntryFiles: ${e}`)}));__subContextEngine__.loadJsFiles(r),e.g.__mainPageFrameReady__=t,wx.traceEndEvent()}()}),1e3)}}function M(e,t){var r=_(e).getStyleSheet(t);return void 0===r?null:r.styleScope}function R(e){_(e).invalidatePreCompiled()}window.__webview_engine_version__=.02,globalThis.__vd_version_info__=window.__vd_version_info__=r,window.__mergeData__=x.getMergeDataFunc(),window.__isPageReload__=!1,window.__DOMTree__=void 0;var P=[];wx.subscribe("viewRoute",(t=>{if(wxNativeConsole.info("[skylineJs] recv viewRoute "+JSON.stringify(t)),!D.has(t.pageId)){if("undefined"!=typeof __skylineEngine__)__skylineEngine__.getRuntime().addPageInfo(t.pageId,t);t.isTab&&(x.isShowCustomTabBarByConfig(t.path)?x.viewThreadShowTabBar():x.viewThreadHideTabBar());var r="undefined"!=typeof __skylineEngine__?"skyline":"xr-frame";x.setPageType(t.pageId,r),__wxConfig.onReady((()=>{for(x.newPage(t.pageId,{isTabPage:t.isTab,openType:t.openType,path:t.path}),function(t,r,n=!1){wx.traceBeginEvent("Framework","viewEvaluateScript");var o=x.matchSubPackageName(r),i=[o];x.isSubPackageIndependent(o)||"__APP__"===o||i.unshift("__APP__");var a=Array.prototype.concat.call(...i.map((e=>x.getEntryFile(e,(e=>{wxNativeConsole.info(`[WebviewEngine] onViewRoute getEntryFiles: ${e}`)})))));n&&v(__virtualDOM__.SKYLINE_TABBAR_VIEW_ID,i);var s=e.g.__mainPageFrameReady__;e.g.__mainPageFrameReady__=()=>{},__subContextEngine__.loadJsFiles(a),wx.traceEndEvent(),s(t),e.g.__mainPageFrameReady__=s,v(t,i)}(t.pageId,t.path,t.isTab),x.dispatchViewRoute(t.path,t.pageId);P.length>0;){P.pop()(t.pageId)}}))}}));var I=e=>{var t=D.keys();for(var r of t)if(""!==x.isPageExist(r))return void e(r);P.push(e)},N=e=>{e(Array.from(D.keys()).filter((e=>""!==x.isPageExist(e))))},D=new Map;function L(e){if(void 0===e)throw new Error("[SkylineView] invalid pageId (get undefined)");return D.has(e)||D.set(e,new O(e)),D.get(e)}Foundation.on("SKYLINE_DESTROY_PAGE",(e=>{D.delete(e)})),function(e){var t={id:null,prev:null,data:[]};wx.onAppDataChange((r=>{if(r.isSplitData){var{id:n,index:o,total:i,data:a}=r.splitInfo;if(1!==o&&(o!==t.prev+1||n!==t.id))return t.id=null,t.prev=null,void(t.data=[]);if(o!==i)return t.id=n,t.prev=o,void t.data.push(a);t.data.push(a);var s=t.data.join(""),c=null;try{c=JSON.parse(s)}catch(e){console.error("Expected parse completed data with split data but got error"),b(new Error("Expected parse completed data with split data but got error")),c=null}if(t.id=null,t.prev=null,t.data=[],!c)return;r=c}r.ext&&(window.__isPageReload__=r.ext.isReload,"__isFirstPage__"in window||(window.__isFirstPage__=r.ext.isLaunch));var u=e(r.ext.webviewId);u.tracer.traceBeginEvent("Framework","onAppDataChange");var l=()=>{u.setDataReady(r)},f=x.getRestoreState();f.restoring?f.onReady((()=>{l()})):l(),u.tracer.traceEndEvent()}))}(L),function(e){document.addEventListener("generateFuncReady",(t=>{var r=t,n=e(r.detail.pageId);n.tracer.traceBeginEvent("Framework","generateFuncReady"),S((()=>{window.__generateFunc__=r.detail.generateFunc,n.setGenFuncReady()}))(),n.tracer.traceEndEvent()}))}(L),__webviewEngine__=t})();var __WXML_GLOBAL__=__WXML_GLOBAL__||{entrys:{},defines:{},modules:{},ops:[],wxs_nf_init:void 0,total_ops:0},__vd_version_info__=__vd_version_info__||{},__wxAppCode__=__wxAppCode__||{},__WAXRFrameRenderContextEndTime__=Date.now();"function"==typeof this.__wxLibrary.onEnd&&this.__wxLibrary.onEnd(),delete this.__wxLibrary;