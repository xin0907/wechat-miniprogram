this.__wxLibrary={fileName:"WASubContext.js",envType:"Service",contextType:"App:SubContext",execStart:Date.now(),mayHaveSnapshot:!0};var __WASubContextStartTime__=this.__wxLibrary.execStart;(function(e){var t={updateTime:"2023.2.22 17:39:38",version:"2.30.2",features:{pruneWxConfigByPage:!0,injectGameContextPlugin:!0,lazyCodeLoading2:!0,lazyCodeLoadingForDevTool:!0,injectAppSeparatedPlugin:!0,nativeTrans:!0,gameLive:!0,skyline:!0,supportInvokeWithAppId:!0,wkFeatureVersion:4,delayedServiceCodeCache:!0,gameLiveInvite:!0,globalConsole:!0,expt:["clicfg_appbrand_ios_native_download_new","clicfg_appbrand_native_download","clicfg_appbrand_ios_native_socket_wcwss_new","clicfg_navigation_use_scl_alert_v5","clicfg_appbrand_ios_native_readfile","clicfg_appbrand_native_readfile","clicfg_appbrand_ios_game_split_multi_plugincode","clicfg_appbrand_game_split_multi_plugincode","clicfg_appbrand_android_tcp_buffer","clicfg_appbrand_ios_tcp_buffer","clicfg_weapp_weak_net_predict_local","clicfg_wa_ar_iosurface_switch","clicfg_canvas_use_magic_brush","clicfg_appbrand_report_trace_event","clicfg_appbrand_skyline_text_style","clicfg_appbrand_ios_free_httpdns_sdk_cache","clicfg_appbrand_android_free_httpdns_sdk_cache","clicfg_appbrand_ios_inneraudio2webaudio","clicfg_appbrand_android_inneraudio2webaudio","clicfg_appbrand_ios_inneraudio2webaudio_usewebaudio","clicfg_appbrand_android_inneraudio2webaudio_usewebaudio","clicfg_appbrand_ios_allow_multi_context_worker","clicfg_appbrand_ios_allow_worker_binding_message"],snapshotConfig:{"app:main":["WAServiceMainContext.js"],"app:sub":["WASubContext.js"],"app:subRender":["WARenderContext.js"],"game:main":["WAGame.js"],"game:sub":["WAGameSubContext.js"]}},debugOptions:{}},r=!0,n=e.Function,o=n,i,a,s,l,u,c,d,p,f,h,_={};(()=>{var e={7967:(e,t,r)=>{var n={"./applyDecoratedDescriptor":4725,"./asyncToGenerator":2222,"./extends":1211,"./initializerDefineProperty":6460,"./initializerWarningHelper":9279,"./objectSpread2":4178,"./objectWithoutProperties":3724};function o(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=7967},4725:(e,t,r)=>{"use strict";function n(e,t,r,n,o){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}r.r(t),r.d(t,{default:()=>n})},2222:(e,t,r)=>{"use strict";function n(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var a=e.apply(t,r);function s(e){n(a,o,i,s,l,"next",e)}function l(e){n(a,o,i,s,l,"throw",e)}s(void 0)}))}}r.r(t),r.d(t,{default:()=>o})},1211:(e,t,r)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.r(t),r.d(t,{default:()=>n})},6460:(e,t,r)=>{"use strict";function n(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}r.r(t),r.d(t,{default:()=>n})},9279:(e,t,r)=>{"use strict";function n(e,t){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}r.r(t),r.d(t,{default:()=>n})},4178:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:String(t)}function i(e,t,r){return(t=o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.r(t),r.d(t,{default:()=>s})},3724:(e,t,r)=>{"use strict";function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}r.r(t),r.d(t,{default:()=>n})},2874:(e,t,r)=>{var n=r(2582),o=r(3396),i=r(5476),a=r(4386),s=i.data,l=i.normalize,u="USE_FUNCTION_CONSTRUCTOR",c="AsyncIteratorPrototype",d=function(e,t){if(o(e))for(var r=0;r<e.length;r++)s[l(e[r])]=t};e.exports=function(e){"object"==typeof e&&(d(e.useNative,i.NATIVE),d(e.usePolyfill,i.POLYFILL),d(e.useFeatureDetection,null),n(e,u)&&(a[u]=!!e[u]),n(e,c)&&(a[u]=e[c]))}},2799:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},5577:(e,t,r)=>{var n=r(3394);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},6964:(e,t,r)=>{var n=r(3461),o=r(8561),i=r(4142),a=n("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},8501:(e,t,r)=>{"use strict";var n=r(2430).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},2378:e=>{e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},372:(e,t,r)=>{var n=r(3394);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},2171:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},9064:(e,t,r)=>{"use strict";var n,i=r(2171),a=r(1644),s=r(4380),l=r(3394),u=r(2582),c=r(9085),d=r(8528),p=r(9059),f=r(4142).f,h=r(4879),_=r(8476),g=r(3461),v=r(992),m=s.Int8Array,y=m&&m.prototype,b=s.Uint8ClampedArray,w=b&&b.prototype,A=m&&h(m),E=y&&h(y),I=Object.prototype,S=I.isPrototypeOf,C=g("toStringTag"),T=v("TYPED_ARRAY_TAG"),O=i&&!!_&&"Opera"!==c(s.opera),x=!1,N={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},R={BigInt64Array:8,BigUint64Array:8},P=function(e){if(!l(e))return!1;var t=c(e);return u(N,t)||u(R,t)};for(n in N)s[n]||(O=!1);if((!O||"function"!=typeof A||A===o.prototype)&&(A=function(){throw TypeError("Incorrect invocation")},O))for(n in N)s[n]&&_(s[n],A);if((!O||!E||E===I)&&(E=A.prototype,O))for(n in N)s[n]&&_(s[n].prototype,E);if(O&&h(w)!==E&&_(w,E),a&&!u(E,C))for(n in x=!0,f(E,C,{get:function(){return l(this)?this[T]:void 0}}),N)s[n]&&d(s[n],T,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:O,TYPED_ARRAY_TAG:x&&T,aTypedArray:function(e){if(P(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(_){if(S.call(A,e))return e}else for(var t in N)if(u(N,n)){var r=s[t];if(r&&(e===r||S.call(r,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r){if(a){if(r)for(var n in N){var o=s[n];if(o&&u(o.prototype,e))try{delete o.prototype[e]}catch(e){}}E[e]&&!r||p(E,e,r?t:O&&y[e]||t)}},exportTypedArrayStaticMethod:function(e,t,r){var n,o;if(a){if(_){if(r)for(n in N)if((o=s[n])&&u(o,e))try{delete o[e]}catch(e){}if(A[e]&&!r)return;try{return p(A,e,r?t:O&&A[e]||t)}catch(e){}}for(n in N)!(o=s[n])||o[e]&&!r||p(o,e,t)}},isView:function(e){if(!l(e))return!1;var t=c(e);return"DataView"===t||u(N,t)||u(R,t)},isTypedArray:P,TypedArray:A,TypedArrayPrototype:E}},8806:(e,t,r)=>{"use strict";var n=r(4380),o=r(1644),i=r(2171),a=r(8528),s=r(6901),l=r(4330),u=r(2378),c=r(4072),d=r(4353),p=r(2961),f=r(5936),h=r(4879),_=r(8476),g=r(9819).f,v=r(4142).f,m=r(9625),y=r(923),b=r(9676),w=b.get,A=b.set,E="ArrayBuffer",I="DataView",S="prototype",C="Wrong index",T=n[E],O=T,x=n[I],N=x&&x[S],R=Object.prototype,P=n.RangeError,D=f.pack,L=f.unpack,B=function(e){return[255&e]},k=function(e){return[255&e,e>>8&255]},M=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},F=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},j=function(e){return D(e,23,4)},U=function(e){return D(e,52,8)},$=function(e,t){v(e[S],t,{get:function(){return w(this)[t]}})},W=function(e,t,r,n){var o=p(r),i=w(e);if(o+t>i.byteLength)throw P(C);var a=w(i.buffer).bytes,s=o+i.byteOffset,l=a.slice(s,s+t);return n?l:l.reverse()},q=function(e,t,r,n,o,i){var a=p(r),s=w(e);if(a+t>s.byteLength)throw P(C);for(var l=w(s.buffer).bytes,u=a+s.byteOffset,c=n(+o),d=0;d<t;d++)l[u+d]=c[i?d:t-d-1]};if(i){if(!l((function(){T(1)}))||!l((function(){new T(-1)}))||l((function(){return new T,new T(1.5),new T(NaN),T.name!=E}))){for(var H,G=(O=function(e){return u(this,O),new T(p(e))})[S]=T[S],Q=g(T),z=0;Q.length>z;)(H=Q[z++])in O||a(O,H,T[H]);G.constructor=O}_&&h(N)!==R&&_(N,R);var Y=new x(new O(2)),K=N.setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||s(N,{setInt8:function(e,t){K.call(this,e,t<<24>>24)},setUint8:function(e,t){K.call(this,e,t<<24>>24)}},{unsafe:!0})}else O=function(e){u(this,O,E);var t=p(e);A(this,{bytes:m.call(new Array(t),0),byteLength:t}),o||(this.byteLength=t)},x=function(e,t,r){u(this,x,I),u(e,O,I);var n=w(e).byteLength,i=c(t);if(i<0||i>n)throw P("Wrong offset");if(i+(r=void 0===r?n-i:d(r))>n)throw P("Wrong length");A(this,{buffer:e,byteLength:r,byteOffset:i}),o||(this.buffer=e,this.byteLength=r,this.byteOffset=i)},o&&($(O,"byteLength"),$(x,"buffer"),$(x,"byteLength"),$(x,"byteOffset")),s(x[S],{getInt8:function(e){return W(this,1,e)[0]<<24>>24},getUint8:function(e){return W(this,1,e)[0]},getInt16:function(e){var t=W(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=W(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return F(W(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return F(W(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return L(W(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return L(W(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){q(this,1,e,B,t)},setUint8:function(e,t){q(this,1,e,B,t)},setInt16:function(e,t){q(this,2,e,k,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){q(this,2,e,k,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){q(this,4,e,M,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){q(this,4,e,M,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){q(this,4,e,j,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){q(this,8,e,U,t,arguments.length>2?arguments[2]:void 0)}});y(O,E),y(x,I),e.exports={ArrayBuffer:O,DataView:x}},9625:(e,t,r)=>{"use strict";var n=r(5141),o=r(6156),i=r(4353);e.exports=function(e){for(var t=n(this),r=i(t.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,r),l=a>2?arguments[2]:void 0,u=void 0===l?r:o(l,r);u>s;)t[s++]=e;return t}},6550:(e,t,r)=>{var n=r(4749),o=r(4353),i=r(6156),a=function(e){return function(t,r,a){var s,l=n(t),u=o(l.length),c=i(a,u);if(e&&r!=r){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},4832:(e,t,r)=>{var n=r(1466),o=r(3043),i=r(5141),a=r(4353),s=function(e){var t=6==e;return function(r,s,l){for(var u,c=i(r),d=o(c),p=n(s,l,3),f=a(d.length);f-- >0;)if(p(u=d[f],f,c))switch(e){case 5:return u;case 6:return f}return t?-1:void 0}};e.exports={findLast:s(5),findLastIndex:s(6)}},7139:(e,t,r)=>{var n=r(1466),o=r(3043),i=r(5141),a=r(4353),s=r(5484),l=[].push,u=function(e){var t=1==e,r=2==e,u=3==e,c=4==e,d=6==e,p=7==e,f=5==e||d;return function(h,_,g,v){for(var m,y,b=i(h),w=o(b),A=n(_,g,3),E=a(w.length),I=0,S=v||s,C=t?S(h,E):r||p?S(h,0):void 0;E>I;I++)if((f||I in w)&&(y=A(m=w[I],I,b),e))if(t)C[I]=y;else if(y)switch(e){case 3:return!0;case 5:return m;case 6:return I;case 2:l.call(C,m)}else switch(e){case 4:return!1;case 7:l.call(C,m)}return d?-1:u||c?c:C}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},9813:(e,t,r)=>{"use strict";var n=r(4330);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},4067:(e,t,r)=>{var n=r(2799),o=r(5141),i=r(3043),a=r(4353),s=function(e){return function(t,r,s,l){n(r);var u=o(t),c=i(u),d=a(u.length),p=e?d-1:0,f=e?-1:1;if(s<2)for(;;){if(p in c){l=c[p],p+=f;break}if(p+=f,e?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:d>p;p+=f)p in c&&(l=r(l,c[p],p,u));return l}};e.exports={left:s(!1),right:s(!0)}},9091:e=>{var t=Math.floor,r=function(e,i){var a=e.length,s=t(a/2);return a<8?n(e,i):o(r(e.slice(0,s),i),r(e.slice(s),i),i)},n=function(e,t){for(var r,n,o=e.length,i=1;i<o;){for(n=i,r=e[i];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==i++&&(e[n]=r)}return e},o=function(e,t,r){for(var n=e.length,o=t.length,i=0,a=0,s=[];i<n||a<o;)i<n&&a<o?s.push(r(e[i],t[a])<=0?e[i++]:t[a++]):s.push(i<n?e[i++]:t[a++]);return s};e.exports=r},5484:(e,t,r)=>{var n=r(3394),o=r(3396),i=r(3461)("species");e.exports=function(e,t){var r;return o(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!o(r.prototype)?n(r)&&null===(r=r[i])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},7303:(e,t,r)=>{"use strict";var n=r(3759),o=r(2799),i=r(372),a=r(8561),s=r(8528),l=r(6901),u=r(3461),c=r(9676),d=r(6274)("Promise"),p=c.set,f=c.get,h=u("toStringTag"),_=function(e){var t=f(this).iterator,r=t.return;return void 0===r?d.resolve({done:!0,value:e}):i(r.call(t,e))},g=function(e){var t=f(this).iterator,r=t.throw;return void 0===r?d.reject(e):r.call(t,e)};e.exports=function(e,t){var r=function(e){e.next=o(e.iterator.next),e.done=!1,p(this,e)};return r.prototype=l(a(n.AsyncIterator.prototype),{next:function(t){var r=f(this);if(r.done)return d.resolve({done:!0,value:void 0});try{return d.resolve(i(e.call(r,t,d)))}catch(e){return d.reject(e)}},return:_,throw:g}),t||s(r.prototype,h,"Generator"),r}},4445:(e,t,r)=>{"use strict";var n=r(2799),o=r(372),i=r(6274)("Promise"),a=[].push,s=function(e){var t=0==e,r=1==e,s=2==e,l=3==e;return function(e,u){o(e);var c=n(e.next),d=t?[]:void 0;return t||n(u),new i((function(n,p){var f=function(t,r){try{var n=e.return;if(void 0!==n)return i.resolve(n.call(e)).then((function(){t(r)}),(function(e){p(e)}))}catch(e){return p(e)}t(r)},h=function(e){f(p,e)},_=function(){try{i.resolve(o(c.call(e))).then((function(e){try{if(o(e).done)n(t?d:!l&&(s||void 0));else{var c=e.value;t?(a.call(d,c),_()):i.resolve(u(c)).then((function(e){r?_():s?e?_():f(n,!1):e?f(n,l||c):_()}),h)}}catch(e){h(e)}}),h)}catch(e){h(e)}};_()}))}};e.exports={toArray:s(0),forEach:s(1),every:s(2),some:s(3),find:s(4)}},9415:(e,t,r)=>{var n,i,a=r(4380),s=r(4386),l=r(4879),u=r(2582),c=r(8528),d=r(3461),p=r(3481),f="USE_FUNCTION_CONSTRUCTOR",h=d("asyncIterator"),_=a.AsyncIterator,g=s.AsyncIteratorPrototype;if(!p)if(g)n=g;else if("function"==typeof _)n=_.prototype;else if(s[f]||a[f])try{i=l(l(l(o("return async function*(){}()")()))),l(i)===Object.prototype&&(n=i)}catch(e){}n||(n={}),u(n,h)||c(n,h,(function(){return this})),e.exports=n},9841:(e,t,r)=>{var n=r(372),o=r(2976);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){throw o(e),t}}},5987:(e,t,r)=>{var n=r(3461)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(e){}return r}},4849:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},9085:(e,t,r)=>{var n=r(7427),o=r(4849),i=r(3461)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:a?o(t):"Object"==(n=o(t))&&"function"==typeof t.callee?"Arguments":n}},8646:(e,t,r)=>{var n=r(2582),o=r(7534),i=r(294),a=r(4142);e.exports=function(e,t){for(var r=o(t),s=a.f,l=i.f,u=0;u<r.length;u++){var c=r[u];n(e,c)||s(e,c,l(t,c))}}},4580:(e,t,r)=>{var n=r(4330);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},8859:(e,t,r)=>{"use strict";var n=r(2937).IteratorPrototype,o=r(8561),i=r(1074),a=r(923),s=r(1337),l=function(){return this};e.exports=function(e,t,r){var u=t+" Iterator";return e.prototype=o(n,{next:i(1,r)}),a(e,u,!1,!0),s[u]=l,e}},8528:(e,t,r)=>{var n=r(1644),o=r(4142),i=r(1074);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},1074:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7556:(e,t,r)=>{"use strict";var n=r(5698),o=r(4142),i=r(1074);e.exports=function(e,t,r){var a=n(t);a in e?o.f(e,a,i(0,r)):e[a]=r}},1205:(e,t,r)=>{var n=r(3759),o=r(2582),i=r(1806),a=r(4142).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},1644:(e,t,r)=>{var n=r(4330);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8370:(e,t,r)=>{var n=r(4380),o=r(3394),i=n.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},6173:(e,t,r)=>{var n=r(661).match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},8623:e=>{e.exports="object"==typeof window},5308:(e,t,r)=>{var n=r(661);e.exports=/MSIE|Trident/.test(n)},5692:(e,t,r)=>{var n=r(661);e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(n)},3986:(e,t,r)=>{var n=r(4849),o=r(4380);e.exports="process"==n(o.process)},8927:(e,t,r)=>{var n=r(661);e.exports=/web0s(?!.*chrome)/i.test(n)},661:(e,t,r)=>{var n=r(6274);e.exports=n("navigator","userAgent")||""},2136:(e,t,r)=>{var n,o,i=r(4380),a=r(661),s=i.process,l=s&&s.versions,u=l&&l.v8;u?o=(n=u.split("."))[0]<4?1:n[0]+n[1]:a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=n[1]),e.exports=o&&+o},9632:(e,t,r)=>{var n=r(661).match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},8398:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6753:(e,t,r)=>{var n=r(4380),o=r(294).f,i=r(8528),a=r(9059),s=r(485),l=r(8646),u=r(5476);e.exports=function(e,t){var r,c,d,p,f,h=e.target,_=e.global,g=e.stat;if(r=_?n:g?n[h]||s(h,{}):(n[h]||{}).prototype)for(c in t){if(p=t[c],d=e.noTargetGet?(f=o(r,c))&&f.value:r[c],!u(_?c:h+(g?".":"#")+c,e.forced)&&void 0!==d){if(typeof p==typeof d)continue;l(p,d)}(e.sham||d&&d.sham)&&i(p,"sham",!0),a(r,c,p,e)}}},4330:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},225:(e,t,r)=>{"use strict";r(9437);var n=r(9059),o=r(7879),i=r(4330),a=r(3461),s=r(8528),l=a("species"),u=RegExp.prototype;e.exports=function(e,t,r,c){var d=a(e),p=!i((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),f=p&&!i((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[l]=function(){return r},r.flags="",r[d]=/./[d]),r.exec=function(){return t=!0,null},r[d](""),!t}));if(!p||!f||r){var h=/./[d],_=t(d,""[e],(function(e,t,r,n,i){var a=t.exec;return a===o||a===u.exec?p&&!i?{done:!0,value:h.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}));n(String.prototype,e,_[0]),n(u,d,_[1])}c&&s(u[d],"sham",!0)}},6614:(e,t,r)=>{"use strict";var n=r(3396),o=r(4353),i=r(1466),a=function(e,t,r,s,l,u,c,d){for(var p,f=l,h=0,_=!!c&&i(c,d,3);h<s;){if(h in r){if(p=_?_(r[h],h,t):r[h],u>0&&n(p))f=a(e,t,p,o(p.length),f,u-1)-1;else{if(f>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[f]=p}f++}h++}return f};e.exports=a},1466:(e,t,r)=>{var n=r(2799);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},153:(e,t,r)=>{var n=r(5225),o=r(3461)("asyncIterator");e.exports=function(e){var t=e[o];return void 0===t?n(e):t}},6274:(e,t,r)=>{var n=r(3759),o=r(4380),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(n[e])||i(o[e]):n[e]&&n[e][t]||o[e]&&o[e][t]}},5225:(e,t,r)=>{var n=r(9085),o=r(1337),i=r(3461)("iterator");e.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[n(e)]}},1884:(e,t,r)=>{var n=r(5141),o=Math.floor,i="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,l,u,c){var d=r+e.length,p=l.length,f=s;return void 0!==u&&(u=n(u),f=a),i.call(c,f,(function(n,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(d);case"<":a=u[i.slice(1,-1)];break;default:var s=+i;if(0===s)return n;if(s>p){var c=o(s/10);return 0===c?n:c<=p?void 0===l[c-1]?i.charAt(1):l[c-1]+i.charAt(1):n}a=l[s-1]}return void 0===a?"":a}))}},4380:(e,t,r)=>{var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||o("return this")()},2582:(e,t,r)=>{var n=r(5141),o={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return o.call(n(e),t)}},2687:e=>{e.exports={}},916:(e,t,r)=>{var n=r(4380);e.exports=function(e,t){var r=n.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}},7162:(e,t,r)=>{var n=r(6274);e.exports=n("document","documentElement")},3258:(e,t,r)=>{var n=r(1644),o=r(4330),i=r(8370);e.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},5936:e=>{var t=Math.abs,r=Math.pow,n=Math.floor,o=Math.log,i=Math.LN2;e.exports={pack:function(e,a,s){var l,u,c,d=new Array(s),p=8*s-a-1,f=(1<<p)-1,h=f>>1,_=23===a?r(2,-24)-r(2,-77):0,g=e<0||0===e&&1/e<0?1:0,v=0;for((e=t(e))!=e||e===1/0?(u=e!=e?1:0,l=f):(l=n(o(e)/i),e*(c=r(2,-l))<1&&(l--,c*=2),(e+=l+h>=1?_/c:_*r(2,1-h))*c>=2&&(l++,c/=2),l+h>=f?(u=0,l=f):l+h>=1?(u=(e*c-1)*r(2,a),l+=h):(u=e*r(2,h-1)*r(2,a),l=0));a>=8;d[v++]=255&u,u/=256,a-=8);for(l=l<<a|u,p+=a;p>0;d[v++]=255&l,l/=256,p-=8);return d[--v]|=128*g,d},unpack:function(e,t){var n,o=e.length,i=8*o-t-1,a=(1<<i)-1,s=a>>1,l=i-7,u=o-1,c=e[u--],d=127&c;for(c>>=7;l>0;d=256*d+e[u],u--,l-=8);for(n=d&(1<<-l)-1,d>>=-l,l+=t;l>0;n=256*n+e[u],u--,l-=8);if(0===d)d=1-s;else{if(d===a)return n?NaN:c?-1/0:1/0;n+=r(2,t),d-=s}return(c?-1:1)*n*r(2,d-t)}}},3043:(e,t,r)=>{var n=r(4330),o=r(4849),i="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},2612:(e,t,r)=>{var n=r(3394),o=r(8476);e.exports=function(e,t,r){var i,a;return o&&"function"==typeof(i=t.constructor)&&i!==r&&n(a=i.prototype)&&a!==r.prototype&&o(e,a),e}},5487:(e,t,r)=>{var n=r(4386),i=o.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return i.call(e)}),e.exports=n.inspectSource},9676:(e,t,r)=>{var n,o,i,a=r(8242),s=r(4380),l=r(3394),u=r(8528),c=r(2582),d=r(4386),p=r(1453),f=r(2687),h="Object already initialized",_=s.WeakMap;if(a||d.state){var g=d.state||(d.state=new _),v=g.get,m=g.has,y=g.set;n=function(e,t){if(m.call(g,e))throw new TypeError(h);return t.facade=e,y.call(g,e,t),t},o=function(e){return v.call(g,e)||{}},i=function(e){return m.call(g,e)}}else{var b=p("state");f[b]=!0,n=function(e,t){if(c(e,b))throw new TypeError(h);return t.facade=e,u(e,b,t),t},o=function(e){return c(e,b)?e[b]:{}},i=function(e){return c(e,b)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!l(t)||(r=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},588:(e,t,r)=>{var n=r(3461),o=r(1337),i=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},3396:(e,t,r)=>{var n=r(4849);e.exports=Array.isArray||function(e){return"Array"==n(e)}},5476:(e,t,r)=>{var n=r(4330),o=/#|\.prototype\./,i=function(e,t){var r=s[a(e)];return r==u||r!=l&&("function"==typeof t?n(t):!!t)},a=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=i.data={},l=i.NATIVE="N",u=i.POLYFILL="P";e.exports=i},3394:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},3481:e=>{e.exports=!1},8410:(e,t,r)=>{var n=r(3394),o=r(4849),i=r(3461)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},3984:(e,t,r)=>{var n=r(372),o=r(588),i=r(4353),a=r(1466),s=r(5225),l=r(2976),u=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,r){var c,d,p,f,h,_,g,v=r&&r.that,m=!(!r||!r.AS_ENTRIES),y=!(!r||!r.IS_ITERATOR),b=!(!r||!r.INTERRUPTED),w=a(t,v,1+m+b),A=function(e){return c&&l(c),new u(!0,e)},E=function(e){return m?(n(e),b?w(e[0],e[1],A):w(e[0],e[1])):b?w(e,A):w(e)};if(y)c=e;else{if("function"!=typeof(d=s(e)))throw TypeError("Target is not iterable");if(o(d)){for(p=0,f=i(e.length);f>p;p++)if((h=E(e[p]))&&h instanceof u)return h;return new u(!1)}c=d.call(e)}for(_=c.next;!(g=_.call(c)).done;){try{h=E(g.value)}catch(e){throw l(c),e}if("object"==typeof h&&h&&h instanceof u)return h}return new u(!1)}},2976:(e,t,r)=>{var n=r(372);e.exports=function(e){var t=e.return;if(void 0!==t)return n(t.call(e)).value}},8212:(e,t,r)=>{"use strict";var n=r(3759),o=r(2799),i=r(372),a=r(8561),s=r(8528),l=r(6901),u=r(3461),c=r(9676),d=c.set,p=c.get,f=u("toStringTag"),h=function(e){var t=p(this).iterator,r=t.return;return void 0===r?{done:!0,value:e}:i(r.call(t,e))},_=function(e){var t=p(this).iterator,r=t.throw;if(void 0===r)throw e;return r.call(t,e)};e.exports=function(e,t){var r=function(e){e.next=o(e.iterator.next),e.done=!1,d(this,e)};return r.prototype=l(a(n.Iterator.prototype),{next:function(){var t=p(this),r=t.done?void 0:e.apply(t,arguments);return{done:t.done,value:r}},return:h,throw:_}),t||s(r.prototype,f,"Generator"),r}},2937:(e,t,r)=>{"use strict";var n,o,i,a=r(4330),s=r(4879),l=r(8528),u=r(2582),c=r(3461),d=r(3481),p=c("iterator"),f=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(n=o):f=!0);var h=null==n||a((function(){var e={};return n[p].call(e)!==e}));h&&(n={}),d&&!h||u(n,p)||l(n,p,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},1337:e=>{e.exports={}},1684:(e,t,r)=>{var n,o,i,a,s,l,u,c,d=r(4380),p=r(294).f,f=r(4869).set,h=r(5692),_=r(8927),g=r(3986),v=d.MutationObserver||d.WebKitMutationObserver,m=d.document,y=d.process,b=d.Promise,w=p(d,"queueMicrotask"),A=w&&w.value;A||(n=function(){var e,t;for(g&&(e=y.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?a():i=void 0,e}}i=void 0,e&&e.enter()},h||g||_||!v||!m?b&&b.resolve?((u=b.resolve(void 0)).constructor=b,c=u.then,a=function(){c.call(u,n)}):a=g?function(){y.nextTick(n)}:function(){f.call(d,n)}:(s=!0,l=m.createTextNode(""),new v(n).observe(l,{characterData:!0}),a=function(){l.data=s=!s})),e.exports=A||function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,a()),i=t}},3535:(e,t,r)=>{var n=r(4380);e.exports=n.Promise},5845:(e,t,r)=>{var n=r(2136),o=r(4330);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},8242:(e,t,r)=>{var n=r(4380),o=r(5487),i=n.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},3288:(e,t,r)=>{"use strict";var n=r(2799),o=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new o(e)}},8787:(e,t,r)=>{var n=r(4380),o=r(1380).trim,i=r(7612),a=n.parseFloat,s=1/a(i+"-0")!=-1/0;e.exports=s?function(e){var t=o(String(e)),r=a(t);return 0===r&&"-"==t.charAt(0)?-0:r}:a},8561:(e,t,r)=>{var n,o=r(372),i=r(7197),a=r(8398),s=r(2687),l=r(7162),u=r(8370),c=r(1453),d="prototype",p="script",f=c("IE_PROTO"),h=function(){},_=function(e){return"<"+p+">"+e+"</"+p+">"},g=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t,r;g=n?function(e){e.write(_("")),e.close();var t=e.parentWindow.Object;return e=null,t}(n):(t=u("iframe"),r="java"+p+":",t.style.display="none",l.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(_("document.F=Object")),e.close(),e.F);for(var o=a.length;o--;)delete g[d][a[o]];return g()};s[f]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(h[d]=o(e),r=new h,h[d]=null,r[f]=e):r=g(),void 0===t?r:i(r,t)}},7197:(e,t,r)=>{var n=r(1644),o=r(4142),i=r(372),a=r(5313);e.exports=n?Object.defineProperties:function(e,t){i(e);for(var r,n=a(t),s=n.length,l=0;s>l;)o.f(e,r=n[l++],t[r]);return e}},4142:(e,t,r)=>{var n=r(1644),o=r(3258),i=r(372),a=r(5698),s=Object.defineProperty;t.f=n?s:function(e,t,r){if(i(e),t=a(t,!0),i(r),o)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},294:(e,t,r)=>{var n=r(1644),o=r(8078),i=r(1074),a=r(4749),s=r(5698),l=r(2582),u=r(3258),c=Object.getOwnPropertyDescriptor;t.f=n?c:function(e,t){if(e=a(e),t=s(t,!0),u)try{return c(e,t)}catch(e){}if(l(e,t))return i(!o.f.call(e,t),e[t])}},9819:(e,t,r)=>{var n=r(8891),o=r(8398).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},7840:(e,t)=>{t.f=Object.getOwnPropertySymbols},4879:(e,t,r)=>{var n=r(2582),o=r(5141),i=r(1453),a=r(4580),s=i("IE_PROTO"),l=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=o(e),n(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},8891:(e,t,r)=>{var n=r(2582),o=r(4749),i=r(6550).indexOf,a=r(2687);e.exports=function(e,t){var r,s=o(e),l=0,u=[];for(r in s)!n(a,r)&&n(s,r)&&u.push(r);for(;t.length>l;)n(s,r=t[l++])&&(~i(u,r)||u.push(r));return u}},5313:(e,t,r)=>{var n=r(8891),o=r(8398);e.exports=Object.keys||function(e){return n(e,o)}},8078:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},8476:(e,t,r)=>{var n=r(372),o=r(5577);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,i){return n(r),o(i),t?e.call(r,i):r.__proto__=i,r}}():void 0)},5686:(e,t,r)=>{var n=r(1644),o=r(5313),i=r(4749),a=r(8078).f,s=function(e){return function(t){for(var r,s=i(t),l=o(s),u=l.length,c=0,d=[];u>c;)r=l[c++],n&&!a.call(s,r)||d.push(e?[r,s[r]]:s[r]);return d}};e.exports={entries:s(!0),values:s(!1)}},7534:(e,t,r)=>{var n=r(6274),o=r(9819),i=r(7840),a=r(372);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},3759:(e,t,r)=>{var n=r(4380);e.exports=n},561:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},3443:(e,t,r)=>{var n=r(372),o=r(3394),i=r(3288);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},6901:(e,t,r)=>{var n=r(9059);e.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},9059:(e,t,r)=>{var n=r(4380),i=r(8528),a=r(2582),s=r(485),l=r(5487),u=r(9676),c=u.get,d=u.enforce,p=String(String).split("String");(e.exports=function(e,t,r,o){var l,u=!!o&&!!o.unsafe,c=!!o&&!!o.enumerable,f=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof t||a(r,"name")||i(r,"name",t),(l=d(r)).source||(l.source=p.join("string"==typeof t?t:""))),e!==n?(u?!f&&e[t]&&(c=!0):delete e[t],c?e[t]=r:i(e,t,r)):c?e[t]=r:s(t,r)})(o.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||l(this)}))},3519:(e,t,r)=>{var n=r(4849),o=r(7879);e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var i=r.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},7879:(e,t,r)=>{"use strict";var n,o,i=r(2530),a=r(4016),s=r(138),l=r(8561),u=r(9676).get,c=r(2198),d=r(5618),p=RegExp.prototype.exec,f=s("native-string-replace",String.prototype.replace),h=p,_=(n=/a/,o=/b*/g,p.call(n,"a"),p.call(o,"a"),0!==n.lastIndex||0!==o.lastIndex),g=a.UNSUPPORTED_Y||a.BROKEN_CARET,v=void 0!==/()??/.exec("")[1];(_||v||g||c||d)&&(h=function(e){var t,r,n,o,a,s,c,d=this,m=u(d),y=m.raw;if(y)return y.lastIndex=d.lastIndex,t=h.call(y,e),d.lastIndex=y.lastIndex,t;var b=m.groups,w=g&&d.sticky,A=i.call(d),E=d.source,I=0,S=e;if(w&&(-1===(A=A.replace("y","")).indexOf("g")&&(A+="g"),S=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(E="(?: "+E+")",S=" "+S,I++),r=new RegExp("^(?:"+E+")",A)),v&&(r=new RegExp("^"+E+"$(?!\\s)",A)),_&&(n=d.lastIndex),o=p.call(w?r:d,S),w?o?(o.input=o.input.slice(I),o[0]=o[0].slice(I),o.index=d.lastIndex,d.lastIndex+=o[0].length):d.lastIndex=0:_&&o&&(d.lastIndex=d.global?o.index+o[0].length:n),v&&o&&o.length>1&&f.call(o[0],r,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&b)for(o.groups=s=l(null),a=0;a<b.length;a++)s[(c=b[a])[0]]=o[c[1]];return o}),e.exports=h},2530:(e,t,r)=>{"use strict";var n=r(372);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},4016:(e,t,r)=>{var n=r(4330),o=function(e,t){return RegExp(e,t)};t.UNSUPPORTED_Y=n((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},2198:(e,t,r)=>{var n=r(4330);e.exports=n((function(){var e=RegExp(".","string".charAt(0));return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},5618:(e,t,r)=>{var n=r(4330);e.exports=n((function(){var e=RegExp("(?<a>b)","string".charAt(5));return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},6190:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},485:(e,t,r)=>{var n=r(4380),o=r(8528);e.exports=function(e,t){try{o(n,e,t)}catch(r){n[e]=t}return t}},8505:(e,t,r)=>{"use strict";var n=r(6274),o=r(4142),i=r(3461),a=r(1644),s=i("species");e.exports=function(e){var t=n(e),r=o.f;a&&t&&!t[s]&&r(t,s,{configurable:!0,get:function(){return this}})}},923:(e,t,r)=>{var n=r(4142).f,o=r(2582),i=r(3461)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},1453:(e,t,r)=>{var n=r(138),o=r(992),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},4386:(e,t,r)=>{var n=r(4380),o=r(485),i="__core-js_shared__",a=n[i]||o(i,{});e.exports=a},138:(e,t,r)=>{var n=r(3481),o=r(4386);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.15.1",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},1749:(e,t,r)=>{var n=r(372),o=r(2799),i=r(3461)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||null==(r=n(a)[i])?t:o(r)}},2430:(e,t,r)=>{var n=r(4072),o=r(6190),i=function(e){return function(t,r){var i,a,s=String(o(t)),l=n(r),u=s.length;return l<0||l>=u?e?"":void 0:(i=s.charCodeAt(l))<55296||i>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):i:e?s.slice(l,l+2):a-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},4532:(e,t,r)=>{var n=r(661);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},3295:(e,t,r)=>{var n=r(4353),o=r(3067),i=r(6190),a=Math.ceil,s=function(e){return function(t,r,s){var l,u,c=String(i(t)),d=c.length,p=void 0===s?" ":String(s),f=n(r);return f<=d||""==p?c:(l=f-d,(u=o.call(p,a(l/p.length))).length>l&&(u=u.slice(0,l)),e?c+u:u+c)}};e.exports={start:s(!1),end:s(!0)}},3067:(e,t,r)=>{"use strict";var n=r(4072),o=r(6190);e.exports=function(e){var t=String(o(this)),r="",i=n(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(r+=t);return r}},4128:(e,t,r)=>{var n=r(4330),o=r(7612);e.exports=function(e){return n((function(){return!!o[e]()||"​᠎"!="​᠎"[e]()||o[e].name!==e}))}},1380:(e,t,r)=>{var n=r(6190),o="["+r(7612)+"]",i=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),s=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(i,"")),2&e&&(r=r.replace(a,"")),r}};e.exports={start:s(1),end:s(2),trim:s(3)}},4869:(e,t,r)=>{var n,i,a,s=r(4380),l=r(4330),u=r(1466),c=r(7162),d=r(8370),p=r(5692),f=r(3986),h=s.location,_=s.setImmediate,g=s.clearImmediate,v=s.process,m=s.MessageChannel,y=s.Dispatch,b=0,w={},A="onreadystatechange",E=function(e){if(w.hasOwnProperty(e)){var t=w[e];delete w[e],t()}},I=function(e){return function(){E(e)}},S=function(e){E(e.data)},C=function(e){s.postMessage(e+"",h.protocol+"//"+h.host)};_&&g||(_=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return w[++b]=function(){("function"==typeof e?e:o(e)).apply(void 0,t)},n(b),b},g=function(e){delete w[e]},f?n=function(e){v.nextTick(I(e))}:y&&y.now?n=function(e){y.now(I(e))}:m&&!p?(a=(i=new m).port2,i.port1.onmessage=S,n=u(a.postMessage,a,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts&&h&&"file:"!==h.protocol&&!l(C)?(n=C,s.addEventListener("message",S,!1)):n=A in d("script")?function(e){c.appendChild(d("script"))[A]=function(){c.removeChild(this),E(e)}}:function(e){setTimeout(I(e),0)}),e.exports={set:_,clear:g}},6156:(e,t,r)=>{var n=r(4072),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},2961:(e,t,r)=>{var n=r(4072),o=r(4353);e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=o(t);if(t!==r)throw RangeError("Wrong length or index");return r}},4749:(e,t,r)=>{var n=r(3043),o=r(6190);e.exports=function(e){return n(o(e))}},4072:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},4353:(e,t,r)=>{var n=r(4072),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},5141:(e,t,r)=>{var n=r(6190);e.exports=function(e){return Object(n(e))}},1477:(e,t,r)=>{var n=r(1048);e.exports=function(e,t){var r=n(e);if(r%t)throw RangeError("Wrong offset");return r}},1048:(e,t,r)=>{var n=r(4072);e.exports=function(e){var t=n(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},5698:(e,t,r)=>{var n=r(3394);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},7427:(e,t,r)=>{var n={};n[r(3461)("toStringTag")]="z",e.exports="[object z]"===String(n)},9140:(e,t,r)=>{"use strict";var n=r(6753),o=r(4380),i=r(1644),a=r(9668),s=r(9064),l=r(8806),u=r(2378),c=r(1074),d=r(8528),p=r(4353),f=r(2961),h=r(1477),_=r(5698),g=r(2582),v=r(9085),m=r(3394),y=r(8561),b=r(8476),w=r(9819).f,A=r(9627),E=r(7139).forEach,I=r(8505),S=r(4142),C=r(294),T=r(9676),O=r(2612),x=T.get,N=T.set,R=S.f,P=C.f,D=Math.round,L=o.RangeError,B=l.ArrayBuffer,k=l.DataView,M=s.NATIVE_ARRAY_BUFFER_VIEWS,F=s.TYPED_ARRAY_TAG,j=s.TypedArray,U=s.TypedArrayPrototype,$=s.aTypedArrayConstructor,W=s.isTypedArray,q="BYTES_PER_ELEMENT",H="Wrong length",G=function(e,t){for(var r=0,n=t.length,o=new($(e))(n);n>r;)o[r]=t[r++];return o},Q=function(e,t){R(e,t,{get:function(){return x(this)[t]}})},z=function(e){var t;return e instanceof B||"ArrayBuffer"==(t=v(e))||"SharedArrayBuffer"==t},Y=function(e,t){return W(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},K=function(e,t){return Y(e,t=_(t,!0))?c(2,e[t]):P(e,t)},V=function(e,t,r){return!(Y(e,t=_(t,!0))&&m(r)&&g(r,"value"))||g(r,"get")||g(r,"set")||r.configurable||g(r,"writable")&&!r.writable||g(r,"enumerable")&&!r.enumerable?R(e,t,r):(e[t]=r.value,e)};i?(M||(C.f=K,S.f=V,Q(U,"buffer"),Q(U,"byteOffset"),Q(U,"byteLength"),Q(U,"length")),n({target:"Object",stat:!0,forced:!M},{getOwnPropertyDescriptor:K,defineProperty:V}),e.exports=function(e,t,r){var i=e.match(/\d+$/)[0]/8,s=e+(r?"Clamped":"")+"Array",l="get"+e,c="set"+e,_=o[s],g=_,v=g&&g.prototype,S={},C=function(e,t){R(e,t,{get:function(){return function(e,t){var r=x(e);return r.view[l](t*i+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var o=x(e);r&&(n=(n=D(n))<0?0:n>255?255:255&n),o.view[c](t*i+o.byteOffset,n,!0)}(this,t,e)},enumerable:!0})};M?a&&(g=t((function(e,t,r,n){return u(e,g,s),O(m(t)?z(t)?void 0!==n?new _(t,h(r,i),n):void 0!==r?new _(t,h(r,i)):new _(t):W(t)?G(g,t):A.call(g,t):new _(f(t)),e,g)})),b&&b(g,j),E(w(_),(function(e){e in g||d(g,e,_[e])})),g.prototype=v):(g=t((function(e,t,r,n){u(e,g,s);var o,a,l,c=0,d=0;if(m(t)){if(!z(t))return W(t)?G(g,t):A.call(g,t);o=t,d=h(r,i);var _=t.byteLength;if(void 0===n){if(_%i)throw L(H);if((a=_-d)<0)throw L(H)}else if((a=p(n)*i)+d>_)throw L(H);l=a/i}else l=f(t),o=new B(a=l*i);for(N(e,{buffer:o,byteOffset:d,byteLength:a,length:l,view:new k(o)});c<l;)C(e,c++)})),b&&b(g,j),v=g.prototype=y(U)),v.constructor!==g&&d(v,"constructor",g),F&&d(v,F,s),S[s]=g,n({global:!0,forced:g!=_,sham:!M},S),q in g||d(g,q,i),q in v||d(v,q,i),I(s)}):e.exports=function(){}},9668:(e,t,r)=>{var n=r(4380),o=r(4330),i=r(5987),a=r(9064).NATIVE_ARRAY_BUFFER_VIEWS,s=n.ArrayBuffer,l=n.Int8Array;e.exports=!a||!o((function(){l(1)}))||!o((function(){new l(-1)}))||!i((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||o((function(){return 1!==new l(new s(2),1,void 0).length}))},9627:(e,t,r)=>{var n=r(5141),o=r(4353),i=r(5225),a=r(588),s=r(1466),l=r(9064).aTypedArrayConstructor;e.exports=function(e){var t,r,u,c,d,p,f=n(e),h=arguments.length,_=h>1?arguments[1]:void 0,g=void 0!==_,v=i(f);if(null!=v&&!a(v))for(p=(d=v.call(f)).next,f=[];!(c=p.call(d)).done;)f.push(c.value);for(g&&h>2&&(_=s(_,arguments[2],2)),r=o(f.length),u=new(l(this))(r),t=0;r>t;t++)u[t]=g?_(f[t],t):f[t];return u}},992:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+r).toString(36)}},7665:(e,t,r)=>{var n=r(5845);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},1806:(e,t,r)=>{var n=r(3461);t.f=n},3461:(e,t,r)=>{var n=r(4380),o=r(138),i=r(2582),a=r(992),s=r(5845),l=r(7665),u=o("wks"),c=n.Symbol,d=l?c:c&&c.withoutSetter||a;e.exports=function(e){return i(u,e)&&(s||"string"==typeof u[e])||(s&&i(c,e)?u[e]=c[e]:u[e]=d("Symbol."+e)),u[e]}},7612:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},4521:(e,t,r)=>{"use strict";var n=r(6753),o=r(4879),i=r(8476),a=r(8561),s=r(8528),l=r(1074),u=r(3984),c=function(e,t){var r=this;if(!(r instanceof c))return new c(e,t);i&&(r=i(new Error(void 0),o(r))),void 0!==t&&s(r,"message",String(t));var n=[];return u(e,n.push,{that:n}),s(r,"errors",n),r};c.prototype=a(Error.prototype,{constructor:l(5,c),message:l(5,""),name:l(5,"AggregateError")}),n({global:!0},{AggregateError:c})},1142:(e,t,r)=>{"use strict";var n=r(6753),o=r(4380),i=r(8806),a=r(8505),s="ArrayBuffer",l=i[s];n({global:!0,forced:o[s]!==l},{ArrayBuffer:l}),a(s)},9525:(e,t,r)=>{"use strict";var n=r(6753),o=r(4330),i=r(8806),a=r(372),s=r(6156),l=r(4353),u=r(1749),c=i.ArrayBuffer,d=i.DataView,p=c.prototype.slice;n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o((function(){return!new c(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==p&&void 0===t)return p.call(a(this),e);for(var r=a(this).byteLength,n=s(e,r),o=s(void 0===t?r:t,r),i=new(u(this,c))(l(o-n)),f=new d(this),h=new d(i),_=0;n<o;)h.setUint8(_++,f.getUint8(n++));return i}})},685:(e,t,r)=>{"use strict";var n=r(6753),o=r(6614),i=r(5141),a=r(4353),s=r(2799),l=r(5484);n({target:"Array",proto:!0},{flatMap:function(e){var t,r=i(this),n=a(r.length);return s(e),(t=l(r,0)).length=o(t,r,r,n,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},5091:(e,t,r)=>{"use strict";var n=r(6753),o=r(6614),i=r(5141),a=r(4353),s=r(4072),l=r(5484);n({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=i(this),r=a(t.length),n=l(t,0);return n.length=o(n,t,t,r,0,void 0===e?1:s(e)),n}})},3683:(e,t,r)=>{"use strict";var n=r(6753),o=r(4067).right,i=r(9813),a=r(2136),s=r(3986);n({target:"Array",proto:!0,forced:!i("reduceRight")||!s&&a>79&&a<83},{reduceRight:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},1456:(e,t,r)=>{"use strict";var n=r(6753),o=r(4067).left,i=r(9813),a=r(2136),s=r(3986);n({target:"Array",proto:!0,forced:!i("reduce")||!s&&a>79&&a<83},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},9293:(e,t,r)=>{"use strict";var n=r(6753),o=r(3396),i=[].reverse,a=[1,2];n({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return o(this)&&(this.length=this.length),i.call(this)}})},8495:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(5141),a=r(4353),s=r(4330),l=r(9091),u=r(9813),c=r(6173),d=r(5308),p=r(2136),f=r(9632),h=[],_=h.sort,g=s((function(){h.sort(void 0)})),v=s((function(){h.sort(null)})),m=u("sort"),y=!s((function(){if(p)return p<70;if(!(c&&c>3)){if(d)return!0;if(f)return f<603;var e,t,r,n,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)h.push({k:t+n,v:r})}for(h.sort((function(e,t){return t.v-e.v})),n=0;n<h.length;n++)t=h[n].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}}));n({target:"Array",proto:!0,forced:g||!v||!m||!y},{sort:function(e){void 0!==e&&o(e);var t=i(this);if(y)return void 0===e?_.call(t):_.call(t,e);var r,n,s=[],u=a(t.length);for(n=0;n<u;n++)n in t&&s.push(t[n]);for(s=l(s,function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:String(t)>String(r)?1:-1}}(e)),r=s.length,n=0;n<r;)t[n]=s[n++];for(;n<u;)delete t[n++];return t}})},7703:(e,t,r)=>{r(6964)("flatMap")},5150:(e,t,r)=>{r(6964)("flat")},560:(e,t,r)=>{r(6753)({global:!0},{globalThis:r(4380)})},7516:(e,t,r)=>{var n=r(6753),o=r(6274),i=r(4330),a=o("JSON","stringify"),s=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,u=/^[\uDC00-\uDFFF]$/,c=function(e,t,r){var n=r.charAt(t-1),o=r.charAt(t+1);return l.test(e)&&!u.test(o)||u.test(e)&&!l.test(n)?"\\u"+e.charCodeAt(0).toString(16):e},d=i((function(){return'"\\udf06\\ud834"'!==a("\udf06\ud834")||'"\\udead"'!==a("\udead")}));a&&n({target:"JSON",stat:!0,forced:d},{stringify:function(e,t,r){var n=a.apply(null,arguments);return"string"==typeof n?n.replace(s,c):n}})},4541:(e,t,r)=>{var n=r(6753),o=Math.hypot,i=Math.abs,a=Math.sqrt;n({target:"Math",stat:!0,forced:!!o&&o(1/0,NaN)!==1/0},{hypot:function(e,t){for(var r,n,o=0,s=0,l=arguments.length,u=0;s<l;)u<(r=i(arguments[s++]))?(o=o*(n=u/r)*n+1,u=r):o+=r>0?(n=r/u)*n:r;return u===1/0?1/0:u*a(o)}})},6328:(e,t,r)=>{var n=r(6753),o=r(8787);n({target:"Number",stat:!0,forced:Number.parseFloat!=o},{parseFloat:o})},1358:(e,t,r)=>{var n=r(6753),o=r(5686).entries;n({target:"Object",stat:!0},{entries:function(e){return o(e)}})},9983:(e,t,r)=>{var n=r(6753),o=r(3984),i=r(7556);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return o(e,(function(e,r){i(t,e,r)}),{AS_ENTRIES:!0}),t}})},842:(e,t,r)=>{var n=r(6753),o=r(5686).values;n({target:"Object",stat:!0},{values:function(e){return o(e)}})},9356:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(3288),a=r(561),s=r(3984);n({target:"Promise",stat:!0},{allSettled:function(e){var t=this,r=i.f(t),n=r.resolve,l=r.reject,u=a((function(){var r=o(t.resolve),i=[],a=0,l=1;s(e,(function(e){var o=a++,s=!1;i.push(void 0),l++,r.call(t,e).then((function(e){s||(s=!0,i[o]={status:"fulfilled",value:e},--l||n(i))}),(function(e){s||(s=!0,i[o]={status:"rejected",reason:e},--l||n(i))}))})),--l||n(i)}));return u.error&&l(u.value),r.promise}})},1773:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(6274),a=r(3288),s=r(561),l=r(3984),u="No one promise resolved";n({target:"Promise",stat:!0},{any:function(e){var t=this,r=a.f(t),n=r.resolve,c=r.reject,d=s((function(){var r=o(t.resolve),a=[],s=0,d=1,p=!1;l(e,(function(e){var o=s++,l=!1;a.push(void 0),d++,r.call(t,e).then((function(e){l||p||(p=!0,n(e))}),(function(e){l||p||(l=!0,a[o]=e,--d||c(new(i("AggregateError"))(a,u)))}))})),--d||c(new(i("AggregateError"))(a,u))}));return d.error&&c(d.value),r.promise}})},7691:(e,t,r)=>{"use strict";var n=r(6753),o=r(3481),i=r(3535),a=r(4330),s=r(6274),l=r(1749),u=r(3443),c=r(9059);if(n({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=l(this,s("Promise")),r="function"==typeof e;return this.then(r?function(r){return u(t,e()).then((function(){return r}))}:e,r?function(r){return u(t,e()).then((function(){throw r}))}:e)}}),!o&&"function"==typeof i){var d=s("Promise").prototype.finally;i.prototype.finally!==d&&c(i.prototype,"finally",d,{unsafe:!0})}},5470:(e,t,r)=>{"use strict";var n,o,i,a,s=r(6753),l=r(3481),u=r(4380),c=r(6274),d=r(3535),p=r(9059),f=r(6901),h=r(8476),_=r(923),g=r(8505),v=r(3394),m=r(2799),y=r(2378),b=r(5487),w=r(3984),A=r(5987),E=r(1749),I=r(4869).set,S=r(1684),C=r(3443),T=r(916),O=r(3288),x=r(561),N=r(9676),R=r(5476),P=r(3461),D=r(8623),L=r(3986),B=r(2136),k=P("species"),M="Promise",F=N.get,j=N.set,U=N.getterFor(M),$=d&&d.prototype,W=d,q=$,H=u.TypeError,G=u.document,Q=u.process,z=O.f,Y=z,K=!!(G&&G.createEvent&&u.dispatchEvent),V="function"==typeof PromiseRejectionEvent,J="unhandledrejection",X=!1,Z=R(M,(function(){var e=b(W)!==String(W);if(!e&&66===B)return!0;if(l&&!q.finally)return!0;if(B>=51&&/native code/.test(W))return!1;var t=new W((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(t.constructor={})[k]=r,!(X=t.then((function(){}))instanceof r)||!e&&D&&!V})),ee=Z||!A((function(e){W.all(e).catch((function(){}))})),te=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},re=function(e,t){if(!e.notified){e.notified=!0;var r=e.reactions;S((function(){for(var n=e.value,o=1==e.state,i=0;r.length>i;){var a,s,l,u=r[i++],c=o?u.ok:u.fail,d=u.resolve,p=u.reject,f=u.domain;try{c?(o||(2===e.rejection&&ae(e),e.rejection=1),!0===c?a=n:(f&&f.enter(),a=c(n),f&&(f.exit(),l=!0)),a===u.promise?p(H("Promise-chain cycle")):(s=te(a))?s.call(a,d,p):d(a)):p(n)}catch(e){f&&!l&&f.exit(),p(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&oe(e)}))}},ne=function(e,t,r){var n,o;K?((n=G.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),u.dispatchEvent(n)):n={promise:t,reason:r},!V&&(o=u["on"+e])?o(n):e===J&&T("Unhandled promise rejection",r)},oe=function(e){I.call(u,(function(){var t,r=e.facade,n=e.value;if(ie(e)&&(t=x((function(){L?Q.emit("unhandledRejection",n,r):ne(J,r,n)})),e.rejection=L||ie(e)?2:1,t.error))throw t.value}))},ie=function(e){return 1!==e.rejection&&!e.parent},ae=function(e){I.call(u,(function(){var t=e.facade;L?Q.emit("rejectionHandled",t):ne("rejectionhandled",t,e.value)}))},se=function(e,t,r){return function(n){e(t,n,r)}},le=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,re(e,!0))},ue=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw H("Promise can't be resolved itself");var n=te(t);n?S((function(){var r={done:!1};try{n.call(t,se(ue,r,e),se(le,r,e))}catch(t){le(r,t,e)}})):(e.value=t,e.state=1,re(e,!1))}catch(t){le({done:!1},t,e)}}};if(Z&&(q=(W=function(e){y(this,W,M),m(e),n.call(this);var t=F(this);try{e(se(ue,t),se(le,t))}catch(e){le(t,e)}}).prototype,(n=function(e){j(this,{type:M,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=f(q,{then:function(e,t){var r=U(this),n=z(E(this,W));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=L?Q.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&re(r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n,t=F(e);this.promise=e,this.resolve=se(ue,t),this.reject=se(le,t)},O.f=z=function(e){return e===W||e===i?new o(e):Y(e)},!l&&"function"==typeof d&&$!==Object.prototype)){a=$.then,X||(p($,"then",(function(e,t){var r=this;return new W((function(e,t){a.call(r,e,t)})).then(e,t)}),{unsafe:!0}),p($,"catch",q.catch,{unsafe:!0}));try{delete $.constructor}catch(e){}h&&h($,q)}s({global:!0,wrap:!0,forced:Z},{Promise:W}),_(W,M,!1,!0),g(M),i=c(M),s({target:M,stat:!0,forced:Z},{reject:function(e){var t=z(this);return t.reject.call(void 0,e),t.promise}}),s({target:M,stat:!0,forced:l||Z},{resolve:function(e){return C(l&&this===i?W:this,e)}}),s({target:M,stat:!0,forced:ee},{all:function(e){var t=this,r=z(t),n=r.resolve,o=r.reject,i=x((function(){var r=m(t.resolve),i=[],a=0,s=1;w(e,(function(e){var l=a++,u=!1;i.push(void 0),s++,r.call(t,e).then((function(e){u||(u=!0,i[l]=e,--s||n(i))}),o)})),--s||n(i)}));return i.error&&o(i.value),r.promise},race:function(e){var t=this,r=z(t),n=r.reject,o=x((function(){var o=m(t.resolve);w(e,(function(e){o.call(t,e).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}})},2266:(e,t,r)=>{var n=r(6753),o=r(4380),i=r(923);n({global:!0},{Reflect:{}}),i(o.Reflect,"Reflect",!0)},8827:(e,t,r)=>{var n=r(1644),o=r(4380),i=r(5476),a=r(2612),s=r(8528),l=r(4142).f,u=r(9819).f,c=r(8410),d=r(2530),p=r(4016),f=r(9059),h=r(4330),_=r(2582),g=r(9676).enforce,v=r(8505),m=r(3461),y=r(2198),b=r(5618),w=m("match"),A=o.RegExp,E=A.prototype,I=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,S=/a/g,C=/a/g,T=new A(S)!==S,O=p.UNSUPPORTED_Y,x=n&&(!T||O||y||b||h((function(){return C[w]=!1,A(S)!=S||A(C)==C||"/a/i"!=A(S,"i")})));if(i("RegExp",x)){for(var N=function(e,t){var r,n,o,i,l,u,p=this instanceof N,f=c(e),h=void 0===t,v=[],m=e;if(!p&&f&&h&&e.constructor===N)return e;if((f||e instanceof N)&&(e=e.source,h&&(t="flags"in m?m.flags:d.call(m))),e=void 0===e?"":String(e),t=void 0===t?"":String(t),m=e,y&&"dotAll"in S&&(n=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,"")),r=t,O&&"sticky"in S&&(o=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,"")),b&&(i=function(e){for(var t,r=e.length,n=0,o="",i=[],a={},s=!1,l=!1,u=0,c="";n<=r;n++){if("\\"===(t=e.charAt(n)))t+=e.charAt(++n);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:I.test(e.slice(n+1))&&(n+=2,l=!0),o+=t,u++;continue;case">"===t&&l:if(""===c||_(a,c))throw new SyntaxError("Invalid capture group name");a[c]=!0,i.push([c,u]),l=!1,c="";continue}l?c+=t:o+=t}return[o,i]}(e),e=i[0],v=i[1]),l=a(A(e,t),p?this:E,N),(n||o||v.length)&&(u=g(l),n&&(u.dotAll=!0,u.raw=N(function(e){for(var t,r=e.length,n=0,o="",i=!1;n<=r;n++)"\\"!==(t=e.charAt(n))?i||"."!==t?("["===t?i=!0:"]"===t&&(i=!1),o+=t):o+="[\\s\\S]":o+=t+e.charAt(++n);return o}(e),r)),o&&(u.sticky=!0),v.length&&(u.groups=v)),e!==m)try{s(l,"source",""===m?"(?:)":m)}catch(e){}return l},R=function(e){e in N||l(N,e,{configurable:!0,get:function(){return A[e]},set:function(t){A[e]=t}})},P=u(A),D=0;P.length>D;)R(P[D++]);E.constructor=N,N.prototype=E,f(o,"RegExp",N)}v("RegExp")},6314:(e,t,r)=>{var n=r(1644),o=r(2198),i=r(4142).f,a=r(9676).get,s=RegExp.prototype;n&&o&&i(s,"dotAll",{configurable:!0,get:function(){if(this!==s){if(this instanceof RegExp)return!!a(this).dotAll;throw TypeError("Incompatible receiver, RegExp required")}}})},9437:(e,t,r)=>{"use strict";var n=r(6753),o=r(7879);n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},6559:(e,t,r)=>{var n=r(1644),o=r(4142),i=r(2530),a=r(4330);n&&a((function(){return"sy"!==Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get.call({dotAll:!0,sticky:!0})}))&&o.f(RegExp.prototype,"flags",{configurable:!0,get:i})},3187:(e,t,r)=>{"use strict";var n=r(6753),o=r(8859),i=r(6190),a=r(4353),s=r(2799),l=r(372),u=r(4849),c=r(8410),d=r(2530),p=r(8528),f=r(4330),h=r(3461),_=r(1749),g=r(8501),v=r(9676),m=r(3481),y=h("matchAll"),b="RegExp String",w=b+" Iterator",A=v.set,E=v.getterFor(w),I=RegExp.prototype,S=I.exec,C="".matchAll,T=!!C&&!f((function(){"a".matchAll(/./)})),O=o((function(e,t,r,n){A(this,{type:w,regexp:e,string:t,global:r,unicode:n,done:!1})}),b,(function(){var e=E(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,r=e.string,n=function(e,t){var r,n=e.exec;if("function"==typeof n){if("object"!=typeof(r=n.call(e,t)))throw TypeError("Incorrect exec result");return r}return S.call(e,t)}(t,r);return null===n?{value:void 0,done:e.done=!0}:e.global?(""==String(n[0])&&(t.lastIndex=g(r,a(t.lastIndex),e.unicode)),{value:n,done:!1}):(e.done=!0,{value:n,done:!1})})),x=function(e){var t,r,n,o,i,s,u=l(this),c=String(e);return t=_(u,RegExp),void 0===(r=u.flags)&&u instanceof RegExp&&!("flags"in I)&&(r=d.call(u)),n=void 0===r?"":String(r),o=new t(t===RegExp?u.source:u,n),i=!!~n.indexOf("g"),s=!!~n.indexOf("u"),o.lastIndex=a(u.lastIndex),new O(o,c,i,s)};n({target:"String",proto:!0,forced:T},{matchAll:function(e){var t,r,n,o=i(this);if(null!=e){if(c(e)&&!~String(i("flags"in I?e.flags:d.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(T)return C.apply(o,arguments);if(void 0===(r=e[y])&&m&&"RegExp"==u(e)&&(r=x),null!=r)return s(r).call(e,o)}else if(T)return C.apply(o,arguments);return t=String(o),n=new RegExp(e,"g"),m?x.call(n,t):n[y](t)}}),m||y in I||p(I,y,x)},7506:(e,t,r)=>{"use strict";var n=r(6753),o=r(3295).end;n({target:"String",proto:!0,forced:r(4532)},{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},416:(e,t,r)=>{"use strict";var n=r(6753),o=r(3295).start;n({target:"String",proto:!0,forced:r(4532)},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},235:(e,t,r)=>{"use strict";var n=r(6753),o=r(6190),i=r(8410),a=r(2530),s=r(1884),l=r(3461),u=r(3481),c=l("replace"),d=RegExp.prototype,p=Math.max,f=function(e,t,r){return r>e.length?-1:""===t?r:e.indexOf(t,r)};n({target:"String",proto:!0},{replaceAll:function(e,t){var r,n,l,h,_,g,v,m,y=o(this),b=0,w=0,A="";if(null!=e){if((r=i(e))&&!~String(o("flags"in d?e.flags:a.call(e))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(n=e[c]))return n.call(e,y,t);if(u&&r)return String(y).replace(e,t)}for(l=String(y),h=String(e),(_="function"==typeof t)||(t=String(t)),g=h.length,v=p(1,g),b=f(l,h,0);-1!==b;)m=_?String(t(h,b,l)):s(h,l,b,[],void 0,t),A+=l.slice(w,b)+m,w=b+g,b=f(l,h,b+v);return w<l.length&&(A+=l.slice(w)),A}})},5441:(e,t,r)=>{"use strict";var n=r(225),o=r(4330),i=r(372),a=r(4353),s=r(4072),l=r(6190),u=r(8501),c=r(1884),d=r(3519),p=r(3461)("replace"),f=Math.max,h=Math.min,_="$0"==="a".replace(/./,"$0"),g=!!/./[p]&&""===/./[p]("a","$0");n("replace",(function(e,t,r){var n=g?"$":"$0";return[function(e,r){var n=l(this),o=null==e?void 0:e[p];return void 0!==o?o.call(e,n,r):t.call(String(n),e,r)},function(e,o){if("string"==typeof o&&-1===o.indexOf(n)&&-1===o.indexOf("$<")){var l=r(t,this,e,o);if(l.done)return l.value}var p=i(this),_=String(e),g="function"==typeof o;g||(o=String(o));var v=p.global;if(v){var m=p.unicode;p.lastIndex=0}for(var y=[];;){var b=d(p,_);if(null===b)break;if(y.push(b),!v)break;""===String(b[0])&&(p.lastIndex=u(_,a(p.lastIndex),m))}for(var w,A="",E=0,I=0;I<y.length;I++){b=y[I];for(var S=String(b[0]),C=f(h(s(b.index),_.length),0),T=[],O=1;O<b.length;O++)T.push(void 0===(w=b[O])?w:String(w));var x=b.groups;if(g){var N=[S].concat(T,C,_);void 0!==x&&N.push(x);var R=String(o.apply(void 0,N))}else R=c(S,_,C,T,x,o);C>=E&&(A+=_.slice(E,C)+R,E=C+S.length)}return A+_.slice(E)}]}),!!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!_||g)},9103:(e,t,r)=>{"use strict";var n=r(6753),o=r(1380).end,i=r(4128)("trimEnd"),a=i?function(){return o(this)}:"".trimEnd;n({target:"String",proto:!0,forced:i},{trimEnd:a,trimRight:a})},9928:(e,t,r)=>{"use strict";var n=r(6753),o=r(1380).start,i=r(4128)("trimStart"),a=i?function(){return o(this)}:"".trimStart;n({target:"String",proto:!0,forced:i},{trimStart:a,trimLeft:a})},4057:(e,t,r)=>{"use strict";var n=r(6753),o=r(1380).trim;n({target:"String",proto:!0,forced:r(4128)("trim")},{trim:function(){return o(this)}})},8610:(e,t,r)=>{r(1205)("asyncIterator")},1751:(e,t,r)=>{"use strict";var n=r(6753),o=r(1644),i=r(4380),a=r(2582),s=r(3394),l=r(4142).f,u=r(8646),c=i.Symbol;if(o&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var d={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new c(e):void 0===e?c():c(e);return""===e&&(d[t]=!0),t};u(p,c);var f=p.prototype=c.prototype;f.constructor=p;var h=f.toString,_="Symbol(test)"==String(c("test")),g=/^Symbol\((.*)\)[^)]+$/;l(f,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=h.call(e);if(a(d,e))return"";var r=_?t.slice(7,-1):t.replace(g,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:p})}},4017:(e,t,r)=>{r(1205)("matchAll")},5839:(e,t,r)=>{"use strict";var n=r(9064),o=r(9625),i=n.aTypedArray;(0,n.exportTypedArrayMethod)("fill",(function(e){return o.apply(i(this),arguments)}))},9969:(e,t,r)=>{r(9140)("Float32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},9369:(e,t,r)=>{r(9140)("Float64",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},3600:(e,t,r)=>{"use strict";var n=r(9668);(0,r(9064).exportTypedArrayStaticMethod)("from",r(9627),n)},5954:(e,t,r)=>{r(9140)("Int16",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},8218:(e,t,r)=>{r(9140)("Int32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},9005:(e,t,r)=>{r(9140)("Int8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},33:(e,t,r)=>{"use strict";var n=r(9064),o=r(9668),i=n.aTypedArrayConstructor;(0,n.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,r=new(i(this))(t);t>e;)r[e]=arguments[e++];return r}),o)},2032:(e,t,r)=>{"use strict";var n=r(9064),o=r(4353),i=r(1477),a=r(5141),s=r(4330),l=n.aTypedArray;(0,n.exportTypedArrayMethod)("set",(function(e){l(this);var t=i(arguments.length>1?arguments[1]:void 0,1),r=this.length,n=a(e),s=o(n.length),u=0;if(s+t>r)throw RangeError("Wrong length");for(;u<s;)this[t+u]=n[u++]}),s((function(){new Int8Array(1).set({})})))},4433:(e,t,r)=>{"use strict";var n=r(9064),o=r(4380),i=r(4330),a=r(2799),s=r(4353),l=r(9091),u=r(6173),c=r(5308),d=r(2136),p=r(9632),f=n.aTypedArray,h=n.exportTypedArrayMethod,_=o.Uint16Array,g=_&&_.prototype.sort,v=!!g&&!i((function(){var e=new _(2);e.sort(null),e.sort({})})),m=!!g&&!i((function(){if(d)return d<74;if(u)return u<67;if(c)return!0;if(p)return p<602;var e,t,r=new _(516),n=Array(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,n[e]=e-2*t+3;for(r.sort((function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(r[e]!==n[e])return!0}));h("sort",(function(e){var t=this;if(void 0!==e&&a(e),m)return g.call(t,e);f(t);var r,n=s(t.length),o=Array(n);for(r=0;r<n;r++)o[r]=t[r];for(o=l(t,function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!=r?-1:t!=t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}}(e)),r=0;r<n;r++)t[r]=o[r];return t}),!m||v)},7969:(e,t,r)=>{r(9140)("Uint16",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},6438:(e,t,r)=>{r(9140)("Uint32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},8457:(e,t,r)=>{r(9140)("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},4439:(e,t,r)=>{r(9140)("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}),!0)},4916:(e,t,r)=>{r(4521)},6832:(e,t,r)=>{"use strict";var n=r(6753),o=r(5141),i=r(4353),a=r(4072),s=r(6964);n({target:"Array",proto:!0},{at:function(e){var t=o(this),r=i(t.length),n=a(e),s=n>=0?n:r+n;return s<0||s>=r?void 0:t[s]}}),s("at")},8591:(e,t,r)=>{"use strict";var n=r(6753),o=r(4832).findLastIndex,i=r(6964);n({target:"Array",proto:!0},{findLastIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("findLastIndex")},7193:(e,t,r)=>{"use strict";var n=r(6753),o=r(4832).findLast,i=r(6964);n({target:"Array",proto:!0},{findLast:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("findLast")},7002:(e,t,r)=>{"use strict";var n=r(6753),o=r(2378),i=r(8528),a=r(2582),s=r(3461),l=r(9415),u=r(3481),c=s("toStringTag"),d=function(){o(this,d)};d.prototype=l,a(l,c)||i(l,c,"AsyncIterator"),a(l,"constructor")&&l.constructor!==Object||i(l,"constructor",d),n({global:!0,forced:u},{AsyncIterator:d})},3982:(e,t,r)=>{"use strict";var n=r(6753),o=r(372),i=r(1048),a=r(7303)((function(e,t){var r=this;return new t((function(n,i){var a=function(){try{t.resolve(o(r.next.call(r.iterator,r.remaining?void 0:e))).then((function(e){try{o(e).done?(r.done=!0,n({done:!0,value:void 0})):r.remaining?(r.remaining--,a()):n({done:!1,value:e.value})}catch(e){i(e)}}),i)}catch(e){i(e)}};a()}))}));n({target:"AsyncIterator",proto:!0,real:!0},{drop:function(e){return new a({iterator:o(this),remaining:i(e)})}})},4457:(e,t,r)=>{"use strict";var n=r(6753),o=r(4445).every;n({target:"AsyncIterator",proto:!0,real:!0},{every:function(e){return o(this,e)}})},3655:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(372),a=r(7303)((function(e,t){var r=this,n=r.filterer;return new t((function(o,a){var s=function(){try{t.resolve(i(r.next.call(r.iterator,e))).then((function(e){try{if(i(e).done)r.done=!0,o({done:!0,value:void 0});else{var l=e.value;t.resolve(n(l)).then((function(e){e?o({done:!1,value:l}):s()}),a)}}catch(e){a(e)}}),a)}catch(e){a(e)}};s()}))}));n({target:"AsyncIterator",proto:!0,real:!0},{filter:function(e){return new a({iterator:i(this),filterer:o(e)})}})},3296:(e,t,r)=>{"use strict";var n=r(6753),o=r(4445).find;n({target:"AsyncIterator",proto:!0,real:!0},{find:function(e){return o(this,e)}})},5284:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(372),a=r(7303),s=r(153),l=a((function(e,t){var r,n,a=this,l=a.mapper;return new t((function(u,c){var d=function(){try{t.resolve(i(a.next.call(a.iterator,e))).then((function(e){try{i(e).done?(a.done=!0,u({done:!0,value:void 0})):t.resolve(l(e.value)).then((function(e){try{if(void 0!==(n=s(e)))return a.innerIterator=r=i(n.call(e)),a.innerNext=o(r.next),p();c(TypeError(".flatMap callback should return an iterable object"))}catch(e){c(e)}}),c)}catch(e){c(e)}}),c)}catch(e){c(e)}},p=function(){if(r=a.innerIterator)try{t.resolve(i(a.innerNext.call(r))).then((function(e){try{i(e).done?(a.innerIterator=a.innerNext=null,d()):u({done:!1,value:e.value})}catch(e){c(e)}}),c)}catch(e){c(e)}else d()};p()}))}));n({target:"AsyncIterator",proto:!0,real:!0},{flatMap:function(e){return new l({iterator:i(this),mapper:o(e),innerIterator:null,innerNext:null})}})},5143:(e,t,r)=>{"use strict";var n=r(6753),o=r(4445).forEach;n({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(e){return o(this,e)}})},4872:(e,t,r)=>{var n=r(6753),o=r(3759),i=r(2799),a=r(372),s=r(5141),l=r(7303),u=r(153),c=o.AsyncIterator,d=l((function(e){return a(this.next.call(this.iterator,e))}),!0);n({target:"AsyncIterator",stat:!0},{from:function(e){var t,r=s(e),n=u(r);if(null!=n){if((t=i(n).call(r))instanceof c)return t}else t=r;return new d({iterator:t})}})},4168:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(372),a=r(7303)((function(e,t){var r=this,n=r.mapper;return t.resolve(i(r.next.call(r.iterator,e))).then((function(e){return i(e).done?(r.done=!0,{done:!0,value:void 0}):t.resolve(n(e.value)).then((function(e){return{done:!1,value:e}}))}))}));n({target:"AsyncIterator",proto:!0,real:!0},{map:function(e){return new a({iterator:i(this),mapper:o(e)})}})},1731:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(372),a=r(6274)("Promise");n({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(e){var t=i(this),r=o(t.next),n=arguments.length<2,s=n?void 0:arguments[1];return o(e),new a((function(o,l){var u=function(){try{a.resolve(i(r.call(t))).then((function(t){try{if(i(t).done)n?l(TypeError("Reduce of empty iterator with no initial value")):o(s);else{var r=t.value;n?(n=!1,s=r,u()):a.resolve(e(s,r)).then((function(e){s=e,u()}),l)}}catch(e){l(e)}}),l)}catch(e){l(e)}};u()}))}})},534:(e,t,r)=>{"use strict";var n=r(6753),o=r(4445).some;n({target:"AsyncIterator",proto:!0,real:!0},{some:function(e){return o(this,e)}})},2216:(e,t,r)=>{"use strict";var n=r(6753),o=r(372),i=r(1048),a=r(7303)((function(e,t){var r,n,o=this.iterator;return this.remaining--?this.next.call(o,e):(n={done:!0,value:void 0},this.done=!0,void 0!==(r=o.return)?t.resolve(r.call(o)).then((function(){return n})):n)}));n({target:"AsyncIterator",proto:!0,real:!0},{take:function(e){return new a({iterator:o(this),remaining:i(e)})}})},5132:(e,t,r)=>{"use strict";var n=r(6753),o=r(4445).toArray;n({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return o(this)}})},5543:(e,t,r)=>{r(560)},4925:(e,t,r)=>{"use strict";var n=r(6753),o=r(4380),i=r(2378),a=r(8528),s=r(4330),l=r(2582),u=r(3461),c=r(2937).IteratorPrototype,d=r(3481),p=u("iterator"),f=u("toStringTag"),h=o.Iterator,_=d||"function"!=typeof h||h.prototype!==c||!s((function(){h({})})),g=function(){i(this,g)};d&&a(c={},p,(function(){return this})),l(c,f)||a(c,f,"Iterator"),!_&&l(c,"constructor")&&c.constructor!==Object||a(c,"constructor",g),g.prototype=c,n({global:!0,forced:_},{Iterator:g})},2141:(e,t,r)=>{"use strict";var n=r(6753),o=r(372),i=r(1048),a=r(8212)((function(e){for(var t,r=this.iterator,n=this.next;this.remaining;)if(this.remaining--,t=o(n.call(r)),this.done=!!t.done)return;if(t=o(n.call(r,e)),!(this.done=!!t.done))return t.value}));n({target:"Iterator",proto:!0,real:!0},{drop:function(e){return new a({iterator:o(this),remaining:i(e)})}})},2181:(e,t,r)=>{"use strict";var n=r(6753),o=r(3984),i=r(2799),a=r(372);n({target:"Iterator",proto:!0,real:!0},{every:function(e){return a(this),i(e),!o(this,(function(t,r){if(!e(t))return r()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},8073:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(372),a=r(8212),s=r(9841),l=a((function(e){for(var t,r,n=this.iterator,o=this.filterer,a=this.next;;){if(t=i(a.call(n,e)),this.done=!!t.done)return;if(r=t.value,s(n,o,r))return r}}));n({target:"Iterator",proto:!0,real:!0},{filter:function(e){return new l({iterator:i(this),filterer:o(e)})}})},106:(e,t,r)=>{"use strict";var n=r(6753),o=r(3984),i=r(2799),a=r(372);n({target:"Iterator",proto:!0,real:!0},{find:function(e){return a(this),i(e),o(this,(function(t,r){if(e(t))return r(t)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},735:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(372),a=r(5225),s=r(8212),l=r(2976),u=s((function(e){for(var t,r,n,s,u=this.iterator,c=this.mapper;;)try{if(s=this.innerIterator){if(!(t=i(this.innerNext.call(s))).done)return t.value;this.innerIterator=this.innerNext=null}if(t=i(this.next.call(u,e)),this.done=!!t.done)return;if(r=c(t.value),void 0===(n=a(r)))throw TypeError(".flatMap callback should return an iterable object");this.innerIterator=s=i(n.call(r)),this.innerNext=o(s.next)}catch(e){throw l(u),e}}));n({target:"Iterator",proto:!0,real:!0},{flatMap:function(e){return new u({iterator:i(this),mapper:o(e),innerIterator:null,innerNext:null})}})},8865:(e,t,r)=>{"use strict";var n=r(6753),o=r(3984),i=r(372);n({target:"Iterator",proto:!0,real:!0},{forEach:function(e){o(i(this),e,{IS_ITERATOR:!0})}})},1061:(e,t,r)=>{var n=r(6753),o=r(3759),i=r(2799),a=r(372),s=r(5141),l=r(8212),u=r(5225),c=o.Iterator,d=l((function(e){var t=a(this.next.call(this.iterator,e));if(!(this.done=!!t.done))return t.value}),!0);n({target:"Iterator",stat:!0},{from:function(e){var t,r=s(e),n=u(r);if(null!=n){if((t=i(n).call(r))instanceof c)return t}else t=r;return new d({iterator:t})}})},2044:(e,t,r)=>{"use strict";var n=r(6753),o=r(2799),i=r(372),a=r(8212),s=r(9841),l=a((function(e){var t=this.iterator,r=i(this.next.call(t,e));if(!(this.done=!!r.done))return s(t,this.mapper,r.value)}));n({target:"Iterator",proto:!0,real:!0},{map:function(e){return new l({iterator:i(this),mapper:o(e)})}})},7754:(e,t,r)=>{"use strict";var n=r(6753),o=r(3984),i=r(2799),a=r(372);n({target:"Iterator",proto:!0,real:!0},{reduce:function(e){a(this),i(e);var t=arguments.length<2,r=t?void 0:arguments[1];if(o(this,(function(n){t?(t=!1,r=n):r=e(r,n)}),{IS_ITERATOR:!0}),t)throw TypeError("Reduce of empty iterator with no initial value");return r}})},938:(e,t,r)=>{"use strict";var n=r(6753),o=r(3984),i=r(2799),a=r(372);n({target:"Iterator",proto:!0,real:!0},{some:function(e){return a(this),i(e),o(this,(function(t,r){if(e(t))return r()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},5749:(e,t,r)=>{"use strict";var n=r(6753),o=r(372),i=r(1048),a=r(8212),s=r(2976),l=a((function(e){var t=this.iterator;if(!this.remaining--)return this.done=!0,s(t);var r=o(this.next.call(t,e));return(this.done=!!r.done)?void 0:r.value}));n({target:"Iterator",proto:!0,real:!0},{take:function(e){return new l({iterator:o(this),remaining:i(e)})}})},9037:(e,t,r)=>{"use strict";var n=r(6753),o=r(3984),i=r(372),a=[].push;n({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return o(i(this),a,{that:e,IS_ITERATOR:!0}),e}})},2810:(e,t,r)=>{r(6753)({target:"Object",stat:!0},{hasOwn:r(2582)})},1848:(e,t,r)=>{r(9356)},4644:(e,t,r)=>{r(1773)},8767:(e,t,r)=>{r(3187)},4862:(e,t,r)=>{r(235)},9715:(e,t,r)=>{r(1205)("dispose")},9231:(e,t,r)=>{"use strict";var n=r(9064),o=r(4353),i=r(4072),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("at",(function(e){var t=a(this),r=o(t.length),n=i(e),s=n>=0?n:r+n;return s<0||s>=r?void 0:t[s]}))},4856:(e,t,r)=>{"use strict";var n=r(9064),o=r(4832).findLastIndex,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLastIndex",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},6486:(e,t,r)=>{"use strict";var n=r(9064),o=r(4832).findLast,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLast",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},4348:(e,t,r)=>{var n=r(7967);n.keys().forEach((e=>{_[e.substr(2)]=n(e)}))},4476:(e,t,r)=>{"use strict";r.r(t);r(1751),r(8610),r(4017),r(4521),r(5091),r(685),r(1456),r(3683),r(9293),r(8495),r(5150),r(7703),r(1142),r(9525),r(560),r(7516),r(4541),r(6328),r(1358),r(9983),r(842),r(5470),r(9356),r(1773),r(7691),r(2266),r(8827),r(6314),r(9437),r(6559),r(3187),r(7506),r(416),r(5441),r(235),r(4057),r(9103),r(9928),r(9969),r(9369),r(9005),r(5954),r(8218),r(8457),r(4439),r(7969),r(6438),r(5839),r(3600),r(33),r(2032),r(4433),r(4916),r(6832),r(7193),r(8591),r(5543),r(2810),r(1848),r(4644),r(8767),r(4862),r(9231),r(6486),r(4856),r(7002),r(3982),r(4457),r(3655),r(3296),r(5284),r(5143),r(4872),r(4168),r(1731),r(534),r(2216),r(5132),r(4925),r(2141),r(2181),r(8073),r(106),r(735),r(8865),r(1061),r(2044),r(7754),r(938),r(5749),r(9037),r(9715);["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((e=>{var t=globalThis[e];t&&t.name!==e&&Object.defineProperty(t,"name",{value:e})}))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new o("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{r.g.__polyfill_injecting=!0;var e=!1,t=!1;if(r.g.__wxConfig&&"string"==typeof r.g.__wxConfig.platform)"ios"===r.g.__wxConfig.platform.toLowerCase()?e=!0:"mac"===r.g.__wxConfig.platform.toLowerCase()&&(t=!0);else if("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent){var n=navigator.userAgent.toLowerCase();n.indexOf("iphone")>=0||n.indexOf("ipad")>=0?e=!0:n.indexOf("miniprogramenv/mac")>=0&&(t=!0)}var o=[];(e||t)&&(r.g.Promise=void 0,o.push("Promise")),r(2874)({usePolyfill:o,useNative:["WeakMap"]}),r(4476),r(4348),delete r.g.__polyfill_injecting})()})();var g=!1,v=function(e){e()},m,y;(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new o("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{e.d(r,{default:()=>nt});var a={};e.r(a),e.d(a,{convertToErrorObj:()=>X,emitFrameworkError:()=>ne,emitUnhandledError:()=>oe,emitUnhandledRejection:()=>Z,onFrameworkError:()=>ae,onUnhandledError:()=>se,onUnhandledRejection:()=>ie});var l=_.objectSpread2,u=e.n(l),d=e.g.__wxLibrary,p=e.g.__wxConfig,f=d.envType,g=d.contextType,v="Service"===f,y="WebView"===f,b="Worker"===f,w=y||v&&0===g.indexOf("App:"),A=v&&0===g.indexOf("Game:"),E=!!p.isIsolateContext,I=E&&v&&g.indexOf("MainContext")>=0,S=E&&v&&g.indexOf("SubContext")>=0,C=S&&g.indexOf("Safe")>=0,T=I||S,O="wxlib"===p.workerContentType,x=y||I||C||O,N=function(){var e,t,r=p.platform;if(!r&&"string"==typeof(null===(e=window)||void 0===e||null===(t=e.navigator)||void 0===t?void 0:t.userAgent)){var n=window.navigator.userAgent.toLowerCase();n.indexOf("devtools")>=0?r="devtools":n.indexOf("miniprogramenv/windows")>=0?r="windows":n.indexOf("miniprogramenv/mac")>=0?r="mac":n.indexOf("miniprogramenv/mina")>=0?r="mina":n.indexOf("iphone")>=0||n.indexOf("ipad")>=0?r="ios":n.indexOf("android")>=0&&(r="android")}return(r||"unknown").toLowerCase()}(),R=t,P={platform:N,SDKVersion:void 0===R||"develop"===R.version?"9.9.9":R.version,isIsolateContext:T,isGame:A,isApp:w,isMainContext:I,isSubContext:S,isSafeEnv:x,isService:v,isWebView:y,isWorker:b,isWidget:!1,typeStr:S?"SubContext":f,isWXLibWorker:O,workerType:"user",contextName:"",mayHaveSnapShot:!!d.mayHaveSnapshot},D=()=>{},L="devtools"===P.platform;"undefined"!=typeof performance&&performance.now;function B(e,t=(()=>D)){return e.reduce(((e,r)=>(e[r]=t(r),e)),{})}function k(){var t=m||e.g.__wxConfig;if(t&&"debug"in t&&void 0!==t.debug)return!!t.debug}var M=()=>{},F=["log","info","warn","error","debug"],j=B(F),U=["log","info","warn","error","profile","profileSync","traceBegin","traceEnd"],$=(()=>{var e=B(U);return e})(),W=$,q=Symbol("error"),H=Symbol("slow");class G{constructor(){this.$=Object.create(null),this.$$=Object.create(null)}onInternalEvent(e,t){var r=this.$$[e];return r?r.push(t):this.$$[e]=[t],this}emitPrivate(e,...t){var r=this.$$[e];return!!(r&&r.length>0)&&(r.forEach((e=>{try{e(...t)}catch(e){console.error("EventEmitter error:",e)}})),!0)}onError(e){return this.onInternalEvent(q,e),this}onSlow(e){return this.onInternalEvent(H,e),this}_privEmit(e,t,...r){var n=this.$[e];if(n&&n.length>0){var o,i=!1;for(var a of n){if(0!==a.count)try{var s=Date.now();o=a.cb(...r);var l=Date.now();l-s>G.SLOW_CALLBACK_THRESHOLD&&this.emitPrivate(H,e,s,l,a.cb)}catch(t){if(!this.emitPrivate(q,e,t))throw t}if(a.count>0&&a.count--,0===a.count&&(i=!0),!1===o&&t.cancelable)break}return i&&(this.$[e]=n.filter((e=>0!==e.count))),!0}return!1}emit(e,...t){return this._privEmit(e,{},...t)}emitCancelable(e,...t){return this._privEmit(e,{cancelable:!0},...t)}many(e,t,r,n={}){if(!t)return this;var o={count:r,cb:t},i=this.$[e];return i?n.prepend?i.unshift(o):i.push(o):this.$[e]=[o],this}on(e,t,r){return this.many(e,t,-1,r)}once(e,t,r){return this.many(e,t,1,r)}off(e,t){var r=this.$[e];if(!r)return!1;var n=r.findIndex((e=>e.cb===t));return!(n<0)&&(r.splice(n,1),!0)}}G.SLOW_CALLBACK_THRESHOLD=50;var Q=new G,z="unhandlederror",Y="unhandledrejection",K="frameworkerror",V=new WeakMap;var J=Object.prototype.hasOwnProperty;function X(e){var t;if(e&&"Object"===(null===(t=e.constructor)||void 0===t?void 0:t.name)&&"string"==typeof e.message&&"string"==typeof e.stack){var r=new Error(e.message);return Object.assign(r,e),r}return e}function Z(e,t){e=X(e),je.onLoad((()=>{Q.emit(Y,{reason:e,promise:t})||console.error("Uncaught (in promise)",e)}),!0)}var ee,te=!1,re=!1;function ne(e,t){if(e instanceof Error&&t&&(e.message=`${t} fail: ${e.message}`),e=X(e),m.isSnapshoting)throw e;je.onLoad((()=>{if(te)console.error("[ErrorHandler] recursive framework error detected.",e);else{te=!0;try{Q.emit(K,e)||oe(e)}catch(e){console.error("Framework",e)}te=!1}}),!0)}function oe(e){if(e=X(e),m.isSnapshoting)throw e;je.onLoad((()=>{if(re)console.error("[ErrorHandler] recursive uncaught error detected.",e);else{re=!0;try{Q.emit(z,e)||"windows"===m.platform&&"undefined"!=typeof WORKER_RUNTIME&&WORKER_RUNTIME&&4===m.appType||console.error("Uncaught",e)}catch(e){console.error("Uncaught",e)}re=!1}}),!0)}function ie(e){Q.on(Y,e)}function ae(e){Q.on(K,e)}function se(e){Q.on(z,e)}"object"==typeof(ee=e.g)&&"function"==typeof ee.addEventListener?(ee.addEventListener("unhandledrejection",(e=>{Z(e.reason,e.promise),e.reason&&e.preventDefault()})),ee.addEventListener("error",(e=>{var t,r;oe(e.error||{message:e.message,stack:`${e.message}\nEmpty stack, maybe muted error. (xweb=${(null===(t=ee.navigator)||void 0===t||null===(r=t.userAgent)||void 0===r?void 0:r.toUpperCase().indexOf("XWEB"))>=0})`}),e.error&&e.preventDefault()}))):void 0===ee.onunhandledrejection&&Object.defineProperty(ee,"onunhandledrejection",{value(e={}){var t,r;J.call(e,"type")?(t={type:e.type,reason:e.reason,promise:e.promise},(r=t.promise)&&(V.has(r)||setTimeout((()=>{var e=V.get(r);0===(null==e?void 0:e.type)&&Z(e.reason,e.promise),V.delete(r)}),0),V.set(r,t))):Z(e.reason,e.promise)}});var le,ue=JSON.parse,ce=JSON.stringify;function de(e){return ue(ce(e))}function pe(e){e.platform=P.platform,e.brand||"ios"!==e.platform||(e.brand="iPhone"),e.sdkVersion=e.SDKVersion=P.SDKVersion,e.isReady=!1,e.onReady=je.onStart}function fe(e){var r;pe(e),P.isSubContext||(e.preload=!0===e.preload),"number"==typeof e.pixelRatio?e.devicePixelRatio=e.pixelRatio:"number"==typeof e.devicePixelRatio&&(e.pixelRatio=e.devicePixelRatio);var n=null===(r=t.debugOptions)||void 0===r?void 0:r.overwriteExpt;n&&(e.expt=Object.assign(e.expt||{},n))}function he(e){if(fe(e),e.isReady=!0,e.appLaunchInfo=e.appLaunchInfo||{},e.preloadType=e.preloadType||e.appLaunchInfo.preloadType||e.preload,"ios"===e.platform){var t=(i=e.appLaunchInfo.clickTimestampInMs)?i+9782784e5-(new Date).getTimezoneOffset()/60*3600*1e3:0,r=Number.MAX_SAFE_INTEGER,n=e.instanceId;if(n)try{var o=n.split("&").filter((e=>0===e.indexOf("ts=")));o.length>0&&(r=parseInt(o[0].slice(3),10))}catch(e){ne(e,"parseInstanceId")}e.coldLaunchTime=Math.min(t,r)}else e.coldLaunchTime=e.appLaunchInfo.clickTimestamp||0;var i}var _e=!(null===(le=t.features)||void 0===le||!le.pruneWxConfigByPage),ge=Object.defineProperty,ve=["env","appLaunchInfo","ext","wxAppInfo","debug","entryPagePath","envVersion","tabBar","pages","page","accountInfo","global","platform","system","appType","networkTimeout","navigateToMiniProgramAppIdList","plugins","extAppid","host","prerender"];function me(e,t,r,n){ge(e,r,{configurable:!0,enumerable:!0,get(){if(r in t)return t[r];try{var e;j.warn("[__wxConfig usage] developer uses __wxConfig."+r),"function"==typeof(null===(e=i)||void 0===e?void 0:e.reportKeyValue)&&i.reportKeyValue({key:"DeprecatedAPI",value:"__wxConfig."+r,force:!0})}catch(e){ne(e,"report __wxConfig usage")}try{return"function"!=typeof n?n:n()}catch(e){return void ne(e,`read mock wxConfig.${r}`)}},set(e){t[r]=e}})}var ye=P.isSafeEnv,be=Object.create(null),we=P.isService?function(e){return new Proxy(e,{set(e,t,r,n){if("__siblings__"===t)return Reflect.set(e,t,r,n);var o=Reflect.get(e,"__siblings__",n);return Array.isArray(o)?(o.length>1&&j.log(`[WXConfig] write __wxConfig.${t.toString()}, sync to all contexts.`),o.forEach((e=>{Reflect.set(e,t,r)})),!0):Reflect.set(e,t,r,n)}})}(be):be,Ae=e=>{},Ee="wxConfig:updatePage";function Ie(t,r=!1){return Ae(!1),be.currentPhase="onStart",void 0===t||(r?(Object.assign(be,t),Object.defineProperty(be,"__siblings__",{value:t.__siblings__,enumerable:!1,writable:!1,configurable:!1})):(Object.assign(be,ye?t:de(t)),he(be),function(t,r){var n;Array.isArray(null==t||null===(n=t.tabBar)||void 0===n?void 0:n.list)&&t.tabBar.list.forEach((e=>{delete e.iconData,delete e.selectedIconData})),delete t.permission;var o=t.subPackages||t.subpackages;Array.isArray(o)&&o.length>0&&(o.forEach((e=>{delete e.pages})),t.subPackages=t.subpackages=o),"devtools"===t.platform&&(t.__globalComponentsCount=Object.keys(t.usingComponents||{}).length),_e&&(P.isSubContext||(delete t.usingComponents,Object.values(t.page||{}).forEach((e=>{null!=e&&e.window&&delete e.window.usingComponents})),t._preloadRule=t.preloadRule||{},t._page=t.page||{},delete t.preloadRule,delete t.page),t.updatePage=function(e,t){null!=t&&t.window&&delete t.window.usingComponents,r(e,t)},t.updatePreloadRule=function(e,r){t.preloadRule=t.preloadRule||{},t.preloadRule[e]=r}),e.g.__wxConfig.page=e.g.__wxConfig.page||{},t.page=t.page||{}}(be,((e,t)=>{je.emit(Ee,{key:e,value:t})})),Object.defineProperty(be,"__siblings__",{value:[],enumerable:!1,writable:!1,configurable:!1})),Array.isArray(be.__siblings__)&&be.__siblings__.push(be),be.onPageUpdate((({key:e,value:t})=>{be.page=be.page||{},be.page[e]=be.page[e+".html"]=t,n&&(n[e+".html"]=de(t))})),ye||(n=function(){var t=e.g.__wxConfig,r={},n={},o=_e?{}:t.page||{};try{me(n,r,"deprecated",!0),ve.forEach((e=>{if(e in t){var i=t[e];switch(e){case"page":me(n,r,e,o);break;case"env":me(n,r,e,(()=>(console.warn("[Deprecation] __wxConfig.env is deprecated, please use wx.env instead."),{USER_DATA_PATH:i.USER_DATA_PATH})));break;case"accountInfo":me(n,r,e,{appId:i.appId,icon:i.icon,nickname:i.nickname});break;case"appLaunchInfo":me(n,r,e,(()=>(console.warn("[Deprecation] __wxConfig.appLaunchInfo is deprecated, please use wx.getLaunchOptionsSync() instead."),wx&&"function"==typeof wx.getLaunchOptionsSync?wx.getLaunchOptionsSync():{})));break;case"wxAppInfo":me(n,r,e,{maxRequestConcurrent:i.maxRequestConcurrent,maxUploadConcurrent:i.maxUploadConcurrent,maxDownloadConcurrent:i.maxDownloadConcurrent,maxWorkerConcurrent:i.maxWorkerConcurrent,maxWebsocketConnect:i.maxWebsocketConnect});break;default:me(n,r,e,i)}}})),e.g.__wxConfig=n}catch(r){ne(r,"mockGloablWxConfig"),e.g.__wxConfig=t}return o}())),we;var n}var Se=new G,Ce=new G,Te={},Oe="WeixinJSBridgeReady",xe="libraryEnd",Ne="load",Re="postLoad",Pe="start",De="postStart";function Le(e,t){if(e in Te)try{t(Te[e])}catch(t){ne(t,"LifeCycle."+e)}else Ce.once(e,t)}function Be(e,t){return!(e in Te)&&(Te[e]=t,Ce.emit(e,t))}var ke,Me=Le.bind(null,xe),Fe=Le.bind(null,Ne),je={EventEmitter:G,on:Se.on.bind(Se),emit:Se.emit.bind(Se),once:Se.once.bind(Se),getIsLoaded:()=>Ne in Te,getIsStarted:()=>Pe in Te,onBridgeReady(e){Le(Oe,e)},setWeixinJSBridge(e){Be(Oe,e)},onLibraryEnd:Me,onCreate(e){e()},onLoadInstant(e){m.isSnapshoting&&P.mayHaveSnapShot?Fe((()=>{e()})):e()},onLoad(e,t=!1){t?Me((()=>{Fe(e)})):Fe(e)},_onPostLoad:Le.bind(null,Re),onStart:Le.bind(null,Pe),onPostStart:Le.bind(null,De)};Ce.onError(((e,t)=>{j.error(`[LifeCycle/${P.typeStr}] ${e.toString()} failed: `,t),ne(t,"LifeCycle."+e.toString())})).onSlow(((e,t,r,n)=>{W.warn(`[LifeCycle/${P.typeStr}] slow ${e.toString()} callback (${r-t}ms)\n${n+""}`)})),e.g.__wxLibrary.onEnd=function(){Be(xe)},ke=e.g.__wxConfig,be.currentPhase="onCreate",void 0===ke||(Ae(!1),Object.assign(be,ye?ke:de(ke)),pe(be),Ae(!0));var Ue=!1,$e=!1;function We(){Ue||$e?ne(new Error(`LifeCycle error: undesired onLoad(${Ue}/${$e})`)):(Ue=!0,m=function(e){return be.currentPhase="onLoad",void 0===e||(Ae(!1),Object.assign(be,ye?e:de(e)),be.onPageUpdate=je.on.bind(null,Ee),fe(be),Ae(!0)),we}(e.g.__wxConfig),Be(Ne,m),P.isSubContext?m.__readyHandler=e=>{qe(e,!0)}:!0===m.preload?je.onBridgeReady((t=>{t.on("onWxConfigReady",(()=>{qe(e.g.__wxConfig)}))})):je.onLibraryEnd((()=>{qe(e.g.__wxConfig)})),Be(Re,m))}function qe(e,t=!1){if(Ue&&!$e){$e=!0;var r=Date.now();"onReadyStart"in(m=Ie(e,t))||(m.onReadyStart=r),Be(Pe,m),m.onReadyEnd=Date.now(),Be(De,m)}else ne(new Error(`LifeCycle error: undesired onStart(${Ue}/${$e})`))}(m=we).isSnapshoting?e.g.WeixinSnapshot={snapshotContextReady(){delete e.g.WeixinSnapshot,m.isSnapshoting=!1,We()}}:P.mayHaveSnapShot?je.onLibraryEnd(We):We();class He{constructor(e,t,r){this.num=e,this.type=t,this.bindingFn=void 0,this.bindingFn="function"==typeof r?r:M}}var Ge={ALL:new He(Number.MIN_VALUE,"ALL"),DEBUG:new He(5e3,"DEBUG",console.debug),LOG:new He(1e4,"LOG",console.log),INFO:new He(2e4,"INFO",console.info),WARN:new He(3e4,"WARN",console.warn),ERROR:new He(4e4,"ERROR",console.error),OFF:new He(Number.MAX_VALUE,"OFF")},Qe=(e,t)=>({debug:e(Ge.DEBUG,t),log:e(Ge.LOG,t),info:e(Ge.INFO,t),warn:e(Ge.WARN,t),error:e(Ge.ERROR,t)}),ze=Ge.INFO,Ye=(()=>{if(P.isWorker||P.isWidget){return Object.assign({createLogger:function(){return j}},j)}return P.isSubContext&&P.isIsolateContext?(e=[],t=(t,r)=>(...n)=>{e.push({level:t,logs:n,category:r})},r=()=>{setTimeout((()=>{var t=s.__isFromMainContext?s.__mergeSubContextLogs:null;t?(t(e),e=[]):r()}),1e3)},je.onStart(r),u()(u()({},Qe(t)),{},{createLogger:e=>Qe(t,"string"==typeof e?e:"default"),__isFromMainContext:!1})):(()=>{var e=P.platform,t="android"!==e,r=[],n=function(t){"android"!==e?h.invoke("systemLog",{dataArray:t.map((t=>{return{message:`\n${r=t.date,n=("0"+(r.getMonth()+1)).slice(-2),o=("0"+r.getDate()).slice(-2),i=("0"+r.getHours()).slice(-2),a=("0"+r.getMinutes()).slice(-2),s=("0"+r.getSeconds()).slice(-2),l=("00"+r.getMilliseconds()).slice(-3),u=r.getFullYear()+"-"+n+"-"+o,c=i+":"+a+":"+s+"."+l,"ios"===e?u+" "+c+"000"+(r.getTimezoneOffset()/6e3*-1).toFixed(4).replace(/^0\./,"+").replace(/-0\./,"-"):u+" "+(r.getTimezoneOffset()/60*-1).toFixed(1).replace(/^(\d)/,"+$1")+" "+c} [${t.level.type[0].toUpperCase()}][wxapplib]] ${t.content}`};var r,n,o,i,a,s,l,u,c}))}):t.forEach((e=>{e.level.bindingFn("[wxapplib]] "+e.content)}))},o=e=>{if(e instanceof Error)return`${e.message}\n${e.stack}`;if(e&&"string"==typeof e.stack&&"string"==typeof e.message)return`${e.message}\n${e.stack}`;switch(typeof e){case"bigint":case"boolean":case"function":case"number":case"symbol":return e.toString();case"string":return e;case"undefined":return"undefined";case"object":var t;try{t=JSON.stringify(e)}catch(e){t="[对象含有循环引用]"}return t;default:return}},i=function(e,i){return function(...a){var s;if(i&&Array.prototype.unshift.call(a,"["+i+"]"),(k()||e.num>=Ge.WARN.num)&&(null===(s=j[e.type.toLowerCase()])||void 0===s||s.call(j,...a)),e.num>=ze.num){var l=Array.prototype.slice.call(a).map(o).join(" ");if(t){var u=new Date;r&&r.length>1024&&r.shift(),r.push({date:u,level:e,content:l})}else n([{level:e,content:l}])}}};return je.onStart((()=>{setTimeout((function e(){setTimeout(e,4e3),0!==r.length&&(n(r),r=[])}),4e3)})),u()(u()({},Qe(i)),{},{createLogger:function(e){return Qe(i,"string"==typeof e?e:"default")},__mergeSubContextLogs:e=>{Array.isArray(e)&&e.forEach((e=>{var{level:t,logs:r,category:n}=e;i(t,n)(...r)}))},__isFromMainContext:!0})})();var e,t,r})();je.onLoad((()=>{Ye.info("[BaseLibVersion] "+JSON.stringify(t))}));var Ke,Ve=Ye,Je=B(["log","info","warn","error"],(e=>function(...t){(L||k())&&console[e]("[system]",...t)}));function Xe(){return Ke||(void 0!==c&&void 0!==c.WebAssembly?c.WebAssembly:void 0!==globalThis.WebAssembly?globalThis.WebAssembly:void 0)}je.onLoad((()=>{Ke=Xe()}));var Ze=Object.create(null);Object.defineProperty(Ze,"WebAssembly",{enumerable:!0,get:Xe});var et=Ze,tt=e.g,rt=u()(u()(u()({env:P,global:tt,get isConfigReady(){return je.getIsStarted()},get isStarted(){return je.getIsStarted()},get isLoaded(){return je.getIsLoaded()}},je),a),{},{wxConsole:j,wxPerfConsole:W,wxNativeConsole:Ve,libConsole:Je,libGlobal:et,globalShare:{}});void 0!==n&&(o=function(){return"return this"===arguments[arguments.length-1]?function(){return tt}:new n(...arguments)},o.prototype=n.prototype);var nt=rt})(),y=r.default})();var b=y.wxConsole,w=y.wxPerfConsole,s=y.wxNativeConsole,A=y.libConsole,E=y.libGlobal,I,S,C,T,O,x,N,R;(()=>{var e={410:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),a=new O(n||[]);return i._invoke=function(e,t,r){var n=d;return function(o,i){if(n===f)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw i;return N()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===_)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var l=c(e,t,r);if("normal"===l.type){if(n=r.done?h:p,l.arg===_)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=h,r.method="throw",r.arg=l.arg)}}}(e,r,a),i}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",h="completed",_={};function g(){}function v(){}function m(){}var y={};y[i]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(x([])));w&&w!==r&&n.call(w,i)&&(y=w);var A=m.prototype=g.prototype=Object.create(y);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function r(o,i,a,s){var l=c(e[o],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function S(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method))return _;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var o=c(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,_;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:N}}function N(){return{value:t,done:!0}}return v.prototype=A.constructor=m,m.constructor=v,v.displayName=l(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,s,"GeneratorFunction")),e.prototype=Object.create(A),e},e.awrap=function(e){return{__await:e}},E(I.prototype),I.prototype[a]=function(){return this},e.AsyncIterator=I,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new I(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(A),l(A,s,"Generator"),A[i]=function(){return this},A.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:x(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}(e.exports);try{I=t}catch(e){o("r","regeneratorRuntime = r")(t)}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}(()=>{r(410);var e=()=>{var e={};Object.keys(I).forEach((t=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:()=>I[t],set(r){delete e[t],e[t]=r}})})),globalThis.regeneratorRuntime=e};"function"==typeof m.onReady?m.onReady((t=>{"devtools"===t.platform||["develop","trial"].includes(t.envVersion)||e()})):e()})()})(),(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new o("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};e.d(t,{default:()=>c});var r,n,i,a=Object.prototype.toString,s=(Object.getPrototypeOf,Object.getOwnPropertyNames,Object.getOwnPropertyDescriptor,Object.defineProperty,{}),l={subscribeHandler:(e,t,o={})=>{if(void 0!==e&&e===r)return t=t.valueOf(),Array.isArray(s[t])?n?void setTimeout((()=>{s[t].map((e=>e(o)))})):s[t].map((e=>e(o))):void 0}};y.onLoadInstant((()=>{i=e.g.WeixinJSContextId}));var u={__init__:(e,t)=>{void 0===r&&void 0!==e&&((r=e).register(e,l,t),n=r.crossVMContext)},publish:(e,t={})=>{var n,o=(n=t,a.call(n).split(" ")[1].split("]")[0]);if("Object"!==o&&"Undefined"!==o)throw new Error("params should be an object.");var i=e.valueOf(),s=t||{};if(r&&"function"==typeof r.subscribeHandler)return r.subscribeHandler(r,l,i,s)},subscribe:(e,t)=>{var n,o;if(Array.isArray(s[e])||(s[e]=[]),s[e].push(t),null!==(n=r)&&void 0!==n&&n.waitingChannel&&null!==(o=r)&&void 0!==o&&o.waitingChannel[i]){var a=[];r.waitingChannel[i].forEach((r=>{var{event:n,params:o}=r;n===e?t(o):a.push(r)})),r.waitingChannel[i]=a}}};y.onLoad((()=>{"undefined"!=typeof WeixinJSContext&&(u.__init__(WeixinJSContext,e.g.WeixinJSContextId),delete u.__init__,delete e.g.WeixinJSContext,delete e.g.WeixinJSContextId)}));var c=u;S=t.default})(),(()=>{var e={333:(e,t,r)=>{"use strict";r.r(t);var n=(()=>(m.onReady((()=>{n!==m&&void 0!==n&&Object.assign(n,m)})),m))();t.default=n},581:(e,t,r)=>{"use strict";r.r(t),r.d(t,{reportDeprecatedAPI:()=>n});var n=e=>{i.reportKeyValue({key:"DeprecatedAPI",value:e})}},578:(e,t,r)=>{var{reportDeprecatedAPI:n}=r(581),{default:o}=r(333);e.exports={hijack:function(e=!0,t=!0){!function(e){if("function"==typeof globalThis.Function){var t={};r.prototype=globalThis.Function.prototype,r.prototype.constructor=r,globalThis.Function=r}function r(){if(arguments.length>0&&"return this"===arguments[arguments.length-1])return function(){return e?t:{}}}}(t),"undefined"!=typeof eval&&("ios"===o.platform&&r.g.__isAppServiceRemoteDebugMode__||o.debug||(globalThis.eval=void 0)),e&&function(){if("undefined"!=typeof setTimeout){var e=setTimeout;globalThis.setTimeout=function(t,r=0){if("function"!=typeof t)throw new TypeError(`setTimeout expects a function as first argument but got ${typeof t}.`);var n=N.surroundThirdByTryCatch(t,"at setTimeout callback function"),o=[].slice.call(arguments,2);return e((()=>{n.apply(globalThis,o)}),r)};var t=setInterval;globalThis.setInterval=function(e,r){if("function"!=typeof e)throw new TypeError(`setInterval expects a function as first argument but got ${typeof e}.`);var n=N.surroundThirdByTryCatch(e,"at setInterval callback function"),o=[].slice.call(arguments,2);return t((()=>{n.apply(globalThis,o)}),r)}}}(),"undefined"!=typeof WebAssembly&&["compile","compileStreaming","instantiate","instantiateStreaming","validate","Module"].forEach((e=>{if(void 0!==WebAssembly[e]){var t=WebAssembly[e];Object.defineProperty(WebAssembly,e,{get:()=>(n("globalWa"),t),set:t=>{Object.defineProperty(WebAssembly,e,{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}}))}}},585:()=>{if("undefined"==typeof navigator){try{new o('var GeneratorFunctionProto = Object.getPrototypeOf(function* () {});var FakeGeneratorFunction = function () {};FakeGeneratorFunction.prototype = GeneratorFunctionProto;Object.defineProperty(GeneratorFunctionProto, "constructor", { value: FakeGeneratorFunction });')()}catch(e){}try{new o('var AsyncFunctionProto = Object.getPrototypeOf(async function () {});var FakeAsyncFunction = function () {};FakeAsyncFunction.prototype = AsyncFunctionProto;Object.defineProperty(AsyncFunctionProto, "constructor", { value: FakeAsyncFunction });')()}catch(e){}try{new o('var AsyncGeneratorFunctionProto = Object.getPrototypeOf(async function* () {});var FakeAsyncGeneratorFunction = function () {};FakeAsyncGeneratorFunction.prototype = AsyncGeneratorFunctionProto;Object.defineProperty(AsyncGeneratorFunctionProto, "constructor", { value: FakeAsyncGeneratorFunction });')()}catch(e){}}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new o("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{bridgeGlobalInstanceOf:()=>ee,deepFreezeGlobalObjs:()=>Q,deepFreezeObj:()=>P,deepFreezeObjProperty:()=>R,doNotWriteGlobalObjs:()=>G,doNotWriteObj:()=>k,doNotWriteObjProperty:()=>D,globalEsHiddenObjs:()=>t,globalEsObjs:()=>o,hijack:()=>z.hijack,overwriteSetPrototypeOf:()=>H});r(585);var e=globalThis.Function,t=[()=>Object.getPrototypeOf(Uint8Array.prototype).constructor,()=>new e("return Object.getPrototypeOf((function* () {})()).constructor")(),()=>new e("return Object.getPrototypeOf(function* () {}).constructor")(),()=>new e("return Object.getPrototypeOf(async function () {}).constructor")(),()=>new e("return Object.getPrototypeOf(async function* () {}).constructor")()].map((e=>{try{return e()}catch(e){}})).filter(Boolean),o=["AggregateError","Array","ArrayBuffer","Atomics","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","Error","EvalError","FinalizationRegistry","Float32Array","Float64Array","Function","globalThis","Infinity","Int16Array","Int32Array","Int8Array","Intl","JSON","Map","Math","NaN","Number","Object","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","URIError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WeakMap","WeakSet","WebAssembly","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","null","parseFloat","parseInt","undefined","unescape","uneval"],i=["getApp","getCurrentPages","define","require","Reporter","Protect","requirePlugin","definePlugin"],a=globalThis,s=r(333),l=(()=>s.default.platform)(),u=(()=>"ios"===l)();var c=/^\s*at .*(\S+:\d+|\(native\))/m,d=/^(eval@)?(\[native code\])?$/;function p(e,t=1/0){if("string"!=typeof e.stack)throw new Error("Cannot parse given Error object");var r=e.stack;return u?function(e,t){for(var r=[],n=e.split("\n"),o=0,i=0;o<n.length&&i<t;++o){var a=n[o];if(!d.test(a)){++i;var s=a.indexOf("@");if(-1===s){var l=f(a);r.push({fileName:l.URI,lineNumber:l.line,columnNumber:l.column,source:a})}else{var u=a.substring(0,s),c=f(a.substr(s+1));r.push({functionName:u,fileName:c.URI,lineNumber:c.line,columnNumber:c.column,source:a})}}}return r}(r,t):function(e,t){for(var r=[],n=e.split("\n"),o=0,i=0;o<n.length&&i<t;++o){var a=n[o];c.test(a)&&(r.push(a),++i)}return r.map((e=>{e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),r=t.match(/ (\((.+):(\d+):(\d+)\)$)/),n=(t=r?t.replace(r[0],""):t).split(/\s+/).slice(1),o=f(r?r[1]:n.pop());return{functionName:n.join(" ")||void 0,fileName:["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0],lineNumber:o[1],columnNumber:o[2],source:e}}))}(r,t)}function f(e){var t=/(?::(\d+))?(?::(\d+))?$/.exec(e);return t?{URI:e.substring(0,e.length-t[0].length),line:t[1],column:t[2]}:{URI:e}}var h=Object.freeze,_=Object.setPrototypeOf,g=Object.defineProperty,v=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,y=Object.getOwnPropertySymbols,b=Object.getPrototypeOf,w=Object.preventExtensions;var A=[[e=>!/(WAServiceMainContext|WAGame)\.js/.test(e)]];function E(){var e,t,r=Date.now(),n=p(new Error,3),o=n[1],i=n[2],a=!(o.fileName&&i.fileName&&i.fileName!==o.fileName&&(e=i.fileName,t=o.fileName,!A.some((r=>r.some((t=>t(e)))&&r.some((e=>e(t)))))));return Date.now()-r,a}function I(e,t=!1){if("function"==typeof e||"object"==typeof e&&null!==e){var r=v(e,"__proto__");r&&!r.configurable||(r||Object.isExtensible(e))&&g(e,"__proto__",{get(){return b(this)},set(r){if(this===e)t&&E()&&_(e,r);else{if("function"!=typeof this&&("object"!=typeof this||null===e))return;_(this,r)}},enumerable:!1,configurable:!1})}}var S=new Map,C=(e,t,r)=>{S.has(e)||S.set(e,new Map);var n=S.get(e);n.has(t)?Object.assign(n.get(t),r):n.set(t,r)};function T(e,t,r=!1){if("function"!=typeof e&&("object"!=typeof e||null===e))return!1;try{var n=v(e,t);return!!n&&(n.configurable&&(g(e,t,{get:n.get||(()=>n.value),set(o){if(this===e)r&&E()&&(n.set?n.set.call(this,o):n.writable&&(n.value=o));else{if("function"!=typeof this&&"object"!=typeof this)return;!function(e,t,r){try{"__proto__"===t?_(e,r):g(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}catch(e){}}(this,t,o)}},enumerable:n.enumerable,configurable:!1}),r&&C(e,t,n)),!n.get&&("function"==typeof n.value||"object"==typeof n.value&&null!==n.value))}catch(e){throw e.message,e}}var O=new WeakSet;function x(e){O.add(e)}function N(e){return O.has(e)}function R(e,t,r){T(e,t)&&P(e[t],r)}function P(e,t){if(e&&!N(e)&&("function"==typeof e||"object"==typeof e)&&e!==globalThis)if(e!==Error){x(e);for(var r=m(e),n=y(e),o=0;o<r.length;++o)R(e,r[o],t);for(var i=0;i<n.length;++i)R(e,n[i],t);t?w(e):I(e,!1)}else if(t){var a=e=>{if(e&&!N(e)&&("function"==typeof e||"object"==typeof e)&&e!==globalThis){x(e),h(e);for(var t=m(e),r=y(e),n=0;n<t.length;++n)a(e[t[n]]);for(var o=0;o<r.length;++o)a(e[r[o]])}};a(Error)}}function D(e,t){T(e,t,!0)&&k(e[t])}var L=new WeakSet;function B(e){return L.has(e)}function k(e){if(e&&!B(e)&&("function"==typeof e||"object"==typeof e)&&e!==globalThis){!function(e){L.add(e)}(e);for(var t=m(e),r=y(e),n=0;n<t.length;++n)D(e,t[n]);for(var o=0;o<r.length;++o)D(e,r[o]);I(e,!0)}}var M=Object.prototype.hasOwnProperty,F=Object.defineProperty,j=Object.defineProperties,U=Object.getOwnPropertyNames,$=Object.getOwnPropertySymbols,W=Object.getOwnPropertyDescriptor,q=!1,H=function(){q||(q=!0,F(a.Object,"setPrototypeOf",{value:(e,t)=>(e.__proto__=t,e),configurable:!0}),F(a.Object,"defineProperty",{value(e,t,r){if(!B(e))return F(e,t,r);if(!E())return r;var n=W(e,t);if(!n||n.configurable){var o=F(e,t,r);return D(e,t),o}return C(e,t,r),r},configurable:!0}),F(a.Object,"defineProperties",{value(e,t){if(!B(e))return j(e,t);if(!E())return t;var r=r=>{var n=W(e,r);if(!n||n.configurable){var o=F(e,r,t[r]);return D(e,r),o}return C(e,r,t[r]),t[r]};return U(t).forEach(r),$(t).forEach(r),t},configurable:!0}))},G=function(e=[]){try{for(var r=[...o,...i,...t,...e],n=(Date.now(),0);n<r.length;++n){var s=r[n],l=typeof s;"string"===l?M.call(a,s)&&D(a,s):"function"!==l&&"object"!==l||k(s)}Date.now()}catch(e){}},Q=function(e=[],r=!1){try{for(var n=[...o,...i,...t,...e],s=(Date.now(),0);s<n.length;++s){var l=n[s],u=typeof l;"string"===u?M.call(a,l)&&R(a,l,r):"function"!==u&&"object"!==u||P(l,r)}Date.now()}catch(e){}},z=r(578),Y=Object.prototype.isPrototypeOf,K=Object.defineProperty,V=Object.prototype.hasOwnProperty,J=Symbol.hasInstance,X=function(e){return!("function"!=typeof this||!Z(e))&&((e,t)=>Y.call(t.prototype,e))(e,this)},Z=e=>"object"==typeof e?null!==e:"function"==typeof e;function ee(e,t){for(var r=function(){var r=e[n],o=t[n];if("function"!=typeof r)return"continue";var i=V.call(r,J)?r[J]:X,a=V.call(o,J)?o[J]:X;K(r,J,{value(e){return i.call(this,e)||a.call(o,e)},writable:!0,enumerable:!1,configurable:!0}),K(o,J,{value(e){return a.call(this,e)||i.call(r,e)},writable:!0,enumerable:!1,configurable:!0})},n=0;n<e.length;++n)r()}})(),C=n})(),(()=>{var e={300:(e,t,r)=>{var n;r.d(t,{k:()=>i,r:()=>o}),y.onLoad((()=>{n=[...C.globalEsObjs.map((e=>globalThis[e])),...C.globalEsHiddenObjs].filter(Boolean)}));var o=()=>n;function i(e){var t=e.getGlobals(),r=o();t.length===r.length?C.bridgeGlobalInstanceOf(o(),t):y.emitFrameworkError(new Error("remoteGlobals mismatch with currentGlobals"),"bridgeGlobalInstanceOf")}},465:(e,t,r)=>{r.d(t,{A:()=>n});var n=(globalThis.__wxLibrary||{}).contextType}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{r.r(n),r.d(n,{_getSelfBridgeContext:()=>i,bridgeContext:()=>a});var e=r(300),t=r(465),o=new Map;function i(){return{getGlobals:e.r,contextType:t.A,setBridged:(e,t)=>{o.set(e,t)}}}function a(r){var n=r._getSelfBridgeContext();t.A,n.contextType;try{if(o.has(n.contextType))return;o.set(n.contextType,n),n.setBridged(t.A,i()),(0,e.k)(n)}catch(e){t.A,n.contextType}}})(),T=n})(),(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{condom:()=>de,condomWX:()=>ce,handleMessageEasyCondom:()=>ue});var r={request:3,getStorageSync:3,getStorage:3,getCookies:1};function n(e,t){return function(...r){try{return e(...r)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;"ThirdScriptError"===e.type?i.thirdErrorReport({error:e,extend:t}):i.errorReport({key:"appServiceSDKScriptError",error:e,extend:t})}}}}function a(e,t){return"String"===t?e:e="Array"===t||"Object"===t?JSON.parse(e):"Number"===t?parseFloat(e):"Boolean"===t?"true"===e:"Date"===t?new Date(parseInt(e,10)):"Undefined"===t?void 0:"Null"===t?null:""}var s=n(a,"stringToAnyType");var l=e=>"object"==typeof e&&null!==e&&!e._isVue||"function"==typeof e,u=(()=>Object.prototype.toString)(),c=(()=>Object.prototype.hasOwnProperty)(),d=(()=>String.prototype.slice)(),p=o.prototype.call.bind(u),f=o.prototype.call.bind(c),h=o.prototype.call.bind(d),_=["__proto__","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","__ob__","__su__","$mobx"],g=(()=>Object.assign)(),v=(()=>Object.getOwnPropertyNames)(),m=(()=>Object.getOwnPropertySymbols)(),y=(()=>Object.getOwnPropertyDescriptors)(),b=(()=>Object.defineProperty)(),w=(()=>Object.getPrototypeOf)(),A=(()=>Object.setPrototypeOf)(),E=(()=>Reflect.get)(),I=(()=>Reflect.set)(),S=(()=>Reflect.deleteProperty)(),C=(()=>Reflect.construct)(),T=(()=>Reflect.apply)();var x=new WeakSet,N=JSON.parse,R=e=>{var t=N(e);return q(t),t},P=(e,t)=>{var r=s(e,t);return q(r),r},D=new WeakSet,L=(e,t,r,n,o,i,a,s)=>a||(a=function(...n){var o=x.has(e),i=D.has(e),s=n.map(((e,t)=>{if(0!==t||"object"!=typeof e||null===e)return e;var n=g({},e);if(o){var{success:a,fail:s,complete:l}=e;f(e,"success")&&(n.success="function"==typeof a?r(((...e)=>{a(...e)})):a),f(e,"fail")&&(n.fail="function"==typeof s?r(((...e)=>{s(...e)})):s),f(e,"complete")&&(n.complete="function"==typeof l?r(((...e)=>{l(...e)})):l)}return i&&g(n,{_jsonParse:R,_stringToAnyType:P}),n}));return!i||"object"==typeof n[0]&&null!==n[0]||s.push({_jsonParse:R,_stringToAnyType:P}),o||(s=r(n)),t(this instanceof a?C(e,s,e):T(e,o?this:r(this,{forceUpdate:!0}),s))},n.set(e,a),o.set(a,e),B(e,t,r,n,o,i,a,s),a),B=(e,t,r,n,o,i,a,s)=>{for(var l=function(e){var t=[...v(e),...m(e)],r=y(e);return t.map((e=>g(r[e],{name:e})))}(e),u=y(a),c=function(){var n=l[d],o=n.name;if(_.includes(o))return"continue";var i=f(n,"value"),c=f(u,o)&&u[o];c?c.configurable?b(a,o,i?{value:t(n.value,{forceUpdate:s,path:void 0}),writable:n.writable,enumerable:n.enumerable,configurable:n.configurable}:{enumerable:n.enumerable,configurable:n.configurable}):c.writable&&(a[o]=t(n.value,{forceUpdate:s,path:void 0})):b(a,o,i?{value:t(n.value,{forceUpdate:s,path:void 0}),writable:n.writable,enumerable:n.enumerable,configurable:n.configurable}:{get(){return t(E(e,o,r(this,{forceUpdate:!0})))},set(t){I(e,o,r(t),r(this,{forceUpdate:!0}))},enumerable:n.enumerable,configurable:n.configurable}),c&&S(u,o)},d=0;d<l.length;d++)c();for(var p=[...v(u),...m(u)],h=0;h<p.length;++h)S(a,p[h]);return a},k=(e,t,r,n,o,i,a,s)=>i||!a||s?(a=a||{},n.set(e,a),o.set(a,e),B(e,t,r,n,o,i,a,s),((e,t,r,n,o,i,a,s)=>{var l=w(e);null!=l&&l.constructor&&"Object"!==l.constructor.name&&A(a,t(l,{forceUpdate:s,path:void 0}))})(e,t,0,0,0,0,a,s),a):a,M=ArrayBuffer.prototype,F=(e,t,r,n,o)=>(i,{forceUpdate:a=!1,path:s}={})=>{if(!l(i)||o.has(i)||W.has(i))return i;var u=void 0;if(n.has(i)&&(u=n.get(i)),$.has(i))return u;$.add(i);var c=h(p(i),8,-1);try{var d=i;switch(c){case"Array":d=((e,t,r,n,o,i,a,s)=>{if(!i&&a&&!s)return a;a=a||[],n.set(e,a),o.set(a,e);for(var l=e.length,u=a.length,c=0;c<u;++c)a[c]=t(e[c],{forceUpdate:s,path:void 0});if(l<u)a.slice(l,u-l);else for(var d=u;d<l;++d)a.push(t(e[d],{forceUpdate:s,path:void 0}));return a})(i,t,0,n,o,e,u,a);break;case"Function":d=L(i,t,r,n,o,e,u,a);break;case"Object":d=k(i,t,r,n,o,e,u,a);break;case"Promise":d=((e,t,r,n,o,i,a,s)=>a||(a=new Promise(((r,n)=>{e.then((e=>r(t(e))),(e=>n(t(e))))})),n.set(e,a),o.set(a,e),a))(i,t,0,n,o,0,u);break;case"ArrayBuffer":e||i===M||A(i,M);break;default:d=i}return d}finally{$.delete(i)}},j=new WeakMap,U=new WeakMap,$=new WeakSet,W=new WeakSet,q=e=>{l(e)&&W.add(e)},H=(()=>{var e=e=>e,t=e=>e,r=(...t)=>e(...t),n=(...e)=>t(...e);return e=F(!1,r,n,j,U),t=F(!0,n,r,U,j),r})();var G=Object.getPrototypeOf,Q=Object.getOwnPropertyNames,z=Object.getOwnPropertyDescriptor,Y=Object.defineProperty,K=["constructor","__proto__","__defineGetter__","__defineSetter__"],V=new WeakMap,J=new WeakMap,X=new WeakMap,Z=new WeakMap,ee=new WeakMap,te=new WeakMap,re=e=>{for(var t=0;t<K.length;t++){if(K[t]===e)return!0}return!1},ne=function(e){for(var t=ee.has(e)?ee.get(e):{},r=(e=>{for(var t=[],r=e;r;r=G(r))for(var n=Q(r),o=0;o<n.length;o++){var i=n[o],a=z(r,i);void 0!==a&&(a.name=i,t.push(a))}return t})(e),n=0;n<r.length;n++){var o=r[n],i=o.name;re(i)||(i in t||(delete o.value,delete o.writable,Y(t,i,Object.assign(o,{get:oe(i).bind(t),set:ie(i).bind(t)}))))}return ee.set(e,t),V.set(t,e),t},oe=function(e){return function(){var t=V.get(this);if(void 0!==t)return null===t?null:se(t[e])}},ie=function(e){return function(t){var r=V.get(this);if(null!=r){if(null!=t){var n=ae(t);if(n)return void(r[e]=n)}r[e]=se(t)}}},ae=function(e){if(("function"==typeof e||"object"==typeof e)&&null!=e)return V.get(e)||J.get(e)||X.get(e)},se=function(e){var t,r=(t=e,Object.prototype.toString.call(t).split(" ")[1].split("]")[0]);return"String"===r||"Number"===r||"Boolean"===r?e.valueOf():"Array"===r?function(e){if(te.has(e))return te.get(e);for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(se(n))}return te.set(e,t),X.set(t,e),t}(e):"Function"===r?function(e){if(Z.has(e))return Z.get(e);var t=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=se(arguments[r]);var n=ae(this)||this,o=e.apply(n,t);return se(o)};return Z.set(e,t),J.set(t,e),t}(e):"Object"===r?ne(e):"ArrayBuffer"===r?(e!==ArrayBuffer.prototype&&(e.__proto__=ArrayBuffer.prototype),e):"Undefined"===r?void 0:"Null"===r?null:e},le=se;var ue=e=>{var t,r=e.__wx_dont_hook_sdk_inner_variable_packkeys_otherwise_you_will_regret_and_occur_bug__;return r&&delete e.__wx_dont_hook_sdk_inner_variable_packkeys_otherwise_you_will_regret_and_occur_bug__,!!r&&(t=e,r.forEach((e=>{var r=function(e,t){if(!t)return null;var r=t.split(".");if(!r.length)return null;for(var n=r[r.length-1],o=e,i=1;i<r.length-1;i++){if(!o)return null;o=o[r[i]]}return[o,n]}(t,e);if(r){var[n,o]=r;Object.setPrototypeOf(n[o],ArrayBuffer.prototype)}})),!0)},ce=(e,t=[])=>{q(e),Object.setPrototypeOf(e,Object.prototype);var n=function(){var t,n=r[o],i=Object.getOwnPropertyDescriptor(e,o)||{};Object.defineProperty(e,o,{get(){var e,r=Object.prototype.hasOwnProperty.call(i,"value")?i.value:null===(e=i.get)||void 0===e?void 0:e.call(this);if(t)return t;if(n){var o=r;return 1&n&&(e=>{x.add(e)})(o),2&n&&(e=>{D.add(e)})(o),t=H(o)}if("function"==typeof r&&!t){var a=function(){return this instanceof a?Reflect.construct(r,arguments,r):Reflect.apply(r,this,arguments)};return Object.defineProperty(a,"name",{value:r.name}),t=a,a}return t=r},set(e){Object.prototype.hasOwnProperty.call(i,"value")&&(i.value=e)},enumerable:!0,configurable:!0})};for(var o of Object.keys(e))n()},de=e=>new le(e);O=t})(),(()=>{var e={421:(e,t,r)=>{r.d(t,{D:()=>o,m:()=>n});var n={APP:"app",APP_RENDER:"app_sub_render",APP_XRFRAME_RENDER:"app_xrframe_render",APP_SCL:"app_sub_scl",GAME:"game",GAME_OPEN_DATA:"gameOpenData"},o={GAME_PLUGIN_PRELOAD:"gamePlugin_preload_",GAME_PLUGIN:"gamePlugin_"}},407:(e,t,r)=>{r.d(t,{G$:()=>n});r(888),globalThis;var n=function(){return"devtools"===m.platform}},492:(e,t)=>{var r={name:void 0,secure:!0,runningType:"app",init:function(e){this.name=e.contextName,this.secure=e.contextSecure,void 0!==y&&(y.env.contextName=e.contextName,y.env.typeStr=`${e.contextName}_Context`),this.name.startsWith("game")?this.runningType="game":this.name.startsWith("app")&&(this.runningType="app"),this.remoteObjectProto=e.__proto__}};t.Z=r},443:(e,t,r)=>{var n=r(863),o=r(369),i=r(492),a=r(529);y.onLoad((()=>{void 0===r.g.WeixinJSBridge&&(r.g.WeixinJSBridge={},r.g.WeixinJSBridge.subscribeHandler=function(e,t){"onError"===e?y.emitUnhandledError(t):"unhandledRejection"===e&&y.emitUnhandledRejection(null==t?void 0:t.reason,null==t?void 0:t.promise)},r.g.WeixinJSBridge.invokeCallbackHandler=function(){})})),y.onUnhandledRejection((function(e={}){i.Z.name===a.CONTEXT_NAME.APP_RENDER?(0,n.yH)(e.reason,"",e.promise||null):(0,n.sK)(e.reason,"",e.promise||null)})),y.onUnhandledError((function(e){e=(0,o.Bs)(e),i.Z.name===a.CONTEXT_NAME.APP_RENDER?(0,n.yH)(e,""):(0,n.sK)(e,"")})),y.onFrameworkError((function(e){"function"==typeof __wxSourceMapRetrace__&&(e=__wxSourceMapRetrace__(e)),s.error("FrameworkError",e)}))},151:(e,t)=>{var r={},n=Object.keys;r.init=e=>{i=e;for(var t=n(e),o=0;o<t.length;o++){var a=t[o];void 0===r[a]&&(r[a]=e[a])}},t.Z=r},282:(e,t,r)=>{r.d(t,{k:()=>o});var n=r(936),o=e=>{e.onReady((e=>{y._onPostLoad((()=>{var t=m.__readyHandler;n.Z.__wxConfig=Object.assign({},e),"function"==typeof t&&t(e)}))}))}},706:(e,r,o)=>{o.d(r,{E:()=>_});var c=o(936),_=function(e){var r,_,g;("windows"===e.__wxConfig.platform||"mac"===e.__wxConfig.platform)&&e.__wxConfig.host&&"WMPF"===e.__wxConfig.host.env&&e.__isAppServiceRemoteDebugMode__?c.Z.console=o.g.console:e.__isAppServiceRemoteDebugMode__&&"ios"!==e.__wxConfig.platform?c.Z.console=e.originConsole:c.Z.console=new e.BaseConsole,r=e.wxLibVersion,g=(null===(_=t)||void 0===_?void 0:_.version)||"9.9.9",r!==g&&(s.warn(`[checkVersionMatches] baselib versions between context do not match (mainContext ${r}, subContext ${g})`),i.reportIDKey({key:"subContextLibVersionNotMatch"})),n=e.__Function__,l=e.__userActionTracer__,u=e.__appServiceSDK__,f=e.__sclEngine__,h=e.WeixinJSBridge,i=e.Reporter,s=e.wxNativeConsole,d=e.WeixinSharedBuffer,a=e.BaseConsole,$dbg=e.$dbg,__isAppServiceRemoteDebugMode__=!!e.__isAppServiceRemoteDebugMode__,__remoteDebug__=e.__remoteDebug__,__debuggerMessager__=e.debuggerMessager,T.bridgeContext(e.__subContextEngineBridge__),e.__freezeLibContextGlobal__(),Object.defineProperty(c.Z,"__wxSourceMap",{get:O.condom(e.getWxSourceMap)}),c.Z.WebAssembly&&delete c.Z.WebAssembly,p=e.Trace}},912:(e,t,r)=>{r.d(t,{D:()=>o});var n=r(936),o=function(e){e.__wxConfig.debug&&(console=new e.BaseConsole),setTimeout=e.setTimeout,clearTimeout=e.clearTimeout,setInterval=e.setInterval,clearInterval=e.clearInterval,h=e.WeixinJSBridge,i=e.Reporter,c=e.NativeGlobal,WeixinCanvas=e.WeixinCanvas,WeixinArrayBuffer=e.WeixinArrayBuffer,s=e.wxNativeConsole,a=e.BaseConsole,n.Z.console=new e.BaseConsole,f=e.__sclEngine__,__appServiceConsole__=e.__appServiceConsole__,p=e.Trace,SkylineGlobal=e.SkylineGlobal}},716:(e,t,r)=>{r.d(t,{d:()=>n});var n=function(e){setTimeout=e.setTimeout,clearTimeout=e.clearTimeout,setInterval=e.setInterval,clearInterval=e.clearInterval,h=e.WeixinJSBridge,i=e.Reporter,c=e.NativeGlobal,WeixinCanvas=e.WeixinCanvas,WeixinArrayBuffer=e.WeixinArrayBuffer,s=e.wxNativeConsole,f=e.__sclEngine__,p=e.Trace}},130:(e,t,r)=>{r.d(t,{y:()=>o});var n=r(936),o=function(e){setTimeout=e.setTimeout,clearTimeout=e.clearTimeout,setInterval=e.setInterval,clearInterval=e.clearInterval,h=e.WeixinJSBridge,i=e.Reporter,c=e.NativeGlobal,WeixinCanvas=e.WeixinCanvas,WeixinArrayBuffer=e.WeixinArrayBuffer,s=e.wxNativeConsole,a=e.BaseConsole,n.Z.console=new e.BaseConsole,p=e.Trace,y.onLibraryEnd((()=>{xrFrame.init(e.args)}))}},878:(e,t,r)=>{r.d(t,{M:()=>i,O:()=>a});var n,o=r(936),i=function(e){var t=e._createSharedCanvas;o.Z.__isAdapterInjected=!1,o.Z.console=e.console,Object.defineProperty(o.Z,"sharedCanvas",{get:()=>t(),set(){}}),m.onReady((()=>{!0!==m.useHighPerformanceMode?o.Z.wx=n||O.condomWX(e.wx,e.skipCondom):o.Z.wx=e.wx})),o.Z.requirePlugin=e.requirePlugin,o.Z.WXWebAssembly=e.WXWebAssembly,o.Z.WXWeakRef=e.WXWeakRef,delete o.Z.WebAssembly,o.Z.GameGlobal||(o.Z.GameGlobal=o.Z),s=e.wxNativeConsole,Object.defineProperty(o.Z,"__wxSourceMap",{get:O.condom(e.getWxSourceMap)})},a=function(e,t){e&&e.wx&&(n=O.condomWX(e.wx,t))}},783:(e,t,r)=>{r.d(t,{o:()=>n});var n=function(e){e.getWxSourceMap&&(e.getWxSourceMap=O.condom(e.getWxSourceMap)),__gameOpenDataSDK__.init(e)}},543:(e,t,r)=>{r.d(t,{m:()=>o});var n=r(936),o=function(e){delete n.Z.NativeClient,n.Z.console=e.console,n.Z.WXWebAssembly=e.WXWebAssembly,n.Z.env={},e.pluginEnv&&(n.Z.pluginEnv=e.pluginEnv),e.wx&&(n.Z.wx=e.wx)}},936:(e,t)=>{var r=function(){return this}();t.Z=r},529:(e,t,r)=>{r.r(t),r.d(t,{CONTEXT_NAME:()=>A.m,CONTEXT_NAME_PREFIX:()=>A.D,injectEntryFile:()=>b.Wm,loadJsFiles:()=>b.z5,loadLibFiles:()=>b.C4,onInitReady:()=>x,onMainContextMessage:()=>B,postMessageToMainContext:()=>D,postMessageToMainContextSync:()=>L,surroundByTryCatch:()=>v.Ue,surroundThirdByTryCatch:()=>v.M2});var n=r(97),o=r.n(n),i=(r(443),r(936)),a=r(151),s=r(492),l=r(869),u=r(282),c=r(878),d=r(783),p=r(706),f=r(130),h=r(912),_=r(543),g=r(716),v=r(863),b=r(584),w=r(407),A=r(421),E=r(369),I="subContext:initReady",T=new y.EventEmitter,x=function(e){y.once(I,e)};S.subscribe("subContextEnvReady",(0,v.Ue)((e=>{if(s.Z.init(e),(0,l.v)(e),function(e){r.g.__isAppServiceRemoteDebugMode__=!!e.__isAppServiceRemoteDebugMode__}(e),function(e){if(e.__isAppServiceRemoteDebugMode__&&e.__remoteDebug__&&e.__remoteDebug__.setAutoTestHandler)try{var t;$eval=e.__remoteDebug__.$$eval,e.__remoteDebug__.setAutoTestHandler({$eval:(r,n,i=null)=>(t||(t="ios"===e.__wxConfig.platform?globalThis:o()(o()({},globalThis),{},{console:e.originConsole})),$eval(r,t).apply(i,n)),setGlobalFunctions(e,r){t?t[e]=r:globalThis[e]=r}})}catch(e){console.error(e)}}(e),C.hijack(),a.Z.init(e.Reporter),s.Z.name===A.m.GAME)(0,c.M)(e);else if(s.Z.name===A.m.GAME_OPEN_DATA)(0,d.o)(e);else if(s.Z.name===A.m.APP)(0,p.E)(e);else if(s.Z.name===A.m.APP_RENDER)(0,h.D)(e);else if(s.Z.name===A.m.APP_XRFRAME_RENDER)(0,f.y)(e);else if(s.Z.name===A.m.APP_SCL)(0,g.d)(e);else{if(!s.Z.name.startsWith(A.D.GAME_PLUGIN))throw new Error("subContextEnvReady: missing context name.");(0,_.m)(e)}(0,u.k)(e.__wxConfig)}))),S.subscribe("preloadSubContextEnvReady",(0,v.Ue)((e=>{s.Z.init(e),e.preHandleEnv&&(0,c.O)(e.preHandleEnv,e.skipCondomList)}))),S.subscribe("subContextRefreshEnv",(0,v.Ue)((e=>{if("game"===s.Z.name)(0,c.M)(e);else if("gameOpenData"===s.Z.name)(0,d.o)(e);else if("app"===s.Z.name)(0,p.E)(e);else if("app_sub_render"===s.Z.name)(0,h.D)(e);else if("app_xrframe_render"===s.Z.name)(0,f.y)(e);else if("app_sub_scl"===s.Z.name)(0,g.d)(e);else{if(!s.Z.name.startsWith("gamePlugin_"))throw new Error("subContextRefreshEnv: missing context name.");(0,_.m)(e)}S.publish("subContextRefreshEnvReady",null,!0)}))),S.subscribe("subContextRefreshWxConfig",(0,v.Ue)((e=>{var{key:t,value:r}=e;"string"==typeof t&&r&&(m[t]=r)}))),S.subscribe("exportGlobalRequire",(0,v.Ue)((e=>{var t=/^[A-Za-z]+(\.[A-Za-z]+)*$/,r=e=>{var{name:r,value:n,needCondom:o}=e;if("string"!=typeof r||!t.test(r))throw new Error("exportGlobalRequire: illegal variable name.");r.split(".").reduce(((e,t,i,a)=>{if(i===a.length-1){if(t in e)throw new Error(`exportGlobalRequire: Variable ${r} exists.`);e[t]=o?O.condom(n):n}if("Array"!==(0,v.Em)(e[t])&&"Function"!==(0,v.Em)(e[t])&&"Object"!==(0,v.Em)(e[t])){var s=a.slice(0,i+1).join(".");throw new Error(`exportGlobalRequire: ${s} is not an Object.`)}return e[t]}),i.Z)};return"[object Array]"===Object.prototype.toString.call(e)?e.forEach(r):r(e)}))),S.subscribe("mainContextMessage",(e=>{T.emit("mainContextMessage",e)})),S.subscribe("subContextDestroy",(()=>{}));var N=["WeixinJSCore","WeixinNativeBuffer","WeixinWorker","NativeGlobal","lockSharedNativeBuffer","unlockSharedNativeBuffer","getNativeBufferId","getNativeBuffer","setNativeBuffer","setSharedNativeBuffer","getSharedNativeBuffer","WeixinArrayBuffer"];y.onLoad((()=>{N.forEach((e=>{delete i.Z[e]})),S.publish("subContextReady",{contextGlobal:{get __wxSourceMap(){return i.Z.__wxSourceMap},get __require(){return"game"===s.Z.name||s.Z.name.startsWith("gamePlugin_")?i.Z.require:O.condom(i.Z.require)},jsonParse:JSON.parse,jsonStringify:JSON.stringify,arrayBufferProto:ArrayBuffer.prototype}},!0)}));var R=!1,P=function(){R||(R=!0,C.overwriteSetPrototypeOf(),C.deepFreezeGlobalObjs([],!1))};y.onLibraryEnd((()=>{y.onLoad((()=>{s.Z.secure&&m&&m.isIsolateContext&&P(),y.emit(I)})),y.onStart((()=>{m.plugins&&!(0,w.G$)()&&P()}))}));var D=e=>{(0,E.YF)((()=>{S.publish("subContextMessage",e)}))},L=e=>{S.publish("subContextMessage",e)},B=e=>{T.on("mainContextMessage",e)}},584:(e,t,r)=>{r.d(t,{C4:()=>a,Wm:()=>i,z5:()=>o});var n=r(492),o=(e,t,r)=>S&&S.publish?S.publish("loadJsFiles",{paths:e,options:r,moduleName:t,contextName:n.Z.name}):"failed",i=(e,t)=>S&&S.publish?S.publish("injectEntryFile",{moduleName:e,separatedPlugins:t}):"failed",a=e=>S&&S.publish?S.publish("loadLibFiles",{paths:e,contextName:n.Z.name}):"failed"},869:(e,t,r)=>{r.d(t,{v:()=>s});var n=r(936),o=r(492),i=r(863),a=function(e,t){return function(){return"function"==typeof arguments[0]&&(arguments[0]=(0,i.M2)(arguments[0],t)),e(...arguments)}},s=e=>{n.Z.setTimeout=a(e.setTimeout,"at setTimeout callback function"),n.Z.clearTimeout=a(e.clearTimeout),n.Z.setInterval=a(e.setInterval,"at setInterval callback function"),n.Z.clearInterval=a(e.clearInterval),"game"===o.Z.runningType&&(n.Z.requestAnimationFrame=a(e.requestAnimationFrame,"at requestAnimationFrame callback function"),n.Z.cancelAnimationFrame=a(e.cancelAnimationFrame))}},863:(e,t,r)=>{r.d(t,{Em:()=>c,M2:()=>s,Ue:()=>u,sK:()=>a,yH:()=>l});var n=r(421),o=r(492),i=r(151),a=function(e,t,r){try{var a;if(o.Z.name===n.m.GAME)a=i.Z.RunType.GAME;else if(o.Z.name===n.m.GAME_OPEN_DATA)a=i.Z.RunType.GAME_SUBCONTEXT;else if(o.Z.name===n.m.APP)a=i.Z.RunType.APP;else if(o.Z.name.startsWith(n.D.GAME_PLUGIN))a=i.Z.RunType.GAME_SUBCONTEXT;else if(o.Z.name===n.m.APP_RENDER)a=i.Z.RunType.APP_SUBCONTEXT;else{if(o.Z.name!==n.m.APP_XRFRAME_RENDER)throw new Error("unknown context");a=i.Z.RunType.APP_SUBCONTEXT}void 0!==r?i.Z.thirdErrorReport({key:a,error:e,extend:t,triggerErrorCallback:!o.Z.secure,isUnhandledRejection:!0,promise:r}):i.Z.thirdErrorReport({key:a,error:e,extend:t,triggerErrorCallback:!o.Z.secure,isUnhandledRejection:!1})}catch(e){console.error("[ErrorHandler] error in Report.thirdErrorReport: ",e.message)}};function s(e,t){return function(){var r;try{"function"==typeof e&&(r=e.apply(e,arguments))}catch(e){a(e,t)}return r}}function l(e,t,r){var a="";if(o.Z.name===n.m.APP_RENDER?a="appSubContextSDKScriptError":"game"===o.Z.runningType&&(a="gameSubContextSDKScriptError"),"function"==typeof i.Z.thirdErrorReport)try{void 0!==r?i.Z.errorReport({key:a,error:e,extend:t,triggerErrorCallback:!o.Z.secure,isUnhandledRejection:!0,promise:r}):i.Z.errorReport({key:a,error:e,extend:t,triggerErrorCallback:!o.Z.secure,isUnhandledRejection:!1})}catch(e){console.error("[ErrorHandler] error in Report.errorReport: ",e.message)}else{var s=`${a}\n${t?`${e.message};${t}`:e.message}\n${e.stack}`;"undefined"!=typeof console&&console.error(s)}}function u(e,t){return function(){try{return e.apply(e,arguments)}catch(e){if(e.message,e.stack,"[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;l(e,t)}return}}}function c(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]}},369:(e,t,r)=>{r.d(t,{Bs:()=>n,YF:()=>a});var n=function(e){if("string"!=typeof e)return e;try{return JSON.parse(e.replace(/"/g,'\\"').replace(/'/g,'"').replace(/\n/g,"\\n"))}catch(t){return{message:e,stack:""}}},o=!1,i=[],a=e=>{i.push(e),o||(o=!0,Promise.resolve().then((()=>{for(var e=0;e<i.length;++e)"function"==typeof i[e]&&i[e]();o=!1,i.length=0})))}},888:e=>{e.exports=_.asyncToGenerator},97:e=>{e.exports=_.objectSpread2}},r={};function g(t){var n=r[t];if(void 0!==n)return n.exports;var o=r[t]={exports:{}};return e[t](o,o.exports,g),o.exports}g.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return g.d(t,{a:t}),t},g.d=(e,t)=>{for(var r in t)g.o(t,r)&&!g.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},g.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new o("return this")()}catch(e){if("object"==typeof window)return window}}(),g.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),g.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var v=g(529);x=v})(),(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{callMiniProgramOrPluginFunction:()=>f,callSystemFunction:()=>d,callThirdPartyFunction:()=>h,convertStack:()=>o,endSystemFunctionCall:()=>c,findCurrentSource:()=>l,startSystemFunctionCall:()=>u,surroundThirdByTryCatch:()=>v,wrapMiniProgramOrPluginFunction:()=>_,wrapSystemFunction:()=>p,wrapThirdPartyFunction:()=>g,wrapperStack:()=>n});var r=/[ (@]*https?:\/\/([^/]*)\/+(.*?):(\d+):(\d+)/,n=[];function o(e){if(!e||e.__wxOriginalStack__)return!1;var t=e.stack;if(void 0===t)return!1;for(var r=t,o=n.length-1,i=0;i>=0&&o>=0;){var s=r.length,l=0;for(var u in a)if(a[u]){var c=r.indexOf(a[u],i);c<0||s<=c||(s=c,l=a[u].length)}if(s>=r.length)break;var d=`at <${n[o--].description}>`;r=r.slice(0,s)+d+r.slice(s+l),i=s+d.length}return Object.defineProperties(e,{__wxOriginalStack__:{value:t,writable:!0,configurable:!0},stack:{value:r,writable:!0,enumerable:!0,configurable:!0}}),!0}var a={wrapSystemFunction:null,wrapMiniProgramOrPluginFunction:null};function s(e){var t=((new Error).stack||"").match(/.+/gm),n="",o=0;t&&t.forEach((e=>{if(r.test(e)&&2===(o+=1)){var t=e.match(/^(\s*)at /),i=t?t[1].length:0;return n=e.slice(i),!1}return!0})),a[e]=n}function l(){for(var e="",t=n.length-1;t>=0;t--)n[t].pluginAppId&&(e=n[t].pluginAppId);return e}var u=e=>{null===a.wrapSystemFunction&&(a.wrapSystemFunction="",p("","",s)("wrapSystemFunction")),n.push({description:e})},c=()=>{n.pop()};function d(e,t,r,u,c,d=!1){var f;null===a.wrapSystemFunction&&(a.wrapSystemFunction="",p("","",s)("wrapSystemFunction")),n.push({description:t});try{f=r.apply(u,c)}catch(t){if(o(t)){if("AppServiceSdkKnownError"===t.type)throw n.pop(),t;if("ThirdScriptError"===t.type){var h=l();i.thirdErrorReport({error:t,source:h,triggerErrorCallback:!d})}else i.errorReport({key:e,error:t,triggerErrorCallback:!d})}if(d)throw n.pop(),t}return n.pop(),f}function p(e,t,r,n=!1){return function(...o){return d(e,t,r,this,o,n)}}function f(e,t,r,l,u,c=!1){var d;null===a.wrapMiniProgramOrPluginFunction&&(a.wrapMiniProgramOrPluginFunction="",_("","",s)("wrapMiniProgramOrPluginFunction")),n.push({description:t,pluginAppId:e});try{d=r.apply(l,u)}catch(t){if(o(t)&&i.thirdErrorReport({error:t,source:e||"",triggerErrorCallback:!c}),c)throw n.pop(),t}return n.pop(),d}function h(e,t,r,n,o=!1){return f(l(),e,t,r,n,o)}function _(e,t,r,n=!1){return function(...o){return f(e,t,r,this,o,n)}}function g(e,t,r=!1){return function(...n){return f(l(),e,t,this,n,r)}}function v(e,t){var r=(t||"").match(/^\s*(?:at )?([\s\S]*)$/),n=r?r[1]:"",o=e||function(){};return function(...e){return f(l(),n,o,o,e,!1)}}N=t})(),(()=>{var e={949:e=>{function t(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=e.apply(r,n);function s(e){t(a,o,i,s,l,"next",e)}function l(e){t(a,o,i,s,l,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},157:(e,t,r)=>{var n=r(182);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},798:(e,t,r)=>{var n=r(157);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},48:(e,t,r)=>{var n=r(830);e.exports=function(e,t){if(null==e)return{};var r,o,i=n(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},830:e=>{e.exports=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o},e.exports.__esModule=!0,e.exports.default=e.exports},226:(e,t,r)=>{var n=r(309).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},182:(e,t,r)=>{var n=r(309).default,o=r(226);e.exports=function(e){var t=o(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},309:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},77:(e,t,r)=>{"use strict";r.d(t,{V1:()=>U,V3:()=>Qe,j:()=>he,m:()=>$});var n=r(798),o=r.n(n),i=r(949),a=r.n(i),s=Object.create,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,d=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,f=(e,t)=>()=>(e&&(t=e(e=0)),t),h=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),_=(e,t)=>{for(var r in t)l(e,r,{get:t[r],enumerable:!0})},g=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t){var o=function(o){!p.call(e,o)&&o!==r&&l(e,o,{get:()=>t[o],enumerable:!(n=u(t,o))||n.enumerable})};for(var i of c(t))o(i)}return e},v=(e,t,r)=>(r=null!=e?s(d(e)):{},g(!t&&e&&e.__esModule?r:l(r,"default",{value:e,enumerable:!0}),e)),m=f((()=>{})),y=h((e=>{m();var t=[0,255,65535,16777215,4294967295];function r(e,t,r,n,o){var i;for(i=0;i<o;i++)r[n+i]=e[t+i]}function n(e,t,r,n){var o;for(o=0;o<n;o++)e[t+o]=e[t-r+o]}function o(e){this.array=e,this.pos=0}o.prototype.readUncompressedLength=function(){for(var e,t,r=0,n=0;n<32&&this.pos<this.array.length;){if(e=this.array[this.pos],this.pos+=1,(t=127&e)<<n>>>n!==t)return-1;if(r|=t<<n,e<128)return r;n+=7}return-1},o.prototype.uncompressToBuffer=function(e){for(var o,i,a,s,l=this.array,u=l.length,c=this.pos,d=0;c<l.length;)if(o=l[c],c+=1,0==(3&o)){if((i=1+(o>>>2))>60){if(c+3>=u)return!1;a=i-60,i=1+((i=l[c]+(l[c+1]<<8)+(l[c+2]<<16)+(l[c+3]<<24))&t[a]),c+=a}if(c+i>u)return!1;r(l,c,e,d,i),c+=i,d+=i}else{switch(3&o){case 1:i=4+(o>>>2&7),s=l[c]+(o>>>5<<8),c+=1;break;case 2:if(c+1>=u)return!1;i=1+(o>>>2),s=l[c]+(l[c+1]<<8),c+=2;break;case 3:if(c+3>=u)return!1;i=1+(o>>>2),s=l[c]+(l[c+1]<<8)+(l[c+2]<<16)+(l[c+3]<<24),c+=4}if(0===s||s>d)return!1;n(e,d,s,i),d+=i}return!0},e.SnappyDecompressor=o})),b=h((e=>{m();var t=new Array(15);function r(e,t){return 506832829*e>>>t}function n(e,t){return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)}function o(e,t,r){return e[t]===e[r]&&e[t+1]===e[r+1]&&e[t+2]===e[r+2]&&e[t+3]===e[r+3]}function i(e,t,r,n,o){return r<=60?(n[o]=r-1<<2,o+=1):r<256?(n[o]=240,n[o+1]=r-1,o+=2):(n[o]=244,n[o+1]=r-1&255,n[o+2]=r-1>>>8,o+=3),function(e,t,r,n,o){var i;for(i=0;i<o;i++)r[n+i]=e[t+i]}(e,t,n,o,r),o+r}function a(e,t,r,n){return n<12&&r<2048?(e[t]=1+(n-4<<2)+(r>>>8<<5),e[t+1]=255&r,t+2):(e[t]=2+(n-1<<2),e[t+1]=255&r,e[t+2]=r>>>8,t+3)}function s(e,t,r,n){for(;n>=68;)t=a(e,t,r,64),n-=64;return n>64&&(t=a(e,t,r,60),n-=60),a(e,t,r,n)}function l(e,a,l,u,c){for(var d=1;1<<d<=l&&d<=14;)d+=1;var p=32-(d-=1);typeof t[d]>"u"&&(t[d]=new Uint16Array(1<<d));var f,h=t[d];for(f=0;f<h.length;f++)h[f]=0;var _,g,v,m,y,b,w,A,E,I,S=a+l,C=a,T=a,O=!0;if(l>=15)for(_=S-15,v=r(n(e,a+=1),p);O;){b=32,m=a;do{if(g=v,w=b>>>5,b+=1,m=(a=m)+w,a>_){O=!1;break}v=r(n(e,m),p),y=C+h[g],h[g]=a-C}while(!o(e,a,y));if(!O)break;c=i(e,T,a-T,u,c);do{for(A=a,E=4;a+E<S&&e[a+E]===e[y+E];)E+=1;if(a+=E,c=s(u,c,A-y,E),T=a,a>=_){O=!1;break}h[r(n(e,a-1),p)]=a-1-C,y=C+h[I=r(n(e,a),p)],h[I]=a-C}while(o(e,a,y));if(!O)break;v=r(n(e,a+=1),p)}return T<S&&(c=i(e,T,S-T,u,c)),c}function u(e){this.array=e}u.prototype.maxCompressedLength=function(){var e=this.array.length;return 32+e+Math.floor(e/6)},u.prototype.compressToBuffer=function(e){var t,r=this.array,n=r.length,o=0,i=0;for(i=function(e,t,r){do{t[r]=127&e,(e>>>=7)>0&&(t[r]+=128),r+=1}while(e>0);return r}(n,e,i);o<n;)i=l(r,o,t=Math.min(n-o,65536),e,i),o+=t;return i},e.SnappyCompressor=u})),w=h((e=>{function t(){return"object"==typeof process&&"object"==typeof process.versions&&typeof process.versions.node<"u"}function r(e){return e instanceof Uint8Array&&(!t()||!Buffer.isBuffer(e))}function n(e){return e instanceof ArrayBuffer}function o(e){return!!t()&&Buffer.isBuffer(e)}m();var i=y().SnappyDecompressor,a=b().SnappyCompressor,s="Argument compressed must be type of ArrayBuffer, Buffer, or Uint8Array";e.uncompress=function(e,t){if(!r(e)&&!n(e)&&!o(e))throw new TypeError(s);var a=!1,l=!1;r(e)?a=!0:n(e)&&(l=!0,e=new Uint8Array(e));var u,c,d=new i(e),p=d.readUncompressedLength();if(-1===p)throw new Error("Invalid Snappy bitstream");if(p>t)throw new Error(`The uncompressed length of ${p} is too big, expect at most ${t}`);if(a){if(u=new Uint8Array(p),!d.uncompressToBuffer(u))throw new Error("Invalid Snappy bitstream")}else if(l){if(u=new ArrayBuffer(p),c=new Uint8Array(u),!d.uncompressToBuffer(c))throw new Error("Invalid Snappy bitstream")}else if(u=Buffer.alloc(p),!d.uncompressToBuffer(u))throw new Error("Invalid Snappy bitstream");return u},e.compress=function(e){if(!r(e)&&!n(e)&&!o(e))throw new TypeError(s);var t=!1,i=!1;r(e)?t=!0:n(e)&&(i=!0,e=new Uint8Array(e));var l,u,c,d=new a(e),p=d.maxCompressedLength();if(t?(l=new Uint8Array(p),c=d.compressToBuffer(l)):i?(l=new ArrayBuffer(p),u=new Uint8Array(l),c=d.compressToBuffer(u)):(l=Buffer.alloc(p),c=d.compressToBuffer(l)),!l.slice){var f=new Uint8Array(Array.prototype.slice.call(l,0,c));if(t)return f;if(i)return f.buffer;throw new Error("Not implemented")}return l.slice(0,c)}})),A=h(((e,t)=>{m(),t.exports=function(e,t){for(var r=new Array(arguments.length-1),n=0,o=2,i=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,a){r[n]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,a(e))}}))}})),E=h((e=>{m();var t=e;t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};var r,n=new Array(64),o=new Array(123);for(r=0;r<64;)o[n[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;t.encode=function(e,t,r){for(var o,i=null,a=[],s=0,l=0;t<r;){var u=e[t++];switch(l){case 0:a[s++]=n[u>>2],o=(3&u)<<4,l=1;break;case 1:a[s++]=n[o|u>>4],o=(15&u)<<2,l=2;break;case 2:a[s++]=n[o|u>>6],a[s++]=n[63&u],l=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return l&&(a[s++]=n[o],a[s++]=61,1===l&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var i="invalid encoding";t.decode=function(e,t,r){for(var n,a=r,s=0,l=0;l<e.length;){var u=e.charCodeAt(l++);if(61===u&&s>1)break;if(void 0===(u=o[u]))throw Error(i);switch(s){case 0:n=u,s=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,s=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,s=3;break;case 3:t[r++]=(3&n)<<6|u,s=0}}if(1===s)throw Error(i);return r-a},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}})),I=h(((e,t)=>{function r(){this._listeners={}}m(),t.exports=r,r.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}})),S=h(((e,t)=>{function r(e){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function s(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:i,e.writeFloatBE=n?i:o,e.readFloatLE=n?a:s,e.readFloatBE=n?s:a}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function r(e,t,r){var n=e(t,r),o=2*(n>>31)+1,i=n>>>23&255,a=8388607&n;return 255===i?a?NaN:o*(1/0):0===i?1401298464324817e-60*o*a:o*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,o),e.readFloatLE=r.bind(null,i),e.readFloatBE=r.bind(null,a)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function s(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:i,e.writeDoubleBE=n?i:o,e.readDoubleLE=n?a:s,e.readDoubleBE=n?s:a}():function(){function t(e,t,r,n,o,i){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,o,i+t),e(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))e(0,o,i+t),e(2146959360,o,i+r);else if(n>17976931348623157e292)e(0,o,i+t),e((a<<31|2146435072)>>>0,o,i+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,o,i+t),e((a<<31|s/4294967296)>>>0,o,i+r);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(s=n*Math.pow(2,-l))>>>0,o,i+t),e((a<<31|l+1023<<20|1048576*s&1048575)>>>0,o,i+r)}}}function r(e,t,r,n,o){var i=e(n,o+t),a=e(n,o+r),s=2*(a>>31)+1,l=a>>>20&2047,u=4294967296*(1048575&a)+i;return 2047===l?u?NaN:s*(1/0):0===l?5e-324*s*u:s*Math.pow(2,l-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=r.bind(null,i,0,4),e.readDoubleBE=r.bind(null,a,4,0)}(),e}function n(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function o(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}m(),t.exports=r(r)})),C=h(((e,t)=>{function r(e){try{var t=eval("quire".replace(/^/,"re"))(e);if(t&&(t.length||Object.keys(t).length))return t}catch(e){}return null}m(),t.exports=r})),T=h((e=>{m();var t=e;t.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},t.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],a=0;t<r;)(n=e[t++])<128?i[a++]=n:n>191&&n<224?i[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(n>>10),i[a++]=56320+(1023&n)):i[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},t.write=function(e,t,r){for(var n,o,i=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&o),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}})),O=h(((e,t)=>{m(),t.exports=function(e,t,r){var n=r||8192,o=n>>>1,i=null,a=n;return function(r){if(r<1||r>o)return e(r);a+r>n&&(i=e(n),a=0);var s=t.call(i,a,a+=r);return 7&a&&(a=1+(7|a)),s}}})),x=h(((e,t)=>{m(),t.exports=n;var r=N();function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=n.zero=new n(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var i=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var r=e>>>0,i=(e-r)/4294967296>>>0;return t&&(i=~i>>>0,r=~r>>>0,++r>4294967295&&(r=0,++i>4294967295&&(i=0))),new n(r,i)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(r.isString(e)){if(!r.Long)return n.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):o},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;n.fromHash=function(e){return e===i?o:new n((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}})),N=h((e=>{m();var t=e;function n(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)(void 0===e[n[o]]||!r)&&(e[n[o]]=t[n[o]]);return e}function o(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:()=>e,set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}t.asPromise=A(),t.base64=E(),t.EventEmitter=I(),t.float=S(),t.inquire=C(),t.utf8=T(),t.pool=O(),t.LongBits=x(),t.isNode=Boolean(typeof r.g<"u"&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),t.global=t.isNode&&r.g||typeof window<"u"&&window||typeof self<"u"&&self||e,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"==typeof e},t.isset=t.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)},t.Array=typeof Uint8Array<"u"?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,r){var n=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))},t.merge=n,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=o,t.ProtocolError=o("ProtocolError"),t.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},t.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}})),R=h(((e,t)=>{m(),t.exports=c;var r,n=N(),o=n.LongBits,i=n.base64,a=n.utf8;function s(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function c(){this.len=0,this.head=new s(l,0,0),this.tail=this.head,this.states=null}var d=function(){return n.Buffer?function(){return(c.create=function(){return new r})()}:function(){return new c}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function h(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function _(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}c.create=d(),c.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(c.alloc=n.pool(c.alloc,n.Array.prototype.subarray)),c.prototype._push=function(e,t,r){return this.tail=this.tail.next=new s(e,t,r),this.len+=t,this},f.prototype=Object.create(s.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},c.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},c.prototype.int32=function(e){return e<0?this._push(h,10,o.fromNumber(e)):this.uint32(e)},c.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},c.prototype.uint64=function(e){var t=o.from(e);return this._push(h,t.length(),t)},c.prototype.int64=c.prototype.uint64,c.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(h,t.length(),t)},c.prototype.bool=function(e){return this._push(p,1,e?1:0)},c.prototype.fixed32=function(e){return this._push(_,4,e>>>0)},c.prototype.sfixed32=c.prototype.fixed32,c.prototype.fixed64=function(e){var t=o.from(e);return this._push(_,4,t.lo)._push(_,4,t.hi)},c.prototype.sfixed64=c.prototype.fixed64,c.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},c.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var g=n.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};c.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(n.isString(e)){var r=c.alloc(t=i.length(e));i.decode(e,r,0),e=r}return this.uint32(t)._push(g,t,e)},c.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},c.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new s(l,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(l,0,0),this.len=0),this},c.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},c.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},c._configure=function(e){r=e,c.create=d(),r._configure()}})),P=h(((e,t)=>{m(),t.exports=o;var r=R();(o.prototype=Object.create(r.prototype)).constructor=o;var n=N();function o(){r.call(this)}function i(e,t,r){e.length<40?n.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}o._configure=function(){o.alloc=n._Buffer_allocUnsafe,o.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},o.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(i,t,e),this},o._configure()})),D=h(((e,t)=>{m(),t.exports=s;var r,n=N(),o=n.LongBits,i=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function s(e){this.buf=e,this.pos=0,this.len=e.length}var l,u=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new s(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new s(e);throw Error("illegal buffer")},c=function(){return n.Buffer?function(e){return(s.create=function(e){return n.Buffer.isBuffer(e)?new r(e):u(e)})(e)}:u};function d(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}s.create=c(),s.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,s.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),s.prototype.int32=function(){return 0|this.uint32()},s.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},s.prototype.bool=function(){return 0!==this.uint32()},s.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},s.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},s.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},s.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},s.prototype.string=function(){var e=this.bytes();return i.read(e,0,e.length)},s.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},s.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},s._configure=function(e){r=e,s.create=c(),r._configure();var t=n.Long?"toLong":"toNumber";n.merge(s.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}})),L=h(((e,t)=>{m(),t.exports=o;var r=D();(o.prototype=Object.create(r.prototype)).constructor=o;var n=N();function o(e){r.call(this,e)}o._configure=function(){n.Buffer&&(o.prototype._slice=n.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()})),B=h(((e,t)=>{m(),t.exports=n;var r=N();function n(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,n,o,i,a){if(!i)throw TypeError("request must be specified");var s=this;if(!a)return r.asPromise(e,s,t,n,o,i);if(s.rpcImpl)try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return s.emit("error",e,t),a(e);if(null!==r){if(!(r instanceof o))try{r=o[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",r,t),a(null,r)}s.end(!0)}))}catch(e){return s.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}})),k=h((e=>{m(),e.Service=B()})),M=h(((e,t)=>{m(),t.exports={}})),F=h((e=>{m();var t=e;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=R(),t.BufferWriter=P(),t.Reader=D(),t.BufferReader=L(),t.util=N(),t.rpc=k(),t.roots=M(),t.configure=r,r()})),j=h(((e,t)=>{m(),t.exports=F()}));m();var U={};_(U,{decode:()=>We,decodeRequest:()=>qe,decodeResponse:()=>He,decodeStdPrivResponse:()=>Ge,encode:()=>ke,encodeRequest:()=>Me,encodeResponse:()=>Fe,encodeStdPrivRequest:()=>je}),m(),m(),m();var $=(W=$||{},W.pb="PB",W.json="JSON",W),W;function q(e){return"number"==typeof e}function H(e){return e instanceof Uint8Array}function G(e,t,r){var n=t?t.byteLength:r||65536;if(4095&n||n<=0)throw new Error("heap size must be a positive integer and a multiple of 4096");return t=t||new e(new ArrayBuffer(n))}function Q(e,t,r,n,o){var i=e.length-t,a=i<o?i:o;return e.set(r.subarray(n,n+a),t),a}m(),m();var z=(()=>{function e(){var e=Error.apply(this,arguments);this.message=e.message,this.stack=e.stack}return e.prototype=Object.create(Error.prototype,{name:{value:"IllegalArgumentError"}}),e})(),Y=(()=>{function e(){var e=Error.apply(this,arguments);this.message=e.message,this.stack=e.stack}return e.prototype=Object.create(Error.prototype,{name:{value:"SecurityError"}}),e})(),K=(()=>{var e,t,r,n,o,i,a=!1;function s(r,n){var o=e[(t[r]+t[n])%255];return(0===r||0===n)&&(o=0),o}function l(){function l(r){var n,o,i;for(o=i=function(r){var n=e[255-t[r]];return 0===r&&(n=0),n}(r),n=0;n<4;n++)i^=o=255&(o<<1|o>>>7);return i^=99}a||function(){e=[],t=[];var r,n,o=1;for(r=0;r<255;r++)e[r]=o,n=128&o,o<<=1,o&=255,128===n&&(o^=27),o^=e[r],t[e[r]]=r;e[255]=e[0],t[0]=0,a=!0}(),r=[],n=[],o=[[],[],[],[]],i=[[],[],[],[]];for(var u=0;u<256;u++){var c=l(u);r[u]=c,n[c]=u,o[0][u]=s(2,c)<<24|c<<16|c<<8|s(3,c),i[0][c]=s(14,u)<<24|s(9,u)<<16|s(13,u)<<8|s(11,u);for(var d=1;d<4;d++)o[d][u]=o[d-1][u]>>>8|o[d-1][u]<<24,i[d][c]=i[d-1][c]>>>8|i[d-1][c]<<24}}var u=function(e,t){l();var a=new Uint32Array(t);a.set(r,512),a.set(n,768);for(var s=0;s<4;s++)a.set(o[s],4096+1024*s>>2),a.set(i[s],8192+1024*s>>2);var u=function(e,t,r){var n=0,o=0,i=0,a=0,s=0,l=0,u=0,c=0,d=0,p=0,f=0,h=0,_=0,g=0,v=0,m=0,y=0,b=new e.Uint32Array(r),w=new e.Uint8Array(r);function A(e,t,r,s,l,u,c,d){t|=0,s|=0,l|=0,u|=0,c|=0,d|=0;var p,f,h,_=0,g=0,v=0,m=0,y=0;for(p=1024|(r|=0),f=2048|r,h=3072|r,l^=b[(0|(e|=0))>>2],u^=b[(4|e)>>2],c^=b[(8|e)>>2],d^=b[(12|e)>>2],y=16;(0|y)<=s<<4;y=y+16|0)_=b[(r|l>>22&1020)>>2]^b[(p|u>>14&1020)>>2]^b[(f|c>>6&1020)>>2]^b[(h|d<<2&1020)>>2]^b[(e|y|0)>>2],g=b[(r|u>>22&1020)>>2]^b[(p|c>>14&1020)>>2]^b[(f|d>>6&1020)>>2]^b[(h|l<<2&1020)>>2]^b[(e|y|4)>>2],v=b[(r|c>>22&1020)>>2]^b[(p|d>>14&1020)>>2]^b[(f|l>>6&1020)>>2]^b[(h|u<<2&1020)>>2]^b[(e|y|8)>>2],m=b[(r|d>>22&1020)>>2]^b[(p|l>>14&1020)>>2]^b[(f|u>>6&1020)>>2]^b[(h|c<<2&1020)>>2]^b[(e|y|12)>>2],l=_,u=g,c=v,d=m;n=b[(t|l>>22&1020)>>2]<<24^b[(t|u>>14&1020)>>2]<<16^b[(t|c>>6&1020)>>2]<<8^b[(t|d<<2&1020)>>2]^b[(e|y|0)>>2],o=b[(t|u>>22&1020)>>2]<<24^b[(t|c>>14&1020)>>2]<<16^b[(t|d>>6&1020)>>2]<<8^b[(t|l<<2&1020)>>2]^b[(e|y|4)>>2],i=b[(t|c>>22&1020)>>2]<<24^b[(t|d>>14&1020)>>2]<<16^b[(t|l>>6&1020)>>2]<<8^b[(t|u<<2&1020)>>2]^b[(e|y|8)>>2],a=b[(t|d>>22&1020)>>2]<<24^b[(t|l>>14&1020)>>2]<<16^b[(t|u>>6&1020)>>2]<<8^b[(t|c<<2&1020)>>2]^b[(e|y|12)>>2]}function E(e,t,r,d){A(0,2048,4096,y,s^(e|=0),l^(t|=0),u^(r|=0),c^(d|=0)),s=n,l=o,u=i,c=a}var I=[,,E,function(e,t,r,d){var p;A(1024,3072,8192,y,e|=0,d|=0,r|=0,t|=0),p=o,o=a,a=p,n^=s,o^=l,i^=u,a^=c,s=e,l=t,u=r,c=d},,,,],S=[E];return{set_rounds:function(e){y=e|=0},set_state:function(e,t,r,s){n=e|=0,o=t|=0,i=r|=0,a=s|=0},set_iv:function(e,t,r,n){s=e|=0,l=t|=0,u=r|=0,c=n|=0},set_nonce:function(e,t,r,n){d=e|=0,p=t|=0,f=r|=0,h=n|=0},set_mask:function(e,t,r,n){_=e|=0,g=t|=0,v=r|=0,m=n|=0},set_counter:function(e,t,r,n){h=~m&h|m&(n|=0),f=~v&f|v&(r|=0),p=~g&p|g&(t|=0),d=~_&d|_&(e|=0)},get_state:function(e){return 15&(e|=0)?-1:(w[0|e]=n>>>24,w[1|e]=n>>>16&255,w[2|e]=n>>>8&255,w[3|e]=255&n,w[4|e]=o>>>24,w[5|e]=o>>>16&255,w[6|e]=o>>>8&255,w[7|e]=255&o,w[8|e]=i>>>24,w[9|e]=i>>>16&255,w[10|e]=i>>>8&255,w[11|e]=255&i,w[12|e]=a>>>24,w[13|e]=a>>>16&255,w[14|e]=a>>>8&255,w[15|e]=255&a,16)},get_iv:function(e){return 15&(e|=0)?-1:(w[0|e]=s>>>24,w[1|e]=s>>>16&255,w[2|e]=s>>>8&255,w[3|e]=255&s,w[4|e]=l>>>24,w[5|e]=l>>>16&255,w[6|e]=l>>>8&255,w[7|e]=255&l,w[8|e]=u>>>24,w[9|e]=u>>>16&255,w[10|e]=u>>>8&255,w[11|e]=255&u,w[12|e]=c>>>24,w[13|e]=c>>>16&255,w[14|e]=c>>>8&255,w[15|e]=255&c,16)},cipher:function(e,t,r){e|=0,r|=0;var s=0;if(15&(t|=0))return-1;for(;(0|r)>=16;)I[7&e](w[0|t]<<24|w[1|t]<<16|w[2|t]<<8|w[3|t],w[4|t]<<24|w[5|t]<<16|w[6|t]<<8|w[7|t],w[8|t]<<24|w[9|t]<<16|w[10|t]<<8|w[11|t],w[12|t]<<24|w[13|t]<<16|w[14|t]<<8|w[15|t]),w[0|t]=n>>>24,w[1|t]=n>>>16&255,w[2|t]=n>>>8&255,w[3|t]=255&n,w[4|t]=o>>>24,w[5|t]=o>>>16&255,w[6|t]=o>>>8&255,w[7|t]=255&o,w[8|t]=i>>>24,w[9|t]=i>>>16&255,w[10|t]=i>>>8&255,w[11|t]=255&i,w[12|t]=a>>>24,w[13|t]=a>>>16&255,w[14|t]=a>>>8&255,w[15|t]=255&a,s=s+16|0,t=t+16|0,r=r-16|0;return 0|s},mac:function(e,t,r){e|=0,r|=0;var n=0;if(15&(t|=0))return-1;for(;(0|r)>=16;)S[1&e](w[0|t]<<24|w[1|t]<<16|w[2|t]<<8|w[3|t],w[4|t]<<24|w[5|t]<<16|w[6|t]<<8|w[7|t],w[8|t]<<24|w[9|t]<<16|w[10|t]<<8|w[11|t],w[12|t]<<24|w[13|t]<<16|w[14|t]<<8|w[15|t]),n=n+16|0,t=t+16|0,r=r-16|0;return 0|n}}}({Uint8Array:Uint8Array,Uint32Array:Uint32Array},0,t);return u.set_key=function(e,t,n,o,s,l,c,d,p){var f=a.subarray(0,60),h=a.subarray(256,316);f.set([t,n,o,s,l,c,d,p]);for(var _=e,g=1;_<4*e+28;_++){var v=f[_-1];(_%e==0||8===e&&_%e==4)&&(v=r[v>>>24]<<24^r[v>>>16&255]<<16^r[v>>>8&255]<<8^r[255&v]),_%e==0&&(v=v<<8^v>>>24^g<<24,g=g<<1^(128&g?27:0)),f[_]=f[_-e]^v}for(var m=0;m<_;m+=4)for(var y=0;y<4;y++){v=f[_-(4+m)+(4-y)%4];h[m+y]=m<4||m>=_-4?v:i[0][r[v>>>24]]^i[1][r[v>>>16&255]]^i[2][r[v>>>8&255]]^i[3][r[255&v]]}u.set_rounds(e+5)},u};return u.ENC={CBC:2},u.DEC={CBC:3},u.MAC={CBC:0},u.HEAP_DATA=16384,u})(),V=new Uint8Array(1048576),J=K(null,V.buffer),X=class{constructor(e,t,r,n,o){this.nonce=null,this.counter=0,this.counterSize=0,this.heap=G(Uint8Array,n).subarray(K.HEAP_DATA),this.asm=o||K(null,this.heap.buffer),this.mode=null,this.key=null,this.AES_reset(e,t,r)}AES_set_key(e){if(void 0!==e){if(!H(e))throw new TypeError("unexpected key type");var t=e.length;if(16!==t&&24!==t&&32!==t)throw new z("illegal key size");var r=new DataView(e.buffer,e.byteOffset,e.byteLength);this.asm.set_key(t>>2,r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12),t>16?r.getUint32(16):0,t>16?r.getUint32(20):0,t>24?r.getUint32(24):0,t>24?r.getUint32(28):0),this.key=e}else if(!this.key)throw new Error("key is required")}AES_CTR_set_options(e,t,r){if(void 0!==r){if(r<8||r>48)throw new z("illegal counter size");this.counterSize=r;var n=Math.pow(2,r)-1;this.asm.set_mask(0,0,n/4294967296|0,0|n)}else this.counterSize=r=48,this.asm.set_mask(0,0,65535,4294967295);if(void 0===e)throw new Error("nonce is required");if(!H(e))throw new TypeError("unexpected nonce type");var o=e.length;if(!o||o>16)throw new z("illegal nonce size");this.nonce=e;var i=new DataView(new ArrayBuffer(16));if(new Uint8Array(i.buffer).set(e),this.asm.set_nonce(i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)),void 0!==t){if(!q(t))throw new TypeError("unexpected counter type");if(t<0||t>=Math.pow(2,r))throw new z("illegal counter value");this.counter=t,this.asm.set_counter(0,0,t/4294967296|0,0|t)}else this.counter=0}AES_set_iv(e){if(void 0!==e){if(!H(e))throw new TypeError("unexpected iv type");if(16!==e.length)throw new z("illegal iv size");var t=new DataView(e.buffer,e.byteOffset,e.byteLength);this.iv=e,this.asm.set_iv(t.getUint32(0),t.getUint32(4),t.getUint32(8),t.getUint32(12))}else this.iv=null,this.asm.set_iv(0,0,0,0)}AES_set_padding(e){this.padding=void 0===e||!!e}AES_reset(e,t,r){return this.result=null,this.pos=0,this.len=0,this.AES_set_key(e),this.AES_set_iv(t),this.AES_set_padding(r),this}AES_Encrypt_process(e){if(!H(e))throw new TypeError("data isn't of expected type");for(var t=this.asm,r=this.heap,n=K.ENC[this.mode],o=K.HEAP_DATA,i=this.pos,a=this.len,s=0,l=e.length||0,u=0,c=0,d=new Uint8Array(a+l&-16);l>0;)a+=c=Q(r,i+a,e,s,l),s+=c,l-=c,(c=t.cipher(n,o+i,a))&&d.set(r.subarray(i,i+c),u),u+=c,c<a?(i+=c,a-=c):(i=0,a=0);return this.result=d,this.pos=i,this.len=a,this}AES_Encrypt_finish(e){var t=null,r=0;void 0!==e&&(r=(t=this.AES_Encrypt_process(e).result).length);var n=this.asm,o=this.heap,i=K.ENC[this.mode],a=K.HEAP_DATA,s=this.pos,l=this.len,u=16-l%16,c=l;if(this.hasOwnProperty("padding")){if(this.padding){for(var d=0;d<u;++d)o[s+l+d]=u;c=l+=u}else if(l%16)throw new z("data length must be a multiple of the block size")}else l+=u;var p=new Uint8Array(r+c);return r&&p.set(t),l&&n.cipher(i,a+s,l),c&&p.set(o.subarray(s,s+c),r),this.result=p,this.pos=0,this.len=0,this}AES_Decrypt_process(e){if(!H(e))throw new TypeError("data isn't of expected type");var t=this.asm,r=this.heap,n=K.DEC[this.mode],o=K.HEAP_DATA,i=this.pos,a=this.len,s=0,l=e.length||0,u=0,c=a+l&-16,d=0,p=0;this.padding&&(c-=d=a+l-c||16);for(var f=new Uint8Array(c);l>0;)a+=p=Q(r,i+a,e,s,l),s+=p,l-=p,(p=t.cipher(n,o+i,a-(l?0:d)))&&f.set(r.subarray(i,i+p),u),u+=p,p<a?(i+=p,a-=p):(i=0,a=0);return this.result=f,this.pos=i,this.len=a,this}AES_Decrypt_finish(e){var t=null,r=0;void 0!==e&&(r=(t=this.AES_Decrypt_process(e).result).length);var n=this.asm,o=this.heap,i=K.DEC[this.mode],a=K.HEAP_DATA,s=this.pos,l=this.len,u=l;if(l>0){if(l%16){if(this.hasOwnProperty("padding"))throw new z("data length must be a multiple of the block size");l+=16-l%16}if(n.cipher(i,a+s,l),this.hasOwnProperty("padding")&&this.padding){var c=o[s+u-1];if(c<1||c>16||c>u)throw new Y("bad padding");for(var d=0,p=c;p>1;p--)d|=c^o[s+u-p];if(d)throw new Y("bad padding");u-=c}}var f=new Uint8Array(r+u);return r>0&&f.set(t),u>0&&f.set(o.subarray(s,s+u),r),this.result=f,this.pos=0,this.len=0,this}},Z=(()=>{class e extends X{constructor(e,t=null,r=!0,n,o){super(e,t,r,n,o),this.mode="CBC",this.BLOCK_SIZE=16}encrypt(e){return this.AES_Encrypt_finish(e)}decrypt(e){return this.AES_Decrypt_finish(e)}}return e.encrypt=te,e.decrypt=re,e})(),ee;function te(e,t,r,n){if(void 0===e)throw new SyntaxError("data required");if(void 0===t)throw new SyntaxError("key required");return new Z(t,n,r,V,J).encrypt(e).result}function re(e,t,r,n){if(void 0===e)throw new SyntaxError("data required");if(void 0===t)throw new SyntaxError("key required");return new Z(t,n,r,V,J).decrypt(e).result}function ne(e){return new Promise(((t,r)=>{for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=new Uint8Array(256),i=0;i<n.length;i++)o[n.charCodeAt(i)]=i;var a=typeof a<"u"?a:{},s=Object.assign({},a);"object"==typeof process&&"object"==typeof process.versions&&process.versions.node,a.print||console.log.bind(console);var l=a.printErr||console.warn.bind(console);Object.assign(a,s),s=null,a.arguments&&a.arguments,a.thisProgram&&a.thisProgram,a.quit&&a.quit,a.wasmBinary&&a.wasmBinary,a.noExitRuntime,"object"!=typeof e&&v("[WACloudCrypto] no native wasm support detected");var u,c=!1;a.INITIAL_MEMORY;var d,p=[],f=[],h=[];var _=0,g=null;function v(t){a.onAbort&&a.onAbort(t),l(t="Aborted("+t+")"),c=!0,t+=". Build with -sASSERTIONS for more info.";var n=new e.RuntimeError(t);r(n)}var m={env:{STACKTOP:0}};function y(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?w(r)():w(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(a)}}var b=[];function w(e){var t=b[e];return t||(e>=b.length&&(b.length=e+1),b[e]=t=d.get(e)),t}var A,E={};function I(e){function t(){A||(A=!0,a.calledRun=!0,!c&&(y(f),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),h.unshift(e);var e;y(h)}()))}_>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),p.unshift(e);var e;y(p)}(),_>0)||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),t()}),1)):t())}if(function(){var r={a:E};function n(e,r){var n=e.exports;a.asm=n,u=a.asm.a,a.memory=u,function(e){a.HEAP8=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=new Int32Array(e),a.HEAPU8=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}(u.buffer),d=a.asm.g,function(e){f.unshift(e)}(a.asm.b),function(e){if(_--,a.monitorRunDependencies&&a.monitorRunDependencies(_),0==_&&g){var t=g;g=null,t()}}(),t(a)}function i(e){n(e.instance)}function s(t){return e.instantiate(function(e){var t,r,n,i,a,s=.75*e.length,l=e.length,u=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),d=new Uint8Array(c);for(t=0;t<l;t+=4)r=o[e.charCodeAt(t)],n=o[e.charCodeAt(t+1)],i=o[e.charCodeAt(t+2)],a=o[e.charCodeAt(t+3)],d[u++]=r<<2|n>>4,d[u++]=(15&n)<<4|i>>2,d[u++]=(3&i)<<6|63&a;return c}("AGFzbQEAAAABIgVgA39/fwBgBH9/f38AYAAAYAV/f39/fwBgBn9/f39/fwADBwYBAgADBAAEBQFwAQEBBQYBAYABgAEGCQF/AUHAzMACCwcdBwFhAgABYgABAWMAAgFkAAUBZQAEAWYAAwFnAQAK5zoG/hIBCn8gACgCBCIFQRBqIQQgBSgCDCACKAAMcyEGIAUoAgggAigACHMhByAFKAIEIAIoAARzIQggBSgCACACKAAAcyECIAAoAgAhAAJ/IAFFBEAgAEEETgRAIABBAXYhCQNAIAhBFnZB/AdxQbAiaigCACAHQQ52QfwHcUGwGmooAgAgBkEGdkH8B3FBsBJqKAIAIAJB/wFxQQJ0QbAKaigCACAEKAIAc3NzcyIAQRZ2QfwHcUGwImooAgAgB0EWdkH8B3FBsCJqKAIAIAZBDnZB/AdxQbAaaigCACACQQZ2QfwHcUGwEmooAgAgCEH/AXFBAnRBsApqKAIAIAQoAgRzc3NzIgFBDnZB/AdxQbAaaigCACAGQRZ2QfwHcUGwImooAgAgAkEOdkH8B3FBsBpqKAIAIAhBBnZB/AdxQbASaigCACAHQf8BcUECdEGwCmooAgAgBCgCCHNzc3MiBUEGdkH8B3FBsBJqKAIAIAJBFnZB/AdxQbAiaigCACAIQQ52QfwHcUGwGmooAgAgB0EGdkH8B3FBsBJqKAIAIAZB/wFxQQJ0QbAKaigCACAEKAIMc3NzcyICQf8BcUECdEGwCmooAgAgBCgCHHNzc3MhBiACQRZ2QfwHcUGwImooAgAgAEEOdkH8B3FBsBpqKAIAIAFBBnZB/AdxQbASaigCACAFQf8BcUECdEGwCmooAgAgBCgCGHNzc3MhByAFQRZ2QfwHcUGwImooAgAgAkEOdkH8B3FBsBpqKAIAIABBBnZB/AdxQbASaigCACABQf8BcUECdEGwCmooAgAgBCgCFHNzc3MhCCABQRZ2QfwHcUGwImooAgAgBUEOdkH8B3FBsBpqKAIAIAJBBnZB/AdxQbASaigCACAAQf8BcUECdEGwCmooAgAgBCgCEHNzc3MhAiAEQSBqIQQgCUECSyEAIAlBAWshCSAADQALC0GwKiEFIAdBFnZB/AdxQbAiaigCACAGQQ52QfwHcUGwGmooAgAgAkEGdkH8B3FBsBJqKAIAIAhB/wFxQQJ0QbAKaigCACAEKAIEc3NzcyIAIQEgCEEWdkH8B3FBsCJqKAIAIAdBDnZB/AdxQbAaaigCACAGQQZ2QfwHcUGwEmooAgAgAkH/AXFBAnRBsApqKAIAIAQoAgBzc3NzIgkhCiACQRZ2QfwHcUGwImooAgAgCEEOdkH8B3FBsBpqKAIAIAdBBnZB/AdxQbASaigCACAGQf8BcUECdEGwCmooAgAgBCgCDHNzc3MiCyEMIAZBFnZB/AdxQbAiaigCACACQQ52QfwHcUGwGmooAgAgCEEGdkH8B3FBsBJqKAIAIAdB/wFxQQJ0QbAKaigCACAEKAIIc3NzcyINDAELIABBBE4EQCAAQQF2IQkDQCAIQRZ2QfwHcUGwxABqKAIAIAJBDnZB/AdxQbA8aigCACAGQQZ2QfwHcUGwNGooAgAgB0H/AXFBAnRBsCxqKAIAIAQoAghzc3NzIgBBFnZB/AdxQbDEAGooAgAgAkEWdkH8B3FBsMQAaigCACAGQQ52QfwHcUGwPGooAgAgB0EGdkH8B3FBsDRqKAIAIAhB/wFxQQJ0QbAsaigCACAEKAIEc3NzcyIBQQ52QfwHcUGwPGooAgAgBkEWdkH8B3FBsMQAaigCACAHQQ52QfwHcUGwPGooAgAgCEEGdkH8B3FBsDRqKAIAIAJB/wFxQQJ0QbAsaigCACAEKAIAc3NzcyIFQQZ2QfwHcUGwNGooAgAgB0EWdkH8B3FBsMQAaigCACAIQQ52QfwHcUGwPGooAgAgAkEGdkH8B3FBsDRqKAIAIAZB/wFxQQJ0QbAsaigCACAEKAIMc3NzcyICQf8BcUECdEGwLGooAgAgBCgCHHNzc3MhBiABQRZ2QfwHcUGwxABqKAIAIAVBDnZB/AdxQbA8aigCACACQQZ2QfwHcUGwNGooAgAgAEH/AXFBAnRBsCxqKAIAIAQoAhhzc3NzIQcgBUEWdkH8B3FBsMQAaigCACACQQ52QfwHcUGwPGooAgAgAEEGdkH8B3FBsDRqKAIAIAFB/wFxQQJ0QbAsaigCACAEKAIUc3NzcyEIIAJBFnZB/AdxQbDEAGooAgAgAEEOdkH8B3FBsDxqKAIAIAFBBnZB/AdxQbA0aigCACAFQf8BcUECdEGwLGooAgAgBCgCEHNzc3MhAiAEQSBqIQQgCUECSyEAIAlBAWshCSAADQALC0GwCCEFIAJBFnZB/AdxQbDEAGooAgAgBkEOdkH8B3FBsDxqKAIAIAdBBnZB/AdxQbA0aigCACAIQf8BcUECdEGwLGooAgAgBCgCBHNzc3MiCyEBIAhBFnZB/AdxQbDEAGooAgAgAkEOdkH8B3FBsDxqKAIAIAZBBnZB/AdxQbA0aigCACAHQf8BcUECdEGwLGooAgAgBCgCCHNzc3MiDSEKIAdBFnZB/AdxQbDEAGooAgAgCEEOdkH8B3FBsDxqKAIAIAJBBnZB/AdxQbA0aigCACAGQf8BcUECdEGwLGooAgAgBCgCDHNzc3MiACEMIAZBFnZB/AdxQbDEAGooAgAgB0EOdkH8B3FBsDxqKAIAIAhBBnZB/AdxQbA0aigCACACQf8BcUECdEGwLGooAgAgBCgCAHNzc3MiCQshAiAEKAIQIQYgBCgCFCEHIAQoAhghCCADIAQoAhwiBCAFIAxB/wFxai0AAHM6AAwgAyAIIAUgDUH/AXFqLQAAczoACCADIAcgBSABQf8BcWotAABzOgAEIAMgBiAFIAlB/wFxai0AAHM6AAAgAyAEIAUgCkEYdmotAABBGHRzQRh2OgAPIAMgCCAFIAtBGHZqLQAAQRh0c0EYdjoACyADIAcgBSACQRh2ai0AAEEYdHNBGHY6AAcgAyAGIAUgAEEYdmotAABBGHRzQRh2OgADIAMgBCAFIAFBEHZB/wFxai0AAEEQdHNBEHY6AA4gAyAEIAUgAkEIdkH/AXFqLQAAQQh0c0EIdjoADSADIAggBSAJQRB2Qf8BcWotAABBEHRzQRB2OgAKIAMgCCAFIABBCHZB/wFxai0AAEEIdHNBCHY6AAkgAyAHIAUgDEEQdkH/AXFqLQAAQRB0c0EQdjoABiADIAcgBSAKQQh2Qf8BcWotAABBCHRzQQh2OgAFIAMgBiAFIA1BEHZB/wFxai0AAEEQdHNBEHY6AAIgAyAGIAUgC0EIdkH/AXFqLQAAQQh0c0EIdjoAAQsDAAELpxYBBn8CQCAAAn9BCiACQYABRg0AGiACQYACRwRAIAJBwAFHDQJBDAwBC0EOCyIENgIAIAAgAEEIaiIDNgIEIAJBBXYhBUEAIQIDQCADIAJBAnQiBmogASAGaigAADYCACACQQFqIgIgBUcNAAsCQAJAAkAgBEEKaw4FAQMAAwIDCyAAIAAoAgggACgCHCIBQQh2Qf8BcUGwCGotAABzIAFBEHZB/wFxQbAIai0AAEEIdHMgAUEYdkGwCGotAABBEHRzIAFB/wFxQbAIai0AAEEYdHMiA0EBcyICNgIgIAAgAiAAKAIMcyICNgIkIAAgACgCECIGIAJzIgQ2AiggACAAKAIUIARzIgQ2AiwgACAAKAIYIgcgBHMiBTYCMCAAIAEgBXMiATYCNCAAIAFBCHZB/wFxQbAIai0AACABQRB2Qf8BcUGwCGotAABBCHRyIAFBGHZBsAhqLQAAQRB0ciABQf8BcUGwCGotAABBGHRyIANzIghBA3MiBTYCOCAAQUBrIAUgBnMiAzYCACAAIAIgBXMiBTYCPCAAIAMgB3MiBjYCSCAAIAMgBHM2AkQgACABIAZzIgI2AkwgACACQQh2Qf8BcUGwCGotAAAgAkEQdkH/AXFBsAhqLQAAQQh0ciACQRh2QbAIai0AAEEQdHIgAkH/AXFBsAhqLQAAQRh0ciAIcyIIQQdzIgI2AlAgACACIAVzIgU2AlQgACAEIAVzIgQ2AlwgACADIAVzNgJYIAAgASAEcyICNgJkIAAgBCAGczYCYCAAIAJBCHZB/wFxQbAIai0AACACQRB2Qf8BcUGwCGotAABBCHRyIAJBGHZBsAhqLQAAQRB0ciACQf8BcUGwCGotAABBGHRyIAhzIghBD3MiBjYCaCAAIAYgB3MiBzYCeCAAIAMgBnMiAzYCcCAAIAUgBnMiBTYCbCAAIAIgB3MiAjYCfCAAIAMgBHM2AnQgACACQQh2Qf8BcUGwCGotAAAgAkEQdkH/AXFBsAhqLQAAQQh0ciACQRh2QbAIai0AAEEQdHIgAkH/AXFBsAhqLQAAQRh0ciAIcyIGQR9zIgI2AoABIAAgAiAFcyICNgKEASAAIAEgAnMiATYClAEgACACIARzIgQ2AowBIAAgAiADcyIDNgKIASAAIAQgB3MiBTYCkAEgACABQQh2Qf8BcUGwCGotAAAgAUEQdkH/AXFBsAhqLQAAQQh0ciABQRh2QbAIai0AAEEQdHIgAUH/AXFBsAhqLQAAQRh0ciAGcyIGQT9zIgc2ApgBIAAgAiAHcyICNgKcASAAIAIgA3MiAzYCoAEgACADIARzIgQ2AqQBIAAgBCAFcyIFNgKoASAAIAEgBXMiATYCrAEgACABQQh2Qf8BcUGwCGotAAAgAUEQdkH/AXFBsAhqLQAAQQh0ciABQRh2QbAIai0AAEEQdHIgAUH/AXFBsAhqLQAAQRh0ciAGcyIGQf8AcyIHNgKwASAAIAIgB3MiAjYCtAEgACACIANzIgM2ArgBIAAgAyAEcyIENgK8ASAAIAQgBXMiBTYCwAEgACABIAVzIgE2AsQBIAAgAUEIdkH/AXFBsAhqLQAAIAFBEHZB/wFxQbAIai0AAEEIdHIgAUEYdkGwCGotAABBEHRyIAFB/wFxQbAIai0AAEEYdHIgBnNB/wFzIgY2AsgBIAAgAiAGcyICNgLMASAAIAIgA3MiAjYC0AEgACACIARzIgI2AtQBIAAgAiAFcyICNgLYASAAIAEgAnM2AtwBDwsgACAAKAIIIAAoAhQiAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzIgRBAXMiAjYCGCAAIAIgACgCDHMiAjYCHCAAIAAoAhAgAnMiAzYCICAAIAEgA3MiATYCJCAAIAFBCHZB/wFxQbAIai0AACABQRB2Qf8BcUGwCGotAABBCHRyIAFBGHZBsAhqLQAAQRB0ciABQf8BcUGwCGotAABBGHRyIARzIgRBA3MiBTYCKCAAIAIgBXMiAjYCLCAAIAIgA3MiAzYCMCAAIAEgA3MiATYCNCAAIAFBCHZB/wFxQbAIai0AACABQRB2Qf8BcUGwCGotAABBCHRyIAFBGHZBsAhqLQAAQRB0ciABQf8BcUGwCGotAABBGHRyIARzIgRBB3MiBTYCOCAAIAIgBXMiAjYCPCAAQUBrIAIgA3MiAzYCACAAIAEgA3MiATYCRCAAIAFBCHZB/wFxQbAIai0AACABQRB2Qf8BcUGwCGotAABBCHRyIAFBGHZBsAhqLQAAQRB0ciABQf8BcUGwCGotAABBGHRyIARzIgRBD3MiBTYCSCAAIAIgBXMiAjYCTCAAIAIgA3MiAzYCUCAAIAEgA3MiATYCVCAAIAFBCHZB/wFxQbAIai0AACABQRB2Qf8BcUGwCGotAABBCHRyIAFBGHZBsAhqLQAAQRB0ciABQf8BcUGwCGotAABBGHRyIARzIgRBH3MiBTYCWCAAIAIgBXMiAjYCXCAAIAIgA3MiAzYCYCAAIAEgA3MiATYCZCAAIAFBCHZB/wFxQbAIai0AACABQRB2Qf8BcUGwCGotAABBCHRyIAFBGHZBsAhqLQAAQRB0ciABQf8BcUGwCGotAABBGHRyIARzIgRBP3MiBTYCaCAAIAIgBXMiAjYCbCAAIAIgA3MiAzYCcCAAIAEgA3MiATYCdCAAIAFBCHZB/wFxQbAIai0AACABQRB2Qf8BcUGwCGotAABBCHRyIAFBGHZBsAhqLQAAQRB0ciABQf8BcUGwCGotAABBGHRyIARzIgRB/wBzIgU2AnggACACIAVzIgI2AnwgACACIANzIgM2AoABIAAgASADcyIBNgKEASAAIAFBCHZB/wFxQbAIai0AACABQRB2Qf8BcUGwCGotAABBCHRyIAFBGHZBsAhqLQAAQRB0ciABQf8BcUGwCGotAABBGHRyIARzIgRB/wFzIgU2AogBIAAgAiAFcyICNgKMASAAIAIgA3MiAzYCkAEgACABIANzIgE2ApQBIAAgAUEIdkH/AXFBsAhqLQAAIAFBEHZB/wFxQbAIai0AAEEIdHIgAUEYdkGwCGotAABBEHRyIAFB/wFxQbAIai0AAEEYdHIgBHMiBEHkAXMiBTYCmAEgACACIAVzIgI2ApwBIAAgAiADcyIDNgKgASAAIAEgA3MiATYCpAEgACABQQh2Qf8BcUGwCGotAAAgAUEQdkH/AXFBsAhqLQAAQQh0ciABQRh2QbAIai0AAEEQdHIgAUH/AXFBsAhqLQAAQRh0ciAEc0HSAXMiBDYCqAEgACACIARzIgI2AqwBIAAgAiADcyICNgKwASAAIAEgAnM2ArQBDwsgAygCACEBQQAhBANAIAMgAygCHCIAQQh2Qf8BcUGwCGotAAAgBEECdEGACGooAgAgAXNzIABBEHZB/wFxQbAIai0AAEEIdHMgAEEYdkGwCGotAABBEHRzIABB/wFxQbAIai0AAEEYdHMiATYCICADIAEgAygCBHMiAjYCJCADIAMoAgggAnMiAjYCKCADIAMoAgwgAnMiAjYCLCADIAMoAhAgAkH/AXFBsAhqLQAAcyACQQh2Qf8BcUGwCGotAABBCHRzIAJBEHZB/wFxQbAIai0AAEEQdHMgAkEYdkGwCGotAABBGHRzIgI2AjAgAyACIAMoAhRzIgI2AjQgAyADKAIYIAJzIgI2AjggAyAAIAJzNgI8IANBIGohAyAEQQFqIgRBB0cNAAsLC8IGARJ/IwBBEGsiBSQAIAFBAEoEQCACQQFqIRYgAkECaiEIIAJBA2ohCSACQQRqIQogAkEFaiELIAJBBmohDCACQQdqIQ0gAkEIaiEOIAJBCWohDyACQQpqIRAgAkELaiERIAJBDGohEiACQQ1qIRMgAkEOaiEUIAJBD2ohFQNAIABBASACIAUQACAEIAUtAAAgAy0AAHM6AAAgBCAFLQABIAMtAAFzOgABIAQgBS0AAiADLQACczoAAiAEIAUtAAMgAy0AA3M6AAMgBCAFLQAEIAMtAARzOgAEIAQgBS0ABSADLQAFczoABSAEIAUtAAYgAy0ABnM6AAYgBCAFLQAHIAMtAAdzOgAHIAQgBS0ACCADLQAIczoACCAEIAUtAAkgAy0ACXM6AAkgBCAFLQAKIAMtAApzOgAKIAQgBS0ACyADLQALczoACyAEIAUtAAwgAy0ADHM6AAwgBCAFLQANIAMtAA1zOgANIAQgBS0ADiADLQAOczoADiAEIAUtAA8gAy0AD3M6AA8gFSEGAkACQCACLQAPIgdB/wFHDQAgFUEAOgAAIBQhBiAULQAAIgdB/wFHDQAgFEEAOgAAIBMhBiATLQAAIgdB/wFHDQAgE0EAOgAAIBIhBiASLQAAIgdB/wFHDQAgEkEAOgAAIBEhBiARLQAAIgdB/wFHDQAgEUEAOgAAIBAhBiAQLQAAIgdB/wFHDQAgEEEAOgAAIA8hBiAPLQAAIgdB/wFHDQAgD0EAOgAAIA4hBiAOLQAAIgdB/wFHDQAgDkEAOgAAIA0hBiANLQAAIgdB/wFHDQAgDUEAOgAAIAwhBiAMLQAAIgdB/wFHDQAgDEEAOgAAIAshBiALLQAAIgdB/wFHDQAgC0EAOgAAIAohBiAKLQAAIgdB/wFHDQAgCkEAOgAAIAkhBiAJLQAAIgdB/wFHDQAgCUEAOgAAIAghBiAILQAAIgdB/wFHDQAgCEEAOgAAIBYiBi0AACIHQf8BRw0AIAJBADoAASACIQYgAi0AACIHQf8BRw0AIAJBADoAAAwBCyAGIAdBAWo6AAALIARBEGohBCADQRBqIQMgAUEQSyEGIAFBEGshASAGDQALCyAFQRBqJAALxQUBAn8jAEEQayIGJAACQCABBEAgAkEATA0BA0AgBSADLQAAIAQtAABzOgAAIAUgAy0AASAELQABczoAASAFIAMtAAIgBC0AAnM6AAIgBSADLQADIAQtAANzOgADIAUgAy0ABCAELQAEczoABCAFIAMtAAUgBC0ABXM6AAUgBSADLQAGIAQtAAZzOgAGIAUgAy0AByAELQAHczoAByAFQQhqIAMtAAggBC0ACHM6AAAgBSADLQAJIAQtAAlzOgAJIAUgAy0ACiAELQAKczoACiAFIAMtAAsgBC0AC3M6AAsgBSADLQAMIAQtAAxzOgAMIAUgAy0ADSAELQANczoADSAFIAMtAA4gBC0ADnM6AA4gBSADLQAPIAQtAA9zOgAPIAAgASAFIAUQACADIAUpAAg3AAggAyAFKQAANwAAIAVBEGohBSAEQRBqIQQgAkEQSyEHIAJBEGshAiAHDQALDAELIAJBAEwNAANAIAYgBCkAADcDACAGIAQpAAg3AwggAEEAIAQgBRAAIAUgAy0AACAFLQAAczoAACAFIAMtAAEgBS0AAXM6AAEgBSADLQACIAUtAAJzOgACIAUgAy0AAyAFLQADczoAAyAFIAMtAAQgBS0ABHM6AAQgBSADLQAFIAUtAAVzOgAFIAUgAy0ABiAFLQAGczoABiAFIAMtAAcgBS0AB3M6AAcgBSADLQAIIAUtAAhzOgAIIAUgAy0ACSAFLQAJczoACSAFIAMtAAogBS0ACnM6AAogBSADLQALIAUtAAtzOgALIAUgAy0ADCAFLQAMczoADCAFIAMtAA0gBS0ADXM6AA0gBSADLQAOIAUtAA5zOgAOIAUgAy0ADyAFLQAPczoADyADIAYpAwg3AAggAyAGKQMANwAAIAVBEGohBSAEQRBqIQQgAkEQSyEBIAJBEGshAiABDQALCyAGQRBqJAALrAUBAn8jAEGgAmsiAyQAAkAgAAJ/QQogAkGAAUYNABogAkGAAkcEQCACQcABRw0CQQwMAQtBDgs2AgAgACAAQQhqNgIEIANBCGogASACEAIgACADKAIMIAMoAghBBHRqIgEoAgA2AgggACABKAIENgIMIAAgASgCCDYCECAAIAEoAgw2AhQgAEEYaiECIAFBEGshASAAKAIAIgRBAk4EQANAIAIgASgCACIAQQh2Qf8BcUGwCGotAABBAnRBsBJqKAIAIABB/wFxQbAIai0AAEECdEGwCmooAgBzIABBEHZB/wFxQbAIai0AAEECdEGwGmooAgBzIABBGHZBsAhqLQAAQQJ0QbAiaigCAHM2AgAgAiABKAIEIgBBCHZB/wFxQbAIai0AAEECdEGwEmooAgAgAEH/AXFBsAhqLQAAQQJ0QbAKaigCAHMgAEEQdkH/AXFBsAhqLQAAQQJ0QbAaaigCAHMgAEEYdkGwCGotAABBAnRBsCJqKAIAczYCBCACIAEoAggiAEEIdkH/AXFBsAhqLQAAQQJ0QbASaigCACAAQf8BcUGwCGotAABBAnRBsApqKAIAcyAAQRB2Qf8BcUGwCGotAABBAnRBsBpqKAIAcyAAQRh2QbAIai0AAEECdEGwImooAgBzNgIIIAIgASgCDCIAQQh2Qf8BcUGwCGotAABBAnRBsBJqKAIAIABB/wFxQbAIai0AAEECdEGwCmooAgBzIABBEHZB/wFxQbAIai0AAEECdEGwGmooAgBzIABBGHZBsAhqLQAAQQJ0QbAiaigCAHM2AgwgAUEQayEBIAJBEGohAiAEQQJLIQAgBEEBayEEIAANAAsLIAIgASgCADYCACACIAEoAgQ2AgQgAiABKAIINgIIIAIgASgCDDYCDAsgA0GgAmokAAsLs0QCAEGACAslAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAbAAAANgBBsAgLgERjfHd78mtvxTABZyv+16t2yoLJffpZR/Ct1KKvnKRywLf9kyY2P/fMNKXl8XHYMRUExyPDGJYFmgcSgOLrJ7J1CYMsGhtuWqBSO9azKeMvhFPRAO0g/LFbasu+OUpMWM/Q76r7Q00zhUX5An9QPJ+oUaNAj5KdOPW8ttohEP/z0s0ME+xfl0QXxKd+PWRdGXNggU/cIiqQiEbuuBTeXgvb4DI6CkkGJFzC06xikZXkeefIN22N1U6pbFb06mV6rgi6eCUuHKa0xujddB9LvYuKcD61ZkgD9g5hNVe5hsEdnuH4mBFp2Y6Umx6H6c5VKN+MoYkNv+ZCaEGZLQ+wVLsWUfSnUH5BZVMaF6TDOideljura8sfnUXxrPpYq0vjA5MgMPpVrXZt9ojMdpH1AkwlT+XX/MUqy9cmNUSAtWKjj96xWkkluhtnReoOmF3+wOHDL3UCgUzwEo1Gl6Nr0/nGA49f5xWSnJW/bXrrlVJZ2tS+gy1YdCHTSeBpKY7JyER1wolq9I55eJlYPmsnuXHdvuFPtvCIrRfJIKxmfc46tGPfShjlGjGCl1EzYGJTf0WxZHfgu2uuhP6BoBz5CCuUcEhoWI9F/RmU3myHUnv4t6tz0yNySwLi4x+PV2ZVqyqy6ygHL7XCA4bFe5rTNwilMCiH8iO/pbICA2q67RaCXIrPHCunebSS8wfy8E5p4qFl2vTNBgW+1dE0Yh/Epv6KNC5TnaLzVaAFiuEypPbrdQuD7DlAYO+qXnGfBr1uEFE+IYr5lt0GPd0+Ba5N5r1GkVSNtXHEXQUEBtRvYFAV/xmY+yTWvemXiUBDzGfZnnew6EK9B4mLiOcZWzh5yO7boXwKR3xCD+n4hB7JAAAAAAmAhoMyK+1IHhFwrGxack79Dv/7D4U4Vj2u1R42LTknCg/ZZGhcpiGbW1TRJDYuOgwKZ7GTV+cPtO6W0hubkZ6AwMVPYdwgolp3S2kcEhoW4pO6CsCgKuU8IuBDEhsXHQ4JDQvyi8etLbaouRQeqchX8RmFr3UHTO6Z3bujf2D99wEmn1xy9bxEZjvFW/t+NItDKXbLI8bctu38aLjk8WPXMdzKQmOFEBOXIkCExhEghUokfdK7Pfiu+TIRxymhbR2eL0vcsjDzDYZS7HfB49ArsxZsqXC5mRGUSPpH6WQiqPyMxKDwPxpWfSzYIjOQ74dJTsfZONHBjMqi/pjUCzam9YHPpXreKNq3jiY/rb+kLDqd5FB4kg1qX8ybVH5GYvaNE8KQ2LjoLjn3XoLDr/WfXYC+adCTfG/VLanPJRKzyKyZOxAYfafonGNu2zu7e80meAluWRj07Jq3AYNPmqjmlW5lqv/mfiG8zwjvFejmuueb2UpvNs7qnwnUKbB81jGksq8qPyMxxqWUMDWiZsB0Trw3/ILKpuCQ0LAzp9gV8QSYSkHs2vd/zVAOF5H2L3ZN1o1D77BNzKpNVOSWBN+e0bXjTGqIG8EsH7hGZVF/nV7qBAGMNV36h3Rz+wtBLrNnHVqS29JS6RBWM23WRxOa12GMN6EMeln4FI7rEzyJzqkn7rdhyTXhHOXtekexPJzS31lV8nM/GBTOeXPHN79T983qX/2qW989bxR4RNuGyq/zgbloxD44JDQswqNAXxYdw3K84iUMKDxJi/8NlUE5qAFxCAyz3ti05JxkVsGQe8uEYdUytnBIbFx00LhXQlBR9KdTfkFlwxoXpJY6J17LO6tr8R+dRaus+liTS+MDVSAw+vatdm2RiMx2JfUCTPxP5dfXxSrLgCY1RI+1YqNJ3rFaZyW6G5hF6g7hXf7AAsMvdRKBTPCjjUaXxmvT+ecDj1+VFZKc679tetqVUlkt1L6D01h0ISlJ4GlEjsnIanXCiXj0jnlrmVg+3Se5cba+4U8X8IitZskgrLR9zjoYY99KguUaMWCXUTNFYlN/4LFkd4S7a64c/oGglPkIK1hwSGgZj0X9h5TebLdSe/gjq3PT4nJLAlfjH48qZlWrB7LrKAMvtcKahsV7pdM3CPIwKIeyI7+lugIDalztFoIris8ckqd5tPDzB/KhTmnizWXa9NUGBb4f0TRiisSm/p00LlOgovNVMgWK4XWk9us5C4PsqkBg7wZecZ9RvW4Q+T4hij2W3Qau3T4FRk3mvbWRVI0FccRdbwQG1P9gUBUkGZj7l9a96cyJQEN3Z9mevbDoQogHiYs45xlb23nI7kehfArpfEIPyfiEHgAAAACDCYCGSDIr7aweEXBObFpy+/0O/1YPhTgePa7VJzYtOWQKD9khaFym0ZtbVDokNi6xDApnD5NX59K07paeG5uRT4DAxaJh3CBpWndLFhwSGgrik7rlwKAqQzwi4B0SGxcLDgkNrfKLx7kttqjIFB6phVfxGUyvdQe77pnd/aN/YJ/3ASa8XHL1xURmOzRb+352i0Mp3Msjxmi27fxjuOTxytcx3BBCY4VAE5ciIITGEX2FSiT40rs9Ea75Mm3HKaFLHZ4v89yyMOwNhlLQd8HjbCuzFpmpcLn6EZRIIkfpZMSo/IwaoPA/2FZ9LO8iM5DHh0lOwdk40f6MyqI2mNQLz6b1gSilet4m2reOpD+tv+QsOp0NUHiSm2pfzGJUfkbC9o0T6JDYuF4uOff1gsOvvp9dgHxp0JOpb9Uts88lEjvIrJmnEBh9buicY3vbO7sJzSZ49G5ZGAHsmreog0+aZeaVbn6q/+YIIbzP5u8V6Nm655vOSm821OqfCdYpsHyvMaSyMSo/IzDGpZTANaJmN3ROvKb8gsqw4JDQFTOn2ErxBJj3QezaDn/NUC8XkfaNdk3WTUPvsFTMqk3f5JYE457RtRtMaoi4wSwff0ZlUQSdXupdAYw1c/qHdC77C0Fas2cdUpLb0jPpEFYTbdZHjJrXYXo3oQyOWfgUiesTPO7OqSc1t2HJ7eEc5Tx6R7FZnNLfP1Xyc3kYFM6/c8c36lP3zVtf/aoU3z1vhnhE24HKr/M+uWjELDgkNF/Co0ByFh3DDLziJYsoPElB/w2VcTmoAd4IDLOc2LTkkGRWwWF7y4Rw1TK2dEhsXELQuFenUFH0ZVN+QaTDGhdeljona8s7q0XxH51Yq6z6A5NL4/pVIDBt9q12dpGIzEwl9QLX/E/ly9fFKkSAJjWjj7ViWknesRtnJboOmEXqwOFd/nUCwy/wEoFMl6ONRvnGa9Nf5wOPnJUVknrrv21Z2pVSgy3UviHTWHRpKUngyESOyYlqdcJ5ePSOPmuZWHHdJ7lPtr7hrRfwiKxmySA6tH3OShhj3zGC5RozYJdRf0ViU3fgsWSuhLtroBz+gSuU+QhoWHBI/RmPRWyHlN74t1J70yOrcwLickuPV+MfqypmVSgHsuvCAy+1e5qGxQil0zeH8jAopbIjv2q6AgOCXO0WHCuKz7SSp3ny8PMH4qFOafTNZdq+1QYFYh/RNP6KxKZTnTQuVaCi8+EyBYrrdaT27DkLg++qQGCfBl5xEFG9bor5PiEGPZbdBa7dPr1GTeaNtZFUXQVxxNRvBAYV/2BQ+yQZmOmX1r1DzIlAnndn2UK9sOiLiAeJWzjnGe7becgKR6F8D+l8Qh7J+IQAAAAAhoMJgO1IMitwrB4Rck5sWv/7/Q44Vg+F1R49rjknNi3ZZAoPpiFoXFTRm1suOiQ2Z7EMCucPk1eW0rTukZ4bm8VPgMAgomHcS2ladxoWHBK6CuKTKuXAoOBDPCIXHRIbDQsOCcet8ououS22qcgUHhmFV/EHTK913bvumWD9o38mn/cB9bxccjvFRGZ+NFv7KXaLQ8bcyyP8aLbt8WO45NzK1zGFEEJjIkATlxEghMYkfYVKPfjSuzIRrvmhbccpL0sdnjDz3LJS7A2G49B3wRZsK7O5malwSPoRlGQiR+mMxKj8Pxqg8CzYVn2Q7yIzTseHSdHB2Tii/ozKCzaY1IHPpvXeKKV6jibat7+kP62d5Cw6kg1QeMybal9GYlR+E8L2jbjokNj3Xi45r/WCw4C+n12TfGnQLalv1RKzzyWZO8isfacQGGNu6Jy7e9s7eAnNJhj0blm3AeyamqiDT25l5pXmfqr/zwghvOjm7xWb2brnNs5KbwnU6p981imwsq8xpCMxKj+UMMalZsA1orw3dE7KpvyC0LDgkNgVM6eYSvEE2vdB7FAOf832LxeR1o12TbBNQ+9NVMyqBN/klrXjntGIG0xqH7jBLFF/RmXqBJ1eNV0BjHRz+odBLvsLHVqzZ9JSkttWM+kQRxNt1mGMmtcMejehFI5Z+DyJ6xMn7s6pyTW3YeXt4RyxPHpH31mc0nM/VfLOeRgUN79zx83qU/eqW1/9bxTfPduGeETzgcqvxD65aDQsOCRAX8Kjw3IWHSUMvOJJiyg8lUH/DQFxOaiz3ggM5JzYtMGQZFaEYXvLtnDVMlx0SGxXQtC49KdQUUFlU34XpMMaJ16WOqtryzudRfEf+lirrOMDk0sw+lUgdm32rcx2kYgCTCX15df8TyrL18U1RIAmYqOPtbFaSd66G2cl6g6YRf7A4V0vdQLDTPASgUaXo43T+cZrj1/nA5KclRVteuu/Ulnalb6DLdR0IdNY4GkpScnIRI7CiWp1jnl49Fg+a5m5cd0n4U+2voitF/AgrGbJzjq0fd9KGGMaMYLlUTNgl1N/RWJkd+Cxa66Eu4GgHP4IK5T5SGhYcEX9GY/ebIeUe/i3UnPTI6tLAuJyH49X41WrKmbrKAeytcIDL8V7moY3CKXTKIfyML+lsiMDaroCFoJc7c8cK4p5tJKnB/Lw82nioU7a9M1lBb7VBjRiH9Gm/orELlOdNPNVoKKK4TIF9ut1pIPsOQtg76pAcZ8GXm4QUb0hivk+3QY9lj4Frt3mvUZNVI21kcRdBXEG1G8EUBX/YJj7JBm96ZfWQEPMidmed2foQr2wiYuIBxlbOOfI7tt5fApHoUIP6XyEHsn4AAAAAICGgwkr7UgyEXCsHlpyTmwO//v9hThWD67VHj0tOSc2D9lkClymIWhbVNGbNi46JApnsQxX5w+T7pbStJuRnhvAxU+A3CCiYXdLaVoSGhYck7oK4qAq5cAi4EM8GxcdEgkNCw6Lx63ytqi5LR6pyBTxGYVXdQdMr5ndu+5/YP2jASaf93L1vFxmO8VE+340W0MpdosjxtzL7fxotuTxY7gx3MrXY4UQQpciQBPGESCESiR9hbs9+NL5MhGuKaFtx54vSx2yMPPchlLsDcHj0HezFmwrcLmZqZRI+hHpZCJH/IzEqPA/GqB9LNhWM5DvIklOx4c40cHZyqL+jNQLNpj1gc+met4opbeOJtqtv6Q/Op3kLHiSDVBfzJtqfkZiVI0TwvbYuOiQOfdeLsOv9YJdgL6f0JN8adUtqW8lErPPrJk7yBh9pxCcY27oO7t72yZ4Cc1ZGPRumrcB7E+aqIOVbmXm/+Z+qrzPCCEV6Obv55vZum82zkqfCdTqsHzWKaSyrzE/IzEqpZQwxqJmwDVOvDd0gsqm/JDQsOCn2BUzBJhK8eza90HNUA5/kfYvF03WjXbvsE1Dqk1UzJYE3+TRteOeaogbTCwfuMFlUX9GXuoEnYw1XQGHdHP6C0Eu+2cdWrPb0lKSEFYz6dZHE23XYYyaoQx6N/gUjlkTPInrqSfuzmHJNbcc5e3hR7E8etLfWZzycz9VFM55GMc3v3P3zepT/apbXz1vFN9E24Z4r/OBymjEPrkkNCw4o0Bfwh3DchbiJQy8PEmLKA2VQf+oAXE5DLPeCLTknNhWwZBky4RhezK2cNVsXHRIuFdC0FIJatUwNqU4v0CjnoHz1/t84zmCmy//hzSOQ0TE3unLVHuUMqbCIz3uTJULQvrDTgguoWYo2SSydluiSW2L0SVy+PZkhmiYFtSkXMxdZbaSbHBIUP3tudpeFUZXp42dhJDYqwCMvNMK9+RYBbizRQbQLB6Pyj8PAsGvvQMBE4prOpERQU9n3OqX8s/O8LTmc5asdCLnrTWF4vk36Bx1325H8RpxHSnFiW+3Yg6qGL4b/FY+S8bSeSCa28D+eM1a9B/dqDOIB8cxsRIQWSeA7F9gUX+pGbVKDS3lep+TyZzvoOA7Ta4q9bDI67s8g1OZYRcrBH66d9Ym4WkUY1UhDH3GY2Ol+Hx8hO53d5n2e3uN//LyDdZra73eb2+xkcXFVGAwMFACAQEDzmdnqVYrK33n/v4ZtdfXYk2rq+bsdnaaj8rKRR+Cgp2JyclA+n19h+/6+hWyWVnrjkdHyfvw8AtBra3ss9TUZ1+iov1Fr6/qI5ycv1OkpPfkcnKWm8DAW3W3t8Lh/f0cPZOTrkwmJmpsNjZafj8/QfX39wKDzMxPaDQ0XFGlpfTR5eU0+fHxCOJxcZOr2NhzYjExUyoVFT8IBAQMlcfHUkYjI2Wdw8NeMBgYKDeWlqEKBQUPL5qatQ4HBwkkEhI2G4CAm9/i4j3N6+smTicnaX+yss3qdXWfEgkJGx2Dg55YLCx0NBoaLjYbGy3cbm6ytFpa7lugoPukUlL2djs7TbfW1mF9s7POUikpe93j4z5eLy9xE4SEl6ZTU/W50dFoAAAAAMHt7SxAICBg4/z8H3mxsci2W1vt1Gpqvo3Ly0Znvr7Zcjk5S5RKSt6YTEzUsFhY6IXPz0q70NBrxe/vKk+qquXt+/sWhkNDxZpNTddmMzNVEYWFlIpFRc/p+fkQBAICBv5/f4GgUFDweDw8RCWfn7pLqKjjolFR812jo/6AQEDABY+Pij+Skq0hnZ28cDg4SPH19QRjvLzfd7a2wa/a2nVCISFjIBAQMOX//xr98/MOv9LSbYHNzUwYDAwUJhMTNcPs7C++X1/hNZeXoohERMwuFxc5k8TEV1Wnp/L8fn6Cej09R8hkZKy6XV3nMhkZK+Zzc5XAYGCgGYGBmJ5PT9Gj3Nx/RCIiZlQqKn47kJCrC4iIg4xGRsrH7u4pa7i40ygUFDyn3t55vF5e4hYLCx2t29t22+DgO2QyMlZ0OjpOFAoKHpJJSdsMBgYKSCQkbLhcXOSfwsJdvdPTbkOsrO/EYmKmOZGRqDGVlaTT5OQ38nl5i9Xn5zKLyMhDbjc3WdptbbcBjY2MsdXVZJxOTtJJqang2GxstKxWVvrz9PQHz+rqJcplZa/0enqOR66u6RAICBhvurrV8Hh4iEolJW9cLi5yOBwcJFempvFztLTHl8bGUcvo6COh3d186HR0nD4fHyGWS0vdYb293A2Li4YPioqF4HBwkHw+PkJxtbXEzGZmqpBISNgGAwMF9/b2ARwODhLCYWGjajU1X65XV/lpubnQF4aGkZnBwVg6HR0nJ56eudnh4Tjr+PgTK5iYsyIRETPSaWm7qdnZcAeOjokzlJSnLZubtjweHiIVh4eSyenpIIfOzkmqVVX/UCgoeKXf33oDjIyPWaGh+AmJiYAaDQ0XZb+/2tfm5jGEQkLG0GhouIJBQcMpmZmwWi0tdx4PDxF7sLDLqFRU/G27u9YsFhY6pcZjY4T4fHyZ7nd3jfZ7ew3/8vK91mtrsd5vb1SRxcVQYDAwAwIBAanOZ2d9VisrGef+/mK119fmTaurmux2dkWPysqdH4KCQInJyYf6fX0V7/r667JZWcmOR0cL+/Dw7EGtrWez1NT9X6Ki6kWvr78jnJz3U6SkluRyclubwMDCdbe3HOH9/a49k5NqTCYmWmw2NkF+Pz8C9ff3T4PMzFxoNDT0UaWlNNHl5Qj58fGT4nFxc6vY2FNiMTE/KhUVDAgEBFKVx8dlRiMjXp3DwygwGBihN5aWDwoFBbUvmpoJDgcHNiQSEpsbgIA93+LiJs3r62lOJyfNf7Kyn+p1dRsSCQmeHYODdFgsLC40GhotNhsbstxubu60Wlr7W6Cg9qRSUk12Oztht9bWzn2zs3tSKSk+3ePjcV4vL5cThIT1plNTaLnR0QAAAAAswe3tYEAgIB/j/PzIebGx7bZbW77UampGjcvL2We+vktyOTnelEpK1JhMTOiwWFhKhc/Pa7vQ0CrF7+/lT6qqFu37+8WGQ0PXmk1NVWYzM5QRhYXPikVFEOn5+QYEAgKB/n9/8KBQUER4PDy6JZ+f40uoqPOiUVH+XaOjwIBAQIoFj4+tP5KSvCGdnUhwODgE8fX132O8vMF3trZ1r9raY0IhITAgEBAa5f//Dv3z822/0tJMgc3NFBgMDDUmExMvw+zs4b5fX6I1l5fMiEREOS4XF1eTxMTyVaengvx+fkd6PT2syGRk57pdXSsyGRmV5nNzoMBgYJgZgYHRnk9Pf6Pc3GZEIiJ+VCoqqzuQkIMLiIjKjEZGKcfu7tNruLg8KBQUeafe3uK8Xl4dFgsLdq3b2zvb4OBWZDIyTnQ6Oh4UCgrbkklJCgwGBmxIJCTkuFxcXZ/Cwm6909PvQ6yspsRiYqg5kZGkMZWVN9Pk5IvyeXky1efnQ4vIyFluNze32m1tjAGNjWSx1dXSnE5O4EmpqbTYbGz6rFZWB/P09CXP6uqvymVljvR6eulHrq4YEAgI1W+6uojweHhvSiUlclwuLiQ4HBzxV6amx3O0tFGXxsYjy+jofKHd3ZzodHQhPh8f3ZZLS9xhvb2GDYuLhQ+KipDgcHBCfD4+xHG1tarMZmbYkEhIBQYDAwH39vYSHA4Oo8JhYV9qNTX5rldX0Gm5uZEXhoZYmcHBJzodHbknnp442eHhE+v4+LMrmJgzIhERu9JpaXCp2dmJB46OpzOUlLYtm5siPB4ekhWHhyDJ6elJh87O/6pVVXhQKCh6pd/fjwOMjPhZoaGACYmJFxoNDdplv78x1+bmxoRCQrjQaGjDgkFBsCmZmXdaLS0RHg8Py3uwsPyoVFTWbbu7OiwWFmOlxmN8hPh8d5nud3uN9nvyDf/ya73Wa2+x3m/FVJHFMFBgMAEDAgFnqc5nK31WK/4Z5/7XYrXXq+ZNq3aa7HbKRY/Kgp0fgslAicl9h/p9+hXv+lnrsllHyY5H8Av78K3sQa3UZ7PUov1foq/qRa+cvyOcpPdTpHKW5HLAW5vAt8J1t/0c4f2Trj2TJmpMJjZabDY/QX4/9wL198xPg8w0XGg0pfRRpeU00eXxCPnxcZPicdhzq9gxU2IxFT8qFQQMCATHUpXHI2VGI8NencMYKDAYlqE3lgUPCgWatS+aBwkOBxI2JBKAmxuA4j3f4usmzesnaU4nss1/snWf6nUJGxIJg54dgyx0WCwaLjQaGy02G26y3G5a7rRaoPtboFL2pFI7TXY71mG31rPOfbMpe1Ip4z7d4y9xXi+ElxOEU/WmU9FoudEAAAAA7SzB7SBgQCD8H+P8sch5sVvttltqvtRqy0aNy77ZZ745S3I5St6USkzUmExY6LBYz0qFz9Bru9DvKsXvquVPqvsW7ftDxYZDTdeaTTNVZjOFlBGFRc+KRfkQ6fkCBgQCf4H+f1DwoFA8RHg8n7oln6jjS6hR86JRo/5do0DAgECPigWPkq0/kp28IZ04SHA49QTx9bzfY7y2wXe22nWv2iFjQiEQMCAQ/xrl//MO/fPSbb/SzUyBzQwUGAwTNSYT7C/D7F/hvl+XojWXRMyIRBc5LhfEV5PEp/JVp36C/H49R3o9ZKzIZF3nul0ZKzIZc5Xmc2CgwGCBmBmBT9GeT9x/o9wiZkQiKn5UKpCrO5CIgwuIRsqMRu4px+6402u4FDwoFN55p95e4rxeCx0WC9t2rdvgO9vgMlZkMjpOdDoKHhQKSduSSQYKDAYkbEgkXOS4XMJdn8LTbr3TrO9DrGKmxGKRqDmRlaQxleQ30+R5i/J55zLV58hDi8g3WW43bbfabY2MAY3VZLHVTtKcTqngSalstNhsVvqsVvQH8/TqJc/qZa/KZXqO9Hqu6UeuCBgQCLrVb7p4iPB4JW9KJS5yXC4cJDgcpvFXprTHc7TGUZfG6CPL6N18od10nOh0HyE+H0vdlku93GG9i4YNi4qFD4pwkOBwPkJ8PrXEcbVmqsxmSNiQSAMFBgP2Aff2DhIcDmGjwmE1X2o1V/muV7nQabmGkReGwViZwR0nOh2euSee4TjZ4fgT6/iYsyuYETMiEWm70mnZcKnZjokHjpSnM5Sbti2bHiI8HoeSFYfpIMnpzkmHzlX/qlUoeFAo33ql34yPA4yh+FmhiYAJiQ0XGg2/2mW/5jHX5kLGhEJouNBoQcOCQZmwKZktd1otDxEeD7DLe7BU/KhUu9ZtuxY6LBZjY6XGfHyE+Hd3me57e4328vIN/2trvdZvb7HexcVUkTAwUGABAQMCZ2epzisrfVb+/hnn19ditaur5k12dprsyspFj4KCnR/JyUCJfX2H+vr6Fe9ZWeuyR0fJjvDwC/utrexB1NRns6Ki/V+vr+pFnJy/I6Sk91NycpbkwMBbm7e3wnX9/Rzhk5OuPSYmakw2NlpsPz9Bfvf3AvXMzE+DNDRcaKWl9FHl5TTR8fEI+XFxk+LY2HOrMTFTYhUVPyoEBAwIx8dSlSMjZUbDw16dGBgoMJaWoTcFBQ8Kmpq1LwcHCQ4SEjYkgICbG+LiPd/r6ybNJydpTrKyzX91dZ/qCQkbEoODnh0sLHRYGhouNBsbLTZubrLcWlrutKCg+1tSUvakOztNdtbWYbezs859KSl7UuPjPt0vL3FehISXE1NT9abR0Wi5AAAAAO3tLMEgIGBA/Pwf47GxyHlbW+22amq+1MvLRo2+vtlnOTlLckpK3pRMTNSYWFjosM/PSoXQ0Gu77+8qxaqq5U/7+xbtQ0PFhk1N15ozM1VmhYWUEUVFz4r5+RDpAgIGBH9/gf5QUPCgPDxEeJ+fuiWoqONLUVHzoqOj/l1AQMCAj4+KBZKSrT+dnbwhODhIcPX1BPG8vN9jtrbBd9rada8hIWNCEBAwIP//GuXz8w790tJtv83NTIEMDBQYExM1JuzsL8NfX+G+l5eiNUREzIgXFzkuxMRXk6en8lV+foL8PT1HemRkrMhdXee6GRkrMnNzleZgYKDAgYGYGU9P0Z7c3H+jIiJmRCoqflSQkKs7iIiDC0ZGyozu7inHuLjTaxQUPCje3nmnXl7ivAsLHRbb23at4OA72zIyVmQ6Ok50CgoeFElJ25IGBgoMJCRsSFxc5LjCwl2f09Nuvays70NiYqbEkZGoOZWVpDHk5DfTeXmL8ufnMtXIyEOLNzdZbm1tt9qNjYwB1dVksU5O0pypqeBJbGy02FZW+qz09Afz6uolz2Vlr8p6eo70rq7pRwgIGBC6utVveHiI8CUlb0ouLnJcHBwkOKam8Ve0tMdzxsZRl+joI8vd3XyhdHSc6B8fIT5LS92Wvb3cYYuLhg2KioUPcHCQ4D4+Qny1tcRxZmaqzEhI2JADAwUG9vYB9w4OEhxhYaPCNTVfaldX+a65udBphoaRF8HBWJkdHSc6np65J+HhONn4+BPrmJizKxERMyJpabvS2dlwqY6OiQeUlKczm5u2LR4eIjyHh5IV6ekgyc7OSYdVVf+qKCh4UN/feqWMjI8DoaH4WYmJgAkNDRcav7/aZebmMddCQsaEaGi40EFBw4KZmbApLS13Wg8PER6wsMt7VFT8qLu71m0WFjos"),m).then((function(e){return e})).then(t,(function(e){l("[WACloudCrypto] failed to asynchronously prepare wasm: "+e),v(e)}))}if(_++,a.monitorRunDependencies&&a.monitorRunDependencies(_),a.instantiateWasm)try{return a.instantiateWasm(r,n)}catch(e){return l("[WACloudCrypto] Module.instantiateWasm callback failed with error: "+e),!1}s(i)}(),a.___wasm_call_ctors=function(){return(a.___wasm_call_ctors=a.asm.b).apply(null,arguments)},a._aes_setkey_enc=function(){return(a._aes_setkey_enc=a.asm.c).apply(null,arguments)},a._aes_setkey_dec=function(){return(a._aes_setkey_dec=a.asm.d).apply(null,arguments)},a._aes_crypt_cbc=function(){return(a._aes_crypt_cbc=a.asm.e).apply(null,arguments)},a._aes_crypt_ctr=function(){return(a._aes_crypt_ctr=a.asm.f).apply(null,arguments)},g=function e(){A||I(),A||(g=e)},a.run=I,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return a}))}function oe(e){return parseInt(e)===e}function ie(e){if(!oe(e.length))return!1;for(var t=0;t<e.length;t++)if(!oe(e[t])||e[t]<0||e[t]>255)return!1;return!0}function ae(e,t){if(e.buffer&&ArrayBuffer.isView(e))return t&&(e=e.slice?e.slice():Array.prototype.slice.call(e)),e;if(Array.isArray(e)){if(!ie(e))throw new Error("[WACloudCrypto] Array contains invalid value: "+e);return new Uint8Array(e)}if(oe(e.length)&&ie(e))return new Uint8Array(e);throw new Error("[WACloudCrypto] unsupported array-like object")}function se(){var e=16384;return t=>(e+=t)-t}function le(e){return new Uint8Array(e)}function ue(e,t,r,n,o){(null!=n||null!=o)&&(e=e.slice?e.slice(n,o):Array.prototype.slice.call(e,n,o)),t.set(e,r)}function ce(e){var t=16-(e=ae(e,!0)).length%16,r=le(e.length+t);ue(e,r);for(var n=e.length;n<r.length;n++)r[n]=t;return r}function de(e){if((e=ae(e,!0)).length<16)throw new Error("[WACloudCrypto] PKCS#7 invalid length");var t=e[e.length-1];if(t>16)throw new Error("[WACloudCrypto] PKCS#7 padding byte out of range");for(var r=e.length-t,n=0;n<t;n++)if(e[r+n]!==t)throw new Error("[WACloudCrypto] PKCS#7 invalid padding byte");var o=le(r);return ue(e,o,0,0,r),o}function pe(e){return fe.apply(this,arguments)}function fe(){return(fe=a()((function*(e){var t,r=yield ne(e),n=se(),o=r,i=new Uint8Array(o.memory.buffer),a=n(276),s=n(276),l=n(16),u=n(16),c=n(0);function d(e){var t=ae(e);i.set(t,c)}function p(e,r,n="CBC"){i.set(r,u),i.set(e,l),o._aes_setkey_enc(a,l,128),o._aes_setkey_dec(s,l,128),t=n}return{init:p,encrypt:(e,r,n)=>(p(r,n,"CBC"),d(e=ce(e)),"CBC"===t?o._aes_crypt_cbc(a,1,e.length,u,c,c):o._aes_crypt_ctr(a,e.length,u,c,c),i.subarray(c,c+e.length).slice()),decrypt:(e,r,n)=>(p(r,n,"CBC"),d(e),"CBC"===t?o._aes_crypt_cbc(s,0,e.length,u,c,c):o._aes_crypt_ctr(a,e.length,u,c,c),de(i.subarray(c,c+e.length).slice()))}}))).apply(this,arguments)}function he(e){if(!ee)return pe(e).then((e=>{ee=e})).catch((()=>{}))}function _e(){return ee}function ge(e,t){var r=_e();return{encrypted:r?r.encrypt(t,e,e):Z.encrypt(t,e,void 0,e)}}function ve(e){return be(e).buffer}function me(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function ye(e){return null==e}function be(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return new Uint8Array(t)}function we(e){for(var t=e.length;t--;)e[t]=Math.floor(256*Math.random());return e}function Ae(e){var t=e.reduce(((e,t)=>e+t.length),0);if(!e.length)return null;var r=new Uint8Array(t),n=0;for(var o of e)r.set(o,n),n+=o.length;return r}function Ee(e){return Ie(e)}m(),m(),m();var Ie=function(){var e=new Array(128),t=String.fromCodePoint||String.fromCharCode,r=[];return function(n){var o,i,a=n.length;r.length=0;for(var s=0;s<a;)(i=n[s++])<=127?o=i:i<=223?o=(31&i)<<6|63&n[s++]:i<=239?o=(15&i)<<12|(63&n[s++])<<6|63&n[s++]:String.fromCodePoint?o=(7&i)<<18|(63&n[s++])<<12|(63&n[s++])<<6|63&n[s++]:(o=63,s+=3),r.push(e[o]||(e[o]=t(o)));return r.join("")}}(),Se=v(w(),1);m();var Ce=v(j(),1),Te=Ce.Reader,Oe=Ce.Writer,xe=Ce.util,Ne=Ce.roots.default||(Ce.roots.default={}),Re=Ne.HTTPRequest=(()=>{function e(e){if(this.header=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.method="",e.prototype.header=xe.emptyArray,e.prototype.body=xe.newBuffer([]),e.prototype.callId="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Oe.create()),null!=e.method&&Object.hasOwnProperty.call(e,"method")&&t.uint32(10).string(e.method),null!=e.header&&e.header.length)for(var r=0;r<e.header.length;++r)Ne.HTTPHeader.encode(e.header[r],t.uint32(18).fork()).ldelim();return null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(26).bytes(e.body),null!=e.callId&&Object.hasOwnProperty.call(e,"callId")&&t.uint32(34).string(e.callId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Te||(e=Te.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ne.HTTPRequest;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.method=e.string();break;case 2:n.header&&n.header.length||(n.header=[]),n.header.push(Ne.HTTPHeader.decode(e,e.uint32()));break;case 3:n.body=e.bytes();break;case 4:n.callId=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof Te||(e=new Te(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.method&&e.hasOwnProperty("method")&&!xe.isString(e.method))return"method: string expected";if(null!=e.header&&e.hasOwnProperty("header")){if(!Array.isArray(e.header))return"header: array expected";for(var t=0;t<e.header.length;++t){var r=Ne.HTTPHeader.verify(e.header[t]);if(r)return"header."+r}}return null!=e.body&&e.hasOwnProperty("body")&&!(e.body&&"number"==typeof e.body.length||xe.isString(e.body))?"body: buffer expected":null!=e.callId&&e.hasOwnProperty("callId")&&!xe.isString(e.callId)?"callId: string expected":null},e.fromObject=function(e){if(e instanceof Ne.HTTPRequest)return e;var t=new Ne.HTTPRequest;if(null!=e.method&&(t.method=String(e.method)),e.header){if(!Array.isArray(e.header))throw TypeError(".HTTPRequest.header: array expected");t.header=[];for(var r=0;r<e.header.length;++r){if("object"!=typeof e.header[r])throw TypeError(".HTTPRequest.header: object expected");t.header[r]=Ne.HTTPHeader.fromObject(e.header[r])}}return null!=e.body&&("string"==typeof e.body?xe.base64.decode(e.body,t.body=xe.newBuffer(xe.base64.length(e.body)),0):e.body.length>=0&&(t.body=e.body)),null!=e.callId&&(t.callId=String(e.callId)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.header=[]),t.defaults&&(r.method="",t.bytes===String?r.body="":(r.body=[],t.bytes!==Array&&(r.body=xe.newBuffer(r.body))),r.callId=""),null!=e.method&&e.hasOwnProperty("method")&&(r.method=e.method),e.header&&e.header.length){r.header=[];for(var n=0;n<e.header.length;++n)r.header[n]=Ne.HTTPHeader.toObject(e.header[n],t)}return null!=e.body&&e.hasOwnProperty("body")&&(r.body=t.bytes===String?xe.base64.encode(e.body,0,e.body.length):t.bytes===Array?Array.prototype.slice.call(e.body):e.body),null!=e.callId&&e.hasOwnProperty("callId")&&(r.callId=e.callId),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/HTTPRequest"},e})(),Pe=Ne.HTTPResponse=(()=>{function e(e){if(this.header=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.statusCode=0,e.prototype.header=xe.emptyArray,e.prototype.bodyBuffer=xe.newBuffer([]),e.prototype.bodyString="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Oe.create()),null!=e.statusCode&&Object.hasOwnProperty.call(e,"statusCode")&&t.uint32(8).uint32(e.statusCode),null!=e.header&&e.header.length)for(var r=0;r<e.header.length;++r)Ne.HTTPHeader.encode(e.header[r],t.uint32(18).fork()).ldelim();return null!=e.bodyBuffer&&Object.hasOwnProperty.call(e,"bodyBuffer")&&t.uint32(26).bytes(e.bodyBuffer),null!=e.bodyString&&Object.hasOwnProperty.call(e,"bodyString")&&t.uint32(34).string(e.bodyString),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Te||(e=Te.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ne.HTTPResponse;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.statusCode=e.uint32();break;case 2:n.header&&n.header.length||(n.header=[]),n.header.push(Ne.HTTPHeader.decode(e,e.uint32()));break;case 3:n.bodyBuffer=e.bytes();break;case 4:n.bodyString=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof Te||(e=new Te(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.statusCode&&e.hasOwnProperty("statusCode")&&!xe.isInteger(e.statusCode))return"statusCode: integer expected";if(null!=e.header&&e.hasOwnProperty("header")){if(!Array.isArray(e.header))return"header: array expected";for(var t=0;t<e.header.length;++t){var r=Ne.HTTPHeader.verify(e.header[t]);if(r)return"header."+r}}return null!=e.bodyBuffer&&e.hasOwnProperty("bodyBuffer")&&!(e.bodyBuffer&&"number"==typeof e.bodyBuffer.length||xe.isString(e.bodyBuffer))?"bodyBuffer: buffer expected":null!=e.bodyString&&e.hasOwnProperty("bodyString")&&!xe.isString(e.bodyString)?"bodyString: string expected":null},e.fromObject=function(e){if(e instanceof Ne.HTTPResponse)return e;var t=new Ne.HTTPResponse;if(null!=e.statusCode&&(t.statusCode=e.statusCode>>>0),e.header){if(!Array.isArray(e.header))throw TypeError(".HTTPResponse.header: array expected");t.header=[];for(var r=0;r<e.header.length;++r){if("object"!=typeof e.header[r])throw TypeError(".HTTPResponse.header: object expected");t.header[r]=Ne.HTTPHeader.fromObject(e.header[r])}}return null!=e.bodyBuffer&&("string"==typeof e.bodyBuffer?xe.base64.decode(e.bodyBuffer,t.bodyBuffer=xe.newBuffer(xe.base64.length(e.bodyBuffer)),0):e.bodyBuffer.length>=0&&(t.bodyBuffer=e.bodyBuffer)),null!=e.bodyString&&(t.bodyString=String(e.bodyString)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.header=[]),t.defaults&&(r.statusCode=0,t.bytes===String?r.bodyBuffer="":(r.bodyBuffer=[],t.bytes!==Array&&(r.bodyBuffer=xe.newBuffer(r.bodyBuffer))),r.bodyString=""),null!=e.statusCode&&e.hasOwnProperty("statusCode")&&(r.statusCode=e.statusCode),e.header&&e.header.length){r.header=[];for(var n=0;n<e.header.length;++n)r.header[n]=Ne.HTTPHeader.toObject(e.header[n],t)}return null!=e.bodyBuffer&&e.hasOwnProperty("bodyBuffer")&&(r.bodyBuffer=t.bytes===String?xe.base64.encode(e.bodyBuffer,0,e.bodyBuffer.length):t.bytes===Array?Array.prototype.slice.call(e.bodyBuffer):e.bodyBuffer),null!=e.bodyString&&e.hasOwnProperty("bodyString")&&(r.bodyString=e.bodyString),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/HTTPResponse"},e})(),De=Ne.HTTPHeader=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key="",e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oe.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Te||(e=Te.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ne.HTTPHeader;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof Te||(e=new Te(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!xe.isString(e.key)?"key: string expected":null!=e.value&&e.hasOwnProperty("value")&&!xe.isString(e.value)?"value: string expected":null},e.fromObject=function(e){if(e instanceof Ne.HTTPHeader)return e;var t=new Ne.HTTPHeader;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&(t.value=String(e.value)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.key="",r.value=""),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(r.value=e.value),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/HTTPHeader"},e})(),Le=Ne.QBaseApiData=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.qbaseApiName="",e.prototype.qbaseMeta=null,e.prototype.qbaseOptions=null,e.prototype.qbaseReq="",e.prototype.cliReqId="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oe.create()),null!=e.qbaseApiName&&Object.hasOwnProperty.call(e,"qbaseApiName")&&t.uint32(10).string(e.qbaseApiName),null!=e.qbaseMeta&&Object.hasOwnProperty.call(e,"qbaseMeta")&&Ne.QBaseApiData.QBaseMeta.encode(e.qbaseMeta,t.uint32(18).fork()).ldelim(),null!=e.qbaseOptions&&Object.hasOwnProperty.call(e,"qbaseOptions")&&Ne.QBaseApiData.QBaseOptions.encode(e.qbaseOptions,t.uint32(26).fork()).ldelim(),null!=e.qbaseReq&&Object.hasOwnProperty.call(e,"qbaseReq")&&t.uint32(34).string(e.qbaseReq),null!=e.cliReqId&&Object.hasOwnProperty.call(e,"cliReqId")&&t.uint32(42).string(e.cliReqId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Te||(e=Te.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ne.QBaseApiData;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.qbaseApiName=e.string();break;case 2:n.qbaseMeta=Ne.QBaseApiData.QBaseMeta.decode(e,e.uint32());break;case 3:n.qbaseOptions=Ne.QBaseApiData.QBaseOptions.decode(e,e.uint32());break;case 4:n.qbaseReq=e.string();break;case 5:n.cliReqId=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof Te||(e=new Te(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.qbaseApiName&&e.hasOwnProperty("qbaseApiName")&&!xe.isString(e.qbaseApiName))return"qbaseApiName: string expected";if(null!=e.qbaseMeta&&e.hasOwnProperty("qbaseMeta")){var t=Ne.QBaseApiData.QBaseMeta.verify(e.qbaseMeta);if(t)return"qbaseMeta."+t}if(null!=e.qbaseOptions&&e.hasOwnProperty("qbaseOptions")){var r=Ne.QBaseApiData.QBaseOptions.verify(e.qbaseOptions);if(r)return"qbaseOptions."+r}return null!=e.qbaseReq&&e.hasOwnProperty("qbaseReq")&&!xe.isString(e.qbaseReq)?"qbaseReq: string expected":null!=e.cliReqId&&e.hasOwnProperty("cliReqId")&&!xe.isString(e.cliReqId)?"cliReqId: string expected":null},e.fromObject=function(e){if(e instanceof Ne.QBaseApiData)return e;var t=new Ne.QBaseApiData;if(null!=e.qbaseApiName&&(t.qbaseApiName=String(e.qbaseApiName)),null!=e.qbaseMeta){if("object"!=typeof e.qbaseMeta)throw TypeError(".QBaseApiData.qbaseMeta: object expected");t.qbaseMeta=Ne.QBaseApiData.QBaseMeta.fromObject(e.qbaseMeta)}if(null!=e.qbaseOptions){if("object"!=typeof e.qbaseOptions)throw TypeError(".QBaseApiData.qbaseOptions: object expected");t.qbaseOptions=Ne.QBaseApiData.QBaseOptions.fromObject(e.qbaseOptions)}return null!=e.qbaseReq&&(t.qbaseReq=String(e.qbaseReq)),null!=e.cliReqId&&(t.cliReqId=String(e.cliReqId)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.qbaseApiName="",r.qbaseMeta=null,r.qbaseOptions=null,r.qbaseReq="",r.cliReqId=""),null!=e.qbaseApiName&&e.hasOwnProperty("qbaseApiName")&&(r.qbaseApiName=e.qbaseApiName),null!=e.qbaseMeta&&e.hasOwnProperty("qbaseMeta")&&(r.qbaseMeta=Ne.QBaseApiData.QBaseMeta.toObject(e.qbaseMeta,t)),null!=e.qbaseOptions&&e.hasOwnProperty("qbaseOptions")&&(r.qbaseOptions=Ne.QBaseApiData.QBaseOptions.toObject(e.qbaseOptions,t)),null!=e.qbaseReq&&e.hasOwnProperty("qbaseReq")&&(r.qbaseReq=e.qbaseReq),null!=e.cliReqId&&e.hasOwnProperty("cliReqId")&&(r.cliReqId=e.cliReqId),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/QBaseApiData"},e.QBaseMeta=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.firstLaunch=!1,e.prototype.sessionId="",e.prototype.sdkVersion="",e.prototype.filterUserInfo=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oe.create()),null!=e.firstLaunch&&Object.hasOwnProperty.call(e,"firstLaunch")&&t.uint32(8).bool(e.firstLaunch),null!=e.sessionId&&Object.hasOwnProperty.call(e,"sessionId")&&t.uint32(18).string(e.sessionId),null!=e.sdkVersion&&Object.hasOwnProperty.call(e,"sdkVersion")&&t.uint32(26).string(e.sdkVersion),null!=e.filterUserInfo&&Object.hasOwnProperty.call(e,"filterUserInfo")&&t.uint32(32).bool(e.filterUserInfo),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Te||(e=Te.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ne.QBaseApiData.QBaseMeta;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.firstLaunch=e.bool();break;case 2:n.sessionId=e.string();break;case 3:n.sdkVersion=e.string();break;case 4:n.filterUserInfo=e.bool();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof Te||(e=new Te(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.firstLaunch&&e.hasOwnProperty("firstLaunch")&&"boolean"!=typeof e.firstLaunch?"firstLaunch: boolean expected":null!=e.sessionId&&e.hasOwnProperty("sessionId")&&!xe.isString(e.sessionId)?"sessionId: string expected":null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&!xe.isString(e.sdkVersion)?"sdkVersion: string expected":null!=e.filterUserInfo&&e.hasOwnProperty("filterUserInfo")&&"boolean"!=typeof e.filterUserInfo?"filterUserInfo: boolean expected":null},e.fromObject=function(e){if(e instanceof Ne.QBaseApiData.QBaseMeta)return e;var t=new Ne.QBaseApiData.QBaseMeta;return null!=e.firstLaunch&&(t.firstLaunch=Boolean(e.firstLaunch)),null!=e.sessionId&&(t.sessionId=String(e.sessionId)),null!=e.sdkVersion&&(t.sdkVersion=String(e.sdkVersion)),null!=e.filterUserInfo&&(t.filterUserInfo=Boolean(e.filterUserInfo)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.firstLaunch=!1,r.sessionId="",r.sdkVersion="",r.filterUserInfo=!1),null!=e.firstLaunch&&e.hasOwnProperty("firstLaunch")&&(r.firstLaunch=e.firstLaunch),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&(r.sessionId=e.sessionId),null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&(r.sdkVersion=e.sdkVersion),null!=e.filterUserInfo&&e.hasOwnProperty("filterUserInfo")&&(r.filterUserInfo=e.filterUserInfo),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/QBaseApiData.QBaseMeta"},e}(),e.QBaseOptions=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.env="",e.prototype.appid="",e.prototype.region="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oe.create()),null!=e.env&&Object.hasOwnProperty.call(e,"env")&&t.uint32(10).string(e.env),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(18).string(e.appid),null!=e.region&&Object.hasOwnProperty.call(e,"region")&&t.uint32(26).string(e.region),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Te||(e=Te.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ne.QBaseApiData.QBaseOptions;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.env=e.string();break;case 2:n.appid=e.string();break;case 3:n.region=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof Te||(e=new Te(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.env&&e.hasOwnProperty("env")&&!xe.isString(e.env)?"env: string expected":null!=e.appid&&e.hasOwnProperty("appid")&&!xe.isString(e.appid)?"appid: string expected":null!=e.region&&e.hasOwnProperty("region")&&!xe.isString(e.region)?"region: string expected":null},e.fromObject=function(e){if(e instanceof Ne.QBaseApiData.QBaseOptions)return e;var t=new Ne.QBaseApiData.QBaseOptions;return null!=e.env&&(t.env=String(e.env)),null!=e.appid&&(t.appid=String(e.appid)),null!=e.region&&(t.region=String(e.region)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.env="",r.appid="",r.region=""),null!=e.env&&e.hasOwnProperty("env")&&(r.env=e.env),null!=e.appid&&e.hasOwnProperty("appid")&&(r.appid=e.appid),null!=e.region&&e.hasOwnProperty("region")&&(r.region=e.region),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/QBaseApiData.QBaseOptions"},e}(),e})(),Be=Ne.V3Header=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.encryptionTimestamp=xe.Long?xe.Long.fromBits(0,0,!0):0,e.prototype.compression="",e.prototype.userTimeout=xe.Long?xe.Long.fromBits(0,0,!0):0,e.prototype.libBuildTs=xe.Long?xe.Long.fromBits(0,0,!0):0,e.prototype.appProtocol="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oe.create()),null!=e.encryptionTimestamp&&Object.hasOwnProperty.call(e,"encryptionTimestamp")&&t.uint32(8).uint64(e.encryptionTimestamp),null!=e.compression&&Object.hasOwnProperty.call(e,"compression")&&t.uint32(18).string(e.compression),null!=e.userTimeout&&Object.hasOwnProperty.call(e,"userTimeout")&&t.uint32(24).uint64(e.userTimeout),null!=e.libBuildTs&&Object.hasOwnProperty.call(e,"libBuildTs")&&t.uint32(32).uint64(e.libBuildTs),null!=e.appProtocol&&Object.hasOwnProperty.call(e,"appProtocol")&&t.uint32(42).string(e.appProtocol),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Te||(e=Te.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Ne.V3Header;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.encryptionTimestamp=e.uint64();break;case 2:n.compression=e.string();break;case 3:n.userTimeout=e.uint64();break;case 4:n.libBuildTs=e.uint64();break;case 5:n.appProtocol=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof Te||(e=new Te(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null==e.encryptionTimestamp||!e.hasOwnProperty("encryptionTimestamp")||xe.isInteger(e.encryptionTimestamp)||e.encryptionTimestamp&&xe.isInteger(e.encryptionTimestamp.low)&&xe.isInteger(e.encryptionTimestamp.high)?null!=e.compression&&e.hasOwnProperty("compression")&&!xe.isString(e.compression)?"compression: string expected":null==e.userTimeout||!e.hasOwnProperty("userTimeout")||xe.isInteger(e.userTimeout)||e.userTimeout&&xe.isInteger(e.userTimeout.low)&&xe.isInteger(e.userTimeout.high)?null==e.libBuildTs||!e.hasOwnProperty("libBuildTs")||xe.isInteger(e.libBuildTs)||e.libBuildTs&&xe.isInteger(e.libBuildTs.low)&&xe.isInteger(e.libBuildTs.high)?null!=e.appProtocol&&e.hasOwnProperty("appProtocol")&&!xe.isString(e.appProtocol)?"appProtocol: string expected":null:"libBuildTs: integer|Long expected":"userTimeout: integer|Long expected":"encryptionTimestamp: integer|Long expected"},e.fromObject=function(e){if(e instanceof Ne.V3Header)return e;var t=new Ne.V3Header;return null!=e.encryptionTimestamp&&(xe.Long?(t.encryptionTimestamp=xe.Long.fromValue(e.encryptionTimestamp)).unsigned=!0:"string"==typeof e.encryptionTimestamp?t.encryptionTimestamp=parseInt(e.encryptionTimestamp,10):"number"==typeof e.encryptionTimestamp?t.encryptionTimestamp=e.encryptionTimestamp:"object"==typeof e.encryptionTimestamp&&(t.encryptionTimestamp=new xe.LongBits(e.encryptionTimestamp.low>>>0,e.encryptionTimestamp.high>>>0).toNumber(!0))),null!=e.compression&&(t.compression=String(e.compression)),null!=e.userTimeout&&(xe.Long?(t.userTimeout=xe.Long.fromValue(e.userTimeout)).unsigned=!0:"string"==typeof e.userTimeout?t.userTimeout=parseInt(e.userTimeout,10):"number"==typeof e.userTimeout?t.userTimeout=e.userTimeout:"object"==typeof e.userTimeout&&(t.userTimeout=new xe.LongBits(e.userTimeout.low>>>0,e.userTimeout.high>>>0).toNumber(!0))),null!=e.libBuildTs&&(xe.Long?(t.libBuildTs=xe.Long.fromValue(e.libBuildTs)).unsigned=!0:"string"==typeof e.libBuildTs?t.libBuildTs=parseInt(e.libBuildTs,10):"number"==typeof e.libBuildTs?t.libBuildTs=e.libBuildTs:"object"==typeof e.libBuildTs&&(t.libBuildTs=new xe.LongBits(e.libBuildTs.low>>>0,e.libBuildTs.high>>>0).toNumber(!0))),null!=e.appProtocol&&(t.appProtocol=String(e.appProtocol)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(xe.Long){var n=new xe.Long(0,0,!0);r.encryptionTimestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.encryptionTimestamp=t.longs===String?"0":0;if(r.compression="",xe.Long){var o=new xe.Long(0,0,!0);r.userTimeout=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.userTimeout=t.longs===String?"0":0;if(xe.Long){var i=new xe.Long(0,0,!0);r.libBuildTs=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.libBuildTs=t.longs===String?"0":0;r.appProtocol=""}return null!=e.encryptionTimestamp&&e.hasOwnProperty("encryptionTimestamp")&&("number"==typeof e.encryptionTimestamp?r.encryptionTimestamp=t.longs===String?String(e.encryptionTimestamp):e.encryptionTimestamp:r.encryptionTimestamp=t.longs===String?xe.Long.prototype.toString.call(e.encryptionTimestamp):t.longs===Number?new xe.LongBits(e.encryptionTimestamp.low>>>0,e.encryptionTimestamp.high>>>0).toNumber(!0):e.encryptionTimestamp),null!=e.compression&&e.hasOwnProperty("compression")&&(r.compression=e.compression),null!=e.userTimeout&&e.hasOwnProperty("userTimeout")&&("number"==typeof e.userTimeout?r.userTimeout=t.longs===String?String(e.userTimeout):e.userTimeout:r.userTimeout=t.longs===String?xe.Long.prototype.toString.call(e.userTimeout):t.longs===Number?new xe.LongBits(e.userTimeout.low>>>0,e.userTimeout.high>>>0).toNumber(!0):e.userTimeout),null!=e.libBuildTs&&e.hasOwnProperty("libBuildTs")&&("number"==typeof e.libBuildTs?r.libBuildTs=t.longs===String?String(e.libBuildTs):e.libBuildTs:r.libBuildTs=t.longs===String?xe.Long.prototype.toString.call(e.libBuildTs):t.longs===Number?new xe.LongBits(e.libBuildTs.low>>>0,e.libBuildTs.high>>>0).toNumber(!0):e.libBuildTs),null!=e.appProtocol&&e.hasOwnProperty("appProtocol")&&(r.appProtocol=e.appProtocol),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ce.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/V3Header"},e})();function ke(e,t){return{data:ge(e,Se.default.compress(t)).encrypted}}function Me(e,t,r,n){var i,a=`${Math.random()}_${Date.now()}`,s=Object.entries(t).filter((([e,t])=>!ye(e)&&!ye(t))).map((([e,t])=>({key:e.toString().toLowerCase(),value:t.toString()}))),l=me(n),u=!1;"object"===l?i=JSON.stringify(n):"arraybuffer"!==l?i=n+"":(i=n,u=!0);var c=u?Re.encode({body:new Uint8Array(n),callId:a,header:s}).finish():new Uint8Array(ve(JSON.stringify({method:r,header:s,body:i})));return o()(o()({},ke(e,c)),{},{contentEncoding:u?"PB":"JSON"})}function Fe(e,t,r,n){var i,a=n instanceof ArrayBuffer,s=Object.entries(t).filter((([e,t])=>e&&t)).map((([e,t])=>({key:e.toLowerCase(),value:t})));return i=a?Pe.encode({bodyBuffer:new Uint8Array(n),statusCode:r,header:s}).finish():Pe.encode({bodyString:JSON.stringify(n),statusCode:r,header:s}).finish(),o()(o()({},ke(e,i)),{},{contentEncoding:a?"PB":"JSON"})}function je(e,t){var r=Le.encode(t).finish();return o()({},ke(e,r))}function Ue(e,t){var r=_e();return r?r.decrypt(t,e,e):Z.decrypt(t,e,void 0,e)}m(),m();var $e=v(w(),1);function We(e,t,r){var n=Ue(e,t);return{data:r?$e.default.uncompress(n):n}}function qe(e,t,r,n){var o,{data:i}=We(e,t,r);if("PB"===n)o=Re.decode(i);else{var a=Ee(i);o=JSON.parse(a)}return o}function He(e,t,r,n){var o,{data:i}=We(e,t,r);if("PB"===n)o=Pe.decode(i);else{var a=Ee(i);o=JSON.parse(a)}return{statusCode:o.statusCode,body:o.bodyString||o.bodyBuffer,header:o.header.reduce(((e,t)=>(t.key&&t.value&&(e[t.key]=e[t.key]?e[t.key]+","+t.value:t.value),e)),{})}}function Ge(e,t,r){var{data:n}=We(e,t,r),o=Ee(n);return{data:JSON.parse(o)}}var Qe={};function ze(e,t){var r=_e(),n=new Uint8Array(16);return we(n),{iv:n,encrypted:r?r.encrypt(t,e,n):Z.encrypt(t,e,void 0,n)}}_(Qe,{decode:()=>it,decodeRequest:()=>at,decodeResponse:()=>st,encode:()=>Ze,encodeRequest:()=>et,encodeResponse:()=>tt}),m(),m(),m(),m();var Ye="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Ke=(e=21)=>{for(var t="",r=e;r--;)t+=Ye[64*Math.random()|0];return t},Ve=v(w(),1);function Je(e,t,r){var n=Date.now();return(...o)=>{var i=t(...o),a=Date.now();return e[r]=a-n,i}}function Xe(e,t,r){return t=+t,e[r>>>=0]=t>>>8,e[r+1]=255&t,r+2}function Ze(e,t,r="JSON",n={}){var o={appProtocol:`1/${r}`,compression:"snappy",encryptionTimestamp:Date.now(),libBuildTs:1672733836448},i=ze(e,Be.encode(o).finish()),a=i.iv.length+i.encrypted.length,s=new Uint8Array(2);Xe(s,a,0);var l=Je(n,Ve.default.compress,"compress")(t),u=Je(n,ze,"encrypt")(e,l);return{data:Ae([s,i.iv,i.encrypted,u.iv,u.encrypted]),__v3__header:o}}function et(e,t,r,n,i={}){var a,s=me(n),l=Object.entries(t).filter((([e,t])=>!ye(e)&&!ye(t))).map((([e,t])=>({key:e.toString().toLowerCase(),value:t.toString()}))),u=`${Date.now()}-${Ke(8)}`,c=!1;"object"===s?a=JSON.stringify(n):"arraybuffer"!==s?a=n+"":(a=n,c=!0);var d=c?Je(i,Re.encode,"encodePb")({body:a,callId:u,header:l,method:r}).finish():new Uint8Array(Je(i,ve,"stringToBuffer")(JSON.stringify({body:a,call_id:u,header:l,method:r})));return o()(o()({},Ze(e,d,c?"PB":"JSON",i)),{},{callId:u,stats:i})}function tt(e,t,r,n){var o,i=me(n),a=Object.entries(t).filter((([e,t])=>e&&t)).map((([e,t])=>({key:e.toString().toLowerCase(),value:t.toString()}))),s=!1;return"object"===i?o=JSON.stringify(n):"arraybuffer"!==i?o=n+"":(o=n,s=!0),"object"===i?o=JSON.stringify(n):"arraybuffer"!==i?o=n+"":(o=n,s=!0),Ze(e,s?Pe.encode({bodyBuffer:o,statusCode:r,header:a}).finish():Pe.encode({bodyString:JSON.stringify(n),statusCode:r,header:a}).finish(),"PB")}function rt(e,t){var r=_e(),n=t.subarray(0,16),o=t.subarray(16);return r?r.decrypt(o,e,n):Z.decrypt(o,e,void 0,n)}m(),m(),m();var nt=v(w(),1);function ot(e,t){return e[t>>>=0]<<8|e[t+1]}function it(e,t,r={}){var n=ot(t,0),o=rt(e,t.slice(2,n+2)),i=Be.decode(o),a="snappy"===i.compression,s=Je(r,rt,"decrypt")(e,t.slice(n+2));return{data:a?Je(r,nt.default.uncompress,"uncompress")(s):s,__v3__header:i}}function at(e,t,r={}){var n,{data:i,__v3__header:a}=it(e,t,r),s=!1,l=a.appProtocol.split("/")[1];return l&&(s="PB"===l),n=s?Re.decode(i):Je(r,(e=>JSON.parse(Ee(e))),"decodeJson")(i),o()(o()({},n),{},{__v3__header:a,stats:r})}function st(e,t,r={}){var n,{data:o,__v3__header:i}=it(e,t,r),a=!1,s=i.appProtocol.split("/")[1];return s&&(a="PB"===s),{statusCode:(n=a?Je(r,Pe.decode,"decodePb")(o):Je(r,(e=>JSON.parse(Ee(e))),"decodeJson")(o)).statusCode,body:n.bodyString||n.bodyBuffer,header:n.header.reduce(((e,t)=>(t.key&&t.value&&(e[t.key]=e[t.key]?e[t.key]+","+t.value:t.value),e)),{}),__v3__header:i}}},967:(e,t,r)=>{var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a=!1;function s(){a=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)n[t]=e[t],o[e.charCodeAt(t)]=t;o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63}function l(e,t,r){for(var o,i,a=[],s=t;s<r;s+=3)o=(e[s]<<16)+(e[s+1]<<8)+e[s+2],a.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}function u(e){var t;a||s();for(var r=e.length,o=r%3,i="",u=[],c=16383,d=0,p=r-o;d<p;d+=c)u.push(l(e,d,d+c>p?p:d+c));return 1===o?(t=e[r-1],i+=n[t>>2],i+=n[t<<4&63],i+="=="):2===o&&(t=(e[r-2]<<8)+e[r-1],i+=n[t>>10],i+=n[t>>4&63],i+=n[t<<2&63],i+="="),u.push(i),u.join("")}function c(e,t,r,n,o){var i,a,s=8*o-n-1,l=(1<<s)-1,u=l>>1,c=-7,d=r?o-1:0,p=r?-1:1,f=e[t+d];for(d+=p,i=f&(1<<-c)-1,f>>=-c,c+=s;c>0;i=256*i+e[t+d],d+=p,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;c>0;a=256*a+e[t+d],d+=p,c-=8);if(0===i)i=1-u;else{if(i===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),i-=u}return(f?-1:1)*a*Math.pow(2,i-n)}function d(e,t,r,n,o,i){var a,s,l,u=8*i-o-1,c=(1<<u)-1,d=c>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,h=n?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?p/l:p*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*l-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[r+f]=255&s,f+=h,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[r+f]=255&a,f+=h,a/=256,u-=8);e[r+f-h]|=128*_}var p={}.toString,f=Array.isArray||function(e){return"[object Array]"==p.call(e)};v.TYPED_ARRAY_SUPPORT=void 0===r.g.TYPED_ARRAY_SUPPORT||r.g.TYPED_ARRAY_SUPPORT;var h=_();function _(){return v.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function g(e,t){if(_()<t)throw new RangeError("Invalid typed array length");return v.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=v.prototype:(null===e&&(e=new v(t)),e.length=t),e}function v(e,t,r){if(!(v.TYPED_ARRAY_SUPPORT||this instanceof v))return new v(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return b(this,e)}return m(this,e,t,r)}function m(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);v.TYPED_ARRAY_SUPPORT?(e=t).__proto__=v.prototype:e=w(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!v.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|I(t,r);e=g(e,n);var o=e.write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(E(t)){var r=0|A(t.length);return 0===(e=g(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?g(e,0):w(e,t);if("Buffer"===t.type&&f(t.data))return w(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function y(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function b(e,t){if(y(t),e=g(e,t<0?0:0|A(t)),!v.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function w(e,t){var r=t.length<0?0:0|A(t.length);e=g(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function A(e){if(e>=_())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_().toString(16)+" bytes");return 0|e}function E(e){return!(null==e||!e._isBuffer)}function I(e,t){if(E(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return J(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(e).length;default:if(n)return J(e).length;t=(""+t).toLowerCase(),n=!0}}function S(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return U(this,t,r);case"utf8":case"utf-8":return k(this,t,r);case"ascii":return F(this,t,r);case"latin1":case"binary":return j(this,t,r);case"base64":return B(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function C(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function T(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=v.from(t,n)),E(t))return 0===t.length?-1:O(e,t,r,n,o);if("number"==typeof t)return t&=255,v.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):O(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function O(e,t,r,n,o){var i,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var c=-1;for(i=r;i<s;i++)if(u(e,i)===u(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*a}else-1!==c&&(i-=i-c),c=-1}else for(r+l>s&&(r=s-l),i=r;i>=0;i--){for(var d=!0,p=0;p<l;p++)if(u(e,i+p)!==u(t,p)){d=!1;break}if(d)return i}return-1}function x(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function N(e,t,r,n){return Z(J(t,e.length-r),e,r,n)}function R(e,t,r,n){return Z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function P(e,t,r,n){return R(e,t,r,n)}function D(e,t,r,n){return Z(X(t),e,r,n)}function L(e,t,r,n){return Z(function(e,t){for(var r,n,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function B(e,t,r){return 0===t&&r===e.length?u(e):u(e.slice(t,r))}function k(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,a,s,l,u=e[o],c=null,d=u>239?4:u>223?3:u>191?2:1;if(o+d<=r)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(i=e[o+1]))&&(l=(31&u)<<6|63&i)>127&&(c=l);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(l=(15&u)<<12|(63&i)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),o+=d}return function(e){var t=e.length;if(t<=M)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=M));return r}(n)}v.poolSize=8192,v._augment=function(e){return e.__proto__=v.prototype,e},v.from=function(e,t,r){return m(null,e,t,r)},v.TYPED_ARRAY_SUPPORT&&(v.prototype.__proto__=Uint8Array.prototype,v.__proto__=Uint8Array),v.alloc=function(e,t,r){return function(e,t,r,n){return y(t),t<=0?g(e,t):void 0!==r?"string"==typeof n?g(e,t).fill(r,n):g(e,t).fill(r):g(e,t)}(null,e,t,r)},v.allocUnsafe=function(e){return b(null,e)},v.allocUnsafeSlow=function(e){return b(null,e)},v.isBuffer=ee,v.compare=function(e,t){if(!E(e)||!E(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},v.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.concat=function(e,t){if(!f(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return v.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=v.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(!E(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},v.byteLength=I,v.prototype._isBuffer=!0,v.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)C(this,t,t+1);return this},v.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)C(this,t,t+3),C(this,t+1,t+2);return this},v.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)C(this,t,t+7),C(this,t+1,t+6),C(this,t+2,t+5),C(this,t+3,t+4);return this},v.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):S.apply(this,arguments)},v.prototype.equals=function(e){if(!E(e))throw new TypeError("Argument must be a Buffer");return this===e||0===v.compare(this,e)},v.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},v.prototype.compare=function(e,t,r,n,o){if(!E(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(i,a),l=this.slice(n,o),u=e.slice(t,r),c=0;c<s;++c)if(l[c]!==u[c]){i=l[c],a=u[c];break}return i<a?-1:a<i?1:0},v.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},v.prototype.indexOf=function(e,t,r){return T(this,e,t,r,!0)},v.prototype.lastIndexOf=function(e,t,r){return T(this,e,t,r,!1)},v.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return x(this,e,t,r);case"utf8":case"utf-8":return N(this,e,t,r);case"ascii":return R(this,e,t,r);case"latin1":case"binary":return P(this,e,t,r);case"base64":return D(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function F(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function j(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function U(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=V(e[i]);return o}function $(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function W(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function q(e,t,r,n,o,i){if(!E(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function H(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function G(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function Q(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(e,t,r,n,o){return o||Q(e,0,r,4),d(e,t,r,n,23,4),r+4}function Y(e,t,r,n,o){return o||Q(e,0,r,8),d(e,t,r,n,52,8),r+8}v.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),v.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=v.prototype;else{var o=t-e;r=new v(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},v.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||W(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},v.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||W(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},v.prototype.readUInt8=function(e,t){return t||W(e,1,this.length),this[e]},v.prototype.readUInt16LE=function(e,t){return t||W(e,2,this.length),this[e]|this[e+1]<<8},v.prototype.readUInt16BE=function(e,t){return t||W(e,2,this.length),this[e]<<8|this[e+1]},v.prototype.readUInt32LE=function(e,t){return t||W(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},v.prototype.readUInt32BE=function(e,t){return t||W(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},v.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||W(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},v.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||W(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},v.prototype.readInt8=function(e,t){return t||W(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},v.prototype.readInt16LE=function(e,t){t||W(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},v.prototype.readInt16BE=function(e,t){t||W(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},v.prototype.readInt32LE=function(e,t){return t||W(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},v.prototype.readInt32BE=function(e,t){return t||W(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},v.prototype.readFloatLE=function(e,t){return t||W(e,4,this.length),c(this,e,!0,23,4)},v.prototype.readFloatBE=function(e,t){return t||W(e,4,this.length),c(this,e,!1,23,4)},v.prototype.readDoubleLE=function(e,t){return t||W(e,8,this.length),c(this,e,!0,52,8)},v.prototype.readDoubleBE=function(e,t){return t||W(e,8,this.length),c(this,e,!1,52,8)},v.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||q(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},v.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||q(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},v.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,1,255,0),v.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},v.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,2,65535,0),v.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):H(this,e,t,!0),t+2},v.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,2,65535,0),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):H(this,e,t,!1),t+2},v.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,4,4294967295,0),v.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):G(this,e,t,!0),t+4},v.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,4,4294967295,0),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},v.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);q(this,e,t,r,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},v.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);q(this,e,t,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},v.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,1,127,-128),v.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},v.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,2,32767,-32768),v.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):H(this,e,t,!0),t+2},v.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,2,32767,-32768),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):H(this,e,t,!1),t+2},v.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,4,2147483647,-2147483648),v.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):G(this,e,t,!0),t+4},v.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},v.prototype.writeFloatLE=function(e,t,r){return z(this,e,t,!0,r)},v.prototype.writeFloatBE=function(e,t,r){return z(this,e,t,!1,r)},v.prototype.writeDoubleLE=function(e,t,r){return Y(this,e,t,!0,r)},v.prototype.writeDoubleBE=function(e,t,r){return Y(this,e,t,!1,r)},v.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,i=n-r;if(this===e&&r<t&&t<n)for(o=i-1;o>=0;--o)e[o+t]=this[o+r];else if(i<1e3||!v.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},v.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!v.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var a=E(e)?e:J(new v(e,n).toString()),s=a.length;for(i=0;i<r-t;++i)this[i+t]=a[i%s]}return this};var K=/[^+\/0-9A-Za-z-_]/g;function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function J(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function X(e){return function(e){var t,r,n,l,u,c;a||s();var d=e.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");u="="===e[d-2]?2:"="===e[d-1]?1:0,c=new i(3*d/4-u),n=u>0?d-4:d;var p=0;for(t=0,r=0;t<n;t+=4,r+=3)l=o[e.charCodeAt(t)]<<18|o[e.charCodeAt(t+1)]<<12|o[e.charCodeAt(t+2)]<<6|o[e.charCodeAt(t+3)],c[p++]=l>>16&255,c[p++]=l>>8&255,c[p++]=255&l;return 2===u?(l=o[e.charCodeAt(t)]<<2|o[e.charCodeAt(t+1)]>>4,c[p++]=255&l):1===u&&(l=o[e.charCodeAt(t)]<<10|o[e.charCodeAt(t+1)]<<4|o[e.charCodeAt(t+2)]>>2,c[p++]=l>>8&255,c[p++]=255&l),c}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(K,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Z(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function ee(e){return null!=e&&(!!e._isBuffer||te(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&te(e.slice(0,0))}(e))}function te(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var re=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:h,Buffer:v,SlowBuffer:function(e){return+e!=e&&(e=0),v.alloc(+e)},isBuffer:ee});Map;var ne=function(){function e(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0}),e.isLong=t;var r={},n={};function o(e,t){var o,i,s;return t?(s=0<=(e>>>=0)&&e<256)&&(i=n[e])?i:(o=a(e,(0|e)<0?-1:0,!0),s&&(n[e]=o),o):(s=-128<=(e|=0)&&e<128)&&(i=r[e])?i:(o=a(e,e<0?-1:0,!1),s&&(r[e]=o),o)}function i(e,t){if(isNaN(e))return t?_:h;if(t){if(e<0)return _;if(e>=d)return b}else{if(e<=-p)return w;if(e+1>=p)return y}return e<0?i(-e,t).neg():a(e%c|0,e/c|0,t)}function a(t,r,n){return new e(t,r,n)}e.fromInt=o,e.fromNumber=i,e.fromBits=a;var s=Math.pow;function l(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return h;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return l(e.substring(1),t,r).neg();for(var o=i(s(r,8)),a=h,u=0;u<e.length;u+=8){var c=Math.min(8,e.length-u),d=parseInt(e.substring(u,u+c),r);if(c<8){var p=i(s(r,c));a=a.mul(p).add(i(d))}else a=(a=a.mul(o)).add(i(d))}return a.unsigned=t,a}function u(e,t){return"number"==typeof e?i(e,t):"string"==typeof e?l(e,t):a(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}e.fromString=l,e.fromValue=u;var c=4294967296,d=c*c,p=d/2,f=o(1<<24),h=o(0);e.ZERO=h;var _=o(0,!0);e.UZERO=_;var g=o(1);e.ONE=g;var v=o(1,!0);e.UONE=v;var m=o(-1);e.NEG_ONE=m;var y=a(-1,2147483647,!1);e.MAX_VALUE=y;var b=a(-1,-1,!0);e.MAX_UNSIGNED_VALUE=b;var w=a(0,-2147483648,!1);e.MIN_VALUE=w;var A=e.prototype;return A.toInt=function(){return this.unsigned?this.low>>>0:this.low},A.toNumber=function(){return this.unsigned?(this.high>>>0)*c+(this.low>>>0):this.high*c+(this.low>>>0)},A.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(w)){var t=i(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=i(s(e,6),this.unsigned),a=this,l="";;){var u=a.div(o),c=(a.sub(u.mul(o)).toInt()>>>0).toString(e);if((a=u).isZero())return c+l;for(;c.length<6;)c="0"+c;l=""+c+l}},A.getHighBits=function(){return this.high},A.getHighBitsUnsigned=function(){return this.high>>>0},A.getLowBits=function(){return this.low},A.getLowBitsUnsigned=function(){return this.low>>>0},A.getNumBitsAbs=function(){if(this.isNegative())return this.eq(w)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},A.isZero=function(){return 0===this.high&&0===this.low},A.eqz=A.isZero,A.isNegative=function(){return!this.unsigned&&this.high<0},A.isPositive=function(){return this.unsigned||this.high>=0},A.isOdd=function(){return 1==(1&this.low)},A.isEven=function(){return 0==(1&this.low)},A.equals=function(e){return t(e)||(e=u(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},A.eq=A.equals,A.notEquals=function(e){return!this.eq(e)},A.neq=A.notEquals,A.ne=A.notEquals,A.lessThan=function(e){return this.comp(e)<0},A.lt=A.lessThan,A.lessThanOrEqual=function(e){return this.comp(e)<=0},A.lte=A.lessThanOrEqual,A.le=A.lessThanOrEqual,A.greaterThan=function(e){return this.comp(e)>0},A.gt=A.greaterThan,A.greaterThanOrEqual=function(e){return this.comp(e)>=0},A.gte=A.greaterThanOrEqual,A.ge=A.greaterThanOrEqual,A.compare=function(e){if(t(e)||(e=u(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},A.comp=A.compare,A.negate=function(){return!this.unsigned&&this.eq(w)?w:this.not().add(g)},A.neg=A.negate,A.add=function(e){t(e)||(e=u(e));var r=this.high>>>16,n=65535&this.high,o=this.low>>>16,i=65535&this.low,s=e.high>>>16,l=65535&e.high,c=e.low>>>16,d=0,p=0,f=0,h=0;return f+=(h+=i+(65535&e.low))>>>16,p+=(f+=o+c)>>>16,d+=(p+=n+l)>>>16,d+=r+s,a((f&=65535)<<16|(h&=65535),(d&=65535)<<16|(p&=65535),this.unsigned)},A.subtract=function(e){return t(e)||(e=u(e)),this.add(e.neg())},A.sub=A.subtract,A.multiply=function(e){if(this.isZero())return h;if(t(e)||(e=u(e)),e.isZero())return h;if(this.eq(w))return e.isOdd()?w:h;if(e.eq(w))return this.isOdd()?w:h;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(f)&&e.lt(f))return i(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,n=65535&this.high,o=this.low>>>16,s=65535&this.low,l=e.high>>>16,c=65535&e.high,d=e.low>>>16,p=65535&e.low,_=0,g=0,v=0,m=0;return v+=(m+=s*p)>>>16,g+=(v+=o*p)>>>16,v&=65535,g+=(v+=s*d)>>>16,_+=(g+=n*p)>>>16,g&=65535,_+=(g+=o*d)>>>16,g&=65535,_+=(g+=s*c)>>>16,_+=r*p+n*d+o*c+s*l,a((v&=65535)<<16|(m&=65535),(_&=65535)<<16|(g&=65535),this.unsigned)},A.mul=A.multiply,A.divide=function(e){if(t(e)||(e=u(e)),e.isZero())throw Error("division by zero");var r,n,o;if(this.isZero())return this.unsigned?_:h;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return _;if(e.gt(this.shru(1)))return v;o=_}else{if(this.eq(w))return e.eq(g)||e.eq(m)?w:e.eq(w)?g:(r=this.shr(1).div(e).shl(1)).eq(h)?e.isNegative()?g:m:(n=this.sub(e.mul(r)),o=r.add(n.div(e)));if(e.eq(w))return this.unsigned?_:h;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=h}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:s(2,a-48),c=i(r),d=c.mul(e);d.isNegative()||d.gt(n);)d=(c=i(r-=l,this.unsigned)).mul(e);c.isZero()&&(c=g),o=o.add(c),n=n.sub(d)}return o},A.div=A.divide,A.modulo=function(e){return t(e)||(e=u(e)),this.sub(this.div(e).mul(e))},A.mod=A.modulo,A.rem=A.modulo,A.not=function(){return a(~this.low,~this.high,this.unsigned)},A.and=function(e){return t(e)||(e=u(e)),a(this.low&e.low,this.high&e.high,this.unsigned)},A.or=function(e){return t(e)||(e=u(e)),a(this.low|e.low,this.high|e.high,this.unsigned)},A.xor=function(e){return t(e)||(e=u(e)),a(this.low^e.low,this.high^e.high,this.unsigned)},A.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?a(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):a(0,this.low<<e-32,this.unsigned)},A.shl=A.shiftLeft,A.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?a(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):a(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},A.shr=A.shiftRight,A.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0===(e&=63))return this;var r=this.high;return e<32?a(this.low>>>e|r<<32-e,r>>>e,this.unsigned):a(32===e?r:r>>>e-32,0,this.unsigned)},A.shru=A.shiftRightUnsigned,A.shr_u=A.shiftRightUnsigned,A.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},A.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},A.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},A.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},A.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},e.fromBytes=function(t,r,n){return n?e.fromBytesLE(t,r):e.fromBytesBE(t,r)},e.fromBytesLE=function(t,r){return new e(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,r)},e.fromBytesBE=function(t,r){return new e(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],r)},e.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},e.fromExtendedJSON=function(t,r){var n=e.fromString(t.$numberLong);return r&&r.relaxed?n.toNumber():n},Object.defineProperty(e.prototype,"_bsontype",{value:"Long"}),e}();function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ae(e,t,r){return t&&ie(e.prototype,t),r&&ie(e,r),e}var se=function(){function e(t){oe(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return ae(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:{$numberDouble:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,r){return r&&r.relaxed?parseFloat(t.$numberDouble):new e(parseFloat(t.$numberDouble))}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"Double"}),e}();function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function ue(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}function de(e,t){return de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},de(e,t)}var pe=function(e){function t(e,r){var n;return oe(this,t),n=ne.isLong(e)?ue(this,ce(t).call(this,e.low,e.high,!0)):ue(this,ce(t).call(this,e,r,!0)),ue(n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,e),ae(t,[{key:"toJSON",value:function(){return{$timestamp:this.toString()}}},{key:"toExtendedJSON",value:function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}}}],[{key:"fromInt",value:function(e){return new t(ne.fromInt(e,!0))}},{key:"fromNumber",value:function(e){return new t(ne.fromNumber(e,!0))}},{key:"fromBits",value:function(e,r){return new t(e,r)}},{key:"fromString",value:function(e,r){return new t(ne.fromString(e,r,!0))}},{key:"fromExtendedJSON",value:function(e){return new t(e.$timestamp.i,e.$timestamp.t)}}]),Object.defineProperty(t.prototype,"_bsontype",{value:"Timestamp"}),t.MAX_VALUE=t.MAX_UNSIGNED_VALUE,t}(ne),fe={};function he(e){for(var t=new Uint8Array(e),r=0;r<e;++r)t[r]=Math.floor(256*Math.random());return t}var _e={normalizedFunctionString:function(e){return e.toString().replace("function(","function (")},randomBytes:function(){var e=he;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues)e=function(e){return window.crypto.getRandomValues(new Uint8Array(e))};else{try{e=fe.randomBytes}catch(e){}null==e&&(e=he)}return e}()};new Date;var ge=function(){function e(e,t){var r={seen:[],stylize:me};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),Ee(t)?r.showHidden=t:t&&Le(r,t),Te(r.showHidden)&&(r.showHidden=!1),Te(r.depth)&&(r.depth=2),Te(r.colors)&&(r.colors=!1),Te(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=ve),ye(r,e,r.depth)}return e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e}();function ve(e,t){var r=ge.styles[t];return r?"["+ge.colors[r][0]+"m"+e+"["+ge.colors[r][1]+"m":e}function me(e,t){return e}function ye(e,t,r){if(e.customInspect&&t&&Pe(t.inspect)&&t.inspect!==ge&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return Ce(n)||(n=ye(e,n,r)),n}var o=function(e,t){if(Te(t))return e.stylize("undefined","undefined");if(Ce(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(Se(t))return e.stylize(""+t,"number");if(Ee(t))return e.stylize(""+t,"boolean");if(Ie(t))return e.stylize("null","null")}(e,t);if(o)return o;var i=Object.keys(t),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),Re(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return be(t);if(0===i.length){if(Pe(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(Oe(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Ne(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Re(t))return be(t)}var l,u="",c=!1,d=["{","}"];(Ae(t)&&(c=!0,d=["[","]"]),Pe(t))&&(u=" [Function"+(t.name?": "+t.name:"")+"]");return Oe(t)&&(u=" "+RegExp.prototype.toString.call(t)),Ne(t)&&(u=" "+Date.prototype.toUTCString.call(t)),Re(t)&&(u=" "+be(t)),0!==i.length||c&&0!=t.length?r<0?Oe(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),l=c?function(e,t,r,n,o){for(var i=[],a=0,s=t.length;a<s;++a)Be(t,String(a))?i.push(we(e,t,r,n,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(we(e,t,r,n,o,!0))})),i}(e,t,r,a,i):i.map((function(n){return we(e,t,r,a,n,c)})),e.seen.pop(),function(e,t,r){var n=e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(n>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(l,u,d)):d[0]+u+d[1]}function be(e){return"["+Error.prototype.toString.call(e)+"]"}function we(e,t,r,n,o,i){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),Be(n,o)||(a="["+o+"]"),s||(e.seen.indexOf(l.value)<0?(s=Ie(r)?ye(e,l.value,null):ye(e,l.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),Te(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function Ae(e){return Array.isArray(e)}function Ee(e){return"boolean"==typeof e}function Ie(e){return null===e}function Se(e){return"number"==typeof e}function Ce(e){return"string"==typeof e}function Te(e){return void 0===e}function Oe(e){return xe(e)&&"[object RegExp]"===De(e)}function xe(e){return"object"===le(e)&&null!==e}function Ne(e){return xe(e)&&"[object Date]"===De(e)}function Re(e){return xe(e)&&("[object Error]"===De(e)||e instanceof Error)}function Pe(e){return"function"==typeof e}function De(e){return Object.prototype.toString.call(e)}function Le(e,t){if(!t||!xe(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function Be(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var ke=ge,Me=function e(t,n){if(Te(r.g.process))return function(){return e(t,n).apply(this,arguments)};var o=!1;return function(){return o||(console.error(n),o=!0),t.apply(this,arguments)}},Fe=(()=>re.Buffer)(),je=Me,Ue=(0,_e.randomBytes)(5),$e=new RegExp("^[0-9a-fA-F]{24}$"),We=function(){var e=!1;try{Fe&&Fe.from&&(e=!0)}catch(t){e=!1}return e}(),qe=function(){for(var e=[],t=0;t<256;t++)e[t]=(t<=15?"0":"")+t.toString(16);return e}(),He=function(){for(var e=[],t=0;t<10;)e[48+t]=t++;for(;t<16;)e[55+t]=e[87+t]=t++;return e}(),Ge=Fe;var Qe=function(){function e(t){if(oe(this,e),t instanceof e)return t;if(null==t||"number"==typeof t)return this.id=e.generate(t),void(e.cacheHexString&&(this.__id=this.toString("hex")));var r=e.isValid(t);if(!r&&null!=t)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(r&&"string"==typeof t&&24===t.length&&We)return new e(Fe.from(t,"hex"));if(r&&"string"==typeof t&&24===t.length)return e.createFromHexString(t);if(null==t||12!==t.length){if(null!=t&&t.toHexString)return e.createFromHexString(t.toHexString());throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=t,e.cacheHexString&&(this.__id=this.toString("hex"))}return ae(e,[{key:"toHexString",value:function(){if(e.cacheHexString&&this.__id)return this.__id;var t,r,n,o="";if(!this.id||!this.id.length)throw new TypeError("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof Ge)return o=this.id.toString("hex"),e.cacheHexString&&(this.__id=o),o;for(var i=0;i<this.id.length;i++){var a=qe[this.id.charCodeAt(i)];if("string"!=typeof a)throw t=this.id,n=void 0,n=t[r=i],new TypeError('ObjectId string "'.concat(t,'" contains invalid character "').concat(n,'" with character code (').concat(t.charCodeAt(r),"). All character codes for a non-hex string must be less than 256."));o+=a}return e.cacheHexString&&(this.__id=o),o}},{key:"toString",value:function(e){return this.id&&this.id.copy?this.id.toString("string"==typeof e?e:"hex"):this.toHexString()}},{key:"toJSON",value:function(){return this.toHexString()}},{key:"equals",value:function(t){return t instanceof e?this.toString()===t.toString():"string"==typeof t&&e.isValid(t)&&12===t.length&&this.id instanceof Ge?t===this.id.toString("binary"):"string"==typeof t&&e.isValid(t)&&24===t.length?t.toLowerCase()===this.toHexString():"string"==typeof t&&e.isValid(t)&&12===t.length?t===this.id:!(null==t||!(t instanceof e||t.toHexString))&&t.toHexString()===this.toHexString()}},{key:"getTimestamp",value:function(){var e=new Date,t=this.id.readUInt32BE(0);return e.setTime(1e3*Math.floor(t)),e}},{key:"toExtendedJSON",value:function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}}],[{key:"getInc",value:function(){return e.index=(e.index+1)%16777215}},{key:"generate",value:function(t){"number"!=typeof t&&(t=~~(Date.now()/1e3));var r=e.getInc(),n=Fe.alloc(12);return n[3]=255&t,n[2]=t>>8&255,n[1]=t>>16&255,n[0]=t>>24&255,n[4]=Ue[0],n[5]=Ue[1],n[6]=Ue[2],n[7]=Ue[3],n[8]=Ue[4],n[11]=255&r,n[10]=r>>8&255,n[9]=r>>16&255,n}},{key:"createPk",value:function(){return new e}},{key:"createFromTime",value:function(t){var r=Fe.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r[3]=255&t,r[2]=t>>8&255,r[1]=t>>16&255,r[0]=t>>24&255,new e(r)}},{key:"createFromHexString",value:function(t){if(void 0===t||null!=t&&24!==t.length)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(We)return new e(Fe.from(t,"hex"));for(var r=new Ge(12),n=0,o=0;o<24;)r[n++]=He[t.charCodeAt(o++)]<<4|He[t.charCodeAt(o++)];return new e(r)}},{key:"isValid",value:function(t){return null!=t&&("number"==typeof t||("string"==typeof t?12===t.length||24===t.length&&$e.test(t):t instanceof e||(t instanceof Ge&&12===t.length||!!t.toHexString&&(12===t.id.length||24===t.id.length&&$e.test(t.id)))))}},{key:"fromExtendedJSON",value:function(t){return new e(t.$oid)}}]),e.get_inc=je((function(){return e.getInc()}),"Please use the static `ObjectId.getInc()` instead"),e.prototype.get_inc=je((function(){return e.getInc()}),"Please use the static `ObjectId.getInc()` instead"),e.prototype.getInc=je((function(){return e.getInc()}),"Please use the static `ObjectId.getInc()` instead"),e.prototype.generate=je((function(t){return e.generate(t)}),"Please use the static `ObjectId.generate(time)` instead"),Object.defineProperty(e.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}}),e.prototype[ke.custom||"inspect"]=e.prototype.toString,e.index=~~(16777215*Math.random()),Object.defineProperty(e.prototype,"_bsontype",{value:"ObjectID"}),e}(),ze=Qe;var Ye=function(){function e(t,r){oe(this,e),this.pattern=t||"",this.options=r?r.split("").sort().join(""):"";for(var n=0;n<this.options.length;n++)if("i"!==this.options[n]&&"m"!==this.options[n]&&"x"!==this.options[n]&&"l"!==this.options[n]&&"s"!==this.options[n]&&"u"!==this.options[n])throw new Error("The regular expression option [".concat(this.options[n],"] is not supported"))}return ae(e,[{key:"toExtendedJSON",value:function(e){return(e=e||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}}],[{key:"parseOptions",value:function(e){return e?e.split("").sort().join(""):""}},{key:"fromExtendedJSON",value:function(t){return t.$regex?"BSONRegExp"===t.$regex._bsontype?t:new e(t.$regex,e.parseOptions(t.$options)):new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options))}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"BSONRegExp"}),e}(),Ke=function(){function e(t){oe(this,e),this.value=t}return ae(e,[{key:"valueOf",value:function(){return this.value}},{key:"toString",value:function(){return this.value}},{key:"inspect",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(){return{$symbol:this.value}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$symbol)}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"Symbol"}),e}(),Ve=function(){function e(t){oe(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return ae(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,r){return r&&r.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"Int32"}),e}(),Je=function(){function e(t,r){oe(this,e),this.code=t,this.scope=r}return ae(e,[{key:"toJSON",value:function(){return{scope:this.scope,code:this.code}}},{key:"toExtendedJSON",value:function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$code,t.$scope)}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"Code"}),e}(),Xe=Je,Ze=(()=>re.Buffer)(),et=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,tt=/^(\+|-)?(Infinity|inf)$/i,rt=/^(\+|-)?NaN$/i,nt=6111,ot=-6176,it=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),at=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),st=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),lt=/^([-+])?(\d+)?$/;function ut(e){return!isNaN(parseInt(e,10))}function ct(e){var t=ne.fromNumber(1e9),r=ne.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:r};for(var n=0;n<=3;n++)r=(r=r.shiftLeft(32)).add(new ne(e.parts[n],0)),e.parts[n]=r.div(t).low,r=r.modulo(t);return{quotient:e,rem:r}}function dt(e,t){throw new TypeError('"'.concat(e,'" is not a valid Decimal128 string - ').concat(t))}var pt=function(){function e(e){this.bytes=e}e.fromString=function(t){var r,n=!1,o=!1,i=!1,a=0,s=0,l=0,u=0,c=0,d=[0],p=0,f=0,h=0,_=0,g=0,v=0,m=[0,0],y=[0,0],b=0;if(t.length>=7e3)throw new TypeError(t+" not a valid Decimal128 string");var w=t.match(et),A=t.match(tt),E=t.match(rt);if(!w&&!A&&!E||0===t.length)throw new TypeError(t+" not a valid Decimal128 string");if(w){var I=w[2],S=w[4],C=w[5],T=w[6];S&&void 0===T&&dt(t,"missing exponent power"),S&&void 0===I&&dt(t,"missing exponent base"),void 0===S&&(C||T)&&dt(t,"missing e before exponent")}if("+"!==t[b]&&"-"!==t[b]||(n="-"===t[b++]),!ut(t[b])&&"."!==t[b]){if("i"===t[b]||"I"===t[b])return new e(Ze.from(n?at:st));if("N"===t[b])return new e(Ze.from(it))}for(;ut(t[b])||"."===t[b];)"."!==t[b]?(p<34&&("0"!==t[b]||i)&&(i||(c=s),i=!0,d[f++]=parseInt(t[b],10),p+=1),i&&(l+=1),o&&(u+=1),s+=1,b+=1):(o&&dt(t,"contains multiple periods"),o=!0,b+=1);if(o&&!s)throw new TypeError(t+" not a valid Decimal128 string");if("e"===t[b]||"E"===t[b]){var O=t.substr(++b).match(lt);if(!O||!O[2])return new e(Ze.from(it));g=parseInt(O[0],10),b+=O[0].length}if(t[b])return new e(Ze.from(it));if(h=0,p){if(_=p-1,1!==(a=l))for(;"0"===t[c+a-1];)a-=1}else h=0,_=0,d[0]=0,l=1,p=1,a=0;for(g<=u&&u-g>16384?g=ot:g-=u;g>nt;){if((_+=1)-h>34){if(d.join("").match(/^0+$/)){g=nt;break}dt(t,"overflow")}g-=1}for(;g<ot||p<l;){if(0===_&&a<p){g=ot,a=0;break}if(p<l?l-=1:_-=1,g<nt)g+=1;else{if(d.join("").match(/^0+$/)){g=nt;break}dt(t,"overflow")}}if(_-h+1<a){var x=s;o&&(c+=1,x+=1),n&&(c+=1,x+=1);var N=parseInt(t[c+_+1],10),R=0;if(N>=5&&(R=1,5===N))for(R=d[_]%2==1,v=c+_+2;v<x;v++)if(parseInt(t[v],10)){R=1;break}if(R)for(var P=_;P>=0;P--)if(++d[P]>9&&(d[P]=0,0===P)){if(!(g<nt))return new e(Ze.from(n?at:st));g+=1,d[P]=1}}if(m=ne.fromNumber(0),y=ne.fromNumber(0),0===a)m=ne.fromNumber(0),y=ne.fromNumber(0);else if(_-h<17){var D=h;for(y=ne.fromNumber(d[D++]),m=new ne(0,0);D<=_;D++)y=(y=y.multiply(ne.fromNumber(10))).add(ne.fromNumber(d[D]))}else{var L=h;for(m=ne.fromNumber(d[L++]);L<=_-17;L++)m=(m=m.multiply(ne.fromNumber(10))).add(ne.fromNumber(d[L]));for(y=ne.fromNumber(d[L++]);L<=_;L++)y=(y=y.multiply(ne.fromNumber(10))).add(ne.fromNumber(d[L]))}var B,k,M,F,j=function(e,t){if(!e&&!t)return{high:ne.fromNumber(0),low:ne.fromNumber(0)};var r=e.shiftRightUnsigned(32),n=new ne(e.getLowBits(),0),o=t.shiftRightUnsigned(32),i=new ne(t.getLowBits(),0),a=r.multiply(o),s=r.multiply(i),l=n.multiply(o),u=n.multiply(i);return a=a.add(s.shiftRightUnsigned(32)),s=new ne(s.getLowBits(),0).add(l).add(u.shiftRightUnsigned(32)),{high:a=a.add(s.shiftRightUnsigned(32)),low:u=s.shiftLeft(32).add(new ne(u.getLowBits(),0))}}(m,ne.fromString("100000000000000000"));j.low=j.low.add(y),B=j.low,k=y,M=B.high>>>0,F=k.high>>>0,(M<F||M===F&&B.low>>>0<k.low>>>0)&&(j.high=j.high.add(ne.fromNumber(1))),r=g+6176;var U={low:ne.fromNumber(0),high:ne.fromNumber(0)};j.high.shiftRightUnsigned(49).and(ne.fromNumber(1)).equals(ne.fromNumber(1))?(U.high=U.high.or(ne.fromNumber(3).shiftLeft(61)),U.high=U.high.or(ne.fromNumber(r).and(ne.fromNumber(16383).shiftLeft(47))),U.high=U.high.or(j.high.and(ne.fromNumber(0x7fffffffffff)))):(U.high=U.high.or(ne.fromNumber(16383&r).shiftLeft(49)),U.high=U.high.or(j.high.and(ne.fromNumber(562949953421311)))),U.low=j.low,n&&(U.high=U.high.or(ne.fromString("9223372036854775808")));var $=Ze.alloc(16);return b=0,$[b++]=255&U.low.low,$[b++]=U.low.low>>8&255,$[b++]=U.low.low>>16&255,$[b++]=U.low.low>>24&255,$[b++]=255&U.low.high,$[b++]=U.low.high>>8&255,$[b++]=U.low.high>>16&255,$[b++]=U.low.high>>24&255,$[b++]=255&U.high.low,$[b++]=U.high.low>>8&255,$[b++]=U.high.low>>16&255,$[b++]=U.high.low>>24&255,$[b++]=255&U.high.high,$[b++]=U.high.high>>8&255,$[b++]=U.high.high>>16&255,$[b++]=U.high.high>>24&255,new e($)};return e.prototype.toString=function(){for(var e,t,r,n,o,i,a=0,s=new Array(36),l=0;l<s.length;l++)s[l]=0;var u,c,d,p,f,h=0,_=!1,g={parts:new Array(4)},v=[];h=0;var m=this.bytes;if(n=m[h++]|m[h++]<<8|m[h++]<<16|m[h++]<<24,r=m[h++]|m[h++]<<8|m[h++]<<16|m[h++]<<24,t=m[h++]|m[h++]<<8|m[h++]<<16|m[h++]<<24,e=m[h++]|m[h++]<<8|m[h++]<<16|m[h++]<<24,h=0,{low:new ne(n,r),high:new ne(t,e)}.high.lessThan(ne.ZERO)&&v.push("-"),(o=e>>26&31)>>3==3){if(30===o)return v.join("")+"Infinity";if(31===o)return"NaN";i=e>>15&16383,d=8+(e>>14&1)}else d=e>>14&7,i=e>>17&16383;if(u=i-6176,g.parts[0]=(16383&e)+((15&d)<<14),g.parts[1]=t,g.parts[2]=r,g.parts[3]=n,0===g.parts[0]&&0===g.parts[1]&&0===g.parts[2]&&0===g.parts[3])_=!0;else for(f=3;f>=0;f--){var y=0,b=ct(g);if(g=b.quotient,y=b.rem.low)for(p=8;p>=0;p--)s[9*f+p]=y%10,y=Math.floor(y/10)}if(_)a=1,s[h]=0;else for(a=36;!s[h];)a-=1,h+=1;if((c=a-1+u)>=34||c<=-7||u>0){if(a>34)return v.push(0),u>0?v.push("E+"+u):u<0&&v.push("E"+u),v.join("");v.push(s[h++]),(a-=1)&&v.push(".");for(var w=0;w<a;w++)v.push(s[h++]);v.push("E"),c>0?v.push("+"+c):v.push(c)}else if(u>=0)for(var A=0;A<a;A++)v.push(s[h++]);else{var E=a+u;if(E>0)for(var I=0;I<E;I++)v.push(s[h++]);else v.push("0");for(v.push(".");E++<0;)v.push("0");for(var S=0;S<a-Math.max(E-1,0);S++)v.push(s[h++])}return v.join("")},e.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},e.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},e.fromExtendedJSON=function(t){return e.fromString(t.$numberDecimal)},Object.defineProperty(e.prototype,"_bsontype",{value:"Decimal128"}),e}(),ft=pt,ht=function(){function e(){oe(this,e)}return ae(e,[{key:"toExtendedJSON",value:function(){return{$minKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"MinKey"}),e}(),_t=function(){function e(){oe(this,e)}return ae(e,[{key:"toExtendedJSON",value:function(){return{$maxKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"MaxKey"}),e}(),gt=function(){function e(t,r,n,o){oe(this,e);var i=t.split(".");2===i.length&&(n=i.shift(),t=i.shift()),this.collection=t,this.oid=r,this.db=n,this.fields=o||{}}return ae(e,[{key:"toJSON",value:function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e}},{key:"toExtendedJSON",value:function(e){e=e||{};var t={$ref:this.collection,$id:this.oid};return e.legacy?t:(this.db&&(t.$db=this.db),t=Object.assign(t,this.fields))}}],[{key:"fromExtendedJSON",value:function(t){var r=Object.assign({},t);return["$ref","$id","$db"].forEach((function(e){return delete r[e]})),new e(t.$ref,t.$id,t.$db,r)}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"DBRef"}),Object.defineProperty(e.prototype,"namespace",{get:function(){return this.collection},set:function(e){this.collection=e},configurable:!1}),e}(),vt=(()=>re.Buffer)(),mt=function(){function e(r,n){if(oe(this,e),!(null==r||"string"==typeof r||vt.isBuffer(r)||r instanceof Uint8Array||Array.isArray(r)))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");if(this.sub_type=null==n?t:n,this.position=0,null==r||r instanceof Number)void 0!==vt?this.buffer=vt.alloc(e.BUFFER_SIZE):"undefined"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE)):this.buffer=new Array(e.BUFFER_SIZE);else{if("string"==typeof r)if(void 0!==vt)this.buffer=vt.from(r);else{if("undefined"==typeof Uint8Array&&!Array.isArray(r))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");this.buffer=function(e){for(var t="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(r)}else this.buffer=r;this.position=r.length}}ae(e,[{key:"put",value:function(t){if(null!=t.length&&"number"!=typeof t&&1!==t.length)throw new TypeError("only accepts single character String, Uint8Array or Array");if("number"!=typeof t&&t<0||t>255)throw new TypeError("only accepts number in a valid unsigned byte range 0-255");var n=null;if(n="string"==typeof t?t.charCodeAt(0):null!=t.length?t[0]:t,this.buffer.length>this.position)this.buffer[this.position++]=n;else if(void 0!==vt&&vt.isBuffer(this.buffer)){var o=vt.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(o,0,0,this.buffer.length),this.buffer=o,this.buffer[this.position++]=n}else{var i=null;i=r(this.buffer)?new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE+this.buffer.length)):new Array(e.BUFFER_SIZE+this.buffer.length);for(var a=0;a<this.buffer.length;a++)i[a]=this.buffer[a];this.buffer=i,this.buffer[this.position++]=n}}},{key:"write",value:function(e,t){if(t="number"==typeof t?t:this.position,this.buffer.length<t+e.length){var n=null;if(void 0!==vt&&vt.isBuffer(this.buffer))n=vt.alloc(this.buffer.length+e.length),this.buffer.copy(n,0,0,this.buffer.length);else if(r(this.buffer)){n=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var o=0;o<this.position;o++)n[o]=this.buffer[o]}this.buffer=n}if(void 0!==vt&&vt.isBuffer(e)&&vt.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if(void 0!==vt&&"string"==typeof e&&vt.isBuffer(this.buffer))this.buffer.write(e,t,"binary"),this.position=t+e.length>this.position?t+e.length:this.position;else if(r(e)||Array.isArray(e)&&"string"!=typeof e){for(var i=0;i<e.length;i++)this.buffer[t++]=e[i];this.position=t>this.position?t:this.position}else if("string"==typeof e){for(var a=0;a<e.length;a++)this.buffer[t++]=e.charCodeAt(a);this.position=t>this.position?t:this.position}}},{key:"read",value:function(e,t){if(t=t&&t>0?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var r="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(t)):new Array(t),n=0;n<t;n++)r[n]=this.buffer[e++];return r}},{key:"value",value:function(e){if((e=null!=e&&e)&&void 0!==vt&&vt.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(void 0!==vt&&vt.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t=r(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),n=0;n<this.position;n++)t[n]=this.buffer[n];return t}return function(e,t,r){for(var n="",o=t;o<r;o++)n+=String.fromCharCode(e[o]);return n}(this.buffer,0,this.position)}},{key:"length",value:function(){return this.position}},{key:"toJSON",value:function(){return null!=this.buffer?this.buffer.toString("base64"):""}},{key:"toString",value:function(e){return null!=this.buffer?this.buffer.slice(0,this.position).toString(e):""}},{key:"toExtendedJSON",value:function(e){e=e||{};var t=vt.isBuffer(this.buffer)?this.buffer.toString("base64"):vt.from(this.buffer).toString("base64"),r=Number(this.sub_type).toString(16);return e.legacy?{$binary:t,$type:1===r.length?"0"+r:r}:{$binary:{base64:t,subType:1===r.length?"0"+r:r}}}}],[{key:"fromExtendedJSON",value:function(t,r){var n,o;return(r=r||{}).legacy?(o=t.$type?parseInt(t.$type,16):0,n=vt.from(t.$binary,"base64")):(o=t.$binary.subType?parseInt(t.$binary.subType,16):0,n=vt.from(t.$binary.base64,"base64")),new e(n,o)}}]);var t=0;function r(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}return e.BUFFER_SIZE=256,e.SUBTYPE_DEFAULT=0,e.SUBTYPE_FUNCTION=1,e.SUBTYPE_BYTE_ARRAY=2,e.SUBTYPE_UUID_OLD=3,e.SUBTYPE_UUID=4,e.SUBTYPE_MD5=5,e.SUBTYPE_USER_DEFINED=128,Object.defineProperty(e.prototype,"_bsontype",{value:"Binary"}),e}(),yt=mt,bt=(Math.pow(2,63),Math.pow(2,63),{$oid:ze,$binary:yt,$symbol:Ke,$numberInt:Ve,$numberDecimal:ft,$numberDouble:se,$numberLong:ne,$minKey:ht,$maxKey:_t,$regex:Ye,$regularExpression:Ye,$timestamp:pe});function wt(e,t,r,n){if("number"==typeof r){if(n.relaxed||n.legacy)return r;if(Math.floor(r)===r){if(r>=It&&r<=Et)return new Ve(r);if(r>=Ct&&r<=St)return new ne.fromNumber(r)}return new se(r)}if(null==r||"object"!==le(r))return r;if(r.$undefined)return null;for(var o=Object.keys(r).filter((function(e){return e.startsWith("$")&&null!=r[e]})),i=0;i<o.length;i++){var a=bt[o[i]];if(a)return a.fromExtendedJSON(r,n)}if(null!=r.$date){var s=r.$date,l=new Date;return n.legacy?"number"==typeof s?l.setTime(s):"string"==typeof s&&l.setTime(Date.parse(s)):"string"==typeof s?l.setTime(Date.parse(s)):ne.isLong(s)?l.setTime(s.toNumber()):"number"==typeof s&&n.relaxed&&l.setTime(s),l}if(null!=r.$code){var u=Object.assign({},r);return r.$scope&&(u.$scope=wt(e,null,r.$scope)),Xe.fromExtendedJSON(r)}if(null!=r.$ref||null!=r.$dbPointer){var c=r.$ref?r:r.$dbPointer;if(c instanceof gt)return c;var d=Object.keys(c).filter((function(e){return e.startsWith("$")})),p=!0;if(d.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(p=!1)})),p)return gt.fromExtendedJSON(c)}return r}function At(e,t){var r=this;return"boolean"==typeof(t=Object.assign({},{relaxed:!0,legacy:!1},t)).relaxed&&(t.strict=!t.relaxed),"boolean"==typeof t.strict&&(t.relaxed=!t.strict),JSON.parse(e,(function(e,n){return wt(r,0,n,t)}))}var Et=2147483647,It=-2147483648,St=0x8000000000000000,Ct=-0x8000000000000000;function Tt(e,t,r,n){null!=r&&"object"===le(r)&&(n=r,r=0),null==t||"object"!==le(t)||Array.isArray(t)||(n=t,t=null,r=0),n=Object.assign({},{relaxed:!0,legacy:!1},n);var o=Array.isArray(e)?Ot(e,n):Pt(e,n);return JSON.stringify(o,t,r)}function Ot(e,t){return e.map((function(e){return Nt(e,t)}))}function xt(e){var t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}function Nt(e,t){if(Array.isArray(e))return Ot(e,t);if(void 0===e)return null;if(e instanceof Date){var r=e.getTime(),n=r>-1&&r<2534023188e5;return t.legacy?t.relaxed&&n?{$date:e.getTime()}:{$date:xt(e)}:t.relaxed&&n?{$date:xt(e)}:{$date:{$numberLong:e.getTime().toString()}}}if("number"==typeof e&&!t.relaxed){if(Math.floor(e)===e){var o=e>=Ct&&e<=St;if(e>=It&&e<=Et)return{$numberInt:e.toString()};if(o)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp){var i=e.flags;return void 0===i&&(i=e.toString().match(/[gimuy]*$/)[0]),new Ye(e.source,i).toExtendedJSON(t)}return null!=e&&"object"===le(e)?Pt(e,t):e}var Rt={Binary:function(e){return new yt(e.value(),e.subtype)},Code:function(e){return new Xe(e.code,e.scope)},DBRef:function(e){return new gt(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new ft(e.bytes)},Double:function(e){return new se(e.value)},Int32:function(e){return new Ve(e.value)},Long:function(e){return ne.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_)},MaxKey:function(){return new _t},MinKey:function(){return new ht},ObjectID:function(e){return new ze(e)},ObjectId:function(e){return new ze(e)},BSONRegExp:function(e){return new Ye(e.pattern,e.options)},Symbol:function(e){return new Ke(e.value)},Timestamp:function(e){return pe.fromBits(e.low,e.high)}};function Pt(e,t){if(null==e||"object"!==le(e))throw new Error("not an object instance");var r=e._bsontype;if(void 0===r){var n={};for(var o in e)n[o]=Nt(e[o],t);return n}if("string"==typeof r){var i=e;if("function"!=typeof i.toExtendedJSON){var a=Rt[r];if(!a)throw new TypeError("Unrecognized or invalid _bsontype: "+r);i=a(i)}return"Code"===r&&i.scope?i=new Xe(i.code,Nt(i.scope,t)):"DBRef"===r&&i.oid&&(i=new gt(i.collection,Nt(i.oid,t),i.db,i.fields)),i.toExtendedJSON(t)}throw new Error("_bsontype must be a string, but was: "+le(r))}var Dt={parse:At,deserialize:function(e,t){return t=t||{},At(JSON.stringify(e),t)},serialize:function(e,t){return t=t||{},JSON.parse(Tt(e,t))},stringify:Tt};t.EJSON=Dt}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new o("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{DefaultCloud:()=>yl,InstanceCloud:()=>bl,getCloudAPI:()=>ml,getCloudInstance:()=>vl,getSDK:()=>ne,getServiceMarketAPI:()=>Gl,patchDefaultSDK:()=>ae,setDefaultSDK:()=>ie,setSDK:()=>oe});var e={};r.r(e),r.d(e,{GeoLineString:()=>Ko,GeoMultiLineString:()=>Jo,GeoMultiPoint:()=>zo,GeoMultiPolygon:()=>ti,GeoPoint:()=>Go,GeoPolygon:()=>Zo,LineString:()=>Yo,MultiLineString:()=>Vo,MultiPoint:()=>Qo,MultiPolygon:()=>ei,Point:()=>Ho,Polygon:()=>Xo,__safe_props__:()=>oi});var t={};r.r(t),r.d(t,{AggregateOperatorMap:()=>ss,AggregateSerializer:()=>hs,Decoder:()=>Ts,OperatorMap:()=>as,ProjectionSerializer:()=>Cs,QuerySerializer:()=>gs,UpdateSerializer:()=>As,aggregateOperatorToString:()=>fs,decodeInternalDataType:()=>Ni,encode:()=>vs,encodeInternalDataType:()=>xi,extractQueryOptions:()=>Ri,flattenObject:()=>Ci,flattenQueryObject:()=>Si,getProjectionDefinition:()=>Di,isConversionRequired:()=>Oi,mergeConditionAfterEncode:()=>Ti,operatorToString:()=>ps});var a=r(798),s=r.n(a),l=r(949),c=r.n(l);function d(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var p=function e(t,r){if(t===r)return t;for(var n of Object.keys(r)){var o=d(r,n),i=d(t,n),a=void 0;"object"==typeof o?e(a=i||{},o):a=o,t[n]=a}return t},f=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),h=e=>"object"===f(e),_=e=>"string"===f(e),g=e=>"number"===f(e),v=e=>"function"==typeof e,w=e=>Array.isArray(e),A=e=>"date"===f(e),E=e=>"regexp"===f(e),I=e=>e&&"symbol"===f(e._internalType),S={"-1":"",UNKNOWN_ERROR:-1,"-401001":"api permission denied",SDK_API_PERMISSION_DENIED:-401001,"-401002":"api parameter error",SDK_API_PARAMETER_ERROR:-401002,"-401003":"api parameter type error",SDK_API_PARAMETER_TYPE_ERROR:-401003,"-402001":"circular reference detected",SDK_DATABASE_CIRCULAR_REFERENCE:-402001,"-402002":"realtime listener init watch fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:-402002,"-402003":"realtime listener reconnect ws fail",SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL:-402003,"-402004":"realtime listener rebuild watch fail",SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL:-402004,"-402005":"realtime listener close watch fail",SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL:-402005,"-402006":"realtime listener receive server error msg",SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG:-402006,"-402007":"realtime listener receive invalid server data",SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA:-402007,"-402008":"realtime listener websocket connection error",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR:-402008,"-402009":"realtime listener websocket connection closed",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED:-402009,"-402010":"realtime listener check last fail",SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL:-402010,"-402011":"realtime listener unexpected fatal error",SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR:-402011,"-402012":"realtime listener init ws fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL:-402012,"-403001":"max upload file size exceeded",SDK_STORAGE_EXCEED_MAX_UPLOAD_SIZE:-403001,"-403002":"internal server error: empty upload url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL:-403002,"-403003":"internal server error: empty download url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL:-403003,"-404001":"empty call result",SDK_FUNCTIONS_EMPTY_CALL_RESULT:-404001,"-404002":"empty event id",SDK_FUNCTIONS_EMPTY_EVENT_ID:-404002,"-404003":"empty poll url",SDK_FUNCTIONS_EMPTY_POLL_URL:-404003,"-404004":"empty poll result json",SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON:-404004,"-404005":"exceed max poll retry",SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY:-404005,"-404006":"empty poll result base resp",SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP:-404006,"-404007":"poll result base resp ret abnormal",SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-404007,"-404008":"poll result status code error",SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR:-404008,"-404009":"poll error",SDK_FUNCTIONS_POLL_ERROR:-404009,"-404010":"result expired",SDK_FUNCTIONS_POLL_RESULT_EXPIRED:-404010,"-404011":"cloud function execution error",SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR:-404011,"-404012":"polling exceed max timeout retry",SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY:-404012,"-404013":"polling exceed max system error retry",SDK_FUNCTIONS_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-404013,"-405001":"empty call result",SDK_CONTAINER_EMPTY_CALL_RESULT:-405001,"-405002":"empty event id",SDK_CONTAINER_EMPTY_EVENT_ID:-405002,"-405003":"empty poll url",SDK_CONTAINER_EMPTY_POLL_URL:-405003,"-405004":"empty poll result json",SDK_CONTAINER_EMPTY_POLL_RESULT_JSON:-405004,"-405005":"exceed max poll retry",SDK_CONTAINER_EXCEED_MAX_POLL_RETRY:-405005,"-405006":"empty poll result base resp",SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP:-405006,"-405007":"poll result base resp ret abnormal",SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-405007,"-405008":"poll result status code error",SDK_CONTAINER_POLL_RESULT_STATUS_CODE_ERROR:-405008,"-405009":"poll error",SDK_CONTAINER_POLL_ERROR:-405009,"-405010":"result expired",SDK_CONTAINER_POLL_RESULT_EXPIRED:-405010,"-405012":"polling exceed max timeout retry",SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY:-405012,"-405013":"polling exceed max system error retry",SDK_CONTAINER_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-405013,"-405014":"cannot download result (cdn)",SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL:-405014,"-601001":"system error",WX_SYSTEM_ERROR:-601001,"-601002":"system args error",WX_SYSTEM_ARGS_ERROR:-601002,"-601003":"system network error",WX_SYSTEM_NETWORK_ERROR:-601003,"-601004":"api permission denied",WX_API_PERMISSION_DENIED:-601004,"-601005":"invalid cloudID",WX_INVALID_CLOUDID:-601005,"-601006":"cloudID expired",WX_CLOUDID_EXPIRED:-601006,"-601007":"cloudID and calling user does not match",WX_CLOUDID_USER_NOT_MATCH:-601007,"-601008":"server-side request timedout",WX_SERVER_REQUEST_TIMEOUT:-601008,"-601009":"missing mobile phone",WX_MISSING_MOBILE_PHONE:-601009,"-601010":"no write permission",WX_NO_WRITE_PERMISSION:-601010,"-601011":"no privilege permission",WX_NO_PRIVILEGE_PERMISSION:-601011,"-601012":"unauthorized env",WX_UNAUTHORIZED_ENV:-601012,"-601013":"no multiend permission",WX_NO_MULTIEND_PERMISSION:-601013,"-601015":"access denied (cloudfunction cloudbase_auth returns empty errCode)",WX_CLOUDBASE_AUTH_RETURN_EMPTY_ERRCODE:-601015,"-601016":"missing env auth info",WX_MISSING_ENV_AUTH_INFO:-601016,"-601017":"access denied (cloudbase_auth returns non-zero errCode)",WX_CLOUDBASE_AUTH_RETURN_NON_ZERO_ERRCODE:-601017,"-602018":"unauthorized API",WX_UNAUTHORIZED_API:-601018,"-602001":"database query result size exceed limit (1MB)",WX_DATABASE_QUERY_SIZE_EXCEED_LIMIT:-602001,"-604001":"cloudfunction result size exceed limit (1MB)",WX_CLOUDFUNCTION_RESULT_SIZE_EXCEED_LIMIT:-604001,"-501001":"resource system error",TCB_RESOURCE_SYSTEM_ERROR:-501001,"-501002":"resource server timeout",TCB_RESOURCE_SERVER_TIMEOUT:-501002,"-501003":"exceed request limit",TCB_EXCEED_REQUEST_LIMIT:-501003,"-501004":"exceed concurrent request limit",TCB_EXCEED_CONCURRENT_REQUEST_LIMIT:-501004,"-501005":"invalid env",TCB_INVALID_ENV:-501005,"-501006":"invalid common parameters",TCB_INVALID_COMMON_PARAM:-501006,"-501007":"invalid parameters",TCB_INVALID_PARAM:-501007,"-501008":"invalid request source",TCB_INVALID_REQUEST_SOURCE:-501008,"-501009":"resource not initialized",TCB_RESOURCE_NOT_INITIALIZED:-501009,"-501010":"tencentcloud key signature verification fail",TCB_KEY_SIGNATURE_VERIFICATION_FAIL:-501010,"-501011":"invalid env status",TCB_INVALID_ENV_STATUS:-501011,"-501012":"invalid api name",TCB_INVALID_API_NAME:-501012,"-501013":"request data size exceeds limit (5M)",TCB_REQ_DATA_EXCEED_LIMIT_5M:-501013,"-501014":"upload file size exceeds limit (5M)",TCB_UPLOAD_FILE_SIZE_EXCEED_LIMIT_5M:-501014,"-501023":"permission denied",TCB_PERMISSION_DENIED:-501023,"-502001":"database request fail",TCB_DB_REQUEST_FAIL:-502001,"-502002":"database invalid command",TCB_DB_INVALID_COMMAND:-502002,"-502003":"database permission denied",TCB_DB_PERMISSION_DENIED:-502003,"-502004":"database exceed collection limit",TCB_DB_EXCEED_COLLECTION_LIMIT:-502004,"-502005":"database collection not exists",TCB_DB_COLLECTION_NOT_EXISTS:-502005,"-503001":"storage request fail",TCB_STORAGE_REQUEST_FAIL:-503001,"-503002":"storage permission denied",TCB_STORAGE_PERMISSION_DENIED:-503002,"-503003":"storage file not exists",TCB_STORAGE_FILE_NOT_EXISTS:-503003,"-503004":"storage invalid sign parameter",TCB_STORAGE_INVALID_SIGN_PARAM:-503004,"-504001":"functions request fail",TCB_FUNCTIONS_REQUEST_FAIL:-504001,"-504002":"functions execute fail",TCB_FUNCTIONS_EXEC_FAIL:-504002};class C extends Error{constructor(e){super(e.errMsg),this.errCode=-1,this.errMsg=void 0,this.requestID=void 0,Object.defineProperties(this,{message:{get(){return`errCode: ${this.errCode} ${S[this.errCode]||""} | errMsg: `+this.errMsg},set(e){this.errMsg=e}}}),this.errCode=e.errCode||-1,this.errMsg=e.errMsg}get message(){return`errCode: ${this.errCode} | errMsg: `+this.errMsg}set message(e){this.errMsg=e}}function T(e){return e&&e instanceof Error&&_(e.errMsg)}function O(e,t){return N(e,t)}function N(e,t){if(e){if(T(e))return e;var r,n=`${t}:fail `;if(e instanceof Error)e.message=`${n}${e.message}`,e.stack=e.stack?e.stack.slice(0,7)+n+e.stack.slice(7):e.stack,(r=e).errCode=-1;else if("string"==typeof e)(r=new Error(`${n}${e}`)).errCode=-1;else{var o=e.errMsg||"";(r=new Error(`${t}:fail ${e.errCode} ${S[e.errCode]||""}. ${o}`)).errCode=e.errCode||-1}return r.errMsg=r.message+"",r}var i=new Error(`${t}:fail`);return i.errCode=-1,i.errMsg=i.message+"",i}class R extends Error{constructor(e,t){super(e),this.type="timeout",this.payload=void 0,this.generic=!0,this.payload=t}}var P=e=>"timeout"===e.type;class D extends Error{constructor(e,t){super(e),this.type="cancelled",this.payload=void 0,this.generic=!0,this.payload=t}}var L,B=e=>"cancelled"===e.type,k={fake:!0,surroundThirdByTryCatch:(e,t)=>function(...r){return $((()=>{try{return e.apply(e,r)}catch(r){throw console.error(JSON.stringify(r)+`; ${t}\n`+r.stack),console.error(e.toString()),r}}),t)},reportIDKey:(...e)=>{},reportIDKeyDirectly:(...e)=>{},reportKeyValue:(...e)=>{}},M=!1,F=10;function j(){try{return M?i:F<=0?L:(F--,i.surroundThirdByTryCatch,M=!0,L=i)}catch(e){return L=k}}var U={surroundThirdByTryCatch:(e,t)=>j().surroundThirdByTryCatch(e,t),reportIDKey:e=>j().reportIDKey(e),reportIDKeyDirectly:e=>j().reportIDKeyDirectly(e),reportKeyValue:e=>j().reportKeyValue(e)};function $(e,t=""){try{return e()}catch(e){if(T(e))return e.errMsg+=t,e;var r=(e?e.toString():"")+t;return new C({errMsg:r})}}function W(e,t=""){return function(...r){return $((()=>e.apply(e,r)),t)}}function q(e){var t=e.param;t&&(t.success&&v(t.success)&&(t.success=U.surroundThirdByTryCatch(t.success,`at api ${e.apiName} success callback function`)),t.fail&&v(t.fail)&&(t.fail=U.surroundThirdByTryCatch(t.fail,`at api ${e.apiName} fail callback function`)),t.complete&&v(t.complete)&&(t.complete=U.surroundThirdByTryCatch(t.complete,`at api ${e.apiName} complete callback function`)))}function H(e,t,r){t.complete&&v(t.complete)&&W(t.complete,`at api ${e} complete callback function;`)(r)}function G(e,t,r){!function(e,t,r){t.success&&v(t.success)&&W(t.success,`at api ${e} success callback function;`)(r)}(e,t,r),H(e,t,r)}function Q(e,t,r){!function(e,t,r){t.fail&&v(t.fail)&&W(t.fail,`at api ${e} fail callback function;`)(r)}(e,t,r),H(e,t,r)}function z(e){return e&&(e.success||e.fail||e.complete)}function Y(e,t,r="parameter",n=C){var o=function(e,t,r="parameter"){var n=function e(t,r,n){var o=f(t),i=f(r);if("string"===i)return o!==r?`${n} should be ${r} instead of ${o};`:"";if(o!==i)return`${n} should be ${i} instead of ${o}; `;var a="";switch(o){case"object":for(var s in r)a+=e(t[s],r[s],`${n}.${s}`);break;case"array":for(var l=0;l<r.length;l++)a+=e(t[l],r[l],`${n}[${l}]`)}return a}(e,t,r);return{passed:!n,reason:n}}(e,t,r);if(!o.passed)throw new n({errCode:S.SDK_API_PARAMETER_TYPE_ERROR,errMsg:o.reason})}function K(e,t,r,n=C){if(null==e)throw new n({errCode:S.SDK_API_PARAMETER_ERROR,errMsg:`parameter ${t} of function ${r} must be provided`})}function V({name:e,input:t,max:r,maxWording:n="",ErrorClass:o=C}){if(t.length>r)throw new o({errCode:S.SDK_API_PARAMETER_ERROR,errMsg:`${e} size must be less than ${n||r}`})}function J({target:e,name:t,ErrorClass:r=C}){if(0===Object.keys(e).length)throw new r({errCode:S.SDK_API_PARAMETER_ERROR,errMsg:`${t} must not be empty`})}function X(e,t=!1){if(t)return function(e){switch(f(e)){case"object":return s()({},e);case"array":return e.slice();case"number":return e instanceof Number?new Number(e):e;case"string":return e instanceof String?new String(e):e;case"boolean":return e instanceof Boolean?new Boolean(e):e;case"date":return new e.constructor(+e);case"map":return new Map(e);case"set":return new Set(e);default:return e}}(e);if((e=>{if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t})(e))return s()({},e);switch(f(e)){case"object":default:return e;case"array":return e.slice()}}var Z,ee=new WeakMap,te=[];function re(){var e,t=null!==(e=Z)&&void 0!==e?e:void 0!==u?u:void 0;return t?te.reduce(((e,t)=>t(e)),t):t}var ne=e=>{if(!e)return re();var t=ee.get(e);return t&&t||re()},oe=(e,t)=>{ee.set(e,t)},ie=e=>{Z=e},ae=e=>{te.push((t=>Object.assign({},t,e)))},se=(e,t)=>{var r=null,n=!1,o=()=>{r?n=!0:(e(),r=setTimeout((()=>{clearTimeout(r),r=null,n&&(n=!1,o())}),t))};return o};function le(e){if(void 0===e||!e.timestamp||!e.expires_in)return 0;var t=Date.now()-e.timestamp,r=.8*e.expires_in,n=Math.min(e.timestamp,Date.now())+1e3*r;return t>1e3*r?Date.now()+1e3*r:n}var ue,ce=void 0!==b?b:void 0,de=(e=0)=>new Promise((t=>setTimeout(t,e))),pe=!1,fe=[],he=()=>new Promise(((e,t)=>{if(ue)e(ue);else{0;try{ne().wx.getNetworkType({success:t=>{ue={networkType:t.networkType,isConnected:"none"!==t.networkType},e(ue),pe||(ne().wx.onNetworkStatusChange((e=>{if(ue.networkType=e.networkType,ue.isConnected=e.isConnected,e.isConnected&&fe.length)for(;fe.length;)try{fe.shift()()}catch(e){}})),pe=!0)},fail:t})}catch(e){t(e)}}}));var _e,ge=!1,ve=new Set;function me(e){try{ne().wx.onAppShow&&(ge||(!function(){var e=ne().wx;e.onAppShow&&e.onAppHide&&(e.onAppShow((()=>{for(var e of("visible",ve))try{e("show")}catch(e){0}})),e.onAppHide((()=>{for(var e of("hidden",ve))try{e("hide")}catch(e){0}})))}(),ge=!0),ve.size>50&&ve.clear(),ve.add(e))}catch(e){}}function ye(e){ve.delete(e)}function be(){if(_e)return _e;var e=ne().wx;return _e=e.getSystemInfoSync()}var we,Ae=!1,Ee=void 0;function Ie(e=500,t={}){if(ne().private_getBackgroundFetchData&&!t.pluginId){if(Ee)return Ee;if(we)return we.then((()=>Ee));if(!Ae){Ae=!0;var r=Date.now(),n=Yt();return we=Promise.race([de(e).then((()=>({error:"bg fetch timeout"}))),new Promise(((e,t)=>{ne().private_getBackgroundFetchData({fetchType:0,success:t=>{try{t||e({error:"empty"}),(Ee=JSON.parse(t.fetchedData)).expiresTs=le(Ee),e(Ee),Vt({apiName:"private_getBackgroundFetchData",apiStartTime:r,apiEndTime:Date.now(),warmStartTime:n})}catch(t){e({error:t})}},fail:t=>{e({error:t})}})}))]),Ee?(null==ce||ce.log("private_getBackgroundFetchData (cloud) (sync)",JSON.stringify(Ee)),Ee):we.then((e=>(we=void 0,null==ce||ce.log("private_getBackgroundFetchData (cloud)",JSON.stringify(e)),e.error?void 0:e)))}}}function Se(e){try{return JSON.parse(e)}catch(t){return e}}function Ce(e){return encodeURIComponent(function(e){try{return decodeURIComponent(e)}catch(t){return e}}(e))}var Te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Oe(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,o=0;o<n;o++)t+=String.fromCharCode(r[o]);return function(e){for(var t,r,n=String(e),o="",i=0,a=Te;n.charAt(0|i)||(a="=",i%1);o+=a.charAt(63&t>>8-i%1*8)){if((r=n.charCodeAt(i+=3/4))>255)throw new Error('"btoa" failed');t=t<<8|r}return o}(t)}function xe(e){for(var t=function(e){var t=String(e).replace(/=+$/,""),r="";if(t.length%4==1)throw new Error('"atob" failed');for(var n,o,i=0,a=0;o=t.charAt(a++);~o&&(n=i%4?64*n+o:o,i++%4)?r+=String.fromCharCode(255&n>>(-2*i&6)):0)o=Te.indexOf(o);return r}(e),r=t.length,n=new Uint8Array(r),o=0;o<r;o++)n[o]=t.charCodeAt(o);return n.buffer}function Ne(e){return Be(new Uint8Array(e))}function Re(e){return function(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return new Uint8Array(t)}(e).buffer}var Pe,De,Le,Be=(Pe=new Array(128),De=String.fromCodePoint||String.fromCharCode,Le=[],function(e){var t,r,n=e.length;Le.length=0;for(var o=0;o<n;)(r=e[o++])<=127?t=r:r<=223?t=(31&r)<<6|63&e[o++]:r<=239?t=(15&r)<<12|(63&e[o++])<<6|63&e[o++]:String.fromCodePoint?t=(7&r)<<18|(63&e[o++])<<12|(63&e[o++])<<6|63&e[o++]:(t=63,o+=3),Le.push(Pe[t]||(Pe[t]=De(t)));return Le.join("")});function ke(e,{method:t,headers:r,body:n}){return new Promise(((o,i)=>{ne()._requestSkipCheckDomain({url:e,method:t,header:r,data:n,success:o,fail:i})}))}var Me=r(77),Fe=ce,je=new Set(["tcbapi_init","tcbapi_get_service_info"]);var Ue=new class{constructor(){this._running=0,this._onIdleCallbacks=[],this._idleTriggerTimer=void 0}get running(){return this._running}incrementRunning(e=1){this._running+=e,this._idleTriggerTimer&&clearTimeout(this._idleTriggerTimer)}decrementRunning(e=1){this._running-=e,this._running<0&&(this._running=0),this._running<=0&&this._onIdleCallbacks.length&&(this._idleTriggerTimer=setTimeout((()=>{if(this._idleTriggerTimer=null,this._onIdleCallbacks.length){var e=this._onIdleCallbacks.shift();e&&e()}}),50))}onceIdle(e){this._running>0?this._onIdleCallbacks.push(e):e()}};function $e(e,t={}){if(t.fireOnIdle&&Ue.running>0)return new Promise(((r,n)=>{Ue.onceIdle(c()((function*(){try{var o=yield $e(e,t);r(o)}catch(e){n(e)}})))}));if(t.onFire)try{t.onFire()}catch(e){}return new Promise(((r,n)=>{var o,i,a,l,u,c,d,p;(Ue.incrementRunning(),null!==(o=e.cloud)&&void 0!==o&&o.plugins)&&(p=`https://${e.cloud.plugins.reduce(((e,t)=>t.getMetadata(e)),{}).host||"servicewechat.com"}/wxa-qbase/jsoperatewxdata`,e=e.cloud.plugins.reduce(((t,r)=>r.beforeTunnelRequest(e)),e)||e);ne((e.cloud||t.cloud||{}).identifiers).invokeOperateWXData({appid:(null===(i=e.cloud)||void 0===i||null===(a=i.instanceOptions)||void 0===a?void 0:a.resourceAppid)||(null===(l=e.cloud)||void 0===l?void 0:l.config.appid),accessToken:null===(u=e.cloud)||void 0===u||null===(c=u.authStorage)||void 0===c?void 0:c.getItem("access_token"),webRequest:null===(d=e.cloud)||void 0===d?void 0:d.webRequest,url:p,apiName:e.apiName||"qbase_commapi",reqData:e.data,requestInQueue:!1,success:o=>{var i;o=(null===(i=e.cloud)||void 0===i?void 0:i.plugins.reduce(((e,t)=>t.afterTunnelRequest(e)),o))||o;var a=s()(s()({},o),{},{data:o.data});if(o.data)try{var l=o.data;if(l.baseresponse&&0!==l.baseresponse.errcode){var u=new C({errCode:l.baseresponse.errcode,errMsg:l.baseresponse.errmsg});return void n(u)}a=s()(s()({},o),{},{data:l})}catch(e){var c=new C({errMsg:e&&e.toString()});return void n(c)}else if(t&&t.requireDataNotEmpty){var d=new C({errCode:o.errCode,errMsg:`error empty internal server response, ${o.errMsg}`});return void n(d)}r(a)},fail:e=>{if(e&&e.errMsg)if(e.errMsg.includes("invalid scope")){var t="invalid scope 没有权限，请先开通云服务";(e=new Error(t)).errMsg=t,e.operateWXDataFail=!0}else{var r=e.errMsg.replace(/^operateWXData:fail /,"");(e=new Error(r)).errMsg=r,e.operateWXDataFail=!0}n(e)},complete:function(){e.complete&&e.complete.apply(null,arguments),Ue.decrementRunning()}})}))}function We(e){var{cloud:t}=e;return function(){var e=c()((function*(e){var r=t.isInstance?s()(s()({},t.instanceOptions),{},{appid:t.instanceOptions.resourceAppid,env:t.instanceOptions.resourceEnv}):{identityless:"sdk"===t.runtimeInfo.platform||void 0,appid:"sdk"===t.runtimeInfo.platform?t.config.appid:void 0,env:e.env||("sdk"===t.runtimeInfo.platform?t.config.env:void 0)},n={qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:r,qbase_meta:t.getMetaData(),cli_req_id:`${+new Date}_${Math.random()}`};if(e.stdpriv&&!je.has(e.apiName)){var o=yield function(e,t){return qe.apply(this,arguments)}(t,n).catch((e=>{if(e&&(-9999===e.errCode||-9998===e.errCode))return $e({apiName:"qbase_commapi",data:n,cloud:t}).then((t=>s()(s()({},t),{},{channelType:-9998===e.errCode?0:2})));throw e}));return o}return $e({apiName:"qbase_commapi",data:n,cloud:t})}));return function(t){return e.apply(this,arguments)}}()}function qe(){return qe=c()((function*(e,t){var r=e.serviceEndpoint.getEndpointSync("container");if(null==r||!r.cloudServiceUrl)throw{errCode:-9998,errMsg:"cloudServiceUrl not found"};null==Fe||Fe.info("cloud stdpriv begin",t);var n=ne(e.identifiers),o={"X-WX-ENCRYPTION-VERSION":2,"X-WX-ENCRYPTION-TIMESTAMP":r.timestamp+"","X-WX-COMPRESSION":"snappy","X-WX-LIB-BUILD-TS":1677058640236,"X-WX-RESPONSE-CONTENT-ACCEPT-ENCODING":"JSON","Content-Type":"application/octet-stream","X-WX-REQUEST-CONTENT-ENCODING":"PB"},i=new Uint8Array(xe(r.key)),{data:a}=Me.V1.encodeStdPrivRequest(i,{cliReqId:t.cli_req_id,qbaseApiName:t.qbase_api_name,qbaseMeta:{filterUserInfo:t.qbase_meta.filter_user_info,sdkVersion:t.qbase_meta.sdk_version,sessionId:t.qbase_meta.session_id},qbaseOptions:{env:t.qbase_options.env},qbaseReq:t.qbase_req}),l=Ot({rdm:e.getConfig().rdm});return new Promise(((e,t)=>{n._requestSkipCheckDomain({url:l,method:"POST",header:o,data:a.buffer,dataType:"arraybuffer",responseType:"arraybuffer",enableHttp2:!0,success:r=>{try{for(var n in null==Fe||Fe.info("res",r),r.header)if("x-nws-log-uuid"===n.toLowerCase()&&(null==Fe||Fe.log(`[cloud.callContainer] x-nws-log-uuid ${r.header[n]}`)),"x-wx-system-error"===n.toLowerCase()){var o=Number(r.header[n]);return 85104===o&&Tt.invalidateService("container"),void t(new Error(`wx system error. code: ${o}`))}if(200===r.statusCode){var a=r.data,s=!1;for(var l in r.header)"x-wx-compression"===l.toLowerCase()&&"snappy"===r.header[l]&&(s=!0);var u=Me.V1.decodeStdPrivResponse(i,new Uint8Array(a),s);e({errCode:0,errMsg:"",data:u,profile:r.profile,channelType:1})}else t({errCode:-9999,errMsg:"system conn status not 200"})}catch(e){t(new Error(`error while processing internal response ${e}`))}},fail:e=>{t(s()(s()({},e),{},{errCode:-9999,errMsg:e.errMsg}))}})}))})),qe.apply(this,arguments)}var He=$e;var Ge=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Qe="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,ze="object"==typeof self&&self&&self.Object===Object&&self,Ye=Qe||ze||o("return this")(),Ke=function(){return Ye.Date.now()},Ve=/\s/;var Je=function(e){for(var t=e.length;t--&&Ve.test(e.charAt(t)););return t},Xe=/^\s+/;var Ze=function(e){return e?e.slice(0,Je(e)+1).replace(Xe,""):e},et=Ye.Symbol,tt=Object.prototype,rt=tt.hasOwnProperty,nt=tt.toString,ot=et?et.toStringTag:void 0;var it=function(e){var t=rt.call(e,ot),r=e[ot];try{e[ot]=void 0;var n=!0}catch(e){}var o=nt.call(e);return n&&(t?e[ot]=r:delete e[ot]),o},at=Object.prototype.toString;var st=function(e){return at.call(e)},lt=et?et.toStringTag:void 0;var ut=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":lt&&lt in Object(e)?it(e):st(e)};var ct=function(e){return null!=e&&"object"==typeof e};var dt=function(e){return"symbol"==typeof e||ct(e)&&"[object Symbol]"==ut(e)},pt=/^[-+]0x[0-9a-f]+$/i,ft=/^0b[01]+$/i,ht=/^0o[0-7]+$/i,_t=parseInt;var gt=function(e){if("number"==typeof e)return e;if(dt(e))return NaN;if(Ge(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ge(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Ze(e);var r=ft.test(e);return r||ht.test(e)?_t(e.slice(2),r?2:8):pt.test(e)?NaN:+e},vt=Math.max,mt=Math.min;var yt=function(e,t,r){var n,o,i,a,s,l,u=0,c=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var r=n,i=o;return n=o=void 0,u=t,a=e.apply(i,r)}function h(e){return u=e,s=setTimeout(g,t),c?f(e):a}function _(e){var r=e-l;return void 0===l||r>=t||r<0||d&&e-u>=i}function g(){var e=Ke();if(_(e))return v(e);s=setTimeout(g,function(e){var r=t-(e-l);return d?mt(r,i-(e-u)):r}(e))}function v(e){return s=void 0,p&&n?f(e):(n=o=void 0,a)}function m(){var e=Ke(),r=_(e);if(n=arguments,o=this,l=e,r){if(void 0===s)return h(l);if(d)return clearTimeout(s),s=setTimeout(g,t),f(l)}return void 0===s&&(s=setTimeout(g,t)),a}return t=gt(t)||0,Ge(r)&&(c=!!r.leading,i=(d="maxWait"in r)?vt(gt(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p),m.cancel=function(){void 0!==s&&clearTimeout(s),u=0,n=l=o=s=void 0},m.flush=function(){return void 0===s?a:v(Ke())},m},bt=/https:\/\/servicewechat\.com/,wt={},At={},Et={},It="servicewechat.com",St=!1,Ct=`${Math.random()}_${Date.now()}`;void 0!==y&&y.onLoad((()=>{Ct=`${Math.random()}_${Date.now()}`}));class Tt{constructor(e){this.identifiers=e,this._tunnelRequest=void 0,this._meta=void 0}setMetaData(e){this._meta=e}setTunnelRequest(e){this._tunnelRequest=e}getEndpointSync(e){var t=wt[e];if("container"===e){if(null!=t&&t.url&&null!=t&&t.expiresTs&&Date.now()<t.expiresTs)return t;this.getEndpoint(e)}}getEndpoint(e){var t=this;return c()((function*(){var r=wt[e];return"container"===e?null!=r&&r.url&&null!=r&&r.expiresTs&&Date.now()<r.expiresTs-3e4?r:t.refreshContainerServiceEndpoint():null}))()}processServiceEndpoint(e){var t=this;return c()((function*(){var r,n=le(e);Xt(e.token,"1"),It=(null==wt||null===(r=wt.container)||void 0===r?void 0:r.domain)||"servicewechat.com",function(){Pt.apply(this,arguments)}(),Lt(),clearTimeout(Et.container),Et.container=setTimeout((()=>{t.refreshContainerServiceEndpoint()}),n-Date.now())}))()}refreshContainerServiceEndpoint(){var e=this;return c()((function*(){return At.container||(wt.container&&Tt.invalidateService("container"),clearTimeout(Et.container),At.container=new Promise(function(){var t=c()((function*(t,r){if(ne().private_getBackgroundFetchData&&!St){St=!0;var n,o,i=Ie(500,e.identifiers);if(i&&!i.url_info&&(i=yield i),i&&i.expiresTs>Date.now()&&i.url_info)return wt.container={url:null!==(n=i.url_info)&&void 0!==n&&n.cloudrun_url?`${i.url_info.cloudrun_url}?token=${i.token}`:`https://${i.domain}/wxa-qbase/container_service?token=${i.token}`,cloudServiceUrl:null!==(o=i.url_info)&&void 0!==o&&o.cloudbase_url?`${i.url_info.cloudbase_url}?token=${i.token}`:void 0,domain:i.domain||"servicewechat.com",token:i.token,http:!0,key:i.key,timestamp:i.timestamp,expiresTs:i.expiresTs},e.processServiceEndpoint(i),t(wt.container),void delete At.container}for(var a=[],s=0;s<3;s++)try{var l,u,c=Date.now(),d=be(),p=(e._tunnelRequest?yield e._tunnelRequest({apiName:"tcbapi_get_service_info",serializedReqData:JSON.stringify({client_random:Ct,system:d.system,wx_app_version:d.version})}):yield He({apiName:"qbase_commapi",data:{qbase_api_name:"tcbapi_get_service_info",qbase_req:JSON.stringify({client_random:Ct,system:d.system,wx_app_version:d.version}),qbase_options:{},qbase_meta:e._meta,cli_req_id:`${+new Date}_${Math.random()}`}})).data;if(Date.now()-c>1e3*p.expires_in){a.push(`result already expired (startTs ${c} resultTs ${Date.now()})`);continue}var f=le(p),h=p.domain||"servicewechat.com";return wt.container={url:null!==(l=p.url_info)&&void 0!==l&&l.cloudrun_url?`${p.url_info.cloudrun_url}?token=${p.token}`:`https://${h}/wxa-qbase/container_service?token=${p.token}`,cloudServiceUrl:null!==(u=p.url_info)&&void 0!==u&&u.cloudbase_url?`${p.url_info.cloudbase_url}?token=${p.token}`:void 0,domain:h,token:p.token,http:p.http,key:p.key,timestamp:p.timestamp,ip:p.ip,vip:p.vip,expiresTs:f},e.processServiceEndpoint(p),t(wt.container),void delete At.container}catch(e){a.push(e+"")}r(`get container service endpoints errors: ${a.join("\n")}`),delete At.container}));return function(e,r){return t.apply(this,arguments)}}())),At.container}))()}static invalidateService(e){delete wt[e]}}function Ot(e){var t=wt.container;if(t&&t.cloudServiceUrl)return e.rdm?t.cloudServiceUrl.replace(bt,"https://wxardm.weixin.qq.com"):t.cloudServiceUrl}var xt=!1,Nt=!1,Rt=0;function Pt(){return(Pt=c()((function*(){if(!xt){xt=!0;var e=()=>{xt&&setTimeout(c()((function*(){yield Bt(),e()})),2e4)};if(e(),!Nt){var t;Nt=!0;var r=ne();null!==(t=r.wx)&&void 0!==t&&t.onAppHide&&r.wx.onAppHide((()=>{xt=!1}))}return Bt()}}))).apply(this,arguments)}var Dt=0,Lt=()=>{Dt=Date.now()},Bt=yt((()=>new Promise((e=>{if(!(Date.now()-Dt<3e4)){var t=Date.now(),r=!/^\d+/.test(It);ne()._requestSkipCheckDomain({url:`${r?"https":"http"}://${It}/wxa-qbase/keepalive`,header:r?{}:{host:"servicewechat.com"},method:"GET",dataType:"text",enableHttp2:r,success:()=>{e(),Rt++%4==0&&er(22990,1,["privateHttpKeepAlive",It,t,Date.now(),Date.now()-t].join(","))},fail:()=>{e()}})}}))),2e4),kt=m;var Mt=kt,Ft=()=>"devtools"===kt.platform,jt=!1,Ut=[],$t=Date.now(),Wt=Date.now(),qt="unknown";Mt.onReady((()=>{$t=Date.now(),Wt=Date.now()}));var Ht,Gt,Qt,zt,Yt=()=>Wt,Kt=()=>{for(var e of Ut)try{e()}catch(e){0}Ut=[]},Vt=e=>{setTimeout((()=>{try{var t;if(!(e=>!(e.tunnelStartTime&&e.tunnelEndTime&&e.tunnelEndTime<e.tunnelStartTime||!(e.apiStartTime&&e.apiEndTime&&e.apiEndTime>e.apiStartTime)))(e))return;if(!jt&&Ut.length<100)return void Ut.push(Vt.bind(null,e));var r=e.apiEndTime-e.apiStartTime,n=e.tunnelEndTime?e.tunnelEndTime-e.tunnelStartTime:0,o=[0,e.apiName,r,n,(e.pollStartTime&&e.pollEndTime&&e.pollEndTime>e.pollStartTime?e.pollEndTime-e.pollStartTime:0)||0,qt,e.tunnelTimeNoCSNetCost?r-e.tunnelTimeNoCSNetCost:0,e.tunnelTimeNoCSNetCost?n-e.tunnelTimeNoCSNetCost:0,e.funcExecTime?e.funcExecTime:0,null!==(t=e.channelType)&&void 0!==t?t:0,e.funcName||"",e.apiStartTime-$t,void 0!==e.warmStartTime?e.apiStartTime-e.warmStartTime:0];U.fake?er(16588,6,o.join(",")):U.reportKeyValue({key:"CloudReport",value:o.join(","),force:!0})}catch(e){}}))},Jt=(e,t,r,n)=>{U.reportIDKeyDirectly({id:e,key:t,force:r,immediately:n})},Xt=(e,t)=>(Ht=e,Gt=t),Zt=[],er=(e,t,r)=>{Zt.push({log_id:e,version:t,user_log_list:r}),Ht&&tr()},tr=se((()=>{ne()._requestSkipCheckDomain({url:`https://servicewechat.com/wxa-qbase/report?token=${Ht}&v=${Gt}`,method:"POST",header:{},enableHttp2:!0,dataType:"json",data:JSON.stringify({report_info_list:Zt}),success:e=>{for(var t in e.header)"x-wx-system-error"===t.toLocaleLowerCase()&&"85104"===e.header[t]&&Tt.invalidateService("container")}}),Zt=[],Bt()}),3e4),rr=(e,t)=>{var r=v(e);function n(...n){if(t.samplePicker&&!t.samplePicker.next())return r?e.apply(this,n):e;var i=Date.now(),a=!0;try{var s,l;if(null!==(s=t.condition)&&void 0!==s&&s.emptyKey&&t.timing[t.startKey])return r?e.apply(this,n):e;if(r){var u=e.apply(this,n);if("promise"!==f(u))return a=!1,u;l=u}else l=e;return l.then((()=>o(i))).catch((()=>o(i))),l}catch(e){throw a=!1,e}finally{a||o(i)}}function o(e){t.timing[t.startKey]=e,t.timing[t.endKey]=Date.now(),t.autoReport&&Vt(s()(s()({},t.timing),{},{apiName:t.autoReport}))}return r?n:n()},nr=(Qt=10,zt=!0,function*(){for(var e=()=>parseInt(Math.round(2*Math.random()*Qt),10),t=zt?0:e();;)t>0?(t--,yield!1):(t=e(),yield!0)})();function or(e){if(e&&!isNaN(e))return e>6e4?6e4:e<0?0:e}function ir(e,t,r){t.stats.apiEndTime=Date.now(),Vt(s()(s()({},t.context),{},{apiEndTime:t.stats.apiEndTime,apiName:e}));var n=Boolean(t.stats.profile),o=t.stats.profile||{},i=t.stats.serverEndTs-t.stats.serverStartTs,a=t.stats.httpRequest?t.stats.httpRequest<=6e4?t.stats.httpRequest:6e4:void 0,l=t.stats.apiEndTime,u=l-t.context.apiStartTime;u>9e4&&(u=9e4);var c=t.path||"";c=c.split("?")[0].replace(/\/\d+\//g,"/*/").replace(/\/\d+$/g,"/*"),er(22601,14,[t.stats.callid,t.context.apiStartTime,l,t.stats.serverStartTs,t.stats.serverEndTs,t.stats.requestBodyBytes,t.stats.responseBodyBytes,t.stats.getServiceEndpoint,t.stats.queryDNS,t.stats.compress,t.stats.loadAsmcrypto,t.stats.encrypt,a,t.stats.decrypt,t.stats.uncompress,t.stats.decodePb,t.stats.decodeBody,t.stats.ip,o.redirectStart,n?o.redirectEnd-o.redirectStart:void 0,o.fetchStart,o.domainLookupStart,n?o.domainLookUpEnd-o.domainLookUpStart:void 0,o.connectStart,n?o.connectEnd-o.connectStart:void 0,o.SSLconnectionStart,n?o.SSLconnectionEnd-o.SSLconnectionStart:void 0,o.requestStart,n?o.requestEnd-o.requestStart:void 0,o.responseStart,n?o.responseEnd-o.responseStart:void 0,o.rtt,o.estimate_nettype,or(o.httpRttEstimate),or(o.transportRttEstimate),or(o.downstreamThroughputKbpsEstimate),o.throughputKbps,o.peerIP,o.port,n?o.socketReused?1:0:void 0,o.sendBytesCount,o.receivedBytedCount,o.protocol,be().system,u,i>0?i:0,a?u-a:void 0,c,be().platform,t.stats.requestStartTs,1677058640236,t.stats.ecdnId,t.stats.ecdnEdgeTiming,t.stats.domain,t.stats.stringToBuffer,t.stats.encodePb,t.stats.tsBeforeCallContainerImpl,t.stats.tsCallContainerImplStart,t.stats.decodeJson,`SDK:${r}`,n?o.requestStart-t.stats.requestStartTs:void 0,n?t.stats.requestSuccessTs-o.requestEnd:void 0,t.stats.responseProcessEndTs?l-t.stats.responseProcessEndTs:void 0,t.stats.upstreamCost,t.stats.meshStartTs,t.stats.meshEndTs].join(","))}function ar(e){return`${e}:ok`}function sr(e,t){return JSON.stringify(e,((e,r)=>t&&t.has(r)?t.get(r):"arraybuffer"===f(r)?{type:"Buffer",data:[...new Uint8Array(r)]}:r))}function lr(e){return ur(JSON.parse(e))}function ur(e){switch(f(e)){case"object":return cr(e);case"array":return e.map(ur);default:return e}}function cr(e){var t=e,r=dr(t);if(t!==r)return r;for(var n in t){var o=t[n];switch(f(o)){case"object":var i=dr(o);t[n]=i!==o?i:cr(t[n]);break;case"array":var a=ur(o);a!==o&&(t[n]=a);break;default:continue}}return t}function dr(e){for(var t in e)if("type"===t)if("Buffer"===e.type)if(w(e.data)&&g(e.data[0]))try{return new Uint8Array(e.data).buffer}catch(t){return e}return e}var pr=Symbol.for("CLOUD_ID"),fr=Symbol("CDN");function hr(e){var t=[];for(var r in e)h(e[r])&&e[r]._internalType===pr&&t.push({key:r,cloudID:e[r].cloudID});return t}var _r=2e4,gr=e=>{var t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},vr=e=>e.join("->");function mr(e){return function(){var t=c()((function*(t){var r=s()({},t.data),n=hr(r).map((e=>({key_name:e.key,cloud_id:e.cloudID})));if(n.length)for(var o of n)delete r[o.key_name];var i=sr(r,yield t.cdnMapPromise);V({input:i,max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:e.appConfig.maxReqDataSize/1024+" KB"});var a=`${+new Date}-${Math.random()}`;t.context.tunnelStartTime=+new Date;var{result:l,requestID:u}=yield function(e,t,r,n){return d.apply(this,arguments)}(t,i,n,a);return t.context.tunnelEndTime=+new Date,{errMsg:ar(Tr),result:l,requestID:u};function d(){return d=c()((function*(t,r,n,o){return new Promise(((i,a)=>{var s=[gr("start")],{resolve:l,reject:u}=h(s,i,a);p({param:t,functionName:t.name,data:r,cloudIDList:n,callID:o,action:wr.CALL,scene:Ar.INITIATE_CALL,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,trace:s,resolve:l,reject:u})}))})),d.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return f=c()((function*(r){var{functionName:o,data:i,callID:a,action:l,scene:u,tryCount:d,trace:f,systemErrorRetry:h,timeoutErrorRetry:_,resolve:g,reject:v}=r,m=l===wr.CALL&&Ft()?t.localDebugNoTimeout:void 0,y=sr({function_name:o,data:l===wr.CALL?i:void 0,action:l,scene:u,call_id:a,cloudid_list:l===wr.CALL?n:[],local_debug_no_timeout:m}),b=!1,w=!1,A=()=>{clearTimeout(I),w=!0},E=+new Date,I=m?void 0:setTimeout(c()((function*(){var t=e.appConfig.clientPollTimeout||_r;if(!(+new Date-E>t&&(yield de(),w))){if(!Ft()&&+new Date-E>e.appConfig.maxStartRetryGap)return f.push(gr("timeout, exceed max retry gap")),v(N({errCode:S.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${a}) (trace: ${vr(f)})`},Tr));b=!0,r.timeoutErrorRetry>0?(f.push(gr("timeout, retry")),p(s()(s()({},r),{},{scene:Ar.TIMEOUT_RETRY,tryCount:d-1,timeoutErrorRetry:_-1}))):(f.push(gr("timeout, abort")),v(N({errCode:S.SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`(callId: ${a}) (trace: ${vr(f)})`},Tr)))}})),e.appConfig.clientPollTimeout||_r);e.request(s()(s()({},t.config),{},{apiName:"tcbapi_slowcallfunction_v2",serviceName:e.name,serializedReqData:y,env:t.config&&t.config.env||e.env,stdpriv:!0})).then((function(e){try{if(b)return;A(),(e=>{var r,n=e.data;n&&n.baseresponse&&n.baseresponse.stat&&(n.baseresponse.stat.qbase_cost_time&&(t.context.tunnelTimeNoCSNetCost+=n.baseresponse.stat.qbase_cost_time),n.baseresponse.stat.func_exec_cost_time&&(t.context.funcExecTime=n.baseresponse.stat.func_exec_cost_time)),t.context.channelType=null!==(r=e.channelType)&&void 0!==r?r:0,e.profile&&(null==ce||ce.log("callFunction profile",e.profile))})(e);var n=e.data;if(!n)return f.push(gr("empty resp")),v(N({errCode:S.SDK_FUNCTIONS_EMPTY_CALL_RESULT},Tr));if(!n.baseresponse||0!==n.baseresponse.errcode)return n.baseresponse?0!==n.baseresponse.errcode?v(N({errCode:S.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.errcode ${n.baseresponse.errcode} errmsg ${n.baseresponse.errmsg} (callId: ${a})`},Tr)):v(N({errCode:S.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:`polling base_resp ${JSON.stringify(n.baseresponse)} (callId: ${a})`},Tr)):v(N({errCode:S.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP},Tr));if(0!==n.status){if(1===n.status){if(0!==n.service_errcode){if(n.service_errcode===S.TCB_FUNCTIONS_EXEC_FAIL){var o=n.service_errmsg||"";try{for(var i=o.split("\n"),l=[],u=0;u<i.length;u++)i[u].startsWith("Error: ")&&l.push([i[u],u]);if(l.length%2==1){var c=l[Math.floor(l.length/2)][1];o=i.slice(c).join("\n")}}catch(e){}var h=N({errCode:S.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`云函数执行错误\n云端堆栈信息(error stack)(${n.func_request_id?`requestId ${n.func_request_id}, `:""}callid ${a}):\n${o}`},Tr);return h.stack=`Error: ${h.message}`,h.requestID=n.func_request_id,v(h)}var _=N({errCode:S.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`\n云函数调用失败(${n.func_request_id?`requestId ${n.func_request_id}, `:""}callid ${a}):\n${n.service_errcode} ${n.service_errmsg}`},Tr);return _.stack=`Error: ${_.message}`,_.requestID=n.func_request_id,v(_)}var m=n.data;try{m=lr(m)}catch(e){try{m=JSON.parse(m)}catch(e){}}return g({result:m,requestID:n.func_request_id})}return f.push(gr("poll result expired")),v(N({errCode:S.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:`timeout for result fetching, result cannot be fetched anymore (callId: ${a}) (trace: ${vr(f)})`},Tr))}if(!(d>=0))return f.push(gr("too many polls, abort")),v(N({errCode:S.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:`(callId: ${a}) (trace: ${vr(f)})`},Tr));f.push(gr("normal poll")),p(s()(s()({},r),{},{action:wr.POLL,scene:Ar.NORMAL_POLL_RETRY,tryCount:d-1}))}catch(e){v(N({errCode:S.SDK_FUNCTIONS_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${a})`},Tr))}})).catch((e=>{b||(A(),e&&e.operateWXDataFail&&h>0?(f.push(gr(`system error (${e}), retry`)),p(s()(s()({},r),{},{scene:Ar.SYSTEM_ERROR_RETRY,tryCount:d-1,systemErrorRetry:h-1}))):(f.push(gr(`system error (${e}), abort`)),v(N(`${e} (callId: ${a}) (trace: ${vr(f)})`,Tr))))}))})),f.apply(this,arguments)}function h(e,t,r){var n=t=>{e.push(gr(`app ${t}`))};me(n);return{resolve:e=>{ye(n),t(e)},reject:e=>{ye(n),r(e)}}}}));return function(e){return t.apply(this,arguments)}}()}function yr(e){var t=new WeakMap,r=[];if(e&&(JSON.stringify(e,((e,n)=>n&&n._internalType===fr?void r.push(new Promise(((e,r)=>{var o={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},i=n;if("object"===f(i.target)){if(!i.target.filePath)throw new Error("filePath must be provided");o.filePath=i.target.filePath}else o.fileData=i.target;e(br(o).then((e=>{t.set(n,e.fileUrl)})))}))):n)),r.length))return Promise.all(r).then((()=>t))}function br(e){return new Promise(((t,r)=>{var n=s()(s()({},e),{},{appType:e.appType||301,fileType:e.fileType||20303,fileKey:e.fileKey||`file_${Math.random()}`});ne().uploadToCommonCDN(s()(s()({},n),{},{success:t,fail:r}))}))}var wr,Ar,Er,Ir=e=>s()(s()({},e),{},{errMsg:void 0}),Sr=e=>{try{Ft()&&"undefined"!=typeof __global&&__global.networkLog&&__global.networkLog(s()(s()({},e),{},{domain:"cloud",method:"POST",realMethod:e.method,timestampMs:e.timestampMs||+new Date,callFramesIgnoreLength:e.hasOwnProperty("callFramesIgnoreLength")?e.callFramesIgnoreLength:1}))}catch(e){}},Cr=(e,t)=>{try{if(Ft()&&"undefined"!=typeof __global&&__global.networkLog){var r=t(),n=`${Math.random()}-${+new Date}`,o=r.console||!1,i=r.resultGetter||Ir;Sr({reqId:n,type:"requestWillBeSent",url:r.url,headers:r.headers||{},body:r.reqBody,console:o,callFramesIgnoreLength:2,timestampMs:r.timestampMs,method:r.method}),e.then(function(){var e=c()((function*(e){try{yield((e=0)=>new Promise((t=>setTimeout(t,e))))(),Sr({reqId:n,type:"loadingFinished",body:JSON.stringify(i(e),null,2),console:o,callFramesIgnoreLength:2,timestampMs:Date.now()})}catch(e){}}));return function(t){return e.apply(this,arguments)}}()).catch((e=>{try{Sr({reqId:n,type:"loadingFailed",errorCode:e&&e.errCode||-1,errorMsg:h(e)?e.errMsg||JSON.stringify(e):e.toString(),console:o,callFramesIgnoreLength:2,timestampMs:Date.now()})}catch(e){}}))}}catch(e){0}};!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL"}(wr||(wr={})),function(e){e[e.INITIATE_CALL=1]="INITIATE_CALL",e[e.NORMAL_POLL_RETRY=2]="NORMAL_POLL_RETRY",e[e.SYSTEM_ERROR_RETRY=3]="SYSTEM_ERROR_RETRY",e[e.TIMEOUT_RETRY=4]="TIMEOUT_RETRY"}(Ar||(Ar={})),function(e){e[e.PENDING=0]="PENDING",e[e.DONE=1]="DONE",e[e.TIMEOUT=2]="TIMEOUT"}(Er||(Er={}));var Tr="cloud.callFunction",Or="cloud.callFunction_real_v2";function xr(e){var t,r,n;function o(){return t||(t=function(e){return function(){var t=c()((function*(t){var r=s()({},t.data),n=hr(r).map((e=>({key_name:e.key,cloud_id:e.cloudID})));if(n.length)for(var o of n)delete r[o.key_name];var i=sr(r,yield t.cdnMapPromise);V({input:i,max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:e.appConfig.maxReqDataSize/1024+" KB"});var a=sr({function_name:t.name,data:i,cloudid_list:n});t.context.tunnelStartTime=+new Date;var l=yield e.request(s()(s()({},t.config),{},{apiName:"tcbapi_slowcallfunction",serviceName:e.name,serializedReqData:a,env:t.config&&t.config.env||e.env}));t.context.tunnelEndTime=+new Date;var u=l.data;if(!u)throw O({errCode:S.SDK_FUNCTIONS_EMPTY_CALL_RESULT,errMsg:S[S.SDK_FUNCTIONS_EMPTY_CALL_RESULT]},Tr);if(u.event_id,!u.poll_url)throw O({errCode:S.SDK_FUNCTIONS_EMPTY_POLL_URL,errMsg:S[S.SDK_FUNCTIONS_EMPTY_POLL_URL]},Tr);u.poll_url.indexOf("?")>-1?u.poll_url+="&devtools_ignore=true&skip_domain_check=true":u.poll_url+="?devtools_ignore=true&skip_domain_check=true",t.context.pollStartTime=+new Date;var{result:d,requestID:p}=yield function(e){return f.apply(this,arguments)}(u.poll_url);return t.context.pollEndTime=+new Date,{errMsg:ar(Tr),result:d,requestID:p};function f(){return(f=c()((function*(t){return new Promise(((r,n)=>{h(t,e.appConfig.maxPollRetry||50,r,n)}))}))).apply(this,arguments)}function h(e,t,r,n){return _.apply(this,arguments)}function _(){return _=c()((function*(t,r,n,o){ne(e.identifiers)._requestSkipCheckDomain({url:t,success:e=>{try{if(200!==e.statusCode)return o(O({errCode:S.SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR,errMsg:`polling status code ${e.statusCode}`},Tr));var i=e.data;if(!i)return o(O({errCode:S.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON,errMsg:S[S.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON]},Tr));if(i.base_resp&&0===i.base_resp.ret){if(0!==i.status){if(1===i.status){if(0!==i.service_errcode){var a=O({errCode:S.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`requestID ${i.func_req_id}, cloud function service error code ${i.service_errcode||"unknown"}, error message ${i.service_errmsg||"unknown"}`},Tr);return a.requestID=i.func_req_id,o(a)}var s=i.content;try{s=lr(s)}catch(e){try{s=JSON.parse(s)}catch(e){}}return n({result:s,requestID:i.func_req_id})}return o(O({errCode:S.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:"timeout for result fetching"},Tr))}if(!(r>=0))return o(O({errCode:S.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:S[S.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY]},Tr));h(t,r-1,n,o)}else{if(!i.base_resp)return o(O({errCode:S.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:S[S.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP]},Tr));if(0!==i.base_resp.ret)return o(O({errCode:S.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.ret ${i.base_resp.ret}`},Tr))}}catch(e){o(O({errCode:S.SDK_FUNCTIONS_POLL_ERROR,errMsg:`polling catch error: ${e}`},Tr))}},fail:e=>{o(O(e,Tr))}})})),_.apply(this,arguments)}}));return function(e){return t.apply(this,arguments)}}()}(e)),t}function i(){return r||(r=mr(e)),r}function a(){return n||(n=function(e){return function(){var t=c()((function*(t){var r,n={function_name:t.name,data:sr(t.data),cloudid_list:[]},o=sr(n),i=yield e.serviceEndpoint.getEndpoint("container"),a=new Uint8Array(u.wx.base64ToArrayBuffer(i.key)),s={"X-WX-EV":3,"Content-Type":"application/octet-stream"},l=Me.V3.encodeRequest(a,{"X-WX-CALLID":`${+new Date}-${Math.random()}`,"X-WX-CLOUDFUNCTION-NAME":t.name,"X-WX-CLOUDFUNCTION-ENV":(null===(r=t.config)||void 0===r?void 0:r.env)||e.env||""},"POST",o),c=yield new Promise(((e,t)=>ne()._requestSkipCheckDomain({url:i.cloudServiceUrl,method:"POST",header:s,data:l.data.buffer,dataType:"arraybuffer",responseType:"arraybuffer",enableHttp2:!0,success:e,fail:t}))),d=Me.V3.decodeResponse(a,new Uint8Array(c.data)).body;if(d)try{d=JSON.parse(d)}catch(e){}return{errMsg:ar(Tr),result:d}}));return function(e){return t.apply(this,arguments)}}()}(e)),n}return function(e){var t=+new Date;Y(e,"object");var r=X(e);return r.data||(r.data={}),r.context={tunnelTimeNoCSNetCost:0,funcName:e.name,apiStartTime:t,warmStartTime:Yt()},z(r)?function(e){q({apiName:Tr,param:e}),d(e).then((t=>{G(Tr,e,t)})).catch((t=>{Q(Tr,e,t)}))}(r):d(r)};function l(e){Y(e,{name:"string"}),e.data&&Y(e.data,"object"),e.config&&e.config.env&&Y(e.config.env,"string")}function d(e){return p.apply(this,arguments)}function p(){return(p=c()((function*(t){try{var r;if(l(t),t.cdnMapPromise=yr(t.data),r="sdk"===e.runtime.platform&&e.plugins.length?a()(t):u()?o()(t):i()(t),Ft()){var n=Date.now();Cr(r,(()=>{var r;return{url:`wx.cloud.callFunction.${t.name}`,headers:{Env:e.isInstance?e.env:(null===(r=t.config)||void 0===r?void 0:r.env)||e.env},reqBody:sr(t.data),timestampMs:n,console:e.debug}}))}return yield r}catch(e){throw O(e,Tr)}finally{Vt(s()(s()({},t.context),{},{apiEndTime:+new Date,apiName:u()?Tr:Or}))}function u(){return 1===t.version}}))).apply(this,arguments)}}function Nr(e){return{callFunction:xr(e)}}var Rr,Pr="functions";function Dr(e){e.registerService(function(e){var t={name:Pr,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,serviceEndpoint:e.serviceEndpoint,runtime:e.runtimeInfo,plugins:e.plugins,get debug(){return e.debug},get env(){return e.getEnvForService(Pr)},appConfig:{get maxReqDataSize(){return e.appConfig.call_function_max_req_data_size},get maxPollRetry(){return e.appConfig.call_function_poll_max_retry},get maxStartRetryGap(){return e.appConfig.call_function_valid_start_retry_gap},get clientPollTimeout(){return e.appConfig.call_function_client_poll_timeout}}};return{name:Pr,context:t,getAPIs:Nr.bind(null,t)}}(e))}function Lr(){if(!Rr){var e=ne();if(!e.private_getUserAgent)return Rr;e.private_getUserAgent((e=>{Rr=e}))}return Rr}function Br(e){e.path||(e.path=""),e.method||(e.method="GET"),e.header||(e.header={}),e.dataType||(e.dataType="json"),e.responseType||(e.responseType="text");var t="";for(var r in e.header)"content-type"===r.toLowerCase()&&e.header&&(t=e.header[r]);if(t||(t="application/json",e.header["content-type"]="application/json"),e.header["User-Agent"]=Lr()||"",/get/i.test(e.method||"")&&e.data&&h(e.data)){var n="";for(var o in e.data)n+=`${n.length?"&":""}${Ce(o)}=${Ce(e.data[o])}`;e.path.includes("?")?e.path+=`${e.path.endsWith("&")?"":n?"&":""}${n}`:e.path+=`${e.path.endsWith("?")?"":n?"?":""}${n}`,e.data=void 0}else if(/post|put|patch|delete/i.test(e.method||"")&&e.data)if(t.includes("application/json")){var i=f(e.data);e.shouldSerialize="string"!==i}else if(t.includes("application/x-www-form-urlencoded")&&h(e.data)){var a="";for(var s in e.data)a+=`${a.length?"&":""}${encodeURIComponent(s)}=${encodeURIComponent(e.data[s])}`;e.data=a}}function kr(e){return e>=300&&e<=399}class Mr extends Error{constructor(e,t){super(e),this.code=void 0,this.code=t}}var Fr=new WeakMap;var jr,Ur,$r,Wr,qr="cloud.callContainer";function Hr(e){return function(){var r=c()((function*(r){var n=e.serviceEndpoint.getEndpointSync("container"),o=new WeakMap;if(r.cdnMapPromise||!n){var i=yield Promise.all([r.cdnMapPromise,Gr(e.serviceEndpoint.getEndpoint("container"),r.stats,"getServiceEndpoint")]);i[0]&&(o=i[0]),n=i[1]}else r.stats.getServiceEndpoint=0;if(r.shouldSerialize&&(r.data=sr(r.data,o)),n.http){var a=function(t,r){return new Promise(((n,o)=>{var i,a;r.stats.tsCallContainerImplStart=Date.now();var l=ne(e.identifiers),u={"X-WX-ENCRYPTION-VERSION":2,"X-WX-ENCRYPTION-TIMESTAMP":t.timestamp+"","X-WX-COMPRESSION":"snappy","X-WX-USER-TIMEOUT":r.timeout||"","X-WX-LIB-BUILD-TS":1677058640236,"X-WX-RESPONSE-CONTENT-ACCEPT-ENCODING":"PB, JSON","Content-Type":"application/octet-stream"},c=`${Math.random()}_${Date.now()}`,d=s()(s()({},r.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(i=r.config)||void 0===i?void 0:i.env)||e.env,"X-WX-CALL-ID":c});e.appid&&(d["X-WX-RESOURCE-APPID"]=e.appid),r.service&&(d["X-WX-SERVICE"]=r.service);var p=r.stats;p.callid=c;var f=Date.now();if("GET"===(null===(a=r.method)||void 0===a?void 0:a.toUpperCase())&&r.data&&h(r.data)){var _=[];for(var g in r.data)_.push(`${g}=${r.data[g]}`);r.path+=`${r.path.includes("?")?r.path.endsWith("&")?"":"&":"?"}${_.join("&")}`,r.data=void 0}d["X-WX-CONTAINER-PATH"]=r.path;var v=new Uint8Array(xe(t.key)),{data:m,contentEncoding:y}=Me.V1.encodeRequest(v,d,r.method||"GET",r.data);u["X-WX-REQUEST-CONTENT-ENCODING"]=y,p.encrypt=Date.now()-f,f=Date.now();var b=!0,w=b?t.url:`http://${t.vip}/wxa-qbase/container_service?token=${t.token}`;r.rdm?w=`https://wxardm.weixin.qq.com/wxa-qbase/container_service?token=${t.token}`:r.ecdn&&(w=`https://cloudbase.servicewechat.com/wxa-qbase/container_service?token=${t.token}`),r.verbose&&console.log(`[cloud.callContainer] url ${w}`),b&&t.domain&&(r.stats.domain=t.domain),p.requestBodyBytes=m.byteLength,p.requestStartTs=Date.now(),r._fallback?o({errCode:-9999,errMsg:`${qr}:fail emulated fallback`}):l._requestSkipCheckDomain({url:w,method:"POST",header:u,data:m.buffer,dataType:"arraybuffer",responseType:"arraybuffer",timeout:r.timeout,enableHttp2:b,success:e=>{try{for(var t in e.header)if("x-nws-log-uuid"===t.toLowerCase()&&(r.verbose&&console.log(`[cloud.callContainer] x-nws-log-uuid ${e.header[t]}`),r.stats.ecdnId=e.header[t]),"x-edge-timing"===t.toLowerCase()&&(r.stats.ecdnEdgeTiming=e.header[t]),"x-wx-system-error"===t.toLowerCase()){var i=Number(e.header[t]);return 85104===i&&Tt.invalidateService("container"),void o({errCode:i,errMsg:`${qr}:fail system error. code: ${i}`})}if(r.verbose&&console.warn("res",e),p.profile=e.profile,p.httpRequest=Date.now()-f,200===e.statusCode){var a=e.data;p.responseBodyBytes=a.byteLength,f=Date.now();var s=!1,l=Me.m.pb;for(var u in e.header)if("x-wx-compression"===u.toLowerCase()&&"snappy"===e.header[u]&&(f=Date.now(),s=!0),"x-wx-response-content-encoding"===u.toLowerCase()&&"json"===e.header[u].toLowerCase()&&(l=Me.m.json),"x-wx-server-timing"===u.toLowerCase()){var d=(e.header[u]||"").split(",");d.length>=2&&(p.serverStartTs=Number(d[0]),p.serverEndTs=Number(d[1]))}var h,_=Me.V1.decodeResponse(v,new Uint8Array(a),s,l);f=Date.now();var g=_.body;if(!kr(_.statusCode))if("json"===r.dataType)h=Se("string"==typeof g?g:Ne(g.buffer));else h="text"===r.responseType?"string"==typeof g?g:Ne(g.buffer):"arraybuffer"===r.responseType?"string"==typeof g?Re(g):g.buffer:g;p.decodeBody=Date.now()-f,p.responseProcessEndTs=Date.now(),n({statusCode:_.statusCode,header:_.header,data:h,stats:p,callID:c,errMsg:`${qr}:ok`})}else o({errCode:-9999,errMsg:`${qr}:fail [call_id ${c}] system conn status not 200`})}catch(e){o({errCode:-1,errMsg:`${qr}:fail [call_id ${c}] error while processing internal response ${e}`})}},fail:e=>{o(s()(s()({},e),{},{errCode:-9999,errMsg:e.errMsg.replace(/^request/,qr)}))}})}))}(n,r);return a.then(Bt).catch(Bt),a}return function(e,r){return t.apply(this,arguments)}(n.url,r)}));return function(e){return r.apply(this,arguments)}}();function t(){return t=c()((function*(t,r){return new Promise(((n,o)=>{var i,a=ne(e.identifiers),l=s()(s()({},r.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(i=r.config)||void 0===i?void 0:i.env)||e.env,"X-WX-SERVICE":r.service,"X-WX-CONTAINER-PATH":r.path,"X-WX-CALL-ID":`${Math.random()}_${Date.now()}`,"X-WX-USER-TIMEOUT":r.timeout});e.appid&&(l["X-WX-RESOURCE-APPID"]=e.appid),a._requestSkipCheckDomain({url:t,method:r.method,header:l,data:r.data,dataType:r.dataType,responseType:r.responseType,timeout:r.timeout,success:e=>{n(s()(s()({},e),{},{errMsg:`${qr}:ok`}))},fail:e=>{o(s()(s()({},e),{},{errMsg:e.errMsg.replace(/^request/,qr)}))}})}))})),t.apply(this,arguments)}}function Gr(e,t,r){var n=Date.now();return e.then((()=>t[r]=Date.now()-n)).catch((()=>t[r]=Date.now()-n)),e}!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL"}(jr||(jr={})),function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Timeout=2]="Timeout"}(Ur||(Ur={})),function(e){e[e.RAW=0]="RAW",e[e.BASE64=1]="BASE64",e[e.CDN_URL=2]="CDN_URL"}($r||($r={})),function(e){e[e.PENDING=0]="PENDING",e[e.DONE=1]="DONE",e[e.TIMEOUT=2]="TIMEOUT"}(Wr||(Wr={}));var Qr=e=>{var t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},zr=e=>e.join("->"),Yr=2e4,Kr=1e5,Vr="cloud.callContainer";function Jr(e){return function(){var t=c()((function*(t){var r,n;if(t.shouldSerialize){var o=yield t.cdnMapPromise;t.data=sr(t.data,o)}var i=$r.RAW,a=(null===(r=t.method)||void 0===r?void 0:r.toUpperCase())||"GET";if(t.data&&/^(POST|PUT|PATCH|DELETE)$/.test(a)){var l=f(t.data);if("object"===l)t.data=JSON.stringify(t.data);else{if("arraybuffer"!==l&&"string"!==l)throw new Error(`input data type is not supported: ${l}`);var u=!1;if("string"===l)u=t.data.length>Kr;else if(t.data.byteLength>Kr)u=!0;else{var d=Oe(t.data);d.length>Kr?u=!0:(t.data=d,i=$r.BASE64)}if(u)throw new Error("input data size too large (> 100KB)")}}else if("GET"===a&&t.data&&h(t.data)){var p=[];for(var _ in t.data)p.push(`${_}=${t.data[_]}`);t.path+=`${t.path.includes("?")?t.path.endsWith("&")?"":"&":"?"}${p.join("&")}`,t.data=void 0}else t.data=void 0;var g=`${+new Date}-${Math.random()}`;for(var v in t.stats.callid=g,t.header=s()(s()({},t.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(n=t.config)||void 0===n?void 0:n.env)||e.env,"X-WX-CONTAINER-PATH":t.path}),t.service&&(t.header["X-WX-SERVICE"]=t.service),t.header)null!==t.header[v]&&void 0!==t.header[v]&&(t.header[v]+="");t.context.tunnelStartTime=+new Date;var{result:m}=yield function(e,t,r,n){return y.apply(this,arguments)}(t,t.data,i,g);return t.context.tunnelEndTime=+new Date,s()(s()({},m),{},{errMsg:ar(Vr),callID:g});function y(){return y=c()((function*(t,r,n,o){var i,a=!1;t.hasOwnProperty("timeout")&&(i=new Promise(((e,r)=>{setTimeout((()=>{a=!0,r(`timeout (options.timeout == ${t.timeout})`)}),t.timeout)})));var s=new Promise(((s,l)=>{var u=[Qr("start")],{resolve:c,reject:d}=A(u,s,l);b({param:t,data:r,dataType:n,callID:o,action:jr.CALL,retryType:Ur.None,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,userTimeout:{get reached(){return!!i&&a}},trace:u,resolve:c,reject:d})}));return i?Promise.race([s,i]):s})),y.apply(this,arguments)}function b(e){return w.apply(this,arguments)}function w(){return w=c()((function*(r){var{data:n,dataType:o,callID:i,action:a,retryType:l,tryCount:u,trace:d,systemErrorRetry:p,timeoutErrorRetry:f,userTimeout:h,resolve:_,reject:g}=r,v=[];for(var m in t.header)v.push({k:m,v:t.header[m]});var y=sr(a===jr.CALL?{method:t.method||"GET",headers:v,data:a===jr.CALL?n:void 0,data_type:o,action:a,retryType:l,call_id:i,user_timeout:t.timeout}:{call_id:i,action:a,retryType:l}),w=!1,A=!1,E=()=>{clearTimeout(C),A=!0},I=+new Date,C=setTimeout(c()((function*(){var t=e.appConfig.clientPollTimeout||Yr;if(!(+new Date-I>t&&(yield de(),A)||h.reached)){if(!Ft()&&+new Date-I>e.appConfig.maxStartRetryGap)return d.push(Qr("timeout, exceed max retry gap")),g(N({errCode:S.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${i}) (trace: ${zr(d)})`},Vr));w=!0,r.timeoutErrorRetry>0?(d.push(Qr("timeout, retry")),b(s()(s()({},r),{},{retryType:Ur.Timeout,tryCount:u-1,timeoutErrorRetry:f-1}))):(d.push(Qr("timeout, abort")),g(N({errCode:S.SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`(callId: ${i}) (trace: ${zr(d)})`},Vr)))}})),e.appConfig.clientPollTimeout||Yr),T=e=>{var r=e.data;r&&r.baseresponse&&r.baseresponse.stat&&r.baseresponse.stat.qbase_cost_time&&(t.context.tunnelTimeNoCSNetCost+=r.baseresponse.stat.qbase_cost_time)};function O(){return O=c()((function*(n){try{if(w||h.reached)return;E(),T(n);var o=n.data;if(!o)return d.push(Qr("empty resp")),g(N({errCode:S.SDK_CONTAINER_EMPTY_CALL_RESULT},Vr));if(!o.baseresponse||0!==o.baseresponse.errcode)return o.baseresponse?0!==o.baseresponse.errcode?g(N({errCode:S.SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.errcode ${o.baseresponse.errcode} errmsg ${o.baseresponse.errmsg} (callId: ${i})`},Vr)):g(N({errCode:S.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP,errMsg:`polling base_resp ${JSON.stringify(o.baseresponse)} (callId: ${i})`},Vr)):g(N({errCode:S.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP},Vr));if(0!==o.status){if(1===o.status){var a;if(o.data_type===$r.BASE64)a=xe(o.data),"json"===t.dataType?a=Se(Ne(a)):"arraybuffer"!==t.responseType&&(a=Ne(a));else if(o.data_type===$r.CDN_URL)try{var l=ne(e.identifiers),c=yield new Promise(((e,r)=>{l._requestSkipCheckDomain({url:o.data,dataType:t.dataType,responseType:t.responseType,success:t=>{200!==t.statusCode?r(`download response status code ${t.statusCode}`):e(t)},fail:e=>{r(e)}})}));a=c.data}catch(e){return g(N({errCode:S.SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL,errMsg:`error: ${e} \n (callId: ${i}) (trace: ${zr(d)})`},Vr))}else a=o.data,"arraybuffer"===t.responseType?a=Re(a):"json"===t.dataType&&(a=Se(a));return _({result:{data:a,statusCode:o.http_code,header:o.headers.reduce(((e,t)=>{var r=e[t.k+""];return e[t.k+""]=r?r+","+t.v:t.v+"",e}),{})}})}return d.push(Qr("poll result expired")),g(N({errCode:S.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:`timeout for result fetching, result cannot be fetched anymore (callId: ${i}) (trace: ${zr(d)})`},Vr))}if(!(u>=0))return d.push(Qr("too many polls, abort")),g(N({errCode:S.SDK_CONTAINER_EXCEED_MAX_POLL_RETRY,errMsg:`(callId: ${i}) (trace: ${zr(d)})`},Vr));d.push(Qr("normal poll")),b(s()(s()({},r),{},{action:jr.POLL,retryType:Ur.None,tryCount:u-1}))}catch(e){g(N({errCode:S.SDK_CONTAINER_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${i})`},Vr))}})),O.apply(this,arguments)}h.reached||e.request(s()(s()({},t.config),{},{apiName:"tcbapi_call_container",serviceName:e.name,serializedReqData:y,env:t.config&&t.config.env||e.env})).then((function(e){return O.apply(this,arguments)})).catch((e=>{w||h.reached||(E(),e&&e.operateWXDataFail&&p>0?(d.push(Qr(`system error (${e}), retry`)),b(s()(s()({},r),{},{retryType:Ur.Error,tryCount:u-1,systemErrorRetry:p-1}))):(d.push(Qr(`system error (${e}), abort`)),g(N(`${e} (callId: ${i}) (trace: ${zr(d)})`,Vr))))}))})),w.apply(this,arguments)}function A(e,t,r){var n=t=>{e.push(Qr(`app ${t}`))};me(n);return{resolve:e=>{ye(n),t(e)},reject:e=>{ye(n),r(e)}}}}));return function(e){return t.apply(this,arguments)}}()}var Xr="cloud.callContainer";function Zr(e){return function(){var r=c()((function*(r){var n=e.serviceEndpoint.getEndpointSync("container"),o=new WeakMap;if(r.cdnMapPromise||!n){var i=yield Promise.all([r.cdnMapPromise,en(e.serviceEndpoint.getEndpoint("container"),r.stats,"getServiceEndpoint")]);i[0]&&(o=i[0]),n=i[1]}else r.stats.getServiceEndpoint=0;return r.shouldSerialize&&(r.data=sr(r.data,o)),n.http?function(t,r){return new Promise(((n,o)=>{var i;r.stats.tsCallContainerImplStart=Date.now();var a=ne(e.identifiers),l={"X-WX-EV":3,"Content-Type":"application/octet-stream"},u=`${Math.random()}_${Date.now()}`,c=s()(s()({},r.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(i=r.config)||void 0===i?void 0:i.env)||e.env,"X-WX-SERVICE":r.service,"X-WX-CONTAINER-PATH":r.path,"X-WX-CALL-ID":u});e.appid&&(c["X-WX-RESOURCE-APPID"]=e.appid);var d=r.stats;d.callid=u;var p=Date.now(),f=new Uint8Array(a.wx.base64ToArrayBuffer(t.key)),{data:h}=Me.V3.encodeRequest(f,c,r.method||"GET",r.data);d.encrypt=Date.now()-p,p=Date.now();var _=!0,g=t.url;r.rdm?g=`https://wxardm.weixin.qq.com/wxa-qbase/container_service?token=${t.token}`:r.ecdn&&(g=`https://cloudbase.servicewechat.com/wxa-qbase/container_service?token=${t.token}`),r.verbose&&console.log(`[cloud.callContainer] url ${g}`),_&&t.domain&&(r.stats.domain=t.domain),d.requestBodyBytes=h.byteLength,d.requestStartTs=Date.now(),a._requestSkipCheckDomain({url:g,method:"POST",header:l,data:h.buffer,dataType:"arraybuffer",responseType:"arraybuffer",timeout:r.timeout,enableHttp2:_,success:e=>{try{for(var t in e.header)if("x-nws-log-uuid"===t.toLowerCase()&&(r.verbose&&console.log(`[cloud.callContainer] x-nws-log-uuid ${e.header[t]}`),r.stats.ecdnId=e.header[t]),"x-edge-timing"===t.toLowerCase()&&(r.stats.ecdnEdgeTiming=e.header[t]),"x-wx-system-error"===t.toLowerCase()){var i=Number(e.header[t]);return void o({errCode:i,errMsg:`${Xr}:fail system error. code: ${i}`})}if(d.profile=e.profile,d.httpRequest=Date.now()-p,200===e.statusCode){var a=e.data;d.responseBodyBytes=a.byteLength,p=Date.now();var s,l=Me.V3.decodeResponse(f,new Uint8Array(a));for(var c in d.decrypt=Date.now()-p,e.header)if("x-wx-server-timing"===c.toLowerCase()){var h=(e.header[c]||"").split(",");h.length>=2&&(d.serverStartTs=Number(h[0]),d.serverEndTs=Number(h[1]))}p=Date.now();var _=l.body;if("json"===r.dataType)s=Se("string"==typeof _?_:Ne(_.buffer));else s="text"===r.responseType?"string"==typeof _?_:Ne(_.buffer):"arraybuffer"===r.responseType?"string"==typeof _?Re(_):_.buffer:_;d.decodeBody=Date.now()-p,d.responseProcessEndTs=Date.now(),n({statusCode:l.statusCode,header:l.header,data:s,stats:d,callID:u,errMsg:`${Xr}:ok`})}else{var g=-1;for(var v in e.header)"x-wx-system-error"===v.toLowerCase()&&(g=Number(e.header[v]));o({errCode:g,errMsg:`${Xr}:fail system error, status ${e.statusCode}. code: ${g}`})}}catch(e){o({errCode:-1,errMsg:`${Xr}:fail error while processing internal response ${e}`})}},fail:e=>{o(s()(s()({},e),{},{errMsg:e.errMsg.replace(/^request/,Xr)}))}})}))}(n,r):function(e,r){return t.apply(this,arguments)}(n.url,r)}));return function(e){return r.apply(this,arguments)}}();function t(){return t=c()((function*(t,r){return new Promise(((n,o)=>{var i,a=ne(e.identifiers),l=s()(s()({},r.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(i=r.config)||void 0===i?void 0:i.env)||e.env,"X-WX-SERVICE":r.service,"X-WX-CONTAINER-PATH":r.path,"X-WX-CALL-ID":`${Math.random()}_${Date.now()}`,"X-WX-USER-TIMEOUT":r.timeout});e.appid&&(l["X-WX-RESOURCE-APPID"]=e.appid),a._requestSkipCheckDomain({url:t,method:r.method,header:l,data:r.data,dataType:r.dataType,responseType:r.responseType,timeout:r.timeout,success:e=>{n(s()(s()({},e),{},{errMsg:`${Xr}:ok`}))},fail:e=>{o(s()(s()({},e),{},{errMsg:e.errMsg.replace(/^request/,Xr)}))}})}))})),t.apply(this,arguments)}}function en(e,t,r){var n=Date.now();return e.then((()=>t[r]=Date.now()-n)).catch((()=>t[r]=Date.now()-n)),e}var tn="cloud.callContainer",rn=0,nn=1,on=2,an=!0,sn=0,ln=new WeakMap;function un(e){var t=[void 0,Hr(e),Jr(e),Zr(e)];function r(e){return t[e]}return function(e){var t=+new Date;Y(e,"object");var r=X(e);return r.data||(r.data={}),r.dataType||(r.dataType="json"),r.context={tunnelTimeNoCSNetCost:0,apiStartTime:t,warmStartTime:Yt()},r.stats={apiStartTime:t},z(r)?function(e){q({apiName:tn,param:e}),o(e).then((t=>{G(tn,e,t)})).catch((t=>{Q(tn,e,t)}))}(r):o(r)};function n(t){var r;if(t.service,e.isInstance){if(!e.env)throw new Error("envId must be provided")}else if(null!==(r=t.config)&&void 0!==r&&r.env)Y(t.config.env,"string");else if(!e.env)throw new Error("envId must be provided")}function o(e){return i.apply(this,arguments)}function i(){return i=c()((function*(t){var r=!1;try{sn++,n(t),Br(t),t.cdnMapPromise=t.shouldSerialize?yr(t.data):void 0;var o=Date.now();r=an?(an=!1,yield a(t)):u(t),t.stats.tsBeforeCallContainerImpl=Date.now();var i,l=X(t),c=t.data,_=d(t,r),g=t.service||t.header["X-WX-SERVICE"];i=g?`wx.cloud.callContainer.${g}${t.path}`:`wx.cloud.callContainer${t.path}`,Cr(_,(()=>{var r;return{url:i,method:t.method,headers:s()({Env:e.isInstance?e.env:(null===(r=t.config)||void 0===r?void 0:r.env)||e.env},t.header),reqBody:sr(c),timestampMs:o,console:e.debug}}));var v=f(l,h(l,_)),m=yield v;return p(t,r),Lt(),m}catch(e){throw O(e,tn)}finally{0===--sn&&(0,Me.j)(ne()._WebAssembly)}})),i.apply(this,arguments)}function a(e){return l.apply(this,arguments)}function l(){return(l=c()((function*(t){if(!Boolean(e.serviceEndpoint.getEndpointSync("container"))){var r=new Promise((e=>setTimeout(e,50))),n=e.serviceEndpoint.getEndpoint("container");yield Promise.race([r,n])}return u(t)}))).apply(this,arguments)}function u(t){return"windows"!==be().platform&&(1===t.apiVersion||2!==t.apiVersion&&Boolean(e.serviceEndpoint.getEndpointSync("container")))}function d(e,t){var n,o;if(t=null!==(n=t)&&void 0!==n?n:u(e)){var i=s()(s()({},e),{},{stats:s()({},e.stats)});o=r(1)(e).catch((e=>{if(-9999===(null==e?void 0:e.errCode))return r(2)(i);throw e}))}else o=r(2)(e);return o}function p(e,t){ir(tn,e,t?"v1":"im")}function f(t,r){var n;if(e.identifiers.pluginId)return r;var o=ne(e.identifiers);if(!o.isUsedCache())return r;var i,a,s,l=(i=r,a={abort:()=>{},promise:Promise.resolve()},s=new Promise(((e,t)=>{a.abort=t})),a.promise=Promise.race([i,s]),a),u=o.reportCallContainer,c=o.privateCacheManager,d=o.cacheManager,p=Date.now(),{data:f,method:h}=t,_=`https://wx.cloud.callContainer/${(null===(n=t.config)||void 0===n?void 0:n.env)||e.env}`,g=t.service;if(!g)for(var v in t.header)"X-WX-SERVICE"===v.toUpperCase()&&(g=t.header[v]);_+=g?`/${g}${t.path}`:t.path;var m=(e,t,n)=>{var o=c.emit("request",{url:_,data:f,method:h,request:()=>new Promise(((e,t)=>{r.then(e).catch(t)}))});if(o.length){var i=o.find((e=>e&&"function"==typeof e.then));i&&i.then(e).catch(t).finally((()=>{l.abort()}))}else n&&t(n)};return new Promise(((e,t)=>{var n=t=>{u({isSuccess:!0,costTime:Date.now()-p,extra1:_}),e(t)},o=e=>{u({isSuccess:!1,costTime:Date.now()-p,extra1:_}),t(e)},i=e=>{c.checkNeedStore(_,f,h,e),n(e)};d.state===on?r.then((e=>{i(e)})).catch((e=>{m(n,o,e)})):d.state===nn?m(n,o):d.state===rn&&r.then((e=>{i(e)})).catch((e=>{o(e)}))}))}function h(t,r){var n;if(!(null===(n=t.followRedirect)||void 0===n||n))return r;return function t(n,o){return new Promise(((i,a)=>{o.then((o=>{var l;if(kr(o.statusCode)){var u=null!==(l=ln.get(r))&&void 0!==l?l:0;if(u>=6)a("reach the max redirect count");else{ln.set(r,u+1);var c="";for(var p in o.header)"location"===p.toLowerCase()&&(c=o.header[p]);if(c)if(c.startsWith("/")){var f=X(n);n.path=c,t(f,d(n)).then(i).catch(a)}else{ne(e.identifiers).request({url:c,method:n.method,header:n.header,data:n.data,dataType:n.dataType,responseType:n.responseType,timeout:n.timeout,success:e=>{i(s()(s()({},e),{},{errMsg:`${tn}:ok`}))},fail:e=>{a(e.errMsg.replace(/^request/,tn))}})}else i(o)}}else i(o)})).catch(a)}))}(t,r)}}var cn=r(48),dn=r.n(cn),pn=["success","complete"],fn="cloud.connectContainer";function hn(e){return function(e){var t=X(e);return t.timing={apiStartTime:+new Date},z(t)?function(e){var t=r(e);t.then((t=>{G(fn,e,t)})).catch((t=>{Q(fn,e,t)}))}(t):r(t)};function t(e){e.config&&e.config.env&&Y(e.config.env,"string")}function r(e){return n.apply(this,arguments)}function n(){return(n=c()((function*(e){try{return t(e),yield o(e)}catch(e){throw e}finally{Vt(s()(s()({},e.timing),{},{apiEndTime:+new Date,apiName:fn}))}}))).apply(this,arguments)}function o(e){return i.apply(this,arguments)}function i(){return(i=c()((function*(t){var r={service_name:t.service},n=JSON.stringify(r);t.timing.tunnelStartTime=+new Date;var o=yield e.request(s()(s()({},t.config),{},{apiName:"tcbapi_get_websocket_info",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env}));t.timing.tunnelEndTime=+new Date;var i=o.data,{success:a,complete:l}=t,u=dn()(t,pn),c=ne(e.identifiers)._socketSkipCheckDomainFactory().connectSocket(s()(s()({},u),{},{url:`wss://${i.host}${t.path||""}`,header:s()(s()({},u.header),{},{"content-type":"application/json","x-wx-token":i.token}),perMessageDeflate:!0}));return{errMsg:ar(fn),socketTask:c}}))).apply(this,arguments)}}function _n(e){return{callContainer:un(e),connectContainer:hn(e)}}var gn="container";function vn(e){e.registerService(function(e){var t={name:gn,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,serviceEndpoint:e.serviceEndpoint,get debug(){return e.debug},get appid(){return e.isInstance?e.instanceOptions.resourceAppid:void 0},get env(){return e.getEnvForService(gn)},appConfig:{get maxPollRetry(){return e.appConfig.call_container_poll_max_retry},get clientPollTimeout(){return e.appConfig.call_container_client_poll_timeout},get maxStartRetryGap(){return e.appConfig.call_container_valid_start_retry_gap}}};return{name:gn,context:t,getAPIs:_n.bind(null,t)}}(e))}var mn={},yn={env:"",platform:""},bn=()=>yn;if(void 0!==m)yn.env="miniprogram",yn.platform=m.platform,m.host&&"SAAASDK"===m.host.env&&(yn.platform="sdk");else if(yn.env="web",window)if(window.__wxjs_environment&&"miniprogram"===window.__wxjs_environment)yn.platform="miniprogram";else{var wn=window.navigator.userAgent.toLowerCase();/MicroMessenger/i.test(wn)&&(yn.platform="wxweb")}var An="cloud.uploadFile";function En(e){return function(e){if(z(e=X(e)))return function(e){var r={aborted:!1},n=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(r),o={apiStartTime:+new Date};return t(s()(s()({},e),{},{context:r,timing:o,uploadTaskAgent:n})).then((t=>{G(An,e,t)})).catch((t=>{Q(An,e,t)})),n}(e);var r={apiStartTime:+new Date};return t(s()(s()({},e),{},{timing:r}))};function t(e){return new Promise(function(){var t=c()((function*(t,n){try{if(function(e){Y(e,{cloudPath:"string"}),"miniprogram"===bn().env?Y(e,{filePath:"string"}):K(e,"file","uploadFile")}(e),e.context&&(e.context.abort=function(){n(O({errMsg:"abort"},An))},e.context.aborted))return n(O({errMsg:"abort"},An));var o=yield function(e){return r.apply(this,arguments)}(e);t(o)}catch(e){n(O(e,An))}finally{Vt(s()(s()({},e.timing),{},{apiEndTime:+new Date,apiName:"cloud.uploadFile_v2"}))}}));return function(e,r){return t.apply(this,arguments)}}())}function r(){return r=c()((function*(t){var r=ne(e.identifiers),o=yield n(t);return new Promise(((e,n)=>{if(t.context&&t.context.aborted)return n(O({errMsg:"abort"},An));var i,a;if("web"===bn().env){var l=new FormData;l.append("key",t.cloudPath),l.append("signature",o.authorization),l.append("x-cos-security-token",o.token),l.append("x-cos-meta-fileid",o.cos_file_id),l.append("file",t.file),i={url:o.url,timeout:t.timeout,filePath:"",header:t.header,name:"",formData:l}}else i={url:o.url,timeout:t.timeout,filePath:t.filePath,header:t.header,name:"file",formData:{key:t.cloudPath,signature:o.authorization,"x-cos-security-token":o.token,"x-cos-meta-fileid":o.cos_file_id}};(a=r._uploadFileSkipCheckDomain(s()(s()({},i),{},{success:t=>{try{if(t.statusCode>=200&&t.statusCode<300)e({errMsg:ar(An),fileID:o.file_id,statusCode:t.statusCode});else{var r=new C({errMsg:`status ${t.statusCode}, error: ${t.data};`});n(r)}}catch(r){var i=new C({errMsg:`Error : ${t.data};`});n(i)}},fail:e=>{n(e)}})))&&(a.onProgressUpdate((function(){t.uploadTaskAgent&&t.context&&t.context.onProgressUpdateUserHandler&&v(t.context.onProgressUpdateUserHandler)&&t.context.onProgressUpdateUserHandler.apply(r._uploadFileSkipCheckDomain,arguments)})),t.context&&(t.context.abort=a.abort.bind(a)))}))})),r.apply(this,arguments)}function n(e){return o.apply(this,arguments)}function o(){return(o=c()((function*(t){var r=JSON.stringify({path:t.cloudPath}),n=+new Date,o=(yield e.request({apiName:"tcbapi_cos_uploadfile",serviceName:e.name,serializedReqData:r,env:t.config&&t.config.env||e.env})).data;if(t.timing&&(t.timing.tunnelStartTime=n,t.timing.tunnelEndTime=+new Date,t.timing.tunnelTimeNoCSNetCost=o.baseresponse.stat.qbase_cost_time),!o.url)throw new C({errCode:S.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL,errMsg:S[S.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL]});return o}))).apply(this,arguments)}}var In="cloud.downloadFile";function Sn(e){return function(e){if(z(e=X(e)))return function(e){var r={aborted:!1},n=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(r),o={apiStartTime:+new Date};return t(s()(s()({},e),{},{context:r,timing:o,downloadTaskAgent:n})).then((t=>{G(In,e,t)})).catch((t=>{Q(In,e,t)})),n}(e);var r={apiStartTime:+new Date};return t(s()(s()({},e),{},{timing:r}))};function t(e){return r.apply(this,arguments)}function r(){return r=c()((function*(e){return new Promise(function(){var t=c()((function*(t,r){try{if(n(e),e.context&&(e.context.abort=function(){r(O({errMsg:"abort"},In))},e.context.aborted))return r(O({errMsg:"abort"},In));t(yield o(e))}catch(e){r(O(e,In))}finally{Vt(s()(s()({},e.timing),{},{apiEndTime:+new Date,apiName:In}))}}));return function(e,r){return t.apply(this,arguments)}}())})),r.apply(this,arguments)}function n(e){Y(e,{fileID:"string"}),e.config&&e.config.env&&Y(e.config.env,"string")}function o(e){return i.apply(this,arguments)}function i(){return i=c()((function*(t){var r=ne(e.identifiers),n=yield a(t);return new Promise(((e,o)=>{if(t.context&&t.context.aborted)return o(O({errMsg:"abort"},In));var i=r._downloadFileSkipCheckDomain({url:n,header:t.header,timeout:t.timeout,success:t=>{e(t)},fail:e=>{o(e)}});i&&(i.onProgressUpdate((function(){t.downloadTaskAgent&&t.context&&t.context.onProgressUpdateUserHandler&&v(t.context.onProgressUpdateUserHandler)&&t.context.onProgressUpdateUserHandler.apply(r._downloadFileSkipCheckDomain,arguments)})),t.context&&(t.context.abort=i.abort.bind(i)))}))})),i.apply(this,arguments)}function a(e){return l.apply(this,arguments)}function l(){return(l=c()((function*(t){var r=JSON.stringify({fileid:t.fileID}),n=+new Date,o=(yield e.request({apiName:"tcbapi_downloadfile",serviceName:e.name,serializedReqData:r,env:t.config&&t.config.env||e.env})).data;if(t.timing&&(t.timing.tunnelStartTime=n,t.timing.tunnelEndTime=+new Date,t.timing.tunnelTimeNoCSNetCost=o.baseresponse.stat.qbase_cost_time),!o.download_url)throw new C({errCode:S.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL,errMsg:S[S.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL]});return o.download_url.indexOf("?")>-1?o.download_url+="&skip_domain_check=true":o.download_url+="?skip_domain_check=true",o.download_url}))).apply(this,arguments)}}var Cn="cloud.getTempFileURL";function Tn(e){return function(e){var t=X(e);return t.timing={apiStartTime:+new Date},z(t)?function(e){var t=r(e);t.then((t=>{G(Cn,e,t)})).catch((t=>{Q(Cn,e,t)}))}(t):r(t)};function t(t){if(Y(t,{fileList:"array"}),t.config&&t.config.env&&Y(t.config.env,"string"),e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new C({errCode:S.SDK_API_PARAMETER_ERROR,errMsg:`parameter.fileList exceed max length ${e.appConfig.getTempFileURLMaxReq}`})}function r(e){return n.apply(this,arguments)}function n(){return(n=c()((function*(e){try{return t(e),e.fileList.length?yield o(e):{errMsg:ar(Cn),fileList:[]}}catch(e){throw O(e,Cn)}finally{Vt(s()(s()({},e.timing),{},{apiEndTime:+new Date,apiName:Cn}))}}))).apply(this,arguments)}function o(e){return i.apply(this,arguments)}function i(){return(i=c()((function*(t){var r={file_list:t.fileList.map((e=>_(e)?{fileid:e}:{fileid:e.fileID,max_age:e.maxAge}))},n=JSON.stringify(r);t.timing.tunnelStartTime=+new Date;var o=yield e.request({apiName:"tcbapi_gettempfileurl",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env});t.timing.tunnelEndTime=+new Date;var i=o.data;return t.timing.tunnelTimeNoCSNetCost=i.baseresponse.stat.qbase_cost_time,{errMsg:ar(Cn),fileList:i.download_list.map((e=>({fileID:e.fileid,tempFileURL:e.download_url,maxAge:e.max_age,status:e.status,errMsg:e.errmsg})))}}))).apply(this,arguments)}}var On="cloud.deleteFile";function xn(e){return function(e){var t=X(e);return t.timing={apiStartTime:+new Date},z(t)?function(e){var t=r(e);t.then((t=>{G(On,e,t)})).catch((t=>{Q(On,e,t)}))}(t):r(t)};function t(t){Y(t,{fileList:"array"}),t.config&&t.config.env&&Y(t.config.env,"string");for(var r=0,n=t.fileList.length;r<n;r++)Y(t.fileList[r],"string",`parameter.fileList[${r}]`);if(e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new C({errCode:S.SDK_API_PARAMETER_ERROR,errMsg:`parameter.fileList exceed max length ${e.appConfig.getTempFileURLMaxReq}`})}function r(e){return n.apply(this,arguments)}function n(){return(n=c()((function*(e){try{return t(e),e.fileList.length?yield o(e):{errMsg:ar(On),fileList:[]}}catch(e){throw O(e,On)}finally{Vt(s()(s()({},e.timing),{},{apiEndTime:+new Date,apiName:On}))}}))).apply(this,arguments)}function o(e){return i.apply(this,arguments)}function i(){return(i=c()((function*(t){var r={fileid_list:t.fileList},n=JSON.stringify(r);t.timing.tunnelStartTime=+new Date;var o=yield e.request({apiName:"tcbapi_deletefile",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env});t.timing.tunnelEndTime=+new Date;var i=o.data;return t.timing.tunnelTimeNoCSNetCost=i.baseresponse.stat.qbase_cost_time,{errMsg:ar(On),fileList:i.delete_list.map((e=>({fileID:e.fileid,status:e.status,errMsg:e.errmsg})))}}))).apply(this,arguments)}}function Nn(e){return{uploadFile:En(e),downloadFile:Sn(e),getTempFileURL:Tn(e),deleteFile:xn(e)}}var Rn="storage";function Pn(e){e.registerService(function(e){var t={name:Rn,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get env(){return e.getEnvForService(Rn)},get debug(){return e.debug},appConfig:{get uploadMaxFileSize(){return e.appConfig.upload_max_file_size},get getTempFileURLMaxReq(){return e.appConfig.get_temp_file_url_max_requests}}};return{name:Rn,context:t,getAPIs:Nn.bind(null,t)}}(e))}var Dn,Ln=Symbol.for("UNSET_FIELD_NAME"),Bn=Symbol.for("AGGREGATE"),kn=Symbol.for("AGGREGATE_PIPELINE"),Mn=Symbol.for("AGGREGATE_PIPELINE_STAGE"),Fn=Symbol.for("UPDATE_COMMAND"),jn=Symbol.for("QUERY_COMMAND"),Un=Symbol.for("LOGIC_COMMAND"),$n=Symbol.for("AGGREGATE_COMMAND"),Wn=Symbol.for("PROJECT_COMMAND"),qn=Symbol.for("GEO_POINT"),Hn=Symbol.for("GEO_LINESTRING"),Gn=Symbol.for("GEO_POLYGON"),Qn=Symbol.for("GEO_MULTIPOINT"),zn=Symbol.for("GEO_MULTILINESTRING"),Yn=Symbol.for("GEO_MULTIPOLYGON"),Kn=Symbol.for("SERVER_DATE"),Vn=Symbol.for("REGEXP");!function(e){e.AND="and",e.OR="or",e.NOT="not",e.NOR="nor"}(Dn||(Dn={}));var Jn=[Dn.AND,Dn.OR,Dn.NOT,Dn.NOR],Xn=new Set(Jn);class Zn{constructor(e,t,r){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=Un,this.__safe_props__=void 0,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=r||Ln}_setFieldName(e){var t=this.operands.map((t=>t===Dn.AND||t===Dn.OR?t._setFieldName(e):t));return new Zn(this.operator,t,e)}and(...e){K(arguments[0],"expressions","and");var t=w(arguments[0])?arguments[0]:Array.from(arguments);return new Zn(Dn.AND,[this,...t],this.fieldName)}or(...e){K(arguments[0],"expressions","or");var t=w(arguments[0])?arguments[0]:Array.from(arguments);return new Zn(Dn.OR,[this,...t],this.fieldName)}nor(...e){K(arguments[0],"expressions","nor");var t=w(arguments[0])?arguments[0]:Array.from(arguments);return new Zn(Dn.NOR,[this,...t],this.fieldName)}not(e){return K(e,"expression","not"),new Zn(Dn.NOT,[e],this.fieldName)}toJSON(){}}function eo(e){return e&&e instanceof Zn&&e._internalType===Un}var to;!function(e){e.EQ="eq",e.NEQ="neq",e.GT="gt",e.GTE="gte",e.LT="lt",e.LTE="lte",e.IN="in",e.NIN="nin",e.GEO_NEAR="geoNear",e.GEO_WITHIN="geoWithin",e.GEO_INTERSECTS="geoIntersects",e.EXISTS="exists",e.MOD="mod",e.ALL="all",e.ELEM_MATCH="elemMatch",e.SIZE="size",e.EXPR="expr"}(to||(to={}));var ro=[to.EQ,to.NEQ,to.GT,to.GTE,to.LT,to.LTE,to.IN,to.NIN,to.GEO_NEAR,to.GEO_WITHIN,to.GEO_INTERSECTS,to.EXISTS,to.MOD,to.ALL,to.ELEM_MATCH,to.SIZE],no=new Set(ro);new Set([...no,...Xn]);class oo extends Zn{constructor(e,t,r){super(e,t,r),this.operator=void 0,this.__safe_props__=void 0,this.operator=e,this._internalType=jn}_setFieldName(e){return new oo(this.operator,this.operands,e)}eq(e){var t=new oo(to.EQ,[e],this.fieldName);return this.and(t)}neq(e){var t=new oo(to.NEQ,[e],this.fieldName);return this.and(t)}gt(e){var t=new oo(to.GT,[e],this.fieldName);return this.and(t)}gte(e){var t=new oo(to.GTE,[e],this.fieldName);return this.and(t)}lt(e){var t=new oo(to.LT,[e],this.fieldName);return this.and(t)}lte(e){var t=new oo(to.LTE,[e],this.fieldName);return this.and(t)}in(e){Y(e,"array");var t=new oo(to.IN,e,this.fieldName);return this.and(t)}nin(e){Y(e,"array");var t=new oo(to.NIN,e,this.fieldName);return this.and(t)}geoNear(e){var t=new oo(to.GEO_NEAR,[e],this.fieldName);return this.and(t)}geoWithin(e){var t=new oo(to.GEO_WITHIN,[e],this.fieldName);return this.and(t)}geoIntersects(e){var t=new oo(to.GEO_INTERSECTS,[e],this.fieldName);return this.and(t)}exists(e){var t=new oo(to.EXISTS,[e],this.fieldName);return this.and(t)}mod(e,t){var r=new oo(to.MOD,[e,t],this.fieldName);return this.and(r)}all(e){var t=new oo(to.ALL,e,this.fieldName);return this.and(t)}elemMatch(e){var t=new oo(to.ELEM_MATCH,[e],this.fieldName);return this.and(t)}size(e){var t=new oo(to.SIZE,[e],this.fieldName);return this.and(t)}}function io(e){return e&&e instanceof oo&&e._internalType===jn}var ao;!function(e){e.SET="set",e.REMOVE="remove",e.INC="inc",e.MUL="mul",e.MIN="min",e.MAX="max",e.RENAME="rename",e.BIT="bit",e.PUSH="push",e.POP="pop",e.SHIFT="shift",e.UNSHIFT="unshift",e.ADD_TO_SET="addToSet",e.PULL="pull",e.PULL_ALL="pullAll"}(ao||(ao={}));new Set([ao.SET,ao.REMOVE,ao.INC,ao.MUL,ao.MIN,ao.MAX,ao.RENAME,ao.BIT,ao.PUSH,ao.POP,ao.SHIFT,ao.UNSHIFT,ao.ADD_TO_SET,ao.PULL,ao.PULL_ALL]);class so{constructor(e,t,r){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=Fn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=r||Ln}_setFieldName(e){return new so(this.operator,this.operands,e)}toJSON(){}}function lo(e){return e&&e instanceof so&&e._internalType===Fn}var uo;!function(e){e.ABS="abs",e.ADD="add",e.ADDTOSET="addToSet",e.ALLELEMENTSTRUE="allElementsTrue",e.AND="and",e.ANYELEMENTTRUE="anyElementTrue",e.ARRAYELEMAT="arrayElemAt",e.ARRAYTOOBJECT="arrayToObject",e.AVG="avg",e.CEIL="ceil",e.CMP="cmp",e.CONCAT="concat",e.CONCATARRAYS="concatArrays",e.COND="cond",e.CONVERT="convert",e.DATEFROMPARTS="dateFromParts",e.DATETOPARTS="dateToParts",e.DATEFROMSTRING="dateFromString",e.DATETOSTRING="dateToString",e.DAYOFMONTH="dayOfMonth",e.DAYOFWEEK="dayOfWeek",e.DAYOFYEAR="dayOfYear",e.DIVIDE="divide",e.EQ="eq",e.EXP="exp",e.FILTER="filter",e.FIRST="first",e.FLOOR="floor",e.GT="gt",e.GTE="gte",e.HOUR="hour",e.IFNULL="ifNull",e.IN="in",e.INDEXOFARRAY="indexOfArray",e.INDEXOFBYTES="indexOfBytes",e.INDEXOFCP="indexOfCP",e.ISARRAY="isArray",e.ISODAYOFWEEK="isoDayOfWeek",e.ISOWEEK="isoWeek",e.ISOWEEKYEAR="isoWeekYear",e.LAST="last",e.LET="let",e.LITERAL="literal",e.LN="ln",e.LOG="log",e.LOG10="log10",e.LT="lt",e.LTE="lte",e.LTRIM="ltrim",e.MAP="map",e.MAX="max",e.MERGEOBJECTS="mergeObjects",e.META="meta",e.MIN="min",e.MILLISECOND="millisecond",e.MINUTE="minute",e.MOD="mod",e.MONTH="month",e.MULTIPLY="multiply",e.NEQ="ne",e.NOT="not",e.OBJECTTOARRAY="objectToArray",e.OR="or",e.POW="pow",e.PUSH="push",e.RANGE="range",e.REDUCE="reduce",e.REVERSEARRAY="reverseArray",e.RTRIM="rtrim",e.SECOND="second",e.SETDIFFERENCE="setDifference",e.SETEQUALS="setEquals",e.SETINTERSECTION="setIntersection",e.SETISSUBSET="setIsSubset",e.SETUNION="setUnion",e.SIZE="size",e.SLICE="slice",e.SPLIT="split",e.SQRT="sqrt",e.STDDEVPOP="stdDevPop",e.STDDEVSAMP="stdDevSamp",e.STRCASECMP="strcasecmp",e.STRLENBYTES="strLenBytes",e.STRLENCP="strLenCP",e.SUBSTR="substr",e.SUBSTRBYTES="substrBytes",e.SUBSTRCP="substrCP",e.SUBTRACT="subtract",e.SUM="sum",e.SWITCH="switch",e.TOBOOL="toBool",e.TODATE="toDate",e.TODECIMAL="toDecimal",e.TODOUBLE="toDouble",e.TOINT="toInt",e.TOLONG="toLong",e.TOOBJECTID="toObjectId",e.TOSTRING="toString",e.TOLOWER="toLower",e.TOUPPER="toUpper",e.TRIM="trim",e.TRUNC="trunc",e.TYPE="type",e.WEEK="week",e.YEAR="year",e.ZIP="zip"}(uo||(uo={}));uo.ABS,uo.ADD,uo.ADDTOSET,uo.ALLELEMENTSTRUE,uo.AND,uo.ANYELEMENTTRUE,uo.ARRAYELEMAT,uo.ARRAYTOOBJECT,uo.AVG,uo.CEIL,uo.CMP,uo.CONCAT,uo.CONCATARRAYS,uo.COND,uo.CONVERT,uo.DATEFROMPARTS,uo.DATETOPARTS,uo.DATEFROMSTRING,uo.DATETOSTRING,uo.DAYOFMONTH,uo.DAYOFWEEK,uo.DAYOFYEAR,uo.DIVIDE,uo.EQ,uo.EXP,uo.FILTER,uo.FIRST,uo.FLOOR,uo.GT,uo.GTE,uo.HOUR,uo.IFNULL,uo.IN,uo.INDEXOFARRAY,uo.INDEXOFBYTES,uo.INDEXOFCP,uo.ISARRAY,uo.ISODAYOFWEEK,uo.ISOWEEK,uo.ISOWEEKYEAR,uo.LAST,uo.LET,uo.LITERAL,uo.LN,uo.LOG,uo.LOG10,uo.LT,uo.LTE,uo.LTRIM,uo.MAP,uo.MAX,uo.MERGEOBJECTS,uo.META,uo.MIN,uo.MILLISECOND,uo.MINUTE,uo.MOD,uo.MONTH,uo.MULTIPLY,uo.NEQ,uo.NOT,uo.OBJECTTOARRAY,uo.OR,uo.POW,uo.PUSH,uo.RANGE,uo.REDUCE,uo.REVERSEARRAY,uo.RTRIM,uo.SECOND,uo.SETDIFFERENCE,uo.SETEQUALS,uo.SETINTERSECTION,uo.SETISSUBSET,uo.SETUNION,uo.SIZE,uo.SLICE,uo.SPLIT,uo.SQRT,uo.STDDEVPOP,uo.STDDEVSAMP,uo.STRCASECMP,uo.STRLENBYTES,uo.STRLENCP,uo.SUBSTR,uo.SUBSTRBYTES,uo.SUBSTRCP,uo.SUBTRACT,uo.SUM,uo.SWITCH,uo.TOBOOL,uo.TODATE,uo.TODECIMAL,uo.TODOUBLE,uo.TOINT,uo.TOLONG,uo.TOOBJECTID,uo.TOSTRING,uo.TOLOWER,uo.TOUPPER,uo.TRIM,uo.TRUNC,uo.TYPE,uo.WEEK,uo.YEAR,uo.ZIP;class co{constructor(e,t,r){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=$n,this.__safe_props__=void 0,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=r||Ln}_setFieldName(e){return new co(this.operator,this.operands,e)}}function po(e){return e&&e instanceof co&&e._internalType===$n}var fo;!function(e){e.SLICE="slice"}(fo||(fo={}));new Set([fo.SLICE]);class ho{constructor(e,t,r){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this.__safe_props__=void 0,this._internalType=Wn,this.operator=e,this.operands=t,this.fieldName=r||Ln}_setFieldName(e){return new ho(this.operator,this.operands,e)}}function _o(e){return e&&e instanceof ho&&e._internalType===Wn}var go,vo,mo;function yo(e){return bo.apply(this,arguments)}function bo(){return(bo=c()((function*(e){var{env:t,collectionName:r,data:n,instanceContext:o,timing:i}=e,a=JSON.stringify(n);V({input:a,max:o.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:`${(o.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});var s={collection_name:r,data:a},l=JSON.stringify(s);i.tunnelStartTime=+new Date;var u=yield o.serviceContext.request({apiName:"tcbapi_db_adddocument",serviceName:o.serviceContext.name,serializedReqData:l,requireDataNotEmpty:!0,env:t||o.serviceContext.env});i.tunnelEndTime=+new Date;var c=u.data;return i.tunnelTimeNoCSNetCost=c.baseresponse.stat.qbase_cost_time,{_id:c._id_type===vo.NUMBER?c._id_number:c._id}}))).apply(this,arguments)}function wo(e){return Ao.apply(this,arguments)}function Ao(){return Ao=c()((function*(e){var{collectionName:t,query:n,options:o,instanceContext:i,timing:a,env:s}=e,l=Ft()?e.explain:void 0,u=o&&o.multi,c=JSON.stringify({collection_name:t,query:JSON.stringify(n),multi:u,query_type:u?go.WHERE:go.DOC,explain:l});a.tunnelStartTime=+new Date;var d=yield i.serviceContext.request({apiName:"tcbapi_db_deletedocument",serviceName:i.serviceContext.name,serializedReqData:c,requireDataNotEmpty:!0,env:s||i.serviceContext.env});if(a.tunnelEndTime=+new Date,l){var{EJSON:p}=r(967);return p.deserialize(d.data)}var f=d.data;return a.tunnelTimeNoCSNetCost=f.baseresponse.stat.qbase_cost_time,{removed:f.deleted}})),Ao.apply(this,arguments)}function Eo(e){return Io.apply(this,arguments)}function Io(){return Io=c()((function*(e){var{env:t,collectionName:n,query:o,options:i={},instanceContext:a,timing:s,queryType:l}=e,u=Ft()?e.explain:void 0,c={collection_name:n,query:JSON.stringify(o),query_type:l,explain:u};i.offset&&(c.offset=i.offset),i.limit&&(c.limit=i.limit),i.order&&(c.order=i.order),i.projection&&(c.projection=JSON.stringify(i.projection));var d=JSON.stringify(c);s.tunnelStartTime=+new Date;var p=yield a.serviceContext.request({apiName:"tcbapi_db_querydocument",serviceName:a.serviceContext.name,serializedReqData:d,requireDataNotEmpty:!0,env:t||a.serviceContext.env});if(s.tunnelEndTime=+new Date,u){var{EJSON:f}=r(967);return f.deserialize(p.data)}var h=p.data;s.tunnelTimeNoCSNetCost=h.baseresponse.stat.qbase_cost_time;var _=h.data_list?JSON.parse(h.data_list):[];return{list:_=a.engine.Decoder.decode(_),offset:h.offset,limit:h.limit,total:h.total}})),Io.apply(this,arguments)}function So(e){return Co.apply(this,arguments)}function Co(){return Co=c()((function*(e){var{env:t,collectionName:n,query:o,data:i,options:a={},instanceContext:s,timing:l,queryType:u}=e,c=Ft()?e.explain:void 0,d=JSON.stringify(i);V({input:d,max:s.serviceContext.appConfig.docSizeLimit,name:"update expression",maxWording:`${(s.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});var p={collection_name:n,query:JSON.stringify(o),data:d,query_type:u,explain:c};p.multi=!1!==a.multi,p.merge=!1!==a.merge,a.upsert&&(p.upsert=a.upsert);var f=JSON.stringify(p);l.tunnelStartTime=+new Date;var h=yield s.serviceContext.request({apiName:"tcbapi_db_updatedocument",serviceName:s.serviceContext.name,serializedReqData:f,requireDataNotEmpty:!0,env:t||s.serviceContext.env});if(l.tunnelEndTime=+new Date,c){var{EJSON:_}=r(967);return _.deserialize(h.data)}var g=h.data;return l.tunnelTimeNoCSNetCost=g.baseresponse.stat.qbase_cost_time,{updated:g.updated}})),Co.apply(this,arguments)}function To(e){return Oo.apply(this,arguments)}function Oo(){return(Oo=c()((function*(e){var{env:t,collectionName:r,_id:n,data:o,options:i={},instanceContext:a,timing:s}=e,l=JSON.stringify(o);V({input:l,max:a.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:`${(a.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});var u=g(n),c={collection_name:r,_id_type:u?vo.NUMBER:vo.STRING,data:l};u?c._id_number=n:c._id=n;var d=JSON.stringify(c);s.tunnelStartTime=+new Date;var p=yield a.serviceContext.request({apiName:"tcbapi_db_setdocument",serviceName:a.serviceContext.name,serializedReqData:d,requireDataNotEmpty:!0,env:t||a.serviceContext.env});s.tunnelEndTime=+new Date;var f=p.data;return s.tunnelTimeNoCSNetCost=f.baseresponse.stat.qbase_cost_time,{_id:f._id_type===vo.NUMBER?f._id_number:f._id,updated:f._id?0:1,created:f._id?1:0}}))).apply(this,arguments)}function xo(e){return No.apply(this,arguments)}function No(){return No=c()((function*(e){var{env:t,collectionName:n,query:o,instanceContext:i,timing:a}=e,s=Ft()?e.explain:void 0,l={collection_name:n,query:JSON.stringify(o),query_type:go.WHERE,explain:s},u=JSON.stringify(l);a.tunnelStartTime=+new Date;var c=yield i.serviceContext.request({apiName:"tcbapi_db_countdocument",serviceName:i.serviceContext.name,serializedReqData:u,requireDataNotEmpty:!0,env:t||i.serviceContext.env});if(a.tunnelEndTime=+new Date,s){var{EJSON:d}=r(967);return d.deserialize(c.data)}var p=c.data;return a.tunnelTimeNoCSNetCost=p.baseresponse.stat.qbase_cost_time,{total:p.total}})),No.apply(this,arguments)}function Ro(e){return Po.apply(this,arguments)}function Po(){return(Po=c()((function*(e){var{env:t,collectionName:n,stages:o,instanceContext:i,timing:a}=e,s=Ft()?e.explain:void 0,l={collection_name:n,stages:o.map((e=>{for(var t in e)return{stage_key:t,stage_value:JSON.stringify(e[t])};throw new Error(`empty encoded stage (${JSON.stringify(e)})`)})),explain:s},u=JSON.stringify(l);a.tunnelStartTime=+new Date;var c=yield i.serviceContext.request({apiName:"tcbapi_db_aggregate",serviceName:i.serviceContext.name,serializedReqData:u,requireDataNotEmpty:!0,env:t||i.serviceContext.env});if(a.tunnelEndTime=+new Date,s){var{EJSON:d}=r(967);return d.deserialize(c.data)}var p=c.data;a.tunnelTimeNoCSNetCost=p.baseresponse.stat.qbase_cost_time;var{EJSON:f}=r(967);return{list:JSON.parse(p.list).map((e=>f.parse(e)))}}))).apply(this,arguments)}function Do(){return(Do=c()((function*(e,t){var r=(yield e.request({apiName:"tcbapi_db_get_realtime_connection",env:t||e.env,serviceName:e.name,serializedReqData:JSON.stringify({}),requireDataNotEmpty:!0})).data;return{envId:r.env_id,secretVersion:r.secret_version,signStr:r.sign_str,wsUrl:r.ws_url}}))).apply(this,arguments)}!function(e){e[e.WHERE=0]="WHERE",e[e.DOC=1]="DOC"}(go||(go={})),function(e){e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(vo||(vo={})),function(e){e[e.ASC=0]="ASC",e[e.DESC=1]="DESC"}(mo||(mo={}));var Lo=e=>{class t extends ko{constructor(e,t){super(t),this.collection=void 0,this._internalType=Bn,this.collection=e}pushStage(e,r){return new t(this.collection,[...this._stages,new Bo(e,r)])}end(t={}){var r="collection.aggregate",n={apiStartTime:+new Date},o=()=>Ro({env:e.database.config.env,collectionName:this.collection.collectionName,stages:e.engine.AggregateSerializer.encodeStages(this._stages),instanceContext:e,timing:n,explain:t.explain});var i=z(t),a=new Promise(function(){var e=c()((function*(e,i){try{var a=yield o();if(t.explain&&Ft())return e(a);e({list:a.list,errMsg:ar(r)})}catch(e){i(O(e,r))}finally{Vt(s()(s()({},n),{},{apiEndTime:+new Date,apiName:`cloud.db.${r}`}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{G(r,t,e)})).catch((e=>{Q(r,t,e)}))}}return t};class Bo{constructor(e,t){this.stage=void 0,this.val=void 0,this._internalType=Mn,this.stage=e,this.val=t}}class ko{constructor(e){this._stages=void 0,this._internalType=kn,this.__safe_props__=void 0,this._stages=e}pushStage(e,t){return new ko([...this._stages,new Bo(e,t)])}addFields(e){return this.pushStage("addFields",e)}bucket(e){return this.pushStage("bucket",e)}bucketAuto(e){return this.pushStage("bucketAuto",e)}collStats(e){return this.pushStage("collStats",e)}count(e){return this.pushStage("count",e)}facet(e){return this.pushStage("facet",e)}geoNear(e){return this.pushStage("geoNear",e)}graphLookup(e){return this.pushStage("graphLookup",e)}group(e){return this.pushStage("group",e)}indexStats(){return this.pushStage("indexStats",{})}limit(e){return this.pushStage("limit",e)}lookup(e){return this.pushStage("lookup",e)}match(e){return this.pushStage("match",e)}out(e){return this.pushStage("out",e)}project(e){return this.pushStage("project",e)}redact(e){return this.pushStage("redact",e)}replaceRoot(e){return this.pushStage("replaceRoot",e)}sample(e){return this.pushStage("sample",e)}skip(e){return this.pushStage("skip",e)}sort(e){return this.pushStage("sort",e)}sortByCount(e){return this.pushStage("sortByCount",e)}unwind(e){return this.pushStage("unwind",e)}end(){}}class Mo extends ko{constructor(e,t=!1){super(e),this._sealed=void 0,this._sealed=t}pushStage(e,t){if(this._sealed)throw new Error("pushing new stage is not allowed after calling 'done()'");return new Mo([...this._stages,new Bo(e,t)])}done(){return new Mo(this._stages,!0)}}var Fo=e=>e&&e._internalType===kn,jo=e=>e&&e._internalType===Mn,Uo=new Set(["each","position","slice","sort"]),$o={eq:e=>new oo(to.EQ,[e]),neq:e=>new oo(to.NEQ,[e]),lt:e=>new oo(to.LT,[e]),lte:e=>new oo(to.LTE,[e]),gt:e=>new oo(to.GT,[e]),gte:e=>new oo(to.GTE,[e]),in:e=>new oo(to.IN,e),nin:e=>new oo(to.NIN,e),geoNear:e=>new oo(to.GEO_NEAR,[e]),geoWithin:e=>new oo(to.GEO_WITHIN,[e]),geoIntersects:e=>new oo(to.GEO_INTERSECTS,[e]),and(...e){var t=w(arguments[0])?arguments[0]:Array.from(arguments);return new Zn(Dn.AND,t)},or(...e){var t=w(arguments[0])?arguments[0]:Array.from(arguments);return new Zn(Dn.OR,t)},nor(...e){var t=w(arguments[0])?arguments[0]:Array.from(arguments);return new Zn(Dn.NOR,t)},not:e=>new Zn(Dn.NOT,[e]),exists:e=>new oo(to.EXISTS,[e]),mod:(e,t)=>new oo(to.MOD,[e,t]),all:e=>new oo(to.ALL,e),elemMatch:e=>new oo(to.ELEM_MATCH,[e]),size:e=>new oo(to.SIZE,[e]),expr:e=>new oo(to.EXPR,[e]),set:e=>new so(ao.SET,[e]),remove:()=>new so(ao.REMOVE,[]),inc:e=>new so(ao.INC,[e]),mul:e=>new so(ao.MUL,[e]),min:e=>new so(ao.MIN,[e]),max:e=>new so(ao.MAX,[e]),rename:e=>new so(ao.RENAME,[e]),bit:e=>new so(ao.BIT,[e]),push(e){var t={};if(w(e))t.each=e;else if(h(e)&&w(e.each)){var r=Object.keys(e);if(1===r.length)t=e;else{var n=!1;for(var o of r)if(!Uo.has(o)){n=!0;break}t=n?[e]:e}}else t.each=[e];return new so(ao.PUSH,[t])},pop:()=>new so(ao.POP,[]),shift:()=>new so(ao.SHIFT,[]),unshift(...e){var t=w(arguments[0])?arguments[0]:Array.from(arguments);return new so(ao.UNSHIFT,t)},addToSet:e=>new so(ao.ADD_TO_SET,[e]),pull:e=>new so(ao.PULL,[e]),pullAll:e=>new so(ao.PULL_ALL,[e]),project:{slice:e=>new ho(fo.SLICE,[e])},aggregate:{pipeline:()=>new Mo([]),abs:e=>new co(uo.ABS,[e]),add:e=>new co(uo.ADD,[e]),addToSet:e=>new co(uo.ADDTOSET,[e]),allElementsTrue:e=>new co(uo.ALLELEMENTSTRUE,[e]),and:e=>new co(uo.AND,[e]),anyElementTrue:e=>new co(uo.ANYELEMENTTRUE,[e]),arrayElemAt:e=>new co(uo.ARRAYELEMAT,[e]),arrayToObject:e=>new co(uo.ARRAYTOOBJECT,[e]),avg:e=>new co(uo.AVG,[e]),ceil:e=>new co(uo.CEIL,[e]),cmp:e=>new co(uo.CMP,[e]),concat:e=>new co(uo.CONCAT,[e]),concatArrays:e=>new co(uo.CONCATARRAYS,[e]),cond:e=>new co(uo.COND,[e]),convert:e=>new co(uo.CONVERT,[e]),dateFromParts:e=>new co(uo.DATEFROMPARTS,[e]),dateToParts:e=>new co(uo.DATETOPARTS,[e]),dateFromString:e=>new co(uo.DATEFROMSTRING,[e]),dateToString:e=>new co(uo.DATETOSTRING,[e]),dayOfMonth:e=>new co(uo.DAYOFMONTH,[e]),dayOfWeek:e=>new co(uo.DAYOFWEEK,[e]),dayOfYear:e=>new co(uo.DAYOFYEAR,[e]),divide:e=>new co(uo.DIVIDE,[e]),eq:e=>new co(uo.EQ,[e]),exp:e=>new co(uo.EXP,[e]),filter:e=>new co(uo.FILTER,[e]),first:e=>new co(uo.FIRST,[e]),floor:e=>new co(uo.FLOOR,[e]),gt:e=>new co(uo.GT,[e]),gte:e=>new co(uo.GTE,[e]),hour:e=>new co(uo.HOUR,[e]),ifNull:e=>new co(uo.IFNULL,[e]),in:e=>new co(uo.IN,[e]),indexOfArray:e=>new co(uo.INDEXOFARRAY,[e]),indexOfBytes:e=>new co(uo.INDEXOFBYTES,[e]),indexOfCP:e=>new co(uo.INDEXOFCP,[e]),isArray:e=>new co(uo.ISARRAY,[e]),isoDayOfWeek:e=>new co(uo.ISODAYOFWEEK,[e]),isoWeek:e=>new co(uo.ISOWEEK,[e]),isoWeekYear:e=>new co(uo.ISOWEEKYEAR,[e]),last:e=>new co(uo.LAST,[e]),let:e=>new co(uo.LET,[e]),literal:e=>new co(uo.LITERAL,[e]),ln:e=>new co(uo.LN,[e]),log:e=>new co(uo.LOG,[e]),log10:e=>new co(uo.LOG10,[e]),lt:e=>new co(uo.LT,[e]),lte:e=>new co(uo.LTE,[e]),ltrim:e=>new co(uo.LTRIM,[e]),map:e=>new co(uo.MAP,[e]),max:e=>new co(uo.MAX,[e]),mergeObjects:e=>new co(uo.MERGEOBJECTS,[e]),meta:e=>new co(uo.META,[e]),min:e=>new co(uo.MIN,[e]),millisecond:e=>new co(uo.MILLISECOND,[e]),minute:e=>new co(uo.MINUTE,[e]),mod:e=>new co(uo.MOD,[e]),month:e=>new co(uo.MONTH,[e]),multiply:e=>new co(uo.MULTIPLY,[e]),neq:e=>new co(uo.NEQ,[e]),not:e=>new co(uo.NOT,[e]),objectToArray:e=>new co(uo.OBJECTTOARRAY,[e]),or:e=>new co(uo.OR,[e]),pow:e=>new co(uo.POW,[e]),push:e=>new co(uo.PUSH,[e]),range:e=>new co(uo.RANGE,[e]),reduce:e=>new co(uo.REDUCE,[e]),reverseArray:e=>new co(uo.REVERSEARRAY,[e]),rtrim:e=>new co(uo.RTRIM,[e]),second:e=>new co(uo.SECOND,[e]),setDifference:e=>new co(uo.SETDIFFERENCE,[e]),setEquals:e=>new co(uo.SETEQUALS,[e]),setIntersection:e=>new co(uo.SETINTERSECTION,[e]),setIsSubset:e=>new co(uo.SETISSUBSET,[e]),setUnion:e=>new co(uo.SETUNION,[e]),size:e=>new co(uo.SIZE,[e]),slice:e=>new co(uo.SLICE,[e]),split:e=>new co(uo.SPLIT,[e]),sqrt:e=>new co(uo.SQRT,[e]),stdDevPop:e=>new co(uo.STDDEVPOP,[e]),stdDevSamp:e=>new co(uo.STDDEVSAMP,[e]),strcasecmp:e=>new co(uo.STRCASECMP,[e]),strLenBytes:e=>new co(uo.STRLENBYTES,[e]),strLenCP:e=>new co(uo.STRLENCP,[e]),substr:e=>new co(uo.SUBSTR,[e]),substrBytes:e=>new co(uo.SUBSTRBYTES,[e]),substrCP:e=>new co(uo.SUBSTRCP,[e]),subtract:e=>new co(uo.SUBTRACT,[e]),sum:e=>new co(uo.SUM,[e]),switch:e=>new co(uo.SWITCH,[e]),toBool:e=>new co(uo.TOBOOL,[e]),toDate:e=>new co(uo.TODATE,[e]),toDecimal:e=>new co(uo.TODECIMAL,[e]),toDouble:e=>new co(uo.TODOUBLE,[e]),toInt:e=>new co(uo.TOINT,[e]),toLong:e=>new co(uo.TOLONG,[e]),toObjectId:e=>new co(uo.TOOBJECTID,[e]),toString:e=>new co(uo.TOSTRING,[e]),toLower:e=>new co(uo.TOLOWER,[e]),toUpper:e=>new co(uo.TOUPPER,[e]),trim:e=>new co(uo.TRIM,[e]),trunc:e=>new co(uo.TRUNC,[e]),type:e=>new co(uo.TYPE,[e]),week:e=>new co(uo.WEEK,[e]),year:e=>new co(uo.YEAR,[e]),zip:e=>new co(uo.ZIP,[e])}};function Wo(e){return new qo(e)}class qo{constructor(e={offset:0}){this.options=void 0,Y(e,"object","serverDate.options"),this.options=e}get _internalType(){return Kn}toJSON(){return{$date:this.options}}}function Ho(e,t){return di(e)?ii(e):new Go(e,t)}class Go{constructor(e,t){this.longitude=void 0,this.latitude=void 0,this._internalType=qn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}});var r=e,n=t;Object.defineProperties(this,{longitude:{enumerable:!0,configurable:!1,get:()=>r,set(e){if(Y(e,"number","longitude"),e>180||e<-180)throw new C({errMsg:"longitude should be a number ranges from -180 to 180"})}},latitude:{enumerable:!0,configurable:!1,get:()=>n,set(e){if(Y(e,"number","latitude"),e>90||e<-90)throw new C({errMsg:"latitude should be a number ranges from -90 to 90"})}}}),this.longitude=r,this.latitude=n}toJSON(){return{type:"Point",coordinates:[(e=this).longitude,e.latitude]};var e}toString(){return JSON.stringify(this.toJSON())}}function Qo(e){return pi(e)?ai(e):new zo(e)}class zo{constructor(e){this.points=void 0,this._internalType=Qn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=e}toJSON(){return{type:"MultiPoint",coordinates:this.points.map((e=>[e.longitude,e.latitude]))}}toString(){return JSON.stringify(this.toJSON())}}function Yo(e){return fi(e)?si(e):new Ko(e)}class Ko{constructor(e){this.points=void 0,this._internalType=Hn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=e}toJSON(){return{type:"LineString",coordinates:this.points.map((e=>[e.longitude,e.latitude]))}}toString(){return JSON.stringify(this.toJSON())}}function Vo(e){return hi(e)?li(e):new Jo(e)}class Jo{constructor(e){this.lines=void 0,this._internalType=zn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=e}toJSON(){return{type:"MultiLineString",coordinates:this.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))}}toString(){return JSON.stringify(this.toJSON())}}function Xo(e){return _i(e)?ui(e):new Zo(e)}class Zo{constructor(e){this.lines=void 0,this._internalType=Gn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=e}toJSON(){return{type:"Polygon",coordinates:this.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))}}toString(){return JSON.stringify(this.toJSON())}}function ei(e){return gi(e)?ci(e):new ti(e)}class ti{constructor(e){this.polygons=void 0,this._internalType=Yn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.polygons=e}toJSON(){return{type:"MultiPolygon",coordinates:this.polygons.map((e=>e.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))))}}toString(){return JSON.stringify(this.toJSON())}}var ri,ni,oi=undefined;function ii(e){return Ho(e.coordinates[0],e.coordinates[1])}function ai(e){return Qo(e.coordinates.map((e=>Ho(e[0],e[1]))))}function si(e){return Yo(e.coordinates.map((e=>Ho(e[0],e[1]))))}function li(e){return Vo(e.coordinates.map((e=>Yo(e.map((e=>Ho(e[0],e[1])))))))}function ui(e){return Xo(e.coordinates.map((e=>Yo(e.map((e=>Ho(e[0],e[1])))))))}function ci(e){return ei(e.coordinates.map((e=>Xo(e.map((e=>Yo(e.map((e=>Ho(e[0],e[1]))))))))))}function di(e){return h(e)&&vi(e.coordinates)}function pi(e){return h(e)&&mi(e.coordinates)}function fi(e){return h(e)&&yi(e.coordinates)}function hi(e){return h(e)&&bi(e.coordinates)}function _i(e){return h(e)&&wi(e.coordinates)}function gi(e){return h(e)&&(t=e.coordinates,w(t)&&t.every(wi));var t}function vi(e){return w(e)&&g(e[0])&&g(e[1])}function mi(e){return w(e)&&e.every(vi)}function yi(e){return mi(e)}function bi(e){return w(e)&&e.every(yi)}function wi(e){return bi(e)}function Ai(e){return Ei(e,[e])}function Ei(e,t){if(!I(e)){if(A(e))return{$date:+e};if(E(e))return{$regex:e.source,$options:e.flags};if(w(e))return e.map((e=>{if(t.indexOf(e)>-1)throw new C({errCode:S.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});return Ei(e,[...t,e])}));if(h(e)){var r=s()({},e);for(var n in r){if(t.indexOf(r[n])>-1)throw new C({errCode:S.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});r[n]=Ei(r[n],[...t,r[n]])}return r}return e}switch(e._internalType){case qn:case Qn:case Hn:case zn:case Gn:case Yn:return e.toJSON();case Kn:return{$date:e.options};case Vn:return{$regex:e.regexp,$options:e.options};default:return e.toJSON?e.toJSON():e}}function Ii(e,t,r,n){var o=s()({},e);for(var i in e)if(!/^\$/.test(i)){var a=e[i];if(a&&h(a)&&!t(a)){if(n.indexOf(a)>-1)throw new C({errCode:S.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});var l=Ii(a,t,[...r,i],[...n,a]);o[i]=l;var u=!1;for(var c in l)/^\$/.test(c)?u=!0:(o[`${i}.${c}`]=l[c],delete o[i][c]);u||delete o[i]}}return o}function Si(e){return Ii(e,Oi,[],[e])}function Ci(e){return Ii(e,(e=>!1),[],[e])}function Ti(e,t,r){for(var n in t[r]||delete e[r],t)e[n]?w(e[n])?e[n].push(t[n]):h(e[n])?h(t[n])?Object.assign(e[n],t[n]):(console.warn(`unmergable condition, query is object but condition is ${f(t)}, can only overwrite`,t,r),e[n]=t[n]):(console.warn(`to-merge query is of type ${f(e)}, can only overwrite`,e,t,r),e[n]=t[n]):e[n]=t[n]}function Oi(e){return I(e)||A(e)||E(e)}function xi(e){return Ai(e)}function Ni(e){return function(e){var t=s()({},e);for(var r in t)switch(r){case"$date":switch(f(t[r])){case"number":return new Date(t[r]);case"object":return Wo(t[r])}break;case"type":switch(t.coordinates,t.type){case"Point":if(di(t))return ii(t);break;case"MultiPoint":if(pi(t))return ai(t);break;case"LineString":if(fi(t))return si(t);break;case"MultiLineString":if(hi(t))return li(t);break;case"Polygon":if(_i(t))return ui(t);break;case"MultiPolygon":if(gi(t))return ci(t)}}return e}(e)}function Ri(e,t){return{limit:e._query.limit,offset:e._query.offset,order:Pi(e._query.order||[]),projection:t.engine.ProjectionSerializer.encode(e._field)}}function Pi(e){return e.map((e=>({field:e.fieldPath,direction:e.order===Qa.DESC?mo.DESC:mo.ASC})))}function Di(e){var t=Ci(e);for(var r in t)!0===t[r]||1===t[r]?t[r]=1:!1===t[r]||0===t[r]?t[r]=0:delete t[r];return t}!function(e){e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED"}(ri||(ri={})),function(e){e.CONNECTION_START="connectionStart",e.CONNECTION_SUCCESS="connectionSuccess",e.CONNECTION_FAIL="connectionFail",e.DISCONNECT="disconnect"}(ni||(ni={}));var Li={[ri.DISCONNECTED]:{transitions:[{accept:ni.CONNECTION_START,to:ri.CONNECTING}]},[ri.CONNECTING]:{transitions:[{accept:ni.CONNECTION_SUCCESS,to:ri.CONNECTED},{accept:ni.CONNECTION_FAIL,to:ri.DISCONNECTED},{accept:ni.DISCONNECT,to:ri.DISCONNECTED}]},[ri.CONNECTED]:{transitions:[{accept:ni.DISCONNECT,to:ri.DISCONNECTED},{accept:ni.CONNECTION_FAIL,to:ri.DISCONNECTED}]}};var Bi,ki,Mi,Fi,ji=(Bi=e=>e.replace(/\[(\d+)\]/g,".[$1]").split(".").map((e=>/^\[(\d+)\]$/.test(e)?parseInt(e.substring(1,e.length-1)):e)),ki=new Map,function(e){return ki.has(e)||ki.set(e,Bi(e)),ki.get(e)});function Ui(e,t,r){if(e){if(!Object.prototype.hasOwnProperty.call(e,t)){for(var n=ji(t),o=e,i=0;i<n.length-1;++i){var a=n[i];o[a]||(o[a]="string"==typeof n[i+1]?{}:[]),o=o[a]}return o[n[n.length-1]]=r,e}e[t]=r}}function $i(e,t){if(e){if(!Object.prototype.hasOwnProperty.call(e,t)){for(var r=ji(t),n=e,o=0;o<r.length-1;++o){var i=r[o];if(!n[i])return;n=n[i]}return delete n[r[r.length-1]],e}delete e[t]}}!function(e){e.UNINIT="UNINIT",e.CLOSED="CLOSED",e.INIT_LOGGING_IN="INIT_LOGGING_IN",e.INIT_LOGGED_IN="INIT_LOGGED_IN",e.INIT_LOGIN_FAIL="INIT_LOGIN_FAIL",e.INIT_WATCH_PENDING="INIT_WATCH_PENDING",e.INIT_WATCH_FAIL="INIT_WATCH_FAIL",e.INIT_WATCH_SUCCESS="INIT_WATCH_SUCCESS",e.PAUSED="PAUSED",e.ABNORMAL_WATCH_STATUS="ABNORMAL_WATCH_STATUS",e.REBUILD_LOGGING_IN="REBUILD_LOGGING_IN",e.REBUILD_LOGGED_IN="REBUILD_LOGGED_IN",e.REBUILD_LOGIN_FAIL="REBUILD_LOGIN_FAIL",e.REBUILD_WATCH_PENDING="REBUILD_WATCH_PENDING",e.REBUILD_WATCH_FAIL="REBUILD_WATCH_FAIL",e.REBUILD_WATCH_SUCCESS="REBUILD_WATCH_SUCCESS"}(Mi||(Mi={})),function(e){e.CLOSE="close",e.LOGIN_START="loginStart",e.LOGIN_FAIL="loginFail",e.LOGIN_SUCCESS="loginSuccess",e.INIT_WATCH_START="initWatchStart",e.INIT_WATCH_FAIL="initWatchFail",e.INIT_WATCH_SUCCESS="initWatchSuccess",e.WS_DISCONNECTED="wsDisconnected",e.WS_CONNECTED="wsConnected",e.REBUILD_WATCH_START="rebuildWatchStart",e.REBUILD_WATCH_FAIL="rebuildWatchFail",e.REBUILD_WATCH_SUCCESS="rebuildWatchSuccess",e.NEED_REBUILD_WATCH="needRebuildWatch"}(Fi||(Fi={}));var Wi={accept:Fi.CLOSE,to:Mi.CLOSED},qi={accept:Fi.WS_DISCONNECTED,to:Mi.CLOSED},Hi={accept:Fi.WS_DISCONNECTED,to:Mi.PAUSED},Gi={[Mi.UNINIT]:{transitions:[{accept:Fi.LOGIN_START,to:Mi.INIT_LOGGING_IN},qi,Wi]},[Mi.CLOSED]:{transitions:[Wi]},[Mi.INIT_LOGGING_IN]:{transitions:[{accept:Fi.LOGIN_FAIL,to:Mi.INIT_LOGIN_FAIL},{accept:Fi.LOGIN_SUCCESS,to:Mi.INIT_LOGGED_IN},qi,Wi]},[Mi.INIT_LOGIN_FAIL]:{transitions:[{accept:Fi.LOGIN_START,to:Mi.INIT_LOGGING_IN},qi,Wi]},[Mi.INIT_LOGGED_IN]:{transitions:[{accept:Fi.INIT_WATCH_START,to:Mi.INIT_WATCH_PENDING},qi,Wi]},[Mi.INIT_WATCH_PENDING]:{transitions:[{accept:Fi.INIT_WATCH_FAIL,to:Mi.INIT_WATCH_FAIL},{accept:Fi.INIT_WATCH_SUCCESS,to:Mi.INIT_WATCH_SUCCESS},qi,Wi]},[Mi.INIT_WATCH_FAIL]:{transitions:[{accept:Fi.LOGIN_START,to:Mi.INIT_LOGGING_IN},qi,Wi]},[Mi.INIT_WATCH_SUCCESS]:{transitions:[{accept:Fi.WS_DISCONNECTED,to:Mi.PAUSED},{accept:Fi.NEED_REBUILD_WATCH,to:Mi.ABNORMAL_WATCH_STATUS},Hi,Wi]},[Mi.PAUSED]:{transitions:[{accept:Fi.LOGIN_START,to:Mi.REBUILD_LOGGING_IN},Hi,Wi]},[Mi.ABNORMAL_WATCH_STATUS]:{transitions:[{accept:Fi.LOGIN_START,to:Mi.REBUILD_LOGGING_IN},Hi,Wi]},[Mi.REBUILD_LOGGING_IN]:{transitions:[{accept:Fi.LOGIN_FAIL,to:Mi.REBUILD_LOGIN_FAIL},{accept:Fi.LOGIN_SUCCESS,to:Mi.REBUILD_LOGGED_IN},Hi,Wi]},[Mi.REBUILD_LOGIN_FAIL]:{transitions:[{accept:Fi.LOGIN_START,to:Mi.REBUILD_LOGGING_IN},Hi,Wi]},[Mi.REBUILD_LOGGED_IN]:{transitions:[{accept:Fi.REBUILD_WATCH_START,to:Mi.REBUILD_WATCH_PENDING},Hi,Wi]},[Mi.REBUILD_WATCH_PENDING]:{transitions:[{accept:Fi.REBUILD_WATCH_FAIL,to:Mi.REBUILD_WATCH_FAIL},{accept:Fi.REBUILD_WATCH_SUCCESS,to:Mi.REBUILD_WATCH_SUCCESS},Hi,Wi]},[Mi.REBUILD_WATCH_FAIL]:{transitions:[{accept:Fi.LOGIN_START,to:Mi.REBUILD_LOGGING_IN},Hi,Wi]},[Mi.REBUILD_WATCH_SUCCESS]:{transitions:[{accept:Fi.NEED_REBUILD_WATCH,to:Mi.ABNORMAL_WATCH_STATUS},Hi,Wi]}};class Qi{constructor(e){for(var t in this.currentState=void 0,this.states=void 0,this.listeners=new Set,this.history=void 0,this.currentState=e.initialState,this.states=new Map,e.states)this.states.set(t,{name:t,transitions:new Map(e.states[t].transitions.map((({accept:e,to:t})=>[e,t])))});this.history={options:{enable:!1,limit:100},transitions:[]},e.history&&("boolean"==typeof e.history?e.history&&(this.history.options.enable=!0):Boolean(e.history.enable)&&(void 0===e.history.limit||null===e.history.limit?this.history.options={enable:!0,limit:100}:e.history.limit>0&&(this.history.options={enable:!0,limit:e.history.limit}))),this.history.options.enable&&this.history.transitions.push({state:this.currentState})}transition(e,t){if(t&&(t instanceof Set?!t.has(this.currentState):t!==this.currentState))throw new zi(`current state (${this.currentState}) != expected from state (${t instanceof Set?JSON.stringify([...t]):t})`,"unexpectedFromState");var r="string"==typeof e?{type:e}:e,n=this.states.get(this.currentState),o=n.transitions.get(r.type);if(!o)throw new zi(`current state (${this.currentState}) does not accept "${r.type}"`,"unexpectedInput");this.currentState=o,this.history.options.enable&&(this.history.transitions.push({event:r.type,state:this.currentState}),this.history.transitions.length>this.history.options.limit&&(this.history.transitions.length===this.history.options.limit+1?this.history.transitions.shift():this.history.transitions.splice(0,this.history.transitions.length-this.history.options.limit))),this.listeners.forEach((e=>{try{e({event:r,from:n.name,to:this.currentState})}catch(e){console.error("FSM listener exec error: ",e)}}))}canAccept(e){return this.states.get(this.currentState).transitions.has(e)}subscribe(e){this.listeners.add(e)}unsubscribe(e){this.listeners.delete(e)}getHistoryRepresentation(e){return this.history.options.enable?`states: ${(e.limit?this.history.transitions.slice(-e.limit):this.history.transitions).map((({state:e,event:t})=>`${t?`-(${t})->`:""}${e}`)).join("")}`:""}}class zi extends Error{constructor(e,t,r){super(e),this.type="transition",this.subtype=void 0,this.payload=void 0,this.generic=!0,this.subtype=t,this.payload=r}}function Yi(e=""){return`${e?`${e}_`:""}${+new Date}_${Math.random()}`}var Ki=1128,Vi=1,Ji=2,Xi=3,Zi=4,ea=5,ta=6,ra=7,na=8,oa=9,ia=10,aa=11,sa=12,la=13,ua=14,ca=15,da=16,pa=17,fa=18,ha=30,_a=31,ga=32,va=33,ma=34,ya=35,ba=36,wa=37,Aa=38,Ea=39,Ia=40,Sa=50,Ca=51,Ta=52,Oa=53,xa=54,Na=55,Ra=56,Pa=57,Da=58,La=59,Ba=60;class ka{constructor(e){this.close=void 0,this.onChange=void 0,this.onError=void 0,this.close=e.close,this.onChange=e.onChange,this.onError=e.onError,e.debug&&Object.defineProperty(this,"virtualClient",{get:()=>e.virtualClient})}}class Ma{constructor(e){this.id=void 0,this.docChanges=void 0,this.docs=void 0,this.type=void 0,this.EJSON=void 0,this.requestId=void 0,this.watchId=void 0;var{id:t,docChanges:r,docs:n,type:o,EJSON:i,requestId:a,watchId:s}=e;Object.defineProperties(this,{id:{value:t,writable:!1,enumerable:!0},docChanges:{value:r,writable:!1,enumerable:!0},docs:{value:n,writable:!1,enumerable:!0},type:{value:o,writable:!1,enumerable:!0}}),this.requestId=a,this.watchId=s}}class Fa extends Error{constructor(e){super(`Watch Error ${JSON.stringify(e.msgData)} (requestid: ${e.requestId})`),this.isRealtimeErrorMessageError=!0,this.payload=void 0,this.payload=e}}var ja=e=>e&&e.isRealtimeErrorMessageError,Ua=new Set([Mi.REBUILD_LOGGING_IN,Mi.INIT_LOGGING_IN]),$a=e=>{0};class Wa{constructor(e){var t=this;this.watchId=void 0,this._parentFSM=void 0,this._fsm=void 0,this.envId=void 0,this.collectionName=void 0,this.query=void 0,this.limit=void 0,this.orderBy=void 0,this.queryType=void 0,this.send=void 0,this.login=void 0,this.isWSConnected=void 0,this.getWaitExpectedTimeoutLength=void 0,this.getEJSON=void 0,this.getServiceContext=void 0,this.onWatchStart=void 0,this.onWatchClose=void 0,this.timing=void 0,this.closeWatchInvoked=!1,this.userOnErrorInvoked=!1,this.debug=void 0,this.wsclient=void 0,this.listener=void 0,this._availableRetries=void 0,this._ackTimeoutId=void 0,this._loginInvalidated=!1,this._errors=[],this._parentFSMListener=void 0,this._FSMListener=void 0,this._wsDisconnectionTS=void 0,this.sessionInfo=void 0,this._waitExpectedTimeoutId=void 0,this._snapshotHistory=[],this._login=function(){var e=c()((function*(e){t._fsm.transition(Fi.LOGIN_START);try{var r=yield t.login(t.envId,e||t._loginInvalidated,t.timing);t.envId||(t.envId=r.envId),t._fsm.transition(Fi.LOGIN_SUCCESS,Ua),t._loginInvalidated=!1}catch(e){t._errors.push(e),t._loginInvalidated=!0;try{t._fsm.transition(Fi.LOGIN_FAIL,Ua)}catch(e){console.warn("[realtime]",e)}}}));return function(t){return e.apply(this,arguments)}}(),this.initWatch=c()((function*(){var e=Date.now(),r=Yi();try{t._fsm.transition(Fi.INIT_WATCH_START,Mi.INIT_LOGGED_IN);var n=t.envId,o={watchId:t.watchId,requestId:r,msgType:"INIT_WATCH",msgData:{envId:n,collName:t.collectionName,query:t.query,limit:t.limit,orderBy:t.orderBy,queryType:t.queryType}},i=yield t.send({msg:o,waitResponse:!0,skipOnMessage:!0,timeout:1e4});t.assertAsyncTaskStatus();var{events:a,currEvent:s}=i.msgData;if(t.sessionInfo={queryID:i.msgData.queryID,currentEventId:s-1,currentDocs:[],currentEventTS:Date.now()},a.length>0){for(var l of a)l.ID=s;t.handleServerEvents(i)}else{t.sessionInfo.currentEventId=s;var u=new Ma({id:s,docChanges:[],docs:[],type:"init",EJSON:t.getEJSON(),requestId:i.requestId,watchId:t.watchId});U.surroundThirdByTryCatch((()=>t.listener.onChange(u)))(),t.scheduleSendACK(),t.debug&&t._snapshotHistory.push(u)}t.onWatchStart(t,t.sessionInfo.queryID),t._availableRetries.INIT_WATCH=2,t._wsDisconnectionTS=void 0,Jt(Ki,ea,!0),Vt({apiName:"_realtime.initWatch(success)",apiStartTime:e,apiEndTime:Date.now()}),t._fsm.transition(Fi.INIT_WATCH_SUCCESS)}catch(n){Vt({apiName:"_realtime.initWatch(fail)",apiStartTime:e,apiEndTime:Date.now()}),t.handleWatchEstablishmentError(n,{operationName:"INIT_WATCH",requestId:r})}})),this.rebuildWatch=c()((function*(){var e=Date.now(),r=Yi();try{t._fsm.transition(Fi.REBUILD_WATCH_START,Mi.REBUILD_LOGGED_IN);var n=t.envId;if(!t.sessionInfo)throw new Error("can not rebuildWatch without a successful initWatch (lack of sessionInfo)");if(t._wsDisconnectionTS&&Date.now()-t._wsDisconnectionTS>.9*t.getServiceContext().appConfig.realtimeQueryEventCacheTimeout)throw new R("query event cache timeout, ws has been disconnected for too long, PLEASE RECONNECT manually",{subtype:"queryEventCacheClientTimeout",retryable:!1});var o={watchId:t.watchId,requestId:r,msgType:"REBUILD_WATCH",msgData:{envId:n,collName:t.collectionName,queryID:t.sessionInfo.queryID,eventID:t.sessionInfo.currentEventId}},i=yield t.send({msg:o,waitResponse:!0,skipOnMessage:!0,timeout:1e4});t.assertAsyncTaskStatus(),yield t.handleServerEvents(i),t._availableRetries.REBUILD_WATCH=2,t._wsDisconnectionTS=void 0,Jt(Ki,ra,!0),Vt({apiName:"_realtime.rebuildWatch(success)",apiStartTime:e,apiEndTime:Date.now()}),t._fsm.transition(Fi.REBUILD_WATCH_SUCCESS)}catch(n){Vt({apiName:"_realtime.rebuildWatch(fail)",apiStartTime:e,apiEndTime:Date.now()}),t.handleWatchEstablishmentError(n,{operationName:"REBUILD_WATCH",requestId:r})}})),this.handleWatchEstablishmentError=function(){var e=c()((function*(e,r){var n="INIT_WATCH"===r.operationName,o=o=>{var i=`${o||e} (${n?"initWatch":"rebuildWatch"} requestId ${r.requestId})`;if(t.closeWithError(new C({errCode:n?S.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:S.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:i})),Jt(Ki,n?ta:na,!0),!ja(e)){if(P(e)){switch(e.payload.subtype){case"totalConnectionTimeout":Jt(Ki,n?xa:Na,!0);break;case"queryEventCacheClientTimeout":n||Jt(Ki,Ra,!0)}return}return B(e)?void Jt(Ki,n?Pa:Da,!0):void Jt(Ki,n?La:Ba,!0)}switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":Jt(Ki,n?Sa:Ca,!0);break;default:Jt(Ki,n?Ta:Oa,!0)}};t._errors.push(e),t.handleCommonError(e,{onSignError:()=>{t._loginInvalidated=!0,t._fsm.transition(t.initialized?Fi.REBUILD_WATCH_FAIL:Fi.INIT_WATCH_FAIL)},onTimeoutError:e=>{e.payload&&!e.payload.retryable?o(e):t._fsm.transition(t.initialized?Fi.REBUILD_WATCH_FAIL:Fi.INIT_WATCH_FAIL)},onNotRetryableError:o,onCancelledError:e=>{t._fsm.transition(t.initialized?Fi.REBUILD_WATCH_FAIL:Fi.INIT_WATCH_FAIL)},onUnknownError:()=>{t._fsm.transition(t.initialized?Fi.REBUILD_WATCH_FAIL:Fi.INIT_WATCH_FAIL)}})}));return function(t,r){return e.apply(this,arguments)}}(),this.closeWatch=c()((function*(){t.closeWatchInvoked=!0;var e=t.sessionInfo?t.sessionInfo.queryID:"";if(t._fsm.currentState!==Mi.CLOSED)try{t._fsm.transition(Fi.CLOSE),yield t.sendCloseWatch()}catch(e){console.warn(`[realtime] non-fatal error while closing watch: ${e}`)}finally{t.sessionInfo=void 0,t.onWatchClose(t,e),t._cleanup()}})),this.sendCloseWatch=c()((function*(){var e={watchId:t.watchId,requestId:Yi(),msgType:"CLOSE_WATCH",msgData:null};yield t.send({msg:e})})),this.scheduleSendACK=()=>{this.clearACKSchedule(),this._ackTimeoutId=setTimeout((()=>{this._waitExpectedTimeoutId?this.scheduleSendACK():this.sendACK()}),1e4)},this.clearACKSchedule=()=>{this._ackTimeoutId&&clearTimeout(this._ackTimeoutId)},this.sendACK=c()((function*(){try{if(t._fsm.currentState!==Mi.INIT_WATCH_SUCCESS&&t._fsm.currentState!==Mi.REBUILD_WATCH_SUCCESS)return void t.scheduleSendACK();if(!t.sessionInfo)return void console.warn("[realtime listener] can not send ack without a successful initWatch (lack of sessionInfo)");var e={watchId:t.watchId,requestId:Yi(),msgType:"CHECK_LAST",msgData:{queryID:t.sessionInfo.queryID,eventID:t.sessionInfo.currentEventId}};yield t.send({msg:e}),t.scheduleSendACK()}catch(e){if(ja(e)){var r=e.payload;switch(r.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return t._loginInvalidated=!0,void(t._fsm.currentState!==Mi.INIT_WATCH_SUCCESS&&t._fsm.currentState!==Mi.REBUILD_WATCH_SUCCESS||t._fsm.transition(Fi.NEED_REBUILD_WATCH));case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":return void t.closeWithError(new C({errCode:S.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:r.msgData.code}))}}t._availableRetries.CHECK_LAST&&t._availableRetries.CHECK_LAST>0?(t._availableRetries.CHECK_LAST--,t.scheduleSendACK()):t.closeWithError(new C({errCode:S.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:e}))}})),this.handleCommonError=(e,t)=>{if(ja(e)){switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return void t.onSignError(e);default:return void t.onNotRetryableError(e)}}else{if(P(e))return void t.onTimeoutError(e);if(B(e))return void t.onCancelledError(e)}t.onUnknownError(e)},this.watchId=`watchid_${+new Date}_${Math.random()}`,this._parentFSM=e.parentFSM,this.envId=e.envId,this.collectionName=e.collectionName,this.query=e.query,this.limit=e.limit,this.orderBy=e.orderBy,this.queryType=e.queryType,this.send=e.send,this.login=e.login,this.isWSConnected=e.isWSConnected,this.getWaitExpectedTimeoutLength=e.getWaitExpectedTimeoutLength,this.getEJSON=e.getEJSON,this.getServiceContext=e.getServiceContext,this.onWatchStart=e.onWatchStart,this.onWatchClose=e.onWatchClose,this.timing=e.timing,this.debug=e.debug,this._availableRetries={INIT_WATCH:2,REBUILD_WATCH:2,CHECK_LAST:2},this._fsm=new Qi({initialState:Mi.UNINIT,states:Gi,history:!0}),this._subscribeParentFSMEvents(),this._subscribeFSMEvents(),this.listener=new ka({close:this.closeWatch,onChange:e.onChange,onError:e.onError,debug:this.debug,virtualClient:this}),this._parentFSM.currentState===ri.CONNECTED&&this._login(),e.debug&&(this.wsclient=e.wsclient)}get initialized(){return Boolean(this.sessionInfo)}_cleanup(){this._parentFSM.unsubscribe(this._parentFSMListener)}_subscribeParentFSMEvents(){this._parentFSMListener=e=>{var{event:t,from:r,to:n}=e;if(this._fsm.currentState!==Mi.CLOSED)if(t.type===ni.DISCONNECT||t.type===ni.CONNECTION_FAIL)switch(this._fsm.currentState){case Mi.UNINIT:case Mi.INIT_LOGGING_IN:case Mi.INIT_LOGIN_FAIL:case Mi.INIT_LOGGED_IN:case Mi.INIT_WATCH_PENDING:case Mi.INIT_WATCH_FAIL:this.closeWithError(t.error||new Error("websocket connection fail"),!1);break;default:t.type===ni.DISCONNECT?(this._wsDisconnectionTS||(this._wsDisconnectionTS=Date.now()),this._fsm.transition(Fi.WS_DISCONNECTED)):this.closeWithError(t.error||new Error("websocket connection fail"),!1)}else if(t.type===ni.CONNECTION_SUCCESS)switch(this._fsm.currentState){case Mi.UNINIT:case Mi.PAUSED:this._login();break;case Mi.CLOSED:break;default:console.warn(`[realtime] current state should not be ${this._fsm.currentState} (parent event ${t})`)}},this._parentFSM.subscribe(this._parentFSMListener)}_subscribeFSMEvents(){this._FSMListener=e=>{var{event:t,from:r,to:n}=e;switch(t.type){case Fi.WS_CONNECTED:this._login().catch($a);break;case Fi.LOGIN_SUCCESS:r===Mi.INIT_LOGGING_IN?this.initWatch().catch($a):r===Mi.REBUILD_LOGGING_IN?this.rebuildWatch().catch($a):this.closeWithError(new C({errCode:S.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`unexpected state: event ${t.type} from ${r}`}));break;case Fi.LOGIN_FAIL:r===Mi.INIT_LOGGING_IN?this.useRetryTicket("INIT_WATCH")?this._login().catch($a):this.closeWithError(new C({errCode:S.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:`login fail ${this._errors[this._errors.length-1]}`})):r===Mi.REBUILD_LOGGING_IN?this.useRetryTicket("REBUILD_WATCH")?this._login().catch($a):this.closeWithError(new C({errCode:S.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:`login fail ${this._errors[this._errors.length-1]}`})):this.closeWithError(new C({errCode:S.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`unexpected state: event ${t.type} from ${r}`}));break;case Fi.INIT_WATCH_SUCCESS:this._availableRetries.INIT_WATCH=2,this._errors=[];break;case Fi.INIT_WATCH_FAIL:this.useRetryTicket("INIT_WATCH")?this._login().catch($a):this.closeWithError(new C({errCode:S.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:`init watch fail ${this._errors[this._errors.length-1]}`}));break;case Fi.REBUILD_WATCH_SUCCESS:this._availableRetries.REBUILD_WATCH=2,this._errors=[];break;case Fi.REBUILD_WATCH_FAIL:this.useRetryTicket("REBUILD_WATCH")?this._login().catch($a):this.closeWithError(new C({errCode:S.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:`init watch fail ${this._errors[this._errors.length-1]}`}));break;case Fi.NEED_REBUILD_WATCH:this._login().catch($a)}},this._fsm.subscribe(this._FSMListener)}useRetryTicket(e){return!!(this._availableRetries[e]&&this._availableRetries[e]>0)&&(this._availableRetries[e]--,!0)}assertAsyncTaskStatus(){if(this.closeWatchInvoked)throw new D("closeWatch",{subtype:"closeWatch"});switch(this._fsm.currentState){case Mi.PAUSED:throw new D("pause",{subtype:"pause"});case Mi.CLOSED:throw new D("close",{subtype:"close"})}}handleServerEvents(e){var t=this;return c()((function*(){try{t.scheduleSendACK(),yield t._handleServerEvents(e),t._postHandleServerEventsValidityCheck(e)}catch(e){throw Jt(Ki,va,!0),e}}))()}_handleServerEvents(e){var t=this;return c()((function*(){var{requestId:r}=e,{events:n}=e.msgData;if(n.length&&t.sessionInfo){var o,i=t.sessionInfo;try{o=n.map(qa)}catch(e){return void t.closeWithError(new C({errCode:S.SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA,errMsg:e}))}for(var a=[...i.currentDocs],s=!1,l=function*(){var n=o[u];if(i.currentEventId>=n.id)return!o[u-1]||n.id>o[u-1].id?Jt(Ki,ma,!0):(console.error(`[realtime listener] server non-fatal error: events out of order (the latter event's id is smaller than that of the former) (requestId ${r})`),Jt(Ki,ya,!0)),"continue";if(i.currentEventId===n.id-1){switch(n.dataType){case"update":if(!n.doc)switch(n.queueType){case"update":case"dequeue":var l=a.find((e=>e._id===n.docId));if(l){var d=JSON.parse(JSON.stringify(l));if(n.updatedFields)for(var p in n.updatedFields)Ui(d,p,n.updatedFields[p]);if(n.removedFields)for(var f of n.removedFields)$i(d,f);n.doc=d}else console.error("[realtime listener] internal non-fatal server error: unexpected update dataType event where no doc is associated."),Jt(Ki,ba,!0);break;case"enqueue":var h=new C({errCode:S.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`HandleServerEvents: full doc is not provided with dataType="update" and queueType="enqueue" (requestId ${e.requestId})`});throw t.closeWithError(h),h}break;case"limit":if(!n.doc&&"dequeue"===n.queueType){var _=a.find((e=>e._id===n.docId));_?n.doc=_:console.error("[realtime listener] internal non-fatal server error: unexpected limit dataType dequeue queueType event where no doc is associated.")}break;case"replace":if(!n.doc){var g=new C({errCode:S.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`HandleServerEvents: full doc is not provided with dataType="replace" (requestId ${e.requestId})`});throw t.closeWithError(g),g}break;case"remove":var v=a.find((e=>e._id===n.docId));v?n.doc=v:(console.error("[realtime listener] internal non-fatal server error: unexpected remove event where no doc is associated."),Jt(Ki,wa,!0))}switch(n.queueType){case"init":s?a.push(n.doc):(s=!0,a=[n.doc]);break;case"enqueue":a.push(n.doc);break;case"dequeue":var m=a.findIndex((e=>e._id===n.docId));m>-1?a.splice(m,1):(console.error("[realtime listener] internal non-fatal server error: unexpected dequeue event where no doc is associated."),Jt(Ki,Aa,!0));break;case"update":var y=a.findIndex((e=>e._id===n.docId));y>-1?a[y]=n.doc:(console.error("[realtime listener] internal non-fatal server error: unexpected queueType update event where no doc is associated."),Jt(Ki,Ea,!0))}if(u===c-1||o[u+1]&&o[u+1].id!==n.id){var b=[...a],w=o.slice(0,u+1).filter((e=>e.id===n.id));t.sessionInfo.currentEventId=n.id,t.sessionInfo.currentDocs=a,t.sessionInfo.currentEventTS=Date.now();var A=new Ma({id:n.id,type:"init"===w[0].queueType?"init":void 0,docChanges:t.getEJSON().deserialize(w),docs:t.getEJSON().deserialize(b),EJSON:t.getEJSON(),requestId:r,watchId:t.watchId});U.surroundThirdByTryCatch((()=>t.listener.onChange(A)))(),t.debug&&t._snapshotHistory.push(A)}}else Jt(Ki,Ia,!0),t._fsm.transition(Fi.NEED_REBUILD_WATCH)},u=0,c=o.length;u<c;u++)yield*l()}}))()}_postHandleServerEventsValidityCheck(e){this.sessionInfo?(this.sessionInfo.expectEventId&&this.sessionInfo.currentEventId>=this.sessionInfo.expectEventId&&this.clearWaitExpectedEvent(),this.sessionInfo.currentEventId<e.msgData.currEvent&&console.warn(`[realtime listener] internal non-fatal error: client eventId ${this.sessionInfo.currentEventId} does not match with server event id after server event handling ${e.msgData.currEvent} (requestId ${e.requestId})`)):console.error(`[realtime listener] internal non-fatal error: sessionInfo lost after server event handling, this should never occur. (requestId ${e.requestId})`)}clearWaitExpectedEvent(){this._waitExpectedTimeoutId&&(clearTimeout(this._waitExpectedTimeoutId),this._waitExpectedTimeoutId=void 0)}onMessage(e){switch(this._fsm.currentState){case Mi.INIT_WATCH_SUCCESS:case Mi.REBUILD_WATCH_SUCCESS:break;case Mi.PAUSED:if("ERROR"!==e.msgType)return;break;default:return void console.warn(`[realtime listener] internal non-fatal error: unexpected message received while state is ${this._fsm.currentState}`)}if(this.sessionInfo)switch(this.scheduleSendACK(),e.msgType){case"NEXT_EVENT":0,this.handleServerEvents(e);break;case"CHECK_EVENT":this.sessionInfo.currentEventId<e.msgData.currEvent&&(this.sessionInfo.expectEventId=e.msgData.currEvent,this.clearWaitExpectedEvent(),this._waitExpectedTimeoutId=setTimeout((()=>{this._fsm.transition(Fi.NEED_REBUILD_WATCH)}),this.getWaitExpectedTimeoutLength()));break;case"ERROR":this.closeWithError(new C({errCode:S.SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG,errMsg:`${e.msgData.code} - ${e.msgData.message}`}))}else console.warn("[realtime listener] internal non-fatal error: sessionInfo not found while message is received.")}closeWithError(e,t=!0){if(this._fsm.currentState!==Mi.CLOSED&&this._fsm.transition(Fi.CLOSE),!this.userOnErrorInvoked){var r=this._fsm.getHistoryRepresentation({limit:20});T(e)?(e.errMsg+=`\nhistory ${r}`,e.history=r):e&&((e=new C({errCode:S.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`${e} \nhistory ${r}`})).history=r),this.clearACKSchedule(),U.surroundThirdByTryCatch((()=>this.listener.onError(e)))(),this.userOnErrorInvoked=!0,this.onWatchClose(this,this.sessionInfo&&this.sessionInfo.queryID||""),t&&this.sendCloseWatch().catch($a),this.sessionInfo=void 0}}}function qa(e){var t={id:e.ID,dataType:e.DataType,queueType:e.QueueType,docId:e.DocID,doc:e.Doc&&"{}"!==e.Doc?JSON.parse(e.Doc):void 0};return"update"===e.DataType&&(e.UpdatedFields&&(t.updatedFields=JSON.parse(e.UpdatedFields)),(e.removedFields||e.RemovedFields)&&(t.removedFields=e.removedFields?JSON.parse(e.removedFields):JSON.parse(e.RemovedFields))),t}var Ha,Ga={1e3:{code:1e3,name:"Normal Closure",description:"Normal closure; the connection successfully completed whatever purpose for which it was created."},1001:{code:1001,name:"Going Away",description:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{code:1002,name:"Protocol Error",description:"The endpoint is terminating the connection due to a protocol error."},1003:{code:1003,name:"Unsupported Data",description:"The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data)."},1005:{code:1005,name:"No Status Received",description:"Indicates that no status code was provided even though one was expected."},1006:{code:1006,name:"Abnormal Closure",description:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{code:1007,name:"Invalid frame payload data",description:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{code:1008,name:"Policy Violation",description:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{code:1009,name:"Message too big",description:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{code:1010,name:"Missing Extension",description:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{code:1011,name:"Internal Error",description:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{code:1012,name:"Service Restart",description:"The server is terminating the connection because it is restarting."},1013:{code:1013,name:"Try Again Later",description:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{code:1014,name:"Bad Gateway",description:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{code:1015,name:"TLS Handshake",description:"Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},3e3:{code:3e3,name:"Reconnect WebSocket",description:"The client is terminating the connection because it wants to reconnect"},3001:{code:3001,name:"No Realtime Listeners",description:"The client is terminating the connection because no more realtime listeners exist"},3002:{code:3002,name:"Heartbeat Ping Error",description:"The client is terminating the connection due to its failure in sending heartbeat messages"},3003:{code:3003,name:"Heartbeat Pong Timeout Error",description:"The client is terminating the connection because no heartbeat response is received from the server"},3004:{code:3004,name:"Client Reconnect on Server Upgrade",description:"The client is terminating the connection in response to server upgrade"},3050:{code:3050,name:"Server Close Unauthenticated Idle Connection",description:"The server is terminating the connection because the connection is idle and not authenticated"},3051:{code:3051,name:"Server Upgrade",description:"The server is terminating the connection because it is upgrading"},3052:{code:3052,name:"Server Requires Authentication",description:"The server is terminating the connection because it has not received authentication message as the connection's first message"}};!function(e){e[e.NormalClosure=1e3]="NormalClosure",e[e.GoingAway=1001]="GoingAway",e[e.ProtocolError=1002]="ProtocolError",e[e.UnsupportedData=1003]="UnsupportedData",e[e.NoStatusReceived=1005]="NoStatusReceived",e[e.AbnormalClosure=1006]="AbnormalClosure",e[e.InvalidFramePayloadData=1007]="InvalidFramePayloadData",e[e.PolicyViolation=1008]="PolicyViolation",e[e.MessageTooBig=1009]="MessageTooBig",e[e.MissingExtension=1010]="MissingExtension",e[e.InternalError=1011]="InternalError",e[e.ServiceRestart=1012]="ServiceRestart",e[e.TryAgainLater=1013]="TryAgainLater",e[e.BadGateway=1014]="BadGateway",e[e.TLSHandshake=1015]="TLSHandshake",e[e.ReconnectWebSocket=3e3]="ReconnectWebSocket",e[e.NoRealtimeListeners=3001]="NoRealtimeListeners",e[e.HeartbeatPingError=3002]="HeartbeatPingError",e[e.HeartbeatPongTimeoutError=3003]="HeartbeatPongTimeoutError",e[e.ReconnectOnServerUpgrade=3004]="ReconnectOnServerUpgrade",e[e.UnauthenticatedIdleConnection=3050]="UnauthenticatedIdleConnection",e[e.ServerUpgrade=3051]="ServerUpgrade",e[e.AuthenticationRequired=3052]="AuthenticationRequired"}(Ha||(Ha={}));var Qa,za=(e,t)=>{var r=Ga[e],n=r?`${r.name}, code ${e}, reason ${t||r.description}`:`code ${e}`;return new C({errCode:S.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED,errMsg:n})},Ya=1;class Ka{constructor(e){var t=this;this._fsm=void 0,this._virtualWSClient=new Set,this._queryIdClientMap=new Map,this._watchIdClientMap=new Map,this._totalConnectionTimeoutId=void 0,this._serviceContext=void 0,this._ws=void 0,this._lastPingSendTS=void 0,this._pingFailed=0,this._pongMissed=0,this._pingTimeoutId=void 0,this._pongTimeoutId=void 0,this._logins=new Map,this._signatures=new Map,this._wsResponseWait=new Map,this._rttObserved=[],this._closedWatches=new Set,this._EJSON=void 0,this._defaultEnvId=void 0,this._connectionEnvId=void 0,this._retryLock=!1,this.initWebSocketConnection=function(){var e=c()((function*(e,r=t._maxReconnect){var n;if(t._EJSON||(n=function(){return Va.apply(this,arguments)}().then((e=>t._EJSON=e))),t._fsm.currentState===ri.DISCONNECTED){t._fsm.transition(ni.CONNECTION_START),t._logins=new Map,t._wsResponseWait=new Map;var o=!1,i=[],a=!1;if(!t._totalConnectionTimeoutId&&t._totalConnectionTimeout&&t._totalConnectionTimeout!==1/0){var s=t._totalConnectionTimeout;t._totalConnectionTimeoutId=setTimeout((()=>{a=!0,e&&t._retryLock&&(t._retryLock=!1),t._totalConnectionTimeoutId=void 0;var r=new R(`reconnect timeout (reach totalConnectionTimeout ${s}s)`,{subtype:"totalConnectionTimeout",retryable:!1});Jt(Ki,pa,!0),t._fsm.transition({type:ni.CONNECTION_FAIL,error:r})}),1e3*s)}if(e){if(t._retryLock)return void 0;0,t._retryLock=!0}for(var l=function*(){try{if(!(yield he()).isConnected){if(!e)return t._fsm.transition({type:ni.CONNECTION_FAIL,error:new Error("network offline")}),{v:void 0};if(yield new Promise((e=>{ue&&ue.isConnected?e():fe.push(e)})),0===t._virtualWSClient.size)return t.clearTotalReconnectTimeout(),{v:void 0};Ft()&&(yield de(100))}if(a)return{v:void 0};0;var r=yield t.getSignature(t._connectionEnvId);if(a)return{v:void 0};0;var s=Date.now();return yield new Promise(((e,n)=>{t._ws=ne(t._context.identifiers)._socketSkipCheckDomainFactory().connectSocket({url:r.wsUrl,header:{"content-type":"application/json"},perMessageDeflate:!0,success:e,fail:n})})),a?{v:void 0}:(Vt({apiName:"_realtime.connectSocket",apiStartTime:s,apiEndTime:Date.now()}),yield t.initWebSocketEvent(),a||n&&(yield n,a)?{v:void 0}:(o=!0,"break"))}catch(e){if(i.unshift(e),e.errCode===S.TCB_PERMISSION_DENIED)return"break";var{isConnected:l}=yield he();if(a)return{v:void 0};if(l&&(yield de(t._reconnectInterval),a))return{v:void 0};if(Ft()&&(yield de(0),a))return{v:void 0}}},u=t._maxReconnect;u>=0;u--){var c=yield*l();if("break"===c)break;if("object"==typeof c)return c.v}if(e&&t._retryLock&&(t._retryLock=!1),o)return t.clearTotalReconnectTimeout(),Jt(Ki,e?Xi:Vi,!0),void t._fsm.transition(ni.CONNECTION_SUCCESS);t.clearTotalReconnectTimeout(),Jt(Ki,e?Zi:Ji,!0),e?t._fsm.transition({type:ni.CONNECTION_FAIL,error:new C({errCode:S.SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL,errMsg:`errors of each retry (latest to oldest): ${JSON.stringify(i.map((e=>e+"")))}`})}):t._fsm.transition({type:ni.CONNECTION_FAIL,error:new C({errCode:S.SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL,errMsg:`errors of each retry (latest to oldest): ${JSON.stringify(i.map((e=>e+"")))}`})})}}));return function(t){return e.apply(this,arguments)}}(),this.initWebSocketEvent=()=>new Promise(((e,t)=>{if(!this._ws)throw new Error("can not initWebSocketEvent, ws not exists");var r=!1;this._ws.onOpen((t=>{this._context.debug&&console.warn("[realtime] ws event: open",t),r=!0,e()}));var n=null;this._ws.onError((e=>{n=e,this._logins=new Map,r?(this._context.debug&&console.error("[realtime] ws event: error",e),this.clearHeartbeat(),Jt(Ki,ia,!0)):(this._context.debug&&console.error("[realtime] ws open failed with ws event: error",e),t(e),Jt(Ki,oa,!0))})),this._ws.onClose((e=>{this._logins=new Map,this.clearHeartbeat();var t=n||za(e.code);switch(e.code){case Ha.ReconnectOnServerUpgrade:case Ha.ReconnectWebSocket:case Ha.NoRealtimeListeners:this._fsm.transition({type:ni.DISCONNECT,error:t});break;case Ha.HeartbeatPingError:case Ha.HeartbeatPongTimeoutError:case Ha.NormalClosure:case Ha.AbnormalClosure:this._maxReconnect>0?(this._fsm.transition({type:ni.DISCONNECT,error:t}),this.initWebSocketConnection(!0)):this._fsm.transition({type:ni.CONNECTION_FAIL,error:t}),e.code===Ha.HeartbeatPingError?Jt(Ki,sa,!0):e.code===Ha.HeartbeatPongTimeoutError?Jt(Ki,la,!0):Jt(Ki,ua,!0);break;case Ha.UnauthenticatedIdleConnection:this._fsm.transition({type:ni.CONNECTION_FAIL,error:za(e.code,e.reason)}),Jt(Ki,ca,!0);break;case Ha.ServerUpgrade:this._fsm.transition({type:ni.DISCONNECT,error:t}),this.initWebSocketConnection(!0),Jt(Ki,fa,!0);break;default:this._maxReconnect>0?(this._fsm.transition({type:ni.DISCONNECT,error:t}),this.initWebSocketConnection(!0)):this._fsm.transition({type:ni.CONNECTION_FAIL,error:za(e.code,e.reason)}),Jt(Ki,da,!0)}Jt(Ki,aa,!0)}));var o={timing:{},startKey:"apiStartTime",endKey:"apiEndTime",samplePicker:nr,autoReport:"_realtime.onSocketMessage"};this._ws.onMessage(rr(this.onSocketMessage,o)),this.heartbeat()})),this.isWSConnected=()=>Boolean(this._ws&&this._ws.readyState===Ya),this.onSocketMessage=e=>{var t,r=e.data;this.heartbeat();try{t=JSON.parse(r)}catch(e){throw new Error(`[realtime] onMessage parse res.data error: ${e}`)}this._context.debug&&console.log(`[realtime] onMessage ${t.msgType} (${(new Date).toLocaleString()})`,t);var n=this._wsResponseWait.get(t.requestId);if(n){try{"ERROR"===t.msgType?n.reject(new Fa(t)):n.resolve(t)}catch(e){this._context.debug&&console.error("ws onMessage responseWaitSpec.resolve(msg) errored:",e)}finally{this._wsResponseWait.delete(t.requestId)}if(n.skipOnMessage)return}if("PONG"!==t.msgType){var o=t.watchId&&this._watchIdClientMap.get(t.watchId);if(o)o.onMessage(t);else switch(t.watchId?this._closedWatches.has(t.watchId)?Jt(Ki,ha,!0):Jt(Ki,_a,!0):Jt(Ki,ga,!0),t.msgType){case"INIT_EVENT":case"NEXT_EVENT":case"CHECK_EVENT":(o=this._queryIdClientMap.get(t.msgData.queryID))&&o.onMessage(t)}}else if(this._lastPingSendTS){var i=Date.now()-this._lastPingSendTS;if(i>1e4)return void(this._context.debug&&console.warn(`[realtime] untrusted rtt observed: ${i}`));this._rttObserved.length>=3&&this._rttObserved.splice(0,this._rttObserved.length-3+1),this._rttObserved.push(i)}},this.login=function(){var e=c()((function*(e,r,n){if(e=e||t._context.env||t._defaultEnvId,!r)if(e){var o=t._logins.get(e);if(o){if(o.loggedIn&&o.loginResult)return o.loginResult;if(o.loggingInPromise)return o.loggingInPromise}}else{var i=t._logins.get("");if(i&&i.loggingInPromise)return i.loggingInPromise}var a=new Promise(function(){var o=c()((function*(o,i){try{var a=yield n?rr(t.getSignature(e,r),{timing:n,startKey:"tunnelStartTime",endKey:"tunnelEndTime",condition:{emptyKey:!0}}):t.getSignature(e,r),s=(()=>{var e,t,r=ne().wx;if(r&&r.version){e=r.version.version,t=r.version.updateTime;var n=r.version.updateTime.match(/^(\d+)\.(\d+)\.(\d+)/);return{version:e,updateTime:t,updateDateInDashes:n?`${n[1]}-${n[2]}-${n[3]}`:"unknown"}}return{version:"unknown",updateTime:"unknown",updateDateInDashes:"unknown"}})(),l={watchId:void 0,requestId:Yi(),msgType:"LOGIN",msgData:{envId:a.envId,signStr:a.signStr,secretVersion:a.secretVersion,referrer:"mp",sdkVersion:s.version,dataVersion:s.updateDateInDashes}},u=yield t.send({msg:l,waitResponse:!0,skipOnMessage:!0,timeout:5e3});u.msgData.code?i(new Error(`${u.msgData.code} ${u.msgData.message}`)):o({envId:a.envId})}catch(e){i(e)}}));return function(e,t){return o.apply(this,arguments)}}()),s=e&&t._logins.get(e),l=Date.now();s?(s.loggedIn=!1,s.loggingInPromise=a,s.loginStartTS=l):(s={loggedIn:!1,loggingInPromise:a,loginStartTS:l},t._logins.set(e||"",s));try{var u=yield a,d=t._logins.get(e||"");if(d&&d===s&&d.loginStartTS===l)return s.loggedIn=!0,s.loggingInPromise=void 0,s.loginStartTS=void 0,s.loginResult=u,u;if(d){if(d.loggedIn&&d.loginResult)return d.loginResult;if(d.loggingInPromise)return d.loggingInPromise;throw new Error("ws unexpected login info")}throw new Error("ws login info reset")}catch(e){throw s.loggedIn=!1,s.loggingInPromise=void 0,s.loginStartTS=void 0,s.loginResult=void 0,e}}));return function(t,r,n){return e.apply(this,arguments)}}(),this.getSignature=function(){var e=c()((function*(e,r){if(e=e||t._context.env||t._defaultEnvId,!r&&e&&t._signatures.has(e)){var n=t._signatures.get(e);if(Date.now()<n.expireTS)return n}else 0;var o=Date.now()+6e4,i=yield function(e,t){return Do.apply(this,arguments)}(t._context,e);if(Date.now()-o>6e4)return t.getSignature(e,r);var a=s()(s()({},i),{},{expireTS:o});return t._signatures.set(a.envId,a),e||(t._defaultEnvId=a.envId),a}));return function(t,r){return e.apply(this,arguments)}}(),this.getWaitExpectedTimeoutLength=()=>this._rttObserved.length?this._rttObserved.reduce(((e,t)=>e+t))/this._rttObserved.length*1.5:5e3,this.ping=c()((function*(){var e={watchId:void 0,requestId:Yi(),msgType:"PING",msgData:null};yield t.send({msg:e}),t._context.debug&&console.log("ping sent")})),this.send=e=>new Promise(function(){var r=c()((function*(r,n){if(t._fsm.currentState!==ri.CONNECTED)return n(new Error("websocket not connected"));var o,i=!1,a=!1,s=e=>{i=!0,o&&clearTimeout(o),r(e)},l=e=>{a=!0,o&&clearTimeout(o),n(e)};e.timeout&&(o=setTimeout(c()((function*(){i&&a||(yield de(0),i&&a||l(new R("wsclient.send timedout")))})),e.timeout));try{if(t._context.debug&&console.log(`[realtime] ws send ${e.msg.msgType} (${(new Date).toLocaleString()}): `,e),!t._ws)return void l(new Error("invalid state: ws connection not exists, can not send message"));if(t._ws.readyState!==Ya)return void l(new Error(`ws readyState invalid: ${t._ws.readyState}, can not send message`));e.waitResponse&&t._wsResponseWait.set(e.msg.requestId,{resolve:s,reject:l,skipOnMessage:e.skipOnMessage}),t._ws.send({data:JSON.stringify(e.msg),success:t=>{e.waitResponse||s(t)},fail:r=>{l(r),e.waitResponse&&t._wsResponseWait.delete(e.msg.requestId)}})}catch(e){l(e)}}));return function(e,t){return r.apply(this,arguments)}}()),this.onWatchStart=(e,t)=>{this._queryIdClientMap.set(t,e)},this.onWatchClose=(e,t)=>{t&&this._queryIdClientMap.delete(t),this._watchIdClientMap.delete(e.watchId),this._virtualWSClient.delete(e),this._closedWatches.add(e.watchId),this._virtualWSClient.size||this.close(Ha.NoRealtimeListeners)},this.getEJSON=()=>this._EJSON,this._fsm=new Qi({initialState:ri.DISCONNECTED,states:Li}),this._serviceContext=e.serviceContext}get _context(){return this._serviceContext}get _maxReconnect(){return this._context.appConfig.realtimeMaxReconnect}get _reconnectInterval(){return this._context.appConfig.realtimeReconnectInterval}get _totalConnectionTimeout(){return this._context.appConfig.realtimeTotalConnectionTimeout}heartbeat(e){var t=this;this.clearHeartbeat(),this._pingTimeoutId=setTimeout(c()((function*(){try{if(!t._ws||t._ws.readyState!==Ya)return;t._lastPingSendTS=Date.now(),yield t.ping(),t._pingFailed=0,t._pongTimeoutId=setTimeout((()=>{t._context.debug&&console.error("pong timed out"),t._pongMissed<2?(t._pongMissed++,t.heartbeat(!0)):t.close(Ha.HeartbeatPongTimeoutError)}),t._context.appConfig.realtimePongWaitTimeout)}catch(e){t._pingFailed<2?(t._pingFailed++,t.heartbeat()):t.close(Ha.HeartbeatPingError)}})),e?0:this._context.appConfig.realtimePingInterval)}clearHeartbeat(){this._pingTimeoutId&&clearTimeout(this._pingTimeoutId),this._pongTimeoutId&&clearTimeout(this._pongTimeoutId)}clearTotalReconnectTimeout(){this._totalConnectionTimeoutId&&clearTimeout(this._totalConnectionTimeoutId)}close(e){this.clearHeartbeat(),this._ws&&(this._ws.close({code:e,reason:Ga[e].name}),this._ws=void 0)}watch(e){var t={apiStartTime:Date.now()},r=!1,n=()=>{Vt(s()(s()({},t),{},{apiName:e.reportAPIName}))},o=e.onChange,i=e.onError;this._fsm.currentState===ri.DISCONNECTED&&(this._connectionEnvId=e.envId,this.initWebSocketConnection(!1));var a=new Wa(s()(s()({},e),{},{parentFSM:this._fsm,send:this.send,login:this.login,isWSConnected:this.isWSConnected,getWaitExpectedTimeoutLength:this.getWaitExpectedTimeoutLength,getEJSON:this.getEJSON,getServiceContext:()=>this._context,onWatchStart:this.onWatchStart,onWatchClose:this.onWatchClose,timing:t,debug:this._context.debug,wsclient:this,onChange:u,onError:c}));this._virtualWSClient.add(a),this._watchIdClientMap.set(a.watchId,a);var l=a.listener;return l;function u(...e){r||(r=!0,t.apiEndTime=Date.now(),n()),d(),U.surroundThirdByTryCatch((()=>l.onChange.apply(this,e)))()}function c(...e){r||(r=!0,t.apiEndTime=Date.now(),n()),d(),U.surroundThirdByTryCatch((()=>l.onError.apply(this,e)))()}function d(){l.onChange===u&&(l.onChange=o),l.onError===c&&(l.onError=i)}}}function Va(){return(Va=c()((function*(){var e=Date.now(),t=r(967);return Vt({apiName:"_realtime.importBSON",apiStartTime:e,apiEndTime:Date.now()}),t.EJSON}))).apply(this,arguments)}!function(e){e.ASC="asc",e.DESC="desc"}(Qa||(Qa={}));var Ja=e=>{class t{constructor(t,n){if(this.collectionName=void 0,this._query=void 0,this._field=void 0,this.__safe_props__=void 0,this.watch=t=>(Y(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new Ka({serviceContext:e.serviceContext})),e.serviceContext.ws.watch(s()(s()({},t),{},{envId:e.database.config.env||e.serviceContext.env,collectionName:this.collectionName,query:JSON.stringify(e.engine.QuerySerializer.encode(this._query.where||{})),limit:this._query.limit,orderBy:this._query.order?this._query.order.reduce(((e,t)=>(e[t.fieldPath]=t.order,e)),{}):void 0,queryType:go.WHERE,reportAPIName:"cloud.db.collection.watch"}))),!t)throw new C({errCode:S.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"collectionName must be provided"});this.collectionName=t,this._query=new r(n),Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field=n&&n.field||{}}field(e){return K(e,"object","field"),new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{field:e}))}where(e){return K(e,"condition","where"),this._query.where?new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{where:$o.and(this._query.where,e)})):new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{where:e}))}orderBy(e,r){return K(e,"fieldPath","orderBy"),K(r,"order","orderBy"),new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{order:[...this._query.order||[],{fieldPath:e,order:r}]}))}limit(e){return K(e,"max","limit"),new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{limit:e}))}skip(e){return K(e,"offset","skip"),new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{offset:e}))}get(t){var r="collection.get",n={apiStartTime:+new Date},o=()=>Eo({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:go.WHERE,options:Ri(this,e),instanceContext:e,timing:n,explain:null==t?void 0:t.explain});var i=z(t),a=new Promise(function(){var e=c()((function*(e,i){try{var a=yield o();if(null!=t&&t.explain&&Ft())return void e(a);e({data:a.list,errMsg:ar(r)})}catch(e){i(O(e,r))}finally{Vt(s()(s()({},n),{},{apiEndTime:+new Date,apiName:`cloud.db.${r}`}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{G(r,t,e)})).catch((e=>{Q(r,t,e)}))}update(t){var r="collection.update",n={apiStartTime:+new Date},o=()=>{if(K(t,"options","update"),Y(t,{data:"object"}),!this._query.where)throw new C({errCode:-1,errMsg:"query condition must be provided"})},i=()=>So({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),data:e.engine.UpdateSerializer.encode(t.data),queryType:go.WHERE,options:{multi:!1!==t.multi,merge:!0},instanceContext:e,timing:n,explain:t.explain});var a=z(t),l=new Promise(function(){var e=c()((function*(e,a){try{o();var l=yield i();if(null!=t&&t.explain&&Ft())return e(l);e({stats:{updated:l.updated},errMsg:ar(r)})}catch(e){a(O(e,r))}finally{Vt(s()(s()({},n),{},{apiEndTime:+new Date,apiName:`cloud.db.${r}`}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!a)return l;l.then((e=>{G(r,t,e)})).catch((e=>{Q(r,t,e)}))}remove(t){var r="collection.remove",n={apiStartTime:+new Date},o=()=>{if(!this._query.where||0===Object.keys(this._query.where).length)throw new C({errCode:-1,errMsg:"query condition must be provided and not be empty"})},i=()=>wo({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:go.WHERE,options:{multi:!0},instanceContext:e,timing:n,explain:null==t?void 0:t.explain});var a=z(t),l=new Promise(function(){var e=c()((function*(e,a){try{o();var l=yield i();if(null!=t&&t.explain&&Ft())return e(l);e({stats:{removed:l.removed||0},errMsg:ar(r)})}catch(e){a(O(e,r))}finally{Vt(s()(s()({},n),{},{apiEndTime:+new Date,apiName:`cloud.db.${r}`}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!a)return l;l.then((e=>{G(r,t,e)})).catch((e=>{Q(r,t,e)}))}count(t){var r="collection.count",n={apiStartTime:+new Date},o=()=>xo({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:go.WHERE,instanceContext:e,timing:n,explain:null==t?void 0:t.explain});var i=z(t),a=new Promise(function(){var e=c()((function*(e,i){try{var a=yield o();if(null!=t&&t.explain&&Ft())return e(a);e({total:a.total,errMsg:ar(r)})}catch(e){i(O(e,r))}finally{Vt(s()(s()({},n),{},{apiEndTime:+new Date,apiName:`cloud.db.${r}`}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{G(r,t,e)})).catch((e=>{Q(r,t,e)}))}toJSON(){}}class r{constructor(e){this.where=void 0,this.offset=void 0,this.limit=void 0,this.order=void 0,this.field=void 0,this.where=e&&e.where,this.offset=e&&e.offset,this.limit=e&&e.limit,this.order=e&&e.order,this.field=e&&e.field}getProperties(){return{where:this.where,offset:this.offset,limit:this.limit,order:this.order,field:this.field}}}return t},Xa="document.get",Za="document.update",es="document.set",ts="document.remove",rs=e=>class{constructor(t,r){if(this._id=void 0,this.collection=void 0,this._field=void 0,this.__safe_props__=void 0,this.watch=t=>(Y(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new Ka({serviceContext:e.serviceContext})),e.serviceContext.ws.watch(s()(s()({},t),{},{envId:e.database.config.env||e.serviceContext.env,collectionName:this.collection.collectionName,query:JSON.stringify({_id:this._id}),queryType:go.DOC,reportAPIName:"cloud.db.document.watch"}))),this.collection=t,this._id=r,null==r)throw new C({errCode:S.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"docId must not be null or undefined"});Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field={}}field(e){return K(e,"object","field"),Y(e,"object","field"),this._field=e,this}get(t){var r=this,n={apiStartTime:+new Date},o=()=>Eo({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),options:{projection:e.engine.ProjectionSerializer.encode(this._field)},queryType:go.DOC,instanceContext:e,timing:n});var i=z(t),a=new Promise(function(){var e=c()((function*(e,t){try{var i=r._id,a=yield o();if(!a.list||!a.list.length)throw new Error(`cannot find document with _id ${i}, please make sure that the document exists and you have the corresponding access permission`);e({data:a.list[0],errMsg:ar(Xa)})}catch(e){t(O(e,Xa))}finally{Vt(s()(s()({},n),{},{apiEndTime:+new Date,apiName:`cloud.db.${Xa}`}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{G(Xa,t,e)})).catch((e=>{Q(Xa,t,e)}))}set(t){var r={apiStartTime:+new Date},n=()=>To({env:e.database.config.env,collectionName:this.collection.collectionName,_id:this._id,data:e.engine.encodeInternalDataType(t.data),options:{},instanceContext:e,timing:r});var o=z(t),i=new Promise(function(){var e=c()((function*(e,o){try{Y(t,{data:"object"}),J({name:"options.data",target:t.data});var i=yield n();e({_id:i._id,errMsg:ar(es),stats:{updated:i.updated,created:i.created}})}catch(e){o(O(e,es))}finally{Vt(s()(s()({},r),{},{apiEndTime:+new Date,apiName:`cloud.db.${es}`}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!o)return i;i.then((e=>{G(es,t,e)})).catch((e=>{Q(es,t,e)}))}update(t){var r={apiStartTime:+new Date},n=()=>So({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),data:e.engine.UpdateSerializer.encode(t.data),queryType:go.DOC,options:{multi:!1,merge:!1},instanceContext:e,timing:r});var o=z(t),i=new Promise(function(){var e=c()((function*(e,o){try{Y(t,{data:"object"}),J({name:"options.data",target:t.data}),e({stats:{updated:(yield n()).updated},errMsg:ar(Za)})}catch(e){o(O(e,Za))}finally{Vt(s()(s()({},r),{},{apiEndTime:+new Date,apiName:`cloud.db.${Za}`}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!o)return i;i.then((e=>{G(Za,t,e)})).catch((e=>{Q(Za,t,e)}))}remove(t){var r=this,n={apiStartTime:+new Date},o=()=>wo({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),queryType:go.DOC,options:{},instanceContext:e,timing:n});var i=z(t),a=new Promise(function(){var e=c()((function*(e,t){try{var i=r._id,a=yield o();if(0===a.removed)throw new Error(`cannot remove document with _id ${i}, please make sure that the document exists and you have the corresponding Write permission`);e({stats:{removed:a.removed||0},errMsg:ar(ts)})}catch(e){t(O(e,ts))}finally{Vt(s()(s()({},n),{},{apiEndTime:+new Date,apiName:`cloud.db.${ts}`}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{G(ts,t,e)})).catch((e=>{Q(ts,t,e)}))}toJSON(){}},ns=e=>{var t=Ja(e),r=rs(e),n=Lo(e);return class extends t{constructor(e){super(e),this.collectionName=void 0,this.__safe_props__=void 0,this.collectionName=e}doc(e){if(null==e)throw O({errCode:-1,errMsg:"docId must not be empty"},"collection.doc");return new r(this,e)}add(t){var r="collection.add",n={apiStartTime:+new Date},o=()=>yo({env:e.database.config.env,collectionName:this.collectionName,data:e.engine.encodeInternalDataType(t.data),instanceContext:e,timing:n});var i=z(t),a=new Promise(function(){var e=c()((function*(e,i){try{Y(t,{data:"object"}),e({_id:(yield o())._id,errMsg:ar(r)})}catch(e){i(O(e,r))}finally{Vt(s()(s()({},n),{},{apiEndTime:+new Date,apiName:`cloud.db.${r}`}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!i)return a;a.then((e=>{G(r,t,e)})).catch((e=>{Q(r,t,e)}))}aggregate(){return new n(this,[])}}},os=function(e){return new is(e)};class is{constructor(e){this.regexp=void 0,this.options=void 0,Y(e,{regexp:"string"},"RegExp options"),e.options&&Y(e.options,"string"),this.regexp=e.regexp,this.options=e.options||""}get _internalType(){return Vn}toJSON(){return{$regex:this.regexp,$options:this.options}}}var as={},ss={};for(var ls in to)as[to[ls]]=`$${to[ls]}`;for(var us in Dn)as[Dn[us]]=`$${Dn[us]}`;for(var cs in ao)as[ao[cs]]=`$${ao[cs]}`;for(var ds in uo)"undefined"!=typeof IS_SDK_PACKAGE&&"toString"===uo[ds]||(ss[uo[ds]]=`$${uo[ds]}`);function ps(e){return as[e]||`$${e.toLowerCase()}`}function fs(e){return ss[e]||`$${e.toLowerCase()}`}as[to.NEQ]="$ne",as[ao.REMOVE]="$unset",as[ao.SHIFT]="$pop",as[ao.UNSHIFT]="$push",as[to.GEO_NEAR]="$nearSphere",as[to.GEO_WITHIN]="$geoWithin",as[to.GEO_INTERSECTS]="$geoIntersects";class hs{static encodeStages(e){return(new _s).encodeStages(e)}static encode(e){return(new _s).encodeAny(e)}}class _s{encodeStages(e){return e.map((e=>this.encodePipelineStage(e)))}encodeAny(e){return Oi(e)?Fo(e)?this.encodePipeline(e):jo(e)?this.encodePipelineStage(e):po(e)?this.encodeAggregateCommand(e):xi(e):h(e)?this.encodeObject(e):w(e)?e.map((e=>this.encodeAny(e))):e}encodeObject(e){var t={};for(var r in e)t[r]=this.encodeAny(e[r]);return t}encodePipeline(e){return e._stages.map((e=>this.encodeAny(e)))}encodePipelineStage(e){var t=`$${e.stage}`;return"match"===e.stage?{[t]:gs.encode(e.val)}:{[t]:this.encodeAny(e.val)}}encodeAggregateCommand(e){return{[fs(e.operator)]:this.encodeAny(e.operands[0])}}}class gs{constructor(){}static encode(e){return vs(e)}}var vs=e=>eo(e)?ys(e):io(e)?bs(e):Fo(e)||po(e)||jo(e)?hs.encode(e):h(e)?ms(e):xi(e),ms=e=>{var t=Si(e),r=[],n={[Dn.OR]:0,[Dn.NOR]:0,[Dn.AND]:0,[Dn.NOT]:0},o=function(e){var o=t[e];if(eo(o))switch(o.operator){case Dn.OR:case Dn.NOR:case Dn.AND:n[o.operator]++,r.push({[ps(o.operator)]:o.operands.map((t=>vs({[e]:t})))});break;case Dn.NOT:var i=o.operands[0];if(eo(i))switch(i.operator){case Dn.AND:n[Dn.OR]++,r.push(ys(new Zn(Dn.OR,i.operands.map((t=>({[e]:new Zn(Dn.NOT,[t])}))))));break;case Dn.OR:n[Dn.NOR]++,r.push(ys(new Zn(Dn.NOR,i.operands.map((t=>({[e]:t}))))));break;case Dn.NOR:n[Dn.OR]++,r.push(ys(new Zn(Dn.OR,i.operands.map((t=>({[e]:t}))))));break;case Dn.NOT:r.push(vs({[e]:i.operands[0]}))}else r.push({[e]:ys(o)})}else io(o)?r.push({[e]:bs(o)}):r.push({[e]:xi(o)})};for(var i in t)o(i);return ws(r)},ys=e=>{switch(e.operator){case Dn.AND:if(e.operands.every((e=>io(e)))){var t={};for(var r of e.operands)Object.assign(t,bs(r));return t}return{[ps(e.operator)]:e.operands.map(vs)};case Dn.OR:case Dn.NOR:return{[ps(e.operator)]:e.operands.map(vs)};case Dn.NOT:var n=ps(e.operator),o=e.operands[0];return{[n]:vs(o)};default:return{[ps(e.operator)]:e.operands.map(vs)}}},bs=e=>{var t=ps(e.operator);switch(e.operator){case to.EQ:case to.NEQ:case to.LT:case to.LTE:case to.GT:case to.GTE:case to.EXISTS:case to.SIZE:return{[t]:xi(e.operands[0])};case to.IN:case to.NIN:case to.MOD:return{[t]:xi(e.operands)};case to.ALL:return{[t]:e.operands.map(vs)};case to.ELEM_MATCH:case to.EXPR:return{[t]:vs(e.operands[0])};case to.GEO_NEAR:return{[t]:{$geometry:xi(e.operands[0].geometry),$maxDistance:e.operands[0].maxDistance,$minDistance:e.operands[0].minDistance}};case to.GEO_WITHIN:var r={};return e.operands[0].geometry&&(r.$geometry=xi(e.operands[0].geometry)),e.operands[0].centerSphere&&(r.$centerSphere=xi(e.operands[0].centerSphere)),{[t]:r};case to.GEO_INTERSECTS:return{[t]:{$geometry:xi(e.operands[0].geometry)}};default:return{[t]:e.operands.length>1?e.operands.map(vs):vs(e.operands[0])}}},ws=e=>{var t={$and:0,$or:0,$nor:0};for(var r of e)r.$and&&t.$and++,r.$or&&t.$or++,r.$nor&&t.$nor++;var n=t.$and>1||t.$or>1||t.$nor>1,o=!1,i={};for(var a of e)for(var s in a){var l=a[s];n?o?i.$and.push(a):"$and"===s||"$or"===s||"$nor"===s?(o=!0,i.$and=[a]):i[s]=l:i[s]=l}return i};class As{constructor(){}static encode(e){return Is(e)}}var Es,Is=e=>Ss(e),Ss=e=>{var t=Si(e),r={};for(var n in t){var o=t[n];if(lo(o)){var i=ps(o.operator);switch(r[i]||(r[i]={}),o.operator){case ao.SET:case ao.INC:case ao.MUL:case ao.MIN:case ao.MAX:case ao.RENAME:case ao.BIT:r[i][n]=xi(o.operands[0]);break;case ao.REMOVE:r[i][n]="";break;case ao.PUSH:var a=void 0;a=1===o.operands.length&&h(o.operands[0])?{$each:o.operands[0].each.map(xi),$position:o.operands[0].position,$slice:o.operands[0].slice,$sort:o.operands[0].sort}:{$each:o.operands.map(xi)},r[i][n]=a;break;case ao.UNSHIFT:var s={$each:o.operands.map(xi),$position:0};r[i][n]=s;break;case ao.POP:r[i][n]=1;break;case ao.SHIFT:r[i][n]=-1;break;case ao.ADD_TO_SET:r[i][n]=h(o.operands[0])&&o.operands[0].each?{$each:o.operands[0].each}:o.operands[0];break;case ao.PULL:r[i][n]=gs.encode(o.operands[0]);break;case ao.PULL_ALL:default:r[i][n]=xi(o.operands[0])}}else r.$set||(r.$set={}),r.$set[n]=xi(o)}return r};class Cs{constructor(){}static encode(e){return(new Cs).encodeProjection(e)}encodeProjection(e){return _o(e)?this.encodeProjectionCommand(e):"object"===f(e)?this.encodeProjectionObject(e):e}encodeProjectionCommand(e){var t=ps(e.operator);return e.operator,fo.SLICE,{[t]:e.operands[0]}}encodeProjectionObject(e){var t=Si(e);for(var r in t)!0===t[r]||1===t[r]?t[r]=1:!1===t[r]||0===t[r]?t[r]=0:_o(t[r])?t[r]=this.encodeProjectionCommand(t[r]):delete t[r];return t}}class Ts{constructor(){}static decode(e){return(new Ts).decodeData(e)}decodeData(e){switch(f(e)){case"object":return this.decodeObject(e);case"array":return e.map((e=>{if(h(e)){var t=Ni(e);return t!==e?t:this.decodeObject(e)}return e}));default:return e}}decodeObject(e){var t=s()({},e);for(var r in t){var n=t[r];switch(f(n)){case"object":var o=Ni(n);t[r]=o!==n?o:this.decodeObject(t[r]);break;case"array":var i=this.decodeData(n);i!==n&&(t[r]=i);break;default:continue}}return t}}!function(e){e[e.DEFAULT=0]="DEFAULT"}(Es||(Es={}));var Os=function(e,t){return new(Ns(e.identifiers||{}))({context:e,config:t})};function xs(e){return e.debug}var Ns=r=>{var n,o;return class{constructor(i){this.identifiers=void 0,this.config=void 0,this.command=void 0,this.Geo=void 0,this.serverDate=void 0,this.RegExp=void 0,this.__safe_props__=void 0;var{config:a,context:s}=i;this.identifiers=r,this.config=a||{},o=ns(n={database:this,serviceContext:s,engine:t}),a&&a.env&&Y(a.env,"string"),this.command=$o,this.Geo=e,this.serverDate=Wo,this.RegExp=os,a&&a.hasOwnProperty("debug")&&Object.defineProperties(this,{debug:{value:!0},QuerySerializer:{enumerable:!1,configurable:!1,get(){return xs((e=n).database)?e.engine.QuerySerializer:void 0;var e},set(){}},UpdateSerializer:{enumerable:!1,configurable:!1,get(){return xs((e=n).database)?e.engine.UpdateSerializer:void 0;var e},set(){}},ProjectionSerializer:{enumerable:!1,configurable:!1,get(){return xs((e=n).database)?e.engine.ProjectionSerializer:void 0;var e},set(){}},AggregateSerializer:{enumerable:!1,configurable:!1,get(){return xs((e=n).database)?e.engine.AggregateSerializer:void 0;var e},set(){}},Decoder:{enumerable:!1,configurable:!1,get(){return xs((e=n).database)?e.engine.Decoder:void 0;var e},set(){}}})}collection(e){return new o(e)}toJSON(){}}};function Rs(e){return{database:Os.bind(null,e)}}var Ps="database";function Ds(e){e.registerService(function(e){var t={name:Ps,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get env(){return e.getEnvForService(Ps)},appConfig:{get docSizeLimit(){return e.appConfig.db_doc_size_limit},get realtimePingInterval(){return e.appConfig.db_realtime_ping_interval},get realtimePongWaitTimeout(){return e.appConfig.db_realtime_pong_wait_timeout},get realtimeMaxReconnect(){return e.config.database.realtime.maxReconnect},get realtimeReconnectInterval(){return e.config.database.realtime.reconnectInterval},get realtimeTotalConnectionTimeout(){return e.config.database.realtime.totalConnectionTimeout},get realtimeQueryEventCacheTimeout(){return e.appConfig.db_realtime_query_event_cache_timeout}}};return{name:Ps,context:t,getAPIs:Rs.bind(null,t)}}(e))}function Ls(e){class t{constructor(e){this.cloudID=void 0,this._internalType=pr,this.cloudID=e,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}toJSON(){return this.cloudID}toString(){return this.cloudID}}return function(e){return new t(e)}}function Bs(e){class t{constructor(e){this.target=void 0,this._internalType=fr,this.target=e,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}toString(){return JSON.stringify({target:this.target})}}return function(e){return new t(e)}}function ks(e){return{CloudID:Ls(),CDN:Bs()}}var Ms="utils";function Fs(e){e.registerService(function(e){var t={name:Ms,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug}};return{name:Ms,context:t,getAPIs:ks.bind(null,t)}}(e))}class js{constructor(){}}var Us="gateway.call";class $s extends Error{constructor(e,t){super(e),this.code=void 0,this.code=t}}function Ws(e){return t=>{var r=new Hs(t),n=t.domain?t.domain:`${t.id||t.appid}.preview.wxcloudrun.com`,o={name:"gateway-plugin",host:n,getMetadata:e=>s()(s()({},e),{},{host:n}),beforeRequest:e=>e,afterRequest:e=>e,beforeTunnelRequest:e=>e,afterTunnelRequest:e=>e,context:e,refreshTunnelInfo:"miniprogram"===bn().env?c()((function*(){var t=be(),r=(yield e.request({apiName:"tcbapi_get_service_info",serializedReqData:JSON.stringify({system:t.system,wx_app_version:t.version,scene:3})})).data;return Xt(r.token,"3"),r})):void 0};return Ks.set(r,o),r.exportAPI}}var qs=new Map;class Hs extends js{constructor(e){super(),this.options=e,this.refreshHandler=void 0,this.session=void 0,this.gatewayAuthorization=void 0,this.exportAPI=void 0,this.refresh(this.session),this.exportAPI={refresh:this.refresh.bind(this),call:this.call.bind(this)}}refresh(e,t){var r=this;return c()((function*(){var n=`${e}-${t}`;if(qs.has(n))return qs.get(n);r.gatewayAuthorization=void 0,clearTimeout(r.refreshHandler),r.session=e;var o=new Promise(((t,n)=>{var o=new Promise((t=>"string"==typeof e?t(e):e?e.then(t):t(e)));o.then((e=>{var o=Ks.get(r);o.refreshTunnelInfo?o.refreshTunnelInfo().then((e=>t(e))).catch((e=>n(e))):ne()._requestSkipCheckDomain({url:`https://${o.host}/__wx__/auth?devtools_ignore=true`,method:"post",header:{"x-wx-accept-encryption":3,"x-wx-encryption-timestamp":Date.now(),"x-wx-lib-build-ts":11516239022},data:JSON.stringify({session:e,fingerprint:"",timestamp:Date.now(),nonce:Math.random()}),success:({data:e})=>t(e),fail:e=>{n(e)}})})).catch((e=>{n(e)}))}));qs.set(n,o);try{var i=yield o;r.gatewayAuthorization=i;var a=1e3*i.exp-Date.now();return r.refreshHandler=setTimeout((()=>{r.refresh()}),Math.min(6e4,a)),i}catch(e){throw console.error(`[${Us}] refresh authorization error: `,e),setTimeout((()=>{qs.delete(n)}),500),e}}))()}call(e){var t=this;return c()((function*(){var r,n,o=Date.now();e.stats={apiStartTime:o},e.context={apiStartTime:o};var i=t.gatewayAuthorization?t.gatewayAuthorization:yield t.refresh(t.session);1e3*i.exp<Date.now()&&(i=yield t.refresh(t.session,i.token)),e.stats.getServiceEndpoint=Date.now()-o;var a=new Uint8Array(null===(r=(n=u.wx).base64ToArrayBuffer)||void 0===r?void 0:r.call(n,i.key));Br(e);var l=Ks.get(t),c=l.host;e.stats.domain=c;var d=Me.V3.encodeRequest(a,s()(s()({},e.header),{},{"X-WX-TARGET-SERVICE":"HTTP","X-WX-HTTP-HOST":c,"X-WX-HTTP-PATH":e.path}),e.method||"GET",e.data,e.stats);e.stats.requestStartTs=Date.now(),e.stats.callid=d.callId;var p=new Promise(((t,r)=>{try{ne()._requestSkipCheckDomain({url:`https://${c}/__wx__/call?token=${i.token}&devtools_ignore=true`,method:"POST",header:{"X-WX-EV":3,"Content-Type":"application/octet-stream"},data:d.data.buffer,dataType:"arraybuffer",responseType:"arraybuffer",enableHttp2:!0,enableQuic:!0,success:n=>{if(e.stats||(e.stats={}),e.stats.requestSuccessTs=Date.now(),e.stats.profile=n.profile,e.stats.httpRequest=Date.now()-e.stats.requestStartTs,n.statusCode&&200!==n.statusCode){var o=Gs(n.data);r(new $s(`${Us}: fail invalid status code ${o}, status code: ${n.statusCode}, callid: ${e.stats.callid}`,n.statusCode))}else{try{Qs(e,n.header,n.data)}catch(e){return void r(e)}var{header:i,body:s,statusCode:l}=Me.V3.decodeResponse(a,new Uint8Array(n.data),e.stats);try{Qs(e,i,s)}catch(e){return void r(e)}var u=function(e,t,r){var n;return n="json"!==e.dataType&&e.dataType||kr(r)?"text"===e.responseType?"string"==typeof t?t:Ne(t.buffer):"arraybuffer"===e.responseType?"string"==typeof t?Re(t):t.buffer:t:Se("string"==typeof t?t:Ne(t.buffer)),n}(e,s,l);ir(Us,e,"v3"),t({data:u,statusCode:l,header:i,callID:d.callId,errMsg:`${Us}:ok`})}},fail:r})}catch(e){r(e)}}));return p=function(e,t,r,n,o){var i;return null===(i=e.followRedirect)||void 0===i||i?function e(i,a){return new Promise(((l,u)=>{a.then((a=>{var c;if(kr(a.statusCode)){var d=null!==(c=Fr.get(t))&&void 0!==c?c:0;if(d>=5)u("reach the max redirect count");else{Fr.set(t,d+1);var p="";for(var f in a.header)"location"===f.toLowerCase()&&(p=a.header[f]);if(p)if(p.startsWith("/")){var h=X(i);i.path=p,e(h,r(i)).then(l).catch(u)}else ne(n.identifiers).request({url:p,method:i.method,header:i.header,data:i.data,dataType:i.dataType,responseType:i.responseType,timeout:i.timeout,success:e=>{l(s()(s()({},e),{},{errMsg:`${o}:ok`}))},fail:e=>{u(e.errMsg.replace(/^request/,o))}});else l(a)}}else l(a)})).catch(u)}))}(e,t):t}(e,p,t.call.bind(t),l.context,Us),Cr(p,(()=>({url:`gateway.call${e.path}`,method:e.method,headers:e.header,reqBody:sr(e.data),timestampMs:o}))),yield p}))()}}function Gs(e){if(e instanceof ArrayBuffer)try{return Ne(e)}catch(e){}return e}function Qs(e,t,r){if(t["x-wx-system-error"]){var n=+t["x-wx-system-error"];throw r=Gs(r),new $s(`${Us}: fail wx system error ${r}, code: ${n}, callid: ${e.stats.callid}`,n)}if(t["x-wx-server-timing"]){var o=(t["x-wx-server-timing"]||"").split(",");o.length>=2&&(e.stats.serverStartTs=Number(o[0]),e.stats.serverEndTs=Number(o[1]))}if(t["x-envoy-upstream-service-time"]){var i=+t["x-envoy-upstream-service-time"];isNaN(i)||(e.stats.upstreamCost=i)}if(t["x-wx-mesh-upstream-service-time"]){var a=t["x-wx-mesh-upstream-service-time"].split(",");a.length>=2&&(e.stats.meshStartTs=Number(a[0]),e.stats.meshEndTs=Number(a[1]))}}function zs(e){return{Gateway:{initRequired:!1,fn:Ws(e)}}}var Ys="services",Ks=new WeakMap;function Vs(e){e.registerService(function(e){var t={name:Ys,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get appid(){return e.instanceOptions.appid},appConfig:{}};return{name:Ys,context:t,getAPIs:zs.bind(null,t)}}(e),"services")}function Js(e,t){e.fail&&e.fail(t),e.complete&&e.complete(t),e.fail=void 0,e.complete=void 0}var Xs=function(){var e=c()((function*(e){try{if(!e.appid)throw new Error("missing appid");var t={appid:e.appid,data:e.reqData},r=(yield new Promise(((r,n)=>ne().wx.request({url:`${e.url||"https://servicewechat.com/wxa-qbase/jsoperatewxdata"}`,method:"POST",data:t,success:r,fail:n})))).data;0===r.base_resp.ret?function(e,t){e.success&&e.success(t),e.complete&&e.complete(t),e.success=void 0,e.complete=void 0}(e,{data:JSON.parse(r.data),rawData:r.data}):Js(e,{errMsg:`operateWXData:fail base_resp.ret ${r.base_resp.ret}`})}catch(t){Js(e,t)}}));return function(t){return e.apply(this,arguments)}}(),Zs={_operateWXData:Xs,invokeOperateWXData:Xs};function el(e){return{}}var tl="app";var rl,nl={REALTIME_DB_MAX_RECONNECT:5,REALTIME_DB_WS_RECONNECT_INTERVAL:5e3,REALTIME_DB_TOTAL_CONNECTION_TIMEOUT:1/0},ol={db_doc_size_limit:524288,db_realtime_ping_interval:15e3,db_realtime_pong_wait_timeout:15e3,db_realtime_query_event_cache_timeout:18e4,upload_max_file_size:20971520,get_temp_file_url_max_requests:50,call_function_poll_max_retry:10,call_function_max_req_data_size:5242880,call_function_client_poll_timeout:15e3,call_function_valid_start_retry_gap:6e4,call_container_poll_max_retry:10,call_container_client_poll_timeout:15e3,call_container_valid_start_retry_gap:6e4,call_container_max_req_data_size:5242880,call_container_use_private_http:0};function il(){var e,t,r;if(null!=Mt&&null!==(e=Mt.appContactInfo)&&void 0!==e&&null!==(t=e.stablePassThroughInfo)&&void 0!==t&&t.wxob_meta_data){var n,o,i=null==Mt||null===(n=Mt.appContactInfo)||void 0===n||null===(o=n.stablePassThroughInfo)||void 0===o?void 0:o.wxob_meta_data;return{isWhitelistMaskMode:i.is_whitelist_mask_mode,proportion:i.proportion,encrypt:i.encrypt,cloudServiceProvider:i.cloud_service_provider,minVersion:i.min_available_sdk_version,versionBlackList:i.sdk_version_black_list}}if(void 0!==(null==Mt||null===(r=Mt.appContactInfo)||void 0===r?void 0:r.wxob_meta_data)){var a,s=null==Mt||null===(a=Mt.appContactInfo)||void 0===a?void 0:a.wxob_meta_data;return{isWhitelistMaskMode:s.is_whitelist_mask_mode,proportion:s.proportion,encrypt:s.encrypt,cloudServiceProvider:s.cloud_service_provider,minVersion:s.min_available_sdk_version,versionBlackList:s.sdk_version_black_list}}}function al(){return"xxxxx-xxxx-xxxx-xxxx-xxxxx".replace(/[xy]/g,(e=>{var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function sl(){var e=Mt.system;if(!e||"ios"!==Mt.platform)return!0;var[t,r]=e.split(" ");return"ios"!==t.toLowerCase()||function(e,t){for(var r=e.split(".").map(Number),n=t.split(".").map(Number),o=0;o<r.length;++o){if(n.length===o)return 1;if(r[o]!==n[o])return r[o]>n[o]?1:-1}return r.length!==n.length?-1:0}(r,"14.5")>=0}function ll(){return(ll=c()((function*(){var e,t,r,n,o,i,a={record:{uuid:al(),event:JSON.stringify([{type:102}]),path:"",projectKey:null!==(e=null===(t=Mt.accountInfo)||void 0===t?void 0:t.appId)&&void 0!==e?e:"undefined_app_id",sdkVersion:null!==(r=Mt.sdkVersion)&&void 0!==r?r:"",timestamp:Date.now(),webviewId:0}};yield ke("https://servicewechat.com/ob/wxob",{method:"POST",headers:{"Content-Type":"application/json","x-wx-ob-env":"appservice","x-wx-ob-sdkversion":null!==(n=Mt.sdkVersion)&&void 0!==n?n:"","x-wx-ob-pack-version":"0","x-wx-ob-project-key":null!==(o=null===(i=Mt.accountInfo)||void 0===i?void 0:i.appId)&&void 0!==o?o:"undefined_app_id"},body:JSON.stringify(a)})}))).apply(this,arguments)}function ul(e,t){return new Promise(((r,n)=>{(t||ne()).invokeOperateWXData(s()(s()({},e),{},{success:r,fail:n}))}))}function cl(e){return dl.apply(this,arguments)}function dl(){return(dl=c()((function*(e){try{var t,r=yield ul({apiName:"webapi_getcloudstoragefederationtoken",reqData:{project_key:null===(t=Mt.accountInfo)||void 0===t?void 0:t.appId,object_prefix:`${e}*`}});if(void 0===r.data)throw new Error("no cos info");if(r.data.expire_timestamp){var n=1e3*r.data.expire_timestamp-Date.now()-3e5;setTimeout(c()((function*(){null==ce||ce.log("[wxobs as] reset cosInfo");var t=yield cl(e);ne().resetCosInfo(s()(s()({},t),{},{prefix:e}))})),n>0?n:1e3)}return r.data}catch(e){throw new Error(`获取 COS 临时秘钥失败: ${e.message}`)}}))).apply(this,arguments)}!function(e){e[e.AutoRecording=1]="AutoRecording",e[e.SdkRecording=2]="SdkRecording"}(rl||(rl={}));var pl=null,fl={autoStart:!0,isWhitelistMaskMode:!0,shouldCapturePage:()=>!0};class hl{constructor(e){var t,r;if(this.attrs={},this.encrypt=void 0,this.cloudServiceProvider=void 0,this.param=void 0,this.prefix=void 0,this.getUuid=()=>{var e;return null!==(e=this.param.uuid)&&void 0!==e?e:null},this.start=()=>{ne().startRecordingUserBehavior(),console.log("[wxobs appservice] obs is started")},this.stop=()=>{ne().stopRecordingUserBehavior(),console.log("[wxobs appservice] obs is stopped")},this.setAttrs=e=>{if(e){for(var t of Object.keys(e)){var r=e[t];"string"==typeof t&&"string"==typeof r?this.attrs[t]=r:console.warn("[wxobs appservice]the type of attributes must be string")}this.uploadAttrs()}},this.uploadAttrs=()=>{Object.keys(this.attrs).length>0&&ne().emitCustomAttrEvent(s()({},this.attrs))},this.param=e,this.cloudServiceProvider=e.cloudServiceProvider,this.encrypt=e.encrypt,null!==(t=il())&&void 0!==t&&t.versionBlackList&&Mt.sdkVersion&&il().versionBlackList.indexOf(Mt.sdkVersion)>=0)throw new Error("[wxobs as] this sdk version is blocked");if(!sl())throw function(){ll.apply(this,arguments)}(),new Error("[wxobs as] this system version is not supported");this.prefix=`${(r=new Date).getFullYear().toString()}${(r.getMonth()+1).toString().padStart(2,"0")}${r.getDate().toString().padStart(2,"0")}${r.getHours().toString().padStart(2,"0")}${r.getMinutes().toString().padStart(2,"0")}`,this.param.uuid=`${this.prefix}/${al()}`,this.setup(),console.log("[wxobs appservice] obs is setup")}setup(){var e=this;return c()((function*(){try{var t,r,n,o=yield cl(e.prefix),i=s()(s()({},fl),e.param);ne().setupUserBehaviorAnalytics(s()(s()({projectId:null!==(t=null===(r=Mt.accountInfo)||void 0===r?void 0:r.appId)&&void 0!==t?t:"undefined_app_id",encrypt:e.encrypt,cloudServiceProvider:e.cloudServiceProvider,cosInfo:s()(s()({},o),{},{prefix:e.prefix})},i),{},{dataAttrs:null===(n=e.param.captureDataAttrs)||void 0===n||n})),e.setAttrs(e.param.attrs)}catch(e){console.error("[wxobs appservice] setup error:",e)}}))()}}try{var _l;null===(_l=x)||void 0===_l||_l.onInitReady((()=>{try{Mt.onReady((()=>{if((null==Mt||null===(e=Mt.appContactInfo)||void 0===e||null===(t=e.wxob_meta_data)||void 0===t?void 0:t.wxob_mode)===rl.AutoRecording||(null==Mt||null===(r=Mt.appContactInfo)||void 0===r||null===(n=r.stablePassThroughInfo)||void 0===n||null===(o=n.wxob_meta_data)||void 0===o?void 0:o.wxob_mode)===rl.AutoRecording){var e,t,r,n,o,i=il();if(console.log("[wxobs appservice]auto recording mode",i),void 0!==i)if(pl)console.warn("[wxobs appservice]already setup");else try{var{proportion:a,isWhitelistMaskMode:s,encrypt:l,cloudServiceProvider:u}=i;a>=100*Math.random()&&(console.log("[wxobs as] auto record"),pl=new hl({isWhitelistMaskMode:s,encrypt:l,cloudServiceProvider:u}))}catch(e){console.error("[wxobs appservice]setup failed: ",e)}else console.warn("[wxobs appservice]can not access recording param")}}))}catch(e){null==ce||ce.warn(e)}}))}catch(e){}var gl={setup:function(e){var t,r,n,o,i,a,l,u,c;if((null==Mt||null===(t=Mt.appContactInfo)||void 0===t||null===(r=t.stablePassThroughInfo)||void 0===r||null===(n=r.wxob_meta_data)||void 0===n?void 0:n.wxob_mode)===rl.SdkRecording||(null==Mt||null===(o=Mt.appContactInfo)||void 0===o||null===(i=o.wxob_meta_data)||void 0===i?void 0:i.wxob_mode)===rl.SdkRecording||void 0!==(null===(a=Mt.appContactInfo)||void 0===a||null===(l=a.passThroughInfo)||void 0===l||null===(u=l.wxa_mgr)||void 0===u||null===(c=u.mgr_list)||void 0===c?void 0:c.find((e=>929===e.id&&1===e.value))))if(pl)console.warn("[wxobs appservice] already setup");else try{var d=il();return console.log("[wxobs as] sdk record"),(pl=new hl(s()(s()({},e),{},{encrypt:null==d?void 0:d.encrypt,cloudServiceProvider:null==d?void 0:d.cloudServiceProvider}))).getUuid()}catch(e){return console.error("[wxobs appservice] setup failed: ",e),null}else console.warn("[wxobs appservice]sdk recording mode is not supported")},start:function(){pl?pl.start():console.warn("[wxobs appservice] not setup")},stop:function(){pl?pl.stop():console.warn("[wxobs appservice] not setup")},setAttrs:function(e){pl?pl.setAttrs(e):console.warn("[wxobs appservice] not setup")}},vl=(e={})=>{var{sdk:t}=e,r=e.identifiers||{};return t&&oe(r,t),new yl(r,!1)},ml=(e={})=>vl(e).exportAPI;class yl{constructor(e,t){var r=this;this.inited=!1,this.isInstance=void 0,this.services={},this.apiServiceMap={},this.plugins=[],this.meta=void 0,this.config=void 0,this.identifiers=void 0,this.debug=!1,this.request=void 0,this.exportAPI=void 0,this.appConfig=void 0,this.apiPermissions=void 0,this.runtimeInfo=void 0,this.serviceEndpoint=void 0,this.authStorage=void 0,this.testSpeed=c()((function*(){var e,t,n=+new Date,o=n;return $e((t=(e={cloud:r,apiName:"tcbapi_testspeed",serializedReqData:null}).cloud,{apiName:"qbase_commapi",data:{qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:{env:e.env},qbase_meta:t.getMetaData(),cli_req_id:`${+new Date}_${Math.random()}`},cloud:t}),{fireOnIdle:!0,onFire:()=>{n=+new Date,o=n}}).then((e=>{Vt({apiName:"cloud.testspeed",apiEndTime:+new Date,apiStartTime:n,tunnelEndTime:+new Date,tunnelStartTime:o,tunnelTimeNoCSNetCost:e.data.baseresponse.stat.qbase_cost_time})})).catch((e=>{0}))})),this.identifiers=e,this.isInstance=t,this.runtimeInfo=bn(),this.serviceEndpoint=new Tt(e),this.request=We({cloud:this});var n,o=this;this.exportAPI={init:this.init.bind(this),obs:gl},this.isInstance||(this.exportAPI.Cloud=function(t){return new bl(e,o,t).exportAPI}),Dr(n=this),Pn(n),Ds(n),Fs(n),vn(n),Vs(n),this.meta={session_id:Date.now()+""},this.serviceEndpoint.setMetaData(this.getMetaData()),this.serviceEndpoint.setTunnelRequest(this.request),this.config={database:wl()},this.appConfig=s()({},ol),this.apiPermissions={};try{Mt.onReady((()=>{setTimeout((()=>{(()=>{if(!jt)try{var e=ne();e.wx.onAppShow&&e.wx.onAppShow((()=>{Wt=Date.now()})),e.wx.getNetworkType({success:e=>{qt=e.networkType},complete:()=>{jt=!0,Kt()}}),e.wx.onNetworkStatusChange((e=>{jt||(jt=!0,Kt()),qt=e.networkType}))}catch(e){}})()}),2e3),Lr()}))}catch(e){}}getMetaData(){if(!this.meta.sdk_version){var e=ne(this.identifiers);if(e){var t=e.wx;t&&t.version&&("miniprogram"===this.runtimeInfo.env?this.meta.sdk_version=`wx-miniprogram-sdk/${t.version.version} (${Date.parse(`${t.version.updateTime} GMT+0800`)} platform/${this.runtimeInfo.platform}})`:this.meta.sdk_version=`wx-web-sdk/undefined (${Date.parse("undefined GMT+0800")})`)}Mt.onReady((()=>{var e;this.meta.filter_user_info="singlePage"===(null===(e=Mt.appLaunchInfo)||void 0===e?void 0:e.mode)}))}return this.meta}getConfig(){return this.config}getEnvForService(e){if(this.isInstance)return this.instanceOptions.resourceEnv;var t=this.config;if(t.env)switch(f(t.env)){case"string":return t.env;case"object":return t.env[e];default:return}}checkAPIPermission(e){return!this.apiPermissions.hasOwnProperty(e)||1===this.apiPermissions[e]}init(e={}){this.inited=!0,this.initConfig(e);try{Ie(500,this.identifiers)}catch(e){null==ce||ce.log("privateGetBackgroundFetchData error",e)}return Promise.all([this.sendInitRequest().then((()=>{Math.random()<.1&&this.testSpeed()}))]).then((()=>{}))}initConfig(e){this.config=JSON.parse(JSON.stringify(e)),this.plugins=(e.plugins||[]).map((e=>Ks.get(e))).filter((e=>!!e)),this.config.database?this.config.database=p(this.config.database,wl()):this.config.database=wl(),"sdk"===this.runtimeInfo.platform&&ae(Zs)}sendInitRequest(){var e="string"==typeof this.config.env?this.config.env:void 0,t=JSON.stringify({trace_user:!1!==this.config.traceUser,env:e,region:this.config.region}),r=+new Date,n=r;return this.request(s()(s()({},this.config),{},{apiName:"tcbapi_init",serializedReqData:t,env:e})).then((e=>{var t=+new Date,o=e.data;this.appConfig=s()(s()({},this.appConfig),o.config);for(var i=o.tcb_api_list||[],a=0,l=i.length;a<l;a++)this.apiPermissions[i[a].apiname]=i[a].status;Vt({apiName:"cloud.init",apiEndTime:+new Date,apiStartTime:r,tunnelEndTime:t,tunnelStartTime:n,tunnelTimeNoCSNetCost:o.baseresponse.stat.qbase_cost_time})})).catch((e=>{console.error("cloud init error: ",e)}))}registerService(e,t){this.services[e.name]=e;var r=e.getAPIs();for(var n in r)if(this.apiServiceMap[n]=e.name,"function"==typeof r[n])this.registerFunction(n,!0,r[n],t);else{var{initRequired:o,fn:i}=r[n];this.registerFunction(n,o,i,t)}}registerFunction(e,t,r,n){var o=this,i=this.exportAPI;n&&(this.exportAPI[n]={},i=this.exportAPI[n]),i[e]=t?function(){if(!o.inited)throw new C({errMsg:"Cloud API isn't enabled, please call wx.cloud.init first\n请先调用 wx.cloud.init() 完成初始化后再调用其他云 API。"});if(!o.checkAPIPermission(e))throw new C({errCode:S.SDK_API_PERMISSION_DENIED,errMsg:S[S.SDK_API_PERMISSION_DENIED]});return r.apply(o,arguments)}:r}toJSON(){}}class bl extends yl{constructor(e,t,r){if(super(e,!0),this.defaultInstance=void 0,this.instanceOptions=void 0,this.webRequest=void 0,this._webCurrentRefreshTokenPromise=void 0,"web"===this.runtimeInfo.env){if(!r.identityless&&!r.appid)throw new Error("appid must be provided");if(!r.resourceAppid)throw new Error("resourceAppid must be provided")}if(!r.resourceEnv)throw new Error("resourceEnv must be provided");if(r.config||(r.config={}),this.defaultInstance=t,this.instanceOptions=JSON.parse(JSON.stringify(r)),this.meta=t.meta,this.apiPermissions=t.apiPermissions,this.instanceOptions.config.database=p(wl(),this.instanceOptions.config.database||{}),"web"===this.runtimeInfo.env){if(this.exportAPI.init=this.webInit.bind(this),this.webRequest=(0,mn.getBoundAuthRequest)(this),this.registerService((0,mn.createWebService)(this)),!this.instanceOptions.identityless&&(this.authStorage=this.defaultInstance.authStorage,!this.authStorage))throw new Error("authStorage not found")}else"sdk"===this.runtimeInfo.env?(this.exportAPI.init=this.webInit.bind(this),this.registerService((o={name:tl,identifiers:(n=this).identifiers,request:n.request,isInstance:n.isInstance,get debug(){return n.debug},get env(){return n.getEnvForService(tl)},cloud:n,appConfig:{}},{name:tl,context:o,getAPIs:el.bind(null,o)})),this.instanceOptions.identityless=!0):this.exportAPI.init=this.miniprogramInit.bind(this);var n,o;this.instanceOptions.resourceAppid&&(this.exportAPI.refreshAuth=this.refreshAuth.bind(this))}miniprogramInit(){var e=()=>super.init,t=this;return c()((function*(){if(!t.inited){if(t.instanceOptions.resourceAppid){var r=(yield t.refreshAuth()).data.env_auth_info;return 0===r.errCode?(e().call(t),{errCode:r.errCode,errMsg:r.errMsg,expireTime:1e3*r.expire_time}):{errCode:r.errCode,errMsg:r.errMsg}}e().call(t)}}))()}webInit(){var e=()=>super.init,t=this;return c()((function*(){if(!t.inited){if(!t.instanceOptions.identityless){var r=(yield t.refreshAuth()).data.env_auth_info;return 0===r.errCode?(t.sendInitRequest().then((()=>{t.testSpeed()})),e().call(t),{errCode:r.errCode,errMsg:r.errMsg,expireTime:1e3*r.expire_time}):{errCode:r.errCode,errMsg:r.errMsg}}t.inited=!0}}))()}webRefreshToken(){var e=this;return c()((function*(){return e._webCurrentRefreshTokenPromise||(e._webCurrentRefreshTokenPromise=new Promise(function(){var t=c()((function*(t,r){try{var n=(yield e.webRequest({url:"/refresh_token",method:"POST",json:{appid:e.instanceOptions.appid,refresh_token:e.authStorage.getItem("refreshToken")}})).data;e.authStorage.setItem("appid",n.access_token),t()}catch(e){r(e)}finally{e._webCurrentRefreshTokenPromise=void 0}}));return function(e,r){return t.apply(this,arguments)}}())),e._webCurrentRefreshTokenPromise}))()}refreshAuth(){var e=JSON.stringify({resource_appid:this.instanceOptions.resourceAppid,resource_env:this.instanceOptions.resourceEnv}),t=+new Date,r=t,n=this.request({apiName:"tcbapi_getenvauth",serializedReqData:e});return n.then((e=>{var n=+new Date;Vt({apiName:"cloud.refreshAuth",apiEndTime:+new Date,apiStartTime:t,tunnelEndTime:n,tunnelStartTime:r})})),n}}function wl(){return{realtime:{maxReconnect:nl.REALTIME_DB_MAX_RECONNECT,reconnectInterval:nl.REALTIME_DB_WS_RECONNECT_INTERVAL,totalConnectionTimeout:nl.REALTIME_DB_TOTAL_CONNECTION_TIMEOUT}}}var Al=Symbol("CDN");class El{constructor(e){this.symbol=Al,this.options=void 0,this.options=e}}function Il(e,t){return new Promise(((r,n)=>{(t||ne()).uploadToCommonCDN(s()(s()({},e),{},{success:r,fail:n}))}))}var Sl,Cl,Tl,Ol=function(){var e=c()((function*(e){try{if(!e.service||!e.api)throw new Error("field 'service' and 'api' must be provided");var t=new WeakMap,r=[];e.data&&JSON.stringify(e.data,((n,o)=>o&&o.symbol===Al?void r.push(new Promise(((r,n)=>{var i,a={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},s=o;if("Object"===(i=s.options,Object.prototype.toString.call(i).slice(8,-1))){if(!s.options.filePath)throw new Error("filePath must be provided");a.filePath=s.options.filePath}else a.fileData=s.options;r(Il(a,e.sdk).then((e=>{t.set(o,e.fileUrl)})))}))):o)),yield Promise.all(r);var n,o,i,a=JSON.stringify(e.data,((e,r)=>r&&r.symbol===Al&&t.has(r)?t.get(r):r)),{data:s}=yield ul({apiName:"webapi_servicemarket_jsapi_comm",reqData:{service_id:e.service,api_name:e.api,data:a,consume_type:e.consumeType,consume_appid:e.consumeAppid,client_msg_id:`${Math.random()}_${Date.now()}`,version:1}},e.sdk);try{var l=s;if(n=l.request_id,0===l.errcode)o=JSON.parse(l.data);else{var u=`invokeService:fail ${l.errcode} ${l.errmsg} (requestId: ${n})`;(i=new Error(u)).errCode=l.errcode,i.errMsg=u,i.requestId=n}}catch(p){var c=`invokeService:fail inner protocol parse failed (requestId: ${n||"empty"})`;(i=new Error(c)).errCode=-1,i.errMsg=c,i.requestId=n}if(i)throw i;return{errMsg:"invokeService:ok",data:o,requestId:n}}catch(e){var d="invokeService:fail ";if(e&&e.errMsg&&e.err_code){d+=e.errMsg;var p=new Error(d+`(err_code ${e.err_code})`);throw p.errCode=e.err_code,p}throw e&&e.errMsg&&e.errCode?e:new Error(`invokeService:fail ${e}`)}}));return function(t){return e.apply(this,arguments)}}();!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL",e[e.PreResp=3]="PreResp",e[e.FinalResp=4]="FinalResp"}(Sl||(Sl={})),function(e){e[e.None=0]="None",e[e.SysErr=1]="SysErr",e[e.Timeout=2]="Timeout"}(Cl||(Cl={})),function(e){e[e.Sync=0]="Sync",e[e.LongAsync=2]="LongAsync"}(Tl||(Tl={}));var xl,Nl={SM_EXCEED_MAX_TIMEOUT_POLL_RETRY:100,SM_EMPTY_CALL_RESULT:101,SM_EXCEED_MAX_POLL_RETRY:102,SM_PROVIDER_EXECUTION_ERROR:103,SM_POLL_RESULT_EXPIRED:104,SM_EMPTY_POLL_RESULT_BASE_RESP:105,SM_POLL_RESULT_BASE_RESP_RET_ABNORMAL:106,SM_UNKNOWN_SCENE:107,SM_SYSTEM_ERROR:108},Rl="exceed max timeout retry",Pl="empty call result",Dl="exceed max poll retry",Ll="invokeService",Bl=2e4;!function(e){e[e.InvalidRequestId=14]="InvalidRequestId"}(xl||(xl={}));var kl=e=>{var t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},Ml=e=>e.join("->"),Fl=function(){var e=c()((function*(e){try{if(!e.service||!e.api)throw new Error("field 'service' and 'api' must be provided");var t=new WeakMap,r=[];e.data&&JSON.stringify(e.data,((n,o)=>o&&o.symbol===Al?void r.push(new Promise(((r,n)=>{var i,a={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},s=o;if("Object"===(i=s.options,Object.prototype.toString.call(i).slice(8,-1))){if(!s.options.filePath)throw new Error("filePath must be provided");a.filePath=s.options.filePath}else a.fileData=s.options;r(Il(a,e.sdk).then((e=>{t.set(o,e.fileUrl)})))}))):o)),yield Promise.all(r);var n=JSON.stringify(e.data,((e,r)=>r&&r.symbol===Al&&t.has(r)?t.get(r):r)),o=`${Math.random()}_${Date.now()}`;if(e.async){var i={service_id:e.service,api_name:e.api,data:n,consume_type:e.consumeType,consume_appid:e.consumeAppid,client_msg_id:`${Math.random()}_${Date.now()}`,version:2,call_id:o,scene:Sl.CALL,retry_reason:Cl.None,req_type:Tl.LongAsync},a=(yield ul({apiName:"webapi_servicemarket_jsapi_comm",reqData:i},e.sdk)).data;if(a.scene===Sl.FinalResp&&0===a.errcode)return{errMsg:"invokeService:ok",requestId:a.request_id};var l=O({errCode:Nl.SM_SYSTEM_ERROR,errMsg:`requestID ${a.request_id}, error message ${a.errmsg||"unknown"} (callid ${o})`},Ll);throw l.requestID=a.request_id,l}var{result:u,requestID:d}=yield function(e,t,r){return h.apply(this,arguments)}(e,n,o);return{errMsg:"invokeService:ok",data:u,requestId:d}}catch(e){var p="invokeService:fail ";if(e&&e.errMsg&&e.err_code){p+=e.errMsg;var f=new Error(p+`(err_code ${e.err_code})`);throw f.errCode=e.err_code,f}throw e&&e.errMsg&&e.errCode?e:new Error(`invokeService:fail ${e}`)}function h(){return h=c()((function*(e,t,r){return new Promise(((n,o)=>{var i=[kl("start")],{resolve:a,reject:s}=v(i,n,o);_({param:e,data:t,callID:r,scene:Sl.CALL,retryReason:Cl.None,tryCount:50,systemErrorRetry:2,timeoutErrorRetry:2,trace:i,resolve:a,reject:s})}))})),h.apply(this,arguments)}function _(e){return g.apply(this,arguments)}function g(){return g=c()((function*(t){var{param:r,data:n,callID:o,scene:i,retryReason:a,tryCount:l,trace:u,systemErrorRetry:d,timeoutErrorRetry:p,resolve:f,reject:h}=t,g={service_id:r.service,api_name:r.api,data:i===Sl.CALL?n:void 0,consume_type:e.consumeType,consume_appid:e.consumeAppid,client_msg_id:`${Math.random()}_${Date.now()}`,version:2,call_id:o,scene:i,retry_reason:a},v=!1,m=!1,y=()=>{clearTimeout(w),m=!0},b=+new Date,w=setTimeout(c()((function*(){if(!(+new Date-b>2e4&&(yield de(),m))){if(!Ft()&&+new Date-b>60)return u.push(kl("timeout, exceed max retry gap")),h(O({errCode:Nl.SM_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${o}) (trace: ${Ml(u)})`},Ll));v=!0,t.timeoutErrorRetry>0?(u.push(kl("timeout, retry")),_(s()(s()({},t),{},{scene:i,retryReason:Cl.Timeout,tryCount:l-1,timeoutErrorRetry:p-1}))):(u.push(kl("timeout, abort")),h(O({errCode:Nl.SM_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`${Rl} (callId: ${o}) (trace: ${Ml(u)})`},Ll)))}})),Bl);try{var A=yield ul({apiName:"webapi_servicemarket_jsapi_comm",reqData:g},e.sdk);try{if(v)return;y();var E=A.data;if(!E&&A.rawData)try{E=JSON.parse(A.rawData)}catch(e){}if(!E)return u.push(kl("empty resp")),h(O({errCode:Nl.SM_EMPTY_CALL_RESULT,errMsg:Pl},Ll));if(E.scene!==Sl.PreResp){if(E.scene===Sl.FinalResp){if(0!==E.errcode){var I=O({errCode:Nl.SM_PROVIDER_EXECUTION_ERROR,errMsg:`requestID ${E.request_id}, error message ${E.provider_errmsg||"unknown"} (callid ${o})`},Ll);return I.requestID=E.request_id,h(I)}var S=E.data;try{S=JSON.parse(S)}catch(e){}return f({result:S,requestID:E.request_id})}return u.push(kl("unexpected scene")),h(O({errCode:Nl.SM_UNKNOWN_SCENE,errMsg:`unknown scene ${E.scene} (callId: ${o}) (trace: ${Ml(u)})`},Ll))}if(!(l>=0))return u.push(kl("too many polls, abort")),h(O({errCode:Nl.SM_EXCEED_MAX_POLL_RETRY,errMsg:`${Dl} (callId: ${o}) (trace: ${Ml(u)})`},Ll));u.push(kl("normal poll")),_(s()(s()({},t),{},{scene:Sl.POLL,retryReason:Cl.None,tryCount:l-1}))}catch(e){h(O({errCode:Nl.SM_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${o})`},Ll))}}catch(e){if(v)return;y();var C=e instanceof Error?e:JSON.stringify(e);e&&e.operateWXDataFail&&d>0?(u.push(kl(`system error (${C}), retry`)),_(s()(s()({},t),{},{scene:i,retryReason:Cl.SysErr,tryCount:l-1,systemErrorRetry:d-1}))):(u.push(kl(`system error (${C}), abort`)),h(O(`${C} (callId: ${o}) (trace: ${Ml(u)})`,Ll)))}})),g.apply(this,arguments)}function v(e,t,r){var n=t=>{e.push(kl(`app ${t}`))};me(n);return{resolve:e=>{ye(n),t(e)},reject:e=>{ye(n),r(e)}}}}));return function(t){return e.apply(this,arguments)}}();function jl(e){return Ul.apply(this,arguments)}function Ul(){return(Ul=c()((function*(e){var t=(yield ul({apiName:"webapi_servicemarket_jsapi_retrieve",reqData:{request_id:e.requestId}},e.sdk)).data;if(0===t.errcode)return t.provider_errmsg?{errCode:0,errMsg:"getAsyncResult:fail provider execution error",status:t.status,providerErrMsg:t.provider_errmsg,requestId:t.request_id}:{errCode:0,errMsg:"getAsyncResult:ok",data:JSON.parse(t.data),status:t.status,requestId:t.request_id};var r=new Error(`getAsyncResult:fail requestID ${t.request_id}, error message ${t.errmsg||"unknown"}`);throw r.errCode=t.errcode,r.errMsg=t.errmsg,r}))).apply(this,arguments)}var $l="invokeService",Wl="getAsyncResult",ql=e=>{(Ft()&&!e.async?Ol(e):Fl(e)).then((t=>{G($l,e,t)})).catch((t=>{Q($l,e,t)}))},Hl=e=>{jl(e).then((t=>{G(Wl,e,t)})).catch((t=>{Q(Wl,e,t)}))};function Gl(e={}){var{sdk:t}=e;return{invokeService:e=>(e=>z(e)?ql(e):Ft()&&!e.async?Ol(e):Fl(e))(s()(s()({},e),{},{sdk:t})),getAsyncResult:e=>(e=>z(e)?Hl(e):jl(e))(s()(s()({},e),{},{sdk:t})),CDN:El}}})(),R=n})();var P=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){var n=r(1),o=r(3),i=r(5),a=r(6),s=r(7),l=r(8),u=r(9),c=r(15),d=r(12),p=r(17),f=r(18),h=r(19),_=r(16),g=r(10),v=r(20),m=r(14),y=r(4),b=r(13),w=r(21);t.FreeTmpl=w,t.precompileTemplate=w.precompiler?w.precompiler.compile:null,t.precompiler=w.precompiler?w.precompiler:null,t.HtmlLLParser=w.htmlParser?w.htmlParser:null,t.LLParser=n,t.dataPath=s,t.dataUtils=i,t.Event=a,t.Element=u,t.TextNode=d,t.NativeNode=p,t.VirtualNode=f,t.ShadowRoot=h,t.Behavior=l,t.Component=c,t.Observer=g,t.DataGroup=_,t.ElementIterator=v,t.FakeDomElement=m,t.registerBehavior=l.create,t.registerElement=c.register,t.createElement=c.create,t.createTextNode=d.create,t.createVirtualNode=f.create,t.appendChild=u.appendChild,t.insertBefore=u.insertBefore,t.removeChild=u.removeChild,t.replaceChild=u.replaceChild,t.addListenerToElement=a.addListenerToElement,t.removeListenerFromElement=a.removeListenerFromElement,t.triggerEvent=a.triggerEvent,t.safeCallback=o.safeCallback,t.addGlobalErrorListener=o.addGlobalErrorListener,t.removeGlobalErrorListener=o.removeGlobalErrorListener,t.addGlobalWarningListener=o.addGlobalWarningListener,t.removeGlobalWarningListener=o.removeGlobalWarningListener,t.globalOptions=y,t.globalState=b,c._setDefaultTemplateEngine(w),(t.updateDefaultComponent=function(){delete c._list[""],c.register({is:"",options:{writeOnly:!0,allowInWriteOnly:!0,lazyRegistration:!1,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1}})})();var A=function(e){var t="";if(e instanceof P.Element&&(e.id&&(t+=' id="'+e.id+'"'),e.slot&&(t+=' slot="'+e.slot+'"'),e.__slotName&&(t+=' name="'+e.__slotName+'"'),e.classList&&(t+=' class="'+e.class+'"'),e.$$&&e.$$.getAttribute("style")&&(t+=' style="'+e.$$.getAttribute("style")+'"')),e instanceof P.VirtualNode)return t;if(e instanceof P.Component)return c.listPublicProperties(e).forEach((function(r){t+=" "+r+"="+JSON.stringify(e[r])})),t;for(var r=e.attributes,n=0;n<r.length;n++)t+=" "+r[n].name+'="'+r[n].value+'"';return t},E=t.dumpElementToString=function(e,t,r){var n=null;y.hasDOMBackend&&(n=window);var o=0,i="";for(o=r=r||0;o;o--)i+="  ";var a="";if(e instanceof P.Element)a+=i+"<"+(e.$$?e.$$.tagName.toLowerCase()+":":"")+e.is+A(e)+">",a+=e instanceof P.VirtualNode?" [Exp-Virtual]":e instanceof P.NativeNode?" [Exp-Native]":" [Exp-Component]",a+="\n"+E(t?e.__wxSlotChildren:e.childNodes,t,r+1);else if(e instanceof P.TextNode)a+=i+e.textContent+" [Exp-Text]\n";else if(n&&n.HTMLElement&&e instanceof n.HTMLElement)a+=i+"<"+e.tagName.toLowerCase()+A(e)+"> [DOM-Element]",a+="\n"+E(t&&e.__wxSlotChildren||e.childNodes,t,r+1);else if(n&&n.Text&&e instanceof n.Text)a+=i+e.textContent+" [DOM-Text]\n";else if(void 0!==e.length)for(o=0;o<e.length;o++)a+=E(e[o],t,r);else a=i+"[unknown node]\n";return a};t.dumpElement=function(e,t){console.log(E(e,t))}},function(e,t,r){var n=null,o=function(){},i=o.stats={all:0,copyIn:0,parse:0,constructOut:0},a=function(e){return n.llparser_create_descriptor(e,1)},s=function(e,t){var r=n.llparser_create_descriptor(e,0),o=!1;"^"===t[0]&&(o=!0);for(var i=o?1:0;i<t.length;i++){var a=t.charCodeAt(i);if("-"===t[i+1]){var s=t.charCodeAt(i+2);a<=s?(n.llparser_descriptor_add_range(r,a,s),i+=2):n.llparser_descriptor_add_char(r,a)}else n.llparser_descriptor_add_char(r,a)}return o&&n.llparser_descriptor_revert(r),r};o.create=function(e,t,i){n||(n=r(2));var l=new o;i=i||16384;var u=l._llp=n.llparser_create(i,128,128),c={},d={},p="";for(p in c.ALL=n.llparser_create_descriptor(u,0),n.llparser_descriptor_set_all(c.ALL),c.NULL=n.llparser_create_descriptor(u,0),n.llparser_descriptor_set_nil(c.NULL),e)c[p]=a(u);for(p in e)for(var f=e[p],h=c[p],_=0;_<f.length;_++){for(var g=f[_].id,v=f[_].states,m=[],y=0;y<v.length;y++){var b=v[y];c[b]||(c[b]=s(u,b)),m.push(c[b])}var w=0;"_raw"===g?w=1:"_jump"===g?w=65536:"_blank"===g&&(w=65537);var A=n.llparser_add_rule(u,w,h,m.length,m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7]);0===w&&(d[A]=t[g])}return n.llparser_prepare(u),l._inputPtr=n.llparser_get_input_buffer(u),l._resultPtr=n.llparser_get_result(u),l._stateIdMap=c,l._ruleCbMap=d,l._charCountLimit=i,l};o.prototype.parse=function(e,t){var r=Date.now();(function(e,t,r,n){for(var o=n>e.length?e.length:n,i=0;i<o;i++)t[r+i]=e.charCodeAt(i);t[r+o]=0})(t,new Uint16Array(n.memory.buffer),this._inputPtr>>1,this._charCountLimit),i.copyIn=i.copyIn+Date.now()-r,r=Date.now();var o=n.llparser_parse(this._llp,this._stateIdMap[e]);if(i.parse=i.parse+Date.now()-r,r=Date.now(),o)throw new Error("Parsing failed at character position "+(o-1)+' near "'+t.slice(o-20,o)+'"');var a=function(e,t,r,n,o){for(var i=[],a={i:0,r:0,n:!1,cc:-1,c:[]},s=a,l=o.pos,u=!1,c=!1,d=!1;;){var p=t[l],f=t[l+1];if(f<0?(c=!0,f=-f-1):c=!1,p>=0){d=!0;var h=r.slice(p,f);s.c.push(h),u=c}else{if(-1===p&&0===f)break;d=!1;var _=-p,g=f,v={i:s.c.length-(u?1:0),r:_,n:c,cc:g,c:[]};if(u){var m=s.c.length-1,y=s.c[m];v.c.push(y),s.c[m]=v}else s.c.push(v);i.push(s),s=v,u=!1}if(!d||!u)for(;s.c.length===s.cc;){u=s.n;var b=i.pop();if(b.c[s.i]=n[s.r].call(e,s.c),s=b,u)break}l+=2}return a.c[0]}(this,new Int32Array(n.memory.buffer),t,this._ruleCbMap,{pos:this._resultPtr>>2});return i.constructOut=i.constructOut+Date.now()-r,a},o.prototype.destroy=function(){n.llparser_destroy(this._llp)},e.exports=o},function(e,t){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,r){"use strict";function n(e,t,r){return v.llparser_create(e,t,r)}function o(e){v.llparser_destroy(e)}function i(e,t){return v.llparser_create_descriptor(e,t)}function a(e){v.llparser_descriptor_set_all(e)}function s(e){v.llparser_descriptor_set_nil(e)}function l(e,t){v.llparser_descriptor_add_char(e,t)}function u(e,t,r){v.llparser_descriptor_add_range(e,t,r)}function c(e){v.llparser_descriptor_revert(e)}function d(e,t,r,n,o,i,a,s,l,u,c,d){return v.llparser_add_rule(e,t,r,n,o,i,a,s,l,u,c,d)}function p(e){v.llparser_prepare(e)}function f(e,t){return v.llparser_parse(e,t)}function h(e){return v.llparser_get_input_buffer(e)}function _(e){return v.llparser_get_result(e)}function g(){v.wasm_main()}r.r(t),r.d(t,"llparser_create",(function(){return n})),r.d(t,"llparser_destroy",(function(){return o})),r.d(t,"llparser_create_descriptor",(function(){return i})),r.d(t,"llparser_descriptor_set_all",(function(){return a})),r.d(t,"llparser_descriptor_set_nil",(function(){return s})),r.d(t,"llparser_descriptor_add_char",(function(){return l})),r.d(t,"llparser_descriptor_add_range",(function(){return u})),r.d(t,"llparser_descriptor_revert",(function(){return c})),r.d(t,"llparser_add_rule",(function(){return d})),r.d(t,"llparser_prepare",(function(){return p})),r.d(t,"llparser_parse",(function(){return f})),r.d(t,"llparser_get_input_buffer",(function(){return h})),r.d(t,"llparser_get_result",(function(){return _})),r.d(t,"wasm_main",(function(){return g})),r.d(t,"memory",(function(){return m}));var v=r(1),m=v.memory;v.__wbindgen_start()},function(e,t,r){"use strict";r.r(t),r.d(t,"memory",(function(){return i})),r.d(t,"rust_calloc",(function(){return a})),r.d(t,"rust_free",(function(){return s})),r.d(t,"llparser_create",(function(){return l})),r.d(t,"llparser_destroy",(function(){return u})),r.d(t,"llparser_create_descriptor",(function(){return c})),r.d(t,"llparser_descriptor_set_all",(function(){return d})),r.d(t,"llparser_descriptor_set_nil",(function(){return p})),r.d(t,"llparser_descriptor_add_char",(function(){return f})),r.d(t,"llparser_descriptor_add_range",(function(){return h})),r.d(t,"llparser_descriptor_revert",(function(){return _})),r.d(t,"llparser_add_rule",(function(){return g})),r.d(t,"llparser_prepare",(function(){return v})),r.d(t,"llparser_parse",(function(){return m})),r.d(t,"llparser_get_input_buffer",(function(){return y})),r.d(t,"llparser_get_result",(function(){return b})),r.d(t,"wasm_main",(function(){return w})),r.d(t,"__wbindgen_start",(function(){return A}));var n=new ArrayBuffer(1114112),o=function(e,t,r){function n(e){var t=0,r=0,n=0,o=0,i=0,l=0,u=0;r=(t=e+-8|0)+(e=-8&(o=h[e+-4>>2]))|0;e:{t:{r:{n:{o:if(!(1&o)){if(!(3&o))break n;if(e=(o=h[t>>2])+e|0,(0|(t=t-o|0))==h[262246]){if(3!=(3&h[r+4>>2]))break o;return h[262244]=e,h[r+4>>2]=-2&h[r+4>>2],h[t+4>>2]=1|e,void(h[e+t>>2]=e)}o>>>0>=256?s(t):(0|(n=h[t+8>>2]))==(0|(i=h[t+12>>2]))?(l=1048576,u=h[262144]&d(o>>>3),h[l>>2]=u):(h[n+12>>2]=i,h[i+8>>2]=n)}if(2&(o=h[r+4>>2]))h[r+4>>2]=-2&o,h[t+4>>2]=1|e,h[e+t>>2]=e;else{o:{if(h[262247]!=(0|r)){if((0|r)!=h[262246])break o;return h[262246]=t,e=h[262244]+e|0,h[262244]=e,h[t+4>>2]=1|e,void(h[e+t>>2]=e)}if(h[262247]=t,e=h[262245]+e|0,h[262245]=e,h[t+4>>2]=1|e,(0|t)==h[262246]&&(h[262244]=0,h[262246]=0),(r=h[262254])>>>0>=e>>>0)break n;if(!(e=h[262247]))break n;i:if(!((o=h[262245])>>>0<41))for(t=1049e3;;){if((n=h[t>>2])+h[t+4>>2]>>>0>e>>>0&&n>>>0<=e>>>0)break i;if(!(t=h[t+8>>2]))break}if(n=4095,e=h[262252]){for(t=0;t=t+1|0,e=h[e+8>>2];);n=t>>>0>4095?t:4095}if(h[262256]=n,o>>>0<=r>>>0)break n;return void(h[262254]=-1)}if(e=(n=-8&o)+e|0,n>>>0>=256?s(r):(0|(n=h[r+12>>2]))==(0|(r=h[r+8>>2]))?(l=1048576,u=h[262144]&d(o>>>3),h[l>>2]=u):(h[r+12>>2]=n,h[n+8>>2]=r),h[t+4>>2]=1|e,h[e+t>>2]=e,h[262246]==(0|t)){h[262244]=e;break n}}if(e>>>0<256)break r;if(a(t,e),e=h[262256]+-1|0,h[262256]=e,!e){if(e=h[262252])break t;e=4095;break e}}return}return e=1048584+((r=e>>>3)<<3)|0,o=h[262144],r=1<<(31&r),n=h[e+8>>2],o&r||(h[262144]=r|o,n=e),r=n,h[e+8>>2]=t,h[r+12>>2]=t,h[t+12>>2]=e,void(h[t+8>>2]=r)}for(t=0;t=t+1|0,e=h[e+8>>2];);e=t>>>0>4095?t:4095}h[262256]=e}function o(e,t,r,n,i){var a;if(b=a=b-48|0,h[a+44>>2]=e,h[a+40>>2]=t,h[a+36>>2]=r,h[a+32>>2]=n,h[a+28>>2]=i,h[h[a+40>>2]>>2]!=h[a+36>>2])for(h[h[a+40>>2]>>2]=h[a+36>>2],h[a+24>>2]=h[h[a+40>>2]+136>>2],h[a+20>>2]=1&(0!=h[a+28>>2]^-1^-1);h[a+24>>2];){for(h[a+20>>2]||(h[a+28>>2]=h[a+24>>2]),h[a+16>>2]=h[h[h[a+24>>2]>>2]+8>>2],1==h[h[a+16>>2]+4>>2]&&o(h[a+44>>2],h[a+16>>2],h[a+36>>2],h[a+32>>2],h[a+28>>2]),h[a+12>>2]=0;!(h[a+12>>2]>=128);)_[h[a+12>>2]+(h[a+16>>2]+8|0)|0]&&(v[h[a+28>>2]>>2]>=v[h[a+32>>2]+(h[a+12>>2]<<2)>>2]&&h[h[a+32>>2]+(h[a+12>>2]<<2)>>2]||(h[h[a+32>>2]+(h[a+12>>2]<<2)>>2]=h[h[a+28>>2]>>2])),h[a+12>>2]=h[a+12>>2]+1;h[a+24>>2]=h[h[a+24>>2]+4>>2]}b=a+48|0}function i(e,t,r,n){var o;for(h[44+(o=b-48|0)>>2]=e,h[o+40>>2]=t,h[o+36>>2]=r,h[o+32>>2]=n,h[o+28>>2]=h[h[o+40>>2]+136>>2];h[o+28>>2];){if(h[o+24>>2]=h[h[h[o+28>>2]>>2]+8>>2],h[o+24>>2]==h[o+40>>2])for(h[o+20>>2]=h[h[h[o+28>>2]>>2]+12>>2],h[o+16>>2]=0;!(h[o+16>>2]>=128);){e:{if(1!=h[h[o+20>>2]+4>>2]){if(!_[h[o+16>>2]+(h[o+20>>2]+8|0)|0])break e}else if(h[o+12>>2]=h[h[o+44>>2]+32>>2]+((h[o+20>>2]-h[h[o+44>>2]+24>>2]|0)/140<<9),!h[h[o+12>>2]+(h[o+16>>2]<<2)>>2])break e;v[h[o+28>>2]>>2]>=v[h[o+32>>2]+(h[o+16>>2]<<2)>>2]&&h[h[o+32>>2]+(h[o+16>>2]<<2)>>2]||(h[h[o+32>>2]+(h[o+16>>2]<<2)>>2]=h[h[o+28>>2]>>2])}h[o+16>>2]=h[o+16>>2]+1}h[o+28>>2]=h[h[o+28>>2]+4>>2]}}function a(e,t){var r=0,n=0,o=0,i=0;h[e+16>>2]=0,h[e+20>>2]=0,o=e,r=0,(n=t>>>8)&&(r=31,t>>>0>16777215||(r=62+((t>>>(6-(n=y(n))&31)&1)-(n<<1)|0)|0)),h[o+28>>2]=r,o=1048848+(r<<2)|0;e:{t:{r:{n:{if((i=h[262145])&(n=1<<(31&r))){if(n=h[o>>2],(-8&h[n+4>>2])!=(0|t))break n;r=n;break r}h[262145]=n|i,h[o>>2]=e,h[e+24>>2]=o;break e}for(o=t<<(31==(0|r)?0:25-(r>>>1)&31);;){if(!(r=h[(i=16+((o>>>29&4)+n|0)|0)>>2]))break t;if(o<<=1,n=r,(-8&h[r+4>>2])==(0|t))break}}return t=h[r+8>>2],h[t+12>>2]=e,h[r+8>>2]=e,h[e+24>>2]=0,h[e+12>>2]=r,void(h[e+8>>2]=t)}h[i>>2]=e,h[e+24>>2]=n}h[e+12>>2]=e,h[e+8>>2]=e}function s(e){var t,r=0,n=0,o=0,i=0,a=0,s=0;t=h[e+24>>2];e:{t:{if((0|e)==(0|(r=h[e+12>>2]))){if(o=h[(r=e+20|0)>>2],n=h[(o?20:16)+e>>2])break t;r=0;break e}n=h[e+8>>2],h[n+12>>2]=r,h[r+8>>2]=n;break e}for(o=o?r:e+16|0;i=o,(n=h[(o=(r=n)+20|0)>>2])||(o=r+16|0,n=h[r+16>>2]),n;);h[i>>2]=0}e:if(t){n=1048848+(h[e+28>>2]<<2)|0;t:{if((0|e)==h[n>>2]){if(h[n>>2]=r,r)break t;return a=1048580,s=h[262145]&d(h[e+28>>2]),void(h[a>>2]=s)}if(h[(h[t+16>>2]==(0|e)?16:20)+t>>2]=r,!r)break e}h[r+24>>2]=t,(n=h[e+16>>2])&&(h[r+16>>2]=n,h[n+24>>2]=r),(e=h[e+20>>2])&&(h[r+20>>2]=e,h[e+24>>2]=r)}}function l(e,t){return 0|function(e){var t;return!(t=function(e){var t=0,r=0,n=0,o=0,i=0,l=0,u=0,f=0,_=0,g=0,m=0;e:{t:{r:{if(e>>>0>=245){if(e>>>0>=4294901709)break t;if(o=-8&(e=e+11|0),!(f=h[262145]))break r;r=0-o|0,u=0,(e>>>=8)&&(u=31,o>>>0>16777215||(u=62+((o>>>(6-(e=y(e))&31)&1)-(e<<1)|0)|0));n:{o:{if(e=h[1048848+(u<<2)>>2]){for(i=o<<(31==(0|u)?0:25-(u>>>1)&31);;){if(!((l=-8&h[e+4>>2])>>>0<o>>>0||(l=l-o|0)>>>0>=r>>>0||(n=e,r=l))){r=0;break o}if(l=h[e+20>>2],e=h[16+((i>>>29&4)+e|0)>>2],t=l&&(0|l)!=(0|e)?l:t,i<<=1,!e)break}if(t){e=t;break o}if(n)break n}if(n=0,!(e=(0-(e=2<<(31&u))|e)&f))break r;if(!(e=h[1048848+(c(e&0-e)<<2)>>2]))break r}for(;n=(l=(i=(t=-8&h[e+4>>2])-o|0)>>>0<r>>>0&t>>>0>=o>>>0)?e:n,r=l?i:r,e=(t=h[e+16>>2])||h[e+20>>2];);if(!n)break r}if(r>>>0>=(e=h[262244])-o>>>0&&e>>>0>=o>>>0)break r;s(n);n:if(r>>>0>=16){if(h[n+4>>2]=3|o,h[4+(t=n+o|0)>>2]=1|r,h[t+r>>2]=r,r>>>0>=256){a(t,r);break n}e=1048584+((r>>>=3)<<3)|0,i=h[262144],r=1<<(31&r),u=h[e+8>>2],i&r||(h[262144]=r|i,u=e),r=u,h[e+8>>2]=t,h[r+12>>2]=t,h[t+12>>2]=e,h[t+8>>2]=r}else e=r+o|0,h[n+4>>2]=3|e,h[4+(e=e+n|0)>>2]=1|h[e+4>>2];return n+8|0}n:{o:{if(!(3&(e=(t=h[262144])>>>(n=31&(r=(o=e>>>0<11?16:e+11&-8)>>>3))))){if(o>>>0<=v[262244])break r;if(e)break o;if(!(e=h[262145]))break r;for(t=h[1048848+(c(e&0-e)<<2)>>2],r=(-8&h[t+4>>2])-o|0,i=t;;){if(!(e=h[t+16>>2])&&!(e=h[t+20>>2]))break n;r=(t=(n=(-8&h[e+4>>2])-o|0)>>>0<r>>>0)?n:r,i=t?e:i,t=e}}r=(e=h[1048592+(l=(n=r+(1&(-1^e))|0)<<3)>>2])+8|0,(0|(i=h[e+8>>2]))==(0|(l=l+1048584|0))?(g=1048576,m=d(n)&t,h[g>>2]=m):(h[i+12>>2]=l,h[l+8>>2]=i),t=n<<3,h[e+4>>2]=3|t,h[4+(e=e+t|0)>>2]=1|h[e+4>>2];break t}return n=c(0-(e=(r=e<<n)&(0-(e=2<<n)|e))&e),e=h[1048592+(i=n<<3)>>2],(0|(r=h[e+8>>2]))==(0|(i=i+1048584|0))?(g=1048576,m=d(n)&t,h[g>>2]=m):(h[r+12>>2]=i,h[i+8>>2]=r),i=e+8|0,h[e+4>>2]=3|o,r=(t=n<<3)-o|0,h[4+(l=e+o|0)>>2]=1|r,h[e+t>>2]=r,(e=h[262244])&&(e=1048584+((n=e>>>3)<<3)|0,t=h[262246],o=h[262144],n=1<<(31&n),u=h[e+8>>2],o&n||(h[262144]=n|o,u=e),n=u,h[e+8>>2]=t,h[n+12>>2]=t,h[t+12>>2]=e,h[t+8>>2]=n),h[262246]=l,h[262244]=r,i}return s(i),r>>>0>=16?(h[i+4>>2]=3|o,h[4+(l=o+i|0)>>2]=1|r,h[r+l>>2]=r,(e=h[262244])&&(e=1048584+((n=e>>>3)<<3)|0,t=h[262246],o=h[262144],n=1<<(31&n),u=h[e+8>>2],o&n||(h[262144]=n|o,u=e),n=u,h[e+8>>2]=t,h[n+12>>2]=t,h[t+12>>2]=e,h[t+8>>2]=n),h[262246]=l,h[262244]=r):(e=r+o|0,h[i+4>>2]=3|e,h[4+(e=e+i|0)>>2]=1|h[e+4>>2]),i+8|0}r:{n:{o:{i:{if((t=h[262244])>>>0<o>>>0){if((e=h[262245])>>>0>o>>>0)break e;if(r=0,-1==(0|(t=p((e=o+65583|0)>>>16))))break t;if(!(n=t<<16))break t;if(e=(i=-65536&e)+h[262248]|0,h[262248]=e,t=h[262249],h[262249]=t>>>0>e>>>0?t:e,!(r=h[262247]))break i;for(e=1049e3;;){if((0|n)==((t=h[e>>2])+(l=h[e+4>>2])|0))break o;if(!(e=h[e+8>>2]))break}break n}return e=h[262246],(n=t-o|0)>>>0<=15?(h[262246]=0,h[262244]=0,h[e+4>>2]=3|t,o=4+(t=e+t|0)|0,r=1|h[t+4>>2]):(h[262244]=n,r=e+o|0,h[262246]=r,h[r+4>>2]=1|n,h[e+t>>2]=n,r=3|o,o=e+4|0),h[o>>2]=r,e+8|0}for((e=h[262255])>>>0<=n>>>0&&e||(h[262255]=n),e=0,h[262256]=4095,h[262251]=i,h[262250]=n,h[262253]=0;t=e+1048584|0,h[e+1048592>>2]=t,h[e+1048596>>2]=t,256!=(0|(e=e+8|0)););h[262247]=n,e=i+-40|0,h[262245]=e,h[n+4>>2]=1|e,h[4+(e+n|0)>>2]=40,h[262254]=2097152;break r}if(!(h[e+12>>2]|n>>>0<=r>>>0|t>>>0>r>>>0)){h[e+4>>2]=i+l,t=(e=h[262247])+15&-8,h[262247]=t+-8,r=8+((n=i+h[262245]|0)+(e-t|0)|0)|0,h[262245]=r,h[t+-4>>2]=1|r,h[4+(e+n|0)>>2]=40,h[262254]=2097152;break r}}e=h[262255],h[262255]=e>>>0<n>>>0?e:n,t=n+i|0,e=1049e3;n:{for(;;){if((0|t)!=h[e>>2]){if(e=h[e+8>>2])continue;break n}break}if(!h[e+12>>2]){h[e>>2]=n,h[e+4>>2]=i+h[e+4>>2],h[n+4>>2]=3|o,i=n+o|0,o=(t-n|0)-o|0;o:{i:{if((0|t)!=h[262247]){if(h[262246]==(0|t))break i;if(1==(3&(e=h[t+4>>2]))&&((r=-8&e)>>>0>=256?s(t):(0|(l=h[t+12>>2]))==(0|(u=h[t+8>>2]))?(g=1048576,m=h[262144]&d(e>>>3),h[g>>2]=m):(h[u+12>>2]=l,h[l+8>>2]=u),o=r+o|0,t=t+r|0),h[t+4>>2]=-2&h[t+4>>2],h[i+4>>2]=1|o,h[o+i>>2]=o,o>>>0>=256){a(i,o);break o}e=1048584+((t=o>>>3)<<3)|0,r=h[262144],t=1<<(31&t),u=h[e+8>>2],r&t||(h[262144]=t|r,u=e),r=u,h[e+8>>2]=i,h[r+12>>2]=i,h[i+12>>2]=e,h[i+8>>2]=r;break o}h[262247]=i,e=h[262245]+o|0,h[262245]=e,h[i+4>>2]=1|e;break o}h[262246]=i,e=h[262244]+o|0,h[262244]=e,h[i+4>>2]=1|e,h[e+i>>2]=e}return n+8|0}}for(e=1049e3;!((t=h[e>>2])>>>0<=r>>>0&&(l=t+h[e+4>>2]|0)>>>0>r>>>0);)e=h[e+8>>2];for(h[262247]=n,e=i+-40|0,h[262245]=e,h[n+4>>2]=1|e,h[4+(e+n|0)>>2]=40,h[262254]=2097152,h[(t=(e=(l+-32&-8)-8|0)>>>0<r+16>>>0?r:e)+4>>2]=27,e=h[262250],u=h[262251],_=h[262253],h[(f=t+16|0)>>2]=h[262252],h[f+4>>2]=_,h[t+8>>2]=e,h[t+12>>2]=u,h[262251]=i,h[262250]=n,h[262252]=t+8,h[262253]=0,e=t+28|0;h[e>>2]=7,l>>>0>(e=e+4|0)>>>0;);(0|t)!=(0|r)&&(h[t+4>>2]=-2&h[t+4>>2],e=t-r|0,h[r+4>>2]=1|e,h[t>>2]=e,e>>>0>=256?a(r,e):(e=1048584+((t=e>>>3)<<3)|0,n=h[262144],t=1<<(31&t),u=h[e+8>>2],n&t||(h[262144]=t|n,u=e),t=u,h[e+8>>2]=r,h[t+12>>2]=r,h[r+12>>2]=e,h[r+8>>2]=t))}if(r=0,!((e=h[262245])>>>0<=o>>>0))break e}return r}return t=e-o|0,h[262245]=t,n=(e=h[262247])+o|0,h[262247]=n,h[n+4>>2]=1|t,h[e+4>>2]=3|o,e+8|0}(e))|!(3&_[t+-4|0])||function(e,t){if(t)for(;f[0|e]=0,e=e+1|0,t=t+-1|0;);}(t,e),t}(m(e|=0,t|=0))}function u(){}function c(e){return e?31-y(e+-1^e)|0:32}function d(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function p(t){t|=0;var n=0|r.byteLength/65536,o=n+t|0;if(n<o&&o<65536){var i=new ArrayBuffer(m(o,65536)),a=new e.Int8Array(i);a.set(f),f=a,f=new e.Int8Array(i),new e.Int16Array(i),h=new e.Int32Array(i),_=new e.Uint8Array(i),g=new e.Uint16Array(i),v=new e.Uint32Array(i),new e.Float32Array(i),new e.Float64Array(i),r=i}return n}var f=new e.Int8Array(r),h=(new e.Int16Array(r),new e.Int32Array(r)),_=new e.Uint8Array(r),g=new e.Uint16Array(r),v=new e.Uint32Array(r),m=(new e.Float32Array(r),new e.Float64Array(r),e.Math.imul),y=(e.Math.fround,e.Math.abs,e.Math.clz32),b=(e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,e.NaN,e.Infinity,1048576);return{memory:Object.create(Object.prototype,{grow:{value:p},buffer:{get:function(){return r}}}),rust_calloc:l,rust_free:function(e){n(e|=0)},llparser_create:function(e,t,r){return 0|function(e,t,r){var n,o,i;return b=n=b-32|0,h[n+28>>2]=e,h[n+24>>2]=t,h[n+20>>2]=r,e=n,t=h[n+28>>2]?h[n+28>>2]:256,h[e+28>>2]=t,e=n,t=h[n+24>>2]?h[n+24>>2]:256,h[e+24>>2]=t,e=n,t=h[n+20>>2]?h[n+20>>2]:256,h[e+20>>2]=t,o=n,i=l(((((((m(h[n+24>>2],140)+52|0)+m(h[n+20>>2],44)|0)+(h[n+24>>2]<<9)|0)+(h[n+24>>2]<<9)|0)+m(h[n+20>>2],h[n+24>>2]<<3)|0)+(h[n+28>>2]<<1)|0)+(h[n+28>>2]<<3)|0,1),h[o+16>>2]=i,h[h[n+16>>2]+12>>2]=h[n+28>>2],h[h[n+16>>2]+16>>2]=h[n+24>>2],h[h[n+16>>2]+20>>2]=h[n+20>>2],h[h[n+16>>2]+4>>2]=0,h[h[n+16>>2]>>2]=0,h[h[n+16>>2]+8>>2]=0,h[n+12>>2]=h[n+16>>2]+52,h[h[n+16>>2]+24>>2]=h[n+12>>2],h[n+12>>2]=h[n+12>>2]+m(h[n+24>>2],140),h[h[n+16>>2]+28>>2]=h[n+12>>2],h[n+12>>2]=h[n+12>>2]+m(h[n+20>>2],44),h[h[n+16>>2]+32>>2]=h[n+12>>2],h[n+12>>2]=h[n+12>>2]+(h[n+24>>2]<<9),h[h[n+16>>2]+36>>2]=h[n+12>>2],h[n+12>>2]=h[n+12>>2]+(h[n+24>>2]<<9),h[h[n+16>>2]+40>>2]=h[n+12>>2],h[n+12>>2]=h[n+12>>2]+m(h[n+20>>2],h[n+24>>2]<<3),h[h[n+16>>2]+44>>2]=h[n+12>>2],h[n+12>>2]=h[n+12>>2]+(h[n+28>>2]<<1),h[h[n+16>>2]+48>>2]=h[n+12>>2],b=n+32|0,h[n+16>>2]}(e|=0,t|=0,r|=0)},llparser_destroy:function(e){!function(e){var t;b=t=b-16|0,h[t+12>>2]=e,n(h[t+12>>2]),b=t+16|0}(e|=0)},llparser_create_descriptor:function(e,t){return 0|function(e,t){var r,n;return h[12+(r=b-16|0)>>2]=e,h[r+8>>2]=t,t=h[h[r+12>>2]+24>>2],n=h[r+12>>2],e=h[n+4>>2],h[n+4>>2]=e+1,h[r+4>>2]=t+m(e,140),h[h[r+4>>2]+4>>2]=h[r+8>>2]?1:0,h[r+4>>2]}(e|=0,t|=0)},llparser_descriptor_set_all:function(e){var t;e|=0,h[12+(t=b-16|0)>>2]=e,h[h[t+12>>2]+4>>2]=-1,f[h[t+12>>2]+135|0]=1},llparser_descriptor_set_nil:function(e){var t;e|=0,h[12+(t=b-16|0)>>2]=e,h[h[t+12>>2]+4>>2]=-2,f[h[t+12>>2]+8|0]=1},llparser_descriptor_add_char:function(e,t){!function(e,t){var r;h[12+(r=b-16|0)>>2]=e,h[r+8>>2]=t,f[h[r+8>>2]+(h[r+12>>2]+8|0)|0]=1}(e|=0,t|=0)},llparser_descriptor_add_range:function(e,t,r){!function(e,t,r){var n;for(h[12+(n=b-16|0)>>2]=e,h[n+8>>2]=t,h[n+4>>2]=r,h[n>>2]=h[n+8>>2];!(h[n>>2]>h[n+4>>2]);)f[h[n>>2]+(h[n+12>>2]+8|0)|0]=1,h[n>>2]=h[n>>2]+1}(e|=0,t|=0,r|=0)},llparser_descriptor_revert:function(e){!function(e){var t;for(h[12+(t=b-16|0)>>2]=e,h[t+8>>2]=1;!(h[t+8>>2]>=127);)f[h[t+8>>2]+(h[t+12>>2]+8|0)|0]=1&(0!=_[h[t+8>>2]+(h[t+12>>2]+8|0)|0]^-1),h[t+8>>2]=h[t+8>>2]+1}(e|=0)},llparser_add_rule:function(e,t,r,n,o,i,a,s,l,u,c,d){return 0|function(e,t,r,n,o,i,a,s,l,u,c,d){var p;return b=p=b+-64|0,h[p+60>>2]=e,h[p+56>>2]=t,h[p+52>>2]=r,h[p+48>>2]=n,h[p+44>>2]=o,h[p+40>>2]=i,h[p+36>>2]=a,h[p+32>>2]=s,h[p+28>>2]=l,h[p+24>>2]=u,h[p+20>>2]=c,h[p+16>>2]=d,t=h[h[p+60>>2]+28>>2],r=h[p+60>>2],e=h[r>>2],h[r>>2]=e+1,h[p+12>>2]=t+m(e,44),h[h[p+12>>2]>>2]=h[p+52>>2],h[h[p+12>>2]+4>>2]=h[p+48>>2],h[p+48>>2]>0&&(h[h[p+12>>2]+8>>2]=h[p+44>>2]),h[p+48>>2]>1&&(h[h[p+12>>2]+12>>2]=h[p+40>>2]),h[p+48>>2]>2&&(h[h[p+12>>2]+16>>2]=h[p+36>>2]),h[p+48>>2]>3&&(h[h[p+12>>2]+20>>2]=h[p+32>>2]),h[p+48>>2]>4&&(h[h[p+12>>2]+24>>2]=h[p+28>>2]),h[p+48>>2]>5&&(h[h[p+12>>2]+28>>2]=h[p+24>>2]),h[p+48>>2]>6&&(h[h[p+12>>2]+32>>2]=h[p+20>>2]),h[p+48>>2]>7&&(h[h[p+12>>2]+36>>2]=h[p+16>>2]),h[h[p+12>>2]+40>>2]=h[p+56>>2],h[p+48>>2]>0&&function(e,t,r){var n;h[28+(n=b-32|0)>>2]=e,h[n+24>>2]=t,h[n+20>>2]=r,h[n+16>>2]=(h[n+20>>2]-h[h[n+28>>2]+24>>2]|0)/140,1==h[h[n+20>>2]+4>>2]&&(t=h[h[n+28>>2]+40>>2],r=h[n+28>>2],e=h[r+8>>2],h[r+8>>2]=e+1,h[n+12>>2]=t+(e<<3),h[h[n+12>>2]>>2]=h[n+24>>2],h[h[n+12>>2]+4>>2]=h[h[n+20>>2]+136>>2],h[h[n+20>>2]+136>>2]=h[n+12>>2])}(h[p+60>>2],h[p+12>>2],h[p+52>>2]),b=p- -64|0,h[p+12>>2]}(e|=0,t|=0,r|=0,n|=0,o|=0,i|=0,a|=0,s|=0,l|=0,u|=0,c|=0,d|=0)},llparser_prepare:function(e){!function(e){var t;for(b=t=b-32|0,h[t+28>>2]=e,h[t+24>>2]=0;!(h[t+24>>2]>=h[h[t+28>>2]+4>>2]);)h[t+20>>2]=h[h[t+28>>2]+24>>2]+m(h[t+24>>2],140),1==h[h[t+20>>2]+4>>2]&&o(h[t+28>>2],h[t+20>>2],h[t+20>>2],h[h[t+28>>2]+32>>2]+(h[t+24>>2]<<9)|0,0),h[t+24>>2]=h[t+24>>2]+1;for(h[t+16>>2]=0;!(h[t+16>>2]>=h[h[t+28>>2]+4>>2]);)h[t+12>>2]=h[h[t+28>>2]+24>>2]+m(h[t+16>>2],140),1==h[h[t+12>>2]+4>>2]&&(h[h[t+12>>2]>>2]=0,i(h[t+28>>2],h[t+12>>2],h[t+12>>2],h[h[t+28>>2]+36>>2]+(h[t+16>>2]<<9)|0)),h[t+16>>2]=h[t+16>>2]+1;b=t+32|0}(e|=0)},llparser_parse:function(e,t){return 0|function(e,t){var r,n,o;return b=r=b-32|0,h[r+24>>2]=e,h[r+20>>2]=t,h[r+16>>2]=0,h[r+12>>2]=0,n=r,o=function e(t,r,n,o,i,a,s){var l,u=0,c=0;b=l=b-96|0,h[l+88>>2]=t,h[l+84>>2]=r,h[l+80>>2]=n,h[l+76>>2]=o,h[l+72>>2]=i,h[l+68>>2]=a,h[l+64>>2]=s,h[l+60>>2]=g[h[l+80>>2]+(h[h[l+76>>2]>>2]<<1)>>1],v[l+60>>2]>=128&&(h[l+60>>2]=1);e:if(h[h[l+72>>2]>>2]>(h[l+64>>2]-4|0))h[l+92>>2]=-1;else if(1==h[h[l+84>>2]+4>>2])if(h[l+56>>2]=h[h[l+76>>2]>>2],h[l+52>>2]=h[h[l+72>>2]>>2],h[l+48>>2]=0,h[l+44>>2]=0,h[l+40>>2]=h[h[l+88>>2]+32>>2]+((h[l+84>>2]-h[h[l+88>>2]+24>>2]|0)/140<<9),h[l+36>>2]=0,!h[h[l+40>>2]+(h[l+60>>2]<<2)>>2]|v[l+60>>2]<=0|v[l+60>>2]>=127?!h[l+60>>2]|!h[h[l+40>>2]+508>>2]?h[h[l+40>>2]>>2]&&(h[l+36>>2]=h[h[l+40>>2]>>2]):h[l+36>>2]=h[h[l+40>>2]+508>>2]:h[l+36>>2]=h[h[l+40>>2]+(h[l+60>>2]<<2)>>2],h[l+36>>2]){for(h[l+68>>2]||h[h[l+36>>2]+40>>2]||(h[l+48>>2]=h[h[l+72>>2]>>2],t=h[l+72>>2],h[t>>2]=h[t>>2]+2),h[l+32>>2]=0;h[l+32>>2]<h[h[l+36>>2]+4>>2];){if(h[l+28>>2]=h[l+68>>2],h[l+68>>2]||!h[h[l+36>>2]+40>>2]|h[h[l+36>>2]+40>>2]==(h[l+32>>2]+65536|0)||(h[l+28>>2]=1),u=l,c=e(h[l+88>>2],h[(h[l+36>>2]+8|0)+(h[l+32>>2]<<2)>>2],h[l+80>>2],h[l+76>>2],h[l+72>>2],h[l+28>>2],h[l+64>>2]),h[u+24>>2]=c,h[l+24>>2]<0){h[l+92>>2]=-1;break e}h[l+68>>2]|h[h[l+36>>2]+40>>2]!=(h[l+32>>2]+65536|0)||(h[l+44>>2]=h[l+24>>2]),h[l+32>>2]=h[l+32>>2]+1}for(h[l+68>>2]||(h[h[l+36>>2]+40>>2]?1==h[h[l+36>>2]+40>>2]&&(r=h[l+56>>2],n=h[h[l+88>>2]+48>>2],o=h[l+72>>2],t=h[o>>2],h[o>>2]=t+1,h[n+(t<<2)>>2]=r,h[l+44>>2]=h[h[l+72>>2]>>2],r=h[h[l+76>>2]>>2],n=h[h[l+88>>2]+48>>2],o=h[l+72>>2],t=h[o>>2],h[o>>2]=t+1,h[n+(t<<2)>>2]=r):(h[h[h[l+88>>2]+48>>2]+(h[l+48>>2]<<2)>>2]=0-h[l+36>>2],h[h[h[l+88>>2]+48>>2]+(h[l+48>>2]+1<<2)>>2]=h[h[l+36>>2]+4>>2],h[l+44>>2]=h[l+48>>2]+1));;){if(h[h[l+72>>2]>>2]>(h[l+64>>2]-4|0)){h[l+92>>2]=-1;break e}if(h[l+20>>2]=h[h[l+88>>2]+36>>2]+((h[l+84>>2]-h[h[l+88>>2]+24>>2]|0)/140<<9),h[l+16>>2]=0,h[l+60>>2]=g[h[l+80>>2]+(h[h[l+76>>2]>>2]<<1)>>1],v[l+60>>2]>=128&&(h[l+60>>2]=1),!h[h[l+20>>2]+(h[l+60>>2]<<2)>>2]|v[l+60>>2]<=0|v[l+60>>2]>=127?!h[l+60>>2]|!h[h[l+20>>2]+508>>2]||(h[l+16>>2]=h[h[l+20>>2]+508>>2]):h[l+16>>2]=h[h[l+20>>2]+(h[l+60>>2]<<2)>>2],!h[l+16>>2])break;for(h[l+68>>2]||(h[h[l+16>>2]+40>>2]?65536!=h[h[l+16>>2]+40>>2]&&(h[h[l+72>>2]>>2]=h[l+52>>2]):(h[h[h[l+88>>2]+48>>2]+(h[l+44>>2]<<2)>>2]=(0-h[h[h[l+88>>2]+48>>2]+(h[l+44>>2]<<2)>>2]|0)-1,h[l+48>>2]=h[h[l+72>>2]>>2],t=h[l+72>>2],h[t>>2]=h[t>>2]+2)),h[l+12>>2]=1;h[l+12>>2]<h[h[l+16>>2]+4>>2];){if(h[l+8>>2]=h[l+68>>2],h[l+68>>2]||!h[h[l+16>>2]+40>>2]|h[h[l+16>>2]+40>>2]==(h[l+12>>2]+65536|0)||(h[l+8>>2]=1),u=l,c=e(h[l+88>>2],h[(h[l+16>>2]+8|0)+(h[l+12>>2]<<2)>>2],h[l+80>>2],h[l+76>>2],h[l+72>>2],h[l+8>>2],h[l+64>>2]),h[u+4>>2]=c,h[l+4>>2]<0){h[l+92>>2]=-1;break e}h[l+68>>2]|h[h[l+16>>2]+40>>2]!=(h[l+12>>2]+65536|0)||(h[l+44>>2]=h[l+4>>2]),h[l+12>>2]=h[l+12>>2]+1}h[l+68>>2]||(h[h[l+16>>2]+40>>2]?1==h[h[l+16>>2]+40>>2]&&(r=h[l+56>>2],n=h[h[l+88>>2]+48>>2],o=h[l+72>>2],t=h[o>>2],h[o>>2]=t+1,h[n+(t<<2)>>2]=r,h[l+44>>2]=h[h[l+72>>2]>>2],r=h[h[l+76>>2]>>2],n=h[h[l+88>>2]+48>>2],o=h[l+72>>2],t=h[o>>2],h[o>>2]=t+1,h[n+(t<<2)>>2]=r):(h[h[h[l+88>>2]+48>>2]+(h[l+48>>2]<<2)>>2]=0-h[l+16>>2],h[h[h[l+88>>2]+48>>2]+(h[l+48>>2]+1<<2)>>2]=h[h[l+16>>2]+4>>2],h[l+44>>2]=h[l+48>>2]+1))}h[l+92>>2]=h[l+44>>2]}else h[l+92>>2]=-1;else{if(h[l+60>>2]&&(-1==h[h[l+84>>2]+4>>2]&&(t=h[l+76>>2],h[t>>2]=h[t>>2]+1),!h[h[l+84>>2]+4>>2])){if(!_[h[l+60>>2]+(h[l+84>>2]+8|0)|0]){h[l+92>>2]=-1;break e}t=h[l+76>>2],h[t>>2]=h[t>>2]+1}h[l+68>>2]||(r=h[h[l+76>>2]>>2],n=h[h[l+84>>2]+4>>2],o=h[h[l+88>>2]+48>>2],i=h[l+72>>2],t=h[i>>2],h[i>>2]=t+1,h[o+(t<<2)>>2]=r-(-2==(0|n)?0:1),r=h[h[l+76>>2]>>2],n=h[h[l+88>>2]+48>>2],o=h[l+72>>2],t=h[o>>2],h[o>>2]=t+1,h[n+(t<<2)>>2]=r),h[l+92>>2]=h[h[l+72>>2]>>2]-1}return b=l+96|0,h[l+92>>2]}(h[r+24>>2],h[r+20>>2],h[h[r+24>>2]+44>>2],r+12|0,r+16|0,0,h[h[r+24>>2]+12>>2]<<1),h[n+8>>2]=o,e=h[h[r+24>>2]+48>>2],t=h[r+16>>2],h[r+16>>2]=t+1,h[e+(t<<2)>>2]=-1,e=h[h[r+24>>2]+48>>2],t=h[r+16>>2],h[r+16>>2]=t+1,h[e+(t<<2)>>2]=0,g[h[h[r+24>>2]+44>>2]+(h[r+12>>2]<<1)>>1]|h[r+8>>2]<0?h[r+28>>2]=h[r+12>>2]+1:h[r+28>>2]=0,b=r+32|0,h[r+28>>2]}(e|=0,t|=0)},llparser_get_input_buffer:function(e){var t;return e|=0,h[12+(t=b-16|0)>>2]=e,h[h[t+12>>2]+44>>2]},llparser_get_result:function(e){var t;return e|=0,h[12+(t=b-16|0)>>2]=e,h[h[t+12>>2]+48>>2]},wasm_main:u,__wbindgen_start:u}}({Math:Math,Int8Array:Int8Array,Uint8Array:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},0,n),i=o.memory,a=o.rust_calloc,s=o.rust_free,l=o.llparser_create,u=o.llparser_destroy,c=o.llparser_create_descriptor,d=o.llparser_descriptor_set_all,p=o.llparser_descriptor_set_nil,f=o.llparser_descriptor_add_char,h=o.llparser_descriptor_add_range,_=o.llparser_descriptor_revert,g=o.llparser_add_rule,v=o.llparser_prepare,m=o.llparser_parse,y=o.llparser_get_input_buffer,b=o.llparser_get_result,w=o.wasm_main,A=o.__wbindgen_start}])},function(e,t,r){var n=r(4),o=function(e){this.empty=!0,this._type=e,this._arr=[],this._index=0};o.create=function(e){return new o(e)},o.prototype.add=function(e){var t=this._index++;return this._arr.push({id:t,func:e}),this.empty=!1,t},o.prototype.remove=function(e){var t=this._arr,r=0;if("function"==typeof e)for(r=0;r<t.length;r++){var n=t[r].func;if(n===e)return t.splice(r,1),this.empty=!t.length,n}else for(r=0;r<t.length;r++)if(t[r].id===e){var o=t[r].func;return t.splice(r,1),this.empty=!t.length,o}return null},o.prototype.call=function(e,t,r){for(var n=this._arr,o=!1,i=0;i<n.length;i++){!1===a(this._type,n[i].func,e,t,r)&&(o=!0)}if(o)return!1};var i=function(e,t){if(!t.type||!1!==s.call(null,[e,t])){if(n.throwGlobalError)throw e;console.error(e.stack)}},a=o.safeCallback=function(e,t,r,n,o){try{return t.apply(r,n)}catch(s){var a="[Exparser] [Error] [Component] "+(e||"Error Listener")+" Error @ ";r&&r.is&&(a+=r.is),a+="#"+(t.name||"(anonymous)"),o&&o.triggerLifeTime("error",[s]),i(s,{message:a,type:e,element:r,method:t,args:n})}},s=o.create();o.addGlobalErrorListener=function(e){return s.add(e)},o.removeGlobalErrorListener=function(e){return s.remove(e)};var l=null;o.addGlobalWarningListener=function(e){return(l=o.create()).add(e)},o.removeGlobalWarningListener=function(e){if(l){var t=l.remove(e);return l.empty&&(l=null),t}return null},o.hasGlobalWarningListeners=function(){return!!l},o.triggerWarning=function(e){var t="[Exparser] [Warning] [Component] "+e;l.call(null,[t],null)},e.exports=o},function(e,t){var r={lazyRegistration:!0,publicProperties:!1,availability:null,domain:"",writeOnly:!1,allowInWriteOnly:!1,classPrefix:null,addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1,writeFieldsToNode:!0,writeIdToDOM:!1,idPrefixGenerator:null,separateInnerData:!0,innerDataExclude:null,listenerChangeLifeTimes:!1,randomizeTagName:!1,virtualHost:!1,throwGlobalError:!1,writeExtraInfoToAttr:!1,documentBackend:"undefined"!=typeof window&&"undefined"!=typeof document?"dom":"none",hasDOMBackend:!("undefined"==typeof window||"undefined"==typeof document)};e.exports=r},function(e,t){var r=Object.prototype.hasOwnProperty,n=function(e,t){var o=typeof e;if("object"===o&&null!==e){var i=t?t.get(e):void 0;if(void 0!==i)return i;if(e instanceof Array){i=[],t&&t.set(e,i);for(var a=0;a<e.length;a++)i[a]=n(e[a],t)}else for(var s in i={},t&&t.set(e,i),e)r.call(e,s)&&(i[s]=n(e[s],t));return i}if("symbol"!==o)return e};t.deepCopy=function(e,t){var r=t&&"undefined"!=typeof WeakMap?new WeakMap:null;return n(e,r)}},function(e,t,r){var n=r(3),o=(Object.prototype.hasOwnProperty,function(){});o.prototype=Object.create(Object.prototype,{constructor:{value:o,writable:!0,configurable:!0}});var i=null;o._setElementSystem=function(e){i=e,o._setElementSystem=null};var a=null;o._setComponent=function(e){a=e,o._setComponent=null};var s=Date.now();o.setInitTimeStamp=function(e){return s=void 0===e?Date.now():e},o.getInitTimeStamp=function(e){return s},o.create=function(e,t,r){var n=(r=r||{}).originalEvent,i=r.extraFields||{},a=Date.now()-s,l=new o;for(var u in l.currentTarget=null,l.type=e,l.timeStamp=a,l.mark=null,l.detail=t,l.bubbles=!!r.bubbles,l.composed=!!r.composed,l.__originalEvent=n,l.__hasCapture=!!r.capturePhase,l.__stopped=!1,l.__dispatched=!1,i)l[u]=i[u];return l},o.prototype.preventDefault=function(){this.__originalEvent&&!this.__originalEvent.__stopPreventDefault&&this.__originalEvent.preventDefault()},o.prototype.stopPropagation=function(){this.__stopped=!0},o.prototype.isStopped=function(){return!!this.__stopped},o.prototype.markMutated=function(){this.__mutatedMarked=!0},o.prototype.mutatedMarked=function(){return!!this.__mutatedMarked};var l=function(e,t,r,n){for(var o=e,a=e instanceof i?e.collectMarks():{},s=[],l=[],u=e;u;){if(o!==u&&(s.push(e),e=u,l.push(a),a=e instanceof i?e.collectMarks():{}),o=u.parentNode,!1===n(u,e,a))return;if(u.__wxHost){if(r)break;e=s.pop()||u.__wxHost,a=l.pop()||(e instanceof i?e.collectMarks():{}),o=u=u.__wxHost}else{var c=!0;u instanceof i&&(c=!1),u=c||r?u.parentNode:u.__wxSlotParent}}};o.dispatchEvent=function(e,t){if(!t.__dispatched){t.__dispatched=!0,e.__wxElement&&e.__wxHost!==e.__wxElement&&((e=e.__wxElement).shadowRoot instanceof i&&(e=e.shadowRoot)),t.target=e instanceof i?e.__methodCaller:e;var r=function(e,r,n){if(!(r&&r.length&&t.mutatedMarked())){var o=t.currentTarget=n instanceof i?n.__methodCaller:n,s=e.call(o,[t],n instanceof a?n:void 0);r&&r.length&&t.markMutated(),!1===s&&(t.__originalEvent&&!t.__originalEvent.__stopPreventDefault&&t.__originalEvent.preventDefault(),t.__stopped=!0)}},n=t.type,o=!t.composed;if(t.__hasCapture){var s=[];l(e,0,o,(function(e,t,r){return e.__wxCaptureEvents&&e.__wxCaptureEvents[n]&&s.push([e,t,r]),!0}));for(var u=s.length-1;u>=0;u--){var c=s[u],d=c[0],p=c[1];t.target=p instanceof i?p.__methodCaller:p,t.mark=c[2];var f=d.__wxCaptureMutated&&d.__wxCaptureMutated[n];if(r(d.__wxCaptureEvents[n],f,d),t.__stopped)break}}if(t.target=e instanceof i?e.__methodCaller:e,!t.__stopped){var h=!t.bubbles;l(e,0,o,(function(e,o,a){t.target=o instanceof i?o.__methodCaller:o,t.mark=a;var s=e.__wxMutated&&e.__wxMutated[n];return e.__wxEvents&&e.__wxEvents[n]&&r(e.__wxEvents[n],s,e),!h&&!t.__stopped}))}}},o.triggerEvent=function(e,t,r,n){var i=o.create(t,r,n);o.dispatchEvent(e,i)},o.addListenerToElement=function(e,t,r,o){var i=o&&o.mutated;if(i){var s=r;r=function(e){if(!e.mutatedMarked()){var t=Array.prototype.slice.call(arguments);return s.apply(this,t)}}}var l=void 0;return o&&(o.useCapture||o.capture)?(e.__wxCaptureEvents||(e.__wxCaptureEvents=Object.create(null)),e.__wxCaptureEvents[t]||(e.__wxCaptureEvents[t]=n.create("Event Listener")),l=e.__wxCaptureEvents[t].add(r),i&&(e.__wxCaptureMutated||(e.__wxCaptureMutated=Object.create(null)),e.__wxCaptureMutated[t]||(e.__wxCaptureMutated[t]=[]),e.__wxCaptureMutated[t].push(l))):(e.__wxEvents||(e.__wxEvents=Object.create(null)),e.__wxEvents[t]||(e.__wxEvents[t]=n.create("Event Listener")),l=e.__wxEvents[t].add(r),i&&(e.__wxMutated||(e.__wxMutated=Object.create(null)),e.__wxMutated[t]||(e.__wxMutated[t]=[]),e.__wxMutated[t].push(l))),e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!0,t,r,o]),l},o.removeListenerFromElement=function(e,t,r,n){var o=null;if(n&&(n.useCapture||n.capture))e.__wxCaptureEvents&&e.__wxCaptureEvents[t]&&(o=e.__wxCaptureEvents[t].remove(r)),e.__wxCaptureMutated&&e.__wxCaptureMutated[t]&&-1!==(i=e.__wxCaptureMutated[t].indexOf(r))&&e.__wxCaptureMutated[t].splice(i,1);else if(e.__wxEvents&&e.__wxEvents[t]&&(o=e.__wxEvents[t].remove(r)),e.__wxMutated&&e.__wxMutated[t]){var i;-1!==(i=e.__wxMutated[t].indexOf(r))&&e.__wxMutated[t].splice(i,1)}o&&e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!1,t,o,n])},e.exports=o},function(e,t,r){var n=r(3),o=function(e){for(var t=e.str;e.cur<t.length;){var r=t[e.cur];if(" "!==r&&"\n"!==r&&"\r"!==r&&"\t"!==r&&"\f"!==r)break;e.cur+=1}return e.cur<t.length},i=function(e){for(var t=e.str,r="";e.cur<t.length;){var n=t[e.cur];if(!(n>="0"&&n<="9"))break;r+=n,e.cur+=1}if(!r)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (illegal index)"));return parseInt(r,10)},a=function(e){for(var t=e.str,r="";e.cur<t.length;){var n=t[e.cur];if("\\"===n)if(e.cur+1===t.length);else{r+=t[e.cur+1],e.cur+=1}else if(/^[_a-zA-Z]$/.test(n))r+=n;else{if(!(n>="0"&&n<="9"))break;if(""===r)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (field name cannot start with digits)"));r+=n}e.cur+=1}return r},s=function(e){for(var t=e.str,r="";e.cur<t.length;){var n=t[e.cur];if("\\"===n)if(e.cur+1===t.length)r+="\\",e.cur+=1;else{var o=t[e.cur+1];"."===o||"["===o||"]"===o||"\\"===o?(r+=o,e.cur+=2):(r+="\\",e.cur+=1)}else{if("."===n||"["===n)break;r+=n,e.cur+=1}}return r},l=function(e){var t=e.str;if(o(e),"*"===t[e.cur]&&"*"===t[e.cur+1])return e.cur+=2,["**"];var r=a(e);if(!r)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (first field name illegal)"));for(var n=[r];e.cur<t.length&&o(e);){var s=t[e.cur];if("."===s){if(e.cur+=1,o(e),"*"===t[e.cur]&&"*"===t[e.cur+1]){n.push("**"),e.cur+=2;break}var l=a(e);if(!l)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (field name illegal)"));n.push(l)}else{if("["!==s)break;e.cur+=1,o(e);var u=i(e);if(o(e),"]"!==t[e.cur])throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (illegal index)"));e.cur+=1,n.push(u)}}return n};t.parseSinglePath=function(e){var t=function(e){for(var t=e.str,r=[];e.cur<t.length;){var n=t[e.cur];if("."===n){e.cur+=1;var o=s(e);o&&r.push(o)}else if("["===n){e.cur+=1;var a=i(e);if("]"!==t[e.cur]&&e.cur<t.length)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (illegal index)"));e.cur+=1,r.push(a)}else{var l=s(e);l&&r.push(l)}}return r}({str:e,cur:0});return t},t.parseMultiPaths=function(e){try{var t={str:e,cur:0},r=function(e){var t=[];for(t.push(l(e)),o(e);","===e.str[e.cur];)e.cur+=1,t.push(l(e)),o(e);return t}(t);if(t.cur!==e.length)throw new Error('data path descriptor "'.concat(e,'" is illegal at char ').concat(t.cur));return r}catch(e){return n.triggerWarning(e.message),[]}}},function(e,t,r){var n=r(3),o=r(4),i=r(7),a=["created","ready","cacheAttached","attached","moved","detached","saved","restored","error","listenerChanged","performanceData"],s=[String,Number,Boolean,Object,Array,null],l=function(){},u=i.parseMultiPaths,c=function(){};c.matchTypeWithValue=function(e,t){if(e===String){if("string"!=typeof t)return!1}else if(e===Number){if(!Number.isFinite(t))return!1}else if(e===Boolean){if("boolean"!=typeof t)return!1}else if(e===Object){if(null===t||t.constructor!==Object)return!1}else if(e===Array){if(null===t||t.constructor!==Array)return!1}else if(void 0===t)return!1;return!0};var d=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=e[r];return t},p=function(e){var t={};for(var r in e)t[r]=e[r];return t},f=function(e,t){for(var r in t)hasOwnProperty.call(e,r)?"object"!=typeof e[r]||"object"!=typeof t[r]||null===t[r]||t[r]instanceof Array?e[r]=t[r]:(e[r]instanceof Array?e[r]=d(e[r]):e[r]=p(e[r]),f(e[r],t[r])):e[r]=t[r]};c.create=function(e){var t=new c;return t.is=e.is||"",t.using=e.using||{},t.generics=e.generics||{},t.placeholder=e.placeholder||{},t.template=e.template,t.externalClasses=e.externalClasses||[],t.data="object"==typeof e.data?{}:null,t.properties=Object.create(null),t.methods=Object.create(null),t.listeners=Object.create(null),t.relations=Object.create(null),t.ancestors=[],t.initiator=e.initiator,t.lifetimes=Object.create(null),t.pageLifetimes=Object.create(null),t.observers=[],t.options={publicProperties:!!(e.options&&void 0!==e.options.publicProperties?e.options.publicProperties:o.publicProperties)},t.definitionFilter=e.definitionFilter,t._unprepared=e,(e.options&&void 0!==e.options.lazyRegistration?e.options.lazyRegistration:o.lazyRegistration)||c.prepare(t),e.is&&(c._list[e.is]=t),t},c.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var r=e.ancestors,o="",i=0;for(i=0;i<(t.behaviors||[]).length;i++){var d=t.behaviors[i],p=d;for(o in"string"==typeof p&&(p=c._list[d],n.hasGlobalWarningListeners()&&(p instanceof c||n.triggerWarning('behavior "'+d+'" is not found (when preparing "'+e.is+'").'))),p._unprepared&&c.prepare(p),"object"==typeof p.data&&(null===e.data?e.data=p.data:f(e.data,p.data)),p.generics){var h=p.generics[o];"object"!=typeof h&&(h={}),e.generics[o]={default:h.default}}for(o in p.properties)n.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&void 0!==e.properties[o]&&n.triggerWarning('property "'+o+'" from different behaviors is overriding (when preparing "'+e.is+'").'),e.properties[o]=p.properties[o];for(o in p.relations)e.relations[o]=p.relations[o];for(o in p.methods)n.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&e.methods[o]&&n.triggerWarning('method "'+o+'" from different behaviors is overriding (when preparing "'+e.is+'").'),e.methods[o]=p.methods[o];for(var _=0;_<p.ancestors.length;_++)r.indexOf(p.ancestors[_])<0&&r.push(p.ancestors[_])}for(o in"object"==typeof t.data&&(null===e.data?e.data=t.data:f(e.data,t.data)),t.properties){n.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&void 0!==e.properties[o]&&n.triggerWarning('property "'+o+'" from different behaviors is overriding (when preparing "'+e.is+'").');var g=t.properties[o];s.indexOf(g)>=0?g={type:g}:s.indexOf(g.type)<0&&g.optionalTypes&&g.optionalTypes.length>0&&(g.type=g.optionalTypes[0]),n.hasGlobalWarningListeners()&&s.indexOf(g.type)<0&&n.triggerWarning('the type of property "'+o+'" is illegal (when preparing "'+e.is+'").'),void 0===g.value&&(g.type===String?g.value="":g.type===Number?g.value=0:g.type===Boolean?g.value=!1:g.type===Array?g.value=[]:g.value=null),e.properties[o]={type:g.type,optionalTypes:g.optionalTypes,value:g.value,filter:g.filter,observer:g.observer,public:!!(void 0===g.public?e.options.publicProperties:g.public),availability:g.availability,observeAssignments:!!g.observeAssignments,reflectIdPrefix:!!g.reflectIdPrefix}}if(t.lifetimes&&"object"==typeof t.lifetimes)for(o in t.lifetimes)e.lifetimes[o]=t.lifetimes[o];for(i=0;i<a.length;i++)void 0===e.lifetimes[a[i]]&&(e.lifetimes[a[i]]=t[a[i]]);for(o in t.listeners)e.listeners[o]=t.listeners[o];var v=t.observers;if(v instanceof Array)for(i=0;i<v.length;i++){var m=v[i];e.observers.push({paths:u(m.fields||"**"),observer:m.observer})}else for(o in v)e.observers.push({paths:u(o),observer:v[o]});if(t.pageLifetimes&&"object"==typeof t.pageLifetimes)for(o in t.pageLifetimes)e.pageLifetimes[o]=t.pageLifetimes[o];for(o in t.relations){var y=t.relations[o];e.relations[o]={target:y.target||o,type:y.type,linked:y.linked||l,linkChanged:y.linkChanged||l,unlinked:y.unlinked||l,linkFailed:y.linkFailed||l}}for(o in t.methods)"function"==typeof t.methods[o]&&(n.hasGlobalWarningListeners()&&"_"===o.charAt(0)&&e.methods[o]&&n.triggerWarning('method "'+o+'" from different behaviors is overriding (when preparing "'+e.is+'").'),e.methods[o]=t.methods[o]);r.push(e)}},c._list=Object.create(null),c.prototype.hasBehavior=function(e){this._unprepared&&c.prepare(this);for(var t=0;t<this.ancestors.length;t++)if(e instanceof c){if(this.ancestors[t]===e)return!0}else if(this.ancestors[t]===c._list[e])return!0;return!1},c.prototype._getAllListeners=function(){for(var e={},t=this.ancestors,r=0;r<t.length;r++){var n=this.ancestors[r];for(var o in n.listeners)Object.prototype.hasOwnProperty.call(e,o)?e[o].push(n.listeners[o]):e[o]=[n.listeners[o]]}return e},c.prototype._addObserversToDataProxy=function(e){for(var t=this.ancestors,r=0;r<t.length;r++)for(var n=this.ancestors[r].observers,o=0;o<n.length;o++){var i=n[o];e.addObserver(i.observer,i.paths,this)}},c.prototype._getAllLifeTimeFuncs=function(){var e={},t=this.ancestors;a.forEach((function(t){e[t]=n.create("Lifetime Method")}));for(var r=0;r<t.length;r++){var o=t[r];for(var i in o.lifetimes)o.lifetimes[i]&&(e[i]||(e[i]=n.create("Lifetime Method")),e[i].add(o.lifetimes[i]))}return e},c.prototype._getAllPageLifeTimeFuncs=function(){for(var e={},t=this.ancestors,r=0;r<t.length;r++){var o=t[r];for(var i in o.pageLifetimes)o.pageLifetimes[i]&&(e[i]||(e[i]=n.create("Page Lifetime Method")),e[i].add(o.pageLifetimes[i]))}return e},c.callDefinitionFilter=function(e){var t=e.definitionFilter,r=[];return e.behaviors instanceof Array&&e.behaviors.forEach((function(t){(t="string"==typeof t?c._list[t]:t)&&t.definitionFilter&&(r.push(t.definitionFilter),t.definitionFilter.call(null,e))})),"function"==typeof t?function(e){t(e,r)}:null},e.exports=c},function(e,t,r){var n=r(3),o=r(6),i=r(10),a=r(11),s=r(12),l=r(14),u=r(4),c=r(13),d=function(e){p(this,e||null)};d.prototype=Object.create(Object.prototype,{constructor:{value:d,writable:!0,configurable:!0},id:{get:function(){return this.__id},set:function(e){var t=String(e);if(this.__id!==t){if(this.__id=t,this.ownerShadowRoot){var r=this.ownerShadowRoot.__wxHost;r.__idCacheDirty=!0,this.__domElement&&r.__componentOptions.writeIdToDOM&&(r.__idPrefix?this.__domElement.id=r.__idPrefix+"--"+t:this.__domElement.id=t)}u.writeExtraInfoToAttr&&this.__domElement&&this.__domElement.setAttribute("exparser:info-attr-id",t),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"id"})}},configurable:!0},slot:{get:function(){return this.__slot},set:function(e){if(e=String(e),this.__slot!==e){if(this.__inheritSlots)return void(n.hasGlobalWarningListeners()&&n.triggerWarning('slots-inherited nodes do not support "slot" attribute (in component "'+this.is+'").'));this.__slot=e,w(this),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"slot"})}},configurable:!0},attributes:{get:function(){var e=[];if(!this.__attributes)return e;for(var t in this.__attributes)e.push({name:t,value:this.__attributes[t]});return e},set:function(){},configurable:!0},class:{get:function(){return this.classList.getClassNames()},set:function(e){this.classList&&this.classList.setClassNames(e),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"class"})},configurable:!0},style:{get:function(){return this.__domElement?this.__domElement.style:null},set:function(e){return x.call(this,e)},configurable:!0}}),o._setElementSystem(d),a._setElementSystem(d);var p=d.initialize=function(e,t,r){e.__id="",e.__slot="",e.__virtual=!1,e.__inheritSlots=!1,e.__attributes=null,e.__marks=null,e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=r,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=c.backendExtractedDefault,e.__domElement=t,e.$$=t,t&&(t.__wxElement=e)};d._clone=function(e,t,r,n){if(e.__id=t.__id,e.__slot=t.__slot,e.__virtual=t.__virtual,e.__inheritSlots=t.__inheritSlots,e.__marks=t.__marks?{}:null,t.__marks)for(var o in t.__marks)e.__marks[o]=t.__marks[o];for(var i in e.__attributes=Object.create(null),t.__attributes)e.__attributes[i]=t.__attributes[i];e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=n,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=c.backendExtractedDefault,e.__domElement=r,e.$$=r,r&&(r.__wxElement=e)};var f=function(e){if(!e.parentNode||e.parentNode.__attached){var t=function(e){if(e instanceof d){e.__attached=!0,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.attached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("attached"),e.__attachedObservers&&!e.__attachedObservers.empty&&i._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"attached"}),e.shadowRoot instanceof d&&t(e.shadowRoot);for(var r=e.childNodes,n=0;n<r.length;n++)t(r[n])}};t(e)}},h=function(e){if(e.__attached){var t=function(e){if(e instanceof d){for(var r=e.childNodes,n=0;n<r.length;n++)t(r[n]);e.shadowRoot instanceof d&&t(e.shadowRoot),e.__attached=!1,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.detached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("detached"),e.__attachedObservers&&!e.__attachedObservers.empty&&i._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"detached"})}};t(e)}},_=function(e){if(!e.__attached)return f(e);var t=function(e){if(e instanceof d){for(var r=e.childNodes,n=0;n<r.length;n++)t(r[n]);e.shadowRoot instanceof d&&t(e.shadowRoot),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.moved.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("moved")}};t(e)},g=function(e,t,r){if(e.__childObservers&&!e.__childObservers.empty||e.__subtreeObserversCount){var n,o=[r];n="add"===t?{type:"childList",target:e,addedNodes:o}:"remove"===t?{type:"childList",target:e,removedNodes:o}:{type:"childList",target:e,addedNodes:o,removedNodes:o},i._callObservers(e,"__childObservers",n)}},v=function(e,t){if(e instanceof d&&(!t.__wxHost.__idCacheDirty||!t.__slotCacheDirty)){var r=function(e){e.__id&&(t.__wxHost.__idCacheDirty=!0),void 0!==e.__slotName&&(t.__slotCacheDirty=!0);for(var n=e.childNodes,o=0;o<n.length;o++){var i=n[o];i instanceof d&&r(i)}};r(e)}};d._updateIdMap=function(e){var t=e.shadowRoot;if(e.__idCacheDirty){e.__idCacheDirty=!1;var r=e.__idCache=Object.create(null),n=function(e){e.__id&&(r[e.__id]||(r[e.__id]=e));for(var t=e.childNodes,o=0;o<t.length;o++)t[o]instanceof d&&n(t[o])};n(t)}};var m=function(e){if(e.__hostAssociated&&e.__slotCacheDirty){e.__slotCacheDirty=!1;var t,r=e.__wxHost,o=Object.create(null);t=void 0!==r.__singleSlot?{"":r.__singleSlot}:r.__slots;var i=function(e){void 0!==e.__slotName&&(o[e.__slotName]?n.hasGlobalWarningListeners()&&n.triggerWarning('More than one slot named "'+e.__slotName+'" are found inside a single component instance (in component "'+r.is+'"). The first one was accepted.'):o[e.__slotName]=e);for(var t=e.childNodes,a=0;a<t.length;a++)t[a]instanceof d&&i(t[a])};i(e),void 0!==r.__singleSlot?r.__singleSlot!==o[""]&&(o[""]&&(o[""].__wxSlotChildren=r.childNodes),y(r,o,t,!0),r.__singleSlot&&(r.__singleSlot.__wxSlotChildren=[]),r.__singleSlot=o[""]||null):(y(r,o,t,!1),r.__slots=o)}},y=function(e,t,r,n){var o=e.childNodes,i=0;if(n){var a=t[""];if(a)for(;i<o.length;i++)A(a,o[i],null,!1,!1,!1,-1);else if(a=r[""])for(;i<o.length;i++)A(a,null,o[i],!0,!1,!1,i)}else{var s=function(e){for(var n=0;n<e.length;n++){var o=e[n],i=o.__slot||"",a=t[i],l=r[i];a!==l&&(a?A(a,o,null,!1,!0,!0):A(l,null,o,!0,!0,!0)),o.__inheritSlots&&s(o.childNodes)}};s(o)}},b=function(e,t,r,n){for(var o=function(e,t,n){var i=e.childNodes,a=0;for(t&&(a=i.indexOf(t)+(n?0:1));a<i.length;a++){var s=i[a];if(s.__slot===r)return s;if(s.__inheritSlots){var l=o(s,null,!1);if(l)return l}}return null};t!==e;t=t.parentNode){var i=o(t.parentNode,t,n);if(i)return i;n=!1}return null},w=function(e){for(var t=e.parentNode;t&&t.__inheritSlots;)t=t.parentNode;if(t&&void 0===t.__singleSlot){var r=e.__slot||"",n=t.__slots[r];if(n){var o=b(t,e,r,!1);A(n,e,o,!1,!0,!0)}else(n=e.__wxSlotParent)&&A(n,null,e,!0,!0,!0)}},A=function(e,t,r,n,o,i,a){if(n&&(r.__wxSlotParent=null),o&&(a=e.__wxSlotChildren.indexOf(r)),t){var s=t.__wxSlotParent;if(t.__wxSlotParent=e,s&&i){var l=s.__wxSlotChildren.indexOf(t);s.__wxSlotChildren.splice(l,1),s===e&&l<a&&a--}}var c=!1;(t&&t.__backendExtracted||r&&r.__backendExtracted)&&(c=!0),c||function(e,t,r,n,o){var i=e;if(i instanceof d){for(;i.__virtual;){var a=i.__wxSlotParent;if(!a){i=null;break}if(t&&!r){var s=a.__wxSlotChildren.indexOf(i);r=a.__wxSlotChildren[s+1]}i=a}i instanceof d&&(i=i.__domElement)}if(i){var l=n,u=null,c=null;if(t)if(t.__virtual){var p=document.createDocumentFragment(),f=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];r.__virtual?f(r):p.appendChild(r.__domElement)}};f(t),u=p}else u=t.__domElement;if(r)if(r.__virtual){var h=e,_=0;if(n){var g=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];r.__virtual?g(r):i.removeChild(r.__domElement)}};g(r),l=!1,_=o+1}else h=r.__wxSlotParent,_=r===t?o:h.__wxSlotChildren.indexOf(r);if(t){var v=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];if(!r.__virtual)return r;var n=v(r,0);if(n)return n}};r=null;for(var m=h;!(r=v(m,_))&&m.__virtual;m=m.__wxSlotParent)_=m.__wxSlotParent.__wxSlotChildren.indexOf(m)+1;r&&(c=r.__domElement)}}else c=r.__domElement;l?u?i.replaceChild(u,c):i.removeChild(c):u&&(c?i.insertBefore(u,c):i.appendChild(u))}else if(t&&t.__wxSlotParent){var y=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++)y(e.__wxSlotChildren[t]);else{var r=e.__domElement;r&&r.parentNode&&r.parentNode.removeChild(r)}};y(t)}}(e,t,r,n,a),u.writeExtraInfoToAttr&&(n&&r instanceof d&&r.__domElement&&r.__domElement.removeAttribute("exparser:info-in-slot-of"),t instanceof d&&t.__domElement&&(void 0!==e.__slotName&&e.ownerShadowRoot?t.__domElement.setAttribute("exparser:info-in-slot-of",e.ownerShadowRoot.__wxHost.__componentInstanceId):t.__domElement.removeAttribute("exparser:info-in-slot-of"))),o&&(-1===a&&(a=e.__wxSlotChildren.length),t?e.__wxSlotChildren.splice(a,n?1:0,t):e.__wxSlotChildren.splice(a,n?1:0))},E=function(e,t){for(var r=e.childNodes,n=0;n<r.length;n++){var o=r[n];t(e,o),o.__inheritSlots&&E(o,t)}},I=d.insertChildToElement=function(e,t,r,n){if(void 0!==e.__slotName)return!1;var o=r>=0?e.childNodes[r]:null;n&&t===o&&(n=!1);var a=null,s=e,l=e;if(t){a=t.parentNode,t.parentNode=e;var u=e.__subtreeObserversCount;if(a){var c=a.childNodes.indexOf(t);a.childNodes.splice(c,1),a===e&&c<r&&r--,u-=a.__subtreeObserversCount}u&&i._updateSubtreeCaches(t,u)}for(var d=e;d&&d.__inheritSlots;)d=d.parentNode;for(var p=!d||!d.__slots,y=!p||e.__inheritSlots,w=a;w&&w.__inheritSlots;)w=w.parentNode;var I=!w||!w.__slots,S=!I||a&&a.__inheritSlots;if(p)void 0!==e.__singleSlot&&(s=l=e.__singleSlot),s?A(s,t,o,n,y,S,r):t&&t.__wxSlotParent&&A(t.__wxSlotParent,null,t,!0,S,!1),t&&!I&&t.__inheritSlots&&E(t,(function(e,t){A(e,t,null,!1,!0,!0,-1)}));else{var C="";if(t&&(C=t.__slot||"",s=d.__slots[C]||null),o&&(l=d.__slots[o.__slot||""]||null),o&&l&&n&&A(l,null,o,n,!0,!1),t)if(s){var T=o?b(d,o,C,!n):b(d,e,C,!1);A(s,t,T,!1,!0,S)}else t.__wxSlotParent&&A(t.__wxSlotParent,null,t,!0,S,!1);o&&n&&o.__inheritSlots&&E(o,(function(e,t){A(e,t,null,!1,!0,!0,-1)})),t&&t.__inheritSlots&&E(t,(function(t,r){var i=r.__slot||"",a=d.__slots[i]||null;if(a){var s=o?b(d,o,i,!n):b(d,e,i,!1);A(a,r,s,!1,!0,!0)}else r.__wxSlotParent&&A(r.__wxSlotParent,null,r,!0,!0,!1)}))}return n&&(e.__subtreeObserversCount&&i._updateSubtreeCaches(o,-e.__subtreeObserversCount),o.parentNode=null),-1===r&&(r=e.childNodes.length),t?e.childNodes.splice(r,n?1:0,t):e.childNodes.splice(r,n?1:0),e.ownerShadowRoot&&(n&&v(o,e.ownerShadowRoot),t&&v(t,e.ownerShadowRoot),m(e.ownerShadowRoot)),n&&(h(o),g(e,"remove",o)),t&&(a?_(t):f(t),a===e?g(e,"move",t):(a&&g(a,"remove",t),g(e,"add",t))),!0},S=function(e,t,r,n){if(t&&e.ownerShadowRoot!==t.ownerShadowRoot)throw new Error("Cannot move the node from one shadow tree to another shadow tree.");var o=n?r:t,i=-1;return r&&(i=e.childNodes.indexOf(r))<0?null:I(e,t,i,n)?o:null};d._attachShadowRoot=function(e){var t=e.__wxHost;t.__wxSlotChildren=[e],A(t,e,null,!1,!1,0),e.__hostAssociated=!0,m(e)},d.appendChild=function(e,t){return S(e,t,null,!1)},d.insertBefore=function(e,t,r){return S(e,t,r,!1)},d.removeChild=function(e,t){return S(e,null,t,!0)},d.replaceChild=function(e,t,r){return S(e,t,r,!0)},d.prototype.appendChild=function(e){return S(this,e,null,!1)},d.prototype.insertBefore=function(e,t){return S(this,e,t,!1)},d.prototype.removeChild=function(e){return S(this,null,e,!0)},d.prototype.replaceChild=function(e,t){return S(this,e,t,!0)};var C=function(e){var t=!0,r=!0;if(e instanceof d?(e.__backendExtracted=!0,e.$$=e.__domElement=null,r=!1):e instanceof s&&(e.__backendExtracted=!0,e.$$=e.__domElement=null,t=!1,r=!1),t&&e.__wxSlotChildren)for(var n=0;n<e.__wxSlotChildren.length;n++){var o=e.__wxSlotChildren[n];C(o)}else if(r&&e.childNodes)for(var i=0;i<e.childNodes.length;i++)C(e.childNodes[i])};d.extractBackend=function(e){if(e.__backendExtracted)return null;var t=e.__domElement;return C(e),t};var T=function(e,t){if(!t){var r=l.toElement(e.__domElement);return e.$$=e.__domElement=r,r}if(e.__domElement.tagName.toUpperCase()===t.tagName)e.$$=e.__domElement=t;else{var n=l.toElement(e.__domElement);e.$$=e.__domElement=n,t.parentNode.replaceChild(n,t)}return null},O=function(e,t,r){var n=e instanceof d&&e.__virtual,o=t?t.childNodes[r]:void 0,i=!0,a=!0,l=null;if(e instanceof d)e.__backendExtracted=!1,n||(l=T(e,o)),a=!1;else if(e instanceof s)e.__backendExtracted=!1,l=function(e,t){if(!t){var r=document.createTextNode(e.textContent);return e.$$=e.__domElement=r,r}if(void 0!==t.textContent)t.textContent=e.textContent,e.$$=e.__domElement=t;else{var n=document.createTextNode(e.textContent);e.$$=e.__domElement=n,t.parentNode.replaceChild(n,t)}return null}(e,o),i=!1,a=!1;else{var u=document.createDocumentFragment();if(u.__wxSlotChildren=e.__wxSlotChildren,o&&o.childNodes)for(;o.childNodes.length;)u.appendChild(o.childNodes[0]);l=function(e,t){if(!t)return e;for(;e.childNodes&&t.childNodes&&t.childNodes.length;)e.appendChild(t.childNodes[0]);return t.parentNode.replaceChild(e,t),null}(e,o),e=u}l?(t.appendChild(l),o=l):o=t?t.childNodes[r]:void 0;var c=0;if(i&&e.__wxSlotChildren)for(var p=0;p<e.__wxSlotChildren.length;p++){var f=e.__wxSlotChildren[p];if(n)r=O(f,t,r);else if(f.asShadowRoot){for(var h=0;h<f.asShadowRoot.childNodes.length;h++)c=O(f.asShadowRoot.childNodes[h],o,c);e.shadowRoot=o,o.__wxHost=e,e.__wxSlotChildren[0]=o,o.__wxSlotParent=e,e.__singleSlot===f&&(e.__singleSlot=o)}else c=O(f,o,c)}else if(a&&e.childNodes)for(var _=0;_<e.childNodes.length;_++)c=O(e.childNodes[_],o,c);if(n)return r;for(;o.childNodes.length>c;)o.removeChild(o.childNodes[c]);return r+1};d.injectBackend=function(e,t){if(e.__backendExtracted){var r=document.createDocumentFragment();r.appendChild(t),O(e,r,0)}},d.prototype.triggerEvent=function(e,t,r){o.triggerEvent(this,e,t,r)},d.prototype.dispatchEvent=function(e){o.dispatchEvent(this,e)},d.prototype.addListener=function(e,t,r){o.addListenerToElement(this,e,t,r)},d.prototype.removeListener=function(e,t,r){o.removeListenerFromElement(this,e,t,r)},d.setMethodCaller=function(e,t){e.__methodCaller=t},d.getMethodCaller=function(e){return e.__methodCaller},d.prototype.getAttribute=function(e){if(!this.__attributes)return null;var t=this.__attributes[e];return void 0===t?null:t},d.prototype.setAttribute=function(e,t){this.__attributes||(this.__attributes=Object.create(null)),t=String(t),this.__attributes[e]=t,this.__domElement&&this.__domElement.setAttribute(e,t)},d.prototype.removeAttribute=function(e){this.__attributes&&(delete this.__attributes[e],this.__domElement&&this.__domElement.removeAttribute(e))},d.prototype.setMark=function(e,t){this.__marks||(this.__marks={}),this.__marks[e]=t},d.prototype.collectMarks=function(){for(var e={},t=this;t;t=t.parentNode)if(t.__marks)for(var r in t.__marks)hasOwnProperty.call(e,r)||(e[r]=t.__marks[r]);return e};var x=d.prototype.setNodeStyle=function(e,t){this.__styleSegments[t||0]=e;var r=this.__styleSegments.join(";");if(this.__domElement&&this.ownerShadowRoot&&this.ownerShadowRoot.__childrenPropsFilter){var n=this.ownerShadowRoot.__childrenPropsFilter.style;if("function"==typeof n)return void this.__domElement.setAttribute("style",n.call(this,r))}this.__domElement&&this.__domElement.setAttribute("style",r),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"style"})};d.replaceDocumentElement=function(e,t){e.__attached||(t.parentNode.replaceChild(e.__domElement,t),f(e))},d.pretendAttached=function(e){e.__attached||f(e)},d.pretendDetached=function(e){e.__attached&&h(e)},d.isAttached=function(e){return e.__attached},d.setSlotName=function(e,t){if(t=null==t?"":String(t),void 0===e.__slotName){if(0!==e.childNodes.length||0!==e.__wxSlotChildren.length)return;e.__wxSlotChildren=[]}e.__slotName=t,e.ownerShadowRoot&&(e.ownerShadowRoot.__slotCacheDirty=!0,m(e.ownerShadowRoot))},d.setInheritSlots=function(e){e.__singleSlot||e.__slots||e.__wxSlotChildren.length||(e.__wxSlotChildren=[],e.__inheritSlots=!0)},d.getInheritSlots=function(e){return e.__inheritSlots};var N=function(e,t){var r=e.match(/^(#[_a-zA-Z][-_a-zA-Z0-9:]*|)((?:\.-?[_a-zA-Z][-_a-zA-Z0-9]*)+|)$/);if(!r)return null;var n=r[1].slice(1),o=r[2].split(".");return o.shift(),n||o.length?{id:n,classes:o,relation:t||""}:null},R=d.parseSelector=function(e){for(var t=String(e||"").split(","),r=[],n=!1,o=0;o<t.length;o++){for(var i=t[o].split(/( |\t|>+)/g),a=[],s="",l=0;l<i.length;l++){var u=i[l];if(u&&" "!==u&&"\t"!==u)if(">"!==u[0]){var c=N(u,s);if(s="",!c)break;a.push(c)}else{if(""!==s)break;s=u,">>>"===u&&(n=!0)}}l===i.length&&a.length&&r.push(a)}return r.length?{crossShadow:n,union:r}:null},P=function(e,t,r,n,o){if(t===e)return!1;var i=r[n],a=!0;i.id&&i.id!==t.__id&&(a=!1);for(var s=i.classes,l=0;a&&l<s.length;l++)t.classList.contains(s[l])||(a=!1);if(!a&&">"===o)return!1;var u=t;if(a&&0===n){if(null===e)return!0;for(u=u.parentNode;u;u=u.parentNode)if(u===e)return!0;if(">>>"!==o)return!1;u=t,a=!1}var c=a?i.relation:o;do{u.parentNode?u=u.parentNode:">>>"===c?u=u.__wxHost:">>>"===o?(a=!1,u=u.__wxHost):u=null,u===e&&(u=null)}while(u&&!d.isSelectable(u));if(!u)return!1;if(a){if(P(e,u,r,n-1,c))return!0;if(">>>"!==o)return!1}return P(e,u,r,n,o)},D=function(e,t,r){if(!d.isSelectable(r))return!1;for(var n=e.union,o=0;o<n.length;o++){var i=n[o];if(P(t,r,i,i.length-1,">"))return!0}return!1},L=function(e,t,r,n,o){if(D(t,r,n)&&(e.push(n),o))return!0;if(n.shadowRoot&&t.crossShadow&&((n.ownerShadowRoot?n.ownerShadowRoot.__wxHost.__componentOptions.domain:u.domain)===n.__componentOptions.domain&&L(e,t,r,n.shadowRoot,o)&&o))return!0;for(var i=n.childNodes,a=0;a<i.length;a++)if(i[a]instanceof d&&L(e,t,r,i[a],o)&&o)return!0;return!1};d.prototype.querySelector=function(e){var t="object"==typeof e?e:R(e);if(!t)return null;var r=[];return L(r,t,this,this,!0),r[0]||null},d.prototype.querySelectorAll=function(e){var t="object"==typeof e?e:R(e),r=[];return t?(L(r,t,this,this,!1),r):[]},d.matchSelector=function(e,t){var r="object"==typeof e?e:R(e);return!!r&&D(r,null,t)},d.prototype.matchSelector=function(e,t){var r="object"==typeof e?e:R(e);return!!r&&D(r,this,t)},d.isSelectable=function(e){return!!e.classList},e.exports=d},function(e,t,r){var n=r(3),o=function(){};o.prototype=Object.create(Object.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),o.create=function(e){var t=new o;return t._cb=e,t._noSubtreeCb=function(t){t.target===this&&e.call(this,t)},t._binded=[],t},o.prototype.observe=function(e,t){var r=0,o=(t=t||{}).subtree?this._cb:this._noSubtreeCb;t.properties&&(e.__propObservers||(e.__propObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__propObservers,id:e.__propObservers.add(o),subtree:t.subtree?e:null}),r++),t.childList&&(e.__childObservers||(e.__childObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__childObservers,id:e.__childObservers.add(o),subtree:t.subtree?e:null}),r++),t.characterData&&(e.__textObservers||(e.__textObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__textObservers,id:e.__textObservers.add(o),subtree:t.subtree?e:null}),r++),t.subtree&&i(e,r),t.attachStatus&&(e.__attachedObservers||(e.__attachedObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__attachedObservers,id:e.__attachedObservers.add(o),subtree:null}))},o.prototype.disconnect=function(){for(var e=this._binded,t=0;t<e.length;t++){var r=e[t];r.funcArr.remove(r.id),r.subtree&&i(r.subtree,-1)}this._binded=[]};var i=o._updateSubtreeCaches=function(e,t){e.__subtreeObserversCount+=t;var r=e.childNodes;if(r)for(var n=0;n<r.length;n++)i(r[n],t)};o._callObservers=function(e,t,r){do{e[t]&&e[t].call(e,[r]),e=e.parentNode}while(e&&e.__subtreeObserversCount)},o._callSingleObserver=function(e,t,r){e[t]&&e[t].call(e,[r])},e.exports=o},function(e,t,r){var n=r(10),o=function(){},i=/(~|\^+)?-?[_0-9a-z][-_0-9a-z]*/gi,a=null;o._setElementSystem=function(e){a=e,o._setElementSystem=null};var s=Object.prototype.hasOwnProperty;o.create=function(e,t){var r=new o;for(var n in r._prefix="",r._addOriginalClass=!1,r._alias=t,r._resolvedAlias={},t)r._resolvedAlias[n]="";return r._rawNames=[],r._elem=e,r._owner=null,r};var l=function(e){var t="",r=e._rawNames,n=e._prefix,o=e._owner?e._owner._resolvedAlias:null,i=e._addOriginalClass;n&&(n+="--");for(var a=0;a<r.length;a++){var l=r[a];if(a&&(t+=" "),o&&s.call(o,l))t+=o[l];else if("~"===l[0])t+=l.slice(1);else if("^"===l[0]){l=l.slice(1);for(var u=e._owner||null;"^"===l[0];)l=l.slice(1),u=u?u._owner:null;var c=u?u._prefix:"";c&&(c+="--"),t+=c+l}else i&&(t+=l+" "),t+=n+l}return t},u=function(e){var t=e._elem.__domElement;if(t){var r=l(e);r?t.setAttribute("class",r):t.removeAttribute("class")}},c=function(e){var t=e.classList;t instanceof o&&(t._alias&&d(t),u(t));for(var r=e.childNodes,n=0;n<r.length;n++)r[n]instanceof a&&c(r[n])},d=function(e){var t=e._owner;if(!t)return!1;var r=!1;for(var n in e._alias){var o=e._alias[n],i=[];if(o)for(var l=0;l<o.length;l++){var u=o[l];if(s.call(t._alias,u)){var d=t._resolvedAlias[u];i.push(d)}else{var p=e._prefix&&u?e._prefix+"--"+u:u;i.push(p)}}var f=i.join(" ");e._resolvedAlias[n]!==f&&(r=!0,e._resolvedAlias[n]=f)}r&&e._elem.shadowRoot instanceof a&&c(e._elem.shadowRoot)};o.prototype.toggle=function(e,t){var r=this._rawNames.indexOf(e);void 0===t&&(t=r<0);var o=!1;if(t?r<0&&(this._rawNames.push(e),u(this),o=!0):r>=0&&(this._rawNames.splice(r,1),u(this),o=!0),o){var i=this._elem;(i.__propObservers&&!i.__propObservers.empty||i.__subtreeObserversCount)&&n._callObservers(i,"__propObservers",{type:"properties",target:i,propertyName:"class"})}},o.prototype.contains=function(e){for(var t=this._rawNames,r=0;r<t.length;r++){var n=t[r];if("~"===n[0]){if(n.slice(1)===e)return!0}else if("^"===n[0]){for(var o=1;"^"===n[o];)o++;if(n.slice(o)===e)return!0}else if(n===e)return!0}return!1},o.prototype._setOwnerOptions=function(e,t,r){var n=this._prefix;this._prefix=t,n!==t&&(this._addOriginalClass=r,this._owner=e,this._alias&&d(this),u(this))},o.prototype._setAlias=function(e,t){var r=this._owner,n=String(t).match(i);this._alias[e]=n;var o=[];if(n)for(var a=0;a<n.length;a++){var l=n[a];r&&s.call(r._alias,l)?o.push(r._resolvedAlias[l]):o.push(this._prefix?this._prefix+"--"+l:l)}this._resolvedAlias[e]=o.join(" "),c(this._elem.shadowRoot)},o.prototype.setClassNames=function(e){e=null==e?"":String(e),this._rawNames=e.match(i)||[],u(this)},o.prototype.getClassNames=function(){return l(this)},o.prototype.getPrefix=function(){return this._prefix},o.prototype.getAddOriginalClass=function(){return this._addOriginalClass},o.prototype.getRawNames=function(){return this._rawNames},e.exports=o},function(e,t,r){var n=r(10),o=r(4),i=r(13),a=function(){};a.prototype=Object.create(Object.prototype,{constructor:{value:a,writable:!0,configurable:!0}});var s=a._advancedCreate=function(e,t){var r=new a;r.__slot="";var n=null;return i.backendExtractedDefault||"dom"!==o.documentBackend?r.__textContent=e:(n=document.createTextNode(e||"")).__wxElement=r,r.$$=r.__domElement=n,r.__backendExtracted=i.backendExtractedDefault,r.__subtreeObserversCount=0,r.parentNode=null,r.ownerShadowRoot=t,r};a.create=function(e){return s(e,null)},Object.defineProperty(a.prototype,"textContent",{get:function(){return this.__domElement?this.__domElement.textContent:this.__textContent},set:function(e){this.__domElement?this.__domElement.textContent=e:this.__textContent=String(e),(this.__textObservers&&!this.__textObservers.empty||this.__subtreeObserversCount)&&n._callObservers(this,"__textObservers",{type:"characterData",target:this})}}),e.exports=a},function(e,t){t.backendExtractedDefault=!1,t.enableBackendExtractedDefault=function(){t.backendExtractedDefault=!0},t.disableBackendExtractedDefault=function(){t.backendExtractedDefault=!1}},function(e,t){var r=function(e){this.tagName=e,this.id="",this.attrs={}};r.toElement=function(e){var t=document.createElement(e.tagName);for(var r in e.id&&(t.id=e.id),e.attrs)t.setAttribute(r,e.attrs[r]);return t},r.fromElement=function(e){var t=new r(e.tagName);t.id=e.id;for(var n=e.attributes,o=0;o<n.length;o++)t.attrs[n[o].name]=n[o].value;return t},r.prototype.cloneNode=function(){var e=new r;for(var t in e.id=this.id,this.attrs)e.attrs[t]=this.attrs[t];return e},r.prototype.removeAttribute=function(e,t){delete this.attrs[e]},r.prototype.setAttribute=function(e,t){this.attrs[e]=t},r.prototype.getAttribute=function(e){return this.attrs[e]},e.exports=r},function(e,t,r){var n=r(3),o=r(5),i=r(16),a=r(6),s=r(8),l=r(9),u=r(17),c=r(10),d=r(11),p=r(14),f=r(4),h=r(13),_=r(7),g=a.addListenerToElement,v=_.parseSinglePath,m=o.deepCopy,y=function(){};y.prototype=Object.create(l.prototype,{constructor:{value:y,writable:!0,configurable:!0},data:{get:function(){return this.__dataProxy._data},set:function(e){var t=this.__dataProxy;for(var r in e)t.scheduleReplace([r],e[r]);t.doUpdates()},configurable:!0},$:{get:function(){return l._updateIdMap(this),this.__idCache},set:function(){}}});var b=function(){};b.prototype=Object.create(Object.prototype),a._setComponent(y);var w=null;y._setDefaultTemplateEngine=function(e){w=e,y._setDefaultTemplateEngine=null};var A=function(e,t,r,o,i){if(r)for(var a=0;a<r.length;a++)if(s.matchTypeWithValue(r[a],e))return e;return t===String?null==e?(n.hasGlobalWarningListeners()&&n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <String> but get null value. Use empty string instead.'),""):(n.hasGlobalWarningListeners()&&"object"==typeof e&&n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <String> but got object-typed value. Force converted.'),String(e)):t===Number?isFinite(e)?Number(e):(n.hasGlobalWarningListeners()&&("number"==typeof e?n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <Number> but got NaN or Infinity. Used 0 instead.'):n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <Number> but got non-number value. Used 0 instead.')),0):t===Boolean?!!e:t===Array?e instanceof Array?e:(n.hasGlobalWarningListeners()&&n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <Array> but got non-array value. Used empty array instead.'),[]):t===Object?"object"==typeof e?e:(n.hasGlobalWarningListeners()&&n.triggerWarning('property "'+i+'" of "'+(o.is||"")+'" received type-uncompatible value: expected <Object> but got non-object value. Used null instead.'),null):void 0===e?null:e};i.setPropUpdater((function(e,t,r,o){var i=e[0],a=this.__propData[i];r=A(r,t.type,t.optionalTypes,this,i);var s=!t.availability||function(e,t,r,o){var i=[e.ownerShadowRoot?e.ownerShadowRoot.__wxHost.__componentOptions.domain:void 0,o?void 0:r];return!!n.safeCallback("Availablity Controller",t,e.__methodCaller,i,e)}(this,t.availability,r,o);if(!s)return n.hasGlobalWarningListeners()&&n.triggerWarning('the new value for property "'+i+'" in component "'+(this.is||"")+'" is currently not available. The value is not changed.'),a;if(t.filter){var l=n.safeCallback("Property Filter",t.filter,this.__methodCaller,o?[]:[r,a,e],this);void 0!==l&&(r=l)}return this.__domElement&&this.__componentOptions.reflectToAttributes&&this.__propPublic[i]&&function(e,t,r,n){if(n&&e.ownerShadowRoot){var o=e.ownerShadowRoot.__wxHost.__idPrefix;o&&(r=o+"--"+r)}var i=t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),a=typeof r;"boolean"===a?r?e.__domElement.setAttribute(i,""):e.__domElement.removeAttribute(i):"object"===a?e.__domElement.setAttribute(i,JSON.stringify(r)):e.__domElement.setAttribute(i,r)}(this,i,r,t.reflectIdPrefix),r})),i.setPropObserver((function(e,t,r,o,i,a){if(o.observeAssignments||e!==t){var s=r[0];this.__propertyChangeListeners&&this.__propertyChangeListeners[s]&&!a&&n.safeCallback("Property Observer",this.__propertyChangeListeners[s],this.__methodCaller,[e],this),o.observer&&n.safeCallback("Property Observer",o.observer,this.__methodCaller,i?[]:[e,t,r],this),o.public&&(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&c._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:s})}}));var E=function(e,t,r){t.__relationLinks||(t.__relationLinks={});for(var n=t.__relationLinks[r]=[],o=0;o<e.length;o++)n.push(null)},I=function(e,t,r,o,i){for(var a=y.prototype.hasBehavior,u="parent"===o,c="shadowHost"===o,d=0;d<e.length;d++){var p,f=e[d];if(p="object"!=typeof f.target?s._list[f.target]:f.target){var h=t[d],_=null;if(!i)for(var g=c?r.ownerShadowRoot&&r.ownerShadowRoot.__wxHost:r.parentNode;g;g=c?g.ownerShadowRoot&&g.ownerShadowRoot.__wxHost:g.parentNode)if(l.isSelectable(g)){if(a.call(g,p)){var v;v=u?g.__relationMap.child:c?g.__relationMap.shadowContent:g.__relationMap.descendant;for(var m=0;m<v.length;m++){var b,w=v[m];if((b="object"!=typeof w.target?s._list[w.target]:w.target)&&a.call(r,b)){_={parent:g,relation:w};break}}}if(u||_)break}t[d]=_,!h||_&&h.parent===_.parent||(n.safeCallback("Relation Unlinked Callback",h.relation.unlinked,h.parent.__methodCaller,[r.__methodCaller],h.parent),n.safeCallback("Relation Unlinked Callback",f.unlinked,r.__methodCaller,[h.parent.__methodCaller],r)),!_||h&&h.parent===_.parent||(n.safeCallback("Relation Linked Callback",_.relation.linked,_.parent.__methodCaller,[r.__methodCaller],_.parent),n.safeCallback("Relation Linked Callback",f.linked,r.__methodCaller,[_.parent.__methodCaller],r)),h&&_&&h.parent===_.parent&&(n.safeCallback("Relation Link Changed Callback",_.relation.linkChanged,_.parent.__methodCaller,[r.__methodCaller],_.parent),n.safeCallback("Relation Link Changed Callback",f.linkChanged,r.__methodCaller,[_.parent.__methodCaller],r)),i||_||n.safeCallback("Relation Link Failed Callback",f.linkFailed,r.__methodCaller,[],r)}}},S=function(e,t,r){if(e instanceof l){var n=0,o=null;if(e instanceof y){for(e.__pageLifeTimeFuncs[t]&&e.__pageLifeTimeFuncs[t].call(e.__methodCaller,r||[]),o=e.childNodes,n=0;n<o.length;n++)S(o[n],t,r);e=e.shadowRoot}for(o=e.childNodes,n=0;n<o.length;n++)S(o[n],t,r)}};y._list={},y.register=function(e){var t=e.options||{},r=s.create(e),n=void 0!==t.classPrefix?t.classPrefix:f.classPrefix;null!=n||(n=r.is||"");var o=new b;return o._unprepared=r,o.is=e.is||"",o.behavior=r,o.protoFunc=null,o.props=null,o.template=null,o.innerEvents=null,o.generics=r.generics,o.placeholder=r.placeholder,o.initiator=r.initiator||null,o.options={availability:t.availability||f.availability,domain:t.domain||f.domain,writeOnly:!!(void 0!==t.writeOnly?t.writeOnly:f.writeOnly),allowInWriteOnly:!!(void 0!==t.allowInWriteOnly?t.allowInWriteOnly:f.allowInWriteOnly),classPrefix:n,addGlobalClass:!!(void 0!==t.addGlobalClass?t.addGlobalClass:f.addGlobalClass),templateEngine:t.templateEngine||f.templateEngine||w,renderingMode:t.renderingMode||f.renderingMode,multipleSlots:!!(void 0!==t.multipleSlots?t.multipleSlots:f.multipleSlots),reflectToAttributes:!!(void 0!==t.reflectToAttributes?t.reflectToAttributes:f.reflectToAttributes),writeFieldsToNode:!!(void 0!==t.writeFieldsToNode?t.writeFieldsToNode:f.writeFieldsToNode),writeIdToDOM:!!(void 0!==t.writeIdToDOM?t.writeIdToDOM:f.writeIdToDOM),idPrefixGenerator:t.idPrefixGenerator||f.idPrefixGenerator,separateInnerData:!!(void 0!==t.separateInnerData?t.separateInnerData:f.separateInnerData),innerDataExclude:t.innerDataExclude||f.innerDataExclude,listenerChangeLifeTimes:!!(void 0!==t.listenerChangeLifeTimes?t.listenerChangeLifeTimes:f.listenerChangeLifeTimes),randomizeTagName:!!(void 0!==t.randomizeTagName?t.randomizeTagName:f.randomizeTagName),virtualHost:!!(void 0!==t.virtualHost?t.virtualHost:f.virtualHost)},r._unprepared||y.prepare(o),void 0!==e.is&&(y._list[r.is]=o),o},y.isPrepared=function(e){return!e._unprepared},y.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var r=e.options,o={};t._unprepared&&s.prepare(t),r.writeOnly&&(o.data={value:null});var a=e.props={};Object.keys(t.properties).forEach((function(e){var n=t.properties[e];a[e]={type:n.type,optionalTypes:n.optionalTypes,value:n.value,filter:"function"==typeof n.filter?n.filter:null==n.filter?null:t.methods[n.filter],observer:"function"==typeof n.observer?n.observer:null==n.observer?null:t.methods[n.observer],public:n.public,availability:n.availability,observeAssignments:n.observeAssignments,reflectIdPrefix:n.reflectIdPrefix},r.writeFieldsToNode&&(o[e]={enumerable:!0,get:function(){return this.__propData[e]},set:function(t){var r=this.__dataProxy;r.scheduleReplace([e],t),r.doUpdates()}})}));var l=function(){};e.protoFunc=l;var u=l.prototype=Object.create(y.prototype,o);if(u.is=e.is,u.__componentOptions=r,u.__using=t.using,e.dataGroupObserverTree=i._createObserverTree(a),t._addObserversToDataProxy(e.dataGroupObserverTree),u.__behavior=t,r.writeFieldsToNode)for(var c in t.methods)u[c]=t.methods[c];u.__lifeTimeFuncs=t._getAllLifeTimeFuncs(),u.__pageLifeTimeFuncs=t._getAllPageLifeTimeFuncs();var d=t.relations,p=u.__relationMap={};for(var f in d){var h=d[f],_=h.type;p[_]?p[_].push(h):p[_]=[h]}var g=[];p.parent&&g.push((function(e){I(this.__relationMap.parent,this.__relationLinks.parent,this,"parent","detached"===e)})),p.ancestor&&g.push((function(e){I(this.__relationMap.ancestor,this.__relationLinks.ancestor,this,"ancestor","detached"===e)})),p.shadowHost&&g.push((function(e){I(this.__relationMap.shadowHost,this.__relationLinks.shadowHost,this,"shadowHost","detached"===e)})),e.relationHandler=function(e){for(var t=0;t<g.length;t++)g[t].call(this,e)};var v={},m={},b=t.data,w="";for(w in b)m[w]=b[w];for(w in a){var A=a[w];n.hasGlobalWarningListeners()&&void 0!==m[w]&&n.triggerWarning('data field "'+w+'" is overwritten by property with the same name (when preparing "'+t.is+'").'),m[w]=A.value,v[w]=A.public}var E=m,S=r.separateInnerData,C=r.innerDataExclude;if(C){for(var T in E={},m)C.test(T)||(E[T]=m[T]);S||(m=E)}var O=r.templateEngine;e.template=O.create(t,m,E,r),u.__propPublic=v;var x=t._getAllListeners(),N=e.innerEvents=[];for(var R in x){for(var P=x[R],D=R.indexOf("."),L=R.slice(D+1),B=D<1?"":R.slice(0,D),k=[],M=0;M<P.length;M++){var F=P[M];"function"!=typeof F&&(F=null==F?null:t.methods[F]),k.push(F)}N.push({id:B,name:L,funcs:k})}}};var C=1,T=Object.prototype.hasOwnProperty,O=function(e,t){return function(r){return e.call(t.__methodCaller,r,t)}},x=function(e,t,r){var o={};for(var i in e){var a=e[i],s=t[i];"object"!=typeof s&&T.call(y._list,s)&&(s=y._list[s]),"object"!=typeof s&&null!=a.default&&(s=y._list[a.default]),n.hasGlobalWarningListeners()&&(s||n.triggerWarning('generic "'+i+'" is not instantiated. The default component is used instead.')),s&&(o[i]=s)}if(n.hasGlobalWarningListeners())for(var l in t)void 0===e[l]&&n.triggerWarning('generic "'+l+'" is not defined. It will be ignored.');return o},N=y._advancedCreate=function(e,t,r,o,a,s){var u=t;u._unprepared&&y.prepare(u);var c=u.options,_=!c.availability||function(e,t,r){var o=[t?t.__wxHost.__componentOptions.domain:void 0];return!!n.safeCallback("Availablity Controller",r,e,o)}(u,r,c.availability);_||(n.hasGlobalWarningListeners()&&n.triggerWarning('the component "'+(u.is||"")+'" is currently not available. The default component is used instead.'),u=y._list[""]);var v=new(0,u.protoFunc);c.idPrefixGenerator&&(v.__idPrefix=String(c.idPrefixGenerator.call(v))),v.__placeholder=function(e,t){var r={};for(var n in t)r[n]=t[n];for(var n in e)r[n]=e[n];return r}(a,u.placeholder);var b=u.generics;v.__generics=b?x(b,o||{}):{};var w=null,A=f.documentBackend;if(c.virtualHost){w=null;"dom"===f.documentBackend&&(w=void 0),l.initialize(v,w,r),v.__virtual=!0}else"dom"===A?(w=h.backendExtractedDefault?new p(e):document.createElement(e),l.initialize(v,w,r)):l.initialize(v,null,r);var I=0,S=v.__externalClassAlias={};if(u.behavior.externalClasses){var T=u.behavior.externalClasses;for(I=0;I<T.length;I++)S[T[I]]=null}if(v.classList=d.create(v,S),r){var N=r.__wxHost;v.classList._setOwnerOptions(N.classList,N.__componentOptions.classPrefix,N.__componentOptions.addGlobalClass),f.writeExtraInfoToAttr&&w&&w.setAttribute("exparser:info-class-prefix",N.__componentOptions.classPrefix&&N.__componentOptions.classPrefix+"--")}f.writeExtraInfoToAttr&&w&&(v.__componentInstanceId=C++,w.setAttribute("exparser:info-component-id",v.__componentInstanceId));var R=v.__templateInstance=u.template.createInstance(v,s);v.__propData=R.data;var P=c.separateInnerData;v.__innerData=P?m(v.__propData):null;var D=c.innerDataExclude;if(P&&D){var L={};for(var B in v.__innerData)D.test(B)||(L[B]=v.__innerData[B]);v.__innerData=L}v.__dataProxy=i._advancedCreate(v,v.__propData,v.__innerData,D,u.dataGroupObserverTree,(function(e,t,r,n){v.__templateInstance.updateValues(v,P?v.__innerData:v.__propData,e,t,r,n)})),R.beforeMergeValues&&v.__dataProxy.setBeforeMergeCb((function(e,t,r){v.__templateInstance.beforeMergeValues(e,t,r)})),R.beforeUpdateValues&&v.__dataProxy.setBeforeUpdateCb((function(e){v.__templateInstance.beforeUpdateValues(v,P?v.__innerData:v.__propData,e)})),c.writeOnly&&v.__dataProxy.setHidingValue(!0),v.__idCacheDirty=!1,v.__idCache=R.idMap,null===R.slots[""]&&(R.slots[""]=w),u.options.multipleSlots?v.__slots=R.slots:(v.__singleSlot=R.slots[""]||null,v.__singleSlot&&(v.__singleSlot.__wxSlotChildren=v.childNodes)),R.shadowRoot instanceof l?(v.shadowRoot=R.shadowRoot,l._attachShadowRoot(R.shadowRoot)):w instanceof p?(v.shadowRoot=w,w.__wxHost=v,v.__domElement.asShadowRoot=R.shadowRoot,v.__wxSlotChildren=[w],w.__wxSlotParent=v):(v.shadowRoot=w,w.__wxHost=v,v.__domElement.appendChild(R.shadowRoot),v.__wxSlotChildren=[w],w.__wxSlotParent=v);for(var k=R.listeners,M=0;M<k.length;M++){var F=k[M];g(F.target,F.name,O(F.func,v))}var j=u.innerEvents;for(I=0;I<j.length;I++){var U=j[I],$=U.id?"this"===U.id?v:v.__idCache[U.id]:v.shadowRoot;if($)for(var W=U.name,q=U.funcs,H=0;H<q.length;H++)g($,W,O(q[H],v))}var G=v.__relationMap;return G.parent&&(E(G.parent,v,"parent"),v.__relationHandler=u.relationHandler),G.ancestor&&(E(G.ancestor,v,"ancestor"),v.__relationHandler=u.relationHandler),G.shadowHost&&(E(G.shadowHost,v,"shadowHost"),v.__relationHandler=u.relationHandler),v.__propertyChangeListeners=null,u.initiator&&n.safeCallback("Component Initiator",u.initiator,v.__methodCaller,[],v),v.__lifeTimeFuncs.created.call(v.__methodCaller,[],v),v};y.createWithGenerics=function(e,t,r,o){return"object"==typeof e?N(e.is,e,null,r,null,o):e?e.indexOf("-")<0&&!t?u.create(e):(n.hasGlobalWarningListeners()&&(t||T.call(y._list,e)||"virtual"===e||n.triggerWarning('component "'+e+'" is not found. The default component is used instead.')),N(e.toLowerCase(),t||T.call(y._list,e)&&y._list[e]||y._list[""],null,r,null,o)):N("virtual",y._list[""],null,r,null,o)},y.create=function(e,t,r){return y.createWithGenerics(e,t,null,r)},y.listProperties=function(e){var t=[];for(var r in e.__propPublic)void 0!==e.__propPublic[r]&&t.push(r);return t},y.listPublicProperties=function(e){var t=[];for(var r in e.__propPublic)!0===e.__propPublic[r]&&t.push(r);return t},y.hasProperty=function(e,t){return void 0!==e.__propPublic[t]},y.hasPublicProperty=function(e,t){return!0===e.__propPublic[t]},y.getMethodsFromDef=function(e){return e.behavior._unprepared&&s.prepare(e.behavior),e.behavior.methods},y.getMethod=function(e,t){return e.__behavior.methods[t]},y.getComponentOptions=function(e){return e.__componentOptions},y.prototype.triggerLifeTime=function(e,t){this.__lifeTimeFuncs[e].call(this.__methodCaller,t||[])},y.prototype.triggerPageLifeTime=function(e,t){S(this,e,t)},y.prototype.hasBehavior=function(e){return"object"!=typeof e&&Object.prototype.hasOwnProperty.call(this.__using,e)&&(e=this.__using[e]),!!this.__behavior&&this.__behavior.hasBehavior(e)},y.prototype.getRootBehavior=function(){return this.__behavior},y.prototype.getPlaceholder=function(e){return this.__placeholder[e]},y.prototype.getRelationNodes=function(e){var t=this.__behavior.relations[e];if(!t)return null;if("parent"===t.type||"ancestor"===t.type||"shadowHost"===t.type){for(var r=this.__relationMap[t.type],n=0;n<r.length&&r[n]!==t;n++);return this.__relationLinks[t.type][n]?[this.__relationLinks[t.type][n].parent]:[]}return function(e,t){var r=[],n=t.type,o="child"===n,i="shadowContent"===n,a=function(n){for(var s=n.childNodes,u=0;u<s.length;u++){var c=s[u];if(c instanceof l)if(l.isSelectable(c)){var d;if(c.__relationLinks)if(d=o?c.__relationLinks.parent:i?c.__relationLinks.shadowHost:c.__relationLinks.ancestor)for(var p=0;p<d.length;p++){var f=d[p];if(f&&f.parent===e&&f.relation===t){r.push(c);break}}i&&c instanceof y&&a(c.shadowRoot),o||a(c)}else a(c)}};return a(i?e.shadowRoot:e),r}(this,t)},y.prototype.hasExternalClass=function(e){return T.call(this.__externalClassAlias,e)},y.prototype.setExternalClass=function(e,t){this.classList._setAlias(e,t)},y.prototype.setPropertyChangeListener=function(e,t){this.__propertyChangeListeners||(this.__propertyChangeListeners={}),this.__propertyChangeListeners[e]=t},y.prototype.replaceDataOnPath=function(e,t){this.__dataProxy.scheduleReplace(e,t)},y.prototype.isInnerDataExcluded=function(e){var t=this.__componentOptions.innerDataExclude;return!!t&&t.test(e)},y.getInnerData=function(e){return e.__innerData},y.getDataProxy=function(e){return e.__dataProxy},y.replaceWholeData=function(e,t,r){e.__propData=t,e.__dataProxy.replaceWholeData(t,r)},y.prototype.applyDataUpdates=function(){this.__dataProxy.doUpdates()},y.prototype.setData=function(e){var t=this.__dataProxy;for(var r in e)t.scheduleReplace(v(r),e[r]);t.doUpdates()},e.exports=y},function(e,t,r){var n=r(3),o=r(5),i=null,a=null,s=Object.prototype.hasOwnProperty,l=o.deepCopy,u=function(e,t,r,n,o,i){this._data=t,this._innerData=r,this._innerDataExclude=n,this._comp=e,this._updateCb=i,this._beforeMergeCb=null,this._beforeUpdateCb=null,this._hidingValue=!1,this._changes=[],this._doingUpdates=null,this._propFields=o._propFields,this._observers=o._observers,this._observerTree=o._observerTree,this._relatedObserverTreeObj=o,this._observerStatus=[]};u._advancedCreate=function(e,t,r,n,o,i){return new u(e,t,r,n,o,i)};var c=function(e){this._propFields=e,this._observerIdInc=0,this._observers=[],this._observerTree={}};u._createObserverTree=function(e){return new c(e)},u.create=function(e,t,r){var n=new c({});return new u({__methodCaller:e},t,null,null,n,r)},u.setPropUpdater=function(e){i=e},u.setPropObserver=function(e){a=e},u.prototype.replaceWholeData=function(e,t){this._data=e},u.prototype.setHidingValue=function(e){this._hidingValue=!!e},u.prototype.setBeforeMergeCb=function(e){this._beforeMergeCb=e},u.prototype.setBeforeUpdateCb=function(e){this._beforeUpdateCb=e};var d=function(e,t,r,o){for(var i=e,a=0;a<t.length;a++){var s=t[a];if("**"===s)return n.hasGlobalWarningListeners()&&a!==t.length-1&&n.triggerWarning('"**" can only be used at the end of a path descriptor (in "'+o.is+'").'),i["**"]||(i["**"]=[]),void i["**"].push(r);i[s]||(i[s]={}),i=i[s]}i["~"]||(i["~"]=[]),i["~"].push(r)},p=function(e,t,r,n){for(var o=0;o<t.length;o++)d(e,t[o],r,n)},f=function(e,t,r){for(var n=e,o=0,i="";o<t.length&&"**"!==(i=t[o]);o++){if(!n)return;n=n[i]}var a="**"===i?n["**"]:n["~"];if(a)for(o=0;o<a.length;o++)if(a[o]===r){a.splice(o,1);break}},h=function(e,t,r){for(var n=0;n<t.length;n++)f(e,t[n],r)};c.prototype.addObserver=function(e,t,r){var n=this._observerIdInc++;return this._observers[n]={pathObj:t,func:e},p(this._observerTree,t,n,r),n},c.prototype.removeObserver=function(e){var t=this._observers[e];h(this._observerTree,t.pathObj,e),this._observers[e]=null},c.prototype.moveObserver=function(e,t){var r=this._observers[e];h(this._observerTree,r.pathObj,e),r.pathObj=t,p(this._observerTree,t,e)},u.prototype.getObserverTree=function(){return this._relatedObserverTreeObj};var _=function(e,t,r){for(var o=[],i=r.pathObj,a=0;a<i.length;a++){for(var s=i[a],l=t,u=0;u<s.length;u++){var c=s[u];if("**"===c)break;if("object"!=typeof l){l=void 0;break}l=l[c]}o[a]=l}n.safeCallback("Data Observer",r.func,e.__methodCaller,o,e)},g=function(e,t){var r=null,n=0;for(var o in e)if("~"!==o)if("**"!==o)g(e[o],t);else for(r=e["**"],n=0;n<r.length;n++)t[r[n]]=!0;else for(r=e["~"],n=0;n<r.length;n++)t[r[n]]=!0},v=function(e,t,r){for(var n=e,o=0;o<r.length;o++){if(n["**"])for(var i=n["**"],a=0;a<i.length;a++){t[i[a]]=!0}var l=r[o];if("number"==typeof l){if(!s.call(n,l)){n=null;break}}else if(!/^[_a-zA-Z]/.test(l)||!s.call(n,l)){n=null;break}n=n[l]}n&&g(n,t)},m=function(e,t,r,n,o){for(var i=0;i<e.length;i++){var a=e[i],s=t[i];s&&s&&(t[i]=!1,_(r,o?void 0:n,a))}};u.prototype.scheduleReplace=function(e,t,r){this._changes.push([e,t,r])},u.prototype.setChanges=function(e){this._changes=e},u.prototype.getChanges=function(){return this._changes},u.prototype.doUpdates=function(e,t){var r=this._propFields,n=this._comp,o=this._hidingValue,u=this._innerDataExclude,c=!!this._doingUpdates,d=this._relatedObserverTreeObj._observerIdInc,p=null,f=null,h=null;d?(c||(this._doingUpdates={changedPaths:[],changedValues:[],combinedChanges:[],changesTotal:0}),p=this._doingUpdates.changedPaths,f=this._doingUpdates.changedValues,h=this._doingUpdates.combinedChanges):(p=[],f=[],h=[]);var _=this._changes;this._changes=[];var g=[];this._beforeMergeCb&&this._beforeMergeCb(_,g,e);for(var y=0;y<_.length;y++){var b=_[y],w=b[0],A=b[1],E=A,I=void 0,S=w[0],C=!!u&&u.test(S),T=r[S];if(T&&1===w.length)I=this._data[S],A=i.call(this._comp,w,T,A,this._hidingValue),C||(this._innerData?(E=l(A),g[y]||(this._innerData[S]=E)):E=A,b[1]=E),C&&!this._innerData||(this._data[S]=A);else{var O=this._data,x=S,N=null,R=1;if(!C||this._innerData){for(;R<w.length;R++)"number"==typeof(N=w[R])&&isFinite(N)?s.call(O,x)&&O[x]instanceof Array||(O[x]=[]):(!s.call(O,x)||null===O[x]||"object"!=typeof O[x]||O[x]instanceof Array)&&(O[x]={}),O=O[x],x=N;O[x]=A}if(this._innerData&&(O=this._innerData,x=S,!C)){for(R=1;R<w.length;R++)"number"==typeof(N=w[R])&&isFinite(N)?s.call(O,x)&&O[x]instanceof Array||(O[x]=[]):(!s.call(O,x)||null===O[x]||"object"!=typeof O[x]||O[x]instanceof Array)&&(O[x]={}),O=O[x],x=N;E=l(A),g[y]||(O[x]=E),b[1]=E}}v(this._observerTree,this._observerStatus,w),C||(p.push(w),f.push([E,I,A]),h.push(b)),d&&(this._doingUpdates.changesTotal+=1)}if(!c){if(this._beforeUpdateCb&&this._beforeUpdateCb(e),d){var P=0;do{P=this._doingUpdates.changesTotal,m(this._observers,this._observerStatus,n,this._data,o)}while(P!==this._doingUpdates.changesTotal);this._doingUpdates=null}this._updateCb(p,f,h,e);for(var D=0;D<f.length;D++){var L=f[D];if(L){var B=p[D],k=r[B[0]];k&&a.call(n,L[2],L[1],B,k,o,t)}}}},e.exports=u},function(e,t,r){var n=r(9),o=r(11),i=r(14),a=r(4),s=r(13),l=function(){};l.prototype=Object.create(n.prototype,{constructor:{value:l,writable:!0,configurable:!0}});var u=l._advancedCreate=function(e,t){var r=new l;r.is=e.toLowerCase();var u=null;if("dom"===a.documentBackend&&(u=s.backendExtractedDefault?new i(e):document.createElement(e)),n.initialize(r,u,t),r.classList=o.create(r,null),t){var c=t.__wxHost;r.classList._setOwnerOptions(c.classList,c.__componentOptions.classPrefix,c.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&u&&u.setAttribute("exparser:info-class-prefix",c.__componentOptions.classPrefix&&c.__componentOptions.classPrefix+"--")}return r};l.create=function(e){return u(e,null)};var c=l._advancedClone=function(e,t){var r=new l;r.is=e.is;var u=null;if(e.__domElement&&(u=e.__domElement instanceof i?s.backendExtractedDefault?e.__domElement.cloneNode():i.toElement(e.__domElement):s.backendExtractedDefault?i.fromElement(e.__domElement):document.importNode?document.importNode(e.__domElement,!1):e.__domElement.cloneNode(!1)),n._clone(r,e,u,t),r.classList=o.create(r,null),t){var c=t.__wxHost;r.classList._setOwnerOptions(c.classList,c.__componentOptions.classPrefix,c.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&u&&u.setAttribute("exparser:info-class-prefix",c.__componentOptions.classPrefix&&c.__componentOptions.classPrefix+"--")}return r};l.cloneNode=function(e){return c(e,null)},e.exports=l},function(e,t,r){var n=r(9),o=r(4),i=function(e,t){a(this,e,t)};i.prototype=Object.create(n.prototype);var a=i.initialize=function(e,t,r){e.is=t||"";var i=null;"dom"===o.documentBackend&&(i=void 0),n.initialize(e,i,r),e.__virtual=!0};i._advancedCreate=function(e,t){return new i(e,t)},i.create=function(e){return new i(e,null)},e.exports=i},function(e,t,r){var n=r(9),o=r(15),i=r(18),a=r(17),s=r(12),l=Object.prototype.hasOwnProperty,u=function(e){i.initialize(this,"shadow",this),this.__hostAssociated=!1,this.__wxHost=e,this.__childrenPropsFilter=null,this.__slotCacheDirty=!1};u.prototype=Object.create(i.prototype),u.create=function(e){var t=new u(e);if(e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(t.__childrenPropsFilter)for(var r in e.ownerShadowRoot.__childrenPropsFilter)t.__childrenPropsFilter[r]||(t.__childrenPropsFilter[r]=e.ownerShadowRoot.__childrenPropsFilter[r]);else t.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;return t};u.prototype.createTextNode=function(e){return s._advancedCreate(e,this)},u.prototype.createNativeNode=function(e){return a._advancedCreate(e,this)},u.prototype.cloneNativeNode=function(e){return a._advancedClone(e,this)},u.prototype.createVirtualNode=function(e){return i._advancedCreate(e,this)},u.prototype.getCompDefByTagName=function(e){var t=this.__wxHost;return l.call(t.__using,e)?t.__using[e]:l.call(t.__generics,e)?t.__generics[e]:e},u.prototype.createComponent=function(e,t,r,n){var i=null;i=void 0===t?e:t;var a=this.__wxHost;"object"!=typeof i&&("object"!=typeof(i=this.getCompDefByTagName(i))&&(i=o._list[i]||o._list[""]));var s=function(e,t){var r={};for(var n in e){var i=e[n];"object"!=typeof i&&l.call(t.__placeholder,i)&&(i=t.__placeholder[i],l.call(t.__using,i)?i=t.__using[i]:l.call(t.__generics,i)&&(i=t.__generics[i]||o._list[""]),r[n]=i)}return r}(r,a);return r&&(r=function(e,t){var r={};for(var n in e){var i=e[n];"object"!=typeof i&&(l.call(t.__using,i)?i=t.__using[i]:l.call(t.__generics,i)&&(i=t.__generics[i]||o._list[""]),r[n]=i)}return r}(r,a)),"object"==typeof e&&(e=i.is),a.__componentOptions.randomizeTagName&&(e=function(){for(var e=Date.now(),t="exparser-",r=0;r<8;r++){var n=(e+Math.floor(26*Math.random()))%26;e=Math.floor(e/26),t+="abcdefghijklmnopqrstuvwxyz"[n]}return t}()),a.__componentOptions.writeOnly&&!i.options.allowInWriteOnly&&(i=o._list[""]),o._advancedCreate(e,i,this,r,s,n)},u.prototype.tagNameUsed=function(e){var t=this.__wxHost;return!!(l.call(t.__using,e)||l.call(t.__placeholder,e)||l.call(t.__generics,e)||l.call(t.__placeholder,e))},u.prototype.getHostNode=function(){return this.__wxHost},u.prototype.getElementById=function(e){return n._updateIdMap(this.__wxHost),this.__wxHost.__idCache[e]},e.exports=u},function(e,t,r){var n=r(9),o=r(12),i=function(){};i.create=function(e,t,r){var a=new i;if(!(e instanceof n||e instanceof o))throw new Error("ElementIterator can only be used for exparser.Element or exparser.TextNode");a._elem=e,a._elemTypeLimit=r||n;var s=t.split("-");if("shadow"===s[0])a._composed=!1;else{if("composed"!==s[0])throw new Error("Unrecognized iterator type: "+t);a._composed=!0}if("ancestors"===s[1])a._relation="ancestors",a._order=0;else{if("descendants"!==s[1])throw new Error("Unrecognized iterator type: "+t);if(a._relation="descendants","root"!==s[2])throw new Error("Unrecognized iterator type: "+t);if("first"===s[3])a._order=-1;else{if("last"!==s[3])throw new Error("Unrecognized iterator type: "+t);a._order=1}}return a};var a=function(e,t,r,n,o){if(n<0&&e instanceof t&&!1===o(e))return!1;var i=r&&e.__wxSlotChildren||e.childNodes;if(i)for(var s=0;s<i.length;s++)if(!1===a(i[s],t,r,n,o))return!1;return!(n>0&&e instanceof t&&!1===o(e))};i.prototype.forEach=function(e){return"ancestors"===this._relation?function(e,t,r,n){for(;e;e=r&&(e.__wxSlotParent||e.__wxHost)||e.parentNode)if(e instanceof t&&!1===n(e))return!1;return!0}(this._elem,this._elemTypeLimit,this._composed,e):a(this._elem,this._elemTypeLimit,this._composed,this._order,e)},e.exports=i},function(e,t,r){var n=r(4),o=r(3),i=r(9),a=r(17),s=r(12),l=r(19),u=r(15),c=r(22),d=r(23),p=function(){};p.prototype=Object.create(Object.prototype,{constructor:{value:p,writable:!0,configurable:!0}});var f=function(){};f.prototype=Object.create(Object.prototype,{constructor:{value:f,writable:!0,configurable:!0}});var h=null;p.precompiler=h,p.htmlParser=null;var _=function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},g=Object.prototype.hasOwnProperty,v=function(e,t){if(null!==e&&"object"==typeof e&&g.call(e,t))return e[t]},m=function(e,t,r,n){if(g.call(t,r)){var i=t[r];if("function"==typeof i)return o.safeCallback("Template Method",i,e,n)}},y=function(e,t){return[{t:1,n:"slot",a:[],c:[],p:null}]},b={t:1,n:'"slot"',v:!0,sn:"",a:[],c:[],p:null},w=function(e,t,r){e.classList.toggle(t,!!r)},A=function(e,t,r){e[t]=r},E=function(e,t,r){var n=e.__dataProxy;n.scheduleReplace([t],r),n.doUpdates()},I=function(e,t,r){e.class=r},S=function(e,t,r){e.setAttribute("style",r)},C=function(e,t,r){e.setAttribute("class",r)},T=function(e,t,r){e.textContent=r},O=function(e,t,r){e.dataset||(e.dataset={}),e.dataset[t]=r},x={$:function(e,t,r){!0===r?e.setAttribute(t,""):!1===r||null==r?e.removeAttribute(t):e.setAttribute(t,r)},":":A,c:w,s:function(e,t,r){var n=e.style;n&&(n[t]=r)},d:O},N=function(e,t,r){return[{t:1,n:"slot",v:!0,sn:"",a:[],c:[]}]};p.create=function(e,t,r,n){var i=void 0===e.template?N:e.template,a=i;"function"!=typeof i&&("undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node?a=p.precompileAndGetCreator(i):(o.hasGlobalWarningListeners()&&o.triggerWarning("Non-precompiled template is not usable in this environment. Empty template is used instead."),a=y));var s=Object.create(p.prototype);return s._initValuesJSON=JSON.stringify(r),s._dataJSON=t!==r?JSON.stringify(t):null,s._tagTreeRoot=R(a,r,e.methods,n),s._renderingMode=n.renderingMode,s};var R=function(e,t,r,o){var i="native"===o.renderingMode,s=i,l=!1,u=Object.create(null);i&&!n.hasDOMBackend&&(e=y);var c={},p=e(v,m,r),f=function(e){for(var r=0;r<e.length;r++){var n=e[r];if(3!==n.t){var o=n.n,u=!(i||"string"==typeof o&&o.indexOf("-")<0);"slot"===o&&""===n.sn&&(l=!0),n.n=o;var p=n.st;p&&p.e&&(p.o=S,s&&(p.v=p.e(t,c,null)));var h=n.cl;h&&h.e&&(h.o=i?C:I,s&&(h.v=h.e(t,c,null)));var g=null;u||(n.p=g=i?document.createElement(n.n):a.create(n.n),p&&void 0!==p.v&&g.setAttribute("style",p.v),i&&h&&void 0!==h.v&&g.setAttribute("class",h.v));for(var v=n.a,m=0;m<v.length;m++){var y=v[m];if(y.d)i||d[y.n].register(y.n,y,n);else{i||("bind"===y.n.slice(0,4)?(y.evCatch=!1,y.ev=_(y.n.slice(4)),":"===y.ev[0]&&(y.ev=y.ev.slice(1))):"catch"===y.n.slice(0,5)&&(y.evCatch=!0,y.ev=_(y.n.slice(5)),":"===y.ev[0]&&(y.ev=y.ev.slice(1))));var b=y.o;if(u)b?y.o="&"===b?x[":"]:x[b]:(y.o=x[":"],y.n=_(y.n)),y.o===A&&(y.o=E),s&&y.e&&(y.v=y.e(t,c,null));else if(!y.ev){var O=x;y.o=b?"&"===b?O[":"]:O[b]:O.$,s?(y.e&&(y.v=y.e(t,c,null)),(y.o!==w||i)&&y.o(g,y.n,y.v)):y.e||y.o(g,y.n,y.v)}}}f(n.c),i&&(1!==n.c.length||void 0===n.c[0].sn||n.c[0].compressed||(n.sn=n.c[0].sn,n.compressed=!0,n.c.pop()))}else n.e&&(n.o=T,n.c=s?n.e(t,c,null):"")}};return f(p,u,!0),i&&(l||p.push(b),1!==p.length||""!==p[0].sn||p[0].compressed||p.pop()),p},P=function(e,t){return function(r){if(this[e](r),t)return!1}},D=function(e,t,r,n,o,a,s,l){for(var p=null,f=0,h=null,_=0;_<e.length;_++){var g=s,v=e[_];if(3===v.t)p=v.e?t.createTextNode(v.e(n,o,null)):t.createTextNode(v.c),v.e&&c.addBindings(a,g,v.b,p,v),i.appendChild(r,p);else{var m=v.cl,y=v.st,b=v.a,I=!1;for(f=0;f<b.length;f++)if((h=b[f]).d){var S=d[h.n].create(h.n,h,v,n,o,a,g,l,t,D,r);if(d[h.n].requireBlock){p=S,i.appendChild(r,p),I=!0;break}}if(I)continue;if(v.v)p=t.createVirtualNode(v.n);else if(v.p){for(p=t.cloneNativeNode(v.p),f=0;f<b.length;f++)(h=b[f]).d||(h.ev?l(p,h.ev,h.v,h.evCatch):h.o===A?p.__domElement&&(h.o(p.__domElement,h.n,h.e(n,o,null)),c.addBindings(a,g,h.b,p.__domElement,h)):(h.e&&h.o(p,h.n,h.e(n,o,null)),(h.e||h.o===w||h.o===O)&&c.addBindings(a,g,h.b,p,h)));y&&y.e&&(p.setAttribute("style",y.e(n,o,null)),c.addBindings(a,g,y.b,p,y))}else{if(v.cpf){var C={},T=t.__wxHost;for(var x in v.cpf)!function(e){var t=v.cpf[e];C[e]=T.__behavior.methods[t]}(x);t.__childrenPropsFilter=C}for(p=t.createComponent(v.n,void 0,v.g,void 0),f=0;f<b.length;f++)if(!(h=b[f]).d){var N=h.v;h.o===E&&u.hasPublicProperty(p,h.n)?(h.e&&(N=h.e(n,o,null),c.addBindings(a,g,h.b,p,h)),h.e?E(p,h.n,N):p.__behavior.properties[h.n].type===Boolean?E(p,h.n,!0):E(p,h.n,N)):h.ev?l(p,h.ev,N,h.evCatch):h.o!==E&&(h.e&&(N=h.e(n,o,null),c.addBindings(a,g,h.b,p,h)),h.o(p,h.n,N))}y&&(y.e?(p.__domElement.setAttribute("style",y.e(n,o,null)),c.addBindings(a,g,y.b,p.__domElement,y)):p.__domElement.setAttribute("style",y.v))}v.id&&(p.id=v.id),m&&(m.e?p.class=m.e(n,o,null):p.class=m.v,m.o&&c.addBindings(a,g,m.b,p,m)),v.sl&&(p.slot=v.sl),void 0!==v.sn&&i.setSlotName(p,v.sn),i.appendChild(r,p),D(v.c,t,p,n,o,a,g,l)}}},L=function(e,t,r){for(var n=e.childNodes,o=0;o<n.length;o++){var i=n[o];i instanceof s||(i.__id&&(t[i.__id]=i),void 0!==i.__slotName&&(r[i.__slotName]=i),L(i,t,r))}},B=function(e,t,r,n,o,i){for(var a=null,s=0,l=null,u=0;u<e.length;u++){var d=e[u];if(void 0===d.n)a=document.createTextNode(d.c),d.e&&c.addBindings(o,i,d.b,a,d),t.appendChild(a);else{var p=d.cl,f=d.st,h=d.a;for(a=d.v?document.createElement("virtual"):document.importNode?document.importNode(d.p,!1):d.p.cloneNode(!1),s=0;s<h.length;s++)(l=h[s]).e&&c.addBindings(o,i,l.b,a,l);t.appendChild(a),d.id&&(r[d.id]=a),p&&p.e&&c.addBindings(o,i,p.b,a,p),f&&f.e&&c.addBindings(o,i,f.b,a,f),void 0!==d.sn&&(n[d.sn]=a),B(d.c,a,r,n,o,i)}}};p.prototype.createInstance=function(e){var t=Object.create(f.prototype),r=JSON.parse(this._initValuesJSON),o=null===this._dataJSON?r:JSON.parse(this._dataJSON),i=Object.create(null),a=Object.create(null),s=[],u=c.create("",null,null,null,null,[],(function(e,t){})),d=null;if("native"===this._renderingMode)"dom"===n.documentBackend&&(d=document.createDocumentFragment()),B(this._tagTreeRoot,d,i,a,u,{}),a[""]||(a[""]=null);else{if(d=l.create(e),e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(d.__childrenPropsFilter)for(var p in e.ownerShadowRoot.__childrenPropsFilter)d.__childrenPropsFilter[p]||(d.__childrenPropsFilter[p]=e.ownerShadowRoot.__childrenPropsFilter[p]);else d.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;D(this._tagTreeRoot,d,d,r,{},u,{},(function(e,t,r,n){d.__wxHost?e.addListener(t,P(r,n).bind(d.__wxHost)):s.push({target:e,name:t,func:P(r,n)})})),L(d,i,a)}return t.data=o,t.shadowRoot=d,t.idMap=i,t.slots=a,t.listeners=s,t._topScope=u,t},f.prototype.updateValues=function(e,t,r){for(var n=i.getMethodCaller(e),o=0;o<r.length;o++){var a=r[o];c.updateBinding(this._topScope,a,t,{},n)}},e.exports=p},function(e,t){var r={create:function(e,t,r,o,i,a,s){for(var l={inc:1,name:e,exp:o,lp:i,scopes:{},targets:{},children:null,lu:s,__scopeBinded:[]},u=0;u<a.length;u++){var c=a[u];null===c[0]?n(t,c,null,l):n(r[c[0]],c,null,l)}return l},proxyTopScope:function(e){var t={inc:1,linked:e,scopes:{},targets:{},children:null,__scopeBinded:[]};return n(e,[null],null,t),t},proxySubScopes:function(e){var t={};for(var r in e)t[r]={inc:1,linked:e[r],scopes:{},targets:{},children:null,__scopeBinded:[]},n(e[r],[null],null,t[r]);return t}},n=r.addBinding=function(e,t,r,n){for(var o=e,i=1;i<t.length;i++){var a=t[i];o.children||(o.children=Object.create(null));var s=o.children;s[a]||(s[a]={scopes:{},targets:{},children:null}),o=s[a]}var l=e.inc++;return r?o.targets[l]=[r,n]:(o.scopes[l]=n,n.__scopeBinded.push([o,l])),l};r.addBindings=function(e,t,r,o,i){for(var a=0;a<r.length;a++){var s=r[a];s[0]?n(t[s[0]],s,o,i):n(e,s,o,i)}},r.updateLvaluePath=function(e,t){e.lp=t},r.removeBindingsForScope=function(e){for(var t=e.__scopeBinded,r=0;r<t.length;r++){var n=t[r];delete n[0].scopes[n[1]]}};var o=function(e,t,r,n,o){if(e.linked)i(e,t,r,n,o);else{var a=n[e.name];n[e.name]=e.exp(r,n,o),i(e,t,r,n,o),n[e.name]=a}},i=r.updateBinding=function(e,t,r,n,i){for(var a=e,s=0,l=0;l<t.length;l++){for(s in a.scopes)o(a.scopes[s],t,r,n,i);var u=t[l];if(!a.children)return;var c=a.children;if(!c[u])return;a=c[u]}var d=function(e){for(s in e.targets){var t=e.targets[s],a=t[1];a.o(t[0],a.n,a.e(r,n,i))}for(s in e.scopes)o(e.scopes[s],[],r,n,i);for(s in e.children)d(e.children[s])};d(a)};e.exports=r},function(e,t,r){e.exports={if:r(24),elif:r(24),else:r(24),for:r(26),key:r(27),"for-index":r(28),"for-item":r(29),alias:r(30)}},function(e,t,r){var n=r(22),o=r(25).RUNTIME_NAMES;o.TOP_SCOPE,o.SUB_SCOPE,o.CALLER,e.exports={requireBlock:!0,register:function(e,t,r){},create:function(e,t,r,o,i,a,s,l,u,c,d){var p=u.createVirtualNode("wx:"+e);p.__wxIfCondValue=!0,p.__wxIfNextNode=null,p.__wxIfHasTrueCond=!0;var f=null;"if"!==e&&("wx:if"!==(f=d.childNodes[d.childNodes.length-1]).is&&"wx:elif"!==f.is?f=null:f.__wxIfNextNode=p),r.id&&(p.id=r.id);var h=p.__wxIfUpdateNode=function(){var e=p.__wxIfCondValue;if(f&&f.__wxIfHasTrueCond&&(e=!1),e&&!p.childNodes.length){var t=n.proxyTopScope(a),d=n.proxySubScopes(s);p.__wxTopScope=t,p.__wxSubScopes=d,c(r.c,u,p,o,i,t,d,l)}else if(!e&&p.childNodes.length){for(var h in n.removeBindingsForScope(p.__wxTopScope),p.__wxSubScopes)n.removeBindingsForScope(p.__wxSubScopes[h]);for(;p.childNodes.length;)p.removeChild(p.childNodes[0])}p.__wxIfNextNode&&p.__wxIfNextNode.__wxIfUpdateNode()},_=function(e){p.__wxIfCondValue=!!e,p.__wxIfHasTrueCond=p.__wxIfCondValue||f&&f.__wxIfHasTrueCond,h()};return"else"===e?_(!0):(n.addBindings(a,s,t.b,p,{e:t.d,o:function(e,t,r){_(r)}}),_(t.d(o,i,null))),p}}},function(e,t){t.TAG_TYPES={TAG_START:1,TAG_END:-1,TEXT:3,COMMENT:8},t.RUNTIME_NAMES={MEMBER:"m",CALL:"f",METHODS:"e",CALLER:"c",TOP_SCOPE:"t",SUB_SCOPE:"s"};var r=t.STRING_UNESCAPE_MAP={n:"\n",r:"\r",b:"\b",f:"\f",t:"\t",v:"\v",'"':'"',"'":"'","\\":"\\","\r":"\r","\n":"\n"},n=t.STRING_ESCAPE_MAP={},o="";for(var i in r)n[r[i]]=i,o+=r[i];t.STRING_ESCAPE_REGEXP=new RegExp("["+o+"]","g")},function(e,t,r){var n=(r(18),r(22)),o=r(25).RUNTIME_NAMES;o.TOP_SCOPE,o.SUB_SCOPE,o.CALLER,e.exports={requireBlock:!0,addDefaultAttrs:[{n:"wx:for-index",v:"index"},{n:"wx:for-item",v:"item"}],register:function(e,t,r){},create:function(e,t,r,o,i,a,s,l,u,c){var d=r._wxForIndex||"index",p=r._wxForItem||"item",f=r._wxKey,h=u.createVirtualNode("wx:for:list");r.id&&(h.id=r.id),n.create("",a,s,(function(e,r,n){var o=t.d(e,r,null);return y(o,e,r,n),o}),t.l,t.b);var _=function(e,t,o,i,f){var _=u.createVirtualNode("wx:for:item"),g=n.proxyTopScope(a),v=n.proxySubScopes(s);_.__wxTopScope=g,_.__wxSubScopes=v,_.__wxForToRemove=!1,_.__wxForKeyStr="";var m=n.create(d,g,v,null,null,[]),y=n.create(p,g,v,null,[o],[]);return v[d]=m,v[p]=y,t[d]=o,t[p]=i,c(r.c,u,_,e,t,g,v,l),void 0===f?h.appendChild(_):h.insertBefore(_,f),_},g=function(e,t,r,i,a,s){var l=e.__wxSubScopes[p];n.updateLvaluePath(l,[i]),a&&(s?h.insertBefore(e,s):h.appendChild(e));var u=e.__wxSubScopes[d];r[d]=i,n.updateBinding(u,[],o,r,t)},v=function(e,t,r,o,i,a){o[p]=i,n.updateBinding(e.__wxSubScopes[p],t,r,o,a)},m=function(e){for(var t in n.removeBindingsForScope(e.__wxTopScope),h.__wxSubScopes)n.removeBindingsForScope(e.__wxSubScopes[t]);h.removeChild(e)},y=function(e,t,r,n){var o="",i=e;"object"==typeof e&&null!==e||(i=[]);var a={};for(o in r)a[o]=r[o];var s=0;if(f){var l=[],u=e instanceof Array,c=[];if(!u){var d=i;for(o in i=[],d)i.push(d[o]),c.push(o)}for(s=0;s<i.length;s++)l.push(String(i[s][f]));if(0===i.length)for(;h.childNodes.length;)m(h.childNodes[0]);else{var p=Object.create(null),y=Object.create(null),b=h.childNodes,w=null,A="";for(s=0;s<b.length;s++)p[A=(w=b[s]).__wxForKeyStr]>=0?(m(w),s--):(p[A]=s,y[A]=w,w.__wxForToRemove=!0);var E=-1,I=0,S=1,C=[];for((I=p[i[0][f]])>=0||(I=-1),b[I]&&(b[I].__wxForToRemove=!1),s=1;s<i.length;s++)(S=p[i[s][f]])>=0&&(E<I&&(I<S||E>S)&&(C.push(b[I]),E=I),b[I=S]&&(b[I].__wxForToRemove=!1));for(E<I&&C.push(b[I]),s=0;s<b.length;s++)(w=b[s]).__wxForToRemove&&(m(w),s--);var T=C.shift(),O=0;for(s=0;s<i.length;s++){var x=i[s],N=y[x[f]];if(y[x[f]]=null,N){var R=!0;if(N===T){for(;b[O]!==T;)O++;O++,T=C.shift(),R=!1}g(w=N,n,a,u?s:c[s],R,b[O]),R&&b[O]===w&&O++,v(w,[],t,a,i[s],n)}else w=_(t,a,u?s:c[s],i[s],b[O]),O++,w.__wxForKeyStr=String(x[f])}}}else{for(;h.childNodes.length;)m(h.childNodes[0]);if(e instanceof Array)for(s=0;s<i.length;s++)_(t,a,s,i[s]);else for(o in i)_(t,a,o,i[o])}};return y(t.d(o,i,null),o,i,null),h}}},function(e,t){e.exports={attachedToBlock:!0,register:function(e,t,r){r._wxKey=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,r){r._wxForIndex=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,r){r._wxForItem=t.d},create:function(){}}},function(e,t,r){var n=r(22),o=r(25).RUNTIME_NAMES;o.TOP_SCOPE,o.SUB_SCOPE,o.CALLER,e.exports={requireBlock:!0,register:function(e,t,r){},create:function(e,t,r,o,i,a,s,l,u,c){var d=t.s[0],p=n.create(d,a,s,t.d,t.l,t.b),f={},h="";for(h in s)f[h]=s[h];f[d]=p;var _={};for(h in i)_[h]=i[h];_[d]=t.d(o,i,null);var g=u.createVirtualNode("wx:alias");return r.id&&(g.id=r.id),c(r.c,u,g,o,_,a,f,l),g}}}]),D,L;(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new o("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};e.r(t),e.d(t,{Behavior:()=>ua,Component:()=>ya,CustomComponent:()=>_a,Page:()=>ba,SCL_TABBAR_VIEW_ID:()=>C,addView:()=>ds,attachView:()=>ps,beginTapMark:()=>Dn,checkTapMark:()=>Bn,componentAliases:()=>ci,componentExists:()=>ls,componentPathToAlias:()=>di,convertComponentAliasToRoute:()=>Fo,convertRouteToComponentAlias:()=>Mo,destroyCustomTabBarManager:()=>R,destroyDataThreadTabBar:()=>hs,dispatchViewRoute:()=>xi,doDataThreadReplacePlaceholder:()=>ra,enableUpdateWxAppCode:()=>Ls,endTapMark:()=>Pn,endViewInfoCallback:()=>Ei,getAllPluginSubPackagePrefix:()=>jo,getDomTreeByPageId:()=>ka,getDomainByPluginId:()=>pi,getEntryFile:()=>Xo,getGenericsByPath:()=>Qi,getNodeById:()=>Os,getNodeId:()=>xs,getOwnerPluginAppId:()=>na,getPageId:()=>Ds,getPlaceholderByPath:()=>zi,getPluginRoutePrefix:()=>$o,getPluginSubPackagePrefix:()=>Uo,getRendererByPath:()=>Yi,getRootCompName:()=>Ps,getRootNode:()=>Ns,getRootNodeId:()=>Rs,getSubPackagePlugin:()=>Jo,getUsingByPath:()=>Hi,getWorkletIdByName:()=>Ca,getXrFrameTouchEventBubbleByPath:()=>Ki,hideTabBar:()=>W,initBannedMap:()=>Xe,initViewThread:()=>Pa,injectWxss:()=>ta,isLazyLoad:()=>Ji,isSubPackageIndependent:()=>Ho,isViewAttached:()=>_s,matchSubPackageName:()=>qo,mergeData:()=>Ms,newPage:()=>Ba,newTabBar:()=>La,onComponentDef:()=>qa,onLazyLoadError:()=>Ue,onMainPageFrameReady:()=>Oi,prepareSubPackagesStyle:()=>Wa,processPluginPageGenerics:()=>oa,publishDomainComponents:()=>hi,removeView:()=>fs,requestViewInfo:()=>Ai,restoreView:()=>li,runComponentDef:()=>Ya,saveView:()=>si,sendTabBarCreationRequest:()=>ts,setGlobalUpdatePerformanceListener:()=>To,setLazyLoadTimeout:()=>Me,setModelValueData:()=>Vi,setPageRootCompPath:()=>cs,setPageType:()=>ye,showTabBar:()=>$,showTabBarByRenderer:()=>q,triggerGenerateFuncReady:()=>ea,updateWxAppCode:()=>Bs,wrapTapMark:()=>Ln,xrFrameTouchEvent:()=>vs});var n=void 0!==P?P:{},a="none";"undefined"!=typeof __useSclExparser__&&__useSclExparser__&&void 0!==f&&(a="scl"),"undefined"!=typeof __skylineEngine__&&(a="skyline"),"undefined"!=typeof xrFrame&&(a="xr-frame"),"scl"===a?n=f.exparser||n||{}:"skyline"===a?n=__skylineEngine__.getRuntime().getExparser()||n||{}:"xr-frame"===a&&(n=xrFrame.getExparser()||n||{});var c=()=>n,d=()=>__skylineEngine__.getRuntime(),p=()=>a,g=c(),v={WX_EVENT:11,REQUEST_SAVE:12,COMPONENT_DEF:21,SAVE_STATE:22,RESTORE_STATE:23,FLOW_INITIAL_RENDERING_CACHE:24,FLOW_CLEAR_INITIAL_RENDERING_CACHE:25,FLOW_SET_SUBPACKAGE_LOADED:26,SET_DATA_CALLBACK:32,FLOW_SET_DATA:33,FLUSH_BLOCKED:43,FLOW_GROUP:41,FLOW_GROUP_END:42,FLOW_DEPTH:2,FLOW_INITIAL_CREATION:3,FLOW_UPDATE:6,FLOW_DATA_OBSERVER:8,FLOW_APPLY_PROPERTY:4,FLOW_MINIPULATE_CHILD:7,FLOW_CREATE_NODE:5,FLOW_REPEAT:9,FLOW_VIEW_INFO:63,REQUEST_TAB:51,COMPONENT_DEF_TAB:52,FLOW_CREATE_TAB:53,DESTROY_TAB:54,FLOW_DESTROY_PAGE:55,SHOW_TAB:56,HIDE_TAB:57,SCL_CONTEXT_READY:58,REQUEST_BROADCAST_VIEW_ID:61,RESPONSE_BROADCAST_VIEW_ID:62,BANNING_MAP:90,CALL_METHOD_FROM_WXS:50,RESPONSE_VIEW_INFO:64,MODEL_VALUE_CHANGE:65,FLOW_SET_NODE_ANIMATION_INFO:100,ANIMATION_TRANSITION_END:101,FLOW_CLEAR_NODE_ANIMATION_INFO:102,CLEAR_ANIMATION_COMPLETE:103,FLOW_SET_NODE_NEXT_ANIMATION_INFO:104,LOAD_COMPONENT_DEF:110,FLOW_WAIT_COMPONENT:112,FLOW_REPLACE_PLACEHOLDER:113,FLOW_PEND_PLACEHOLDER_REPLACEMENT:114,FLOW_COMPONENT_DEF_ADD:120,FLOW_INJECT_SUBPACKAGE:121,FLOW_INJECT_COMPONENT:122,FLOW_HOT_UPDATE:900,FLOW_HOT_UPDATE_CHILD:901,FLOW_HOT_UPDATE_RESET:902,UPDATE_COMPONENT_DEF:903,UPDATE_PERFORMANCE_STAT:800,ENABLE_UPDATE_PERFORMANCE_STAT:801,DISABLE_UPDATE_PERFORMANCE_STAT:802,ENABLE_GLOBAL_UPDATE_PERFORMANCE_STAT:803,REQUEST_WORKLET_METHOD:200,RESPONSE_WORKLET_METHOD:201,FLOW_SET_NODE_ANIMATED_STYLE:202,FLOW_CLEAR_NODE_ANIMATED_STYLE:203,APPLY_NODE_ANIMATED_STYLE_END:204,CLEAR_NODE_ANIMATED_STYLE_END:205,XR_FRAME_CANVAS_CREATED:300,XR_FRAME_CANVAS_READY:301,FLOW_SET_ROOT_PROPERTIES:302,XR_FRAME_COMP_OPTIONS:303,LOAD_APP_PKG:1e3,LOAD_APP_PKG_READY:1001},b={};Object.keys(v).forEach((e=>{b[v[e]]=e}));var w=e=>b[e]||`UNKNOWN_EVENT_${e}`,A=0,E=1,I=2,S=4294967297,C=4294967298,T="custom-tab-bar/index";class O{constructor(){this.__instances=void 0,this.__instances=new Map}add(e,t,r){this.__instances.set(e,{tm:r,renderType:t})}get(e){var t=this.__instances.get(e);return t||s.warn(`[customTabBarManager] pageId: ${e} TabBar is not exists`),t}remove(e){this.__instances.delete(e)}has(e){return this.__instances.has(e)}getRenderType(e){var t;return(null===(t=this.__instances.get(e))||void 0===t?void 0:t.renderType)||"webview"}}O.MANAGER=void 0;var N=()=>(O.MANAGER||(O.MANAGER=new O),O.MANAGER),R=()=>{O.MANAGER=null},B=e=>{var t,r,n,o,i=(null===(t=m)||void 0===t||null===(r=t.tabBar)||void 0===r?void 0:r.renderer)||"webview";if(Array.isArray(null===(n=m)||void 0===n||null===(o=n.tabBar)||void 0===o?void 0:o.list))for(var a=m.tabBar.list,l=0;l<a.length;l++){var u=a[l];if(u.pagePath===`${e}.html`){"string"==typeof u.renderer&&(i=u.renderer);break}}return s.info(`[CustomTabBar] getCustomTabBarRenderer pagePath: ${e}, renderer: ${i}`),"cover-view"===i?"scl":i||"webview"},k=e=>{var t,r;if(Array.isArray(null===(t=m)||void 0===t||null===(r=t.tabBar)||void 0===r?void 0:r.list))for(var n=m.tabBar.list,o=0;o<n.length;o++){var i=n[o];if(i.pagePath===`${e}.html`)return!i.hide}return!1},M=()=>{var e,t;return!(null===(e=m)||void 0===e||null===(t=e.tabBar)||void 0===t||!t.custom)},F=(e,t,r)=>{var n,o,i=!0,a=null===(n=m)||void 0===n||null===(o=n.tabBar)||void 0===o?void 0:o.list;Array.isArray(a)&&(a.map((e=>null==e?void 0:e.pagePath)).filter((e=>!!e)).indexOf(`${t}.html`)>=0&&(i=!1));s.info(`[checkPageIncludingTabBar] rootCompName=${t}, viewId=${r}, needRemove=${i}`),i&&(e.tabDestroyed=!0,W(r))},j=()=>{var e,t,r=p();"skyline"===r?null===(e=window.__TAB_BAR__)||void 0===e||null===(t=e.__domElement)||void 0===t||t.setStyle("pointer-events: none; display: flex;"):"scl"===r&&f.showTabBarContainer()},U=()=>{var e,t,r=p();"skyline"===r?null===(e=window.__TAB_BAR__)||void 0===e||null===(t=e.__domElement)||void 0===t||t.setStyle("pointer-events: none; display: none;"):"scl"===r?f.hideTabBarContainer():"webview"===r&&window.__TAB_BAR__&&window.__TAB_BAR__.parentNode.removeChild(window.__TAB_BAR__)},$=e=>{var t=N().get(e),r=null==t?void 0:t.renderType;ge(v.SHOW_TAB,{},"skyline"===r?S:"scl"===r?C:e)},W=e=>{var t=N().get(e),r=null==t?void 0:t.renderType;"webview"!==r?ge(v.HIDE_TAB,{},"skyline"===r?S:"scl"===r?C:e):ge(v.DESTROY_TAB,[],e)},q=e=>{var t="skyline"===e?S:"scl"===e?C:void 0;void 0!==t&&ge(v.SHOW_TAB,{},t)},H=c(),G=/^[-+a-z]+:\/\//i,Q=function(e,t){if(G.test(t))return t;var r=e.match(G),n="";r&&(n=r[0],e=e.slice(n.length)),0===t.indexOf("/")&&(e="");var o=e.split("/");o.pop();for(var i=t.split("/");i.length;){var a=i.shift();""!==a&&"."!==a&&(".."!==a?o.push(a):o.pop())}return n+o.join("/")},z=t=>{var r=("undefined"==typeof window?e.g:window).__wcc_version_info__;if(r)return r[t]},Y=()=>Math.floor(4294967296*(1+Math.random())).toString(16).slice(1),K=e=>Object.keys(e).map((t=>e[t])),V=(e,t,r)=>{e instanceof H.Component&&(t>0&&r(e),t&&e.shadowRoot instanceof H.Element&&V(e.shadowRoot,t,r),t<0&&r(e));for(var n=e.childNodes,o=0;o<n.length;o++)n[o]instanceof H.Element&&V(n[o],t,r)},J=e=>{if(null==e)return e;var t=typeof e;if("string"===t||"number"===t||"boolean"===t)return e;if(Array.isArray(e)){for(var r=Array(e.length),n=0;n<e.length;++n)r[n]=J(e[n]),void 0===r[n]&&(r[n]=null);return r}if("object"===t){for(var o={},i=Object.keys(e),a=0;a<i.length;++a)o[i[a]]=J(e[i[a]]),void 0===o[i[a]]&&delete o[i[a]];return o}},X=e=>{var t={};return e.forEach((e=>{t[e]={ok:!1,callbacks:[]}})),{notify(e){t[e]&&(t[e].ok=!0,t[e].callbacks.forEach((e=>e())),t[e].callbacks=[])},on(e,r){t[e]&&(t[e].ok?r():t[e].callbacks.push(r))},isNotified:e=>t[e]&&t[e].ok}},Z={},ee=-1,te=null,re=!1,ne=()=>re,oe=[],ie=null,ae=null,se=!1,le=()=>u,ue={[S]:"skyline",[C]:"scl"},ce={},de={},pe=new Set,fe=(e,t)=>{var r="webview"===ue[t]||"scl"===ue[t]?e:"xr-frame"===ue[t]?[...e]:e.map((e=>J(e))),n=r.shift();if(""===n)return ee=t,void(te&&te(t));t=t||0,"webview"===p()&&(t=0),he(t,n,r)},he=(e,t,r)=>{var n,o=null;if(Z[e]&&(o=Z[e][t]),!o&&Z.$GLOBAL){if(pe.has(e))return;o=Z.$GLOBAL[t]}if(!(o||"skyline"!==p()||null!==(n=de[e])&&void 0!==n&&n.isReady))return de[e]||(de[e]={queue:[],isReady:!1}),void de[e].queue.push({ev:t,data:r});o?o(r,t,e):s.error(`[VD] recvData no handler for event=${t}, pageId=${e}`)},_e=()=>{ae&&(ae=clearTimeout(ae)),oe.length&&ce[ie].vdSyncBatch(oe,ie&&[ie]),ie=null,oe=[],se=!1},ge=(e,t,r,n)=>(t=[e].concat(t),"webview"!==ue[r]?ce[r]?void ce[r].vdSync(t,r&&[r]):void s.warn(`pageId: ${r}, ev: ${e}. Ignore sendData cause Page is removed. `):(ue[r],!se||n?(_e(),se=!0,void ce[r].vdSync(t,r&&[r])):(ie!==r&&_e(),ie=r,oe.push(t),se=!0,void(ae||(ae=setTimeout((()=>{ae=null,_e()}),15)))))),ve=e=>{e.__registered||(e.__registered=!0,e.onVdSync(((e,t)=>{void 0===ue[t]&&ye(t,"webview"),fe(e,t)})),e.onVdSyncBatch(((e,t)=>{void 0===ue[t]&&ye(t,"webview");for(var r=0;r<e.length;r++)fe(e[r],t)})))},me=()=>{ve(le()._virtualDOMTunnel)};void 0!==r&&r?x.onInitReady(me):me();var ye=(e,t)=>{var r;null!==(r=ce[e])&&void 0!==r&&r.__registered&&ue[e]===t||(ue[e]=t,ce[e]=le()._virtualDOMTunnel)},be=e=>ue[e],we=(e,t,r)=>{if(void 0!==r){if(""===e)return te=t,void(ee>=0&&te(ee));Z[r=r||0]||(Z[r]={}),Z[r][e]=t}},Ae=e=>{delete Z[e]},Ee={},Ie=(e,t)=>{Ee[e]=t},Se=e=>{Object.keys(Ee).forEach((t=>{we(t,Ee[t],e)})),de[e]&&(de[e].isReady=!0,de[e].queue.forEach((({ev:t,data:r})=>{he(e,t,r)})),de[e].queue=[])},Ce=e=>(t,r={})=>{if(0===t.length)return 0;s.info(`[Lazyload] loadJsFileTo${e}`);var n=Date.now(),o=x.loadJsFiles(t,null,{reportKey:void 0,isPageInitialScript:r.isPageInitialScript}),i=Date.now();return s.info(`[Lazyload] loadJsFileTo${e} done, cost: ${i-n}ms`),{cost:i-n,res:o}},Te=Ce("AppService"),Oe=(Ce("RenderContext"),new Set),xe=!1,Ne=[],Re=(Ce("SclContext"),(e,t,r=!1)=>{if(xe)Ne.push([e,t,r]);else{var n=e.filter((e=>Oe.has(e))),o=r?e:e.filter((e=>!Oe.has(e)));if(n.length>0&&s.info("[VD] loadJsFileToWebview ignored loaded: "+n.join(",")),0===o.length)return s.info("[VD] loadJsFileToWebview no files to load, return"),void t(0);o.forEach((e=>Oe.add(e)));var i={paths:o},a=void 0;"android"===m.platform?i.key=a:i.options={reportKey:a},xe=!0;var l=Date.now();h.invoke("loadJsFiles",i,(()=>{var e=Date.now();if(t(e-l),xe=!1,Ne.length>0){var r=Ne.shift();Re(...r)}}))}}),Pe=(e,t)=>{var r=Date.now();u.loadSubpackage({name:e,success(){var n=Date.now();t({cost:n-r,res:"ok",pkg:e}),s.info(`[VD] loadSubPackage ${e} success, cost ${n-r}`)},fail(){var n=Date.now();t({cost:n-r,res:"fail",pkg:e}),s.info(`[VD] loadSubPackage ${e} fail, cost ${n-r}`)},complete(t){s.info("[VD] loadSubpackage "+e+": ",t)}})},De=(e,t)=>{s.info("[VD] injectSubPackages: "+e.join(", ")),h.invoke("injectSubPackages",{subPackages:e},t)},Le=new Set,Be=(e,t)=>{var r=e.filter((e=>Le.has(e))),n=e.filter((e=>!Le.has(e)));if(r.length>0&&s.info(`[loadComponentsInDevTool] ignored loaded: [${r.length} comps]`),0===n.length)return s.info("[loadComponentsInDevTool] no comps to load, return"),0;n.forEach((e=>Le.add(e)));var o=Date.now();return h.invoke("loadComponents",{comps:n},(()=>{})),Date.now()-o},ke=5e3,Me=e=>{ke=e},Fe=()=>{},je=e=>{Fe(e)},Ue=e=>{Fe=e},$e=c();var We=class{constructor(){this._idNodeMap={}}getAll(){return this._idNodeMap}getNodeById(e){return this._idNodeMap[e]}getNodeId(e){return e.__wxTmplId}allocNodeId(e,t){var r=t||Y();return e.__wxTmplId=r,this._idNodeMap[e.__wxTmplId]=e,r}addNode(){}removeNode(e){if(e.__wxTmplId&&delete this._idNodeMap[e.__wxTmplId],e.childNodes)for(var t=0;t<e.childNodes.length;t++)this.removeNode(e.childNodes[t]);e.shadowRoot instanceof $e.Element&&this.removeNode(e.shadowRoot)}},qe=_.asyncToGenerator,He=e.n(qe),Ge=c(),Qe={},ze=1,Ye=(e,t,r)=>{void 0===e.__resizers?(e.__resizers=[],(e=>{var t=ze++;Qe[t]=e,Ge.Observer.create((e=>{"detached"===e.status&&delete Qe[t]})).observe(e,{attachStatus:!0})})(e),e.__resizers[t]=r):e.__resizers[t]=r},Ke=(e,t)=>{void 0!==e.__resizers&&(e.__resizers[t]=void 0)},Ve=c(),Je=null,Xe=e=>{0!==Object.keys(e).length&&(Je=e,Ts.listViewId().forEach((t=>{ge(v.BANNING_MAP,[e],t)})))},Ze=e=>{e.$$.style.display="none"},et=e=>{var t=e=>{e instanceof Ve.Component?Ze(e):e instanceof Ve.VirtualNode?e.childNodes.forEach((e=>{t(e)})):e instanceof Ve.TextNode&&(e.textContent=""),e.__banned=!0};t(e)},tt={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},rt={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},nt=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],ot={CSS:{},springs:{}};function it(e,t,r){return Math.min(Math.max(e,t),r)}function at(e,t){return e.indexOf(t)>-1}function st(e,t){return e.apply(null,t)}var lt={arr:function(e){return Array.isArray(e)},obj:function(e){return at(Object.prototype.toString.call(e),"Object")},pth:function(e){return lt.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||lt.svg(e)||e.$$},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return lt.hex(e)||lt.rgb(e)||lt.hsl(e)},key:function(e){return!tt.hasOwnProperty(e)&&!rt.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function ut(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function ct(e,t){var r=ut(e),n=it(lt.und(r[0])?1:r[0],.1,100),o=it(lt.und(r[1])?100:r[1],.1,100),i=it(lt.und(r[2])?10:r[2],.1,100),a=it(lt.und(r[3])?0:r[3],.1,100),s=Math.sqrt(o/n),l=i/(2*Math.sqrt(o*n)),u=l<1?s*Math.sqrt(1-l*l):0,c=l<1?(l*s-a)/u:-a+s;function d(e){var r=t?t*e/1e3:e;return r=l<1?Math.exp(-r*l*s)*(1*Math.cos(u*r)+c*Math.sin(u*r)):(1+c*r)*Math.exp(-r*s),0===e||1===e?e:1-r}return t?d:function(){var t=ot.springs[e];if(t)return t;for(var r=1/6,n=0,o=0;;)if(1===d(n+=r)){if(++o>=16)break}else o=0;var i=n*r*1e3;return ot.springs[e]=i,i}}function dt(e){return void 0===e&&(e=10),function(t){return Math.round(t*e)*(1/e)}}var pt,ft,ht=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function n(e){return 3*e}function o(e,o,i){return((t(o,i)*e+r(o,i))*e+n(o))*e}function i(e,o,i){return 3*t(o,i)*e*e+2*r(o,i)*e+n(o)}return function(t,r,n,a){if(0<=t&&t<=1&&0<=n&&n<=1){var s=new Float32Array(11);if(t!==r||n!==a)for(var l=0;l<11;++l)s[l]=o(l*e,t,n);return function(e){return t===r&&n===a||0===e||1===e?e:o(u(e),r,a)}}function u(r){for(var a=0,l=1;10!==l&&s[l]<=r;++l)a+=e;--l;var u=a+(r-s[l])/(s[l+1]-s[l])*e,c=i(u,t,n);return c>=.001?function(e,t,r,n){for(var a=0;a<4;++a){var s=i(t,r,n);if(0===s)return t;t-=(o(t,r,n)-e)/s}return t}(r,u,t,n):0===c?u:function(e,t,r,n,i){var a,s,l=0;do{(a=o(s=t+(r-t)/2,n,i)-e)>0?r=s:t=s}while(Math.abs(a)>1e-7&&++l<10);return s}(r,a,a+e,t,n)}}}(),_t=(pt={linear:function(){return function(e){return e}}},ft={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,r=4;e<((t=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var r=it(e,1,10),n=it(t,.1,2);return function(e){return 0===e||1===e?e:-r*Math.pow(2,10*(e-1))*Math.sin((e-1-n/(2*Math.PI)*Math.asin(1/r))*(2*Math.PI)/n)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,t){ft[e]=function(){return function(e){return Math.pow(e,t+2)}}})),Object.keys(ft).forEach((function(e){var t=ft[e];pt["easeIn"+e]=t,pt["easeOut"+e]=function(e,r){return function(n){return 1-t(e,r)(1-n)}},pt["easeInOut"+e]=function(e,r){return function(n){return n<.5?t(e,r)(2*n)/2:1-t(e,r)(-2*n+2)/2}}})),pt);function gt(e,t){if(lt.fnc(e))return e;var r=e.split("(")[0],n=_t[r],o=ut(e);switch(r){case"spring":return ct(e,t);case"cubicBezier":return st(ht,o);case"steps":return st(dt,o);default:return st(n,o)}}function vt(e){try{return document.querySelectorAll(e)}catch(e){return}}function mt(e,t){for(var r=e.length,n=arguments.length>=2?arguments[1]:void 0,o=[],i=0;i<r;i++)if(i in e){var a=e[i];t.call(n,a,i,e)&&o.push(a)}return o}function yt(e){return e.reduce((function(e,t){return e.concat(lt.arr(t)?yt(t):t)}),[])}function bt(e){return lt.arr(e)?e:(lt.str(e)&&(e=vt(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function wt(e,t){return e.some((function(e){return e===t}))}function At(e){var t={};for(var r in e)t[r]=e[r];return t}function Et(e,t){var r=At(e);for(var n in e)r[n]=t.hasOwnProperty(n)?t[n]:e[n];return r}function It(e,t){var r=At(e);for(var n in t)r[n]=lt.und(e[n])?t[n]:e[n];return r}function St(e){return lt.rgb(e)?(r=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t=e))?"rgba("+r[1]+",1)":t:lt.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,r,n){return t+t+r+r+n+n})),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(r[1],16)+","+parseInt(r[2],16)+","+parseInt(r[3],16)+",1)"}(e):lt.hsl(e)?function(e){var t,r,n,o=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(o[1],10)/360,a=parseInt(o[2],10)/100,s=parseInt(o[3],10)/100,l=o[4]||1;function u(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}if(0==a)t=r=n=s;else{var c=s<.5?s*(1+a):s+a-s*a,d=2*s-c;t=u(d,c,i+1/3),r=u(d,c,i),n=u(d,c,i-1/3)}return"rgba("+255*t+","+255*r+","+255*n+","+l+")"}(e):void 0;var t,r}function Ct(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function Tt(e,t){return lt.fnc(e)?e(t.target,t.id,t.total):e}function Ot(e,t){return e.getAttribute(t)}function xt(e,t,r){if(e=e.$$||e,wt([r,"deg","rad","turn"],Ct(t)))return t;var n=ot.CSS[t+r];if(!lt.und(n))return n;var o=document.createElement(e.tagName),i=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;i.appendChild(o),o.style.position="absolute",o.style.width=100+r;var a=100/o.offsetWidth;i.removeChild(o);var s=a*parseFloat(t);return ot.CSS[t+r]=s,s}function Nt(e,t,r){if(t in e.style){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=e.style[t]||getComputedStyle(e.$$||e).getPropertyValue(n)||"0";return r?xt(e,o,r):o}}function Rt(e,t){return lt.dom(e)&&!lt.inp(e)&&(Ot(e,t)||lt.svg(e)&&e[t])?"attribute":lt.dom(e)&&wt(nt,t)?"transform":lt.dom(e)&&"transform"!==t&&Nt(e,t)?"css":null!=e[t]?"object":void 0}function Pt(e){if(lt.dom(e)){for(var t,r=e.style.transform||"",n=/(\w+)\(([^)]*)\)/g,o=new Map;t=n.exec(r);)o.set(t[1],t[2]);return o}}function Dt(e,t,r,n){var o=at(t,"scale")?1:0+function(e){return at(e,"translate")||"perspective"===e?"px":at(e,"rotate")||at(e,"skew")?"deg":void 0}(t),i=Pt(e).get(t)||o;return r&&(r.transforms.list.set(t,i),r.transforms.last=t),n?xt(e,i,n):i}function Lt(e,t,r,n){switch(Rt(e,t)){case"transform":return Dt(e,t,n,r);case"css":return Nt(e,t,r);case"attribute":return Ot(e,t);default:return e[t]||0}}function Bt(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var n=Ct(e)||0,o=parseFloat(t),i=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return o+i+n;case"-":return o-i+n;case"*":return o*i+n}}function kt(e,t){if(lt.col(e))return St(e);if(/\s/g.test(e))return e;var r=Ct(e),n=r?e.substr(0,e.length-r.length):e;return t?n+t:n}function Mt(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ft(e){for(var t,r=e.points,n=0,o=0;o<r.numberOfItems;o++){var i=r.getItem(o);o>0&&(n+=Mt(t,i)),t=i}return n}function jt(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*Ot(e,"r")}(e);case"rect":return function(e){return 2*Ot(e,"width")+2*Ot(e,"height")}(e);case"line":return function(e){return Mt({x:Ot(e,"x1"),y:Ot(e,"y1")},{x:Ot(e,"x2"),y:Ot(e,"y2")})}(e);case"polyline":return Ft(e);case"polygon":return function(e){var t=e.points;return Ft(e)+Mt(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function Ut(e,t){var r=t||{},n=r.el||function(e){for(var t=e.parentNode;lt.svg(t)&&lt.svg(t.parentNode);)t=t.parentNode;return t}(e),o=n.getBoundingClientRect(),i=Ot(n,"viewBox"),a=o.width,s=o.height,l=r.viewBox||(i?i.split(" "):[0,0,a,s]);return{el:n,viewBox:l,x:l[0]/1,y:l[1]/1,w:a/l[2],h:s/l[3]}}function $t(e,t){function r(r){void 0===r&&(r=0);var n=t+r>=1?t+r:0;return e.el.getPointAtLength(n)}var n=Ut(e.el,e.svg),o=r(),i=r(-1),a=r(1);switch(e.property){case"x":return(o.x-n.x)*n.w;case"y":return(o.y-n.y)*n.h;case"angle":return 180*Math.atan2(a.y-i.y,a.x-i.x)/Math.PI}}function Wt(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=kt(lt.pth(e)?e.totalLength:e,t)+"";return{original:n,numbers:n.match(r)?n.match(r).map(Number):[0],strings:lt.str(e)||t?n.split(r):[]}}function qt(e){return mt(e?yt(lt.arr(e)?e.map(bt):bt(e)):[],(function(e,t,r){return r.indexOf(e)===t}))}function Ht(e){var t=qt(e);return t.map((function(e,r){return{target:e,id:r,total:t.length,transforms:{list:Pt(e)}}}))}function Gt(e,t){var r=At(t);if(/^spring/.test(r.easing)&&(r.duration=ct(r.easing)),lt.arr(e)){var n=e.length;2===n&&!lt.obj(e[0])?e={value:e}:lt.fnc(t.duration)||(r.duration=t.duration/n)}var o=lt.arr(e)?e:[e];return o.map((function(e,r){var n=lt.obj(e)&&!lt.pth(e)?e:{value:e};return lt.und(n.delay)&&(n.delay=r?0:t.delay),lt.und(n.endDelay)&&(n.endDelay=r===o.length-1?t.endDelay:0),n})).map((function(e){return It(e,r)}))}function Qt(e,t){var r=[],n=t.keyframes;for(var o in n&&(t=It(function(e){for(var t=mt(yt(e.map((function(e){return Object.keys(e)}))),(function(e){return lt.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),r={},n=function(n){var o=t[n];r[o]=e.map((function(e){var t={};for(var r in e)lt.key(r)?r==o&&(t.value=e[r]):t[r]=e[r];return t}))},o=0;o<t.length;o++)n(o);return r}(n),t)),t)lt.key(o)&&r.push({name:o,tweens:Gt(t[o],e)});return r}function zt(e,t){var r;return e.tweens.map((function(n){var o=function(e,t){var r={};for(var n in e){var o=Tt(e[n],t);lt.arr(o)&&1===(o=o.map((function(e){return Tt(e,t)}))).length&&(o=o[0]),r[n]=o}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}(n,t),i=o.value,a=lt.arr(i)?i[1]:i,s=Ct(a),l=Lt(t.target,e.name,s,t),u=r?r.to.original:l,c=lt.arr(i)?i[0]:u,d=Ct(c)||Ct(l),p=s||d;return lt.und(a)&&(a=u),o.from=Wt(c,p),o.to=Wt(Bt(a,c),p),o.start=r?r.end:0,o.end=o.start+o.delay+o.duration+o.endDelay,o.easing=gt(o.easing,o.duration),o.isPath=lt.pth(i),o.isColor=lt.col(o.from.original),o.isColor&&(o.round=1),r=o,o}))}var Yt={css:function(e,t,r){if(e.$$)return`${t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${wx.transformRpx(" "+r)};`;e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,n,o){if(n.list.set(t,r),t===n.last||o){var i="";if(n.list.forEach((function(e,t){i+=t+"("+e+") "})),e.$$)return`transform:${wx.transformRpx(" "+i)};`;e.style.transform=i}return""}};function Kt(e,t){Ht(e).forEach((function(e){for(var r in t){var n=Tt(t[r],e),o=e.target,i=Ct(n),a=Lt(o,r,i,e),s=Bt(kt(n,i||Ct(a)),a),l=Rt(o,r);Yt[l](o,r,s,e.transforms,!0)}}))}function Vt(e,t){return mt(yt(e.map((function(e){return t.map((function(t){return function(e,t){var r=Rt(e.target,t.name);if(r){var n=zt(t,e),o=n[n.length-1];return{type:r,property:t.name,animatable:e,tweens:n,duration:o.end,delay:n[0].delay,endDelay:o.endDelay}}}(e,t)}))}))),(function(e){return!lt.und(e)}))}function Jt(e,t){var r=e.length,n=function(e){return e.timelineOffset?e.timelineOffset:0},o={};return o.duration=r?Math.max.apply(Math,e.map((function(e){return n(e)+e.duration}))):t.duration,o.delay=r?Math.min.apply(Math,e.map((function(e){return n(e)+e.delay}))):t.delay,o.endDelay=r?o.duration-Math.max.apply(Math,e.map((function(e){return n(e)+e.duration-e.endDelay}))):t.endDelay,o}var Xt=0;var Zt,er=[],tr=function(){function e(){Zt=requestAnimationFrame(t)}function t(t){var r=er.length;if(r){for(var n=0;n<r;){var o=er[n];if(o.paused){var i=er.indexOf(o);i>-1&&(er.splice(i,1),r=er.length)}else o.tick(t);n++}e()}else Zt=cancelAnimationFrame(Zt)}return e}();function rr(e){void 0===e&&(e={});var t,r=0,n=0,o=0,i=0,a=null;function s(e){var t=window.Promise&&new Promise((function(e){return a=e}));return e.finished=t,t}var l=function(e){var t=Et(tt,e),r=Et(rt,e),n=Qt(r,e),o=Ht(e.targets),i=Vt(o,n),a=Jt(i,r),s=Xt;return Xt++,It(t,{id:s,children:[],animatables:o,animations:i,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}(e);s(l);function u(){var e=l.direction;"alternate"!==e&&(l.direction="normal"!==e?"normal":"reverse"),l.reversed=!l.reversed,t.forEach((function(e){return e.reversed=l.reversed}))}function c(e){return l.reversed?l.duration-e:e}function d(){r=0,n=c(l.currentTime)*(1/rr.speed)}function p(e,t){t&&t.seek(e-t.timelineOffset)}function f(e){for(var t=0,r=l.animations,n=r.length,o=[];t<n;){var i=r[t],a=i.animatable,s=i.tweens,u=s.length-1,c=s[u];u&&(c=mt(s,(function(t){return e<t.end}))[0]||c);for(var d=it(e-c.start-c.delay,0,c.duration)/c.duration,p=isNaN(d)?1:c.easing(d),f=c.to.strings,h=c.round,_=[],g=c.to.numbers.length,v=void 0,m=0;m<g;m++){var y=void 0,b=c.to.numbers[m],w=c.from.numbers[m]||0;y=c.isPath?$t(c.value,p*b):w+p*(b-w),h&&(c.isColor&&m>2||(y=Math.round(y*h)/h)),_.push(y)}var A=f.length;if(A){v=f[0];for(var I=0;I<A;I++){f[I];var S=f[I+1],C=_[I];isNaN(C)||(v+=S?C+S:C+" ")}}else v=_[0];var T=Yt[i.type](a.target,i.property,v,a.transforms);o.push(T),i.currentValue=v,t++}1===l.animatables.length&&l.animatables[0].target.$$&&l.animatables[0].target.setNodeStyle(o.join(" "),E)}function h(e){l[e]&&!l.passThrough&&l[e](l)}function _(e){var d=l.duration,_=l.delay,g=d-l.endDelay,v=c(e);l.progress=it(v/d*100,0,100),l.reversePlayback=v<l.currentTime,t&&function(e){if(l.reversePlayback)for(var r=i;r--;)p(e,t[r]);else for(var n=0;n<i;n++)p(e,t[n])}(v),!l.began&&l.currentTime>0&&(l.began=!0,h("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,h("loopBegin")),v<=_&&0!==l.currentTime&&f(0),(v>=g&&l.currentTime!==d||!d)&&f(d),v>_&&v<g?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,h("changeBegin")),h("change"),f(v)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,h("changeComplete")),l.currentTime=it(v,0,d),l.began&&h("update"),e>=d&&(n=0,l.remaining&&!0!==l.remaining&&l.remaining--,l.remaining?(r=o,h("loopComplete"),l.loopBegan=!1,"alternate"===l.direction&&u()):(l.paused=!0,l.completed||(l.completed=!0,h("loopComplete"),h("complete"),!l.passThrough&&"Promise"in window&&(a(),s(l)))))}return l.reset=function(){var e=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed="reverse"===e,l.remaining=l.loop,t=l.children;for(var r=i=t.length;r--;)l.children[r].reset();(l.reversed&&!0!==l.loop||"alternate"===e&&1===l.loop)&&l.remaining++,f(l.reversed?l.duration:0)},l.set=function(e,t){return Kt(e,t),l},l.tick=function(e){o=e,r||(r=o),_((o+(n-r))*rr.speed)},l.seek=function(e){_(c(e))},l.pause=function(){l.paused=!0,d()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,er.push(l),d(),Zt||tr())},l.reverse=function(){u(),d()},l.restart=function(){l.reset(),l.play()},l.reset(),l.autoplay&&l.play(),l}function nr(e,t){for(var r=t.length;r--;)wt(e,t[r].animatable.target)&&t.splice(r,1)}rr.version="3.1.0",rr.speed=1,rr.running=er,rr.remove=function(e){for(var t=qt(e),r=er.length;r--;){var n=er[r],o=n.animations,i=n.children;nr(t,o);for(var a=i.length;a--;){var s=i[a],l=s.animations;nr(t,l),l.length||s.children.length||i.splice(a,1)}o.length||i.length||n.pause()}},rr.get=Lt,rr.set=Kt,rr.convertPx=xt,rr.path=function(e,t){var r=lt.str(e)?vt(e)[0]:e,n=t||100;return function(e){return{property:e,el:r,svg:Ut(r),totalLength:jt(r)*(n/100)}}},rr.setDashoffset=function(e){var t=jt(e);return e.setAttribute("stroke-dasharray",t),t},rr.stagger=function(e,t){void 0===t&&(t={});var r=t.direction||"normal",n=t.easing?gt(t.easing):null,o=t.grid,i=t.axis,a=t.from||0,s="first"===a,l="center"===a,u="last"===a,c=lt.arr(e),d=c?parseFloat(e[0]):parseFloat(e),p=c?parseFloat(e[1]):0,f=Ct(c?e[1]:e)||0,h=t.start||0+(c?d:0),_=[],g=0;return function(e,t,v){if(s&&(a=0),l&&(a=(v-1)/2),u&&(a=v-1),!_.length){for(var m=0;m<v;m++){if(o){var y=l?(o[0]-1)/2:a%o[0],b=l?(o[1]-1)/2:Math.floor(a/o[0]),w=y-m%o[0],A=b-Math.floor(m/o[0]),E=Math.sqrt(w*w+A*A);"x"===i&&(E=-w),"y"===i&&(E=-A),_.push(E)}else _.push(Math.abs(a-m));g=Math.max.apply(Math,_)}n&&(_=_.map((function(e){return n(e/g)*g}))),"reverse"===r&&(_=_.map((function(e){return i?e<0?-1*e:-e:Math.abs(g-e)})))}return h+(c?(p-d)/g:d)*(Math.round(100*_[t])/100)+f}},rr.timeline=function(e){void 0===e&&(e={});var t=rr(e);return t.duration=0,t.add=function(r,n){var o=er.indexOf(t),i=t.children;function a(e){e.passThrough=!0}o>-1&&er.splice(o,1);for(var s=0;s<i.length;s++)a(i[s]);var l=It(r,Et(rt,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=lt.und(n)?u:Bt(n,u),a(t),t.seek(l.timelineOffset);var c=rr(l);a(c),i.push(c);var d=Jt(i,e);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},rr.easing=gt,rr.penner=_t,rr.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var or=rr,ir=["height","left","matrix","matrix3d","opacity","right","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","top","translate","translate3d","translateX","translateY","translateZ","width","backgroundColor","bottom","borderRadius"],ar=["easeInElastic","easeOutElastic","easeInOutElastic","easeSpringElastic"],sr=Object.assign,lr=Object.keys,ur=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","delay","duration","offset","easing"],cr=["linear","ease","ease-in","ease-out","ease-in-out","cubic-bezier","steps"],dr=(e,t)=>(e="undefined"!=typeof __webViewSDK__?__webViewSDK__.predefinedColor[e]||e:__skylineSDK__.predefinedColor[e]||e,t?[e,e]:e),pr=(e,t)=>{var r=e.length,n=0;return e.map(((e,o)=>{var i,a={};i="offset"in e?e.offset:1===r?1:o/(r-1);var s=n===i;return lr(e).forEach((t=>{ur.indexOf(t)>-1||("transform"!==t?a[t]=dr(e[t],s):sr(a,((e,t)=>{if("none"===(e=e.toLowerCase().trim()))return{};for(var r,n={},o=ur.map((e=>e.toLowerCase())),i={scale3d:"AAA",translate:"Aa",translate3d:"AAA",rotate3d:"AAAA",matrix3d:"AAAAAA",matrix:"AAAAAAAAAAAAAAAA"},a=["rotate3d","matrix","matrix3d"],s=/\s*(\w+)\(([^)]*)\)/g,l=0;r=s.exec(e);){if(r.index!==l)return{};l=r.index+r[0].length;var u=r[1],c=r[2].split(",");if(o.indexOf(u)>-1)n[u.replace(/(x|y|z)$/,(e=>e.toUpperCase()))]=dr(c.join(" "),t);else{if(!(lr(i).indexOf(u)>-1))return{};var d=i[u];if(c.length>d.length)return{};for(var p=d.length-1;p>=0;p--){var f=d[p];if("a"!==f||c[p]){if("A"===f&&!c[p])return{};-1===a.indexOf(u)&&(n[u.replace("3d","")+String.fromCharCode(88+p)]=dr(c[p].trim(),t))}}}}return n})(e[t],s)))})),s?a.duration=0:(a.duration=(i-n)*t,n=i),a}))},fr=e=>{for(var t=0;t<cr.length&&0!==e.indexOf(cr[t]);t++);if(t===cr.length)return"linear";switch(e){case"ease":return"cubicBezier(0.25, 0.1, 0.25, 1)";case"ease-in":return"cubicBezier(0.42, 0, 1, 1)";case"ease-out":return"cubicBezier(0, 0, 0.58, 1)";case"ease-in-out":return"cubicBezier(0.42, 0, 0.58, 1)";default:return e.replace(/^cubic-bezier/,"cubicBezier")}};class hr{constructor(e,t){this._nativeSupported="function"==typeof HTMLElement.prototype.animate;var r=e.keyframeOptions,n=this.direction=r.direction;if(this.timeline=t,this._nativeSupported){var o=((e,t)=>{var r=t.easing;return delete t.easing,e.map((e=>(e.easing=r,e)))})(e.keyframeSet,r);this._inst=e.element.$$.animate(o,sr(r,{fill:"both"})),this._inst.pause()}else this._inst=or({targets:e.element,keyframes:pr(e.keyframeSet,r.duration),autoplay:!1,loop:r.iterations===1/0||r.iterations,easing:fr(r.easing),direction:"normal",delay:"reverse"===n?r.endDelay:r.delay,endDelay:"reverse"===n?r.delay:r.endDelay});t._driven(this)}set currentTime(e){if(!isNaN(e)){var t=this._inst;this._nativeSupported?t.currentTime=e:"reverse"===this.direction?t.seek(t.duration-e):t.seek(e)}}cancel(){this._nativeSupported?this._inst.cancel():this._inst.reset(),this.timeline._destroy(),this._inst=null}}class _r{constructor(e,t){if(t.scrollSource){if(this._scrollNode=window.__DOMTree__.shadowRoot.querySelector(t.scrollSource),this._scrollNode||(this._scrollNode=e&&e.querySelector(t.scrollSource)),!this._scrollNode)throw new Error(`Cannot find scroll source by ${t.scrollSource} selector.`)}else this._scrollNode=window.__DOMTree__;this.orientation=t.orientation||"vertical",this.startScrollOffset=t.startScrollOffset,this.endScrollOffset=t.endScrollOffset,this.timeRange=t.timeRange,this.fill=t.fill||"both",this._scroll=this._scroll.bind(this)}_calcCurrentTime(e,t){var r=this.startScrollOffset,n=this.endScrollOffset,o=this.fill,i=this.timeRange,a=e.scrollTop,s=e.scrollHeight-t.$$.offsetHeight;return"horizontal"===this.orientation&&(a=e.scrollLeft,s=e.scrollWidth-t.$$.offsetWidth),a<r?"none"===o||"forwards"===o?NaN:0:a>=n?n<s&&("none"===o||"backwards"===o)?NaN:i:r>=n?NaN:(a-r)/(n-r)*i}_scroll(){var e=this._calcCurrentTime(this._scrollNode===window.__DOMTree__?window.__DOMTree__.$$:this._scrollNode.getScrollPosition(),this._scrollNode);this._animation.currentTime=e}_driven(e){this._animation=e,this._scrollNode===window.__DOMTree__?document.addEventListener("scroll",this._scroll,{capture:!0,passive:!0}):this._scrollNode.$$.addEventListener("scroll",this._scroll,{capture:!0,passive:!0}),this._scroll()}_destroy(){this._scrollNode===window.__DOMTree__?document.removeEventListener("scroll",this._scroll,{capture:!0,passive:!0}):this._scrollNode.$$.removeEventListener("scroll",this._scroll,{capture:!0,passive:!0})}}var gr=(e,t,r,n,o)=>{var i={element:t,keyframeSet:r.map((e=>{var t={};return Object.entries(e).forEach((([e,r])=>{t[e]=Tr(r)})),t})),keyframeOptions:{delay:n.delay||0,direction:n.direction||"normal",duration:n.duration||0,easing:n.easing||"linear",endDelay:n.endDelay||0,iterations:1}},a=new _r(e,o);t.__scrollAnimations=t.__scrollAnimations||[],t.__scrollAnimations.push(new hr(i,a))},vr=(e,t)=>{for(var r=[],n=0;n<e.length;++n)r.push(Object.assign({},e[n]));r[0].offset=0,r[r.length-1].offset=1;for(var o=function(e){r[e].offset=function(e,t){if("number"==typeof t[e].offset)return t[e].offset;for(var r=e+1;r<t.length;++r)if(t[r].offset)return(t[r].offset-t[e-1].offset)/(r-e+1)+t[e-1].offset;return 0}(e,r),r[e].duration=0===e?0:(r[e].offset-r[e-1].offset)*t,ar.some((t=>r[e].ease&&r[e].ease.startsWith(t)))&&(r[e].type="animeJS")},i=0;i<r.length;++i)o(i);return r},mr=c(),yr={},br={},wr=0,Ar=1,Er=2,Ir=function(e){return Object.keys(e).filter((t=>{var r=t.toLocaleLowerCase();return!((r.includes("transform")||r.includes("transition"))&&""===e[t]||""===t.trim()||void 0===e[t]||""===e[t]||!isNaN(parseInt(t,10)))})).map((t=>`${t.replace(/([A-Z]{1})/g,(e=>`-${e.toLowerCase()}`))}:${e[t]}`)).join(";")},Sr=(e,t)=>{var{nodeId:r,webviewId:n,options:o,selector:i,reqId:a,hasCallback:s,fromWxs:l}=e,u=Os(r,n);if(u){var c=u.shadowRoot,d=t||c.querySelectorAll(i);if(t){var p=()=>{var e=Ts.getByNode(t);if(l){var r=e.clearAnimationCbMap[a];"function"==typeof r&&(delete e.clearAnimationCbMap[a],mr.safeCallback("Clear Animation",r,null,[]))}else ge(v.CLEAR_ANIMATION_COMPLETE,{reqId:a},e.viewId)};if((e=>{(e.__scrollAnimations||[]).forEach((e=>{e.cancel()})),e.__scrollAnimations=[]})(d),!o||"function"==typeof o||!d.__styleObj)return d.__animeOptions&&(d.__animeOptions.forEach((e=>"function"==typeof e.reset&&e.reset())),d.__animeOptions=[]),d.setNodeStyle("",E),Ke(d,E),d.__styleObj=null,d.__animateStatus=wr,d.__animationPendingQueue=[],void p();var f=d.__styleObj.transform.split(" ");for(var h of Object.keys(o))if(o[h])if(d.__styleObj["backgroundColor"===h?"background-color":h])delete d.__styleObj["backgroundColor"===h?"background-color":h];else for(var _=0;_<f.length;++_)f[_].indexOf(h)>=0&&f.splice(_,1);d.__styleObj.transform=f.join(" "),d.__styleObj["-webkit-transform"]=f.join(" "),d.__styleObj.transition="unset",d.__styleObj.transitionProperty="unset",d.__styleObj["-webkit-transition"]="unset",d.__styleObj["-webkit-transition-property"]="unset";var g=e=>{d.setNodeStyle(wx.transformRpx(e,!0),E)};g(Ir(d.__styleObj)),Ye(d,E,g),d.__animateStatus=wr,--br[a],0===br[a]&&s&&p()}else{br[a]=d.length;for(var m=0;m<d.length;++m)Sr(e,d[m])}}},Cr=(e,t)=>{var{nodeId:r,webviewId:n,selector:o}=e,i=Os(r,n);if(i){var a=i.shadowRoot,s=t||a.querySelectorAll(o);if(t)s.__animationPendingQueue&&s.__animationPendingQueue.length>0&&(s.__animateStatus=Er,setTimeout((()=>{Or(s.__animationPendingQueue.shift(),s,!0)}),32));else for(var l=0;l<s.length;++l)Cr(JSON.parse(JSON.stringify(e)),s[l])}},Tr=e=>("string"==typeof e?e=wx.transformRpx(e,!0):"object"==typeof e&&"string"==typeof e.value?e.value=wx.transformRpx(e.value,!0):Array.isArray(e)&&e.map((e=>{if("string"==typeof e.value)e.value=wx.transformRpx(e.value,!0);else if("string"==typeof e)return wx.transformRpx(e,!0);return e})),e),Or=(e,t,r)=>{wx.nextTick((()=>{var{nodeId:n,webviewId:o,options:i,selector:a,reqId:s,hasCallback:l,type:u,isLastAnimation:c,fromWxs:d}=e,p=Os(n,o);if(p){var f=p.shadowRoot,h=t||f.querySelectorAll(a);if(t){if(h.__animateStatus===Ar||h.__animateStatus===Er&&!r)return h.__animationPendingQueue||(h.__animationPendingQueue=[]),void h.__animationPendingQueue.push(JSON.parse(JSON.stringify(e)));h.__hasCallback=l,h.__reqId=s,h.__args=JSON.stringify(e);var _=["height","left","matrix","matrix3d","opacity","right","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","top","translate","translate3d","translateX","translateY","translateZ","width","backgroundColor","bottom"],g=["opacity","backgroundColor","width","height","left","top","bottom"],m=["rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skewX","skewY","translateX","translateY","translateZ"],y="animeJS"===u,b=(r,n=!0)=>{if(h.__animateStatus===Ar){if(--yr[h.__reqId],h.__animationPendingQueue&&h.__animationPendingQueue.length>0&&!h.__hasCallback?(h.__animateStatus=Er,Or(h.__animationPendingQueue.shift(),h,!0)):h.__animateStatus=wr,"function"==typeof r)h.__styleObj.transition="unset",h.__styleObj.transitionProperty="unset",h.__styleObj["-webkit-transition"]="unset",h.__styleObj["-webkit-transition-property"]="unset",r(Ir(h.__styleObj));if(0===yr[h.__reqId]&&h.__hasCallback&&n){var o=Ts.getByNode(t);if(d){var i=o.applyAnimationCbMap[h.__reqId];"function"==typeof i&&(delete o.applyAnimationCbMap[h.__reqId],mr.safeCallback("Animation",i,null,[])),Cr(e)}else ge(v.ANIMATION_TRANSITION_END,{reqId:h.__reqId,args:h.__args},o.viewId)}}},w=[];for(var A of Object.keys(i))_.indexOf(A)>=0&&(g.indexOf(A)>=0?w.push({type:"style",args:["backgroundColor"===A?"background-color":A,i[A]]}):m.indexOf(A)>=0?w.push({type:A,args:[i[A]]}):w.push({type:A,args:i[A]}));var I={transition:{delay:i.delay||0,duration:i.duration||0,timingFunction:i.ease||"linear"},transformOrigin:i.transformOrigin||"50% 50% 0"},S={option:I,animates:w},{transition:C,transitionProperty:T,transform:O,transformOrigin:x,style:N}=wx.animationToStyle(S),R=h.__styleObj?Object.assign({},h.__styleObj,{transition:C,transform:O,transitionProperty:T,transformOrigin:x}):{transition:C,transform:O,transitionProperty:T,transformOrigin:x};for(var P of(R["-webkit-transition"]=R.transition,R["-webkit-transform"]=R.transform,R["-webkit-transition-property"]=R.transitionProperty,R["-webkit-transform-origin"]=R.transformOrigin,Object.keys(N||{})))R[P]=N[P];if(h.__styleObj&&R.transform===h.__styleObj.transform){var D=!0;for(var L of Object.keys(R))g.indexOf(L)>=0&&h.__styleObj[L]!==R[L]&&(D=!1);if(D)return void setTimeout((()=>{h.__animationPendingQueue&&h.__animationPendingQueue.length>0&&Or(h.__animationPendingQueue.shift(),h,!0)}),I.duration)}if(0===I.transition.duration?(R.transition="unset",R.transitionProperty="unset",R["-webkit-transition"]="unset",R["-webkit-transition-property"]="unset"):h.__animateStatus=Ar,h.__styleObj=R,y){i.targets=h,i.ease&&(i.easing=i.ease,delete i.ease),(e=>{Object.keys(e).forEach((t=>{ir.includes(t)&&(e[t]=Tr(e[t]))}))})(i),h.__animateStatus=Ar,h.__banned&&Ze(h);var B=i.complete;i.complete=(...e)=>{b(void 0,c),"function"==typeof B&&B(...e)};var k=or(i);h.__animeOptions||(h.__animeOptions=[]),h.__animeOptions.push(k)}else{var M=Ir(R),F=e=>{var t=()=>{h.setNodeStyle(wx.transformRpx(e,!0),E)};t(),Ye(h,E,t)};0===I.transition.duration?F(M):setTimeout((()=>{F(M)}),32),h.__banned&&Ze(h),h.__animationListener||(h.addListener("transitionend",(()=>{b(F)})),h.__animationListener=!0),0===I.transition.duration&&(h.__animationPendingQueue&&h.__animationPendingQueue.length>0?(h.__animateStatus=Er,Or(h.__animationPendingQueue.shift(),h,!0)):h.__animateStatus=wr)}}else{yr[s]=h.length;for(var j=0;j<h.length;++j)Or(JSON.parse(JSON.stringify(e)),h[j])}}}))},xr=(e,t,r)=>{var n=e.$$,o={},i=null,a=new Set,s=e=>{a.add(e),e((()=>{a.delete(e),0===a.size&&"function"==typeof i&&i(o)}))};if(t.id&&(o.id=e.id||""),t.dataset&&(o.dataset=e.dataset||{}),t.mark&&(o.mark=e.collectMarks()||{}),(t.rect||t.size)&&s((e=>{((e,t)=>{"webview"===p()?t(e.getBoundingClientRect()):e.getBoundingClientRect((e=>{t(e)}))})(n,(r=>{t.rect&&(o.left=r.left,o.right=r.right,o.top=r.top,o.bottom=r.bottom),t.size&&(o.width=r.width,o.height=r.height),e()}))})),t.properties&&t.properties.forEach((t=>{var r=t.replace(/-([a-z])/g,((e,t)=>t.toUpperCase()));mr.Component.hasPublicProperty(e,r)&&(o[r]=e[r])})),t.scrollOffset)if("function"==typeof e.hasBehavior&&e.hasBehavior("wx-positioning-container")){var l=e.getScrollPosition();o.scrollLeft=l.scrollLeft,o.scrollTop=l.scrollTop,o.scrollWidth=l.scrollWidth,o.scrollHeight=l.scrollHeight}else o.scrollLeft=0,o.scrollTop=0,o.scrollWidth=0,o.scrollHeight=0;if(t.computedStyle&&t.computedStyle.length){var u="webview"!==p()?e.__backendContext:null;s((e=>{((e,t,r)=>{"webview"===p()?r(window.getComputedStyle(t)):"function"==typeof(null==e?void 0:e.getComputedStyle)?e.getComputedStyle(t,(e=>{r(e||{})})):r({})})(u,n,(r=>{for(var n=0,i=t.computedStyle.length;n<i;n++){var a=t.computedStyle[n];a&&void 0!==r[a]&&(o[a]=r[a])}e()}))}))}if(t.context&&(o.contextIs=e.is,o.contextId="function"==typeof e.getContextId&&e.getContextId(),o.contextCanvasId=e.canvasId||"","xr-frame"===p()&&(o.__context=n.__xrElement)),t.node&&(o.nodeIs=e.is,o.nodeId="function"==typeof e.getContextId&&e.getContextId(),o.nodeCanvasId=e.canvasId||"",o.nodeCanvasType=e.type||"",o.nodeNodeId=e.getNodeId()),0!==a.size){if("function"!=typeof r)throw new Error("Framework Error: getNetInfo called asynchronously without a callback");i=r}else{if("function"!=typeof r)return o;r(o)}},Nr=(e,t)=>"webview"===p()?xr(e,t):new Promise((r=>{xr(e,t,(e=>{r(e)}))})),Rr=function(){var e=He()((function*(e,t){var r=[],{pluginId:n,queue:o}=e;return o.forEach((e=>{var o=e.component,i=e.selector,a=e.single,s=e.fields,l=null;if(0===o)l=((e,t)=>{var r={},n=e=>"webview"===p()?document.documentElement[e]||document.body[e]:t.root.getBackendContext()[e];return e.id&&(r.id=""),e.dataset&&(r.dataset={}),e.mark&&(r.mark={}),e.rect&&(r.left=0,r.right=0,r.top=0,r.bottom=0),e.size&&(r.width=n("clientWidth"),r.height=n("clientHeight")),e.scrollOffset&&(r.scrollLeft=n("scrollLeft"),r.scrollTop=n("scrollTop"),r.scrollWidth=n("scrollWidth"),r.scrollHeight=n("scrollHeight")),r})(s,t);else{var u=t.nodeId.getNodeById(o),c=!1;if(u?(mr.Component.getComponentOptions(u).writeOnly&&(c=!0),u=u.shadowRoot):n||(u=window.__DOMTree__?window.__DOMTree__.shadowRoot:null),a){var d=u&&!c?u.querySelector(i):null;l=d?Nr(d,s):null}else{var f=u&&!c?u.querySelectorAll(i):[];l=[];for(var h=0;h<f.length;h++)l.push(Nr(f[h],s));l=Promise.all(l)}}r.push(l)})),Promise.all(r)}));return function(t,r){return e.apply(this,arguments)}}(),Pr=c(),Dr={},Lr={},Br={},kr=function(){var e=He()((function*(e){return yield new Promise((t=>{"webview"===p()?t(e.$$.getBoundingClientRect()):e.$$.getBoundingClientRect((e=>t(e)))}))}));return function(t){return e.apply(this,arguments)}}(),Mr=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),Fr=(e,t)=>{var r={left:e.left<t.left?t.left:e.left,top:e.top<t.top?t.top:e.top,right:e.right>t.right?t.right:e.right,bottom:e.bottom>t.bottom?t.bottom:e.bottom,width:0,height:0};return r.right>r.left?r.width=r.right-r.left:r.right=r.left=r.bottom=r.top=0,r.bottom>r.top?r.height=r.bottom-r.top:r.right=r.left=r.bottom=r.top=0,r},jr=function(){var e=He()((function*(e){for(var t="webview"===p()?document.documentElement.clientWidth:m.screenWidth||500,r="webview"===p()?document.documentElement.clientHeight:m.screenHeight||1e3,n=null,o=0;o<e.length;o++){var{node:i,margins:a}=e[o],s=i?yield kr(i):{left:0,top:0,right:t,bottom:r,width:t,height:r},l={left:s.left-a.left,top:s.top-a.top,right:s.right+a.right,bottom:s.bottom+a.bottom};n=n?Fr(n,l):l}return n}));return function(t){return e.apply(this,arguments)}}(),Ur=function(){var e=He()((function*(e){var{targetNode:t,relatives:r,thresholds:n,minWidthOrHeight:o,cb:i,currentRatio:a}=e,s=yield jr(r),l=Mr(yield kr(t));l.right-l.left<o&&(l.right=l.left+o,l.width=o),l.bottom-l.top<o&&(l.bottom=l.top+o,l.height=o);var u=Fr(s,l),c=l.width*l.height,d=c?u.width*u.height/c:0;e.currentRatio=d;var p=void 0===a;d!==a&&n.forEach((e=>{if(p)return!1;(d<=e&&a>=e||d>=e&&a<=e)&&(p=!0)})),p&&i.call(t,{id:t.id,dataset:t.dataset,time:Date.now(),boundingClientRect:l,intersectionRatio:d,intersectionRect:Mr(u),relativeRect:s})}));return function(t){return e.apply(this,arguments)}}(),$r=function(){var e=He()((function*(){for(var e of Object.keys(Dr))Dr[e]&&(yield Ur(Dr[e]))}));return function(){return e.apply(this,arguments)}}(),Wr=e=>({left:(e=e||{}).left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}),qr=(e,t,r,n,o,i)=>{var a=Y();if(!e.length||!t.length)return a;var s=e.length;return Br[a]=s,e.forEach(((e,l)=>{var u=a+"#"+l,c={targetNode:e,relatives:t,thresholds:r,currentRatio:n,minWidthOrHeight:o,cb:i};if("webview"===p()){var d=Pr.Observer.create((e=>{"attached"===e.status?(Dr[u]=c,requestAnimationFrame((()=>{Ur(c)}))):"detached"===e.status&&(delete Dr[u],d.disconnect(),delete Lr[u],--s||delete Br[a])}));Lr[u]=d,d.observe(e,{attachStatus:!0}),Pr.Element.isAttached(e)&&(Dr[u]=c,requestAnimationFrame((()=>{Ur(c)})))}else if("skyline"===p()){var f=new __skylineEngine__.RuntimeCore.intersectionObserver(function(){var e=He()((function*(e){var{targetNode:t}=c,r=yield jr(c.relatives);i({id:t.id,dataset:t.dataset,time:Date.now(),boundingClientRect:e[0].boundingClientRect,intersectionRatio:e[0].intersectionRatio,intersectionRect:Mr(e[0].intersectionRect),relativeRect:r})}));return function(t){return e.apply(this,arguments)}}(),{rootMargin:c.relatives,thresholds:c.thresholds});Lr[u]=f,f.observe(e.$$)}})),a},Hr=!1,Gr=()=>{Hr||(Hr=!0,requestAnimationFrame((()=>{Hr=!1,$r()})))};"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.addEventListener&&"webview"===p()&&(wx.onPageReRender((()=>{Gr()})),window.addEventListener("scroll",(()=>{Gr()}),{capture:!0,passive:!0}));var Qr=(e,t,r)=>{if("addIntersectionObserver"===e.type){var n=null;if(e.nodeId){var o=t.nodeId.getNodeById(e.nodeId);if(!o)return;n=o.shadowRoot}else e.pluginId||(n=window.__DOMTree__.shadowRoot);if(!n)return;var i=((e,t,r,n,o)=>{var i=null;if((n=n||{}).observeAll)i=e.querySelectorAll(t);else{var a=e.querySelector(t);i=a?[a]:[]}i.length||console.warn('For developer:Node "'+t+'" is not found. Intersection observer will not trigger.');var s=[];return r.forEach((t=>{var{selector:r,margins:n}=t,o=null==r?null:e.querySelector(r);o||null==r?s.push({node:o,margins:Wr(n)}):console.warn('For developer:Node "'+r+'" is not found. The relative node for intersection observer will be ignored.')})),s.length||console.warn("For developer:Intersection observer will be ignored because no relative nodes are found."),qr(i,s,n.thresholds||[0],n.initialRatio||0,n.minWidthOrHeight||0,o)})(n,e.targetSelector,e.relativeInfo,e.options,(e=>{r({info:e})}));return{observerId:i}}if("removeIntersectionObserver"===e.type)return(e=>{var t=Br[e];delete Br[e];for(var r=0;r<t;r++){var n=e+"#"+r,o=Lr[n];if(!o)break;delete Dr[n],o.disconnect(),delete Lr[n]}})(e.observerId),{reqEnd:!0}},zr=1,Yr={},Kr=(e,t)=>{var r=(e=>{if("object"!=typeof e)return"";var t="";return["minWidth","maxWidth","width","minHeight","maxHeight","height"].forEach((r=>{if(void 0!==e[r]){var n=Number(e[r]);n>=0||(n="");var o=r.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()));t&&(t+=" and "),t+=`(${o}: ${n}px)`}})),["orientation"].forEach((r=>{if(void 0!==e[r]){var n=/^[-_a-z0-9]+$/i.test(e[r])?e[r]:"",o=r.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()));t&&(t+=" and "),t+=`(${o}: ${n})`}})),t})(e),n=window.matchMedia(r),o=zr++,i=e=>{t({matches:e.matches})};return Yr[o]={observer:n,listener:i},n.addListener(i),t({matches:n.matches}),o},Vr=(e,t)=>"addMediaQueryObserver"===e.type?{observerId:Kr(e.mediaQueryCond,(e=>{t({info:e})}))}:"removeMediaQueryObserver"===e.type?((e=>{var{observer:t,listener:r}=Yr[e];t.removeListener(r),delete Yr[e]})(e.observerId),{reqEnd:!0}):void 0;function Jr(e){var{hasCallback:t,reqId:r,nodeId:n,pageId:o,selector:i,updaterId:a,userConfig:l}=e[0],u=Ts.get(o),c=u.nodeId.getNodeById(n);if(c){var p=d(),f=p.proxyCreateAnimatedStyle(o,a,l),{mapperId:h}=f,_=c.shadowRoot.querySelectorAll(i),g=0;_.forEach((e=>{e.__virtual?s.warn("[WABaseLib.Critical] applyAnimatedStyle can not be used on virtual component"):(e.$$.addAnimatedStyle(f),g++)})),0===g&&(p.proxyStopMapper(o,h),s.info(`[WABaseLib.Critical] applyAnimatedStyle can not find valid element, stopMapper(${h})`)),t&&ge(v.APPLY_NODE_ANIMATED_STYLE_END,{reqId:r,styleId:h},u.viewId)}}var Xr=c();class Zr{constructor(e,t,r){this._treeManager=e,this._arr=t,this._depth=0,this._startCb=r}_consumeHead(){return this._arr.shift()}nextStepType(){return this._arr[0][0]}nextStep(){for(;this._arr[0][0]===v.FLOW_DEPTH;)this._startCb(this._treeManager);if(this._arr[0][0]===v.FLOW_REPEAT){var e=this._arr[0][2];return--this._arr[0][1]||this._consumeHead(),[e]}return this._consumeHead()}nextStepIf(e){for(;this._arr[0][0]===v.FLOW_DEPTH;)this._startCb(this._treeManager);return this._arr[0][0]===e?this._consumeHead():null}expectStart(){var e=this._consumeHead();if(this._depth++,e[0]!==v.FLOW_DEPTH||e[1]!==this._depth)throw new Error(`Framework inner error (expect START descriptor with depth ${this._depth} but get ${w(e[0])})`);return e[2]}expectEnd(){for(;this._arr[0][0]===v.FLOW_DEPTH&&this._arr[0][1]!==this._depth-1;)this._startCb(this._treeManager);var e=this._consumeHead();if(this._depth--,e[0]!==v.FLOW_DEPTH||e[1]!==this._depth)throw new Error(`Framework inner error (expect END descriptor with depth ${this._depth} but get ${w(e[0])})`)}skipToEnd(){for(;this._arr[0];)if(this._arr[0][0]!==v.FLOW_DEPTH)this._consumeHead();else{if(this._arr[0][1]===this._depth-1)break;this._startCb(this._treeManager)}}getQueueLength(){return this._arr.length}getDepth(){return this._depth}}class en{constructor(e,t){var r=this;this._viewId=e,this._treeManager=t,this._depth=0,this._curWinSize=0,this._setDataCallbackInc=1,this._pendingSetDataCallbacks=[],this._setDataCallbackMap={},this._received=[],this._cache=[],this._blocked=[],this._isBlocked=!0,this._fetchingViewInfoCallbacks=[];var n=(e,t)=>{if(this._received.push([t].concat(e)),t===v.FLOW_DEPTH&&(this._depth=e[0],0===this._depth)){var r=this._received;this._received=[],this._isBlocked?this._blocked.push(r):(this.iterator=new Zr(this._treeManager,r,en._startCb),en._startCb(this._treeManager),this.onFinished())}},o=function(){if("FLOW_"!==i.slice(0,5))return"continue";if("FLOW_SET_DATA"===i)we(v[i],(([e])=>{r._pendingSetDataCallbacks.push(e)}),e);else if("FLOW_VIEW_INFO"===i){var t=function(){var e=He()((function*([e,t,n]){var o=null;"selectorQuery"===e?o=yield Rr(t,r._treeManager):"intersection"===e?o=Qr(t,r._treeManager,(e=>{ge(v.RESPONSE_VIEW_INFO,[e,n],r._viewId)})):"matchMedia"===e&&(o=Vr(t,(e=>{ge(v.RESPONSE_VIEW_INFO,[e,n],r._viewId)}))),o&&ge(v.RESPONSE_VIEW_INFO,[o,n],r._viewId)}));return function(t){return e.apply(this,arguments)}}();we(v[i],(e=>{r._received.length||r._isBlocked?r._fetchingViewInfoCallbacks.push(t.bind(r,e)):t(e)}),e)}else we(v[i],"FLOW_SET_NODE_ANIMATION_INFO"===i?e=>{"scrollTimeline"===e[0].type?"webview"===p()?(({nodeId:e,selector:t,options:r,duration:n,timeline:o},i)=>{for(var a=i.nodeId.getNodeById(e),s=(a=a?a.shadowRoot:window.__DOMTree__?window.__DOMTree__.shadowRoot:null)?a.querySelectorAll(t):[],l=0;l<s.length;l++)gr(a,s[l],r,{duration:n},o)})(e[0],r._treeManager):"skyline"===p()&&console.warn("component rendered with skyline does not support timeline animation, 'animate' call will be ignored."):Or(e[0])}:"FLOW_CLEAR_NODE_ANIMATION_INFO"===i?e=>{Sr(e[0])}:"FLOW_SET_NODE_ANIMATED_STYLE"===i?e=>{r._received.length||r._isBlocked?r._fetchingViewInfoCallbacks.push(Jr.bind(null,e)):Jr(e)}:"FLOW_CLEAR_NODE_ANIMATED_STYLE"===i?e=>{!function(e){var{hasCallback:t,reqId:r,nodeId:n,pageId:o,selector:i,styleIds:a}=e[0],l=Ts.get(o),u=l.nodeId.getNodeById(n);u&&(u.shadowRoot.querySelectorAll(i).forEach((e=>{if(e.__virtual)s.warn("[WABaseLib.Critical] clearAnimatedStyle can not be used on virtual component");else{var t=Array.isArray(a)?a:[a];"function"==typeof e.$$.clearAnimatedStyle&&e.$$.clearAnimatedStyle(t)}})),t&&ge(v.CLEAR_NODE_ANIMATED_STYLE_END,{reqId:r},l.viewId))}(e)}:"FLOW_SET_NODE_NEXT_ANIMATION_INFO"===i?e=>{Cr(e[0])}:n,e)};for(var i of Object.keys(v))o();we(v.SET_DATA_CALLBACK,(([e])=>{this.triggerSetDataCallbacks(e)}),e)}flushBlocked(){for(;this._blocked.length&&!this._isBlocked;)try{var e=this._blocked.shift();this.iterator=new Zr(this._treeManager,e,en._startCb),en._startCb(this._treeManager),this.onFinished()}catch(e){console.error(e.message),i.errorReport({key:"webviewScriptError",error:e})}}unblock(){this._isBlocked=!1,this.flushBlocked()}block(){this._isBlocked||(this._isBlocked=!0)}sendInIndividualFlow(e){this.start(Date.now()),this.push(e),this.end()}start(){this.flush(),this._depth++,ge(v.FLOW_DEPTH,[this._depth,Date.now()],this._viewId)}dedupe(){var e=this._cache;if(this._curWinSize){if(2===e.length){var t=e[1][2];if(e[0][0]!==t){var r=e.pop(),n=r.shift();ge(n,r,this._viewId)}else e.shift(),e[0][1]++}}else{var o=0;if(e.length>2&&e[0][0]===e[1][0]&&e[0][0]===e[2][0]&&e[0][0]!==v.FLOW_SET_DATA&&e[0][0]!==v.FLOW_VIEW_INFO&&(o=1),o){var i=e[0][0];e.splice(0,3),this.flush(),this._curWinSize=1,e.unshift([v.FLOW_REPEAT,3,i])}else if(e.length>3){var a=e.pop(),s=a.shift();ge(s,a,this._viewId)}}}push(e){this._cache.unshift(e),1!==e.length?this.flush():this.dedupe()}flush(){for(this._curWinSize=0;this._cache.length;){var e=this._cache.pop(),t=e.shift();ge(t,e,this._viewId)}}end(){this.flush(),this._depth--,ge(v.FLOW_DEPTH,this._depth,this._viewId),0===this._depth&&_e()}checkDelayFetchingViewInfo(){if(this._fetchingViewInfoCallbacks.length){var e=this._fetchingViewInfoCallbacks;this._fetchingViewInfoCallbacks=[],e.forEach((e=>e()))}}registerSetDataCallback(e,t,r){var n=this._setDataCallbackInc++;this._setDataCallbackMap[n]=[e,t,r],this.push([v.FLOW_SET_DATA,n])}triggerSetDataCallbacks(e){for(var t=0;t<e.length;t++){var r=e[t];if(this._setDataCallbackMap[r]){var[n,o,i]=this._setDataCallbackMap[r];delete this._setDataCallbackMap[r],Xr.safeCallback("SetData Callback",n,o,[],i)}else s.error("setDataCallback error")}}onFinished(){if(wx.triggerPageReRender(),"skyline"===p()){var e=d();this._viewId===S?this._treeManager.__attached?e.getTabBarContext().startRender((()=>{s.info("[Skyline.Critical] tabbar startRender callback, doing nothing.")})):s.error("[OperationFlow] [Skyline.Critical] tabBar startRender ignored, because root element is not attached (may be due to some unexpected error). pageId="+this._viewId):!0!==this._treeManager.__attached?s.error("[OperationFlow] [Skyline.Critical] startRender ignored, because root element is not attached (may be due to some unexpected error). pageId="+this._viewId):e.getContext(this._viewId).startRender((()=>{s.info("[Skyline.Critical] page startRender callback, doing nothing. pageId="+this._viewId)}))}this._blocked.length||(ge(v.SET_DATA_CALLBACK,[this._pendingSetDataCallbacks],this._viewId,!0),this._pendingSetDataCallbacks=[],this.checkDelayFetchingViewInfo())}static setStartOperation(e){en._startCb=e}}var tn=en,rn=_.objectSpread2,nn=e.n(rn),on=c(),an=Object.prototype.hasOwnProperty,sn=on.dataUtils.deepCopy,ln=(e,t,r,n,o)=>{for(var i=o?sn(e):e,a=0;a<t.length;a++){var s=t[a],l=s[0],u=s[1],c=s[2];if(void 0!==u){for(var d=i,p=l[0],f=1;f<l.length;f++)if(null!=(d=d[p])&&d.__wxspec__&&(d=d.__value__),p=l[f],null!=d&&!an.call(d,p)){d=null;break}null!=d&&an.call(d,p)&&(r?null!=c&&"object"==typeof u&&u instanceof Array==c instanceof Array?d[p]={__value__:c,__wxspec__:!0}:null!=d[p]&&d[p].__wxspec__||(d[p]={__value__:d[p],__wxspec__:!0}):d[p]=n?sn(u,!1):u)}}return i},un={restoring:null,idDataMap:null,compIdArr:null,compExtraDataMap:null,compIdArrIndex:0,onReady:()=>{}},cn=c(),dn={},pn=(e,t)=>{var r=cn.Component.getComponentOptions(e).domain;if("/"!==r&&"//"!==r&&r){var n=r.split("/",1)[0],o=t.viewId;if(dn[o]||(dn[o]={}),!dn[o][n]){dn[o][n]=!0;var a=[n,u.pluginInfos[n].version,t.rootCompName,u.getLaunchOptionsSync().sessionid||u.getLaunchOptionsSync().sessionId||"",0,""].map(encodeURIComponent).join(",");void 0!==i&&(i.reportKeyValue({key:"PluginDisplay",value:a,force:!0}),i.reportIDKey({key:"pluginDisplayInPage",force:!0}))}}},fn=0,hn=0,_n=0,gn=(e,t,r,n)=>{var o=r-t,a=r-e,s=Math.ceil(_n/(hn||1)),l=[fn,1,o,hn,s,1,a,n].map(encodeURIComponent).join(",");fn=0,hn=0,_n=0,void 0!==i&&i.reportKeyValue({key:"SetDataPerf",value:l,force:!0})},vn=0,mn=0,yn=0,bn=0,wn=0,An=0,En=()=>{var e=["libVersion","isFirstPage","isWebview","totalComps","loadedComps","lazyedComps","loadTime","lazyLoadTime"],t=new Set(e),r={},n=!1,o=(o,a)=>{n||(r[o]=a,t.has(o)&&t.delete(o),0===t.size&&((()=>{if(void 0!==i){var t=e.map((e=>encodeURIComponent(r[e]))).join(",");i.reportKeyValue({key:"LazyCodeLoading",value:t,immediately:!0})}})(),n=!0))};return o("libVersion",wx.version.version),o("isWebview",!1),o("lazyedComps",0),o("lazyLoadTime",0),{set:o}},In=e=>{var t={};return r=>(t[r]||(t[r]=e(r)),t[r])},Sn=/-[a-z]/g,Cn=/([A-Z])/g,Tn=In((e=>e.indexOf("-")<=0?e:e.replace(Sn,(e=>e[1].toUpperCase())))),On=In((e=>e.replace(Cn,"-$1").toLowerCase())),xn=0,Nn=[],Rn=(...e)=>{Nn.push(e)};y.onLoad((()=>{Rn=setTimeout,Nn.forEach((e=>{setTimeout(...e)}))}));var Pn=function(e){xn===e&&(xn=0)},Dn=function(){return xn=Date.now()+Math.random()},Ln=function(e){var t,r=Dn();try{t=e(r)}catch(e){throw Rn((()=>{Pn(r)}),0),e}return Rn((()=>{Pn(r)}),0),t},Bn=function(){return!!xn},kn=c(),Mn=(Object.prototype.hasOwnProperty,null),Fn=(e,t)=>Mn?Mn(e,"nv_",t?2:void 0):e,jn=(e,t=!1)=>Mn?Mn(e,void 0,t?2:void 0):e,Un=(e,t,r)=>t?r?t+e+r:t||"":r||"",$n=([e,t,r,n,o])=>{if(n||(n={}),t){var i=Ts.get(e);if(!i)return;var a=i.nodeId.getNodeById(t);if(!a)return;var s=kn.Element.getMethodCaller(a);s&&"function"==typeof s[r]&&(o?Ln((()=>{s[r](n)})):s[r](n))}else{var l=L.getCurrentPagesByDomain("");if(!l.length)return;var u=l[l.length-1];u&&"function"==typeof u[r]&&(o?Ln((()=>{u[r](n)})):u[r](n))}};y.onLoad((()=>{u.onCallMethodFromWxs($n)}));var Wn=(e,t,r)=>{if(t.__wxsStyle||t.__wxsClass){var n={wxsStyle:t.__wxsStyle,wxsClass:t.__wxsClass,index:r,wxsState:jn(t.__wxsState)};if(t.ownerShadowRoot){var o=Ts.getByNode(t).nodeId.getNodeId(t.ownerShadowRoot.__wxHost);e._custom=e._custom||{},(e=e._custom)[o]=e[o]||{},e=e[o]}e[t.is]=e[t.is]||[],e[t.is].push(n)}},qn=(e,t,r)=>{if(e){var n=null;if(t.ownerShadowRoot&&e._custom){var o=Ts.getByNode(t).nodeId.getNodeId(t.ownerShadowRoot.__wxHost);if(!(e=e._custom)[o])return;e=e[o]}e[t.is]&&e[t.is].length&&e[t.is][0]&&e[t.is][0].index===r&&(n=e[t.is].shift()),n&&((e,t)=>{if(e.__wxsStyle=t.wxsStyle,e.__wxsClass=t.wxsClass,e.__wxsState=Fn(t.wxsState),t.wxsStyle){var r=()=>{var t=window.wx.transformRpx(e.__wxsStyle,!0);e.setNodeStyle(t,I)};r(),Ye(e,I,r)}t.wxsClass&&(e.class=Un(" ",e.class,t.wxsClass))})(t,n)}};var Hn=c(),Gn=Hn.Component.getComponentOptions,Qn=e=>e instanceof Hn.Component?Ts.get(e.__wxWebviewId__).nodeId.getNodeById(e.__wxExparserNodeId__):e,zn=(e,t,r)=>{var n=Qn(e);return r&&n instanceof Hn.VirtualNode&&(n.id||Object.getOwnPropertyNames(n.dataset).length||(n=Qn(r))),{id:t?"":n.id,dataset:t?{}:n.dataset}},Yn=(e,t,r,n,o,i,a,s)=>{var l=i?"__wxEventCaptureHandleName":"__wxEventHandleName";t[l]||(t[l]=Object.create(null)),void 0===t[l][r]&&t.addListener(r,(function(e){var n=t[l][r],i=e.mutatedMarked();if((!s||!e.mutatedMarked())&&(s&&e.markMutated(),n)){e._hasListeners=!0;var u=t.ownerShadowRoot;if(u){var c=u.getHostNode(),d=Hn.Component.getComponentOptions(c).writeOnly;if(!d||e._allowWriteOnly){if(a&&"function"==typeof n)return void console.warn('Cannot use wxs function to handle custom event "'+e.type+'".');var p=Hn.Element.getMethodCaller(c);"function"!=typeof p[n]?console.warn('Component "'+c.is+'" does not have a method "'+n+'" to handle event "'+e.type+'".'):p[n]({type:e.type,timeStamp:e.timeStamp,target:zn(e.target,d,this),currentTarget:zn(this,d,null),mark:e.mark,detail:e.detail,touches:e.touches,changedTouches:e.changedTouches,mut:i,_requireActive:e._requireActive})}}return!o&&void 0}}),{capture:i}),a?t[l][r]=n:(t[l][r]=null==n?"":String(n),t.__eventHandlerChangeListener__&&(t.__eventHandlerChangeListener__(r,t[l][r],i),"function"==typeof t.__domElement.setListenerOption&&t.__domElement.setListenerOption(r,!o,i)))},Kn=(e,t,r,n)=>{var o=Ts.getByNode(e);e.__component__&&!un.restoring&&e.__isXrFrame__&&(o.operationFlow.start(),o.operationFlow.push([v.FLOW_SET_ROOT_PROPERTIES,Hn.dataUtils.deepCopy(t),Hn.dataUtils.deepCopy(r),Hn.dataUtils.deepCopy(n)])),e.dataset=e.dataset||{};var i=0,a=!1,l=[],u=e instanceof Hn.Component,c=u&&"//"===Gn(e).domain,d=Hn.Component.getDataProxy(e),f=function(){var o,f=t[h],_=null;if("slot"===e.is&&e instanceof Hn.VirtualNode&&"name"===h)return Hn.Element.setSlotName(e,f),"continue";if("id"===h)return e.id=null==f?"":f,"continue";if("slot"===h)return e.slot=null==f?"":f,"continue";if("class"===h){if(u)e.class=e.__wxsClass?Un(" ",null==f?"":f,e.__wxsClass):null==f?"":f,u&&e.hasExternalClass("class")&&e.setExternalClass("class",f);else e.class=f;return"continue"}if("style"===h)if(u&&e.$$){var g=wx.transformRpx(f,!0);e.setNodeStyle(g,A),g!==f?Ye(e,A,(()=>{var t=wx.transformRpx(f,!0);e.setNodeStyle(t,A),e.__transformedPropValue=t})):Ke(e,A),e.__banned&&Ze(e)}else e.$$&&e.setNodeStyle(f,A);if(u&&Hn.Component.hasPublicProperty(e,h)){!c&&un.restoring||(d.scheduleReplace([h],f,null!=r?r[h]:null),c?d.doUpdates(void 0,!0):(a=!0,e.isInnerDataExcluded(h)||i++));var v=n&&n["model:"+On(h)];if(v){var m=v.match(/^\{\{(.*?)\}\}$/);if(m){var y=m[1].match(/^\s*([_a-zA-Z$][_a-zA-Z0-9$]+)\s*$/);if(y){var b=y[1];e.__modelValueName=Object.assign(e.__modelValueName||{},{[h]:b}),l.push(h)}else console.warn("For developer:Two-way binding does not support complex data paths currently. This two-way binding is ignored.")}else console.warn(`For developer:"${v}" is not an assignable expression. This two-way binding is ignored.`)}return"continue"}if("style"===h)return"continue";if(h.startsWith("data-")){var w=Tn(h.slice(5).toLowerCase());if(e.dataset[w]=f,e.setAttribute(h,f),e.__componentOptions&&"//"===e.__componentOptions.domain){var I=Hn.Element.getMethodCaller(e),S=I.onPropertyUpdate;"function"==typeof S&&S.call(I,"dataset",w,f)}return"continue"}if("$gdc"===h)return"function"==typeof(o=f)&&(Mn=o),"continue";if((_=h.match(/^\$wxs:(capture-)?(mut-)?(bind|catch):?(.+)$/))&&("function"==typeof f||!f))return Yn(0,e,_[4],f,"catch"===_[3],_[1],!0,_[2]),ne(),"continue";if(_=h.match(/^(capture-)?(mut-)?(bind|catch):?(.+)$/))return Yn(0,e,_[4],f,"catch"===_[3],_[1],!1,_[2]),ne(),"continue";if("on"===h.slice(0,2))return Yn(0,e,h.slice(2),f,!1,!1,!1),"continue";if("animation"===h){if(u&&e.$$&&null!==f&&"object"==typeof f&&f.actions&&f.actions.length>0){var C=0,T=f.actions,O=f.actions.length;function R(){if(C<O){var{transition:t,transitionProperty:r,transform:n,transformOrigin:o,style:i}=wx.animationToStyle(T[C]),a=e.__styleObj?Object.assign({},e.__styleObj,{transition:t,transform:n,transitionProperty:r,transformOrigin:o}):{transition:t,transform:n,transitionProperty:r,transformOrigin:o};for(var s of(a["-webkit-transition"]=a.transition,a["-webkit-transform"]=a.transform,a["-webkit-transition-property"]=a.transitionProperty,a["-webkit-transform-origin"]=a.transformOrigin,Object.keys(i||{})))a[s]=i[s];e.__styleObj=a,""!==a.transform&&(e.__transformNoneEnabled=!0);var l=Object.keys(a).filter((t=>!(t.toLowerCase().includes("transition")&&""===a[t]||""===t.trim()||void 0===a[t]||!t.toLowerCase().includes("transform")&&""===a[t]||!isNaN(parseInt(t,10)))&&(t.toLowerCase().includes("transform")&&""===a[t]&&e.__transformNoneEnabled&&(a[t]="none"),!0))).map((e=>`${e.replace(/([A-Z]{1})/g,(e=>`-${e.toLowerCase()}`))}:${a[e]}`)).join(";"),u=()=>{e.setNodeStyle(wx.transformRpx(l,!0),E)};u(),Ye(e,E,u),e.__banned&&Ze(e)}}e.addListener("transitionend",(()=>{C+=1,R()})),R()}return"continue"}if(_=h.match(/^\$wxs:change:(.+)$/))return e.wxsObserver=e.wxsObserver||{},e.wxsObserver[_[1]]=e.wxsObserver[_[1]]||{},e.wxsObserver[_[1]].observer=f,"continue";if(_=h.match(/^mark:(.+)$/))return e.setMark(_[1],f),"continue";var x=On(h);if(u&&e.hasExternalClass(x))return e.setExternalClass(x,f),"continue";if("webview"!==p()&&e instanceof Hn.NativeNode){var N="skyline"===p()?Tn(h):On(h);if(void 0!==e.__extraAttributeFilters&&"function"==typeof e.__extraAttributeFilters[N])try{e.__extraAttributeFilters[N](e,N,f,(t=>{e.setAttribute(N,t)}))}catch(P){s.error(`[Skyline] attribute filter error, on node <${e.is}>, attr [${N}], msg: ${P.message}`),e.setAttribute(N,f)}else e.setAttribute(N,f)}};for(var h of Object.keys(t||{}))f();a&&d.doUpdates(i,!1);for(var _=function(){var t=l[g];e.__wxPropertyListener__&&e.__wxPropertyListener__[t]||(e.setPropertyChangeListener(t,(r=>{var n=e.ownerShadowRoot.getHostNode();n.setData({[e.__modelValueName[t]]:r})})),e.__wxPropertyListener__=e.__wxPropertyListener__||{},e.__wxPropertyListener__[t]=!0)},g=0;g<l.length;g++)_();e.__component__&&!un.restoring&&(o.operationFlow.push([v.FLOW_APPLY_PROPERTY]),e.__isXrFrame__&&o.operationFlow.end())},Vn=Object.create(null),Jn=!1,Xn={},Zn=function(e,t){Jn&&(Vn[e]=t)},eo=function(){return Jn},to={},ro={},no=e=>{Object.keys(to).length>0&&ge(v.XR_FRAME_COMP_OPTIONS,[to,ro],e)};var oo=c(),io=oo.dataUtils.deepCopy,ao={tag:"shadow",children:[]},so=(t,r)=>{var n,o=Date.now(),i=t?t(r,null,e.g):ao;return n=Date.now()-o,hn+=1,_n+=n,i.tag="shadow",i},lo=(e,t)=>{if(eo()){t.operationFlow.start(Date.now()),t.operationFlow.push([v.FLOW_HOT_UPDATE_RESET,t.nodeId.getNodeId(e)]);var r="";e===t.root?r="body":e===t.tabRoot&&(r="tab-bar");var n=e.__vtObj,o=e.ownerShadowRoot?e.ownerShadowRoot.createComponent(n.tag,void 0,n.generics,t):oo.createElement(r,oo.Component._list[e.is],t);t.operationFlow.push([v.FLOW_HOT_UPDATE_RESET]);var i=t.nodeId.getNodeId(e);if(t.nodeId.removeNode(e),t.nodeId.allocNodeId(o,i),e===t.root){oo.Element.pretendDetached(e),t.root=o,oo.Element.getMethodCaller(o).__wxExparserNodeId__=i,oo.Element.pretendAttached(o);var a={},s=!1;Object.keys(t.initialRootData).forEach((e=>{oo.Component.hasProperty(o,e)&&(a[e]=t.initialRootData[e],s=!0)})),s&&t.root.setData(a)}else if(e===t.tabRoot){t.tabRoot=o,oo.Element.getMethodCaller(o).__wxExparserNodeId__=i}else{o.__vtObj=n;var l=n.attr;for(Kn(o,l,n.raw,n.rawAttr);e.childNodes.length;)o.appendChild(e.childNodes[0]);e.parentNode.replaceChild(o,e)}t.operationFlow.end()}},uo=(e,t,r,n)=>{var o,i=to[o=e]||to[ro[o]]||{},a=null;return i.isXrComp&&"xr-frame"!==be(n.viewId)&&"xr-frame"!==p()?(s.info(`[VirtualTreeCreate] <${t.tag}>[${e}] will be created as xr-frame`),(a=u.xrFrame.createXrFrame(e,r,t.generics,n.viewId)).__isXrFrame__=!0):a=r.createComponent(t.tag,void 0,t.generics,n),pn(a,n),a},co=(e,t,r,n,o)=>{var i=null;if("shadow"===e.tag&&t)r=i=oo.ShadowRoot.create(t);else if("virtual"===e.tag||"shadow"===e.tag){var a="virtual";1===e.wxXCkey||3===e.wxXCkey?a="wx:if":2!==e.wxXCkey&&4!==e.wxXCkey||(a="wx:for"),i=r.createVirtualNode(a),oo.Element.setInheritSlots(i),i.__treeManager__=n}else if("wx-slot"===e.tag)i=r.createVirtualNode("slot"),oo.Element.setSlotName(i,"");else{if(r.tagNameUsed(e.tag)){var s=r.getHostNode(),l=r.getCompDefByTagName(e.tag);"string"==typeof l.is&&(l=l.is);var u=s.getPlaceholder(e.tag);n.compManager.shouldUsePlaceholder(l)&&!!u?((i=r.createComponent(e.tag,u,e.generics,n)).__placeholder__=!0,n.compManager.arrangePlaceholderReplace(l,(()=>{var e=i.__vtObj,t=uo(l,e,r,n);po(e,t,n,o);var a=[...i.childNodes];i.parentNode&&i.parentNode.insertBefore(t,i),a.forEach((e=>{t.appendChild(e)})),i.parentNode&&i.parentNode.removeChild(i)}))):i=uo(l,e,r,n)}else(i=r.createVirtualNode(e.tag)).__treeManager__=n}po(e,i,n,o);var c=e.children;if(c)for(var d=0;d<c.length;d++){var p=c[d];if(null!=p)if("object"==typeof p){var f=co(p,null,r,n,o);i.appendChild(f)}else{var h=r.createTextNode(p);i.appendChild(h)}}return i},po=(e,t,r,n)=>{(eo()||!0===t.__placeholder__)&&(t.__vtObj=e),3!==e.wxXCkey&&4!==e.wxXCkey||(t.__wxDynamicSync__=4===e.wxXCkey?"wx:for":"wx:if");var o=t.__component__,i=t.__placeholder__,a=t.__isXrFrame__;if(o||i||a){var s=r.nodeId.allocNodeId(t,r.nodeId.getNodeId(t));oo.Element.getMethodCaller(t).__wxExparserNodeId__=s,r.operationFlow.push([v.FLOW_CREATE_NODE,s])}var l=n?io(e.attr):e.attr;Kn(t,l,e.raw,e.rawAttr),t.__isXrFrame__},fo=e=>{e.operationFlow.push([v.FLOW_MINIPULATE_CHILD])},ho=Object.prototype.hasOwnProperty,_o=e=>"number"==typeof e&&isNaN(e),go=(e,t)=>{for(var r=(e=>{for(var t={},r=0;r<e.length;++r){var n=e[r],o=n&&n.wxKey;o?ho.call(t,o)?n.wxKey=void 0:t[o]=r:_o(o)&&(n.wxKey=void 0)}return t})(e),[n,o]=(e=>{for(var t={},r=[],n=0;n<e.length;++n){var o=e[n],i=o&&o.wxKey;i?ho.call(t,i)?(console.warn(`For developer:Do not set same key "${i}" in wx:key.`),o.wxKey=void 0,r.push(n)):t[i]=n:(_o(i)&&(o.wxKey=void 0),r.push(n))}return[t,r]})(t),i=[],a=[],s=[],l=0,u=0,c=0;c<e.length;++c){var d=e[c].wxKey;if(d)if(ho.call(n,d)){var p=n[d];i.push(t[p])}else a.push(c-u),++u,i.push(null);else if(l<o.length){var f=o[l];i.push(t[f]),++l}else a.push(c-u),++u,i.push(null)}for(var h=i,_=0,g=[],v=0;v<t.length;){for(var m=t[v],y=m&&m.wxKey,b=h[_],w=b&&b.wxKey;null===b;)w=(b=h[++_])&&b.wxKey;_>=h.length?(s.push({oldIndex:r[y],index:v,pos:-1}),++_,++v):w===y?(g.push(_),++_,++v):y?(w?n[w]===v+1?s.push({oldIndex:r[y],index:v,pos:_}):(b=h[++_])&&b.wxKey===y?(g.push(_),++_):(--_,s.push({oldIndex:r[y],index:v,pos:_})):s.push({oldIndex:r[y],index:v,pos:_}),++v):++_}for(var A=0,E=0;E<s.length;E++){var I=s[E].pos;if(-1===I)break;for(;A<g.length&&I>g[A];)A++;A>=g.length?s[E].pos=-1:s[E].pos=g[A]}return{children:i,removes:a,inserts:s}},vo=(e,t,r)=>{if(e!==t&&(!e||r))if(null==t)r.parentNode.removeChild(r);else if("object"==typeof t)if("object"!=typeof e||null===e||e.tag!==t.tag||String(e.wxKey)!==String(t.wxKey)||"virtual"===e.tag&&e.wxVkey!==t.wxVkey){var n=Ts.getByNode(r),o=r.parentNode,i=co(t,null,o.ownerShadowRoot,n,!1);o&&("wx:for"===o.__wxDynamicSync__||"wx:if"===r.__wxDynamicSync__?(n.nodeId.addNode(i),o.replaceChild(i,r),fo(n),n.nodeId.removeNode(r)):o.replaceChild(i,r),r.__banned&&et(i))}else{if(t.n&&t.n.length){for(var a=t.n,s=t.attr,l={},u=0;u<a.length;u++){var c=a[u];l[c]=s[c]}Kn(r,l,t.raw,t.rawAttr)}void 0!==t.wxScopeData&&(r.__wxScopeData__=t.wxScopeData),void 0!==r.__vtObj&&(r.__vtObj=t),mo(e,t,r)}else if("string"==typeof e)t!==e&&(r.textContent=t);else{var d=r.ownerShadowRoot.createTextNode(t);r.parentNode.replaceChild(d,r)}},mo=(e,t,r)=>{var n=!!z("customComponents"),o=e.children,i=t.children,a="virtual"===e.tag&&(2===e.wxXCkey||4===e.wxXCkey||void 0===e.wxXCkey)||!n&&o.length!==i.length,s=null,l=null;if(a){var u=go(o,t.children);i=u.children,s=u.removes,l=u.inserts}for(var c=r.childNodes,d=0;d<o.length;d++){var p=o[d],f=i[d];!f&&a||vo(p,f,c[d])}a&&((e,t,r,n)=>{for(var o=Ts.getByNode(r),i=r.childNodes,a=[],s=0;s<t.length;s++){var l=t[s];a.push({node:void 0!==l.oldIndex?i[l.oldIndex]:null,before:l.pos>=0?i[l.pos]:void 0,index:l.index})}for(var u=0;u<e.length;u++){var c=i[e[u]];r.removeChild(c),"wx:for"===i.__wxDynamicSync__&&(fo(o),o.nodeId.removeNode(c))}for(var d=0;d<a.length;d++){var{before:p,index:f}=a[d],h=a[d].node;null===h&&(h=co(n[f],null,r.ownerShadowRoot,o,!1)),"wx:for"===r.__wxDynamicSync__?(o.nodeId.addNode(h),r.insertBefore(h,p),fo(o)):r.insertBefore(h,p)}r.__banned&&et(r)})(s,l,r,t.children)},yo=c(),bo=null,wo={},Ao=1,Eo=[],Io=(e,t)=>{if(wo[e]||null!==bo){var r=wo[e]||bo,n=Eo[Eo.length-1],o=Eo[Eo.length-2],{isMergedUpdate:i,dataPaths:a,pendingStartTimestamp:s,updateStartTimestamp:l,updateEndTimestamp:u,pageId:c}=t(r);ge(v.UPDATE_PERFORMANCE_STAT,[e,{isMergedUpdate:i,dataPaths:a,updateProcessId:n,parentUpdateProcessId:o,pendingStartTimestamp:s,updateStartTimestamp:l,updateEndTimestamp:u}],c)}},So=null,Co=null,To=(e,t)=>{So=t,Co=e};var Oo=c(),xo=Oo.dataUtils.deepCopy,No=e=>{if("object"!=typeof e||!e)return e;var t=e.slice();return t.shift()(...t)},Ro=function(e,t,r){for(var n=e.childNodes,o=0;o<n.length;o++){var i=n[o];i instanceof Oo.TextNode||(i.__id&&(t[i.__id]=i),void 0!==i.__slotName&&(r[i.__slotName]=i),Ro(i,t,r))}};class Po{createInstance(e,t){var r=new Do,n=t;if(r._template=this,r._generateFunc=this._generateFunc,r.data=xo(this._data),r.idMap=Object.create(null),r.slots=Object.create(null),un.restoring){if(un.compIdArrIndex>=un.compIdArr.length)throw new Error("Component count unmatched while page recovering");n.nodeId.allocNodeId(e,un.compIdArr[un.compIdArrIndex++]);var o=un.idDataMap[n.nodeId.getNodeId(e)];r._virtualTree=so(this._generateFunc,o)}else r._virtualTree=this._virtualTree;return r.shadowRoot=co(r._virtualTree,e,null,t,!0),Ro(r.shadowRoot,r.idMap,r.slots),r.listeners=[],this._isSimpleComponent||(e.__component__=!0),e.__treeManager__=n,r.shadowRoot.__treeManager__=n,n.operationFlow.registerSetDataCallback((()=>{e.triggerLifeTime("ready")})),r._delayedUpdateValues=null,r}updateGenerateFunc(e){this._generateFunc=No(e),this._virtualTree=so(this._generateFunc,this._initValues),Ts.list().forEach((t=>{[t.root,t.tabRoot].forEach((r=>{r&&V(r,1,(r=>{r instanceof Oo.Component&&r.__templateInstance._template===this&&(r.__templateInstance._generateFunc=e,r.__templateInstance._resetShadowChildren(r,r.data,t))}))}))}))}}Po.create=function(e,t,r,n){var o=new Po;o._initValues=r,o._data=t;var i=e.template;return o._generateFunc=No(i.func),o._virtualTree=so(o._generateFunc,o._initValues),o._isSimpleComponent="simple://"===n.domain.slice(0,9),Zn(i.path,(e=>{i.func=e,o.updateGenerateFunc(e)})),o};class Do{beforeMergeValues(e,t,r){if("number"!=typeof r)e.forEach(((e,r)=>{void 0!==e[1]?t[r]=!1:(t[r]=!0,console.warn('Setting data field "'+e[0].join(".")+'" to undefined is invalid.'))}));else{for(var n=0;n<r;n++)t[n]=!1;for(var o=r;o<e.length;o++){var i=e[o];void 0!==i[1]?t[o]=!1:(t[o]=!0,console.warn('Setting data field "'+i[0].join(".")+'" to undefined is invalid.'))}}}beforeUpdateValues(e,t,r){}updateValues(e,t,r,n,o,i){if(!un.restoring){var a=null,s="number"!=typeof i;if(a=e.__treeManager__,s){a.operationFlow.start(Date.now());var l=[];o.forEach((e=>{void 0!==e[1]&&l.push(e)})),a.operationFlow.push([v.FLOW_UPDATE,a.nodeId.getNodeId(e),xo(l)])}else{for(var u=[],c=i;c<o.length;c++){var d=o[c];void 0!==d[1]&&u.push(d)}a.operationFlow.push([v.FLOW_DATA_OBSERVER,xo(u)])}if(this._delayedUpdateValues)this._delayedUpdateValues.push([xo(t),r,n,o,i]);else{this._delayedUpdateValues=[];try{this._updateValues(e,t,r,n,o,i);var p=this._delayedUpdateValues;this._delayedUpdateValues=null;for(var f=0;f<p.length;f++){var h=p[f];this._updateValues(e,h[0],h[1],h[2],h[3],h[4])}}catch(e){throw this._delayedUpdateValues=null,e}}s&&a.operationFlow.end()}}_updateValues(e,t,r,n,o,i){var a="number"!=typeof i,s=!z("propValueDeepCopy"),l=ln(t,o,!0,!1,s),u=so(this._generateFunc,l);ln(t,o,!1,a,!1);var c=this._virtualTree;this._virtualTree=u,vo(c,u,this.shadowRoot)}_resetShadowChildren(e,t,r){var n=()=>{r.operationFlow.push([v.FLOW_HOT_UPDATE_CHILD])};r.operationFlow.start(Date.now()),r.operationFlow.push([v.FLOW_HOT_UPDATE,r.nodeId.getNodeId(e)]);for(var o=this.shadowRoot,i=(this._virtualTree.children||[]).length,a=0;a<i;a++)o.removeChild(o.childNodes[0]);n();var s=so(this._generateFunc,t);n(),this._virtualTree=s;for(var l=co(s,null,e.shadowRoot,r,!0).childNodes,u=l.length,c=0;c<u;c++)o.insertBefore(l[0],o.childNodes[c]);r.operationFlow.end()}}var Lo=c(),Bo=null,ko=()=>{Bo={};var e=null;m&&m.plugins?e=m.plugins:"undefined"!=typeof window&&window&&window.__wxConfigAppService__&&window.__wxConfigAppService__.plugins&&(e=window.__wxConfigAppService__.plugins);var t=!1;if(e)for(var r of Object.keys(e)){var n=e[r].provider,o=e[r].subpackage;if(void 0!==o){t=!0;var i=o||"";"__APP__"===i&&(i=""),"/"===i[0]&&(i=i.slice(1)),i&&"/"!==i.slice(-1)&&(i+="/"),Bo[n]=i}}if(!t){var a;if(m&&m.subPackages)a=m.subPackages;else{if("undefined"==typeof window||!window||!window.__subPackages)return;a=window.__subPackages}a.length&&a.forEach((e=>{if(e){var t=e.root||"";if(t&&"/"!==t.slice(-1)&&(t+="/"),e.plugins)for(var r of Object.keys(e.plugins)){var n=e.plugins[r]&&e.plugins[r].provider;n&&(Bo[n]=t)}}}))}},Mo=e=>{var t=e.match(/(?:^|\/)__(wx|plugin)__\/(.*)$/);return t?"wx"===t[1]?"wx://"+t[2]:"plugin-private://"+t[2]:e},Fo=e=>(Bo||ko(),(Lo.Component._list[e]&&Lo.Component._list[e].is||e).replace(/^plugin-private:\/\/([0-9a-zA-Z]+)\//,((e,t)=>(Bo[t]||"")+"__plugin__/"+t+"/")).replace(/^wx:\/\//,"__wx__/")),jo=()=>(Bo||ko(),Bo),Uo=e=>Bo[e]||"",$o=e=>(Bo||ko(),(Bo[e]||"")+"__plugin__/"+e+"/"),Wo=e=>{Bo||ko();var t,r,n,o=e.match(/^plugin:\/\/(.+?)\//);if(o)return Wo(Bo[o[1]]||"");if(o=e.match(/^plugin-private:\/\/([0-9a-zA-Z]+)\//))return Wo(Bo[o[1]]||"");t=null!==(r=null===(n=m)||void 0===n?void 0:n.subPackages)&&void 0!==r?r:[];for(var i=0;i<t.length;++i){var a=t[i].root||"";if(a&&"/"!==a.slice(-1)&&(a+="/"),e.slice(0,a.length)===a)return t[i]}return null},qo=e=>{var t=Wo(e);if(!t)return"__APP__";var r=t.root||"";return"/"===r.slice(-1)?r:r+"/"},Ho=e=>{var t=Wo(e);return!!t&&t.independent},Go={main:"app-service.js",sub:"app-service.js",lazyCommon:"common.app.js",lazyApp:"appservice.app.js",plugin:"appservice.js"},Qo=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"],zo=e=>("__APP__"===e||("/"!==e[0]&&(e="/"+e),"/"!==e[e.length-1]&&(e+="/")),e),Yo={},Ko=(e,t)=>{e=zo(e),"string"!=typeof t.subpackage&&(t.subpackage=e),void 0===Yo[e]?Yo[e]=[t]:Yo[e].push(t)},Vo=X(["ready"]),Jo=(e,t)=>{Vo.on("ready",(()=>{t(Yo[e]||[])}))};m.onReady((()=>{var e=new Set,t={};Object.keys(m.plugins||{}).forEach((r=>{var n=m.plugins[r];"string"==typeof n.subpackage?Ko(n.subpackage,n):(e.add(n.provider),t[n.provider]=n)})),(m.subpackages||[]).forEach((r=>{Object.keys(r.plugins||{}).forEach((n=>{var o=r.plugins[n],i=o.provider;e.has(i)&&(e.delete(i),delete t[i],Ko(r.root,o))}))})),Array.from(e).forEach((e=>{Ko("__APP__",t[e])})),Vo.notify("ready")}));var Xo=(e,t)=>{t(`isLazyLoad: ${Ji()}`),t(`moduleName: ${e}`);var r="devtools"===m.platform?[]:(Yo[zo(e)]||[]).map((e=>{var t=e.provider,r=`__plugin__/${t}`;return{plugin_id:t,prefix_path:Qo.includes(t)?null:r}}));t(`separatedPlugins: ${JSON.stringify(r)}`);var n="__APP__"===e,o=n?"":e;if(Ji()){var i=[];return r.forEach((e=>{var t=(o+e.prefix_path+"/").replace(/\/\/$/,"/");e.prefix_path||(t+=`__extended__/${e.plugin_id}/`),i.push(t+Go.plugin)})),i.push(o+Go.lazyCommon,o+Go.lazyApp),t(`all files to inject: ${JSON.stringify(i)}`),i}var a=r.map((e=>{var t=(o+e.prefix_path+"/").replace(/\/\/$/,"/");return e.prefix_path||(t+=`__extended__/${e.plugin_id}/`),t+Go.plugin}));return n?a.push(o+Go.main):a.push(o+Go.sub),t(`all files to inject: ${JSON.stringify(a)}`),a},Zo=c(),ei=(e,t,r)=>{if(e instanceof Zo.Component){e!==window.__DOMTree__&&(t.compCount++,e.hasBehavior("wx-base")?(r&&t.rootInternalCompCount++,e.hasBehavior("wx-native")&&t.nativeCompCount++):r&&t.rootCustomCompCount++);var n=e===window.__DOMTree__&&r;e.shadowRoot instanceof Zo.Element&&ei(e.shadowRoot,t,n)}for(var o=e.childNodes,i=0,a=o.length;i<a;i++){var s=(o[i]instanceof Zo.VirtualNode||e===window.__DOMTree__||e===window.__DOMTree__.shadowRoot)&&r;o[i]instanceof Zo.Element&&ei(o[i],t,s)}},ti={id:null,prev:null,data:[]};we(v.SAVE_STATE,(()=>{"function"==typeof wx.webViewReadyToTerminate&&wx.webViewReadyToTerminate({})})),we(v.RESTORE_STATE,(([e,t,r,n],o,a)=>{if(e&&e.isSplitData){var{id:s,index:l,total:u,data:c}=e.splitInfo;if(1!==l&&(l!==ti.prev+1||s!==ti.id))return ti.id=null,ti.prev=null,void(ti.data=[]);if(l!==u)return ti.id=s,ti.prev=l,void ti.data.push(c);ti.data.push(c);var d=ti.data.join("");try{d=JSON.parse(d)}catch(e){console.error("Expected parse completed data with split data but got error"),i.errorReport({key:"webviewScriptError",error:new Error("Expected parse completed data with split data but got error")}),d=null}if(ti.id=null,ti.prev=null,ti.data=[],!d)return;e=d[0],t=d[1],r=d[2],n=d[3]}un.restoring=e||{},un.idDataMap=t,un.compIdArr=r,un.compIdArrIndex=0;var p=Ts.get(a).compManager;p.restore(n),un.onReady=p.onRestoreInjectDone.bind(p)}));var ri=e=>{(e=>{var t=document.body.scrollTop||document.documentElement.scrollTop;e.__page__={scrollTop:t}})(e),e.compExtraDataMap={};var t=0;window.__TAB_BAR__&&(V(window.__TAB_BAR__,1,(r=>{r.triggerLifeTime("saved",[e]),Wn(e.compExtraDataMap,r,t++)})),e.compExtraDataMap),V(window.__DOMTree__,1,(r=>{r.triggerLifeTime("saved",[e]),Wn(e.compExtraDataMap,r,t++)})),e.compExtraDataMap},ni=e=>{(e=>{var t=e.__page__;if(t){var r=parseInt(t.scrollTop,10);requestAnimationFrame((()=>{document.body.scrollTop=document.documentElement.scrollTop=r}))}})(e);var t=0;window.__TAB_BAR__&&(V(window.__TAB_BAR__,1,(r=>{r.triggerLifeTime("restored",[e]),qn(e.compExtraDataMap,r,t++)})),e.compExtraDataMap),V(window.__DOMTree__,1,(r=>{r.triggerLifeTime("restored",[e]),qn(e.compExtraDataMap,r,t++)})),e.compExtraDataMap},oi=()=>{__webViewSDK__.publish("recycleStatistics",(()=>{var e={compCount:0,customCompCount:0,nativeCompCount:0,rootCustomCompCount:0,rootInternalCompCount:0};try{ei(window.__DOMTree__,e,!0)}catch(e){}var{compCount:t,customCompCount:r,nativeCompCount:n,rootCustomCompCount:o,rootInternalCompCount:i}=e,a=o+i;return{compCount:t,customCompCount:r,nativeCompCount:n,rootCompCount:a,rootCustomCompCount:o,rootCustomCompRatio:a?Math.floor(100*o/a):0,rootInternalCompCount:i}})());var e={};ri(e),ge(v.REQUEST_SAVE,e,0,!0)},ii=262144,ai=Date.now(),si=(e,t)=>{var r=Ts.get(e);r&&(r.statesData=t,r.tabRoot&&V(r.tabRoot,1,(e=>{e.triggerLifeTime("saved")})),V(r.root,1,(e=>{e.triggerLifeTime("saved")})),ge(v.SAVE_STATE,[],e))},li=e=>{var t=Ts.get(e);if(t){var r=t.nodeId.getAll(),n={},o=[],i=e=>{var i=t.nodeId.getNodeId(e);void 0!==i&&(o.push(i),n[i]=r[i].data)};t.tabRoot&&!t.tabDestroyed&&V(t.tabRoot,1,i),V(t.root,1,i);var a=t.compManager.getRestoredData(),s=[t.statesData||{},n,o,a],l=JSON.stringify(s),u=l.length;if(u>ii){for(var c=[],d=0;u>d;)c.push(l.substr(d,ii)),d+=ii;for(var p=++ai,f=0,h=c.length;f<h;f++)ge(v.RESTORE_STATE,[{isSplitData:!0,splitInfo:{id:p,index:f+1,total:h,data:c[f]}}],e)}else ge(v.RESTORE_STATE,s,e);if(t.statesData=void 0,!t.tabDestroyed&&t.tabRoot){ge(v.COMPONENT_DEF_TAB,t.tabUsedDef,e);var _=t.tabRoot;t.operationFlow.start(),t.operationFlow.push([v.FLOW_CREATE_TAB,_.is,t.nodeId.getNodeId(_)]),t.operationFlow.push([v.FLOW_CREATE_TAB]),t.operationFlow.end()}ge(v.COMPONENT_DEF,t.usedDef,e);var g=t.root;t.operationFlow.start(),t.operationFlow.push([v.FLOW_INITIAL_CREATION,g.is,t.nodeId.getNodeId(g),{}]),t.operationFlow.push([v.FLOW_INITIAL_CREATION]),t.operationFlow.end(),t.tabRoot&&V(t.tabRoot,1,(e=>{e.triggerLifeTime("restored")})),V(t.root,1,(e=>{e.triggerLifeTime("restored")}))}},ui=c(),ci={},di={},pi=function(e,t){return e+"/"+t},fi=function(e,t,r,n=!0){var o=t.match(/^plugin-private:\/\/(.*?)\//);if(!o)return!1;var i=o[1];if(n&&pi(i,"0")!==e)return!1;var a=r.match(/^plugin:\/\/(.*?)\//);if(!a)return!1;var s=a[1];return(!n||pi(s,"0")===e)&&(ui.Component._list[r]?(console.error('"'+r+'" has been used as another component or page. Please do not register multiple components or pages with the same alias.'),!1):(((e,t)=>{ro[e]=t})(r,t),ui.Component._list[r]=ui.Component._list[t],ci[r]=t,di[t]=r,!0))},hi=function(e,t){for(var r in t)fi(e,t[r],r)};var _i=c(),gi=0;function vi(e){e&&".html"!==e.slice(5)&&(e+=".html");var t="";return __wxConfigWindow__&&__wxConfigWindow__.initialRenderingCache&&(t=String(__wxConfigWindow__.initialRenderingCache)),t}function mi(e,t){var r=Date.now(),n={},o={},i=document.head.querySelectorAll("style")||[],a=[];_i.ElementIterator.create(e,"composed-descendants-root-first",_i.Component).forEach((e=>{e.hasBehavior("wx-base")||(n["./"+e.is+".wxss"]=!0)})),Object.keys(_i.Component._list).forEach((e=>{o["./"+e+".wxss"]=!0}));for(var s=0;s<i.length;s++){var l=i[s],u=l.getAttribute("wxss:path");null!=u&&(!o[u]||n[u]?a.push("<style>"+l.innerHTML+"</style>"):l.innerHTML.length+15)}var c=a.join(""),d=c+e.$$.innerHTML;wx.saveInitialRenderingCache({content:d,appserviceData:t});Date.now();c.length}function yi(){wx.saveInitialRenderingCache({content:""})}function bi(e,t){return"dynamic"!==vi(window.__route__)?(console.error('An initial rendering cache state is ignored, because initialRenderingCache mode is not "dynamic".'),!1):(e?mi(e,t):yi(),!0)}var wi=c(),Ai=(e,t,r,n)=>{var o=`${Math.random()}-${+new Date}`,i=Ts.get(r);if(i)return i.operationFlow.push([v.FLOW_VIEW_INFO,e,t,o]),"function"==typeof n&&(i.viewInfoCbMap[o]=n),o},Ei=(e,t)=>{var r=Ts.get(e);r&&delete r.viewInfoCbMap[t]},Ii=c(),Si=c(),Ci=c(),Ti={},Oi=(e,t)=>{void 0===Ti[e]&&(Ti[e]=X(["ready"])),Ti[e].on("ready",t)},xi=(e,t)=>{if(wx.traceBeginEvent("Framework","dispatchViewRoute"),"webview"!==p()&&!m.isLazyLoad){var r=e.replace(/\.html$/,"").replace(/^\//,"");wx.traceBeginEvent("Framework","injectWxss"),ta(r),wx.traceEndEvent(),wx.traceBeginEvent("Framework","triggerGenerateFuncReady"),ea(r,t),wx.traceEndEvent()}wx.traceEndEvent()},Ni=Ci.dataUtils.deepCopy,Ri={lazyRegistration:!0,publicProperties:!0},Pi={domain:"/",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",templateEngine:Po,renderingMode:"full",multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!1,idPrefixGenerator:null,separateInnerData:!0,innerDataExclude:null,randomizeTagName:!1,virtualHost:!1},Di={domain:"/",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",renderingMode:"full",templateEngine:Po,multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!0,idPrefixGenerator:null,separateInnerData:!1,innerDataExclude:null,randomizeTagName:!1,virtualHost:!1},Li="undefined"!=typeof WeakMap?new WeakMap:{},Bi={},ki={},Mi={},Fi={},ji={},Ui={},$i=1,Wi=Object.prototype.hasOwnProperty,qi="wx-",Hi=(e,t)=>{var r={},n=(t[e+".json"]||{}).usingComponents||{};for(var o of Object.keys(n))r[qi+o]=Q(e,String(n[o]));return r},Gi=(e,t)=>{for(var r in t){var n=t[r];n.target=null!=n.target?String(n.target):Q(e,String(r))}return t},Qi=(e,t)=>{var r={},n=(t[e+".json"]||{}).componentGenerics||{};for(var o of Object.keys(n)){var i=n[o];"object"==typeof i?r[qi+o]={default:Q(e,String(i.default||""))}:null!=i&&(r[qi+o]={})}return r},zi=(e,t)=>{var r=t[e+".json"]||{},n={},o=r.componentPlaceholder||{};return Object.keys(o).forEach((e=>{n[qi+e]=qi+String(o[e])})),n},Yi=(e,t)=>(t[e+".json"]||{}).renderer,Ki=(e,t)=>(t[e+".json"]||{}).xrFrameTouchEventBubble,Vi=(e,t,r,n)=>{var o=Ts.get(r).nodeId.getNodeById(n,r);o&&t&&Ci.Element.getMethodCaller(o).setData({[t]:e})},Ji=()=>m.isLazyLoad,Xi=e=>{var t="__plugin__/",r=e.indexOf(t);return-1===r?e:"plugin-private://"+e.slice(r+t.length)},Zi=e=>{if(-1===e.indexOf("plugin://"))return e;var t=e.match(/\w+\//);if(!t)return e;t=t[0].slice(0,t[0].length-1);var r,n,o=(r=t,(n=m.plugins||{})[r]?n[r].provider:null);if(!o)return e;var i=e.replace(t,o);return ci[i]?ci[i]:i},ea=(e,t)=>{var r=Xi(e);s.info(`[triggerGenerateFuncReady] dispatch generateFuncReady from vd, comp=${r}`);var n=("undefined"!=typeof __wxAppCode__?__wxAppCode__:{})[r+".wxml"];Array.isArray(n)&&(n=n[0][n[1]]),window.__wxAppCodeReadyCallback__?window.__wxAppCodeReadyCallback__(n):window.document.dispatchEvent(new CustomEvent("generateFuncReady",{detail:{generateFunc:n,pageId:t}}))},ta=e=>{var t=p();if("webview"===t){var r=Xi(e);s.info(`[injectWxss] inject page wxss from vd, comp=${r}`);var n=("undefined"!=typeof __wxAppCode__?__wxAppCode__:{})[r+".wxss"];void 0!==n&&"function"==typeof n||(s.warn("codeMap does not contain valid wxss "+(r+".wxss")),n=()=>{}),window.__setCssStartTime__=Date.now(),n(),window.__setCssEndTime__=Date.now()}else s.info(`[injectWxss] current renderer is ${t}, handle root wxss by priority`)},ra=(e,t,r,n)=>{no(e.viewId);var o=[[],[],t,ci];aa(o,t,Object.create(null),"",e);var i=new Set(e.usedDef[0].map((e=>e.is))),a=new Set(e.usedDef[0].map((e=>e.is))),s=[],l=[];o[0].forEach((e=>{i.has(e.is)||(s.push(e),i.add(e.is))})),o[1].forEach((e=>{a.has(e.is)||(l.push(e),a.add(e.is))})),o[0]=s,o[1]=l,e.usedDef[0].push(...o[0]),e.usedDef[1].push(...o[1]),e.operationFlow.sendInIndividualFlow([v.FLOW_COMPONENT_DEF_ADD,n,o]),e.operationFlow.sendInIndividualFlow([v.FLOW_WAIT_COMPONENT,n]),e.operationFlow.start(Date.now()),e.operationFlow.push([v.FLOW_REPLACE_PLACEHOLDER,n]),r.replacers.forEach((e=>{e()})),e.operationFlow.end()},na=e=>{var t=da(e);return t?ca(t):""},oa=e=>{var t=di[e];if(!t)return{};var r=t.match(/^plugin:\/\/(wx[0-9a-f]{16})\/(.+)$/);if(!r)return{};var n=r[1],o=r[2],i=K(m.plugins).find((e=>e.provider===n));if(!i)return{};if(!i.genericsImplementation)return{};var a=i.genericsImplementation[o]||{},s={},l=Uo(n);return Object.keys(a).forEach((e=>{s[qi+e]=Q(l,String(a[e]))})),s},ia=(e,t,r)=>{if("wx://"!==t.slice(0,5)){var n=ki[t];if(!n)throw new Error('"'+t+'" is not a behavior registered by Behavior()');e[0].unshift(n),r[t]=!0;var o=ji[n.is];if(o)for(var i=0;i<o.length;i++){var a=o[i];r[a]||ia(e,a,r)}}},aa=(e,t,r,n,o,i=!1)=>{Wi.call(ci,t)&&(t=ci[t]);var a=Bi[t];if(!o.compManager.shouldUsePlaceholder(t)||!i)if(a){var s=Ui[t];"wx://"!==t.slice(0,5)&&e[1].unshift(a),r[t]=!0;var l=Mi[a.is],u=Fi[a.is];for(var c of Object.keys(l||{})){var d=l[c];r[d]||aa(e,d,r,t,o,!!s[c])}for(var p of Object.keys(u||{})){var f=u[p].default;f&&(r[f]||aa(e,f,r,t,o,!!s[p]))}var h=ji[a.is];if(h)for(var _=0;_<h.length;_++){var g=h[_];r[g]||ia(e,g,r)}}else console.error(`Component is not found in path "${t}"${n?` (using by "${n}")`:""}`)},sa=(e,t)=>{var r={};for(var n in e.properties){var o=e.properties[n];if(null===o)r[n]={type:null};else if(o===Number||o===String||o===Boolean||o===Object||o===Array)r[n]={type:o.name};else if(void 0===o.public||o.public){var i=o.type,a=null;i!==Number&&i!==String&&i!==Boolean&&i!==Object&&i!==Array||(a=i.name);var s=void 0;if(o.optionalTypes){s=[];for(var l=0;l<o.optionalTypes.length;l+=1){var u=o.optionalTypes[l];u!==Number&&u!==String&&u!==Boolean&&u!==Object&&u!==Array||s.push(u.name)}}r[n]={type:a,optionalTypes:s,value:o.value}}}var c=e.options.innerDataExclude;return{is:e.is,using:e.using,generics:e.generics,placeholder:e.placeholder,behaviors:e.behaviors,data:e.data,properties:r,externalClasses:e.externalClasses,template:t,options:{domain:e.options.domain,writeOnly:e.options.writeOnly||void 0,multipleSlots:e.options.multipleSlots||void 0,writeIdToDOM:e.options.writeIdToDOM||void 0,styleIsolation:e.options.styleIsolation||void 0,addGlobalClass:e.options.addGlobalClass||void 0,hasObservers:!!e.observers,innerDataExcludeString:c?c.toString():null,virtualHost:e.options.virtualHost||void 0}}},la=function(e){if(e.behaviors){for(var t=[],r=0;r<e.behaviors.length;r++){var n=String(e.behaviors[r]);if("/"!==n[0]&&"wx://"!==n.slice(0,5))throw new Error("Behaviors should be constructed with Behavior()");t.push(n)}e.behaviors=t,ji[e.is]=t}else e.behaviors=null},ua=function(e){var t="/"+$i+++"/"+Y(),r={};for(var n in e)r[n]="data"===n?Ni(e[n]):e[n];return r.is=t,la(r),r.options=Ri,ki[t]=sa(r),r.definitionFilter=Ci.Behavior.callDefinitionFilter(r),Ci.registerBehavior(r),r.is},ca=e=>Ci.Component.getComponentOptions(e).domain.split("/",1)[0],da=e=>Li.get(e),pa=(e,t,r)=>{var n=Ci.Component.getComponentOptions(t).domain,o=Ci.Component.getMethod(t,"__export__"),i=n===e?Ci.Element.getMethodCaller(t):null;if(o){var a=n===e?r:null,s=o.call(Ci.Element.getMethodCaller(t),a);return void 0===s?i:s}return i},fa=(e,t,r)=>{var n=da(e),o=Ci.Component.getComponentOptions(n).domain,i=n.shadowRoot;if(r)return i.querySelectorAll(t).map((t=>pa(o,t,e)));var a=i.querySelector(t);return a?pa(o,a,e):null},ha=(e,t,r)=>{e!==ga&&Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})};function _a(){}var ga=_a.prototype=Object.create(Object.prototype,{is:{get(){return da(this).is},set(e){ha(this,"is",e)}},id:{get(){var e=da(this);return Ci.Component.getComponentOptions(e).writeOnly?"":e.id},set(e){ha(this,"id",e)}},getPageId:{get:()=>function(){return"pageId:"+da(this).__treeManager__.viewId},set(e){ha(this,"getPageId",e)}},router:{get(){return da(this).__pageRouter__},set(e){ha(this,"router",e)}},pageRouter:{get(){return(e=>{for(var t=da(e),r=Ci.Component.getComponentOptions(t).domain;;){var n=t.ownerShadowRoot;if(!n)break;if(!(n instanceof Ci.ShadowRoot))return null;var o=n.getHostNode();if(!o)return null;if(Ci.Component.getComponentOptions(o).domain!==r)return null;t=o}return t})(this).__pageRouter__},set(e){ha(this,"pageRouter",e)}},renderer:{get(){var e=da(this).__treeManager__;return be(e.viewId)},set(e){ha(this,"renderer",e)}},dataset:{get(){var e=da(this);return Ci.Component.getComponentOptions(e).writeOnly?null:e.dataset},set(e){ha(this,"dataset",e)}},properties:{get(){return this.__data__},set(e){ha(this,"properties",e)}},data:{get(){return this.__data__},set(e){ha(this,"data",e)}},setData:{get:()=>u.useTracedApiEnd((function(e,t){var r=da(this),n=r.__treeManager__;return u.traceBeginAPI("setData",{is:this.is,viewId:n.viewId}),"function"==typeof t&&n.operationFlow.registerSetDataCallback(t,this,r),r.setData(e)})),set(e){ha(this,"setData",e)}},groupSetData:{get:()=>function(e){var t=da(this).__treeManager__;t.operationFlow.start(Date.now()),t.operationFlow.push([v.FLOW_GROUP]);var r=null;try{e.call(this)}catch(e){r=e}if(t.operationFlow.push([v.FLOW_GROUP_END]),t.operationFlow.end(),r)throw r},set(e){ha(this,"setData",e)}},replaceDataOnPath:{get(){return(e,t)=>da(this).replaceDataOnPath(e,t)},set(e){ha(this,"replaceDataOnPath",e)}},mergeDataOnPath:{get(){return(e,t)=>da(this).mergeDataOnPath(e,t)},set(e){ha(this,"mergeDataOnPath",e)}},applyDataUpdates:{get(){return()=>da(this).applyDataUpdates()},set(e){ha(this,"applyDataUpdates",e)}},hasBehavior:{get(){return e=>da(this).hasBehavior(e)},set(e){ha(this,"hasBehavior",e)}},triggerEvent:{get(){return(e,t,r)=>da(this).triggerEvent(e,t,r)},set(e){ha(this,"triggerEvent",e)}},createSelectorQuery:{get(){return()=>u._createSelectorQuery({},ca(da(this))).in(this)},set(e){ha(this,"createSelectorQuery",e)}},createIntersectionObserver:{get(){return e=>u._createIntersectionObserver(this,e,ca(da(this)))},set(e){ha(this,"createIntersectionObserver",e)}},createMediaQueryObserver:{get(){return e=>u._createMediaQueryObserver(this,e,ca(da(this)))},set(e){ha(this,"createMediaQueryObserver",e)}},getOpenerEventChannel:{get(){return()=>this.__eventChannel},set(e){ha(this,"getOpenerEventChannel",e)}},applyAnimation:{get(){return(e,t,r,n,o)=>{var i=da(this);!function(e,t,r,n,o,i,a,s){var l=`${Math.random()}-${+new Date}`;"function"==typeof a&&(t.applyAnimationCbMap[l]=a),t.operationFlow.push([v.FLOW_SET_NODE_ANIMATION_INFO,{hasCallback:"function"==typeof a,reqId:l,nodeId:t.nodeId.getNodeId(e),webviewId:r,selector:n,options:o,type:i?"animeJS":void 0,isLastAnimation:s}])}(i,i.__treeManager__,this.__wxWebviewId__,e,t,r,n,o)}},set(e){ha(this,"applyAnimation",e)}},clearAnimation:{get(){return(e,t,r)=>{var n=da(this);!function(e,t,r,n,o,i){var a=`${Math.random()}-${+new Date}`;"function"==typeof i?t.clearAnimationCbMap[a]=i:"function"==typeof o&&(t.clearAnimationCbMap[a]=o),t.operationFlow.push([v.FLOW_CLEAR_NODE_ANIMATION_INFO,{hasCallback:"function"==typeof t.clearAnimationCbMap[a],reqId:a,nodeId:t.nodeId.getNodeId(e),webviewId:r,selector:n,options:o}])}(n,n.__treeManager__,this.__wxWebviewId__,e,t,r)}},set(e){ha(this,"clearAnimation",e)}},animate:{get(){return(e,t,r,n,o)=>{if("function"==typeof n)o=n;else if(void 0!==n){var i=da(this),a=i.__treeManager__;return void a.operationFlow.push([v.FLOW_SET_NODE_ANIMATION_INFO,{type:"scrollTimeline",nodeId:a.nodeId.getNodeId(i),selector:e,options:t,duration:r,timeline:n}])}for(var s=vr(t,r),l=0;l<s.length;++l){var u="animeJS"===s[l].type;delete s[l].type,l===s.length-1?this.applyAnimation(e,s[l],u,o,!0):this.applyAnimation(e,s[l],u)}}},set(e){ha(this,"animate",e)}},applyAnimatedStyle:{get(){return(e,t,r,n)=>{var o=da(this),i=o.__treeManager__,a=i.viewId,s=u.worklet.registerJsValue(t);Promise.resolve().then((()=>{!function(e,t,r,n,o,i,a){var s=`${Math.random()}-${+new Date}`,l="function"==typeof a;l&&(t.animatedStyleCbMap[s]=a),t.operationFlow.push([v.FLOW_SET_NODE_ANIMATED_STYLE,{hasCallback:l,reqId:s,nodeId:t.nodeId.getNodeId(e),pageId:r,selector:n,updaterId:o,userConfig:i}])}(o,i,a,e,s,r,n)}))}},set(e){ha(this,"applyAnimatedStyle",e)}},clearAnimatedStyle:{get(){return(e,t,r)=>{var n=da(this),o=n.__treeManager__;!function(e,t,r,n,o,i){var a=`${Math.random()}-${+new Date}`,s="function"==typeof i;s&&(t.animatedStyleCbMap[a]=i),t.operationFlow.push([v.FLOW_CLEAR_NODE_ANIMATED_STYLE,{hasCallback:s,reqId:a,nodeId:t.nodeId.getNodeId(e),pageId:r,selector:n,styleIds:o}])}(n,o,o.viewId,e,t,r)}},set(e){ha(this,"clearAnimatedStyle",e)}},selectOwnerComponent:{get(){return e=>{var t=da(this);return Ci.Component.getComponentOptions(t).writeOnly?null:(e=>{var t=da(e),r=Ci.Component.getComponentOptions(t).domain,n=t.ownerShadowRoot;if(!(n instanceof Ci.ShadowRoot))return null;var o=n.getHostNode();return o?pa(r,o,e):null})(this)}},set(e){ha(this,"selectOwnerComponent",e)}},selectComponent:{get(){return e=>{var t=da(this);return Ci.Component.getComponentOptions(t).writeOnly?null:fa(this,e,!1)}},set(e){ha(this,"selectComponent",e)}},selectAllComponents:{get(){return e=>{var t=da(this);return Ci.Component.getComponentOptions(t).writeOnly?[]:fa(this,e,!0)}},set(e){ha(this,"selectAllComponents",e)}},getRelationNodes:{get(){return e=>((e,t)=>{var r=da(e).getRelationNodes(t);return null===r?null:r.map((e=>Ci.Element.getMethodCaller(e)))})(this,e)},set(e){ha(this,"getRelationNodes",e)}},getTabBar:{get:()=>function(e){var t=da(this).__treeManager__;return"function"==typeof e?t.tabRoot?(e(Ci.Element.getMethodCaller(t.tabRoot)),Ci.Element.getMethodCaller(t.tabRoot)):(ns(t.viewId).then((()=>{!t.tabDestroyed&&t.tabRoot&&e(Ci.Element.getMethodCaller(t.tabRoot))})),null):t.tabDestroyed||!t.tabRoot?null:Ci.Element.getMethodCaller(t.tabRoot)},set(e){ha(this,"getTabBar",e)}},exitState:{get(){return this.__exitState__},set(e){ha(this,"exitState",e)}},setInitialRenderingCache:{get:()=>function(e){var t=da(this).__treeManager__;null===e?Za(t):Xa(t,e)},set(e){ha(this,"exitState",e)}},setUpdatePerformanceListener:{get:()=>function(e,t){var r=da(this),n=r.__treeManager__,o=n.nodeId.getNodeId(r);"function"==typeof t?(r.__updatePerformanceListener__=t,n.operationFlow.push([v.ENABLE_UPDATE_PERFORMANCE_STAT,o,e])):(r.__updatePerformanceListener__=null,n.operationFlow.push([v.DISABLE_UPDATE_PERFORMANCE_STAT,o]))},set(e){ha(this,"exitState",e)}},getPassiveEvent:{get:()=>function(e){wx.getPassiveEvent(this.__wxWebviewId__,e)},set(e){ha(this,"exitState",e)}},setPassiveEvent:{get:()=>function(e){wx.setPassiveEvent(this.__wxWebviewId__,e)},set(e){ha(this,"exitState",e)}}}),va=function(e,t,r){var n=t[r+".json"]||{};void 0!==n.styleIsolation&&(e.options||(e.options={}),e.options.styleIsolation=n.styleIsolation),void 0!==n.pureDataPattern&&(e.options||(e.options={}),e.options.pureDataPattern=new RegExp(n.pureDataPattern))},ma=function(e,t){var r,n;e.using=Mi[e.is]=Hi(e.is,t),e.generics=Fi[e.is]=Qi(e.is,t),e.placeholder=Ui[e.is]=zi(e.is,t),r=e.is,((n={isXrComp:"xr-frame"===Yi(e.is,t),xrFrameTouchEventBubble:Ki(e.is,t)}).isXrComp||n.xrFrameTouchEventBubble)&&(to[r]=n),la(e);var o=e.is+".wxml",i={path:o,func:Xn[o]||t[o]||null};e.template=i,null===e.template.func&&s.warn(`[componentRegistration] Generate function of ${e.is} not found in data thread`),Bi[e.is]=sa(e,o);var a=Ci.registerElement(e),l=Object.create(ga,{constructor:{value:_a,writable:!0,configurable:!0}});Ci.Behavior.prepare(a.behavior);var u=a.behavior.methods;for(var c in u)l[c]=u[c];return Zn(e.is+".js",(t=>{t(),(e=>{var t=Bi[e];Ts.list().forEach((r=>{ge(v.UPDATE_COMPONENT_DEF,[t],r.viewId),[r.root,r.tabRoot].forEach((t=>{t&&V(t,1,(t=>{if(t instanceof Ci.Component&&t.is===e){var n=t===r.root;n&&r.lifetimeListener&&r.lifetimeListener.call(r.root,"onUnload"),lo(t,r),n&&r.lifetimeListener&&(r.lifetimeListener.call(r.root,"onLoad"),r.lifetimeListener.call(r.root,"onShow"))}}))}))}))})(e.is)})),l},ya=function(e,t,r,n){var o=n||__wxAppCurrentFile__,i=r||__wxAppCode__,a=i[o+"on"];if(!o||!a)return console.error("Component constructors should be called while initialization. A constructor call has been ignored."),"";var s=o.slice(0,-3);if(a.component&&"simple"===a.component.type)return function(e,t,r,n,o){va(e,o,t);var i={is:t,using:Hi(t,o),properties:e.properties,externalClasses:e.externalClasses,options:Pi},a=e.options||{};i.options=Pi,i.options.multipleSlots=a.multipleSlots||!1,i.options.writeOnly=!0,i.options.writeIdToDOM=!1,i.options.domain="simple://"+(n||"/"),i.options.styleIsolation=a.styleIsolation||"",i.options.addGlobalClass=a.addGlobalClass||!1,i.options.innerDataExclude=null,i.options.virtualHost=!1,Bi[t]=sa(i,t+".wxml"),i.is}(e,s,0,t,i),s;va(e,i,s),Ea(s,e.methods);var l=Ci.Behavior.callDefinitionFilter(e),c={is:s,properties:e.properties,data:Ni(e.data),methods:e.methods,behaviors:e.behaviors,lifetimes:e.lifetimes,pageLifetimes:e.pageLifetimes,created:e.created,attached:e.attached,ready:e.ready,moved:e.moved,detached:e.detached,saved:e.saved,restored:e.restored,relations:e.relations?Gi(o,e.relations):void 0,externalClasses:e.externalClasses,observers:e.observers,definitionFilter:l,options:Pi,initiator(){this.__customConstructor__=ya,this.__pageRouter__=u.createRouter(s,this.__treeManager__.viewId);var e=Object.create(p);Li.set(e,this),Ci.Element.setMethodCaller(this,e),Object.defineProperties(e,{__data__:{value:this.data,writable:!0,enumerable:!1},__wxWebviewId__:{value:this.__treeManager__.viewId,writable:!0,enumerable:!1}})}},d=e.options||{};c.options=Pi,c.options.multipleSlots=d.multipleSlots||!1,c.options.writeOnly=d.writeOnly||!1,c.options.writeIdToDOM=!1,c.options.domain=(d.writeOnly?"wo://":"")+(t||"/"),c.options.styleIsolation=d.styleIsolation||"",c.options.addGlobalClass=d.addGlobalClass||!1,c.options.innerDataExclude=d.pureDataPattern||null,c.options.virtualHost=d.virtualHost||!1;var p=ma(c,i);return c.is},ba=function(e,t,r,n){var o=n||__wxAppCurrentFile__;if(!o)return console.error("Page constructors should be called while initialization. A constructor call has been ignored."),"";var i=r||"undefined"!=typeof __wxAppCode__&&__wxAppCode__||{},a=Object.create(null),s={methods:{}};for(var l in e)"data"===l?s.data=e.data:"function"==typeof e[l]?s.methods[l]=e[l]:"methods"===l?a.methods=e.methods:s[l]=e[l];var c=(e=>{if(!e)return!1;if(e instanceof Array){for(var t=0;t<e.length;t++){var r=String(e[t]);if("wx://"!==r.slice(0,5)&&!ki[r])return console.warn('"behaviors" list contains non-behavior items. The whole list is ignored.'),!1}return!0}return!1})(s.behaviors),d=o.slice(0,-3);for(var p of(va(s,i,d),c&&Ci.Behavior.callDefinitionFilter(s),Object.keys(s)))"data"!==p&&"methods"!==p&&(a[p]=s[p]);Ea(d,s.methods);var f={is:d,behaviors:c?s.behaviors:void 0,data:Ni(s.data),methods:s.methods,properties:void 0===e.properties?s.properties:void 0,lifetimes:void 0===e.lifetimes?s.lifetimes:void 0,pageLifetimes:void 0===e.pageLifetimes?s.pageLifetimes:void 0,created:void 0===e.created?s.created:void 0,attached:void 0===e.attached?s.attached:void 0,ready:void 0===e.ready?s.ready:void 0,moved:void 0===e.moved?s.moved:void 0,detached:void 0===e.detached?s.detached:void 0,saved:void 0===e.saved?s.saved:void 0,restored:void 0===e.restored?s.restored:void 0,relations:void 0===e.relations&&s.relations?Gi(o,s.relations):void 0,externalClasses:void 0===e.externalClasses?s.externalClasses:void 0,observers:void 0===e.observers?s.observers:void 0,options:Pi,initiator(){this.__customConstructor__=ba,this.__pageRouter__=u.createRouter(d,this.__treeManager__.viewId);var e=Object.create(_);Li.set(e,this),Ci.Element.setMethodCaller(this,e),Object.defineProperties(e,{__data__:{value:this.data,writable:!0,enumerable:!1},__wxWebviewId__:{value:this.__treeManager__.viewId,writable:!0,enumerable:!1}})}},h=s.options||{};f.options.multipleSlots=!1,f.options.writeOnly=!1,f.options.writeIdToDOM=!0,f.options.domain=t||"/",f.options.styleIsolation=h.styleIsolation||"shared",f.options.addGlobalClass=!1,f.options.innerDataExclude=h.pureDataPattern||null,f.options.virtualHost=h.virtualHost||!1;var _=ma(f,i);return _.__freeData__=a,f.is},wa="_worklet_factory_",Aa={},Ea=(e,t)=>{Aa[e]={},Object.keys(t||{}).forEach((r=>{if(r.startsWith("_")&&r.endsWith(wa)){var n=r.slice("_".length,-wa.length);Aa[e][n]=t[r]}}))},Ia=0,Sa={},Ca=(e,t,r)=>new Promise((n=>{var o=Ts.get(r).nodeId.getNodeId(e);Sa[Ia]=n,ge(v.REQUEST_WORKLET_METHOD,{methodName:t,nodeId:o,reqId:Ia},r),Ia++}));Ie(v.RESPONSE_WORKLET_METHOD,(e=>{var t=e[0].reqId,r=Sa[t];"function"==typeof r&&(delete Sa[t],r(e[0].workletId))}));var Ta=!0,Oa=e=>{(e=>{var t=Ao++;Eo.push(t);try{e(t)}catch(e){throw Eo.pop(),e}Eo.pop()})((()=>{xa(e)}))},xa=e=>{fn+=1;var t,r,n,o,a,l=Date.now(),u=e.operationFlow.iterator,c=u.expectStart(),d=u.nextStepType();if(d===v.FLOW_INITIAL_CREATION)Na(e,v.FLOW_INITIAL_CREATION),gn(c,l,Date.now(),2);else if(d===v.FLOW_INITIAL_RENDERING_CACHE)Na(e,v.FLOW_INITIAL_RENDERING_CACHE);else if(d===v.FLOW_CREATE_TAB)Na(e,v.FLOW_CREATE_TAB),gn(c,l,Date.now(),3);else if(d===v.FLOW_SET_ROOT_PROPERTIES){var p=u.nextStep();Kn(e.root,p[1],p[2],p[3])}else if(d===v.FLOW_DESTROY_PAGE)u.nextStep(),Ma(e);else if(Wi.call(Is,u.nextStepType())){var f=Is[u.nextStepType()],h=u.nextStep().slice(1);f(e.compManager,h)}else{var _=Date.now(),g=u.nextStep();if(g[0]===v.FLOW_UPDATE){var m=g[1],y=e.nodeId.getNodeById(m),b=g[2];if(y){if(b.length){var A=Ci.Component.getDataProxy(y);A.setChanges(b),A.doUpdates(void 0,!1),Io(m,(t=>({isMergedUpdate:!1,dataPaths:t.withDataPaths?b.map((e=>e[0])):void 0,pendingStartTimestamp:c,updateStartTimestamp:l,updateEndTimestamp:Date.now(),pageId:e.viewId})))}}else s.warn(`[flowUpdate] node ${g[1]} not found`),u.skipToEnd()}else if(g[0]===v.FLOW_GROUP){var E=u.nextStep();if(E[0]!==v.FLOW_GROUP_END)throw new Error(`Framework inner error (expect FLOW_GROUP_END but get ${w(E[0])})`)}else if(g[0]===v.FLOW_REPLACE_PLACEHOLDER){var I=g[1];e.compManager.getAndClearPendingPlaceholderReplacement(I).replacers.forEach((e=>{e()}))}else if(g[0]===v.FLOW_HOT_UPDATE){var S=e.nodeId.getNodeById(g[1]);S?S.__templateInstance._resetShadowChildren(S,S.data,e):u.skipToEnd()}else{if(g[0]!==v.FLOW_HOT_UPDATE_RESET)throw new Error(`Framework inner error (expect an update event but get ${w(g[0])})`);var C=e.nodeId.getNodeById(g[1]);lo(C,e)}((e,t,r,n)=>{i.speedReport({key:e,timeMark:{startTime:t,endTime:r},force:"reRenderTime"!==e,data:n})})("reRenderTime",_,Date.now()),Ta&&5===((e,t,r)=>(vn+=fn,yn+=r-t,bn+=hn,wn+=_n,An+=r-e,fn=0,hn=0,_n=0,mn+=1))(c,l,Date.now())&&(Ta=!1,t=1,r=Math.ceil(yn/(mn||1)),n=Math.ceil(wn/(bn||1)),o=Math.ceil(An/(mn||1)),a=[vn,mn,r,bn,n,1,o,t].map(encodeURIComponent).join(","),void 0!==i&&i.reportKeyValue({key:"SetDataPerf",value:a,force:!0}))}u.expectEnd()},Na=(e,t)=>{s.info(`[OperationFlow] executing init flow with type ${w(t)}`);var r,n=t===v.FLOW_CREATE_TAB,o=t===v.FLOW_INITIAL_RENDERING_CACHE,i=e.operationFlow.iterator,a=i.nextStep(),l=a[1],u=a[2],c=p(),h=null;if("skyline"===c)r=d().getContext(e.viewId);else if("scl"===c){r={mainRoot:f.getTabBarContainer()}}else"xr-frame"===c&&(r=xrFrame.getOrCreateContext(e.viewId));if(n){if(e.tabNodeId=u,s.info(`[OperationFlow] creating tab bar comp <${l}> ok, pageId=${e.viewId}`),"skyline"===c){var _=d().getTabBarContext();e.tabRoot=h=window.__TAB_BAR__=Ci.Component.createWithContext("tab-bar",Ci.Component._list[l],_,e),"function"==typeof h.__domElement.setStyleScope&&h.__domElement.setStyleScope(Ci.getStyleScopeId(Ci.Component._list[l].options.classPrefix))}else"scl"===c?e.tabRoot=h=window.__TAB_BAR__=Ci.createElement("tab-bar",Ci.Component._list[l]):"xr-frame"===c?s.info(`[OperationFlow] unexpected xr-frame tabb bar, pageId=${e.viewId}`):e.tabRoot=h=window.__TAB_BAR__=Ci.createElement("tab-bar",Ci.Component._list[l]);s.info(`[OperationFlow] create tab bar comp ok, pageId=${e.viewId}`)}else if(o){if(!l)return void bi(null);h=Ci.createElement("initial-rendering-cache",Ci.Component._list[l])}else{var g=a[3]||{};e.rootNodeId=u,s.info(`[OperationFlow] creating root component on view thread, pageId=${e.viewId}`),wx.traceBeginEvent("Framework","createRootComponent"),"skyline"===c?(e.root=h=window.__DOMTree__=Ci.Component.createWithGenericsAndContext("wx-page",Ci.Component._list[l],g,r,e),"function"==typeof h.__domElement.setStyleScope&&h.__domElement.setStyleScope(Ci.getStyleScopeId(Ci.Component._list[l].options.classPrefix))):"xr-frame"===p()?e.root=h=window.__DOMTree__=Ci.Component.createWithGenericsAndContext("wx-xr-element",Ci.Component._list[l],g,r,e):e.root=h=window.__DOMTree__=Ci.Component.createWithGenerics("body",Ci.Component._list[l],g,e),wx.traceEndEvent(),s.info(`[OperationFlow] create root component on view thread ok, pageId=${e.viewId}`)}if(e.nodeId.allocNodeId(h,u),h.setAttribute("is",l),un.restoring&&!n){var y=un.idDataMap[e.nodeId.getNodeId(h)];Ci.Component.replaceWholeData(h,y,null),ni(un.restoring),un.restoring=null,un.idDataMap=null}if((a=i.nextStep())[0]!==t)throw new Error(`Framework inner error (expect ${w(t)} end but get ${w(a[0])})`);if(e.nodeId.addNode(h),n)if("skyline"===c){s.info("[OperationFlow] attaching tabBar to skyline");var b=d(),A=b.getTabBarContext();h.__domElement.setStyle("pointer-events: none;"),A.attach(h.__domElement),Ci.Element.pretendAttached(h),b.insertToInspecteeRoots(h),e.__attached=!0,s.info("[OperationFlow] attach tabBar to skyline done")}else if("scl"===c)s.info("[OperationFlow] attaching tabBar to scl"),r.mainRoot.appendChild(h),s.info("[OperationFlow] attaching tabBar to scl");else{var E=Ci.createElement("wx-tab-bar-wrapper",Ci.Component._list["wx://tab-bar-wrapper"]);E.appendChild(h),document.documentElement.insertBefore(E.$$,document.body),Ci.Element.pretendAttached(E),e.tabDestroyed&&E.removeChild(h)}else if(o){var I=document.createElement("wx-initial-rendering-cache-wrapper");if(I.setAttribute("style","height: 0; overflow: hidden"),I.appendChild(h.$$),document.documentElement.insertBefore(I,document.body),(a=i.nextStep())[0]!==v.FLOW_INITIAL_RENDERING_CACHE)throw new Error("Framework inner error (expect initial rendering end but get another)");V(h,1,(e=>{e.triggerLifeTime("cacheAttached")})),bi(h,a[1]),e.nodeId.removeNode(h),document.documentElement.removeChild(I)}else{if("skyline"===c){s.info(`[WABaseLib.Critical] attach root element to skyline, pageId=${e.viewId}`);var S=d(),C=S.getContext(e.viewId);if(S.useCustomRoute(e.viewId)){s.info(`[WABaseLib.Critical] useCustomRoute, pageId=${e.viewId}`);var T=C.createElement("empty","host");T.setStyle("overflow: hidden;"),T.appendChild(h.__domElement),h.__domElement.forceDetached(),C.attach(h.__domElement,T),S.attachCustomRoute(e.viewId,T)}else s.info(`[WABaseLib.Critical] useNormalRoute, pageId=${e.viewId}`),C.attach(h.__domElement);S.insertToInspecteeRoots(h),e.__attached=!0}else"webview"===p()&&(document.body=h.$$);V(h,1,(e=>{e.triggerLifeTime("cacheAttached")})),"webview"===c&&function(e){gi&&Date.now();var t=vi(window.__route__);if("static"!==t){if("dynamic"!==t){var r=m.envVersion;"develop"!==r&&"trial"!==r||yi()}return!1}mi(e)}(h),Ci.Element.pretendAttached(h)}s.info(`[OperationFlow] init flow type ${w(t)} execution ok`)},Ra={},Pa=()=>{tn.setStartOperation(Oa)},Da=!1,La=(e={})=>{var t=p(),r="skyline"===t?S:C;if(ye(r,t),"reLaunch"!==e.openType&&"autoReLaunch"!==e.openType||(Fa(r),Da=!1),!Da){Da=!0,s.info(`[VD] newTabBar, tabBarViewId=${r}`),Ga[r]=!0,Ts.create(r),Se(r);var n=Ts.get(r);if(n.operationFlow.unblock(),"skyline"===t){var o=d().getTabBarContext();__webviewEngine__.getStyleSheetManager(r).registerBackendContext(o)}if("scl"===t)n.compManager.injectComponentsRecursively([T],(()=>{ge(v.SCL_CONTEXT_READY,{},r)}))}},Ba=(e,t)=>{if(!Ts.get(e)){s.info(`[VD] newPage, pageId=${e}`),ye(e,p());var r=Ts.create(e).compManager;if(Ga[e]=!1,Qa[e]=[],za[e]=[],Se(e),Oi(e,(()=>{if(s.info(`[WebviewInjectFirstPage] onMainPageFrameReady, isLazyLoad=${Ji()}, pageId=${e}, isFirstPage=${m.isFirstPage}`),Ji()&&m.isFirstPage&&"webview"===p()){var t=m.appLaunchInfo.path,r=t.replace(/\.html$/,"").replace(/^\//,"");r=Zi(r),s.info(`[WebviewInjectFirstPage] entryPath=${t}, pageId=${e}, rootCompPath=${r}`);var n=Ts.get(e).compManager;setTimeout((()=>{(e=>{var t="ios"===m.platform,r=m.isLazyLoad,n=m.isFirstPage,o=m.appLaunchInfo.path.replace(/\.html$/,"").replace(/^\//,""),i=qo(o),a="__APP__"===i,l=[101,111].includes(m.appLaunchInfo.preloadType),u=t&&r&&n&&a&&l;if(s.info(`[fixPluginInjectionMiss] isIOS=${t} isLazyLoad=${r} isFirstPage=${n} isMainPackage=${a} isPreload=${l}, isNeedFix=${u}`),u){var c=[];Object.values(m.plugins||{}).filter((e=>e.subpackage.includes(i))).forEach((e=>{var t=e.provider,r=void 0!==window[`__pluginFrameStartTime_${t}__`];s.info(`[fixPluginInjectionMiss] pluginId=${t} isPluginInjected=${r}`),r||c.push(`__plugin__/${t}/pageframe.js`)})),s.info(`[fixPluginInjectionMiss] loadJsFiles to webview: [${c.join(",")}]`),Re(c,(()=>{e()}))}else e()})((()=>{r=Zi(r),n.setInitialSubPackage(r),n.injectComponentsRecursively([r],(()=>{Ra[e].on("inject",(()=>{ta(r),ea(r)}))}),!0)}))}))}})),Ra[e]=X(["inject"]),Ra[e].on("inject",(()=>{"webview"===p()&&ts(e)})),m.onReady((()=>{Ji()&&M()?Oi(e,(()=>{"skyline"===p()?r.injectComponentsRecursively([T],(()=>{d().onPageReady(e,(()=>{var r="autoReLaunch"===t.openType||"reLaunch"===t.openType;t.isTabPage&&(k(t.path)?(ts(e,r),j()):U()),Ra[e].notify("inject")}))})):r.injectComponentsRecursively([T],(()=>{Ra[e].notify("inject")}))})):Ra[e].notify("inject")})),"skyline"===p()){var n=jo();__webviewEngine__.addStyleSheetIndexGroup(""),Object.keys(n).forEach((e=>{var t=`${n[e]}__plugin__/${e}/`;__webviewEngine__.addStyleSheetIndexGroup(t)})),d().onPageReady(e,(r=>{var n,o,i,a,s,l;(__webviewEngine__.getStyleSheetManager(e).registerBackendContext(r),t.isTabPage)&&(k(t.path)?(La(t),null===(n=window)||void 0===n||null===(o=n.__TAB_BAR__)||void 0===o||null===(i=o.__domElement)||void 0===i||i.setStyle("display: flex; pointer-events: none;")):null===(a=window)||void 0===a||null===(s=a.__TAB_BAR__)||void 0===s||null===(l=s.__domElement)||void 0===l||l.setStyle("display: none; pointer-events: none;"))}))}}},ka=e=>{var t=Ts.get(e);if(s.info("[skyline] getDomTreeByPageId tm: ",typeof t),void 0!==t&&void 0!==t.root)return t.root},Ma=e=>{if("webview"!==p()){var t=e.viewId;if(s.info(`[destroyPage] pageId=${t}`),Ci.Element.pretendDetached(e.root),Ts.destroy(t),ja(null),delete Ga[t],delete Qa[t],delete za[t],delete Ra[t],Ae(t),(e=>{delete ue[e],delete ce[e]})(t),"skyline"===p()){var r=d();r.markDestroyContext(t),r.removeFromInspecteeRoots(e.root),__webviewEngine__.removeStyleSheetManager(t),y.emit("SKYLINE_DESTROY_PAGE",t)}else"xr-frame"===p()&&(xrFrame.getOrCreateContext(t).destroy(),delete window.__DOMTree__)}},Fa=e=>{if("webview"!==p()){s.info(`[CustomTabBar] destroyTabBar pageId=${e}`);var t=Ts.get(e);t&&(null!=t&&t.tabRoot&&Ci.Element.pretendDetached(t.tabRoot),Ts.destroy(e),delete Ga[e],delete Qa[e],delete za[e],delete Ra[e],"skyline"===p()&&(__webviewEngine__.removeStyleSheetManager(e),d().removeFromInspecteeRoots(t.root)))}},ja=e=>{var t;window.__DOMTree__=null!==e?null===(t=Ts.get(e))||void 0===t?void 0:t.root:null};"skyline"===p()&&wx.subscribe("onAppRouteDone",(e=>{ja(e.webviewId)}));var Ua={String:String,Number:Number,Boolean:Boolean,Object:Object,Array:Array,null:null},$a=(e,t)=>{for(var r in e.properties){var n=e.properties[r];n.type=Ua[n.type],n.optionalTypes&&(n.optionalTypes=n.optionalTypes.map((e=>Ua[e])))}var o="";t||(o=Es.getComponentClassPrefix(e.is));var i=e.options,a=!(!i.writeIdToDOM&&!t);e.options=Di,e.options.multipleSlots=i.multipleSlots||!1,e.options.writeOnly=i.writeOnly||!1,a||"xr-frame"===p()?e.options.idPrefixGenerator=null:e.options.idPrefixGenerator=Y,e.options.domain=i.domain,e.options.randomizeTagName=!1,e.options.innerDataExclude=(e=>{if(!e)return null;var t=e.lastIndexOf("/"),r=e.slice(1,t),n=e.slice(t+1);return new RegExp(r,n)})(i.innerDataExcludeString),e.options.virtualHost=i.virtualHost;var l=!1;if(i.styleIsolation){var u=i.styleIsolation;"page-"===u.slice(0,5)&&(l=!0,u=u.slice(5)),"isolated"===u?(o=Es.getComponentClassPrefix(e.is),e.options.addGlobalClass=!1):"strong-isolated"===u?(o=Es.getComponentClassPrefix(e.is),e.options.addGlobalClass=!1,e.options.randomizeTagName=!0):"apply-shared"===u?(o=Es.getComponentClassPrefix(e.is),e.options.addGlobalClass=!0):"shared"===u&&"/"===i.domain?(o="",e.options.addGlobalClass=!1):l=!1}else e.options.addGlobalClass=i.addGlobalClass||!1;e.options.classPrefix=o,i.hasObservers&&(e.observers={"**"(){}}),ne()&&(e.observers=nn()(nn()({},e.observers||{}),{},{"**"(e){h.invoke("componentDataChanged",{nodeId:this.__wxTmplId,data:e})}})),window.__customComponentMode__="undefined"!=typeof __wxAppCode__&&__wxAppCode__[e.template];var c=window.__generateFunc__;return"undefined"!=typeof __wxAppCode__&&__wxAppCode__[e.template]?c=__wxAppCode__[e.template]:s.warn(`[componentRegistration] Generate function of ${e.is} not found in view thread`),e.template={path:e.is+".wxml",func:c},Ci.registerElement(e),{disableAppWxss:l,classPrefix:o}},Wa=(e,t)=>{var r=__webviewEngine__.getStyleSheetManager(e,t);t.forEach((e=>{var t="__APP__"===e?"":e;r.setIndex(t+"app.fpiib"),Jo(e,(e=>{e.forEach((e=>{r.setIndex(`${t}__plugin__/${e.provider}/app.fpiib`)}))}))}))},qa=(e,t,r)=>{var n="xr-frame"===p()?J(e):e,o=p();t||(window.__forceSaveStates__=oi,"function"==typeof wx.onWebViewWillManuallyTerminate&&wx.onWebViewWillManuallyTerminate(oi));var i,[a,s,l,u]=n,c=Ts.get(r);t||(c.rootCompName=l);for(var d=0;d<a.length;d++){var h=a[d];h.options.hasObservers&&(h.observers={"**"(){}}),h.options=Ri,Ci.registerBehavior(h)}"skyline"===o?((i=__webviewEngine__.getStyleSheetManager(r)).preventUpdate(),i.setStyleSheet("app",0,2)):"webview"===o&&(i=window.__styleSheetManager2__).preventUpdate();for(var _=function(){var e=s[g],r=Fo(e.is);r.startsWith("plugin-private://")&&!c.compManager.__injectedComponents.has(r)&&c.compManager.__injectedComponents.add(r);var n=e.is===l&&!t;"scl"===o&&t&&(n=!0);var{disableAppWxss:a,classPrefix:u}=$a(e,n);a&&e.is===l&&!t&&("webview"===o?__webviewEngine__.disableStyleElement("app.wxss"):"skyline"===o&&i.disableStyleSheet("app"));var d=e.is+".wxss",p="undefined"==typeof __wxAppCode__?null:__wxAppCode__[d];if("skyline"===o){p&&!i.usePreCompiled&&p("",{allowIllegalSelector:!0});var h=0;"function"==typeof Ci.getStyleScopeId&&(h=Ci.getStyleScopeId(u));var _=e.is===l?1:0;i.setStyleSheet(r,h,_)}else"scl"===o?f.loadStyleBincode(`${r}.fpcssb`):"webview"===o&&(a&&e.is===l&&!t&&__webviewEngine__.disableStyleElement("app.wxss"),p&&((e.is!==l||t)&&p(u&&u+"--",{allowIllegalSelector:!0}),Zn(d,(e=>{e?e(u&&u+"--",{allowIllegalSelector:!0}):window.__styleSheetManager__.setCss("./"+d,""),wx.triggerPageReRender()}))))},g=0;g<s.length;g++)_();for(var v in Zn("app.wxss",(e=>{e?e("",{allowIllegalSelector:!0}):window.__styleSheetManager__.setCss("./app.wxss",""),wx.triggerPageReRender()})),"webview"!==o&&"skyline"!==o||(i.allowUpdate(),i.requestUpdate()),u)Wi.call(Ci.Component._list,u[v])&&(Ci.Component._list[v]=Ci.Component._list[u[v]])},Ha=!1;Ie(v.LOAD_COMPONENT_DEF,((e,t,r)=>{s.info(`[loadComponentDef] isFirstPage=${m.isFirstPage}, isLazyLoad=${Ji()}`);var n=e[0];if(!Ji()&&Ci.Component._list[n]&&"//"===Ci.Component._list[n].options.domain&&ea(n,r),Ji()&&("webview"!==p()||!m.isFirstPage)){var o=Ts.get(r).compManager;o.setInitialSubPackage(n);var i="webview"===p()?new Promise((e=>{"ios"===wx.getPlatform()&&m.clientVersion<402658304&&"undefined"==typeof __pageFrameStartTime__&&!Ha?(we(v.LOAD_APP_PKG_READY,(()=>{Re(["common.app.js","webview.app.js"],(()=>{Ha=!0,e()}),!0)}),0),ge(v.LOAD_APP_PKG,{})):e()})):Promise.resolve();Oi(r,(()=>{i.then((()=>{o.injectComponentsRecursively([n],(()=>{Ra[r].on("inject",(()=>{ta(n),ea(n,r)}))}),!0)}))}))}}));var Ga={},Qa={},za={};Ie(v.COMPONENT_DEF,((e,t,r)=>{Ga[r]?qa(e,!1,r):Qa[r].push(e),Ts.get(r).compManager.setInitialSubPackage(e[2])})),Ie(v.COMPONENT_DEF_TAB,((e,t,r)=>{Ga[r]?"webview"!==p()||"scl"===p()?qa(e,!0,r):Ra[r].on("inject",(()=>{qa(e,!0,r)})):za[r].push(e)}));var Ya=e=>{Ga[e]=!0,"webview"===p()&&ts(e),Qa[e].forEach((t=>{qa(t,!1,e)})),Qa[e]=[],za[e].forEach((t=>{Ra[e].on("inject",(()=>{qa(t,!0,e)}))})),za[e]=[]},Ka=(e,t,r,n,o)=>{u.traceBeginEvent("Framework","doDataThreadInitCreation");var i=[[],[],r=Mo(r),ci],a=Object.create(null);aa(i,r,a,"",t);var l=oa(r);K(l).forEach((e=>{aa(i,e,a,"",t)})),s.info(`[doDataThreadInitCreation] sending component def to view, viewId=${e}, rootCompName=${r}`),no(e),ge(v.COMPONENT_DEF,i,e),(e=>{Je&&ge(v.BANNING_MAP,[Je],e)})(e),t.rootCompName=r,t.rootNodeId=Y(),s.info(`[OperationFlow] creating root component on data thread, use different shadowRoot=${void 0!==n}, viewId=${e}`),t.operationFlow.start(),t.operationFlow.push([v.FLOW_INITIAL_CREATION,r,t.rootNodeId,l]);var c=void 0===n?Ci.Component.createWithGenerics("body",Ci.Component._list[r],l,t):n.createComponent("body",Ci.Component._list[r],o,t);return pn(c,t),t.root=c,t.usedDef="skyline"===be(e)?J(i):i,Ci.Element.getMethodCaller(c).__wxExparserNodeId__=t.nodeId.allocNodeId(c,t.rootNodeId),t.operationFlow.push([v.FLOW_INITIAL_CREATION]),t.nodeId.addNode(c),u.traceEndEvent(),s.info(`[OperationFlow] create root component on data thread ok, viewId=${e}`),c};Ie(v.UPDATE_COMPONENT_DEF,((e,t,r)=>{var[n]=e,o=Ts.get(r);Ci.Component._list[n.is]&&$a(n,o.rootCompName===n.is)}));var Va=(e,t)=>{we(v.WX_EVENT,(r=>{var n=r[2],o=r[1],i=t.nodeId.getNodeById(r[0]);if(i){var a=Ci.Element.getMethodCaller(i),s=n._userTap;if(n._requireActive&&!L.isFramesetMode()){if(!(e=>{var t=L.getCurrentPagesByDomain("");return t[t.length-1].__wxWebviewId__===e||e===S})(e))return;delete n._requireActive}if(n._relatedInfo&&(L.DisplayReporter.setEventRelatedInfo(n._relatedInfo),delete n._relatedInfo),"function"!=typeof a[o])console.warn('Component "'+i.is+'" does not have a method "'+o+'" to handle event "'+n.type+'".');else if(s)Ln((()=>{var e=l.startTraceHandler(n);u.setWxInterfaceIsInvokeInTap(n.type),Ci.safeCallback("Event Handler",a[o],a,[n],i),u.unsetWxInterfaceIsInvokeInTap(),l.endTraceHandler(e)}));else{var c=l.startTraceHandler(n);Ci.safeCallback("Event Handler",a[o],a,[n],i),l.endTraceHandler(c)}}}),e),we(v.MODEL_VALUE_CHANGE,((e,t,r)=>{var{data:n,modelValueName:o,nodeId:i}=e[0];Vi(n,o,r,i)}),e)},Ja=(e,t)=>{t.listenerInited||(t.listenerInited=!0,Va(e,t),we(v.REQUEST_SAVE,(([t])=>{si(e,t)}),e),we(v.CALL_METHOD_FROM_WXS,(e=>{$n(e)}),e),function(e,t){we(v.ANIMATION_TRANSITION_END,(e=>{if(e&&e[0]&&e[0].reqId){var r=t.applyAnimationCbMap[e[0].reqId];"function"==typeof r&&(delete t.applyAnimationCbMap[e[0].reqId],wi.safeCallback("Animation",r,null,[]));var n=JSON.parse(e[0].args);t.operationFlow.push([v.FLOW_SET_NODE_NEXT_ANIMATION_INFO,n])}}),e),we(v.CLEAR_ANIMATION_COMPLETE,(e=>{if(e&&e[0]&&e[0].reqId){var r=t.clearAnimationCbMap[e[0].reqId];"function"==typeof r&&(delete t.clearAnimationCbMap[e[0].reqId],wi.safeCallback("Clear Animation",r,null,[]))}}),e)}(e,t),function(e,t){we(v.APPLY_NODE_ANIMATED_STYLE_END,(e=>{if(e&&e[0]&&e[0].reqId){var r=e[0].styleId,n=t.animatedStyleCbMap[e[0].reqId];"function"==typeof n&&(delete t.animatedStyleCbMap[e[0].reqId],Si.safeCallback("AnimaedStyle",n,null,[{styleId:r}]))}}),e),we(v.CLEAR_NODE_ANIMATED_STYLE_END,(e=>{if(e&&e[0]&&e[0].reqId){var r=t.animatedStyleCbMap[e[0].reqId];"function"==typeof r&&(delete t.animatedStyleCbMap[e[0].reqId],Si.safeCallback("Clear AnimaedStyle",r,null,[]))}}),e)}(e,t),function(e,t){we(v.RESPONSE_VIEW_INFO,(([e,r])=>{if(r){var n=t.viewInfoCbMap[r];n&&n(e)}}),e)}(e,t),((e,t)=>{we(v.UPDATE_PERFORMANCE_STAT,(r=>{var[n,o]=r,i=t.nodeId.getNodeById(n);if(i&&i.__updatePerformanceListener__){var a=yo.Element.getMethodCaller(i);yo.safeCallback("Update Performance Listener",i.__updatePerformanceListener__,a,[o],i)}i&&"function"==typeof So&&So(o,i,e)}),e)})(e,t),we(v.REQUEST_WORKLET_METHOD,((e,t,r)=>{var n,o,{methodName:i,nodeId:a,reqId:s}=e[0],l=e=>ge(v.RESPONSE_WORKLET_METHOD,{reqId:s,workletId:e},r),c=Ts.get(r).nodeId.getNodeById(a),d=null!==(n=null==Aa||null===(o=Aa[c.is])||void 0===o?void 0:o[i])&&void 0!==n?n:null;if("function"==typeof d){var p=Ci.Element.getMethodCaller(c),f=d.call(p);if("function"==typeof f)return void l(u.worklet.registerJsValue(f))}l(null)}),e))},Xa=(e,t)=>{var r=Mo(e.rootCompName),n=Y();e.operationFlow.start(),e.operationFlow.push([v.FLOW_INITIAL_RENDERING_CACHE,r,n]);var o=Ci.createElement("initial-rendering-cache",Ci.Component._list[r],e);return Ci.Element.getMethodCaller(o).__wxExparserNodeId__=e.nodeId.allocNodeId(o,n),e.operationFlow.push([v.FLOW_INITIAL_RENDERING_CACHE]),e.nodeId.addNode(o),o.setData(t),e.operationFlow.push([v.FLOW_INITIAL_RENDERING_CACHE,t]),e.operationFlow.end(),e.nodeId.removeNode(o),o},Za=e=>{e.operationFlow.start(),e.operationFlow.push([v.FLOW_INITIAL_RENDERING_CACHE,"",null]),e.operationFlow.end()},es={},ts=(e,t=!1)=>{void 0!==__wxAppCode__[T+".wxml"]?es[e]||(es[e]=!0,s.info(`[CustomTabBar] sendTabBarCreationRequest pageId=${e}`),ge(v.REQUEST_TAB,[t],e)):s.info(`[CustomTabBar] no ${T} def, ignore requestTab`)};Ie(v.DESTROY_TAB,((e,t,r)=>{s.info(`[CustomTabBar] destroyTabBar pageId=${r}`),Ts.get(r).tabDestroyed=!0,U()})),Ie(v.HIDE_TAB,((e,t,r)=>{s.info(`[CustomTabBar] hideTabBar pageId=${r}`),U()})),Ie(v.SHOW_TAB,((e,t,r)=>{s.info(`[CustomTabBar] showTabBar pageId=${r}`),Ts.get(r).tabDestroyed=!1,j()}));var rs={},ns=e=>new Promise((t=>{rs[e]=t})),os=(e,t)=>{var r=(()=>{var e,t,r=M();return ls(T)||(r=!1),"singlePage"===(null===(e=m)||void 0===e||null===(t=e.appLaunchInfo)||void 0===t?void 0:t.mode)&&(r=!1),r})(),n=us[e];if("string"==typeof n&&Ho(n))s.info(`[CustomTabBar] "${n}" is in independent subPackage, ignore`);else{var o=B(n),i=be(e)||"webview";if("scl"!==o&&i!==o&&(o=i),s.info(`[checkAndExecuteTabbarCreation] viewId=${e}, isGeneratorFunctionReady=${t}, needRenderCustomTabBar=${r}, renderer=${o}`),r&&("scl"!==o||t)){var a=Ts.get(e)||Ts.create(e);Ja(e,a),a.tabRoot||a.tabDestroyed||(a.compManager.injectComponentsRecursively([T]),((e,t,r,n)=>{if(s.info(`doDataThreadTabbarCreation viewId: ${e}, tabCompName: ${r}, renderer: ${n}`),"webview"!==n){var o,i,a=N();if("skyline"===n)o=S;else{if("scl"!==n)throw Error(`[CustomTabBar] renderer: ${n} not support`);o=C}var l=a.has(o);if(l)i=a.get(o).tm,a.add(e,n,i),t.tabCompName=i.tabCompName,t.tabNodeId=i.tabNodeId,t.tabRoot=i.tabRoot,t.tabUsedDef=i.tabUsedDef;else{ye(o,n);var u=[[],[],r=Mo(r),{}];i=Ts.create(o),aa(u,r,Object.create(null),"",i),Ja(o,i),ge(v.COMPONENT_DEF_TAB,u,o);var c=Y();t.tabCompName=i.tabCompName=r,t.tabNodeId=i.tabNodeId=c,a.add(o,n,i),a.add(e,n,i),i.operationFlow.start(),i.operationFlow.push([v.FLOW_CREATE_TAB,r,c]);var d=Ci.createElement("tab-bar",Ci.Component._list[r],i);t.tabRoot=i.tabRoot=d,t.tabUsedDef=i.tabUsedDef=u,Ci.Element.getMethodCaller(d).__wxExparserNodeId__=i.nodeId.allocNodeId(d,i.tabNodeId),i.operationFlow.push([v.FLOW_CREATE_TAB]),i.nodeId.addNode(d),Ci.Element.pretendAttached(d)}t.nodeId.addNode(t.tabRoot),!l&&i.operationFlow.end(),"function"==typeof rs[e]&&rs[e]()}else{N().add(e,n,t);var p=[[],[],r=Mo(r),{}];aa(p,r,Object.create(null),"",t),ge(v.COMPONENT_DEF_TAB,p,e),t.tabCompName=r,t.tabNodeId=Y(),t.operationFlow.start(),t.operationFlow.push([v.FLOW_CREATE_TAB,r,t.tabNodeId]);var f=Ci.createElement("tab-bar",Ci.Component._list[r],t);t.tabRoot=f,t.tabUsedDef=p,Ci.Element.getMethodCaller(f).__wxExparserNodeId__=t.nodeId.allocNodeId(f,t.tabNodeId),t.operationFlow.push([v.FLOW_CREATE_TAB]),t.nodeId.addNode(f),Ci.Element.pretendAttached(t.tabRoot),t.operationFlow.end()}})(e,a,T,o),t&&ge(v.FLUSH_BLOCKED,[],"skyline"===o?S:"scl"===o?C:e),a.rootCompName&&F(a,a.rootCompName,e))}}},is=!1,as=[],ss=[];m.onReady((()=>{ss.forEach((e=>{"skyline"!==be(e)&&os(e,!0)})),ss=null})),we(v.REQUEST_TAB,((e,t,r)=>{e[0]&&hs(r,!0),"scl"!==B(us[r])||is?"skyline"===be(r)?os(r,!0):null!==ss?ss.push(r):os(r,!0):as.push(r)}),"$GLOBAL"),we(v.SCL_CONTEXT_READY,((e,t,r)=>{is=!0,as.forEach((e=>{os(e,!0)}))}),C),Ie(v.FLUSH_BLOCKED,((e,t,r)=>{s.info(`[flushBlocked] pageId=${r}`),Ts.get(r).operationFlow.flushBlocked()}));var ls=e=>(e=Mo(e),Wi.call(ci,e)&&(e=ci[e]),Bi[e]),us={},cs=(e,t)=>{us[e]=t},ds=(e,t,r,n,o)=>{s.info(`[addView] viewId=${e}, rootCompPath=${t}`),u.traceBeginEvent("Framework","addView"),cs(e,t);var a=Ts.get(e)||Ts.create(e);a.lifetimeListener=r,a.operationFlow.unblock();try{"webview"===be(e)&&os(e,!1)}catch(e){i.thirdErrorReport({error:e})}a.compManager.setInitialSubPackage(t),F(a,t,e),(e=>{"function"==typeof So&&e.operationFlow.push([v.ENABLE_GLOBAL_UPDATE_PERFORMANCE_STAT,Co])})(a),Ja(e,a),t=Mo(t);var l=(m.subPackages||[]).filter((e=>!!e.allExtendedComponents));ge(v.LOAD_COMPONENT_DEF,[t,l],e),a.compManager.injectComponentsRecursively([t],null,!0,!0),ls(t)||(s.error(`[addView] viewId=${e} rootCompPath=${t} not found`),t="wx://not-found");var c=Ka(e,a,t,n,o);return u.traceEndEvent(),c},ps=(e,t,r=!0)=>{s.info(`[attachView] viewId=${e}`);var n=Ts.get(e);if(n){var o=n.root,i=!1,a={};0===o.is.indexOf("wx://inner-page")?(a=t,i=!0):Object.keys(t).forEach((e=>{Ci.Component.hasProperty(o,e)&&(a[e]=t[e],i=!0)})),i&&n.root.setData(a),eo()&&(n.initialRootData=t),r&&Ci.Element.pretendAttached(o),n.root.__treeManager__.operationFlow.end()}},fs=(e,t=!0)=>{s.info(`[removeView] viewId=${e}`);var r=Ts.get(e);r&&(t&&Ci.Element.pretendDetached(r.root),Ts.destroy(e),Ae(e),pe.add(e),u.worklet.removeRouteContext(e),r.operationFlow.sendInIndividualFlow([v.FLOW_DESTROY_PAGE]))},hs=(e,t=!1)=>{var r=N();if(t&&(r.remove(e),r.remove(S),ss=null),r.has(e)){var n=r.getRenderType(e);r.remove(e),"skyline"===n&&r.remove(S),ss=null}},_s=e=>{var t=Ts.get(e);if(!t)return!1;var r=t.root;return!!r&&Ci.Element.isAttached(r)},gs=new WeakMap,vs={onNegotiation:(e,t,r)=>{var n=r||__wxAppCode__,o=da(e);if(!o.__isXrFrame__)throw new Error("component is not a xr-frame component");var i=(e=>{for(var t=e;;){var r=t.ownerShadowRoot;if(!r)break;if(!(r instanceof Ci.ShadowRoot))return null;var n=r.getHostNode();if(!n)return null;t=n}return t})(o);if("skyline"!==be(i.__treeManager__.viewId))throw new Error("component is not in a skyline page");if(!0!==(n[o.is+".json"]||{}).xrFrameTouchEventBubble)throw new Error('component should set "xrFrameTouchEventBubble" to true in configuration');gs.set(o,t)},negotiate:(e,t,r)=>{var n=gs.get(e);"function"==typeof n?n(t,r):r(!0,!0)}};we(v.LOAD_APP_PKG,((e,t,r)=>{Pe("__APP__",(()=>{ge(v.LOAD_APP_PKG_READY,{},r)}))}),"$GLOBAL");var ms=!1,ys=Object.prototype.hasOwnProperty,bs=()=>"devtools"===m.platform||"devtool"===m.serviceRuntime,ws=()=>"undefined"!=typeof __LAZY_CODE_LOADING_CHUNK_MAP__,As=!0;class Es{constructor(e,t){this.__viewId=e,this.__treeManager=t,this.__loadedSubPackage=new Set,this.__injectedSubPackage=new Set,this.__logPrefix=`[CompMgr] [data] $[${this.__viewId}]`,this.__log=e=>{s.info(`${this.__logPrefix} ${e}`)},this.__ensureComponentNotifier={},this.__placeholderReplacement=null,this.__pendingReplacement=new Map,this.__injectedComponents=new Set([]),this.__restoreInjectNotifier=null}getRestoredData(){return[Array.from(this.__loadedSubPackage),Array.from(this.__injectedSubPackage),Object.fromEntries(Es.__classPrefixMap),Array.from(this.__injectedComponents),this.__treeManager.rootCompName]}getRestoreInjectNotifier(){return this.__restoreInjectNotifier||(this.__restoreInjectNotifier=X(["inject"])),this.__restoreInjectNotifier}restore(e){var[t,r,n,o,i]=e,a=()=>{ta(i),ea(i),this.getRestoreInjectNotifier().notify("inject")};this.setSubPackageLoaded(t),this.batchInjectSubPackages(r,(()=>{Ji()?this.batchInjectComponents(o,a):a()})),Es.__usedClassPrefix=new Set(Object.values(n)),Es.__classPrefixMap=new Map(Object.entries(n))}onRestoreInjectDone(e){this.getRestoreInjectNotifier().on("inject",e)}recurseUsingComponents(e){if(!Ji())return e;var t=__wxAppCode__,r="undefined"!=typeof __WXML_DEP__&&__WXML_DEP__||{},n=new Set,o=new Set,i=e=>{if(!n.has(e)){if(n.add(e),ys.call(t,e+".json")){o.add(e);var a=Hi(e,t),s=Qi(e,t),l=zi(e,t);for(var u of Object.keys(a))ys.call(l,u)?ys.call(a,l[u])&&i(a[l[u]]):i(a[u]);for(var c of Object.keys(s)){var d=s[c];"string"==typeof d.default&&i(d.default)}}(r["./"+e+".wxml"]||[]).forEach((e=>{var t=e.substr(2,e.length-7);i(t)}))}};e.forEach((e=>{i(e);var t=oa(Mo(e));K(t).forEach((e=>{o.add(e)}))}));var a=Array.from(o);return this.__log(`recurseUsingComponents(${JSON.stringify(e)}) => [${a.length} components]`),a}batchLoadSubPackages(e,t){this.__log("loadSubPackages begin: "+e.join(", "));var r=!0;setTimeout((()=>{r&&je({type:"subpackage",errMsg:"loadSubpackage: timeout",subpackage:e})}),ke);var n=0;Promise.all(e.map((e=>new Promise((t=>{Pe(e,t)}))))).then((o=>{r=!1;var i=[];o.forEach((e=>{var{res:t,pkg:r,cost:o}=e;"fail"===t?je({type:"subpackage",subpackage:[r],errMsg:"loadSubpackage: fail"}):i.push(r),n+=o})),this.__log(`loadSubPackages end: ${e.join(", ")}, cost: ${n}`),this.setSubPackageLoaded(i),this.__treeManager.operationFlow.sendInIndividualFlow([v.FLOW_SET_SUBPACKAGE_LOADED,i]),t(i)}))}setSubPackageLoaded(e){this.__log("setSubPackageLoaded: "+e.join(", ")),e.forEach((e=>{this.__loadedSubPackage.add(e)}))}batchInjectSubPackages(e,t){this.__log("injectSubPackages: "+e.join(", "));var r=e.filter((e=>!this.__injectedSubPackage.has(e))).map((e=>"__APP__"===e||"/"===e.slice(-1)?e:e+"/"));if(bs()){De(r),this.setSubPackageInjected(r)}else{var n=[];r.forEach((e=>{n.push(...Xo(e,(t=>{this.__log(`getEntryFile ${e}: ${t}`)})))})),Te(n),this.setSubPackageInjected(r)}}batchInjectComponents(e,t,r=!1){if(!Ji())return-1;var n=e.map((e=>Fo(e))).filter((e=>!this.__injectedComponents.has(e))).filter((e=>!e.includes("://")));this.__log(`injectComponents: [${n.length} components]`);var o=(()=>{if(bs())return Be(n);var e=[];if(ws()){var t=new Set(n.map((e=>__LAZY_CODE_LOADING_CHUNK_MAP__[e]||e)));e=Array.from(t).map((e=>`${e}.appservice.js`))}else e=n.map((e=>`${e}.appservice.js`));var{res:o,cost:i}=Te(e,{isPageInitialScript:r});return"failed"===o&&je({type:"components",components:n,errMsg:"loadComponents: fail"}),i})();return n.forEach((e=>{this.__injectedComponents.add(e)})),o}setSubPackageInjected(e){this.__log("setSubPackageInjected: "+e.join(", ")),e.forEach((e=>{"__APP__"!==e&&0!==e.indexOf("/")&&(e=`/${e}`),Jo(e,(e=>{Object.keys(e).forEach((t=>{var r=(e=>{var t=e.provider,r=Ii.Component._list;return Object.keys(r).filter((e=>0===e.indexOf(`plugin-private://${t}/`)))})(e[t]);r.forEach((e=>{var t=Fo(e);this.__injectedComponents.add(t)}))}))}))})),e.forEach((e=>{this.__injectedSubPackage.add(e)}))}setInitialSubPackage(e){var t=[qo(e)];Ho(e)||t.includes("__APP__")||t.push("__APP__"),this.setSubPackageLoaded(t),this.setSubPackageInjected(t),(()=>{if(!ms){ms=!0;var e="disabled";m.isLazyLoad&&(e="undefined"!=typeof __LAZY_CODE_LOADING_CHUNK_MAP__?"requiredComponentChunks":"requiredComponents"),s.info(`LazyCodeLoading: ${e}`)}})()}shouldUsePlaceholder(e){var t=Fo(e),r=qo(t),n=this.__loadedSubPackage.has(r);return Ji()&&(n=n&&this.__injectedComponents.has(t)),!n}doLazyLoadReport(e,t){var r=En(),n=As;As=!1;var o=Object.keys(__wxAppCode__).filter((e=>e.endsWith(".json"))).length;r.set("isFirstPage",n),r.set("totalComps",o),r.set("loadedComps",e),r.set("loadTime",t)}injectComponentsRecursively(e,t,r=!1,n=!1){if(Ji()){var o=this.recurseUsingComponents(e),i=this.batchInjectComponents(o,(e=>{0}),n);r&&this.doLazyLoadReport(o.length,i)}}ensureComponents(e,t,r){var n,o=e.map((e=>qo(e)));n=o,(o=Array.from(new Set(n))).some((e=>!Ho(e)))&&!o.includes("__APP__")&&o.unshift("__APP__"),o=o.filter((e=>!this.__loadedSubPackage.has(e))),this.batchLoadSubPackages(o,(n=>{this.__treeManager.operationFlow.sendInIndividualFlow([v.FLOW_INJECT_SUBPACKAGE,t,n]),Ji()&&this.__treeManager.operationFlow.sendInIndividualFlow([v.FLOW_INJECT_COMPONENT,t,e]),this.batchInjectSubPackages(n),this.injectComponentsRecursively(e),r()}))}pendPlaceholderReplacement(e){var t=this.getPlaceholderReplaceData();this.finishPlaceholderReplacement(),this.__pendingReplacement.set(e,t),this.__log(`set [${e}] as pending placeholder replacements (${t.replacers.length} replacers)`)}getAndClearPendingPlaceholderReplacement(e){var t=this.__pendingReplacement.get(e);return this.__pendingReplacement.delete(e),t}getEnsureComponentsNotifier(e){if(!this.__ensureComponentNotifier[e]){var t=["inject","def"];Ji()&&t.push("inject-common"),this.__ensureComponentNotifier[e]=X(t)}return this.__ensureComponentNotifier[e]}destructEnsureComponentsNotifier(e){this.__ensureComponentNotifier[e]&&delete this.__ensureComponentNotifier[e]}injectSubPackageOnReady(e,t){this.batchInjectSubPackages(t,(()=>{var t=Ji()?"inject-common":"inject";this.getEnsureComponentsNotifier(e).notify(t)}))}injectComponentsOnReady(e,t){Ji()&&this.getEnsureComponentsNotifier(e).on("inject-common",(()=>{this.injectComponentsRecursively(t,(()=>{this.getEnsureComponentsNotifier(e).notify("inject")}))}))}appendComponentDef(e,t){this.getEnsureComponentsNotifier(e).on("inject",(()=>{qa(t,!1,this.__viewId),this.getEnsureComponentsNotifier(e).notify("def")}))}waitComponentEnsuring(e,t){this.getEnsureComponentsNotifier(e).on("def",(()=>{t((()=>{this.destructEnsureComponentsNotifier(e)}))}))}doPlaceholderReplace(){var e=Y(),t=this.__treeManager,r=this.getPlaceholderReplaceData();this.finishPlaceholderReplacement();var n=Array.from(r.compNames);this.__treeManager.operationFlow.sendInIndividualFlow([v.FLOW_PEND_PLACEHOLDER_REPLACEMENT,e]),this.__log(`doPlaceholderReplace(${e}) for ${r.replacers.length} placeholder replacements`),this.ensureComponents(n,e,(()=>{ra(t,t.rootCompName,r,e)}))}arrangePlaceholderReplace(e,t){null===this.__placeholderReplacement?this.__placeholderReplacement={compNames:new Set,replacers:[]}:clearTimeout(this.__placeholderReplacement.timer),this.__placeholderReplacement.compNames.add(e),this.__placeholderReplacement.replacers.push(t),this.__placeholderReplacement.timer=setTimeout((()=>{this.doPlaceholderReplace()}),50)}getPlaceholderReplaceData(){return this.__placeholderReplacement}finishPlaceholderReplacement(){this.__placeholderReplacement=null}static getComponentClassPrefix(e){if(Es.__classPrefixMap.has(e))return Es.__classPrefixMap.get(e);var t=e.split(/[^a-z0-9]+/i),r="",n=0,o=0;do{n<t.length?n+=1:o+=1,r=t.slice(-n).join("-"),o>0&&(r+="-"+o),Number(r[0])>=0&&(r="x-"+r)}while(Es.__usedClassPrefix.has(r));return Es.__classPrefixMap.set(e,r),Es.__usedClassPrefix.add(r),r}}Es.__classPrefixMap=new Map,Es.__usedClassPrefix=new Set;var Is={[v.FLOW_PEND_PLACEHOLDER_REPLACEMENT](e,t){var r=t[0];e.pendPlaceholderReplacement(r)},[v.FLOW_COMPONENT_DEF_ADD](e,t){var r=t[0],n=t[1];e.appendComponentDef(r,n)},[v.FLOW_INJECT_SUBPACKAGE](e,t){var r=t[0],n=t[1];e.injectSubPackageOnReady(r,n)},[v.FLOW_INJECT_COMPONENT](e,t){var r=t[0],n=t[1];e.injectComponentsOnReady(r,n)},[v.FLOW_SET_SUBPACKAGE_LOADED](e,t){var r=t[0];e.setSubPackageLoaded(r)},[v.FLOW_WAIT_COMPONENT](e,t){var r=t[0];e.__treeManager.operationFlow.block(),e.waitComponentEnsuring(r,(t=>{e.__treeManager.operationFlow.unblock(),t()}))}},Ss=Object.create(null);class Cs{constructor(e){this.viewId=e,this.listenerInited=!1,this.root=null,this.tabRoot=null,this.tabDestroyed=!1,this.usedDef=null,this.tabUsedDef=null,this.statesData=null,this.operationFlow=new tn(e,this),this.nodeId=new We,this.compManager=new Es(e,this),this.rootNodeId="",this.tabNodeId="",this.rootCompName="",this.tabCompName="",this.applyAnimationCbMap={},this.clearAnimationCbMap={},this.animatedStyleCbMap={},this.viewInfoCbMap={},this.initialRootData=null,this.lifetimeListener=null}static create(e){var t=new Cs(e);return Ss[e]=t,t}static destroy(e){delete Ss[e]}static get(e){return Ss[e]}static listViewId(){var e=[];for(var t of Object.keys(Ss))e.push(Ss[t].viewId);return e}static list(){var e=[];for(var t of Object.keys(Ss))e.push(Ss[t]);return e}static getByNode(e){return e.__treeManager__}}var Ts=Cs,Os=function(e,t){if(null==t){for(var r=Ts.list(),n=0;n<r.length;++n)if(void 0!==r[n].nodeId.getNodeById(e))return r[n].nodeId.getNodeById(e);return null}var o=Ts.get(t);return o?o.nodeId.getNodeById(e):null},xs=function(e,t){var r=void 0!==t?Ts.get(t):Ts.getByNode(e);return r?r.nodeId.getNodeId(e):""},Ns=function(e){var t=Ts.get(e);return t?t.root:""},Rs=function(e){var t=Ts.get(e);return t?t.rootNodeId:""},Ps=function(e){var t=Ts.get(e);return t?t.rootCompName:""},Ds=function(e){var t=Ts.getByNode(e);return t?t.viewId:0};we(v.XR_FRAME_CANVAS_CREATED,function(){var e=He()((function*(e,t,r){var n=Ts.get(r),o=e[0],i=Date.now(),a=yield u.xrFrame.getCanvasContext(o),l=n.nodeId.getNodeById(e[1]).__xrFrameId__;u.xrFrame.assignCanvasNodeIdToXrFrame(o.nodeId,l),s.info(`[xrFrameCreated] service get xrFrame canvasNodeId=${o.nodeId}, pageId=${r}, xrFrameId=${l}`),ge(v.XR_FRAME_CANVAS_READY,[a,i],l)}));return function(t,r,n){return e.apply(this,arguments)}}(),"$GLOBAL");var Ls=function(){Jn=!0},Bs=function(e,t){var r=Vn[e];if(r)return Xn[e]=t,r(t)},ks=c(),Ms=e=>e;ks.addGlobalErrorListener(((e,t)=>{var r=l.getCurrentEventInfo();r&&(r.callErr=e);var n=t.element&&t.element instanceof _a?t.element:null,o=n?na(n):"";return i.thirdErrorReport({source:o,error:e,extend:t.message.replace(/^\[exparser\] \[(error|warning)\] /i,"")}),!1})),ks.addGlobalWarningListener((e=>{console.warn(e.replace(/^\[exparser\] \[(error|warning)\] /i,""))})),ks.globalOptions.createFakeDomElement=!1,ks.globalOptions.inDocument=!1,ks.globalOptions.documentBackend="none",ks.updateDefaultComponent(),g.registerBehavior({is:"wx://form-field",properties:{name:{type:String,public:!0},value:{type:null,public:!0}}}),g.registerBehavior({is:"wx://form-field-group"}),g.registerBehavior({is:"wx://form-field-button"}),g.registerBehavior({is:"wx://style-filter"}),g.registerBehavior({is:"wx://request-filter"}),g.registerBehavior({is:"wx://request-sender"}),g.registerBehavior({is:"wx://component-export",definitionFilter(e){"function"==typeof e.export&&("object"==typeof e.methods?e.methods.__export__=e.export:e.methods={__export__:e.export})}}),(()=>{var e={domain:"//",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!1};["not-found","functional-page"].forEach((t=>{ya({options:e,properties:{}},"//",{[`wx://${t}.json`]:{usingComponents:{}}},`wx://${t}.js`)}))})(),D=t})(),(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new o("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};e.r(r),e.d(r,{App:()=>Re,Behavior:()=>zr,Component:()=>Qr,DisplayReporter:()=>Y,Page:()=>Gr,__createPluginGlobal:()=>Hr,__getCreatePluginGlobal:()=>Wr,__setCreatePluginGlobal:()=>qr,convertComponentAliasToRoute:()=>Ur,getApp:()=>Pe,getCurrentPage:()=>it,getCurrentPages:()=>Pt,getCurrentPagesByDomain:()=>Rt,getCurrentRoute:()=>cr,getGlobalWebviewIds:()=>Dt,getPageByWebviewId:()=>Lt,getPageMetaByWebviewId:()=>Ot,getPipPage:()=>gt,hasPageRoute:()=>xt,isFramesetMode:()=>ht,openNewXrFrame:()=>Lr,setPrivateExtraData:()=>Le,showShareTimelineMenuIfNeeded:()=>oe});var n=_.objectSpread2,a=e.n(n),c=(e,t)=>{for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e},d=()=>{},p=e=>Object.prototype.toString.call(e).split(" ")[1].split("]")[0],h=e=>"Promise"===p(e),g=Object.prototype.toString,v=e=>"[object Object]"===g.call(e),b=(e,t)=>{console.group(`${new Date} ${e}`),console.error(t),console.groupEnd()},w=(e,t)=>{console.group(`${new Date} ${e}`),console.warn(t),console.groupEnd()},A=e=>{var t;null!==(t=m)&&void 0!==t&&t.debug&&console.info(e)},E=(e,t)=>{if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceEngineKnownError"===e.type)throw e;i.errorReport({key:"jsEnginScriptError",error:e,extend:t})}},I=(e,t)=>function(...r){try{return e.apply(e,r)}catch(e){return E(e,t),()=>{}}};class S extends Error{constructor(e){super(`APP-SERVICE-Engine:${e}`),this.type="AppServiceEngineKnownError"}}function C(e,...t){var r;i.__route__=this.__route__,i.__method__=e;try{var n=Date.now();r=this[e](...t);var o=Date.now()-n;o>1e3&&i.slowReport({key:"pageInvoke",cost:o,extend:`at ${this.__route__} page ${e} function`})}catch(t){var a=D.getOwnerPluginAppId(this);i.thirdErrorReport({source:a,error:t,extend:`at ${this.__route__} page ${e} function`})}return i.__route__=i.__method__="",r}var T=Object.assign,O=Object.prototype.hasOwnProperty,x=()=>"devtools"===m.platform,R=e=>{if("string"!=typeof e)return e;var t=e.split("?")[0]||"",r=e.split("?")[1];return t+=".html",void 0!==r?`${t}?${r}`:t};function B(){return u}var k=[];function M(e){if(!k)return e(u);k.push(e)}function F(e,t,r,n){return function(...o){try{return u.traceBeginEvent(e,t,n),r(...o)}finally{u.traceEndEvent()}}}y.onLoad((()=>{k&&(k.forEach((e=>e(u))),k=null)}));var j={},U=!0,$=null,W={},q={},H=null,G=null,Q=null;function z(e={}){var t=e.clickTimestamp;t&&((t=(t=parseInt(t,10))<1e12?1e3*t:t)&&t>0&&($=t),U=e.isLaunch)}class Y{constructor(e,t){this.showOptions={},this.hideOptions={},this.route=e,this.pageType=t||0,this.query={},this.deferred=[],this.showTimeStamp=null,this.pageReadyTime=null,this.showReferpagepath="",this.isentrance=0,this.isInitialLoading=!0,this.startCostTime=null,this.startType=null}static setOnLaunch(e={}){z(e),(W=Object.assign(W,e)).publicLibVersion=m.SDKVersion,W.hostAppId=m.host&&m.host.appId||"",Y._assignForClientOnShow(W,e)}static setOnAppShow(e={}){z(e),W=Object.assign(W,e),Y._assignForClientOnShow(W,e)}static setOnAppHide(e={}){q=Object.assign(q,e)}static setEventRelatedInfo(e){H=e}static _assignForClientOnShow(e,t){e.shortLink=t.shortLink||"",e.scene_note=t.scene_note||t.sceneNote||"",e.referpagepath=t.referpagepath||"",e.usedstate=t.usedstate||t.usedState,e.prescene=t.prescene,e.prescene_note=t.prescene_note||t.presceneNote||"",e.clickTimestamp=Date.now()}checkShowOptions(){var e=W,t=this.showOptions;t.scene=e.scene||0,t.scene_note=e.scene_note,t.sessionid=e.sessionid||e.sessionId,t.usedstate=e.usedstate,t.referpagepath=e.referpagepath,t.clickTimestamp=e.clickTimestamp,t.prescene=e.prescene,t.prescene_note=e.prescene_note,t.apptype=i.getAppType(),t.publicLibVersion=e.publicLibVersion,t.hostAppId=e.hostAppId||"",t.shortLink=e.shortLink||"";var r=this.query,n=[];r&&"object"==typeof r&&Object.keys(r).forEach((e=>{n.push(`${encodeURIComponent(e)}=${encodeURIComponent(r[e])}`)})),t.query=n.join("&")}checkHideOptions(){var e=q,t=this.hideOptions;t.targetAction=e.targetAction||0,t.targetPagePath=e.targetPagePath||"",void 0!==e.usedstate&&(t.usedstate=e.usedstate),void 0!==e.usedState&&(t.usedstate=e.usedState)}static _getNetworkType(){var e=B()._getCurrentNetworkType()||"";return"none"===e&&(e="offline"),e}_checkDeferred(){for(var e=this.deferred;e.length;){e.pop()()}}_reportShowPage(e){this.pageReadyTime?e.costtime=this.pageReadyTime-e.clickTimestamp:e.costtime=0,e.costtime<0&&(e.costtime=0),e.reportTime=Date.now();var t=[e.event_id,e.scene,e.scene_note,e.sessionid,e.usedstate,e.pagepath,e.networktype,e.costtime,e.staytime,e.referpagepath,e.targetAction,e.targetPagePath,e.clickTimestamp,e.publicLibVersion,e.prescene,e.prescene_note,e.isentrance,e.query,e.apptype,e.pagetype,e.anchorTargetText,0,e.clickTimestamp,e.anchorRelatedText,0,e.startCostTime,e.startType,e.reportTime,0,e.hostAppId,e.shortLink].map(encodeURIComponent).map(((e,t)=>-1!==[2,9,11,17].indexOf(t)?(e||"").substr(0,1024):e)).join(",");i.reportKeyValue({key:"Display",value:t,force:!0}),this._submit(),this._reportRealtime(e)}_reportHidePage(e){this.pageReadyTime?e.costtime=this.pageReadyTime-e.clickTimestamp:e.costtime=0,e.costtime<0&&(e.costtime=0),e.reportTime=Date.now();var t=[e.event_id,e.scene,e.scene_note,e.sessionid,e.usedstate,e.pagepath,e.networktype,e.costtime,e.staytime,e.referpagepath,e.targetAction,e.targetPagePath,e.clickTimestamp,e.publicLibVersion,e.prescene,e.prescene_note,e.isentrance,e.query,e.apptype,e.pagetype,e.anchorTargetText,0,e.clickTimestamp,e.anchorRelatedText,0,e.startCostTime,e.startType,e.reportTime,0,e.hostAppId,e.shortLink].map(encodeURIComponent).map(((e,t)=>-1!==[2,9,11,17].indexOf(t)?(e||"").substr(0,1024):e)).join(",");i.reportKeyValue({key:"Display",value:t,force:!0}),this._submit(),this._reportRealtime(e)}_submit(){i.submit(),setTimeout((()=>{i.submit()}),100)}_reportRealtime(e){var t;if(!x()){var r="",n=2;if(m){var o=m.accountInfo,i=m.envVersion;o&&(r=o.appId||""),"release"===i?n=1:"trial"===i&&(n=3)}var a=B().getStableSystemInfo(),s={DeviceModel:a.model||"",DeviceBrand:a.brand||"",OsName:a.platform||"",OsVersion:a.system||"",LanguageVersion:a.language||"",appid:r,appversion:(null===(t=m.appLaunchInfo)||void 0===t?void 0:t.appversion)||0,appstate:n,event_id:e.event_id,scene:e.scene,scene_note:(e.scene_note||"").substr(0,1024),sessionid:e.sessionid,usedstate:e.usedstate,pagepath:e.pagepath,networktype:e.networktype,costtime:e.costtime,staytime:e.staytime,referpagepath:(e.referpagepath||"").substr(0,1024),targetAction:e.targetAction,targetPagePath:(e.targetPagePath||"").substr(0,1024),clickTimestamp:0,publicLibVersion:e.publicLibVersion,prescene:e.prescene,prescene_note:e.prescene_note,isentrance:e.isentrance,query:(e.query||"").substr(0,1024),apptype:e.apptype,pagetype:e.pagetype,anchorTargetText:e.anchorTargetText,clickTime:e.clickTimestamp,anchorTargetRelatedText:e.anchorRelatedText,orientationChangeCount:0,startCostTime:e.startCostTime,startType:e.startType,reportTime:e.reportTime};try{B().operateRealtimeData(1e3,JSON.stringify(s),!0)}catch(e){}try{B().trackWeReportSession(s)}catch(e){}}}setReadyTime(e){this.pageReadyTime=e,this._checkDeferred()}setQuery(e){this.query=e}reportShowPage(){this._checkDeferred(),this.checkShowOptions();var e=Date.now(),t=this.route,r=this.pageType,n=this.showOptions,o=n.referpagepath||"",i=n.clickTimestamp,a=0,s=0,l=0;G&&G!==t&&(o=G+".html",i=e);var u=H;H=null;var c={anchorTargetText:"",anchorRelatedText:""};this.isInitialLoading&&u&&u.anchorTapTime&&i-u.anchorTapTime<1e3&&(c.anchorTargetText=u.anchorTargetText,c.anchorRelatedText=u.anchorRelatedText),G=t,this.showTimeStamp=e,this.showReferpagepath=o,Q!==n.sessionid&&(Q=n.sessionid,a=1),1===a&&(s=e-$,l=U?1:2,this.startCostTime=s,this.startType=l),this.isInitialLoading=!1,this.isentrance=a;var d=Object.assign({},n,c,{event_id:1,pagepath:t+".html",networktype:Y._getNetworkType(),staytime:0,referpagepath:o,targetAction:0,targetPagePath:"",isentrance:a,pagetype:r,clickTimestamp:i,startCostTime:s,startType:l});this.pageReadyTime?this._reportShowPage(d):this.deferred.push((()=>{this._reportShowPage(d)}))}reportHidePage(e,t){this._checkDeferred(),this.checkShowOptions(),this.checkHideOptions();var r=Date.now(),n=this.route,o=this.pageType,i=this.showOptions,a=this.hideOptions,s=this.showReferpagepath||"",l=this.showTimeStamp?r-this.showTimeStamp:0;this.showTimeStamp=null;var u=void 0!==a.usedstate?a.usedstate:i.usedstate,c=a.targetAction,d=a.targetPagePath,p=0,f=0;e&&(c=t?1:2,d=e+".html"),1===this.isentrance&&(p=null!==this.startCostTime?this.startCostTime:p,f=null!==this.startType?this.startType:f,this.startCostTime=null,this.startType=null);var h=Object.assign({},i,{event_id:2,pagepath:n+".html",usedstate:u,networktype:Y._getNetworkType(),staytime:l,referpagepath:s,targetAction:c,targetPagePath:d,isentrance:this.isentrance||0,pagetype:o,anchorTargetText:"",anchorRelatedText:"",orientationChangeCount:this.orientationChangeCount||0,startCostTime:p,startType:f});this._reportHidePage(h)}}var V={kbone:0};function J(){try{(t=>{var r=[];try{Object.keys(e.g.__modules__||{}).forEach((e=>{if(e.indexOf("miniprogram-render/")>=0&&(V.kbone=1),0===e.indexOf("miniprogram_npm/")){var t=e.indexOf("/",16),n=e.substring(16,t);"@"===n[0]&&(t=e.indexOf("/",t+1),n=e.substring(16,t)),r.push(n)}}));for(var n=r.length;n>=0;n--)for(var o=0;o<n;o++)r[o]===r[n]&&r.splice(n,1)}catch(e){}var a=[0,0,0,0,0,0,0,JSON.stringify(V),r.join(";")].map(encodeURIComponent).join(",");i.reportKeyValue({key:"CustomComponent",value:a,force:!0})})(),t=P.Component._list,r=Object.keys(t),n=["miniprogram-recycle-view","miniprogram-barrage","wxml-to-canvas","weui-miniprogram","miniprogram-navigation-bar"],o=/^miniprogram_npm\/(.+$)/,a={},r.forEach((e=>{var r=t[e].is,i=o.exec(r);if(i){var s=i[1],l=s.indexOf("/"),u=s.substring(0,l),c=s.substring(l+1);"@"===u[0]&&(l=s.indexOf("/",l+1),u=s.substring(0,l),c=s.substring(l+1)),(n.indexOf(u)>-1||/^@miniprogram-component-plus\//.test(u))&&(a[u]=a[u]||[],a[u].push(c))}})),Object.keys(a).forEach((e=>{i.reportKeyValue({key:"NpmExtendedLib",value:[e,a[e].join(";")].map(encodeURIComponent).join(","),force:!0})})),i.submit()}catch(e){}var t,r,n,o,a}var X={appLaunchTime:0,appFgTime:0,appRouteTime:0,newPageTime:0,pageReadyTime:0},Z={},ee=e=>!!/(?:^|\/)__(wx|plugin)__\//.test(e)||!!("undefined"!=typeof __wxAppCode__&&__wxAppCode__[e+".json"]||{}).usingComponents,te=(e,t)=>e.__wxExparserNodeId__&&hasOwnProperty.call(Object.getPrototypeOf(e),t)||hasOwnProperty.call(e,t),re=e=>{B().shareTimeline(e,{beforeAll:e=>{B().invokeInnerShareCallbacks("shareTimeline",e),B().reportNativeUiEvent("doShareTimeline",e)}})},ne=(e={},t)=>{if(null!=Z[t]){var r=Z[t],n=r.page,o={from:e.fromShareTimeLineButton?"button":"menu",target:e.target},i=te(n,"onShareTimeline")&&C.call(n,"onShareTimeline",o)||{},{title:a,query:s}=i,l={title:a||e.title,path:"string"==typeof s?`${r.route}.html?${s}`:r.rawPath.replace(/^\//,"").replace(/(\?|$)/,".html$1")};B().reportNativeUiEvent("onShareTimeline",l),"string"==typeof i.imageUrl&&i.imageUrl?(/^(http|https|wxfile|cloud):\/\//.test(i.imageUrl)?l.imageUrl=i.imageUrl:l.imageUrl=B()._getRealRoute(i.imageUrl,!1),B().getCloudFileUrl([l.imageUrl],"image",(e=>{l.imageUrl=e.data[0].url,re(l)}))):re(l)}},oe=e=>{if(Z[e]){var t=Z[e].page;te(t,"onShareTimeline")&&te(t,"onShareAppMessage")&&B().showShareTimelineMenu()}},ie=(e,t)=>{if(hasOwnProperty.call(Z,t)){var r=Z[t].page;te(r,"onShareTimeline")&&te(r,"onShareAppMessage")?I(ne,"onShareTimeline")({title:"",target:e?e.target:void 0,detail:e?e.detail:void 0,fromShareTimeLineButton:!0},t):w("事件警告","onShareTimeline and onShareAppMessage are both needed")}else w("事件警告",`tapShareButton WebviewId: ${t} not found`)};function ae(){return 7===m.appType}var se=e=>{if("String"!==p(e))throw b("数据路径错误","Path must be a string"),new S("Path must be a string");for(var t=e.length,r=[],n="",o=0,i=!1,a=!1,s=0;s<t;s++){var l=e[s];if("\\"===l)s+1<t&&("."===e[s+1]||"["===e[s+1]||"]"===e[s+1])?(n+=e[s+1],s++):n+="\\";else if("."===l)n&&(r.push(n),n="");else if("["===l){if(n&&(r.push(n),n=""),0===r.length)throw b("数据路径错误","Path can not start with []: "+e),new S("Path can not start with []: "+e);a=!0,i=!1}else if("]"===l){if(!i)throw b("数据路径错误","Must have number in []: "+e),new S("Must have number in []: "+e);a=!1,r.push(o),o=0}else if(a){if(l<"0"||l>"9")throw b("数据路径错误","Only number 0-9 could inside []: "+e),new S("Only number 0-9 could inside []: "+e);i=!0,o=10*o+l.charCodeAt(0)-48}else n+=l}if(n&&r.push(n),0===r.length)throw b("数据路径错误","Path can not be empty"),new S("Path can not be empty");return r},le=(e,t)=>{for(var r,n={},o=e,i=0;i<t.length;i++)Number(t[i])===t[i]&&t[i]%1==0?Array.isArray(o)||(n[r]=[],o=n[r]):v(o)||(n[r]={},o=n[r]),r=t[i],n=o,o=o[t[i]];return{obj:n,key:r}},ue=(e,t)=>{for(var r,n,o=se(t),i=e,a=0;a<o.length;a++)Number(o[a])===o[a]&&o[a]%1==0?Array.isArray(i)||(i=[]):v(i)||(i={}),n=o[a],r=i,i=i[o[a]];return{obj:r,key:n}},ce=null,de=Object.create(null),pe=(e,t,r)=>{ce&&ce.triggerLifeTime("route",[{method:e,url:t,args:r}])},fe=(e,t,r,n,o,i)=>{if("appLaunch"===i)s=()=>{pe("appLaunch",t,{tabBarConfig:m.tabBar,entryPagePath:m.entryPagePath})},f.initScl((e=>{(ce=e.mainRoot.append("frameset",{placeholderImage:"frameset/placeholder.png"})).setPageLifeTimeCallback(((e,t,...r)=>{var n=de[e],o=Lt(n);o&&N.surroundThirdByTryCatch((()=>{o.__callPageLifeTime__("on"+t,...r)}),`at ${t} callback function`)()})),s()}));else if("navigateTo"===i)pe("navigateTo",t);else if("redirectTo"===i)pe("redirectTo",t);else if("switchTab"===i)pe("switchTab",t);else if("reLaunch"===i||"autoReLaunch"===i)pe("reLaunch",t);else if("navigateBack"===i){var a=f.getExparserElementByViewId(o);a&&a.triggerEvent("navigateBack")}else"frameLoad"===i?(de[o]=r,pr(e,t,r,n,{framesetViewId:o})):"frameUnload"===i&&(delete de[o],_r(Ot(r),""));var s},he=!1;function _e(e){var t=B().isIsolatedSubpackage(e);!he&&t?we():he&&!t&&be(),he=t}var ge=[],ve=!0,me={};function ye(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return e}}function be(e){var t=e?ye(e):me;B().emitIsloatedAppShow(t),ge.forEach((e=>{e.preventOnShow||e.app.onShow(t),e.preventOnShow=!1})),me=t}function we(e){B().emitIsloatedAppHide(),ge.forEach((t=>{ae()?t.app.onHide(e):t.app.onHide()}))}function Ae(){!1}function Ee(e={}){var t;if(e.isLaunch?(tt("launch"),Y.setOnLaunch(e),J()):Y.setOnAppShow(e),dr(e.path),t=e.path,(he=B().isIsolatedSubpackage(t))||be(e.__public||e,e.isLaunch),tt("foreground"),ve||e.reLaunch)ve=!1;else{var r=Rt("");r.length&&(ht()?ce&&ce.setGlobalShowStatus(!0):"function"==typeof r[r.length-1].__callPageLifeTime__&&r[r.length-1].__callPageLifeTime__("onShow"),tt("enterPage",r[r.length-1],!0))}}function Ie(e={}){Y.setOnAppHide(e),"hang"===e.mode&&!0;var t=Rt("");if(t.length){ht()?ce&&ce.setGlobalShowStatus(!1):"function"==typeof t[t.length-1].__callPageLifeTime__&&t[t.length-1].__callPageLifeTime__("onHide");var r=it(),n=r.page;tt("leavePage",n,!0);var o="function"==typeof n.onSaveExitState?C.call(n,"onSaveExitState"):void 0;B().saveExitState(r.route,r.rawPath,o)}he||we(e),tt("background")}M((e=>{e.onAppUnhang(Ae),e.onAppShow(Ee),e.onAppHide(Ie)}));var Se,Ce,Te,Oe=["onLaunch","onShow","onHide","onUnlaunch"];class xe{constructor(e={}){var t=this,r=B(),n=r.getLogManager();Oe.forEach((t=>{this[t]=function(...o){var a=e[t]||d;i.__route__="App",i.__method__=t,A(`App: ${t} have been invoked`),s.info(`[Lifetime] call App.${t}`),r.traceBeginEvent("LifeCycle",`App.${t}`);try{a.apply(this,o),n&&n.logApiInvoke&&n.log(`App ${t} have been invoked`),s.info(`App ${t} have been invoked`)}catch(e){i.thirdErrorReport({error:e,extend:`at App lifeCycleMethod ${t} function`})}r.traceEndEvent(),i.__route__=i.__method__=""}.bind(this)}));var o,l,u,c,p=function(n){(e=>"getCurrentPage"===e)(n)?w("关键字保护",`App's ${n} is write-protected`):(e=>{for(var t=0;t<Oe.length;++t)if(Oe[t]===e)return!0;return!1})(n)||("function"==typeof e[n]?t[n]=function(...t){var o;i.__route__="App",i.__method__=n,r.traceBeginEvent("User Script",`App.${n}`);try{o=e[n].apply(this,t)}catch(e){i.thirdErrorReport({error:e,extend:`at App ${n} function`})}return r.traceEndEvent(),o}.bind(t):t[n]=e[n])};for(var f in e)p(f);"function"==typeof this.onError&&r.onError(this.onError),"function"==typeof this.onUnhandledRejection&&r.onUnhandledRejection(this.onUnhandledRejection),"function"==typeof this.onPageNotFound&&r.onPageNotFound(this.onPageNotFound),"function"==typeof this.onThemeChange&&r.onThemeChange(this.onThemeChange),o=this,l=B().getLaunchOptionsSync(),u=m.appLaunchInfo&&m.appLaunchInfo.inBackground,c=ye(l.__public),o.onLaunch(c),u||o.onShow(c),ge.push(a()({app:o},u?{}:{preventOnShow:!0}))}}var Ne={},Re=I(((e={})=>{Object.assign(e,Ne),Ne={},Se=new xe(e)}),"create app instance"),Pe=I(((e={})=>e.allowDefault?Se||Ne:Se),"get app instance"),De=()=>Ce,Le=e=>{s.info(`[privateExtraData] set to [${JSON.stringify(e)}]`),Ce=e},Be=()=>Te;function ke(e){var t=e.referrerInfo&&e.referrerInfo.privateExtraData;if(t){Le(t);var r=Nt();t.functionalPage&&r&&B().publishFunctionalPage(t.functionalPage,[r]),t.functionalPage&&"string"==typeof t.functionalPage.callbackId&&t.functionalPage.callbackId.startsWith("RPP")&&B().requestPluginPaymentEmitter.emit(t.functionalPage)}e.referrerInfo&&e.referrerInfo.openapiInvokeData&&(Te=e.referrerInfo.openapiInvokeData)}M((e=>{e.onAppShow(ke)}));var Me,Fe={},je={},Ue=[],$e=!1,We=[],qe=!1,He=!1,Ge=0,Qe=0,ze=0,Ye=0,Ke=0,Ve=0,Je=null,Xe=null,Ze=(e,t)=>{Object.keys(e.data||{}).forEach((r=>{var n,o,i=e.data[r],a=t&&t.data||{},s=!1;if("$"!==i.charAt(0)||void 0===(n=(e=>{var t=0;switch(e){case"PAGE_TIME":return(t=ze?Date.now()-ze-Ye:0)>=0?t:null;case"APP_TIME":return(t=Ge?Date.now()-Ge-Qe:0)>=0?t:null;case"CURRENT_PAGE":return Xe||null;case"LAST_PAGE":return Je||null;default:return}})(i.substr(1))))if(0!==i.indexOf("$APP")){if(t&&(e.page===t.__route__||"ANY_PAGE"===e.page)){if(0===i.indexOf("$DATASET")){var l=i.replace("$DATASET.","");o=e.dataset||{},(n=le(o,se(l))).obj&&void 0!==n.obj[n.key]&&(je[e.eventID].data[r]=n.obj[n.key],s=!0)}if(0===i.indexOf("$COMP")&&"number"==typeof e.nodeId){var u=D.getNodeById(e.nodeId,e.webviewId);if(!u)return void console.warn(`[自定义分析] 找不到自定义组件里的 "${e.element}" 节点`);var c=P.Element.getMethodCaller(u);c&&(i=i.replace("$COMP.",""),a=c.data)}if(i.indexOf("[]")>-1){if((e.index||[]).forEach((e=>{i=i.replace("[]","["+e+"]")})),i.indexOf("[-1]")>-1||i.indexOf("[]")>-1)return void console.warn(`[自定义分析] 取不到下标，请检查配置（${i}）`);var d=i.match(/\[(\d+)\]\.\$INDEX$/);d&&(je[e.eventID].data[r]=Number(d[1]),s=!0)}if(void 0===(n=ue(a,i)).obj||void 0===n.key||void 0===n.obj[n.key])return void(s||console.warn(`[自定义分析] 取不到该字段，请检查配置（${i}）`));je[e.eventID].data[r]=n.obj[n.key]}}else((e,t)=>{var r=e.data[t],n=Pe()||{},o=r.replace("$APP.",""),i=ue(n,o);if(i.obj&&void 0!==i.obj[i.key]){var a=i.obj[i.key];"number"!=typeof a&&"string"!=typeof a&&"boolean"!=typeof a||(je[e.eventID].data[t]=a)}})(e,r);else null!==n&&(je[e.eventID].data[r]=n)}))},et=(e,r)=>{if("start"!==e.action&&"start_and_report"!==e.action||(je[e.eventID]={eventID:e.eventID,data:{},extra:e.extra}),je[e.eventID]){var n,o,i,a=r||it()&&it().page;Ze(e,a),"report"!==e.action&&"start_and_report"!==e.action||(n=e.eventID,o=a&&a.__route__,i=[],Object.keys(je[n].data).forEach((e=>{i.push({id:e,value:je[n].data[e]})})),je[n].data=i,je[n].page=o,je[n].version=(void 0!==t?t.version:0)||0,je[n].uid=Date.now().toString(16)+Math.random().toString(16).substr(2),je[n].type=0,x()||(console.info("[自定义分析] 上报成功"),console.info(je[n])),B().reportRealtimeAction({actionData:JSON.stringify(je[n])}),je[n]=null)}},tt=(e,t,r)=>{if("pageReady"===e&&t)(e=>{if(e){var t=e.__route__,r=Fe.click,n=[];r&&(r.forEach((e=>{e.page!==t&&"ANY_PAGE"!==e.page||!e.element||n.push({eventID:e.eventID,page:e.page,element:e.element,action:e.action})})),0!==n.length&&B().publishAnalyticsConfig(n,[e.__wxWebviewId__]))}})(t);else if(He)Ue.push(e);else{if("launch"===e&&!qe)return Ge=Date.now(),qe=!0,He=!0,Ue.push(e),void B().getAppConfig({type:1,complete:I((e=>{He=!1,e.data&&(console.info("[自定义分析] 配置拉取成功"),rt(e))}))});if($e){r||("enterPage"===e?(ze=Date.now(),Ye=0,Xe=t&&t.__route__):"leavePage"===e?Je=t&&t.__route__:"background"===e?Ke=Date.now():"foreground"===e&&(Ve=Date.now(),Ke&&Ve>Ke&&(Ye+=Ve-Ke,Qe+=Ve-Ke)));var n=Fe[e];if(n){if("enterPage"===e&&t&&"page/component/index"===t.__route__&&m.accountInfo&&"wxe5f52902cf4de896"===m.accountInfo.appId){var o=0;n.map((e=>e.eventID)).forEach((e=>{1007===e&&o++})),o>1&&i.reportIDKey({key:"demoConfigRepeat"}),i.reportIDKey({key:"demoEnterHomePage"})}var a=["enterPage","leavePage","pageLoad","pageUnload","pullDownRefresh","switchTab"];n.forEach((r=>{r&&(a.indexOf(e)>-1?(t&&r.page===(t&&t.__route__)||"ANY_PAGE"===r.page)&&et(r,t):et(r))}))}}else We.push([e,t,r])}},rt=(e,t)=>{var r={};try{r=JSON.parse(e.data)}catch(e){r={}}var n=it();Fe=(e=>{var t={};return"[object Array]"!==Object.prototype.toString.call(e)||e.forEach((e=>{var r=e.eventTarget;"[object Object]"===Object.prototype.toString.call(r)&&(r=[r]),r.forEach((r=>{var n=r.trigger||"click";t[n]||(t[n]=[]),("click"!==n||/^([.#][a-zA-Z_][^.#]* ?)+$/.test(r.element&&r.element.trim()))&&t[n].push({eventID:e.eventID,page:r.page,element:r.element&&r.element.trim(),data:r.data,action:r.action,extra:e.extra})}))})),t})(r),je={},t||(Ue.forEach((e=>{tt(e,n&&n.page,!0)})),Ue=[]),tt("pageReady",n&&n.page)};M((e=>{e.subscribeAnalyticsReport(((e,t)=>{var r,n,o=e,i=Fe.click;if(i&&("start"===o.action||"start_and_report"===o.action||je[o.eventID])){for(var a=Rt(""),s=0;s<a.length;s++){var l=a[s];if(l.__wxWebviewId__===t){n=l;break}}if(n){for(var u=0;u<i.length;u++){var d=i[u];if(o.eventID===d.eventID&&(o.page===d.page||"ANY_PAGE"===d.page)&&o.element===d.element){d.dataset=o.dataset||{},r=c({},d);break}}r&&(r.index=o.index,r.nodeId=o.nodeId,r.webviewId=t,et(r,n))}}})),e.onAppConfig(I((e=>{console.info("[自定义分析] 收到最新配置"),1===Number(e.type)&&rt(e,!0)}))),e.onAppRouteDone((()=>{$e=!0,We.forEach((e=>{tt(...e)})),We=[]}))}));var nt,ot=e=>{Me=e},it=()=>Me,at=D.convertComponentAliasToRoute;var st=(e,t)=>{if(null!=Z[t]){var r=B();r._triggerBeforeShareAppMessage(t);var{chatroomUsername:n,scene:o}=r.getInnerEnterOptionsSync(),{openType:a}=e.detail||{},s=e.origin||"weixin",l=((e,t)=>{var r,n=e,o=Z[t],i=o.page;if(te(i,"onShareAppMessage")&&(r="onShareAppMessage"),r){A(`Invoke event ${r} in page: ${o.route}`);var a={from:e.fromShareButton?"button":"menu",target:e.target};e.webViewUrl&&(a.webViewUrl=e.webViewUrl);var s=C.call(i,r,a)||{},l=s.promise;delete s.promise,h(l)||(l=Promise.resolve(s));var u=new Promise((e=>setTimeout(e,3e3,s)));return Promise.race([u,l]).then((t=>(n.title=t.title&&"string"==typeof t.title?t.title:e.title,n.desc=t.desc&&"string"==typeof t.desc?t.desc:e.desc,n.path=t.path&&"string"==typeof t.path?R(at(t.path)):e.path,"string"==typeof t.imageUrl&&(t.imageUrl&&!/^(http|https|wxfile|cloud):\/\//.test(t.imageUrl)?n.imageUrl=B()._getRealRoute(t.imageUrl,!1):n.imageUrl=t.imageUrl),n.toCurrentGroup=t.toCurrentGroup,t.cacheKey&&(n.cacheKey=t.cacheKey),t.webpageUrl&&(n.webpageUrl=t.webpageUrl),"wx60422b707e49ff2e"===m.accountInfo.appId&&(t.bizSourceName&&(n.bizSourceName=t.bizSourceName),t.bizSourceIconUrl&&(n.bizSourceIconUrl=t.bizSourceIconUrl)),n.path.length>0&&"/"===n.path[0]&&(n.path=n.path.substr(1)),B().userShareMenuState.isPrivateMessage?n.disableForward=!0:n.disableForward="boolean"==typeof t.disableForward&&t.disableForward,n.success=t.success,n.cancel=t.cancel,n.fail=t.fail,n.complete=t.complete,n.thumbDataHash=t.thumbDataHash,n.signature=t.signature,tt("share",i),n)))}return Promise.resolve(n)})(e,t);l.then((l=>{var u,c;if(1158===o&&void 0===l.toCurrentGroup&&(l.toCurrentGroup=!0),!0===e.fromShareButton){if(u="shareAppMessageDirectly",c=2,"shareToChatroom"===a&&l.toCurrentGroup){if(1156!==o||!n)return void console.warn(`shareToChatroom:fail scene ${o}, chatroomUsername ${n}`);l.chatroomUsername=n,l.bizType=1,u="shareAppMessageToSpecificContactForFakeNativeDirectly"}}else u="shareAppMessage",l.to=s,c=1;var d=r.getShareCookieString();d&&(l.messageExtraData=l.messageExtraData||{},l.messageExtraData.cookies=d),1158===o&&l.toCurrentGroup&&(u="shareAppMessageToSpecificContactDirectly",l.chatroomUsername=n);ae()&&"wxfe02ecfe70800f46"!==m.accountInfo.appId&&(l.bizType=1,u="shareAppMessageForFakeNative",1156!==o&&1158!==o||!l.toCurrentGroup||(u="shareAppMessageToSpecificContactForFakeNativeDirectly")),l.useDefaultSnapshot=!0,l.webviewId=t,!x()&&r.checkAPIAvailable("share")||(l=T({},l),["success","fail","cancel","complete"].some((e=>"function"==typeof l[e]))&&r.reportRecycledAPI({name:u,strategy:1}),"shareToChatroom"!==a&&(delete l.success,delete l.fail,delete l.cancel,delete l.complete)),B().reportNativeUiEvent("onShareAppMessage",l);var p=()=>{r[u](l,{beforeAll:e=>{var t=it();try{((e,t,r)=>{var n=e.page.__displayReporter;n.checkShowOptions();var o=n.showOptions,a=n.route+".html",s=t.errMsg,l=0,u=e.updateTitle&&e.updateTitle.trim(),c=(m.global&&m.global.window||{}).navigationBarTitleText||"",d=((m.page[a]||{}).window||{}).navigationBarTitleText||"",p=m.host&&m.host.appId||"";s.indexOf(":ok")>=0?l=1:s.indexOf(":fail")>=0?l=2:s.indexOf(":cancel")>=0&&(l=3);var f=[o.scene,o.scene_note,o.sessionid,a,u||d||c,o.apptype,l,0,o.query,r,0,"","",p].map(encodeURIComponent).join(",");i.reportKeyValue({key:"Share",value:f,force:!0}),i.submit()})(t,e,c)}catch(e){}B().reportNativeUiEvent("doShareAppMessage",e),e.errMsg=e.errMsg.replace(/shareAppMessageDirectly|shareAppMessageToSpecificContactForFakeNativeDirectly|shareAppMessageForFakeNative|shareAppMessageToSpecificContactDirectly/,"shareAppMessage"),r.invokeInnerShareCallbacks("shareAppMessage",e),void 0!==e.shareInfos&&e.shareInfos.length>0&&(e.shareTickets=e.shareInfos.filter((e=>e.shareKey&&e.shareName)).map((e=>(r.showUpdatableMessageSubscribeButton({shareKey:e.shareKey}),function(){if(!nt){var e=B();nt=e.ShareInfoStorage,delete e.ShareInfoStorage}return nt}().set(e.shareKey,e.shareName))))),delete e.shareInfos}})};return"string"==typeof l.imageUrl?r.getCloudFileUrl([l.imageUrl],"image",(e=>{l.imageUrl=e.data[0].url,p()})):p(),null})).catch((e=>{console.warn("onShareAppMessage error ",e)}))}};function lt(e,t){if(hasOwnProperty.call(Z,t)){var r=Z[t].page,n=R(r.route);Object.keys(r.options).length>0&&(n+="?"+Object.keys(r.options).map((e=>`${e}=${r.options[e]}`)).join("&")),I(st,"onShareAppMessage")({path:n,title:"",target:e?e.target:void 0,detail:e?e.detail:void 0,fromShareButton:!0},t)}else w("事件警告",`tapShareButton WebviewId: ${t} not found`)}var ut=(e,t)=>{if(null!==Z[t]){var r=e,n="onAddToFavorites",o=Z[t],i=o.page;if(te(i,n)){A(`Invoke event ${n} in page: ${o.route}`);var a={webViewUrl:r.webViewUrl},s=C.call(i,n,a)||{};if(s.title&&"string"==typeof s.title&&(r.title=s.title),s.query&&"string"==typeof s.query){var l=r.path.split("?")[0];r.path=`${l}?${s.query}`}s.imageUrl&&"string"==typeof s.imageUrl&&(/^(https?|wxfile|cloud):\/\//.test(s.imageUrl)?r.imageUrl=s.imageUrl:r.imageUrl=B()._getRealRoute(s.imageUrl,!1)),r.disableForward=s.disableForward||!1}B().getCloudFileUrl([r.imageUrl],"image",(e=>{r.imageUrl=e.data[0].url,B().addToFavorites(r,{})}))}},ct=D.convertComponentAliasToRoute,dt=(e,t)=>{if(e=e||{},null!==Z[t]){var r=Z[t],n=r.page,o=(e=>{if(null===Z[e])return"";var t=Z[e].page,r=t.options||{},n=R(t.route);return Object.keys(r).length&&(n+="?"+Object.keys(r).map((e=>`${e}=${r[e]}`)).join("&")),n})(t),i={path:o,fromButton:!!e.fromButton};if(te(n,"onHandoff")){A(`Invoke event onHandoff in page: ${r.route}`);var a=C.call(n,"onHandoff")||{};a.path&&"string"==typeof a.path&&(i.path=R(ct(a.path)))}B().startHandoff(i)}};function pt(e,t){if(B()._setWxIsInvokeInTapForNavToMiniProgram(),hasOwnProperty.call(Z,t)){var r=Z[t],n=r.page;if(void 0!==m&&m.tabBar&&m.tabBar.list&&m.tabBar.list[e.index]){var o={index:e.index,pagePath:(m.tabBar.list[e.index].pagePath||"").replace(/\.html$/,""),text:m.tabBar.list[e.index].text};if(o.pagePath!==r.route)return;te(n,"onTabItemTap")&&(A(`Invoke event onTabItemTap in page: ${r.route}`),D.wrapTapMark((()=>{C.call(n,"onTabItemTap",o)})))}}}var ft=!1,ht=()=>ft,_t=null,gt=()=>_t,vt=e=>{_t=e},mt=[],yt={},bt=[],wt=e=>{bt=e},At=()=>bt,Et={},It=Object.prototype.hasOwnProperty,St={},Ct=(e,t)=>{St[e]=t,D.setPageType(e,t)},Tt=e=>-1!==mt.indexOf(e.route)||-1!==mt.indexOf(e.route+".html"),Ot=e=>It.call(Z,e)?Z[e]:null,xt=e=>!!(e=>{for(var t=0;t<m.pages.length;t++)if(m.pages[t]===e)return!0;return!1})(e)||void 0!==yt[e],Nt=()=>{if(0!==At().length)return At()[At().length-1].webviewId},Rt=e=>{var t=[];return At().forEach((r=>{e&&(e=>{if(/^__wx__\//.test(e=e||""))return"//";var t=e.match(/(?:^|\/)__plugin__\/(.*?)\//);return t?t[1]:"/"})(r.route)!==e?t.push(null):t.push(r.page)})),t},Pt=()=>Rt("/"),Dt=()=>At().map((e=>e.webviewId)),Lt=e=>It.call(Z,e)?Z[e].page:null,Bt=()=>Et,kt=!1,Mt=function(e){kt=e},Ft=function(){return kt},jt=Object.prototype.toString;function Ut(e){var t=Wt(e);return null!==t?t:$t(e)}function $t(e){if("function"==typeof e)return Mt(!0),e;var t=jt.call(e);if("[object Array]"===t)return[];if("[object Object]"===t){var r;if(e.constructor===Object)return{};var n=Object.getPrototypeOf(e);if(n&&n.constructor!==Object&&"Object"===(null===(r=n.constructor)||void 0===r?void 0:r.name)&&n.hasOwnProperty&&e instanceof Object)return{}}if("[object Date]"===t)return new Date(e.getTime());if("[object RegExp]"===t){Mt(!0);var o=String(e),i=o.lastIndexOf("/");return new RegExp(o.slice(1,i),o.slice(i+1))}return Mt(!0),null}function Wt(e){var t=typeof e;return null!==e&&"object"!==t&&"function"!==t?e:null}function qt(e){var t=typeof e;return null!==e&&("function"===t||"object"===t)}function Ht(e,t,r){if(null===e)return null;var n=Wt(e);if(null!==n)return n;for(var o=[...Object.keys(e),...Object.getOwnPropertySymbols(e)],i=0,a=o.length;i<a;++i){var s=o[i],l=e[s],u=qt(l),c=void 0,d=void 0;if(u&&r.has(l))d=r.get(l);else{var p=Ut(l);c=null!==p?p:l,u&&r.set(l,c)}t[s]=d||Ht(l,c,r)}return t}var Gt=function(e){if(Mt(!1),null===e)return null;var t=Wt(e);if(null!==t)return t;var r=$t(e),n=null!==r?r:e,o=new WeakMap;return o.set(e,n),Ht(e,n,o)},Qt=["onLoad","onReady","onShow","onRouteDone","onHide","onUnload","onResize"];var zt=class{static create(e,t,r){var n=B(),o=n.getLogManager();s.info(`[PageManager] create new page, route=${t}, componentMode=true`);var a=D.addView(e,t,(function(e){var t=P.Element.getMethodCaller(this),n=t[e]||d,o=[];return"onLoad"===e?o=[r]:"onShow"===e?this.triggerPageLifeTime("show",o):"onHide"===e?this.triggerPageLifeTime("hide",o):"onResize"===e?this.triggerPageLifeTime("resize",o):"onRouteDone"===e&&this.triggerPageLifeTime("routeDone",o),n.apply(t,o)})),u=P.Element.getMethodCaller(a),c=D.getOwnerPluginAppId(u);if(u.__wxWebviewId__=e,u.__route__=t,u.route=t,u.__displayReporter=new Y(t,2),a.__customConstructor__===D.Page){var p=a.getRootBehavior().methods,f=u.__freeData__;for(var h in p)u[h]=p[h].bind(u);for(var _ in f)u[_]=Gt(f[_]),Ft()&&w("Free data",`Free data with key "${_}" of page "${u.is}" seems not a simple value. Result of deep cloning this value in page instantiation may be unexpected. Consider assigning this value at the beginning of onLoad method.`)}var g=l.getCurrentRoutePath(),v=l.getCurrentFullyRoutePath();u.__callPageLifeTime__=function(e,...t){s.info(`[Lifetime] call Page.${e}, is=${u.is}`);var r=this[e]||d;if(i.__route__=this.__route__,i.__method__=e,"onLoad"===e)u.__displayReporter.setQuery(...t);else if("onShow"===e)u.__hasReportHide__=!1,u.__hasReportExit__=!1,u.__displayReporter.reportShowPage();else if("onReady"===e)u.__displayReporter.setReadyTime(Date.now());else if("onHide"===e||"onUnload"===e){var n=this.__toRoute__,o=this.__isBack__,c=this.__notReportHide__,p=u.__hasReportExit__;delete this.__toRoute__,delete this.__isBack__,delete this.__notReportHide__,delete u.__hasReportExit__,c||p||(u.__displayReporter.reportHidePage(n,o),u.__hasReportHide__=!0)}"onShow"===e?a.triggerPageLifeTime("show",t):"onHide"===e?a.triggerPageLifeTime("hide",t):"onResize"===e?a.triggerPageLifeTime("resize",t):"onRouteDone"===e&&a.triggerPageLifeTime("routeDone",t),l.traceLife(e,{path:g,fullyPath:v}),A(`${this.__route__}: ${e} have been invoked`);var f=r.apply(this,t);return i.__route__=i.__method__="",f},Qt.forEach((t=>{var r=u[t];u[t]=function(...a){var l,u=r||d;n.traceBeginEvent("LifeCycle",`Page.${t}`,{path:this.__route__,id:e});try{var p=Date.now();l=u.apply(this,a);var f=Date.now()-p;f>1e3&&i.slowReport({key:"pageInvoke",cost:f,extend:`at "${this.__route__}" page lifeCycleMethod ${t} function`}),o&&o.logApiInvoke&&o.log(`page ${this.__route__} ${t} have been invoked`),s.info(`component page ${this.__route__} ${t} have been invoked`)}catch(e){i.thirdErrorReport({source:c,error:e,extend:`at "${this.__route__}" page lifeCycleMethod ${t} function`})}return n.traceEndEvent(),l}.bind(u)}));var m="function"==typeof u.onShareAppMessage;m&&n.showShareMenu();var y="function"==typeof u.onShareTimeline;return m&&y&&n.showShareTimelineMenu(),{page:u,node:a}}static destroy(e){D.removeView(e.__wxWebviewId__)}},Yt=["onLoad","onReady","onShow","onRouteDone","onHide","onUnload","onResize"],Kt=["__wxWebviewId__","__route__"],Vt=["route"];class Jt{static create(e,t,r){var n=new Jt(e,t,r),o=n.__wxExparserNode__;return delete n.__wxExparserNode__,{page:n,node:o}}static destroy(e){D.removeView(e.__wxWebviewId__)}constructor(e,t,r){var n=this;s.info(`[PageManager] create new page, route=${t}, componentMode=false`);var o={__wxWebviewId__:e,__route__:t};Kt.forEach((e=>{Object.defineProperty(this,e,{set(){w("关键字保护",`should not change the protected attribute ${e}`)},get:()=>o[e]})}));var a=B(),u=a.getLogManager(),c=D.addView(e,t,(function(e){var t=P.Element.getMethodCaller(this),n=t[e]||d,o=[];return"onLoad"===e?o=[r]:"onShow"===e?this.triggerPageLifeTime("show"):"onHide"===e?this.triggerPageLifeTime("hide"):"onResize"===e?this.triggerPageLifeTime("resize"):"onRouteDone"===e&&this.triggerPageLifeTime("routeDone"),n.apply(t,o)})),f=P.Element.getMethodCaller(c),h=D.getOwnerPluginAppId(f);this.__wxExparserNode__=c,this.__wxComponentInst__=f,P.Element.setMethodCaller(c,this);var _=Bt(),g={};hasOwnProperty.call(_,t)?g=_[t]:console.info(`Page "${t}" has not been registered yet.`),g.data=g.data||{},v(g.data)||b("Page data error","Page.data must be an object");var m=JSON.stringify(g.data);this.data=JSON.parse(m),this.__viewData__=JSON.parse(m),this.__displayReporter=new Y(t,1);var y=l.getCurrentRoutePath(),E=l.getCurrentFullyRoutePath();this.__callPageLifeTime__=function(e,...t){s.info(`[Lifetime] call Page.${e}, is=${f.is}`);var r=(this[e]||d).bind(this);if(i.__route__=this.__route__,i.__method__=e,"onLoad"===e)this.__displayReporter.setQuery(...t);else if("onShow"===e)this.__displayReporter.reportShowPage(),this.__hasReportHide__=!1,this.__hasReportExit__=!1;else if("onReady"===e)this.__displayReporter.setReadyTime(Date.now());else if("onHide"===e||"onUnload"===e){var n=this.__toRoute__,o=this.__isBack__,a=this.__notReportHide__,u=this.__hasReportExit__;delete this.__toRoute__,delete this.__isBack__,delete this.__notReportHide__,delete this.__hasReportExit__,a||u||(this.__displayReporter.reportHidePage(n,o),this.__hasReportHide__=!0)}l.traceLife(e,{path:y,fullyPath:E}),A(`${this.__route__}: ${e} have been invoked`);var c=r.apply(this,t);return i.__route__=i.__method__="",c},Yt.forEach((t=>{this[t]=function(...r){var n,o=(g[t]||d).bind(this);try{var l=Date.now();a.traceBeginEvent("LifeCycle",`Page.${t}`,{path:this.__route__,id:e}),n=o.apply(this,r),a.traceEndEvent();var c=Date.now()-l;c>1e3&&i.slowReport({key:"pageInvoke",cost:c,extend:`at ${this.__route__} page lifeCycleMethod ${t} function`}),u&&u.logApiInvoke&&u.log(`page ${this.__route__} ${t} have been invoked`),s.info(`page ${this.__route__} ${t} have been invoked`)}catch(e){i.thirdErrorReport({source:h,error:e,extend:`at ${this.__route__} page lifeCycleMethod ${t} function`})}return n}.bind(this)}));var I=function(e){(e=>-1!==Kt.indexOf(e))(e)?w("关键字保护",`Page's ${e} is write-protected`):(e=>{for(var t=0;t<Yt.length;++t)if(Yt[t]===e)return!0;return"data"===e})(e)||("Function"===p(g[e])?n[e]=function(...t){var r;i.__route__=this.__route__,i.__method__=e,a.traceBeginEvent("User Script",`Page.${e}`,{path:this.__route__});try{var n=Date.now();r=g[e].apply(this,t);var o=Date.now()-n;o>1e3&&i.slowReport({key:"pageInvoke",cost:o,extend:`at ${this.__route__} page ${e} function`})}catch(t){i.thirdErrorReport({source:h,error:t,extend:`at ${this.__route__} page ${e} function`})}return a.traceEndEvent(),i.__route__=i.__method__="",r}.bind(n):(n[e]=Gt(g[e]),Ft()&&w("Free data",`Free data with key "${e}" of page "${c.is}" seems not a simple value. Result of deep cloning this value in page instantiation may be unexpected. Consider assigning this value at the beginning of onLoad method.`)))};for(var S in g)I(S);var C={route:t};Vt.forEach((e=>{Object.prototype.hasOwnProperty.call(this,e)||(this[e]=C[e])}));var T="function"==typeof g.onShareAppMessage;T&&a.showShareMenu();var O="function"==typeof g.onShareTimeline;T&&O&&a.showShareTimelineMenu()}setData(e,t){var r=B();try{var n=p(e);if("Object"!==n)return void b("类型错误",`setData accepts an Object rather than some ${n}`);r.traceBeginEvent("Framework","setData"),Object.keys(e).forEach((t=>{void 0===e[t]&&b("Page setData warning",'Setting data field "'+t+'" to undefined is invalid.');var r=se(t),{obj:n,key:o}=le(this.data,r);if(n&&(n[o]=Gt(e[t])),void 0!==e[t]){var{obj:i,key:a}=le(this.__viewData__,r);i&&(i[a]=Gt(e[t]))}})),this.__wxComponentInst__.setData(JSON.parse(JSON.stringify(e)),t)}catch(e){E(e)}finally{r.traceEndEvent()}}pageScrollTo(e){B().publishPageScrollTo(e,[this.__wxWebviewId__])}}var Xt=Jt;var Zt,er=class{static emit(e,t,r){var n=B();n.traceBeginEvent("Framework","sendInitData"),n.invokeWebviewMethod("appDataChange",e,[t],r),n.traceEndEvent()}},tr=e=>{Zt=e},rr=Date.now(),nr=262144,or={isInit:!1};M((e=>{e.subscribeSubjectInfo((e=>{or.isInit=e.isInit}))}));var ir,ar=F("Framework","publishInitData",I(((e,r,n,{statesData:o,isPageReload:i,isPrerender:a,isLaunch:u})=>{A("Update view with init data"),s.info(`[publishInitData] prepare init data to webview ${r}`);var c=e.page,d={},p=B();l.shouldStartReport()&&(d.traceActionReportInfo={eventType:l.getReportEvent(),textContentMaxLayer:l.getTextContentMaxLayer(),textContentMaxLength:l.getTextContentMaxLength()}),d.wechatLibVersion=(void 0!==t?t.version:"")||"",d.webviewId=r,d.enablePullUpRefresh=te(c,"onReachBottom"),d.enablePageScroll=te(c,"onPageScroll"),d.onReachBottomDistance=(e=>{try{if("number"==typeof m.page[`${e}.html`].window.onReachBottomDistance)return m.page[`${e}.html`].window.onReachBottomDistance}catch(e){return 50}return 50})(c.__route__),d.statesData=o,d.scene=Zt,d.route=c.__route__,d.query=c.options,d.lastRoute=e.lastRoute,d.lastQuery=e.lastQuery,d.wxConfig={accountInfo:m&&m.accountInfo||{},appContactInfo:m&&m.appContactInfo||{},appLaunchInfo:m&&m.appLaunchInfo||{},plugins:m&&m.plugins||{}},d.windowConfig=m&&m.page&&m.page[c.__route__+".html"]&&m.page[c.__route__+".html"].window||{},d.debug=m&&m.debug,d.appId=m&&m.accountInfo&&m.accountInfo.appId,d.appLaunchTime=X.appLaunchTime,d.appFgTime=X.appFgTime,d.isTabBarPage=e.isTabBarPage,d.isMainTabBarPage=e.isMainTabBarPage,d.navigationStyle=m&&m.global&&m.global.window&&m.global.window.navigationStyle,d.packageType=(e=>{if(m&&m.subPackages&&m.subPackages.length){for(var t=0;t<m.subPackages.length;t++){var r=m.subPackages[t];if(0===e.indexOf(r.root))return r.independent?"independent":"normal"}return"main"}return"none"})(c.__route__),d.needGetSubjectInfo=!or.isInit,d.subPackages=m.subPackages,d.isReload=i,d.adInfo={preloadVideoAdUnitIds:p.getPreloadVideoAdUnitIds(),preloadAdUnitIds:p.getPreloadAdUnitIds()},d.permissionBytes=p.getCachePermissionBytes(),d.fontFaceRecords=p.fontFaceRecords,d.fontSizeSetting=p.getStaticSystemInfoSync().fontSizeSetting,d.prerender=a,d.isLaunch=u,d.extendedLibList=m.extendedLibList;var f={ext:d,options:{firstRender:!0,timestamp:n,path:c.__route__}};if(o){var h=JSON.stringify(f),_=h.length;if(_>nr){for(var g=[],v=0;_>v;)g.push(h.substr(v,nr)),v+=nr;for(var y=++rr,b=0,w=g.length;b<w;b++)er.emit({isSplitData:!0,splitInfo:{id:y,index:b+1,total:w,data:g[b]}},r);return void tt("pageReady",c)}}s.info(`[publishInitData] publish init data to webview ${r}`),er.emit(f,r),tt("pageReady",c)}))),sr=(e,t,r)=>{i.speedReport({key:e,timeMark:{startTime:t,endTime:r}})},lr=e=>{ir=e},ur="",cr=()=>ur,dr=e=>{ur=e},pr=F("Framework","openNewPage",((e,t,r,n,o={})=>{var i=ir;lr(void 0);var a=B(),u=ee(e);o.isMainTabBarPage&&"reLaunch"===o.openType&&D.destroyCustomTabBarManager(),X.newPageTime=Date.now(),dr(e);var c=u?zt.create(r,e,n):Xt.create(r,e,n),d=c.page,p=Gt(n);ot({page:d,webviewId:r,route:e,rawPath:t,lastRoute:it()?it().route:"",lastQuery:it()?it().page.options:{},node:c.node}),it().isTabBarPage=Tt(it()),it().isMainTabBarPage=o.isMainTabBarPage||!1,At().push(it());var f=a._getOpenerEventChannel();f&&(d.__eventChannel=f),d.__exitState__=i;var h={};if(Object.keys(p).forEach((e=>{var t=p[e];try{h[e]=decodeURIComponent(t)}catch(r){h[e]=t}})),a.traceBeginEvent("Framework","attachViewService"),D.attachView(r,h),a.traceEndEvent(),/^__wx__\//.test(e)){var _={};if(/^__wx__\/open-api-redirecting-page/.test(e))_=h,s.info(`[openNewPage] route ${e} is open api page`),Object.assign(_,Be()||{});else if(/^__wx__\/functional-page/.test(e)){s.info(`[openNewPage] route ${e} is functional page`);var g=De();g&&g.functionalPage&&(_=Object.assign({},g.functionalPage,{accountInfo:m.accountInfo}))}s.info(`[openNewPage] wx special page, setting data [${JSON.stringify(_)}]`),d.setData(_)}else if(/^wx:\/\/inner-page/.test(e)){var v;v=h,s.info(`[openNewPage] route ${e} is inner page`),Object.assign(v,Be()||{}),d.setData(v)}d.options=p,ar(it(),r,X.newPageTime,{statesData:void 0,isPageReload:!1,isPrerender:o.prerender||!1,isLaunch:!!o.isLaunch}),x()&&(__wxAppData[e]=d.data,__wxAppData[e].__webviewId__=r,a.publishUpdateAppData()),o.initialRenderingCacheData&&d.setData(o.initialRenderingCacheData),void 0!==l&&l.traceNewRoute(m.page,m.global),d.__callPageLifeTime__("onLoad",n),d.__callPageLifeTime__("onShow"),Z[r]={page:d,route:e,rawPath:t,webviewId:r,statesData:null,framesetViewId:o.framesetViewId,node:u?c.node:void 0},tt("pageLoad",d),tt("enterPage",d),sr("appRoute2newPage",X.appRouteTime,X.newPageTime)})),fr=F("Framework","onAppLaunch",((e,t,r,n,o,i)=>{X.appLaunchTime=Date.now(),X.appFgTime=Date.now();var a=B();hasOwnProperty.call(Z,r)?b("Page route 错误(system error)",`appLaunch with an already exist webviewId ${r}`):pr(e,t,r,n,{isMainTabBarPage:Tt({route:e}),initialRenderingCacheData:o,prerender:i,isLaunch:!0});var s=a.getLaunchOptionsSync().scene;[1001,1003,1023,1038,1056,1080,1083,1089,1090,1103,1104,1112,1113,1114,1117,1127,1131,1134].indexOf(s)<0||a.loadExitState(((e,t,r)=>{"latestPage"===e?setTimeout((()=>{lr(r),a.route.redirectTo({url:t})}),0):"homePageAndLatestPage"===e?setTimeout((()=>{lr(r),a.route.navigateTo({url:t})}),0):lr(r)}))})),hr=F("Framework","hidePage",((e,t)=>{e.page.__toRoute__=t,ht()||e.page.__callPageLifeTime__("onHide"),tt("leavePage",e.page),B().uploadUserLogOnHide(e.route)})),_r=F("Framework","unloadPage",((e,t,r,n)=>{B()._triggerBeforeUnloadPage(e.webviewId),e.page.__toRoute__=t,e.page.__isBack__=r,e.page.__notReportHide__=n,e.page.__callPageLifeTime__("onUnload"),e.node&&zt.destroy(e.page),x()&&(delete __wxAppData[e.route],B().publishUpdateAppData()),delete Z[e.webviewId];for(var o=At().length-1;o>=0&&At()[o].webviewId!==e.webviewId;o--);if(o>=0&&At().splice(o,1),At().length){var i=At()[At().length-1];dr(i.route);var a=(e=>{var t=void 0;for(var r in de)if(de[r]===e){t=r;break}return t})(i.webviewId);a&&f.setCurrentFrameView(a)}else dr("");tt("pageUnload",e.page),tt("leavePage",e.page),B().uploadUserLogOnHide(e.route),B().recordUnloadWebviewIdForUserBehaviorAnalytics(e.webviewId)})),gr=F("Framework","onSwitchTab",((e,t,r,n,o)=>{var i=!0,a=!0,s=!0;if(0!==At().length){for(;At().length>1;){var l=!0;s&&(l=!1,s=!1),gt()&&gt().webviewId===At()[At().length-1].webviewId?(wt(At().slice(0,At().length-1)),At().length?dr(At()[At().length-1].route):dr(""),i=!1):(_r(At()[At().length-1],e,!1,l),i=!1)}if(At()[0].webviewId===r)ot(At()[0]),i||ht()||it().page.__callPageLifeTime__("onShow");else{var u=!0;if(s&&(u=!1,s=!1),Tt(At()[0])?(a=!1,i&&hr(At()[0],e)):gt()&&gt().webviewId===At()[0].webviewId?(wt(At().slice(0,At().length-1)),dr("")):_r(At()[0],e,!1,u),hasOwnProperty.call(Z,r)){var{page:c,node:d}=Z[r];ot({webviewId:r,route:e,page:c,node:d}),wt([it()]),ht()||c.__callPageLifeTime__("onShow"),tt("enterPage",c),tt("switchTab",c)}else wt([]),pr(e,t,r,n,{isMainTabBarPage:a,initialRenderingCacheData:o})}}else pr(e,t,r,n,{initialRenderingCacheData:o})})),vr=F("Framework","onReLaunch",((e,t,r,n,o,i,a)=>{var s=!1;for("reLaunch"===o&&(s=!0);At().length>0;){var l=!0;s&&(l=!1,s=!1),_r(At()[At().length-1],e,!1,l)}Object.keys(Z).forEach((t=>{_r(Z[t],e,!1,!0)})),_e(e),pr(e,t,r,n,{isMainTabBarPage:Tt({route:e}),initialRenderingCacheData:i,prerender:a,openType:o})})),mr=F("Framework","onRedirectTo",((e,t,r,n,o)=>{it()&&_r(it(),e),_e(e),hasOwnProperty.call(Z,r)?b("Page route 错误(system error)",`redirectTo with an already exist webviewId ${r}`):pr(e,t,r,n,{initialRenderingCacheData:o})})),yr=F("Framework","onNavigateToPip",((e,t,r,n,o)=>{it()&&hr(it(),e),_e(e),"min"===o?(vt(At()[At().length-1]),hasOwnProperty.call(Z,r)?b("Page route 错误(system error)",`navigateTo with an already exist webviewId ${r}`):pr(e,t,r,n)):"max"===o?gt()&&(dr(e),ot(gt()),At().push(it()),it().page.__callPageLifeTime__("onShow"),vt(null)):b("Page route 错误(system error)","navigateTo with unexpected pipMode")})),br=F("Framework","onNavigateTo",((e,t,r,n,o)=>{it()&&hr(it(),e),_e(e),hasOwnProperty.call(Z,r)?b("Page route 错误(system error)",`navigateTo with an already exist webviewId ${r}`):pr(e,t,r,n,{initialRenderingCacheData:o})})),wr=F("Framework","unloadPagePip",(()=>{var e=gt();e&&(vt(null),At().findIndex((t=>t.webviewId===e.webviewId))>=0||(B()._triggerBeforeUnloadPage(e.webviewId),e.page.__callPageLifeTime__("onUnload"),e.node&&zt.destroy(e.page),x()&&(delete __wxAppData[e.route],B().publishUpdateAppData()),delete Z[e.webviewId],tt("pageUnload",e.page),tt("leavePage",e.page),B().uploadUserLogOnHide(e.route)))})),Ar=F("Framework","minimizePage",(e=>{hr(e),wt(At().slice(0,At().length-1)),At().length?dr(At()[At().length-1].route):dr("")})),Er=F("Framework","onNavigateBack",((e,t=!1)=>{for(var r=!1,n=Z[e]&&Z[e].route,o=At().length-1;o>0;o--){var i=At()[o];if(i.webviewId===e){r=!0,ot(i);break}!t&&gt()&&gt().webviewId===i.webviewId?wt(At().slice(0,At().length-1)):t&&gt()&&gt().webviewId===i.webviewId?Ar(i,n,!0):_r(i,n,!0)}if(1===At().length&&!r){var a=At()[0];if(a.webviewId===e)r=!0,ot(a);else if(Tt(a)&&hasOwnProperty.call(Z,e)){r=!0;var{page:s,node:l}=Z[e];ot({webviewId:e,route:n,page:s,node:l})}dr(it().route)}if(_e(n),r){ht()||(it().page.__callPageLifeTime__("onShow"),Tt(it().page)&&D.showTabBar(e)),tt("enterPage",it().page);var u=De();Le({}),u&&u.functionalPage&&e&&B().publishFunctionalPage(u.functionalPage,[e]),u&&u.functionalPage&&"string"==typeof u.functionalPage.callbackId&&u.functionalPage.callbackId.startsWith("RPP")&&B().requestPluginPaymentEmitter.emit(u.functionalPage)}else b("Page route 错误(system error)",`navigateBack with an unexist webviewId ${e}`)})),Ir=F("Framework","onNavigateBack",((e,t)=>{"min"===t?(vt(At()[At().length-1]),Er(e,!0)):"max"===t&&(vt(null),Er(e))})),Sr=F("Framework","handleAppRoute",((e,t,r,n,o,i,a,s)=>{var l=Object.keys(r).map((e=>encodeURIComponent(e)+"="+r[e])).join("&"),u="/"+e+(l?"?"+l:"");A(`On app route: ${e} (${n}), renderer: ${a.renderer}`),X.appRouteTime=Date.now(),ht()?fe(e,u,t,r,s,n):"navigateTo"===n?o?yr(e,u,t,r,o):br(e,u,t,r,i):"redirectTo"===n?mr(e,u,t,r,i):"navigateBack"===n?o?Ir(t,o):Er(t):"switchTab"===n?gr(e,u,t,r,i):"appLaunch"===n?fr(e,u,t,r,i,a.prerender):"reLaunch"===n||"autoReLaunch"===n?vr(e,u,t,r,n,i,a.prerender):"dismissPip"===n?gt()&&wr():b("Page route 错误(system error)",`Illegal open type: ${n}`)})),Cr=null;function Tr(e){var t=e.path,r=e.webviewId,n=e.viewId,o=e.query||{},i=e.openType,a=e.pipMode,l=e.initialRenderingCacheData;if("appLaunch"===i&&e.frameset&&(s.info("[onAppRoute] switching to frameset mode by onAppRoute#appLaunch"),ft=!0),Ct(r,e.renderer),!l&&e.appserviceData)try{l=JSON.parse(e.appserviceData)}catch(e){}Cr&&Cr(),e.resizing?(s.info("Delayed onAppRoute due to resizing"),Cr=I((()=>{Cr=null,s.info("Delayed onAppRoute executed"),Sr(t,r,o,i,a,l,e,n)}),"onAppRoute")):Sr(t,r,o,i,a,l,e,n)}function Or(){Cr&&Cr()}var xr=F("Framework","handleAppRouteDone",(()=>{it()&&it().page.__callPageLifeTime__("onRouteDone")}));function Nr(e){e.webviewId===(it()&&it().webviewId)?xr():b("Page route 错误(system error)",`routeDone with a webviewId ${e.webviewId} that is not the current page`)}var Rr=F("Framework","onPageReload",((e,t)=>{if(A(`On page reload: ${e}`),hasOwnProperty.call(Z,t)){var r=ee(e),n=Z[t].statesData;Z[t].statesData=void 0,D.restoreView(t),ar(Z[t],t,Date.now(),{statesData:n||{},isPageReload:!0,isPrerender:!1,isLaunch:!1}),((e,{pageCount:t,pageType:r})=>{var n=j[e]||{},o=[t,r,n.rootCompCount||0,n.rootCustomCompCount||0,n.rootCustomCompRatio||0,n.rootInternalCompCount||0].map(encodeURIComponent).join(",");j[e]={},i.reportKeyValue({key:"WebviewRestore",value:o}),i.submit()})(t,{pageCount:At().length,pageType:r?2:1})}else b("Page reload(system error)",`Can not find webviewId ${t}`)}));function Pr(e){var t=e.path,r=e.webviewId;Rr(t,r)}var Dr=(e,t,r)=>{var n;return r._userTap?D.wrapTapMark((()=>{n=C.call(e,t,r)})):n=C.call(e,t,r),n},Lr=F("Framework","openNewXrFrame",((e,t,r,n,o)=>{var i=B();Ct(t,"xr-frame");var a=D.addView(t,e,null,n,o),s=P.Element.getMethodCaller(a),l=P.Observer.create((e=>{"attached"===e.status?(i.traceBeginEvent("Framework","attachViewService"),D.attachView(t,{},!1),i.traceEndEvent(),ar({page:s},t,X.newPageTime,{statesData:void 0,isReload:!1,prerender:!1,isLaunch:!1})):"detached"===e.status&&(D.removeView(t,!1),l.disconnect())}));return l.observe(a,{attachStatus:!0}),s.__wxWebviewId__=t,s.__route__=e,s.route=e,s.__displayReporter=new Y(e,2),a})),Br=D.convertComponentAliasToRoute,kr=D.convertRouteToComponentAlias,Mr=(t,r,n,o,i={})=>{var a=i.__wxRoute||e.g.__wxRoute||o.replace(/\.js$/,"")||"",s=B();if(s.traceBeginEvent("User Script","Page constructor",{path:a}),!i.__wxRouteBegin&&!__wxRouteBegin){if(!a)throw b("Page 注册错误",'Please do not call Page constructor in files that not listed in "pages" section of app.json or plugin.json'),s.traceEndEvent(),new S('Please do not call Page constructor in files that not listed in "pages" section of app.json or plugin.json');throw b("Page 注册错误",`Please do not register multiple Pages in ${a}.js`),s.traceEndEvent(),new S(`Please do not register multiple Pages in ${a}.js`)}i.__wxRouteBegin?i.__wxRouteBegin=!1:__wxRouteBegin=!1;var l=kr(a),u=Br(l),c=ee(u);if("Object"!==p(t))throw b("Page 注册错误",`Options is not object: ${JSON.stringify(t)} in ${a}.js`),s.traceEndEvent(),new S(`Options is not object: ${JSON.stringify(t)} in ${a}.js`);A(`Register: ${l}`);var d=D.Page(t,r,n,c&&o?o:__wxRoute+".js");Et[u]=c?P.Component._list[d]:t,yt[u]=!0,s.traceEndEvent()},Fr=D.convertComponentAliasToRoute,jr=(e,t,r,n,o={})=>{B().traceBeginEvent("User Script","Component constructor");var i=!1;(o.__wxRouteBegin||__wxRouteBegin)&&(i=!0),o.__wxRouteBegin?o.__wxRouteBegin=!1:__wxRouteBegin=!1;var a=D.Component(e,t,r,n),s=Fr(a);return a&&(Et[s]=P.Component._list[a]),yt[s]=i,B().traceEndEvent({path:s}),String(a)},Ur=D.convertComponentAliasToRoute;D.convertRouteToComponentAlias;m.onReady((()=>{var e=m.page||{},t=m.global?m.global.window:{};Object.keys(e).forEach((r=>{e[r].window=Object.assign({},t,e[r].window)})),m.tabBar&&m.tabBar.list&&"object"==typeof m.tabBar.list&&"function"==typeof m.tabBar.list.forEach&&m.tabBar.list.forEach((e=>{mt.push(e.pagePath)})),m.appLaunchInfo&&"string"==typeof m.appLaunchInfo.path&&dr(m.appLaunchInfo.path),tr((m.appLaunchInfo||{}).scene||0)})),M((e=>{e.onAppRoute(I(Tr,"onAppRoute")),e.onAppRouteDone(I(Nr),"onAppRouteDone"),e.onAppRouteResized(Or),e.onPageReload(I(Pr,"onPageReload")),e.onWebviewEvent(I((e=>{var{webviewId:t,eventName:r,data:n,nodeId:o}=e,i=((e,t,r,n)=>{if(hasOwnProperty.call(Z,e)){var o=Z[e],i=o.page;if("__DOMReady"===r)return X.pageReadyTime=Date.now(),A(`Invoke event onReady in page: ${o.route}`),i.__callPageLifeTime__("onReady"),void sr("newPage2pageReady",X.newPageTime,X.pageReadyTime);if("telecontrol"!==r){if(n._requireActive){var a=At(),s=a[a.length-1];if(!s||s.webviewId!==e)return}if(n._relatedInfo&&Y.setEventRelatedInfo(n._relatedInfo),t){var l=D.getNodeById(t,e);if(!l)return;if(l.__isXrFrame__)return void B().dispatchXrFrameEvent(l.__xrFrameId__,n.type,n);var u=P.Element.getMethodCaller(l);return A(`Invoke event ${r} in component: ${l.is}`),te(u,r)?Dr(u,r,n):void w("事件警告",`Do not have ${r} handler in component: ${l.is}. Please make sure that ${r} handler has been defined in ${l.is}.`)}if(A(`Invoke event ${r} in page: ${o.route}`),te(i,r))return Dr(i,r,n);w("事件警告",`Do not have ${r} handler in current page: ${o.route}. Please make sure that ${r} handler has been defined in ${o.route}, or ${o.route} has been added into app.json`)}else{var c=n.type,d="onTelecontrolSelect";if("start"===c)B().publishTelecontrol({type:c,custom:te(i,d)},[e]);else if("next"===c){if(A(`Invoke event ${d} in page: ${o.route}`),!te(i,d))return void w("事件警告",`Do not have ${d} handler in current page: ${o.route}. Please make sure that ${d} handler has been defined in ${o.route}, or ${o.route} has been added into app.json`);var p=Dr(i,d,{current:n.current,target:n.target,key:n.key});if(h(p)){var f=new Promise((e=>setTimeout(e,1e3,"")));Promise.race([p,f]).then((t=>{B().publishTelecontrol({seqId:n.seqId,type:c,res:t},[e])})).catch((()=>{}))}else B().publishTelecontrol({seqId:n.seqId,type:c,res:p},[e])}}}})(t,o,r,n);return i}),"onWebviewEvent")),e.onAppEnterForeground((e=>{X.appFgTime=Date.now(),0!==e.scene&&"0"!==e.scene&&tr(e.scene)})),e.onPullDownRefresh(I(((e,t)=>{(e=>{if(hasOwnProperty.call(Z,e)){var t=Z[e],r=t.page;te(r,"onPullDownRefresh")&&(A(`Invoke event onPullDownRefresh in page: ${t.route}`),C.call(r,"onPullDownRefresh"),tt("pullDownRefresh",r))}else w("事件警告",`onPullDownRefresh WebviewId: ${e} not found`)})(t)}),"onPullDownRefresh")),e.onShareAppMessage(I(st,"onShareAppMessage")),e.onShareTimeline(I(ne,"onShareTimeline")),e.subscribeTapShareButton(lt),e.subscribeTapShareTimeLineButton(ie),e.onAddToFavorites(I(ut,"onAddToFavorites")),e.onStartHandoff(I(dt,"onStartHandoff")),e.subscribeTapHandoffButton(((e,t)=>{I(dt,"onStartHandoff")({fromButton:!0},t)})),e.subscribeSavePageState(I(((e,t)=>{O.call(Z,t)?Z[t].statesData=e:w("事件警告",`onPageWillManuallyTerminate WebviewId: ${t} not found`)}),"savePageState")),e.subscribeRecycleStatistics(I(((e,t)=>{if(O.call(Z,t)){var r=Z[t];((e,{pageCount:t,pageType:r,rootCompCount:n=0,rootCustomCompCount:o=0,rootCustomCompRatio:a=0,rootInternalCompCount:s=0})=>{var l=[t,r].map(encodeURIComponent).join(",");j[e]={rootCompCount:n,rootCustomCompCount:o,rootCustomCompRatio:a,rootInternalCompCount:s},i.reportKeyValue({key:"WebviewRecycle",value:l}),i.submit()})(t,a()({pageCount:At().length,pageType:ee(r.route)?2:1},e))}}),"recycleStatistics")),e.onTabItemTap(I(pt,"tabItemTap")),e.onNavigationBarTitleUpdate((e=>{if(e.errMsg.indexOf(":ok")>=0&&e.title){var t=it();t&&(t.updateTitle=e.title)}})),e.onExitMiniProgramSuccess((()=>{var e=At();if(e.length)if(ht());else{var t=e[e.length-1].page,r=t.__hasReportHide__,n=t.__hasReportExit__;r||n||(t.__displayReporter.reportHidePage(),t.__hasReportExit__=!0)}}))}));var $r=function(e,t){var r=e+"/"+t,n={__wxAppCode__:{},__wxAppCurrentFile__:""},o=B();n.wx=o.createPluginWX(e,t),n.console=o.createPluginConsole(),n.WXWebAssembly=o.createPluginWXWebAssembly(e,t),n.Page=e=>{Mr(e,r,n.__wxAppCode__,n.__wxAppCurrentFile__,n)},n.getCurrentPages=()=>Rt(e),n.Component=e=>jr(e,r,n.__wxAppCode__,n.__wxAppCurrentFile__,n),n.Behavior=e=>D.Behavior(e,r,n.__wxAppCode__,n.__wxAppCurrentFile__),n.publishDomainComponents=e=>D.publishDomainComponents(r,e);var i,a=(e=>{var t=[];m.plugins&&Object.keys(m.plugins).forEach((e=>{var r=m.plugins[e];t.push({alias:e,plugin:r,prefix:""})})),m.subpackages&&m.subpackages.forEach((e=>{e.plugins&&Object.keys(e.plugins).forEach((r=>{var n=e.plugins[r];t.push({alias:r,plugin:n,prefix:e.root})}))}));var r=(()=>{var r=t.filter((t=>t.plugin.provider===e));if(0===r.length)return null;if(1===r.length){var n=r[0].plugin.subpackage||r[0].prefix;return"__APP__"===n&&(n=""),r[0].prefix=n,r[0]}return r.find((e=>""!==e.prefix))})();if(null===r)return null;if(void 0===r.plugin.export)return null;var n=r.prefix||"";return"/"===n[0]&&(n=n.slice(1)),n&&"/"!==n.slice(-1)&&(n+="/"),n+(r.plugin.export||"")})(e);return n.requireMiniProgram=()=>(void 0===i&&(i=null===a?{}:K(a)),i),n.beforeFactory=t=>{var r=o.buildPluginPrivateApi(e);t("__wx__/plugin-private-api",((e,t)=>{t.exports=r}))},n},Wr=()=>$r,qr=e=>$r=e,Hr=(...e)=>$r(...e);"function"==typeof logxx&&logxx("app-service-engine start");var Gr=I((e=>{Mr(e,"/")}),"create page instance"),Qr=I((e=>jr(e,"/")),"create component instance"),zr=I((e=>D.Behavior(e)),"create behavior instance");L=r})();var B=L.Page,k=L.Component,M=L.Behavior,F=.02,j={delayedGwx:!0},U=L.App,$=L.getApp,W=L.getCurrentPages,q=null,H;Object.assign(e,{Page:B,Component:k,Behavior:M,__webview_engine_version__:F,__vd_version_info__:j,App:U,getApp:$,getCurrentPages:W,__pageComponent:q}),(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>y});var r={},n=/^plugin:\/\/([A-Za-z0-9_-]+)[/]?(.*)/,o=e=>{var t=e.match(n);if(t&&3===t.length)return{pluginId:t[1],version:"0",modId:t[2].length>=1?t[2]:void 0}},i=e=>`${e.pluginId}/${e.version}`,a=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"],l=r,c=r,d=e=>{for(var t=[],r=e.split("/"),n=0,o=r.length;n<o;++n){var i=r[n];if(""!==i&&"."!==i)if(".."===i){if(0===t.length){t=null;break}t.pop()}else n+1<o&&".."===r[n+1]?n++:t.push(i)}return t},p=(e,t)=>{var r=c[e],n=d(t+"/index.js").join("/");return r&&r.mods&&r.mods[n]?n:(n=d(t).join("/"),/\.js$/.test(n)||(n+=".js"),r&&r.mods&&r.mods[n]?n:"")},f=(e,t)=>{var r=(e=>{var t=e.match(/(.*)\/([^/]+)?$/);return t&&t[1]?t[1]:"./"})(t);return function(t){if("string"!=typeof t)throw new Error("require args must be a string.");var n=d(t.startsWith("/")?t:`${r}/${t}`);if(!n)throw new Error("can't find module : "+t);var o=n.join("/");return o=((e,t,r,n)=>{var o=t,i=c[e];if(/\.js$/.test(o)||(o+=".js"),"string"==typeof o&&i&&i.mods&&i.mods[o])return o;var a=d(r);if(!a)throw new Error("can't find module : "+n);for(var s,l=t.substring(a.join("/").length);a.length;){var u=a.join("/")+"/miniprogram_npm"+l;if(s=p(e,u))break;a.pop()}return s||(l="/"===l[0]?l:"/"+l,s=p(e,"miniprogram_npm"+l)),s||t})(e,o,r,t),_(e,o)}},_=(e,t)=>{(e=>{if("string"!=typeof e)throw new Error("require args must be a string")})(t);var r=c[e];if(void 0===r)throw new Error(`Plugin "${e}" is not defined.`);var n=r.mods[t];if(void 0===n)throw new Error(`Plugin module "${t}" is not defined.`);if(1===n.status){var o;n.status=2;var i=n.factory,a={exports:{}};i&&(o=i(f(e,t),a,a.exports)),n.exports=void 0!==a.exports?a.exports:o}return n.exports},g=(e,t)=>{var r=t.factory,n=t.global,o={exports:{}};if(!r)return o.exports;var i=(e=>function(t,r){var n=l[e];if(void 0===n)throw new Error(`Sorry, plugin "${e}" is not defined.`);n.mods[t]={status:1,factory:r}})(e),a=(e=>function(t){return _(e,t)})(e),s=n.beforeFactory;delete n.beforeFactory;var u=n.afterFactory;delete n.afterFactory,"function"==typeof s&&s.apply(n,[i,a,o]);var c=r(i,a,o,o.exports,n,n.wx,void 0,n.Page,n.Component,n.Behavior,void 0,n.getCurrentPages,void 0,n.requireMiniProgram,n.WXWebAssembly);return"function"==typeof u&&u.apply(n,[i,a,o]),void 0!==o.exports?o.exports:c},v=(e,t)=>{var r,n,l;(()=>{if(void 0===m||void 0===m.plugins&&void 0===m.gamePlugins)throw new Error("This application has not registered any plugins yet.")})(),(e=>{if("string"!=typeof e)throw new Error("requirePlugin args must be a string.")})(e);var d=o(e),p=void 0===d;if(p||(r=d.pluginId,n=i(d),l=c[n]),void 0===l&&(e=>null!==e.match(/^wx[0-9a-f]{16}$/))(e)&&(r=e,n=i({pluginId:e,version:"0"}),l=c[n]),void 0===l){var f=(e=>{var t=e.match(/([^/]*)\/?(.*)/);if(!t||t.length<2)throw new Error(`Plugin "${e}" has not registered.`);var r=t[1],n=t[2],o=(m.plugins||m.gamePlugins)[r];if(void 0===o)throw new Error(`Plugin "${e}" has not registered.`);return{pluginId:o.provider,version:"0",path:n}})(e);r=f.pluginId,n=i(f),l=c[n]}if("function"!=typeof t){if(void 0===l)throw new Error(`Plugin "${n}" is not defined.`);return 1===l.status&&(l.exports=g(n,l),l.status=2),p?"function"==typeof l.exports?l.exports():void 0:l.exports}if(void 0===l){var _=(e=>{for(var t=m.subPackages||[],r=function(r){if(!t[r].plugins)return"continue";if(Object.keys(t[r].plugins).find((n=>t[r].plugins[n].provider===e))){var n=t[r].root||"";return n&&"/"!==n.slice(-1)&&(n+="/"),{v:n}}},n=0;n<t.length;++n){var o=r(n);if("continue"!==o&&"object"==typeof o)return o.v}return"__APP__"})(r);((e,t)=>{var r="__APP__"===e;r||"/"===e.slice(-1)||(e+="/"),"devtools"===m.platform?(s.info(`[WebNode] injectSubPackages: ${e}`),h.invoke("injectSubPackages",{subPackages:[e]},t)):(s.info(`[WebNode] loadSubpackage: ${e}`),u.loadSubpackage({name:e,success(){var n=Object.values(m.plugins||{}).filter((t=>t.subpackage.includes(e))).map((e=>{var t=e.provider,r=`__plugin__/${t}`;return{plugin_id:t,prefix_path:a.includes(t)?null:r}}));x.injectEntryFile(r?"":e,n),t()}}))})(_,(()=>{t(v(e))}))}else setTimeout((function(){t(v(e))}))};v.async=function(e){return new Promise((function(t,r){try{v(e,(e=>{t(e)}))}catch(e){r(e)}}))};var y={definePlugin:(e,t)=>{var r=o(e);if(!r||!r.pluginId||!r.version)throw new Error('schema must match "plugin://{name}/{version}"');var n=i(r),a=(e=>{if(void 0===L||"function"!=typeof L.__createPluginGlobal)throw new Error("Create plugin global failed.");return L.__createPluginGlobal(e.pluginId,e.version)})(r);l[n]={status:1,factory:t,mods:{},global:a}},requirePlugin:v};H=t.default})();var G=H.definePlugin,Q=H.requirePlugin,z;(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{define:()=>d,require:()=>I,requireOnce:()=>S});var r=globalThis,n={},o={};if(globalThis.wxModuleVersion){var a=~~globalThis.wxModuleVersion;globalThis.enableWxModule=2>a}else globalThis.wxModuleVersion=2,globalThis.enableWxModule=!0;var l=()=>({__wxRoute:r.__wxRoute,__wxAppCurrentFile__:r.__wxAppCurrentFile__,__wxRouteBegin:r.__wxRouteBegin}),c=e=>{r.__wxRoute=e.__wxRoute,r.__wxAppCurrentFile__=e.__wxAppCurrentFile__,r.__wxRouteBegin=e.__wxRouteBegin};function d(e,t){if(n[e]&&n[e].factory){var r=n[e],o=t.toString();r.factoryString||(r.factoryString=r.factory.toString()),o!==r.factoryString&&(n[e]={status:1,factory:t,factoryString:o})}else n[e]={status:1,factory:t}}var p=e=>{if(e&&m.subPackages)for(var t=0,r=m.subPackages.length;t<r;t++)if(0===e.indexOf(m.subPackages[t].root))return m.subPackages[t]},f=e=>{for(var t=[],r=e.split("/"),n=0,o=r.length;n<o;++n){var i=r[n];if(""!==i&&"."!==i)if(".."===i){if(0===t.length){t=null;break}t.pop()}else n+1<o&&".."===r[n+1]?n++:t.push(i)}return t},_=e=>{var t=f(e+"/index.js").join("/");return n[t]?t:(t=f(e).join("/"),/\.js$/.test(t)||(t+=".js"),n[t]?t:"")},g=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"];function v(e,t){var r="__APP__"===e;"/"===e.slice(-1)||r||(e+="/"),"devtools"===m.platform?(s.info("[WebNode] injectSubPackages: "+e),h.invoke("injectSubPackages",{subPackages:[e]},t)):(s.info("[WebNode] loadSubpackage: "+e),u.loadSubpackage({name:e,success(){var n=m.subPackages.find((t=>t.root===e))||{},o=Object.assign({},n.plugins);r&&Object.assign(o,m.plugins);var i=Object.keys(o||{}).map((e=>{var t=o[e].provider,r="__plugin__/"+t;return{plugin_id:t,prefix_path:g.includes(t)?null:r}}));x.injectEntryFile(r?"":e,i),t({errMsg:"loadSubPackage:ok",loaded:!0})},fail(){s.error(`[WebNode] loadSubPackage fail ${e}`),t({errMsg:"loadSubPackage:false",loaded:!1})}}))}var y=e=>{var t=m&&m.subPackages;t||(t=[]);for(var r=0;r<t.length;++r){var n=t[r].root||"";if(n&&"/"!==n.slice(-1)&&(n+="/"),e.slice(0,n.length)===n)return{subPackage:n,independent:!!t[r].independent}}return{subPackage:"__APP__",independent:!1}},b=!1,w=[],A=e=>{Object.keys(e).forEach((t=>{var r=t;t.endsWith("*")&&(r=r.slice(0,-1));var n=e[t];e[t].endsWith("*")&&(n=n.slice(0,-1)),w.push({key:r,value:n})}))};"function"==typeof m.onReady?m.onReady((()=>{"object"==typeof m.resolveAlias&&(b=!!Object.keys(m.resolveAlias).length)&&A(m.resolveAlias)})):"object"==typeof m.resolveAlias&&(b=!!Object.keys(m.resolveAlias).length)&&A(m.resolveAlias);var E=e=>{var t=(e=>{var t=e.match(/(.*)\/([^/]+)?$/);return t&&t[1]?t[1]:"./"})(e),r=function(r,o,a){var s,l=t;if("string"!=typeof r)throw new Error("require args must be a string");if("/__wx__/private-api"===r?s=f(r).join("/"):(b&&(s=(e=>{var t={key:""},r=!1;if(w.forEach((n=>{e.startsWith(n.key)&&t.key.length<n.key.length&&(t=n,r=!0)})),r){var n=e.replace(t.key,t.value);return"/"===n[0]&&(n=n.slice(1)),n}})(r)),void 0!==s?(l="",s=f(s).join("/")):s=f(l+"/"+r).join("/")),!s)throw new Error(`can not find module : ${s}, require args is ${r}`);try{var u=((e,t,r)=>{var o=e;if(/\.js$/.test(o)||(o+=".js"),"string"==typeof o&&n[o])return o;var i=f(t);if(!i)throw new Error("can not find module : "+r);for(var a,s,l=e.substring(i.join("/").length);i.length&&(s=i.join("/")+"/miniprogram_npm"+l,!(a=_(s)));)i.pop();return a||(l="/"===l[0]?l:"/"+l,a=_(s="miniprogram_npm"+l)),a||e})(s,l,r),c=e=>"functional-pages"===f(e)[0];if(c(u)!==c(e)&&i.thirdErrorReport({error:new Error('should not require across "functional-pages" folder'),extend:'at require("'+r+'") in '+e}),"devtools"===m.platform&&m.subPackages&&void 0===o){var d=p(u),h=p(e);d&&d!==h&&console.warn(`Requires "${r}" from "${e}" without a callback may fail in production, since they are in different subPackages`)}return I(u,void 0,o,r,t,a)}catch(e){throw e}};return r.async=e=>new Promise(((t,n)=>{try{return r(e,t,n)}catch(e){n(e)}})),r};function I(e,t,r,i="",a,s){if(void 0===t&&(t=!0),"string"!=typeof e)throw new Error("require args must be a string");var u=n[e];if(!u){var d=-1===e.indexOf("/")?e+"/index.js":e;/\.js$/.test(d="miniprogram_npm/"+d)||(d+=".js"),u=n[d]}if(e.endsWith(".js")||(e+=".js"),!u&&"devtools"!==m.platform&&void 0!==x&&m.isLazyLoad){var p=e.slice(0,e.length-3),f=`${"undefined"!=typeof __LAZY_CODE_LOADING_CHUNK_MAP__&&"string"==typeof __LAZY_CODE_LOADING_CHUNK_MAP__[p]?__LAZY_CODE_LOADING_CHUNK_MAP__[p]:p}.appservice.js`,h=l(),_=x.loadJsFiles([f],null,{waitResult:!0,reportKey:`webnode-require-${e.slice(0,e.length-3)}`});c(h),u=n[e],_&&_(!!u)}if("function"!=typeof r){if(!u)throw new Error(`module '${e}' is not defined, require args is '${""===i?e:i}'`);var g={exports:{}},b=u.factory;if(!t||o[e])return delete u.exports,u.status=1,o[e]=!0,b&&b(E(e),g,g.exports),g.exports;if(1===u.status){var w;u.exports=g.exports,u.status=2;try{b&&(w=b(E(e),g,g.exports))}catch(e){throw u.status=1,e}u.exports=void 0!==g.exports?g.exports:w}return u.exports}var A=t=>{var r="function"==typeof s?s:()=>{},n="async require: fail";"object"==typeof t&&t&&t.message&&(n=t.message),r({errMsg:n,mod:e})},S=function(...e){try{var t=I(...e);r(t)}catch(e){A(e)}};if(u)setTimeout((()=>S(e)));else{var C=l(),T="string"==typeof a&&y(a).independent,{subPackage:O,independent:N}=y(e);!N&&T?v("__APP__",(t=>t&&!1===t.loaded?(A(new Error("loadSubPackage: fail, subPackage: __APP__")),void c(C)):"__APP__"===O?(r(S(e)),void c(C)):void v(O,(t=>{t&&!1===t.loaded?A(new Error(`loadSubPackage: fail, subPackage: ${O}`)):S(e),c(C)})))):v(O,(t=>{t&&!1===t.loaded?A(new Error(`loadSubPackage: fail, subPackage: ${O}`)):S(e),c(C)}))}}function S(e){return I(e,!1)}r.__modules__=n,z=t})();var Y=globalThis.define=z.define,K=globalThis.require=z.require;globalThis.requireOnce=z.requireOnce,e.definePlugin=H.definePlugin,e.requirePlugin=H.requirePlugin,y.onLoad((function(){u.setCloudSDK(R),u.setExparser(P),u.setVirtualDOM(D),u.setAppServiceEngine(L),u.setWebNode(z);var t=u.wx;if(O.condomWX(t),Object.assign(e,u.exportGlobal),"function"==typeof __passWAServiceGlobal__){var r={};r.__appServiceEngine__=L,r.__appServiceSDK__=u,r.__virtualDOM__=D,r.__subContextEngine__=x,r.Protect=C,r.WeixinJSBridge=h,r.Foundation=y,r.exparser=P,r.Reporter=i,__passWAServiceGlobal__(r)}}))})(this);var __WXML_GLOBAL__=__WXML_GLOBAL__||{entrys:{},defines:{},modules:{},ops:[],wxs_nf_init:void 0,total_ops:0},__vd_version_info__=__vd_version_info__||{};__wxRoute=__wxRouteBegin=__wxAppCurrentFile__="";var __WASubContextEndTime__=Date.now();"function"==typeof this.__wxLibrary.onEnd&&this.__wxLibrary.onEnd(),delete this.__wxLibrary;